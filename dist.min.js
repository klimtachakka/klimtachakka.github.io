/*! For license information please see dist.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={7212:function(e,t){var r,a;void 0===(a="function"==typeof(r=function(){"use strict";function e(e,t,r){return(r=r||new Float32Array(3))[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function t(e,t){t=t||new Float32Array(3);var r=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return r>1e-5&&(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r),t}function r(e,t,r){return(r=r||new Float32Array(3))[0]=e[1]*t[2]-e[2]*t[1],r[1]=e[2]*t[0]-e[0]*t[2],r[2]=e[0]*t[1]-e[1]*t[0],r}function a(e,t){const r=e[0]-t[0],a=e[1]-t[1],n=e[2]-t[2];return r*r+a*a+n*n}function n(e,t){t=t||new Float32Array(16);var r=e[0],a=e[1],n=e[2],o=e[3],i=e[4],s=e[5],u=e[6],l=e[7],A=e[8],c=e[9],d=e[10],p=e[11],f=e[12],h=e[13],v=e[14],g=e[15],y=d*g,m=v*p,_=u*g,x=v*l,S=u*p,T=d*l,E=n*g,M=v*o,b=n*p,I=d*o,L=n*l,P=u*o,w=A*h,R=f*c,O=i*h,C=f*s,D=i*c,G=A*s,N=r*h,B=f*a,F=r*c,V=A*a,k=r*s,X=i*a,H=y*s+x*c+S*h-(m*s+_*c+T*h),U=m*a+E*c+I*h-(y*a+M*c+b*h),Y=_*a+M*s+L*h-(x*a+E*s+P*h),W=T*a+b*s+P*c-(S*a+I*s+L*c),j=1/(r*H+i*U+A*Y+f*W);return t[0]=j*H,t[1]=j*U,t[2]=j*Y,t[3]=j*W,t[4]=j*(m*i+_*A+T*f-(y*i+x*A+S*f)),t[5]=j*(y*r+M*A+b*f-(m*r+E*A+I*f)),t[6]=j*(x*r+E*i+P*f-(_*r+M*i+L*f)),t[7]=j*(S*r+I*i+L*A-(T*r+b*i+P*A)),t[8]=j*(w*l+C*p+D*g-(R*l+O*p+G*g)),t[9]=j*(R*o+N*p+V*g-(w*o+B*p+F*g)),t[10]=j*(O*o+B*l+k*g-(C*o+N*l+X*g)),t[11]=j*(G*o+F*l+X*p-(D*o+V*l+k*p)),t[12]=j*(O*d+G*v+R*u-(D*v+w*u+C*d)),t[13]=j*(F*v+w*n+B*d-(N*d+V*v+R*n)),t[14]=j*(N*u+X*v+C*n-(k*v+O*n+B*u)),t[15]=j*(k*d+D*n+V*u-(F*u+X*d+G*n)),t}return{copy:function(e,t){return(t=t||new Float32Array(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},lookAt:function(a,n,o,i){i=i||new Float32Array(16);var s=t(e(a,n)),u=t(r(o,s)),l=t(r(s,u));return i[0]=u[0],i[1]=u[1],i[2]=u[2],i[3]=0,i[4]=l[0],i[5]=l[1],i[6]=l[2],i[7]=0,i[8]=s[0],i[9]=s[1],i[10]=s[2],i[11]=0,i[12]=a[0],i[13]=a[1],i[14]=a[2],i[15]=1,i},addVectors:function(e,t,r){return(r=r||new Float32Array(3))[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r},subtractVectors:e,distance:function(e,t){return Math.sqrt(a(e,t))},distanceSq:a,normalize:t,cross:r,dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},identity:function(e){return(e=e||new Float32Array(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},transpose:function(e,t){return(t=t||new Float32Array(16))[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t},orthographic:function(e,t,r,a,n,o,i){return(i=i||new Float32Array(16))[0]=2/(t-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(a-r),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(n-o),i[11]=0,i[12]=(e+t)/(e-t),i[13]=(r+a)/(r-a),i[14]=(n+o)/(n-o),i[15]=1,i},frustum:function(e,t,r,a,n,o){var i=t-e,s=a-r,u=o-n;return dst[0]=2*n/i,dst[1]=0,dst[2]=0,dst[3]=0,dst[4]=0,dst[5]=2*n/s,dst[6]=0,dst[7]=0,dst[8]=(e+t)/i,dst[9]=(a+r)/s,dst[10]=-(o+n)/u,dst[11]=-1,dst[12]=0,dst[13]=0,dst[14]=-2*n*o/u,dst[15]=0,dst},perspective:function(e,t,r,a,n){n=n||new Float32Array(16);var o=Math.tan(.5*Math.PI-.5*e),i=1/(r-a);return n[0]=o/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(r+a)*i,n[11]=-1,n[12]=0,n[13]=0,n[14]=r*a*i*2,n[15]=0,n},translation:function(e,t,r,a){return(a=a||new Float32Array(16))[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=e,a[13]=t,a[14]=r,a[15]=1,a},translate:function(e,t,r,a,n){n=n||new Float32Array(16);var o=e[0],i=e[1],s=e[2],u=e[3],l=e[4],A=e[5],c=e[6],d=e[7],p=e[8],f=e[9],h=e[10],v=e[11],g=e[12],y=e[13],m=e[14],_=e[15];return e!==n&&(n[0]=o,n[1]=i,n[2]=s,n[3]=u,n[4]=l,n[5]=A,n[6]=c,n[7]=d,n[8]=p,n[9]=f,n[10]=h,n[11]=v),n[12]=o*t+l*r+p*a+g,n[13]=i*t+A*r+f*a+y,n[14]=s*t+c*r+h*a+m,n[15]=u*t+d*r+v*a+_,n},xRotation:function(e,t){t=t||new Float32Array(16);var r=Math.cos(e),a=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=a,t[7]=0,t[8]=0,t[9]=-a,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},yRotation:function(e,t){t=t||new Float32Array(16);var r=Math.cos(e),a=Math.sin(e);return t[0]=r,t[1]=0,t[2]=-a,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=a,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},zRotation:function(e,t){t=t||new Float32Array(16);var r=Math.cos(e),a=Math.sin(e);return t[0]=r,t[1]=a,t[2]=0,t[3]=0,t[4]=-a,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},xRotate:function(e,t,r){r=r||new Float32Array(16);var a=e[4],n=e[5],o=e[6],i=e[7],s=e[8],u=e[9],l=e[10],A=e[11],c=Math.cos(t),d=Math.sin(t);return r[4]=c*a+d*s,r[5]=c*n+d*u,r[6]=c*o+d*l,r[7]=c*i+d*A,r[8]=c*s-d*a,r[9]=c*u-d*n,r[10]=c*l-d*o,r[11]=c*A-d*i,e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},yRotate:function(e,t,r){r=r||new Float32Array(16);var a=e[0],n=e[1],o=e[2],i=e[3],s=e[8],u=e[9],l=e[10],A=e[11],c=Math.cos(t),d=Math.sin(t);return r[0]=c*a-d*s,r[1]=c*n-d*u,r[2]=c*o-d*l,r[3]=c*i-d*A,r[8]=c*s+d*a,r[9]=c*u+d*n,r[10]=c*l+d*o,r[11]=c*A+d*i,e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},zRotate:function(e,t,r){r=r||new Float32Array(16);var a=e[0],n=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=e[6],A=e[7],c=Math.cos(t),d=Math.sin(t);return r[0]=c*a+d*s,r[1]=c*n+d*u,r[2]=c*o+d*l,r[3]=c*i+d*A,r[4]=c*s-d*a,r[5]=c*u-d*n,r[6]=c*l-d*o,r[7]=c*A-d*i,e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},axisRotation:function(e,t,r){r=r||new Float32Array(16);var a=e[0],n=e[1],o=e[2],i=Math.sqrt(a*a+n*n+o*o),s=(a/=i)*a,u=(n/=i)*n,l=(o/=i)*o,A=Math.cos(t),c=Math.sin(t),d=1-A;return r[0]=s+(1-s)*A,r[1]=a*n*d+o*c,r[2]=a*o*d-n*c,r[3]=0,r[4]=a*n*d-o*c,r[5]=u+(1-u)*A,r[6]=n*o*d+a*c,r[7]=0,r[8]=a*o*d+n*c,r[9]=n*o*d-a*c,r[10]=l+(1-l)*A,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},axisRotate:function(e,t,r,a){a=a||new Float32Array(16);var n=t[0],o=t[1],i=t[2],s=Math.sqrt(n*n+o*o+i*i),u=(n/=s)*n,l=(o/=s)*o,A=(i/=s)*i,c=Math.cos(r),d=Math.sin(r),p=1-c,f=u+(1-u)*c,h=n*o*p+i*d,v=n*i*p-o*d,g=n*o*p-i*d,y=l+(1-l)*c,m=o*i*p+n*d,_=n*i*p+o*d,x=o*i*p-n*d,S=A+(1-A)*c,T=e[0],E=e[1],M=e[2],b=e[3],I=e[4],L=e[5],P=e[6],w=e[7],R=e[8],O=e[9],C=e[10],D=e[11];return a[0]=f*T+h*I+v*R,a[1]=f*E+h*L+v*O,a[2]=f*M+h*P+v*C,a[3]=f*b+h*w+v*D,a[4]=g*T+y*I+m*R,a[5]=g*E+y*L+m*O,a[6]=g*M+y*P+m*C,a[7]=g*b+y*w+m*D,a[8]=_*T+x*I+S*R,a[9]=_*E+x*L+S*O,a[10]=_*M+x*P+S*C,a[11]=_*b+x*w+S*D,e!==a&&(a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a},scaling:function(e,t,r,a){return(a=a||new Float32Array(16))[0]=e,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=t,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=r,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},scale:function(e,t,r,a,n){return(n=n||new Float32Array(16))[0]=t*e[0],n[1]=t*e[1],n[2]=t*e[2],n[3]=t*e[3],n[4]=r*e[4],n[5]=r*e[5],n[6]=r*e[6],n[7]=r*e[7],n[8]=a*e[8],n[9]=a*e[9],n[10]=a*e[10],n[11]=a*e[11],e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},multiply:function(e,t,r){r=r||new Float32Array(16);var a=t[0],n=t[1],o=t[2],i=t[3],s=t[4],u=t[5],l=t[6],A=t[7],c=t[8],d=t[9],p=t[10],f=t[11],h=t[12],v=t[13],g=t[14],y=t[15],m=e[0],_=e[1],x=e[2],S=e[3],T=e[4],E=e[5],M=e[6],b=e[7],I=e[8],L=e[9],P=e[10],w=e[11],R=e[12],O=e[13],C=e[14],D=e[15];return r[0]=a*m+n*T+o*I+i*R,r[1]=a*_+n*E+o*L+i*O,r[2]=a*x+n*M+o*P+i*C,r[3]=a*S+n*b+o*w+i*D,r[4]=s*m+u*T+l*I+A*R,r[5]=s*_+u*E+l*L+A*O,r[6]=s*x+u*M+l*P+A*C,r[7]=s*S+u*b+l*w+A*D,r[8]=c*m+d*T+p*I+f*R,r[9]=c*_+d*E+p*L+f*O,r[10]=c*x+d*M+p*P+f*C,r[11]=c*S+d*b+p*w+f*D,r[12]=h*m+v*T+g*I+y*R,r[13]=h*_+v*E+g*L+y*O,r[14]=h*x+v*M+g*P+y*C,r[15]=h*S+v*b+g*w+y*D,r},inverse:n,transformVector:function(e,t,r){r=r||new Float32Array(4);for(var a=0;a<4;++a){r[a]=0;for(var n=0;n<4;++n)r[a]+=t[n]*e[4*n+a]}return r},transformPoint:function(e,t,r){r=r||new Float32Array(3);var a=t[0],n=t[1],o=t[2],i=a*e[3]+n*e[7]+o*e[11]+e[15];return r[0]=(a*e[0]+n*e[4]+o*e[8]+e[12])/i,r[1]=(a*e[1]+n*e[5]+o*e[9]+e[13])/i,r[2]=(a*e[2]+n*e[6]+o*e[10]+e[14])/i,r},transformDirection:function(e,t,r){r=r||new Float32Array(3);var a=t[0],n=t[1],o=t[2];return r[0]=a*e[0]+n*e[4]+o*e[8],r[1]=a*e[1]+n*e[5]+o*e[9],r[2]=a*e[2]+n*e[6]+o*e[10],r},transformNormal:function(e,t,r){r=r||new Float32Array(3);var a=n(e),o=t[0],i=t[1],s=t[2];return r[0]=o*a[0]+i*a[1]+s*a[2],r[1]=o*a[4]+i*a[5]+s*a[6],r[2]=o*a[8]+i*a[9]+s*a[10],r}}})?r.apply(t,[]):r)||(e.exports=a)},7601:function(e){"undefined"!=typeof self&&self,e.exports=function(e){function t(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,r){"use strict";t.__esModule=!0,t.copyExistingProperties=function(e,t){Object.keys(t).forEach((function(r){t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&(t[r]=e[r])}))},t.copyNamedProperties=function(e,t,r){e.forEach((function(e){var a=t[e];void 0!==a&&(r[e]=a)}))},t.isBuffer=function(e,t){return o||(o=e.createBuffer()),t instanceof o.constructor},t.isRenderbuffer=function(e,t){return i||(i=e.createRenderbuffer()),t instanceof i.constructor},t.isShader=function(e,t){return s||(s=e.createShader(e.VERTEX_SHADER)),t instanceof s.constructor},t.isTexture=function(e,t){return u||(u=e.createTexture()),t instanceof u.constructor},t.isSampler=function(e,t){if(!l){if(!e.createSampler)return!1;l=e.createSampler()}return t instanceof l.constructor},t.warn=t.error=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(r(1)),n=a.default.console&&a.default.console.error&&"function"==typeof a.default.console.error?a.default.console.error.bind(a.default.console):function(){};t.error=n;var o,i,s,u,l,A=a.default.console&&a.default.console.warn&&"function"==typeof a.default.console.warn?a.default.console.warn.bind(a.default.console):function(){};t.warn=A},function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var a=void 0!==a?a:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};t.default=a},function(e,t,r){"use strict";t.__esModule=!0,t.getGLTypeForTypedArray=function(e){if(e instanceof Int8Array)return n;if(e instanceof Uint8Array)return o;if(e instanceof Uint8ClampedArray)return o;if(e instanceof Int16Array)return i;if(e instanceof Uint16Array)return s;if(e instanceof Int32Array)return u;if(e instanceof Uint32Array)return l;if(e instanceof Float32Array)return A;throw"unsupported typed array type"},t.getGLTypeForTypedArrayType=function(e){if(e===Int8Array)return n;if(e===Uint8Array)return o;if(e===Uint8ClampedArray)return o;if(e===Int16Array)return i;if(e===Uint16Array)return s;if(e===Int32Array)return u;if(e===Uint32Array)return l;if(e===Float32Array)return A;throw"unsupported typed array type"},t.getTypedArrayTypeForGLType=function(e){var t=c[e];if(!t)throw"unknown gl type";return t},t.isArrayBuffer=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(r(1)),n=5120,o=5121,i=5122,s=5123,u=5124,l=5125,A=5126,c={},d=c;d[n]=Int8Array,d[o]=Uint8Array,d[i]=Int16Array,d[s]=Uint16Array,d[u]=Int32Array,d[l]=Uint32Array,d[A]=Float32Array,d[32819]=Uint16Array,d[32820]=Uint16Array,d[33635]=Uint16Array,d[5131]=Uint16Array,d[33640]=Uint32Array,d[35899]=Uint32Array,d[35902]=Uint32Array,d[36269]=Uint32Array,d[34042]=Uint32Array;var p=a.default.SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof a.default.SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};t.isArrayBuffer=p},function(e,t,r){"use strict";t.__esModule=!0,t.isWebGL1=function(e){return!e.texStorage2D},t.isWebGL2=function(e){return!!e.texStorage2D},t.glEnumToString=void 0;var a=function(){function e(e){var a=e.constructor.name;if(!t[a]){for(var n in e)if("number"==typeof e[n]){var o=r[e[n]];r[e[n]]=o?"".concat(o," | ").concat(n):n}t[a]=!0}}var t={},r={};return function(t,a){return e(t),r[a]||"0x"+a.toString(16)}}();t.glEnumToString=a},function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function n(e,t){return V[t].bindPoint}function o(e,t){return function(r){e.uniform1i(t,r)}}function i(e,t){return function(r){e.uniform1iv(t,r)}}function s(e,t){return function(r){e.uniform2iv(t,r)}}function u(e,t){return function(r){e.uniform3iv(t,r)}}function l(e,t){return function(r){e.uniform4iv(t,r)}}function A(e,t,r,a){var o=n(0,t);return C.isWebGL2(e)?function(t){var n,i;D.isTexture(e,t)?(n=t,i=null):(n=t.texture,i=t.sampler),e.uniform1i(a,r),e.activeTexture(e.TEXTURE0+r),e.bindTexture(o,n),e.bindSampler(r,i)}:function(t){e.uniform1i(a,r),e.activeTexture(e.TEXTURE0+r),e.bindTexture(o,t)}}function c(e,t,r,a,o){for(var i=n(0,t),s=new Int32Array(o),u=0;u<o;++u)s[u]=r+u;return C.isWebGL2(e)?function(t){e.uniform1iv(a,s),t.forEach((function(t,a){var n,o;e.activeTexture(e.TEXTURE0+s[a]),D.isTexture(e,t)?(n=t,o=null):(n=t.texture,o=t.sampler),e.bindSampler(r,o),e.bindTexture(i,n)}))}:function(t){e.uniform1iv(a,s),t.forEach((function(t,r){e.activeTexture(e.TEXTURE0+s[r]),e.bindTexture(i,t)}))}}function d(e,t){return function(r){r.value?(e.disableVertexAttribArray(t),e.vertexAttrib4fv(t,r.value)):(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||e.FLOAT,r.normalize||!1,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor))}}function p(e,t){return function(r){r.value?(e.disableVertexAttribArray(t),e.vertexAttrib4iv(t,r.value)):(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||e.INT,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor))}}function f(e,t){return function(r){r.value?(e.disableVertexAttribArray(t),e.vertexAttrib4uiv(t,r.value)):(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||e.UNSIGNED_INT,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor))}}function h(e,t,r){var a=r.size,n=r.count;return function(r){e.bindBuffer(e.ARRAY_BUFFER,r.buffer);for(var o=r.size||r.numComponents||a,i=o/n,s=r.type||e.FLOAT,u=V[s].size*o,l=r.normalize||!1,A=r.offset||0,c=u/n,d=0;d<n;++d)e.enableVertexAttribArray(t+d),e.vertexAttribPointer(t+d,i,s,l,u,A+c*d),void 0!==r.divisor&&e.vertexAttribDivisor(t+d,r.divisor)}}function v(e,t,r,a){var n=a||N,o=e.createShader(r),i=0;if(H.test(t)&&(i=1,t=t.replace(H,"")),e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var s=e.getShaderInfoLog(o);return n(function(e,t){return t=t||0,++t,e.split("\n").map((function(e,r){return r+t+": "+e})).join("\n")}(t,i)+"\n*** Error compiling shader: "+s),e.deleteShader(o),null}return o}function g(e,t,r){var a;if("function"==typeof t&&(r=t,t=void 0),"function"==typeof e)r=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;var n=e;r=n.errorCallback,e=n.attribLocations,a=n.transformFeedbackVaryings}var o={errorCallback:r||N,transformFeedbackVaryings:a};if(e){var i={};Array.isArray(e)?e.forEach((function(e,r){i[e]=t?t[r]:r})):i=e,o.attribLocations=i}return o}function y(e){return e.indexOf("frag")>=0?X.FRAGMENT_SHADER:e.indexOf("vert")>=0?X.VERTEX_SHADER:void 0}function m(e,t){t.forEach((function(t){e.deleteShader(t)}))}function _(e,t,r,a,n){for(var o=g(r,a,n),i=[],s=[],u=0;u<t.length;++u){var l=t[u];if("string"==typeof l){var A=F(l),c=A?A.text:l,d=e[U[u]];A&&A.type&&(d=y(A.type)||d),l=v(e,c,d,o.errorCallback),s.push(l)}D.isShader(e,l)&&i.push(l)}if(i.length!==t.length)return o.errorCallback("not enough shaders for program"),m(e,s),null;var p=e.createProgram();i.forEach((function(t){e.attachShader(p,t)})),o.attribLocations&&Object.keys(o.attribLocations).forEach((function(t){e.bindAttribLocation(p,o.attribLocations[t],t)}));var f=o.transformFeedbackVaryings;if(f&&(f.attribs&&(f=f.attribs),Array.isArray(f)||(f=Object.keys(f)),e.transformFeedbackVaryings(p,f,o.transformFeedbackMode||e.SEPARATE_ATTRIBS)),e.linkProgram(p),!e.getProgramParameter(p,e.LINK_STATUS)){var h=e.getProgramInfoLog(p);return o.errorCallback("Error in program linking:"+h),e.deleteProgram(p),m(e,s),null}return p}function x(e,t,r,a){var n,o=F(t);if(!o)throw"*** Error: unknown script element"+t;n=o.text;var i=r||y(o.type);if(!i)throw"*** Error: unknown shader type";return v(e,n,i,a)}function S(e,t,r,a,n){for(var o=g(r,a,n),i=[],s=0;s<t.length;++s){var u=v(e,t[s],e[U[s]],o.errorCallback);if(!u)return null;i.push(u)}return _(e,i,o)}function T(e){var t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}function E(e,t){for(var r=0,a={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),o=0;o<n;++o){var i=e.getActiveUniform(t,o);if(!T(i)){var s=i.name;"[0]"===s.substr(-3)&&(s=s.substr(0,s.length-3));var u=function(t,a){var n,o=e.getUniformLocation(t,a.name),i=a.size>1&&"[0]"===a.name.substr(-3),s=a.type,u=V[s];if(!u)throw"unknown type: 0x"+s.toString(16);if(u.bindPoint){var l=r;r+=a.size,n=i?u.arraySetter(e,s,l,o,a.size):u.setter(e,s,l,o,a.size)}else n=u.arraySetter&&i?u.arraySetter(e,o):u.setter(e,o);return n.location=o,n}(t,i);a[s]=u}}return a}function M(e,t){for(var r={},a=e.getProgramParameter(t,e.TRANSFORM_FEEDBACK_VARYINGS),n=0;n<a;++n){var o=e.getTransformFeedbackVarying(t,n);r[o.name]={index:n,type:o.type,size:o.size}}return r}function b(e,t,r){for(var a in t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),r.attribs&&(r=r.attribs),r){var n=t[a];if(n){var o=r[a];o.offset?e.bindBufferRange(e.TRANSFORM_FEEDBACK_BUFFER,n.index,o.buffer,o.offset,o.size):e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,n.index,o.buffer)}}}function I(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),a=[],n=[],o=0;o<r;++o){n.push(o),a.push({});var i=e.getActiveUniform(t,o);if(T(i))break;a[o].name=i.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(r){var o=r[0],i=r[1];e.getActiveUniforms(t,n,e[o]).forEach((function(e,t){a[t][i]=e}))}));for(var s={},u=e.getProgramParameter(t,e.ACTIVE_UNIFORM_BLOCKS),l=0;l<u;++l){var A=e.getActiveUniformBlockName(t,l),c={index:l,usedByVertexShader:e.getActiveUniformBlockParameter(t,l,e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(t,l,e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(t,l,e.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(t,l,e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};c.used=c.usedByVertexSahder||c.usedByFragmentShader,s[A]=c}return{blockSpecs:s,uniformData:a}}function L(e,t,r,a){var n=r.blockSpecs,o=r.uniformData,i=n[a];if(!i)return B("no uniform block object named:",a),{name:a,uniforms:{}};var s=new ArrayBuffer(i.size),u=e.createBuffer(),l=i.index;e.bindBuffer(e.UNIFORM_BUFFER,u),e.uniformBlockBinding(t,i.index,l);var A=a+".";Y.test(A)&&(A=A.replace(Y,"."));var c={};return i.uniformIndices.forEach((function(e){var t=o[e],r=V[t.type],a=r.Type,n=t.size*r.size,i=t.name;i.substr(0,A.length)===A&&(i=i.substr(A.length)),c[i]=new a(s,t.offset,n/a.BYTES_PER_ELEMENT)})),{name:a,array:s,asFloat:new Float32Array(s),buffer:u,uniforms:c}}function P(e,t,r){var a=(t.uniformBlockSpec||t).blockSpecs[r.name];if(a){var n=a.index;return e.bindBufferRange(e.UNIFORM_BUFFER,n,r.buffer,r.offset||0,r.array.byteLength),!0}return!1}function w(e,t){for(var r={},a=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<a;++n){var o=e.getActiveAttrib(t,n);if(!T(o)){var i=e.getAttribLocation(t,o.name),s=k[o.type],u=s.setter(e,i,s);u.location=i,r[o.name]=u}}return r}function R(e,t){for(var r in t){var a=e[r];a&&a(t[r])}}function O(e,t){var r={program:t,uniformSetters:E(e,t),attribSetters:w(e,t)};return C.isWebGL2(e)&&(r.uniformBlockSpec=I(e,t),r.transformFeedbackInfo=M(e,t)),r}t.__esModule=!0,t.createAttributeSetters=w,t.createProgram=_,t.createProgramFromScripts=function(e,t,r,a,n){for(var o=g(r,a,n),i=[],s=0;s<t.length;++s){var u=x(e,t[s],e[U[s]],o.errorCallback);if(!u)return null;i.push(u)}return _(e,i,o)},t.createProgramFromSources=S,t.createProgramInfo=function(e,t,r,a,n){var o=g(r,a,n),i=!0;if(t=t.map((function(e){if(e.indexOf("\n")<0){var t=F(e);t?e=t.text:(o.errorCallback("no element with id: "+e),i=!1)}return e})),!i)return null;var s=S(e,t,o);return s?O(e,s):null},t.createProgramInfoFromProgram=O,t.createUniformSetters=E,t.createUniformBlockSpecFromProgram=I,t.createUniformBlockInfoFromProgram=L,t.createUniformBlockInfo=function(e,t,r){return L(e,t.program,t.uniformBlockSpec,r)},t.createTransformFeedback=function(e,t,r){var a=e.createTransformFeedback();return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,a),e.useProgram(t.program),b(e,t,r),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),function(e,t,r){for(var a in t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),r.attribs&&(r=r.attribs),r){var n=t[a];n&&e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,n.index,null)}}(e,t,r),a},t.createTransformFeedbackInfo=M,t.bindTransformFeedbackInfo=b,t.setAttributes=R,t.setBuffersAndAttributes=function(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(R(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indices))},t.setUniforms=function e(t,r){for(var a=t.uniformSetters||t,n=arguments.length,o=1;o<n;++o){var i=arguments[o];if(Array.isArray(i))for(var s=i.length,u=0;u<s;++u)e(a,i[u]);else for(var l in i){var A=a[l];A&&A(i[l])}}},t.setUniformBlock=function(e,t,r){P(e,t,r)&&e.bufferData(e.UNIFORM_BUFFER,r.array,e.DYNAMIC_DRAW)},t.setBlockUniforms=function(e,t){var r=e.uniforms;for(var a in t){var n=r[a];if(n){var o=t[a];o.length?n.set(o):n[0]=o}}},t.bindUniformBlock=P;var C=a(r(3)),D=a(r(0)),G=function(e){return e&&e.__esModule?e:{default:e}}(r(1)),N=D.error,B=D.warn,F=G.default&&G.default.document&&G.default.document.getElementById?G.default.document.getElementById.bind(G.default.document):function(){return null},V={};V[5126]={Type:Float32Array,size:4,setter:function(e,t){return function(r){e.uniform1f(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1fv(t,r)}}},V[35664]={Type:Float32Array,size:8,setter:function(e,t){return function(r){e.uniform2fv(t,r)}}},V[35665]={Type:Float32Array,size:12,setter:function(e,t){return function(r){e.uniform3fv(t,r)}}},V[35666]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniform4fv(t,r)}}},V[5124]={Type:Int32Array,size:4,setter:o,arraySetter:i},V[35667]={Type:Int32Array,size:8,setter:s},V[35668]={Type:Int32Array,size:12,setter:u},V[35669]={Type:Int32Array,size:16,setter:l},V[5125]={Type:Uint32Array,size:4,setter:function(e,t){return function(r){e.uniform1ui(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1uiv(t,r)}}},V[36294]={Type:Uint32Array,size:8,setter:function(e,t){return function(r){e.uniform2uiv(t,r)}}},V[36295]={Type:Uint32Array,size:12,setter:function(e,t){return function(r){e.uniform3uiv(t,r)}}},V[36296]={Type:Uint32Array,size:16,setter:function(e,t){return function(r){e.uniform4uiv(t,r)}}},V[35670]={Type:Uint32Array,size:4,setter:o,arraySetter:i},V[35671]={Type:Uint32Array,size:8,setter:s},V[35672]={Type:Uint32Array,size:12,setter:u},V[35673]={Type:Uint32Array,size:16,setter:l},V[35674]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}}},V[35675]={Type:Float32Array,size:36,setter:function(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}}},V[35676]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}}},V[35685]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}}},V[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}}},V[35687]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}}},V[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}}},V[35689]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}}},V[35690]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}}},V[35678]={Type:null,size:0,setter:A,arraySetter:c,bindPoint:3553},V[35680]={Type:null,size:0,setter:A,arraySetter:c,bindPoint:34067},V[35679]={Type:null,size:0,setter:A,arraySetter:c,bindPoint:32879},V[35682]={Type:null,size:0,setter:A,arraySetter:c,bindPoint:3553},V[36289]={Type:null,size:0,setter:A,arraySetter:c,bindPoint:35866},V[36292]={Type:null,size:0,setter:A,arraySetter:c,bindPoint:35866},V[36293]={Type:null,size:0,setter:A,arraySetter:c,bindPoint:34067},V[36298]={Type:null,size:0,setter:A,arraySetter:c,bindPoint:3553},V[36299]={Type:null,size:0,setter:A,arraySetter:c,bindPoint:32879},V[36300]={Type:null,size:0,setter:A,arraySetter:c,bindPoint:34067},V[36303]={Type:null,size:0,setter:A,arraySetter:c,bindPoint:35866},V[36306]={Type:null,size:0,setter:A,arraySetter:c,bindPoint:3553},V[36307]={Type:null,size:0,setter:A,arraySetter:c,bindPoint:32879},V[36308]={Type:null,size:0,setter:A,arraySetter:c,bindPoint:34067},V[36311]={Type:null,size:0,setter:A,arraySetter:c,bindPoint:35866};var k={};k[5126]={size:4,setter:d},k[35664]={size:8,setter:d},k[35665]={size:12,setter:d},k[35666]={size:16,setter:d},k[5124]={size:4,setter:p},k[35667]={size:8,setter:p},k[35668]={size:12,setter:p},k[35669]={size:16,setter:p},k[5125]={size:4,setter:f},k[36294]={size:8,setter:f},k[36295]={size:12,setter:f},k[36296]={size:16,setter:f},k[35670]={size:4,setter:p},k[35671]={size:8,setter:p},k[35672]={size:12,setter:p},k[35673]={size:16,setter:p},k[35674]={size:4,setter:h,count:2},k[35675]={size:9,setter:h,count:3},k[35676]={size:16,setter:h,count:4};var X=void 0,H=/^[ \t]*\n/,U=["VERTEX_SHADER","FRAGMENT_SHADER"],Y=/\[\d+\]\.$/},function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function n(e,t){var r=U[e];if(!r)throw"unknown internal format";var a=r.bytesPerElementMap[t];if(void 0===a)throw"unknown internal format";return a}function o(e){var t=U[e];if(!t)throw"unknown internal format";return{format:t.e,type:Array.isArray(t.type)?t.type[0]:t.type}}function i(e){return!(e&e-1)}function s(e,t,r,a){if(!O.isWebGL2(e))return i(t)&&i(r);var n=U[a];if(!n)throw"unknown internal format";return n.t&&n.r}function u(e,t,r){return B(t)?C.getGLTypeForTypedArray(t):r||e.UNSIGNED_BYTE}function l(e,t,r,a,n){if(n%1!=0)throw"can't guess dimensions";if(r||a){if(a){if(!r&&(r=n/a)%1)throw"can't guess dimensions"}else if((a=n/r)%1)throw"can't guess dimensions"}else{var o=Math.sqrt(n/(t===e.TEXTURE_CUBE_MAP?6:1));o%1==0?(r=o,a=o):(r=n,a=1)}return{width:r,height:a}}function A(e){N.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function c(e,t){void 0!==t.colorspaceConversion&&(W.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.colorspaceConversion)),void 0!==t.premultiplyAlpha&&(W.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha)),void 0!==t.flipY&&(W.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY))}function d(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,W.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,W.flipY)}function p(e){W.unpackAlignment=e.getParameter(e.UNPACK_ALIGNMENT),O.isWebGL2(e)&&(W.unpackRowLength=e.getParameter(e.UNPACK_ROW_LENGTH),W.unpackImageHeight=e.getParameter(e.UNPACK_IMAGE_HEIGHT),W.unpackSkipPixels=e.getParameter(e.UNPACK_SKIP_PIXELS),W.unpackSkipRows=e.getParameter(e.UNPACK_SKIP_ROWS),W.unpackSkipImages=e.getParameter(e.UNPACK_SKIP_IMAGES))}function f(e){e.pixelStorei(e.UNPACK_ALIGNMENT,W.unpackAlignment),O.isWebGL2(e)&&(e.pixelStorei(e.UNPACK_ROW_LENGTH,W.unpackRowLength),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,W.unpackImageHeight),e.pixelStorei(e.UNPACK_SKIP_PIXELS,W.unpackSkipPixels),e.pixelStorei(e.UNPACK_SKIP_ROWS,W.unpackSkipRows),e.pixelStorei(e.UNPACK_SKIP_IMAGES,W.unpackSkipImages))}function h(e,t,r,a){a.minMag&&(r.call(e,t,e.TEXTURE_MIN_FILTER,a.minMag),r.call(e,t,e.TEXTURE_MAG_FILTER,a.minMag)),a.min&&r.call(e,t,e.TEXTURE_MIN_FILTER,a.min),a.mag&&r.call(e,t,e.TEXTURE_MAG_FILTER,a.mag),a.wrap&&(r.call(e,t,e.TEXTURE_WRAP_S,a.wrap),r.call(e,t,e.TEXTURE_WRAP_T,a.wrap),(t===e.TEXTURE_3D||D.isSampler(e,t))&&r.call(e,t,e.TEXTURE_WRAP_R,a.wrap)),a.wrapR&&r.call(e,t,e.TEXTURE_WRAP_R,a.wrapR),a.wrapS&&r.call(e,t,e.TEXTURE_WRAP_S,a.wrapS),a.wrapT&&r.call(e,t,e.TEXTURE_WRAP_T,a.wrapT),a.minLod&&r.call(e,t,e.TEXTURE_MIN_LOD,a.minLod),a.maxLod&&r.call(e,t,e.TEXTURE_MAX_LOD,a.maxLod),a.baseLevel&&r.call(e,t,e.TEXTURE_BASE_LEVEL,a.baseLevel),a.maxLevel&&r.call(e,t,e.TEXTURE_MAX_LEVEL,a.maxLevel)}function v(e,t,r){var a=r.target||e.TEXTURE_2D;e.bindTexture(a,t),h(e,a,e.texParameteri,r)}function g(e,t,r){h(e,t,e.samplerParameteri,r)}function y(e,t){var r=e.createSampler();return g(e,r,t),r}function m(e,t,r,a,n,o,i){r=r||N.textureOptions,o=o||e.RGBA,i=i||e.UNSIGNED_BYTE;var u=r.target||e.TEXTURE_2D;if(a=a||r.width,n=n||r.height,e.bindTexture(u,t),s(e,a,n,o))e.generateMipmap(u);else{var l=function(e){var t=U[e];if(!t)throw"unknown internal format";return t.r}(o)?e.LINEAR:e.NEAREST;e.texParameteri(u,e.TEXTURE_MIN_FILTER,l),e.texParameteri(u,e.TEXTURE_MAG_FILTER,l),e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}}function _(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function x(e,t){return(t=t||{}).cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function S(e,t){var r=x(e,t).map((function(e,t){return{face:e,ndx:t}}));return r.sort((function(e,t){return e.face-t.face})),r}function T(e,t,r,a){var n=(a=a||N.textureOptions).target||e.TEXTURE_2D,i=a.level||0,s=r.width,u=r.height,l=a.internalFormat||a.format||e.RGBA,A=o(l),h=a.format||A.format,g=a.type||A.type;if(c(e,a),e.bindTexture(n,t),n===e.TEXTURE_CUBE_MAP){var y,x,T=r.width,E=r.height;if(T/6===E)y=E,x=[0,0,1,0,2,0,3,0,4,0,5,0];else if(E/6===T)y=T,x=[0,0,0,1,0,2,0,3,0,4,0,5];else if(T/3==E/2)y=T/3,x=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(T/2!=E/3)throw"can't figure out cube map from element: "+(r.src?r.src:r.nodeName);y=T/2,x=[0,0,1,0,0,1,1,1,0,2,1,2]}F?(F.canvas.width=y,F.canvas.height=y,s=y,u=y,S(e,a).forEach((function(t){var a=x[2*t.ndx+0]*y,n=x[2*t.ndx+1]*y;F.drawImage(r,a,n,y,y,0,0,y,y),e.texImage2D(t.face,i,l,h,g,F.canvas)})),F.canvas.width=1,F.canvas.height=1):G.default.createImageBitmap&&(s=y,u=y,S(e,a).forEach((function(o){var A=x[2*o.ndx+0]*y,p=x[2*o.ndx+1]*y;e.texImage2D(o.face,i,l,y,y,0,h,g,null),G.default.createImageBitmap(r,A,p,y,y,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then((function(r){c(e,a),e.bindTexture(n,t),e.texImage2D(o.face,i,l,h,g,r),d(e,a),_(a)&&m(e,t,a,s,u,l,g)}))})))}else if(n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY){var M=Math.min(r.width,r.height),b=Math.max(r.width,r.height),I=b/M;if(I%1!=0)throw"can not compute 3D dimensions of element";var L=r.width===b?1:0,P=r.height===b?1:0;p(e),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.pixelStorei(e.UNPACK_ROW_LENGTH,r.width),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(e.UNPACK_SKIP_IMAGES,0),e.texImage3D(n,i,l,M,M,M,0,h,g,null);for(var w=0;w<I;++w){var R=w*M*L,O=w*M*P;e.pixelStorei(e.UNPACK_SKIP_PIXELS,R),e.pixelStorei(e.UNPACK_SKIP_ROWS,O),e.texSubImage3D(n,i,0,0,w,M,M,1,h,g,r)}f(e)}else e.texImage2D(n,i,l,h,g,r);d(e,a),_(a)&&m(e,t,a,s,u,l,g),v(e,t,a)}function E(){}function M(e){return G.default.ImageBitmap&&e instanceof G.default.ImageBitmap||G.default.ImageData&&e instanceof G.default.ImageData||G.default.HTMLElement&&e instanceof G.default.HTMLElement}function b(e,t,r){return M(e)?(setTimeout((function(){r(null,e)})),e):function(e,t,r){var a;if(r=r||E,G.default.Image){a=new G.default.Image,void 0!==(t=void 0!==t?t:N.crossOrigin)&&(a.crossOrigin=t);var n=function(){a.removeEventListener("error",o),a.removeEventListener("load",i),a=null},o=function(){var t="couldn't load image: "+e;D.error(t),r(t,a),n()},i=function(){r(null,a),n()};return a.addEventListener("error",o),a.addEventListener("load",i),a.src=e,a}if(G.default.ImageBitmap){var s,u,l=function(){r(s,u)},A={};t&&(A.mode="cors"),fetch(e,A).then((function(e){if(!e.ok)throw e;return e.blob()})).then((function(e){return G.default.createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(e){u=e,setTimeout(l)})).catch((function(e){s=e,setTimeout(l)})),a=null}return a}(e,t,r)}function I(e,t,r){var a=(r=r||N.textureOptions).target||e.TEXTURE_2D;if(e.bindTexture(a,t),!1!==r.color){var n=function(e){return e=e||N.textureColor,B(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}(r.color);if(a===e.TEXTURE_CUBE_MAP)for(var o=0;o<6;++o)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,n);else a===e.TEXTURE_3D||a===e.TEXTURE_2D_ARRAY?e.texImage3D(a,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,n):e.texImage2D(a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,n)}}function L(e,t,r,a){return a=a||E,r=r||N.textureOptions,I(e,t,r),b((r=Object.assign({},r)).src,r.crossOrigin,(function(n,o){n?a(n,t,o):(T(e,t,o,r),a(null,t,o))}))}function P(e,t,r,a){var i=(a=a||N.textureOptions).target||e.TEXTURE_2D;e.bindTexture(i,t);var s=a.width,A=a.height,h=a.depth,v=a.level||0,g=a.internalFormat||a.format||e.RGBA,y=o(g),m=a.format||y.format,_=a.type||u(e,r,y.type);if(B(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{var x=C.getTypedArrayTypeForGLType(_);r=new x(r)}var T,E=n(g,_),M=r.byteLength/E;if(M%1)throw"length wrong size for format: "+O.glEnumToString(e,m);if(i===e.TEXTURE_3D)if(s||A||h)!s||A&&h?!A||s&&h?(T=l(e,i,s,A,M/h),s=T.width,A=T.height):(T=l(e,i,s,h,M/A),s=T.width,h=T.height):(T=l(e,i,A,h,M/s),A=T.width,h=T.height);else{var b=Math.cbrt(M);if(b%1!=0)throw"can't guess cube size of array of numElements: "+M;s=b,A=b,h=b}else T=l(e,i,s,A,M),s=T.width,A=T.height;if(p(e),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment||1),c(e,a),i===e.TEXTURE_CUBE_MAP){var I=M/6*(E/r.BYTES_PER_ELEMENT);S(e,a).forEach((function(t){var a=I*t.ndx,n=r.subarray(a,a+I);e.texImage2D(t.face,v,g,s,A,0,m,_,n)}))}else i===e.TEXTURE_3D?e.texImage3D(i,v,g,s,A,h,0,m,_,r):e.texImage2D(i,v,g,s,A,0,m,_,r);return d(e,a),f(e),{width:s,height:A,depth:h,type:_}}function w(e,t,r){var a=r.target||e.TEXTURE_2D;e.bindTexture(a,t);var n=r.level||0,i=r.internalFormat||r.format||e.RGBA,s=o(i),u=r.format||s.format,l=r.type||s.type;if(c(e,r),a===e.TEXTURE_CUBE_MAP)for(var A=0;A<6;++A)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+A,n,i,r.width,r.height,0,u,l,null);else a===e.TEXTURE_3D?e.texImage3D(a,n,i,r.width,r.height,r.depth,0,u,l,null):e.texImage2D(a,n,i,r.width,r.height,0,u,l,null);d(e,r)}function R(e,t,r){r=r||E,t=t||N.textureOptions;var a=e.createTexture(),n=t.target||e.TEXTURE_2D,i=t.width||1,s=t.height||1,u=t.internalFormat||e.RGBA,l=o(u),A=t.type||l.type;e.bindTexture(n,a),n===e.TEXTURE_CUBE_MAP&&(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));var p=t.src;if(p)if("function"==typeof p&&(p=p(e,t)),"string"==typeof p)L(e,a,t,r);else if(B(p)||Array.isArray(p)&&("number"==typeof p[0]||Array.isArray(p[0])||B(p[0]))){var f=P(e,a,p,t);i=f.width,s=f.height,A=f.type}else if(Array.isArray(p)&&("string"==typeof p[0]||M(p[0])))n===e.TEXTURE_CUBE_MAP?function(e,t,r,a){function n(n){return function(o,i){--v,o?g.push(o):i.width!==i.height?g.push("cubemap face img is not a square: "+i.src):(c(e,r),e.bindTexture(f,t),5===v?x(e).forEach((function(t){e.texImage2D(t,s,u,A,p,i)})):e.texImage2D(n,s,u,A,p,i),d(e,r),_(r)&&e.generateMipmap(f)),0===v&&a(g.length?g:void 0,t,h)}}a=a||E;var i=r.src;if(6!==i.length)throw"there must be 6 urls for a cubemap";var s=r.level||0,u=r.internalFormat||r.format||e.RGBA,l=o(u),A=r.format||l.format,p=r.type||e.UNSIGNED_BYTE,f=r.target||e.TEXTURE_2D;if(f!==e.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";I(e,t,r),r=Object.assign({},r);var h,v=6,g=[],y=x(e,r);h=i.map((function(e,t){return b(e,r.crossOrigin,n(y[t]))}))}(e,a,t,r):function(e,t,r,a){function n(n){return function(o,i){if(--h,o)v.push(o);else{if(c(e,r),e.bindTexture(p,t),S){S=!1,y=r.width||i.width,m=r.height||i.height,e.texImage3D(p,g,s,y,m,x,0,l,A,null);for(var u=0;u<x;++u)e.texSubImage3D(p,g,0,0,u,y,m,1,l,A,i)}else{var T=i;i.width===y&&i.height===m||(T=F.canvas,F.canvas.width=y,F.canvas.height=m,F.drawImage(i,0,0,y,m)),e.texSubImage3D(p,g,0,0,n,y,m,1,l,A,T),T===F.canvas&&(F.canvas.width=0,F.canvas.height=0)}d(e,r),_(r)&&e.generateMipmap(p)}0===h&&a(v.length?v:void 0,t,f)}}a=a||E;var i=r.src,s=r.internalFormat||r.format||e.RGBA,u=o(s),l=r.format||u.format,A=r.type||e.UNSIGNED_BYTE,p=r.target||e.TEXTURE_2D_ARRAY;if(p!==e.TEXTURE_3D&&p!==e.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";I(e,t,r),r=Object.assign({},r);var f,h=i.length,v=[],g=r.level||0,y=r.width,m=r.height,x=i.length,S=!0;f=i.map((function(e,t){return b(e,r.crossOrigin,n(t))}))}(e,a,t,r);else{if(!M(p))throw"unsupported src type";T(e,a,p,t),i=p.width,s=p.height}else w(e,a,t);return _(t)&&m(e,a,t,i,s,u,A),v(e,a,t),a}t.__esModule=!0,t.setTextureDefaults_=function(e){D.copyExistingProperties(e,N),e.textureColor&&A(e.textureColor)},t.createSampler=y,t.createSamplers=function(e,t){var r={};return Object.keys(t).forEach((function(a){r[a]=y(e,t[a])})),r},t.setSamplerParameters=g,t.createTexture=R,t.setEmptyTexture=w,t.setTextureFromArray=P,t.loadTextureFromUrl=L,t.setTextureFromElement=T,t.setTextureFilteringForSize=m,t.setTextureParameters=v,t.setDefaultTextureColor=A,t.createTextures=function(e,t,r){function a(){0===n&&setTimeout((function(){r(o.length?o:void 0,i,s)}),0)}r=r||E;var n=0,o=[],i={},s={};return Object.keys(t).forEach((function(r){var u,l=t[r];(function(e){return"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]})(l.src)&&(u=function(e,t,i){s[r]=i,--n,e&&o.push(e),a()},++n),i[r]=R(e,l,u)})),a(),i},t.resizeTexture=function(e,t,r,a,n){a=a||r.width,n=n||r.height;var i=r.target||e.TEXTURE_2D;e.bindTexture(i,t);var s,l=r.level||0,A=r.internalFormat||r.format||e.RGBA,c=o(A),d=r.format||c.format,p=r.src;if(s=p&&(B(p)||Array.isArray(p)&&"number"==typeof p[0])?r.type||u(e,p,c.type):r.type||c.type,i===e.TEXTURE_CUBE_MAP)for(var f=0;f<6;++f)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+f,l,A,a,n,0,d,s,null);else e.texImage2D(i,l,A,a,n,0,d,s,null)},t.getNumComponentsForFormat=function(e){var t=X[e];if(!t)throw"unknown format: "+e;return t.a},t.getBytesPerElementForInternalFormat=n;var O=a(r(3)),C=a(r(2)),D=a(r(0)),G=function(e){return e&&e.__esModule?e:{default:e}}(r(1)),N={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},B=C.isArrayBuffer,F=G.default.document&&G.default.document.createElement?G.default.document.createElement("canvas").getContext("2d"):null,V=6407,k=33319,X={},H=X;H[6406]={a:1},H[6409]={a:1},H[6410]={a:2},H[V]={a:3},H[6408]={a:4},H[6403]={a:1},H[36244]={a:1},H[k]={a:2},H[33320]={a:2},H[V]={a:3},H[36248]={a:3},H[6408]={a:4},H[36249]={a:4},H[6402]={a:1},H[34041]={a:2};var U={},Y=U;Y[6406]={e:6406,t:!0,r:!0,u:[1,2,2,4],type:[5121,5131,36193,5126]},Y[6409]={e:6409,t:!0,r:!0,u:[1,2,2,4],type:[5121,5131,36193,5126]},Y[6410]={e:6410,t:!0,r:!0,u:[2,4,4,8],type:[5121,5131,36193,5126]},Y[V]={e:V,t:!0,r:!0,u:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},Y[6408]={e:6408,t:!0,r:!0,u:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},Y[33321]={e:6403,t:!0,r:!0,u:1,type:5121},Y[36756]={e:6403,t:!1,r:!0,u:1,type:5120},Y[33325]={e:6403,t:!1,r:!0,u:[4,2],type:[5126,5131]},Y[33326]={e:6403,t:!1,r:!1,u:4,type:5126},Y[33330]={e:36244,t:!0,r:!1,u:1,type:5121},Y[33329]={e:36244,t:!0,r:!1,u:1,type:5120},Y[33332]={e:36244,t:!0,r:!1,u:2,type:5123},Y[33331]={e:36244,t:!0,r:!1,u:2,type:5122},Y[33334]={e:36244,t:!0,r:!1,u:4,type:5125},Y[33333]={e:36244,t:!0,r:!1,u:4,type:5124},Y[33323]={e:k,t:!0,r:!0,u:2,type:5121},Y[36757]={e:k,t:!1,r:!0,u:2,type:5120},Y[33327]={e:k,t:!1,r:!0,u:[8,4],type:[5126,5131]},Y[33328]={e:k,t:!1,r:!1,u:8,type:5126},Y[33336]={e:33320,t:!0,r:!1,u:2,type:5121},Y[33335]={e:33320,t:!0,r:!1,u:2,type:5120},Y[33338]={e:33320,t:!0,r:!1,u:4,type:5123},Y[33337]={e:33320,t:!0,r:!1,u:4,type:5122},Y[33340]={e:33320,t:!0,r:!1,u:8,type:5125},Y[33339]={e:33320,t:!0,r:!1,u:8,type:5124},Y[32849]={e:V,t:!0,r:!0,u:3,type:5121},Y[35905]={e:V,t:!1,r:!0,u:3,type:5121},Y[36194]={e:V,t:!0,r:!0,u:[3,2],type:[5121,33635]},Y[36758]={e:V,t:!1,r:!0,u:3,type:5120},Y[35898]={e:V,t:!1,r:!0,u:[12,6,4],type:[5126,5131,35899]},Y[35901]={e:V,t:!1,r:!0,u:[12,6,4],type:[5126,5131,35902]},Y[34843]={e:V,t:!1,r:!0,u:[12,6],type:[5126,5131]},Y[34837]={e:V,t:!1,r:!1,u:12,type:5126},Y[36221]={e:36248,t:!1,r:!1,u:3,type:5121},Y[36239]={e:36248,t:!1,r:!1,u:3,type:5120},Y[36215]={e:36248,t:!1,r:!1,u:6,type:5123},Y[36233]={e:36248,t:!1,r:!1,u:6,type:5122},Y[36209]={e:36248,t:!1,r:!1,u:12,type:5125},Y[36227]={e:36248,t:!1,r:!1,u:12,type:5124},Y[32856]={e:6408,t:!0,r:!0,u:4,type:5121},Y[35907]={e:6408,t:!0,r:!0,u:4,type:5121},Y[36759]={e:6408,t:!1,r:!0,u:4,type:5120},Y[32855]={e:6408,t:!0,r:!0,u:[4,2,4],type:[5121,32820,33640]},Y[32854]={e:6408,t:!0,r:!0,u:[4,2],type:[5121,32819]},Y[32857]={e:6408,t:!0,r:!0,u:4,type:33640},Y[34842]={e:6408,t:!1,r:!0,u:[16,8],type:[5126,5131]},Y[34836]={e:6408,t:!1,r:!1,u:16,type:5126},Y[36220]={e:36249,t:!0,r:!1,u:4,type:5121},Y[36238]={e:36249,t:!0,r:!1,u:4,type:5120},Y[36975]={e:36249,t:!0,r:!1,u:4,type:33640},Y[36214]={e:36249,t:!0,r:!1,u:8,type:5123},Y[36232]={e:36249,t:!0,r:!1,u:8,type:5122},Y[36226]={e:36249,t:!0,r:!1,u:16,type:5124},Y[36208]={e:36249,t:!0,r:!1,u:16,type:5125},Y[33189]={e:6402,t:!0,r:!1,u:[2,4],type:[5123,5125]},Y[33190]={e:6402,t:!0,r:!1,u:4,type:5125},Y[36012]={e:6402,t:!0,r:!1,u:4,type:5126},Y[35056]={e:34041,t:!0,r:!1,u:4,type:34042},Y[36013]={e:34041,t:!0,r:!1,u:4,type:36269},Object.keys(Y).forEach((function(e){var t=Y[e];if(t.bytesPerElementMap={},Array.isArray(t.u))t.u.forEach((function(e,r){var a=t.type[r];t.bytesPerElementMap[a]=e}));else{var r=t.type;t.bytesPerElementMap[r]=t.u}}));var W={}},function(e,t,r){"use strict";t.__esModule=!0;var a=r(7);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(t[e]=a[e])}))},function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function n(e,t){A.glEnumToString(e,0);var r=e.getExtension(t);if(r){var a={},n=g.exec(t)[1],o="_"+n;for(var i in r){var s=r[i],u="function"==typeof s,c=u?n:o,d=i;i.endsWith(c)&&(d=i.substring(0,i.length-c.length)),void 0!==e[d]?u||e[d]===s||l.warn(d,e[d],s,i):u?e[d]=function(e){return function(){return e.apply(r,arguments)}}(s):(e[d]=s,a[d]=s)}a.constructor={name:r.constructor.name},A.glEnumToString(a,0)}return r}function o(e){for(var t=0;t<y.length;++t)n(e,y[t])}t.__esModule=!0;var i={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0};t.addExtensionsToContext=o,t.getContext=function(e,t){return function(e,t){for(var r=["webgl2","webgl","experimental-webgl"],a=null,n=0;n<r.length;++n)if(a=e.getContext(r[n],t)){v.addExtensionsToContext&&o(a);break}return a}(e,t)},t.getWebGLContext=function(e,t){return function(e,t){for(var r=["webgl","experimental-webgl"],a=null,n=0;n<r.length;++n)if(a=e.getContext(r[n],t)){v.addExtensionsToContext&&o(a);break}return a}(e,t)},t.resizeCanvasToDisplaySize=function(e,t){t=t||1,t=Math.max(0,t);var r=e.clientWidth*t|0,a=e.clientHeight*t|0;return(e.width!==r||e.height!==a)&&(e.width=r,e.height=a,!0)},t.setDefaults=function(e){l.copyExistingProperties(e,v),s.setAttributeDefaults_(e),u.setTextureDefaults_(e)};var s=a(r(8));Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(t[e]=s[e]))}));var u=a(r(5));Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(t[e]=u[e]))}));var l=a(r(0)),A=a(r(3));Object.keys(A).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(t[e]=A[e]))}));var c=r(9);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(t[e]=c[e]))}));var d=r(10);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(t[e]=d[e]))}));var p=r(4);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(t[e]=p[e]))}));var f=r(2);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(t[e]=f[e]))}));var h=r(11);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(t[e]=h[e]))}));var v={addExtensionsToContext:!0},g=/^(.*?)_/,y=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"]},function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function n(e,t,r,a,n){e.bindBuffer(t,r),e.bufferData(t,a,n||e.STATIC_DRAW)}function o(e,t,r,a){if(f.isBuffer(e,t))return t;r=r||e.ARRAY_BUFFER;var o=e.createBuffer();return n(e,r,o,t,a),o}function i(e){return"indices"===e}function s(e){return e.length?e:e.data}function u(e,t){var r;if(t%(r=v.test(e)?2:g.test(e)?4:3)>0)throw"Can not guess numComponents for attribute '"+e+"'. Tried "+r+" but "+t+" values is not evenly divisible by "+r+". You should specify it.";return r}function l(e,t){return e.numComponents||e.size||u(t,s(e).length)}function A(e,t){if(p.isArrayBuffer(e))return e;if(p.isArrayBuffer(e.data))return e.data;Array.isArray(e)&&(e={data:e});var r=e.type;return r||(r=i(t)?Uint16Array:Float32Array),new r(e.data)}function c(e,t){var r={};return Object.keys(t).forEach((function(a){if(!i(a)){var n=t[a],s=n.attrib||n.name||n.attribName||h.attribPrefix+a;if(n.value){if(!Array.isArray(n.value)&&!p.isArrayBuffer(n.value))throw new Error("array.value is not array or typedarray");r[s]={value:n.value}}else{var c,d,f,v;if(n.buffer&&n.buffer instanceof WebGLBuffer)c=n.buffer,v=n.numComponents||n.size,d=n.type,f=n.normalize;else if("number"==typeof n||"number"==typeof n.data){var g=n.data||n,y=n.type||Float32Array,m=g*y.BYTES_PER_ELEMENT;d=p.getGLTypeForTypedArrayType(y),f=void 0!==n.normalize?n.normalize:function(e){return e===Int8Array||e===Uint8Array}(y),v=n.numComponents||n.size||u(a,g),c=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,m,n.drawType||e.STATIC_DRAW)}else{var _=A(n,a);c=o(e,_,void 0,n.drawType),d=p.getGLTypeForTypedArray(_),f=void 0!==n.normalize?n.normalize:function(e){return e instanceof Int8Array||e instanceof Uint8Array}(_),v=l(n,a)}r[s]={buffer:c,numComponents:v,type:d,normalize:f,stride:n.stride||0,offset:n.offset||0,divisor:void 0===n.divisor?void 0:n.divisor,drawType:n.drawType}}}})),e.bindBuffer(e.ARRAY_BUFFER,null),r}function d(e,t,r){var a="indices"===r?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;return o(e,A(t,r),a)}t.__esModule=!0,t.createAttribsFromArrays=c,t.createBuffersFromArrays=function(e,t){var r={};return Object.keys(t).forEach((function(a){r[a]=d(e,t[a],a)})),t.indices?(r.numElements=t.indices.length,r.elementType=p.getGLTypeForTypedArray(A(t.indices),"indices")):r.numElements=function(e){var t,r;for(r=0;r<y.length&&!((t=y[r])in e);++r);r===y.length&&(t=Object.keys(e)[0]);var a=e[t],n=s(a).length,o=l(a,t);if(n%o>0)throw"numComponents "+o+" not correct for length "+n;return n/o}(t),r},t.createBufferFromArray=d,t.createBufferFromTypedArray=o,t.createBufferInfoFromArrays=function(e,t,r){var a=c(e,t),n=Object.assign({},r||{});n.attribs=Object.assign({},r?r.attribs:{},a);var i=t.indices;if(i){var s=A(i,"indices");n.indices=o(e,s,e.ELEMENT_ARRAY_BUFFER),n.numElements=s.length,n.elementType=p.getGLTypeForTypedArray(s)}else n.numElements||(n.numElements=function(e,t){var r,a;for(a=0;a<y.length&&!((r=y[a])in t)&&!((r=h.attribPrefix+r)in t);++a);a===y.length&&(r=Object.keys(t)[0]);var n=t[r];e.bindBuffer(e.ARRAY_BUFFER,n.buffer);var o=e.getBufferParameter(e.ARRAY_BUFFER,e.BUFFER_SIZE);e.bindBuffer(e.ARRAY_BUFFER,null);var i=o/function(e,t){return t===e.BYTE||t===e.UNSIGNED_BYTE?1:t===e.SHORT||t===e.UNSIGNED_SHORT?2:t===e.INT||t===e.UNSIGNED_INT||t===e.FLOAT?4:0}(e,n.type),s=n.numComponents||n.size,u=i/s;if(u%1!=0)throw"numComponents "+s+" not correct for length "+length;return u}(e,n.attribs));return n},t.setAttribInfoBufferFromArray=function(e,t,r,a){r=A(r),void 0!==a?(e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.bufferSubData(e.ARRAY_BUFFER,a,r)):n(e,e.ARRAY_BUFFER,t.buffer,r,t.drawType)},t.setAttributePrefix=function(e){h.attribPrefix=e},t.setAttributeDefaults_=function(e){f.copyExistingProperties(e,h)},t.getNumComponents_=l,t.getArray_=s;var p=a(r(2)),f=a(r(0)),h={attribPrefix:""},v=/coord|texture/i,g=/color|colour/i,y=["position","positions","a_position"]},function(e,t,r){"use strict";function a(e,t,r,a,n,o){r=void 0===r?e.TRIANGLES:r;var i=t.indices,s=t.elementType,u=void 0===a?t.numElements:a;n=void 0===n?0:n,s||i?void 0!==o?e.drawElementsInstanced(r,u,void 0===s?e.UNSIGNED_SHORT:t.elementType,n,o):e.drawElements(r,u,void 0===s?e.UNSIGNED_SHORT:t.elementType,n):void 0!==o?e.drawArraysInstanced(r,n,u,o):e.drawArrays(r,n,u)}t.__esModule=!0,t.drawBufferInfo=a,t.drawObjectList=function(e,t){var r=null,o=null;t.forEach((function(t){if(!1!==t.active){var i=t.programInfo,s=t.vertexArrayInfo||t.bufferInfo,u=!1,l=void 0===t.type?e.TRIANGLES:t.type;i!==r&&(r=i,e.useProgram(i.program),u=!0),(u||s!==o)&&(o&&o.vertexArrayObject&&!s.vertexArrayObject&&e.bindVertexArray(null),o=s,n.setBuffersAndAttributes(e,i,s)),n.setUniforms(i,t.uniforms),a(e,s,l,t.count,t.offset,t.instanceCount)}})),o.vertexArrayObject&&e.bindVertexArray(null)};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}(r(4))},function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function n(e){return A[e]}function o(e){return c[e]}t.__esModule=!0,t.bindFramebufferInfo=function(e,t,r){r=r||e.FRAMEBUFFER,t?(e.bindFramebuffer(r,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(r,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))},t.createFramebufferInfo=function(e,t,r,a){var A=e.FRAMEBUFFER,c=e.createFramebuffer();e.bindFramebuffer(A,c),r=r||e.drawingBufferWidth,a=a||e.drawingBufferHeight;var d=0,p={framebuffer:c,attachments:[],width:r,height:a};return(t=t||l).forEach((function(t){var l=t.attachment,c=t.format,f=n(c);if(f||(f=u+d++),!l)if(o(c))l=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,l),e.renderbufferStorage(e.RENDERBUFFER,c,r,a);else{var h=Object.assign({},t);h.width=r,h.height=a,void 0===h.auto&&(h.auto=!1,h.min=h.min||h.minMag||e.LINEAR,h.mag=h.mag||h.minMag||e.LINEAR,h.wrapS=h.wrapS||h.wrap||e.CLAMP_TO_EDGE,h.wrapT=h.wrapT||h.wrap||e.CLAMP_TO_EDGE),l=i.createTexture(e,h)}if(s.isRenderbuffer(e,l))e.framebufferRenderbuffer(A,f,e.RENDERBUFFER,l);else{if(!s.isTexture(e,l))throw"unknown attachment type";e.framebufferTexture2D(A,f,t.texTarget||e.TEXTURE_2D,l,t.level||0)}p.attachments.push(l)})),p},t.resizeFramebufferInfo=function(e,t,r,a,n){a=a||e.drawingBufferWidth,n=n||e.drawingBufferHeight,t.width=a,t.height=n,(r=r||l).forEach((function(r,o){var u=t.attachments[o],l=r.format;if(s.isRenderbuffer(e,u))e.bindRenderbuffer(e.RENDERBUFFER,u),e.renderbufferStorage(e.RENDERBUFFER,l,a,n);else{if(!s.isTexture(e,u))throw"unknown attachment type";i.resizeTexture(e,u,r,a,n)}}))};var i=a(r(5)),s=a(r(0)),u=36064,l=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],A={34041:33306,6401:36128,36168:36128,6402:36096,33189:36096},c={32854:!0,32855:!0,36194:!0,34041:!0,33189:!0,6401:!0,36168:!0}},function(e,t,r){"use strict";function a(e,t,r,a){var o=e.createVertexArray();return e.bindVertexArray(o),n.setAttributes(t,r),a&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bindVertexArray(null),o}t.__esModule=!0,t.createVertexArrayInfo=function(e,t,r){var a=e.createVertexArray();return e.bindVertexArray(a),t.length||(t=[t]),t.forEach((function(t){n.setBuffersAndAttributes(e,t,r)})),e.bindVertexArray(null),{numElements:r.numElements,elementType:r.elementType,vertexArrayObject:a}},t.createVAOAndSetAttributes=a,t.createVAOFromBufferInfo=function(e,t,r){return a(e,t.attribSetters||t,r.attribs,r.indices)};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}(r(4))}])},6916:function(e,t){var r,a,n;a=this,n=function(){"use strict";var e,t=this;function r(e){t.console&&(t.console.error?t.console.error(e):t.console.log&&t.console.log(e))}function a(e,t,a,n){var o=n||r,i=e.createShader(a);return e.shaderSource(i,t),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(o("*** Error compiling shader '"+i+"':"+e.getShaderInfoLog(i)),e.deleteShader(i),null)}function n(e,t,a,n,o){var i=o||r,s=e.createProgram();return t.forEach((function(t){e.attachShader(s,t)})),a&&a.forEach((function(t,r){e.bindAttribLocation(s,n?n[r]:r,t)})),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)?s:(i("Error in program linking:"+e.getProgramInfoLog(s)),e.deleteProgram(s),null)}function o(e,t,r,n){var o,i,s=document.getElementById(t);if(!s)throw"*** Error: unknown script element"+t;if(o=s.text,!r)if("x-shader/x-vertex"===s.type)i=e.VERTEX_SHADER;else if("x-shader/x-fragment"===s.type)i=e.FRAGMENT_SHADER;else if(i!==e.VERTEX_SHADER&&i!==e.FRAGMENT_SHADER)throw"*** Error: unknown shader type";return a(e,o,r||i,n)}(e=e||t)===e.top&&(console.log("%c%s","color:blue;font-weight:bold;","for more about webgl-utils.js see:"),console.log("%c%s","color:blue;font-weight:bold;","http://webgl2fundamentals.org/webgl/lessons/webgl-boilerplate.html"));var i=["VERTEX_SHADER","FRAGMENT_SHADER"];return{createProgram:n,createProgramFromScripts:function(e,t,r,a,s){for(var u=[],l=0;l<t.length;++l)u.push(o(e,t[l],e[i[l]],s));return n(e,u,r,a,s)},createProgramFromSources:function(e,t,r,o,s){for(var u=[],l=0;l<t.length;++l)u.push(a(e,t[l],e[i[l]],s));return n(e,u,r,o,s)},resizeCanvasToDisplaySize:function(e,t){t=t||1;var r=e.clientWidth*t|0,a=e.clientHeight*t|0;return(e.width!==r||e.height!==a)&&(e.width=r,e.height=a,!0)}}},void 0===(r=function(){return n.call(a)}.apply(t,[]))||(e.exports=r)},8414:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(265)],n=function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a),window.m4=r(7212),window.webglUtils=r(6916),r(7601);var n=function(){function e(){}return e.main=function(){(0,a.default)()},e}();t.default=n,n.main()}.apply(t,a),void 0===n||(e.exports=n)},2086:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.faces=void 0,t.faces=[],t.faces[0]=["data:image/png;base64,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","data:image/png;base64,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","data:image/png;base64,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","data:image/png;base64,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","data:image/png;base64,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","data:image/png;base64,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","data:image/png;base64,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","data:image/png;base64,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","data:image/png;base64,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","data:image/png;base64,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","data:image/png;base64,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"],t.faces[1]=["data:image/png;base64,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","data:image/png;base64,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","data:image/png;base64,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"]}.apply(t,[r,t]),void 0===a||(e.exports=a)},2512:(e,t,r)=>{var a,n;a=[r,t,r(5081)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="./assets/sound/",n=new Audio(a+"Iwan Gabovitch - Dark Ambience Loop.mp3"),o=new Audio(a+"Menu_Select_00.mp3"),i=new Audio(a+"voice/en/Attention.wav"),s=new Audio(a+"voice/en/CeaseFire.wav"),u=(new Audio(a+"voice/en/EngineMalfunction.wav"),new Audio(a+"voice/en/MissileDetected.wav"),new Audio(a+"voice/en/PowerSupplyReestablished.wav")),l=new Audio(a+"voice/en/PrepareForAction.wav"),A=new Audio(a+"voice/en/ReactorMalfunction.wav"),c=(new Audio(a+"voice/en/Warning.wav"),new Audio(a+"voice/en/WeaponDamaged.wav"),new Audio(a+"voice/en/WeaponDestroyed.wav")),d=(new Audio(a+"voice/en/WeaponMalfunction.wav"),new Audio(a+"bad.wav"));n.loop=!0;for(var p=function(e,t,r,a,n){var o=t[r];o&&(a||(a=n(o)),a.volume=e,a.play())},f=[],h=0;h<10;h++)f.push({audio:new Audio,finished:-1});var v=!0;t.default=function(e){var t,a,h,g,y=e.eventMap;if(e.menuSettings.music?v||(n.volume=1,v=!0):v&&(n.volume=0,v=!1),y[r.GAME_EVENT.TIME_SCALE_CHANGED]){var m=2*y[r.GAME_EVENT.TIME_SCALE_CHANGED].intensity;n.playbackRate=m<=1?m:1}e.menuSettings.sfx&&(t=y,a=r.GAME_EVENT.MENU_SELECT,h=o,(g=t[a])&&function(e,t){for(var r=0;r<f.length;r++){var a=new Date,n=f[r];if(n.finished<a.getTime()){n.finished=a.getTime()+1e3*e.duration,n.audio.src=e.src,n.audio.volume=t,n.audio.play();break}}}(h||undefined(g),.8),p(1,y,r.GAME_EVENT.RESUME_GAME,i),p(1,y,r.GAME_EVENT.START_GAME,l),e.currentLevel<=13||(p(1,y,r.GAME_EVENT.PLAYER_DEAD,c),p(1,y,r.GAME_EVENT.PLAYER_DAMAGE,d),p(1,y,r.GAME_EVENT.PLAYER_DAMAGE_LEVEL_CRITICAL,A),p(1,y,r.GAME_EVENT.PLAYER_DAMAGE_LEVEL_OK,u),p(1,y,r.GAME_EVENT.NPC_FRIENDLY_FIRE,s)))}}.apply(t,a),void 0===n||(e.exports=n)},5047:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSectorSize=t.gridPosToWorld=t.getPoistionXYinGrid=t.getPoistionVecXYinGrid=t.getSectorsVecWrapped=t.getSectorsVec=t.getSectors=t.getSectorsAsFlatList=t.getSectorsAsFlatListWrapped=t.getSectorIndexesAsFlatListsWrapped=t.updateGrid3d=t.updateGrid3dRadiusBased=t.addNewToGrid3d=t.RESOLUTION=void 0,t.RESOLUTION=.005,t.addNewToGrid3d=function(e,r,a){void 0===a&&(a=!1);for(var n=r.length-1;n>-1;--n){var o=r[n];if(a){var i=Math.floor(o.pos.x*t.RESOLUTION);e[Math.floor(o.pos.y*t.RESOLUTION)][i].push(o)}}},t.updateGrid3dRadiusBased=function(e,r,a){for(var n=a?2:1,o=r.length-1;o>-1;--o){var i=r[o];if(a||!i.remove)for(var s=Math.floor(i.pos.x*t.RESOLUTION),u=Math.floor(i.pos.y*t.RESOLUTION),l=Math.floor(i.radius*t.RESOLUTION)+n,A=(0,t.getSectorIndexesAsFlatListsWrapped)(e,s,u,l),c=A[0],d=A[1],p=c.length,f=0;f<p;f++)for(var h=0;h<p;h++){var v=c[f],g=e[d[h]][v];if(a)for(var y=g.length,m=0;m<y;m++)g.pop();else g.push(i)}}},t.updateGrid3d=function(e){for(var r=e.length,a=e[0].length,n=0;n<r;n++)for(var o=0;o<a;o++)for(var i=e[n][o],s=i.length,u=0;u<s;u++){var l=i[u];if(l.remove)i.splice(u,1),u--,s--;else{var A=Math.floor(l.pos.x*t.RESOLUTION),c=Math.floor(l.pos.y*t.RESOLUTION);A===o&&c===n||(i.splice(u,1),u--,s--,e[c][A].push(l))}}},t.getSectorIndexesAsFlatListsWrapped=function(e,t,r,a){void 0===a&&(a=1);for(var n=Math.floor(t),o=Math.floor(r),i=e[0].length-1,s=e.length-1,u=[],l=[],A=[],c=a+a+1,d=0;d<c;d++){A.push(d-a);var p=n-(d-a),f=o-(d-a),h=p<0?i+1+p:p>i?p-i:p,v=f<0?s+1+f:f>s?f-s:f;u.push(h),l.push(v)}return[u,l]},t.getSectorsAsFlatListWrapped=function(e,t,r,a){void 0===a&&(a=1);for(var n=Math.floor(t),o=Math.floor(r),i=[],s=e[0].length-1,u=e.length-1,l=[],A=[],c=[],d=a+a+1,p=0;p<d;p++){c.push(p-a);var f=n-(p-a),h=o-(p-a),v=f<0?s+1+f:f>s?f-s:f,g=h<0?u+1+h:h>u?h-u:h;l.push(v),A.push(g)}for(var y=0;y<d;y++)for(var m=0;m<d;m++){var _=l[m],x=A[y];if(!(a>1&&x===o&&_===n)){var S=e[x][_],T=S.length;for(p=0;p<T;p++)i.push(S[p])}}return i},t.getSectorsAsFlatList=function(e,t,r,a){void 0===a&&(a=1);for(var n=[],o=e[0].length,i=e.length,s=Math.max(t-a,0),u=Math.max(r-a,0),l=Math.min(t+a+1,o),A=Math.min(r+a+1,i),c=u;c<A;c++)for(var d=s;d<l;d++)for(var p=e[c][d],f=p.length,h=0;h<f;h++)n.push(p[h]);return n},t.default=function(e,r,a){for(var n=function(e,t){for(var r=[],a=0;a<t;a++){for(var n=[],o=0;o<e;o++)n.push([]);r.push(n)}return r}(Math.ceil(r*t.RESOLUTION),Math.ceil(a*t.RESOLUTION)),o=e.length,i=0;i<o;i++){var s=e[i],u=Math.floor(s.pos.x*t.RESOLUTION);n[Math.floor(s.pos.y*t.RESOLUTION)][u].push(s)}return n},t.getSectors=function(e,r,a,n){void 0===n&&(n=1);var o=Math.floor(r*t.RESOLUTION),i=Math.floor(a*t.RESOLUTION),s=Math.floor(n*t.RESOLUTION);return(0,t.getSectorsAsFlatList)(e,o,i,s)},t.getSectorsVec=function(e,r,a){void 0===a&&(a=1);var n=Math.floor(r.x*t.RESOLUTION),o=Math.floor(r.y*t.RESOLUTION),i=Math.floor(a*t.RESOLUTION);return(0,t.getSectorsAsFlatList)(e,n,o,i)},t.getSectorsVecWrapped=function(e,r,a){void 0===a&&(a=1);var n=Math.floor(r.x*t.RESOLUTION),o=Math.floor(r.y*t.RESOLUTION),i=Math.floor(a*t.RESOLUTION);return(0,t.getSectorsAsFlatListWrapped)(e,n,o,i)},t.getPoistionVecXYinGrid=function(e){return{x:Math.floor(e.x*t.RESOLUTION),y:Math.floor(e.y*t.RESOLUTION)}},t.getPoistionXYinGrid=function(e,r){return{x:Math.floor(e*t.RESOLUTION),y:Math.floor(r*t.RESOLUTION)}},t.gridPosToWorld=function(e,r,a,n){var o=e/t.RESOLUTION,i=r/t.RESOLUTION;if(n){var s=(0,t.getSectorSize)(a,n);o+=.5*s.w,i+=.5*s.h}return{x:o,y:i}},t.getSectorSize=function(e,r){return{w:e/(e*t.RESOLUTION),h:r/(r*t.RESOLUTION)}}}.apply(t,[r,t]),void 0===a||(e.exports=a)},1638:(e,t,r)=>{var a,n;a=[r,t,r(9262)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineInterceptCircleToPositions=t.LineInterceptCircle=t.LineIntersectsToPoint=t.LineIntersects=void 0,t.LineIntersects=function(e,t,r,a,n,o,i,s){var u,l,A;return 0!=(u=(r-e)*(s-o)-(i-n)*(a-t))&&(l=((t-a)*(i-e)+(r-e)*(s-t))/u,0<(A=((s-o)*(i-e)+(n-i)*(s-t))/u)&&A<1&&0<l&&l<1)},t.LineIntersectsToPoint=function(e,t,r,a,n,o,i,s){var u;if(e===r&&t===a||n===i&&o===s)return null;if(0==(u=(s-o)*(r-e)-(i-n)*(a-t)))return null;var l=((i-n)*(t-o)-(s-o)*(e-n))/u,A=((r-e)*(t-o)-(a-t)*(e-n))/u;return l<0||l>1||A<0||A>1?null:{x:e+l*(r-e),y:t+l*(a-t)}},t.LineInterceptCircle=function(e,t,r,a){var n=t.x-e.x,o=t.y-e.y,i=((r.x-e.x)*n+(r.y-e.y)*o)/(o*o+n*n);return(i>=0&&i<=1?Math.pow(e.x+n*i-r.x,2)+Math.pow(e.y+o*i-r.y,2):i<0?Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2):Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))<a*a};var a=function(e){return e<0?-1:1};t.LineInterceptCircleToPositions=function(e,t,n,o){var i=e.clone().subtract(n),s=t.clone().subtract(n),u=s.clone().subtract(i),l=u.mag(),A=i.x*s.y-s.x*i.y,c=o*o*l*l-A*A;if(c<0)return[];var d=Math.sqrt(c),p=[];return p.push(new r.Vector(A*u.y+a(u.y)*u.x*d,-A*u.x+Math.abs(u.y)*d).div(l*l).add(n)),c>0&&p.push(new r.Vector(A*u.y-a(u.y)*u.x*d,-A*u.x-Math.abs(u.y)*d).div(l*l).add(n)),p}}.apply(t,a),void 0===n||(e.exports=n)},3058:(e,t,r)=>{var a,n;a=[r,t,r(484)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntArrToRect=t.intersectsXYWH_XY=t.intersectsArr_XY=void 0,t.intersectsArr_XY=function(e,t,r){return!(e[0]>t||e[0]+e[2]<t||e[1]>r||e[1]+e[3]<r)},t.intersectsXYWH_XY=function(e,t,r,a,n,o){return!(e>n||e+r<n||t>o||t+a<o)},t.IntArrToRect=function(e){return new r.Rectangle(e[0],e[1],e[2],e[3])}}.apply(t,a),void 0===n||(e.exports=n)},1477:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuadTreeFastPoint32=t.getQTFastP32data=void 0;var r=function(e,t,r,a,n,o){return!(e>n||e+r<n||t>o||t+a<o)},a=[],n=function(e){a.push(e)},o=0,i=function(e,t,r,n,i,u,l){var A=null;return a.length>0?(A=a.pop()).set(e,t,r,n,i,u,l):(A=new s(e,t,r,n,i,u,l),o++),A};t.getQTFastP32data=function(){return{nodesCreated:o,poolsize:a.length}};var s=function(){function e(e,t,r,a,n,o,i){this.indexes_I_XY=[],this.set(e,t,r,a,n,o,i)}return e.prototype.set=function(e,t,r,a,n,o,i){this.x=e,this.y=t,this.width=r,this.height=a,this.cap=n,this.indexes_I_XY.length=0,this.maxDepth=i,this.depth=o},e.prototype.reset=function(){this.ne&&(n(this.ne),n(this.nw),n(this.se),n(this.sw),this.ne.reset(),this.nw.reset(),this.se.reset(),this.sw.reset(),this.ne=void 0,this.nw=void 0,this.se=void 0,this.sw=void 0),this.indexes_I_XY.length=0},e.prototype.query=function(e,t,a,n,o){if(c=e,d=t,p=a,f=n,h=this.x,v=this.y,g=this.width,y=this.height,!(c>h+g||c+p<h||d>v+y||d+f<v))if(this.ne)this.ne.query(e,t,a,n,o),this.nw.query(e,t,a,n,o),this.se.query(e,t,a,n,o),this.sw.query(e,t,a,n,o);else for(var i=this.indexes_I_XY.length,s=this.indexes_I_XY,u=0;u<i;u+=3){var l=s[u+1],A=s[u+2];r(e,t,a,n,l,A)&&o.push(s[u])}var c,d,p,f,h,v,g,y},e.prototype.insert=function(e,t,r){if(this.nw){var a=e>this.x+.5*this.width,n=t<this.y+.5*this.height;a?n?this.ne.insert(e,t,r):this.se.insert(e,t,r):n?this.nw.insert(e,t,r):this.sw.insert(e,t,r)}else{var o=this.indexes_I_XY,i=o.length;if(i<this.cap||this.depth>=this.maxDepth)o.push(r,e,t);else{this.subdivide();for(var s=0;s<i;s+=3){var u=o[s+1],l=o[s+2];this.insert(u,l,o[s])}this.insert(e,t,r),this.indexes_I_XY.length=0}}},e.prototype.subdivide=function(){var e=this.x,t=this.y,r=this.width,a=this.height,n=this.cap,o=this.depth+1,s=this.maxDepth;this.nw=i(e,t,.5*r,.5*a,n,o,s),this.ne=i(e+.5*r,t,.5*r,.5*a,n,o,s),this.sw=i(e,t+.5*a,.5*r,.5*a,n,o,s),this.se=i(e+.5*r,t+.5*a,.5*r,.5*a,n,o,s)},e}(),u=function(){function e(e,t,r,a){void 0===a&&(a=3),this.rootRect=e,this.REFERENCE_INDEX=0,this.root=new s(e.x,e.y,e.width,e.height,3*t,1,a),this.itemType=r,this.references=[]}return e.prototype.insertUnsafe=function(e){this.REFERENCE_INDEX=this.references.push(e)-1,this.root.insert(e.pos.x,e.pos.y,this.REFERENCE_INDEX)},e.prototype.insert=function(e){var t=this.rootRect;return!!r(t.x,t.y,t.width,t.height,e.pos.x,e.pos.y)&&(this.REFERENCE_INDEX=this.references.push(e),this.root.insert(e.pos.x,e.pos.y,this.REFERENCE_INDEX-1),!0)},e.prototype.query=function(e){var t=e.radius;return this.___query(e.pos.x-t,e.pos.y-t,2*t,t)},e.prototype.___query=function(e,t,r,a){var n=[],o=[];this.root.query(e,t,r,a,o);for(var i=o.length,s=0;s<i;s++)n.push(this.references[o[s]]);return n},e.prototype.queryCircle=function(e,t){var a=this.___query(e.x-t,e.y-t,2*t,2*t);if(0===a.length)return a;for(var n=.7*t,o=e.x-n,i=e.y-n,s=2*n,u=a.length,l=[],A=0;A<u;A++){var c=a[A];(r(o,i,s,s,c.pos.x,c.pos.y)||(e.x-c.pos.x)*(e.x-c.pos.x)+(e.y-c.pos.y)*(e.y-c.pos.y)<t*t)&&l.push(c)}return l},e.prototype.queryInt=function(e){return this.___query(e.x,e.y,e.width,e.height)},e.prototype.queryVec=function(e,t,r){return this.___query(e.x-t,e.y-r,2*t,2*r)},e.prototype.reset=function(){this.references=[],this.REFERENCE_INDEX=0,this.root.reset(),this.root.x=this.rootRect.x,this.root.y=this.rootRect.y,this.root.width=this.rootRect.width,this.root.height=this.rootRect.height,this.root.cap=3*this.cap,this.root.maxDepth=this.maxDepth},e.prototype.setup=function(e,t,r,a){this.rootRect=e,this.cap=t,this.itemType=r,a&&(this.maxDepth=a),this.reset()},e.prototype.getRangeType=function(){return"INT32 (P:FST)"},e.prototype.visualize=function(e,t,r,a,n,o,i){},e}();t.QuadTreeFastPoint32=u}.apply(t,[r,t]),void 0===a||(e.exports=a)},731:(e,t,r)=>{var a,n;a=[r,t,r(484),r(1638),r(4077),r(2800),r(7561),r(7899)],n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawTree=t.QuadTreeFastRect32=t.QuadTreeFastRect32Node=t.FST32_NODE_LOOP_BASE_EXPORTED=void 0;var u=0,l=0,A=0,c=0,d=function(e,t,r,a,n,o,i,s){return!(e>n+i||e+r<n||t>o+s||t+a<o)},p=[],f=0,h=0,v=function(e,t,r,a,n,o,i){var s;if(f<h)s=p[f],f++,s.set(e,t,r,a,n,o,i);else for(var u=0;u<8;u++)s=new y(e,t,r,a,n,o,i),p[f]=s,f++,h++;return s};t.FST32_NODE_LOOP_BASE_EXPORTED=6;var g=t.FST32_NODE_LOOP_BASE_EXPORTED,y=function(){function e(e,t,r,a,n,o,i){this.indexes_I_XYWH_S=[],this.children=[],this.set(e,t,r,a,n,o,i)}return e.prototype.set=function(e,t,r,a,n,o,i){this.x=e,this.y=t,this.width=r,this.height=a,this.cap=n,this.maxDepth=i,this.depth=o,this.sleeping=!0,this.children_length=0},e.prototype.reset=function(){for(var e=0;e<this.children_length;e++)this.children[e].reset();var t;t=this.children_length,f-=t,this.children_length=0,this.indexes_I_XYWH_S.length=0},e.prototype.query=function(e,t,r,a,n,o,i,s,u,l,A){if((1!==u||!this.sleeping)&&d(e,t,r,a,this.x,this.y,this.width,this.height)){var c=this.children,p=this.children_length;if(p>0)for(var f=0;f<p;f++)c[f].query(e,t,r,a,n,o,i,s,u,l,A);else{var h=this.indexes_I_XYWH_S,v=h.length;for(f=0;f<v;f+=g){var y=h[f];if(!(1===h[f+5]&&1===u||y===o||i[y]||A[y])){var m=h[f+1],_=h[f+2],x=h[f+3],S=h[f+4];d(e,t,r,a,m,_,x,S)&&(n.push(y),s&&(i[y]=!0))}}}}},e.prototype.queryTree=function(e,t,r,a){this.sleeping;var n=this.children,o=this.children_length;if(o>0)for(var i=0;i<o;i++)n[i].queryTree(e,t,r,a);else{var s=this.indexes_I_XYWH_S,u=s.length;for(i=0;i<u;i+=g){var l=s[i];if(1!==s[i+5]){for(var A=s[i+1],c=s[i+2],p=s[i+3],f=s[i+4],h=[l],v=0;v<u;v+=g){var y=s[v];if(y!==l){var m=s[v+1],_=s[v+2],x=s[v+3],S=s[v+4],T=a[l]||{},E=a[y]||{},M=T[y],b=E[l];M||b||(T[y]=!0,a[l]=T,E[l]=!0,a[y]=E,d(A,c,p,f,m,_,x,S)&&h.push(y))}}h.length>1&&t.push(h)}}}},e.prototype.insert=function(e,t,r,a,n,o){1!==o&&(this.sleeping=!1),u++;var i,s,l,A,c,p,f=this.children,h=this.children_length;if(h>0)for(var v=0;v<h;v++){var y=f[v];if(i=y.x,s=y.y,l=y.width,A=y.height,p=t,(c=e)>i&&p>s&&c+r<i+l&&p+a<s+A){y.insert(e,t,r,a,n,o);break}d(y.x,y.y,y.width,y.height,e,t,r,a)&&y.insert(e,t,r,a,n,o)}else{var m=this.indexes_I_XYWH_S,_=m.length;if(_<this.cap||this.depth>=this.maxDepth)m.push(n),m.push(e),m.push(t),m.push(r),m.push(a),m.push(o);else{for(this.subdivide(),v=0;v<_;v+=g){var x=m[v+1],S=m[v+2],T=m[v+3],E=m[v+4],M=m[v+5];this.insert(x,S,T,E,m[v],M)}this.insert(e,t,r,a,n,o),this.indexes_I_XYWH_S.length=0}}},e.prototype.insert__iter=function(e,t,r,a,n,o){for(var i=[{quadrant:this,nodes_i_xywhi_s:[n,e,t,r,a,o]}];i.length>0;){var s=i.pop(),u=s.quadrant,c=s.nodes_i_xywhi_s;A=Math.max(i.length,A);var p=c.length;e:for(var f=0;f<p;f+=g){if(l++,u.children_length>0){for(var h=0;h<4;h++){var y=u.children[h];i.push({quadrant:y,nodes_i_xywhi_s:c})}break e}var m=c[f+1],_=c[f+2],x=c[f+3],S=c[f+4];if(d(u.x,u.y,u.width,u.height,m,_,x,S)){var T=c[f],E=c[f+5],M=u.indexes_I_XYWH_S,b=M.length;if(M.push(T),M.push(m),M.push(_),M.push(x),M.push(S),M.push(E),b<u.cap||u.depth>=u.maxDepth)1!==E&&(u.sleeping=!1);else{var I=u.x,L=u.y,P=u.width,w=u.height,R=u.cap,O=u.depth+1,C=u.maxDepth;for(u.children[0]=v(I,L,.5*P,.5*w,R,O,C),u.children[1]=v(I+.5*P,L,.5*P,.5*w,R,O,C),u.children[2]=v(I,L+.5*w,.5*P,.5*w,R,O,C),u.children[3]=v(I+.5*P,L+.5*w,.5*P,.5*w,R,O,C),u.children_length=4,h=0;h<4;h++)i.push({quadrant:u.children[h],nodes_i_xywhi_s:M});u.indexes_I_XYWH_S=[]}}}}},e.prototype.insert__iter_batched=function(e){for(var t=[{quadrant:this,nodes_i_xywhi_s:e}];t.length>0;)for(var r=t.pop(),a=r.quadrant,n=r.nodes_i_xywhi_s,o=n.length,i=0;i<o;i+=g){c++;var s=n[i+1],u=n[i+2],l=n[i+3],A=n[i+4];if(d(a.x,a.y,a.width,a.height,s,u,l,A)){var p=n[i],f=n[i+5];if(a.children_length>0)for(var h=0;h<4;h++){var y=a.children[h];d(y.x,y.y,y.width,y.height,s,u,l,A)&&t.push({quadrant:y,nodes_i_xywhi_s:[p,s,u,l,A,f]})}else{var m=a.indexes_I_XYWH_S,_=m.length;if(m.push(p),m.push(s),m.push(u),m.push(l),m.push(A),m.push(f),_<a.cap||a.depth>=a.maxDepth)1!==f&&(a.sleeping=!1);else{var x=a.x,S=a.y,T=a.width,E=a.height,M=a.cap,b=a.depth+1,I=a.maxDepth;for(a.children[0]=v(x,S,.5*T,.5*E,M,b,I),a.children[1]=v(x+.5*T,S,.5*T,.5*E,M,b,I),a.children[2]=v(x,S+.5*E,.5*T,.5*E,M,b,I),a.children[3]=v(x+.5*T,S+.5*E,.5*T,.5*E,M,b,I),a.children_length=4,h=0;h<4;h++)t.push({quadrant:a.children[h],nodes_i_xywhi_s:m});a.indexes_I_XYWH_S=[]}}}}},e.prototype.subdivide=function(){var e=this.x,t=this.y,r=this.width,a=this.height,n=this.cap,o=this.depth+1,i=this.maxDepth;this.children[0]=v(e,t,.5*r,.5*a,n,o,i),this.children[1]=v(this.x+.5*r,t,.5*r,.5*a,n,o,i),this.children[2]=v(e,t+.5*a,.5*r,.5*a,n,o,i),this.children[3]=v(e+.5*r,t+.5*a,.5*r,.5*a,n,o,i),this.children_length=4},e.prototype.getAABBdata=function(e,t,r,a,n,o,i){if(d(this.x,this.y,this.width,this.height,e,t,r,a))if(this.children_length>0)this.children.map((function(s){return s.getAABBdata(e,t,r,a,n,o,i)}));else{i.push(this.x,this.y,this.width,this.height,this.indexes_I_XYWH_S.length/g,this.cap,this.depth,this.maxDepth,this.sleeping?1:0);for(var s=this.indexes_I_XYWH_S,u=s.length,l=0;l<u;l+=g){var A=s[l];if(!n[A]){n[A]=!0;var c=s[l+1],p=s[l+2],f=s[l+3],h=s[l+4],v=s[l+5];o.push(A,c,p,f,h,v)}}}},e}();t.QuadTreeFastRect32Node=y;var m=function(){function e(e,t,r,a,n,o){void 0===a&&(a=8),void 0===n&&(n=!0),void 0===o&&(o=800),this.setup(e,t,r,a,n)}return e.prototype.queryShape=function(e){for(var t=Number.MAX_VALUE,a=Number.MIN_VALUE,n=Number.MAX_VALUE,o=Number.MIN_VALUE,i=e.length,s=0;s<i;s++){var u=e[s];u.x>a&&(a=u.x),u.x<t&&(t=u.x),u.y>o&&(o=u.y),u.y<n&&(n=u.y)}for(var l=new r.Rectangle(t,n,a-t,o-n),A=this.queryInt(l),c=A.length,d=0;d<c;d++)for(var p=A[d],f=new r.Rectangle(p.pos.x-p.radius,p.pos.y-p.radius,2*p.radius,2*p.radius).toPointArray(),h=0;h<4;h++){var v=f[h],g=(s=0,0),y=!1;for(s=0,g=i-1;s<i;g=s++)e[s].y>v.y!=e[g].y>v.y&&v.x<(e[g].x-e[s].x)*(v.y-e[s].y)/(e[g].y-e[s].y)+e[s].x&&(y=!y);if(y)return[p]}return[]},e.prototype.queryRay=function(e,t){for(var r,n,o,i,s=Math.min(e.x,t.x),u=Math.min(e.y,t.y),l=Math.max(e.x,t.x)-s,A=Math.max(e.y,t.y)-u,c=this.___query(s,u,l,A),d=e.x,p=e.y,f=t.x,h=t.y,v=[],g=c.length,y=0;y<g;y++){var m=c[y],_=m.pos.x,x=m.pos.y,S=m.radius;(0,a.LineIntersects)(d,p,f,h,_-S,x-S,_+S,x-S)||(0,a.LineIntersects)(d,p,f,h,_+S,x-S,_+S,x+S)||(0,a.LineIntersects)(d,p,f,h,_-S,x+S,_+S,x+S)||(0,a.LineIntersects)(d,p,f,h,_-S,x-S,_-S,x+S)?v.push(m):(n=x,i=p,(r=_)>(o=d)||r+S<o||n>i||n+S<i||v.push(m))}return v},e.prototype.intersectTree=function(e){var t=[],r=!e||this.itemType===e.itemType;return this.root.queryTree(e,t,r,{}),t},e.prototype.insertUnsafe=function(e,t){var r=e.radius,a=e.pos.x,n=e.pos.y,o=2*r,i=2*r;if(this.AABB_VEL){var s=e.vel.x*-t,u=e.vel.y*-t;s>0?o+=s:(a+=s,o-=s),u>0?i+=u:(n+=u,i-=u)}var l=a-r,A=n-r;this.REFERENCE_INDEX=this.references.push(e),this.root.insert__iter(l,A,o,i,this.REFERENCE_INDEX-1,e.sleepingAABB?1:0)},e.prototype.insertUnsafeBatched=function(e,t){for(var r=e.length,a=[],n=0;n<r;n++){var o=e[n],i=o.radius,s=o.pos.x,u=o.pos.y,l=2*i,A=2*i;if(this.AABB_VEL){var c=o.vel.x*-t,d=o.vel.y*-t;c>0?l+=c:(s+=c,l-=c),d>0?A+=d:(u+=d,A-=d)}var p=s-i,f=u-i;this.REFERENCE_INDEX=this.references.push(o),a.push(this.REFERENCE_INDEX-1,p,f,l,A,o.sleepingAABB?1:0)}this.root.insert__iter_batched(a)},e.prototype.insert=function(e,t){var r=this.rootRect,a=e.radius,n=e.pos.x,o=e.pos.y,i=2*a,s=2*a;if(this.AABB_VEL){var u=e.vel.x*-t,l=e.vel.y*-t;u>0?i+=u:(n+=u,i-=u),l>0?s+=l:(o+=l,s-=l)}var A=n-a,c=o-a;return!!d(r.x,r.y,r.width,r.height,A,c,i,s)&&(this.REFERENCE_INDEX=this.references.push(e),this.root.insert(A,c,i,s,this.REFERENCE_INDEX-1,e.sleepingAABB?1:0),!0)},e.prototype.query=function(e){var t=e.radius;return this.___query(e.pos.x-t,e.pos.y-t,2*t,2*t)},e.prototype.___query=function(e,t,r,a){var n=[],o=[];this.root.query(e,t,r,a,o,-1,{},!0,-1,-1,{});for(var i=o.length,s=0;s<i;s++)n.push(this.references[o[s]]);return n},e.prototype.___queryIndexes=function(e,t,r,a,n,o){var i=[];return this.root.query(e,t,r,a,i,n,o,!1,-1,-1,{}),i},e.prototype.queryCircle=function(e,t){var r=this.___query(e.x-t,e.y-t,2*t,2*t);if(0===r.length)return r;for(var a=.7*t,n=e.x-a,o=e.y-a,i=2*a,s=r.length,u=[],l=0;l<s;l++){var A=r[l];(d(n,o,i,i,A.pos.x-A.radius,A.pos.y-A.radius,2*A.radius,2*A.radius)||(e.x-A.pos.x)*(e.x-A.pos.x)+(e.y-A.pos.y)*(e.y-A.pos.y)<t*t)&&u.push(A)}return u},e.prototype.queryInt=function(e){return this.___query(e.x,e.y,e.width,e.height)},e.prototype.queryVec=function(e,t,r){return this.___query(e.x-t,e.y-r,2*t,2*r)},e.prototype.destroy=function(){this.reset(),this.root=void 0,this.references.length=0,this.references=void 0},e.prototype.logInserts=function(e){"std"===e&&(console.log("insert std",u),u=0),"iter"===e&&(console.log("insert iter",l),console.log("insert iter ST size",A),l=0,A=0),"iterbatched"===e&&(console.log("insert iter batched",c),c=0)},e.prototype.reset=function(){s.IS_NODE&&console.log("_____________________________"),this.references=[],this.REFERENCE_INDEX=0,this.root?(this.root.reset(),this.root.children_length=0,this.root.x=this.rootRect.x,this.root.y=this.rootRect.y,this.root.width=this.rootRect.width,this.root.height=this.rootRect.height,this.root.cap=this.cap*g,this.root.maxDepth=this.maxDepth,this.root.depth=1,this.root.indexes_I_XYWH_S.length=0):this.root=new y(this.rootRect.x,this.rootRect.y,this.rootRect.width,this.rootRect.height,this.cap*g,1,this.maxDepth)},e.prototype.setup=function(e,t,r,a,n){void 0===n&&(n=!1),this.rootRect=e,this.cap=t,this.itemType=r,a&&(this.maxDepth=a),this.AABB_VEL=n,this.reset(),this.boundry=new Int32Array([e.x,e.y,e.width,e.height])},e.prototype.verifySleepStates=function(){var e=0,t=0,r=function(a,n){for(var o=0;o<a.children_length;o++){var i=a.children[o];if(!i.sleeping&&n)throw"parent sleeping with awake child";i.sleeping?t++:e++,r(i,i.sleeping)}};r(this.root,this.root.sleeping),console.log("iterator, sleepy",t,"awake",e)},e.prototype.getRangeType=function(){return"INT32 (FST)"},e.prototype.visualize=function(e,t,r,a,n,o,i){},e.prototype.getAABBdata_I_XYWH_S=function(e,t,r,a){var n=[],o=[];return this.root.getAABBdata(e,t,r,a,{},n,o),{aabb:n,nodes:o}},e}();t.QuadTreeFastRect32=m,t.drawTree=function(e,t){var r=.04,a=[],s=[],u=function(e){var o,l=e.width*r,A=e.height*r,c=(e.x-t.SX)*r+.5*t.SW,d=(e.y-t.SY)*r+.5*t.SH;e.sleeping?((o=s).push(c,d,c+l,d,c,d+A),o.push(c+l,d,c+l,d+A,c,d+A)):(o=a,(0,i.line2Poly)(c,d,c+l,d,o,2),(0,i.line2Poly)(c,d,c,d+A,o,2),(0,i.line2Poly)(c+l,d,c+l,d+A,o,2),(0,i.line2Poly)(c,d+A,c+l,d+A,o,2)),(0,n.LOG_GL_FIXED_FORCED)(c+" : "+d+" sx:"+t.SX+" sy:"+t.SY,"draw"),e.children_length&&e.children.map((function(e){return u(e)}))};u(e.root),(0,o.drawExternal)({polys:a.slice(0,6),autoSXSY:!1,a:1,r:0,g:0,b:0}),(0,o.drawExternal)({polys:s,autoSXSY:!1,a:1,r:0,g:1,b:0}),(0,o.drawExternal)({polys:a,autoSXSY:!1,a:1,r:1,g:0,b:0})}}.apply(t,a),void 0===n||(e.exports=n)},6036:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};a=[r,t,r(7185),r(484),r(1638),r(1330)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuadTreeInt32=t.QuadTreeInt32QtBranch=t.intersectsXYWH_XYWH=void 0;var s={},u=function(e){return new a.Rectangle(e[0],e[1],e[2],e[3])},l=function(e,t){return!(e[0]>t[0]+t[2]||e[0]+e[2]<t[0]||e[1]>t[1]+t[3]||e[1]+e[3]<t[1])},A=function(e,t){return!(e[0]>t[0]+t[2]||e[0]+e[2]<t[0]||e[1]>t[1]+t[3]||e[1]+e[3]<t[1])},c=function(e,t,r,a,n){return!(e[0]>t+a||e[0]+e[2]<t||e[1]>r+n||e[1]+e[3]<r)};t.intersectsXYWH_XYWH=function(e,t,r,a,n,o,i,s){return!(e>n+i||e+r<n||t>o+s||t+a<o)};var d=function(e,t){return t[0]>e[0]&&t[1]>e[1]&&t[0]+t[2]<e[0]+e[2]&&t[1]+t[3]<e[1]+e[3]},p=function(){function e(e,t,r,a){var n=this;this.divide=!1,this.debugBounds=function(e,t){var r=new Int32Array([e.x,e.y,e.width,e.height]);return l(r,n.boundry)&&t.push(u(n.boundry)),n.divide&&(n.northeast.debugBounds(e,t),n.northwest.debugBounds(e,t),n.southeast.debugBounds(e,t),n.southwest.debugBounds(e,t)),t},this.debugAABBs=function(e,t){var r=new Int32Array([e.x,e.y,e.width,e.height]);if(l(r,n.boundry)){for(var a=0;a<4*n.index;a+=4)t.push(u(n.itemsXYWH.slice(a,a+4)));n.divide&&(n.northeast.debugAABBs(e,t),n.northwest.debugAABBs(e,t),n.southeast.debugAABBs(e,t),n.southwest.debugAABBs(e,t))}return t},this.boundry=new Int32Array(e),this.capacity=r>=a?8*t:t,this.items=new Int32Array(this.capacity),this.itemsSleepState=new Uint8Array(this.capacity),this.itemsXYWH=new Int32Array(4*this.capacity),this.index=0,this.currentDepth=r,this.maxDepth=a,this.deleteBranchMarker=0}return e.prototype.update=function(e,t,r,a,n,o,i){this.boundry[0]=e,this.boundry[1]=t,this.boundry[2]=r,this.boundry[3]=a,this.capacity=n,this.currentDepth=o,this.maxDepth=i,this.index=0},e.prototype.subDivide=function(){var t=this.boundry[0],r=this.boundry[1],a=this.boundry[2],n=this.boundry[3],o=this.currentDepth+1,i=this.maxDepth,u=o>=i?8*this.capacity:this.capacity;if(this.northeast)this.northeast.update(t+.5*a,r,.5*a,.5*n,u,o,i),this.northwest.update(t,r,.5*a,.5*n,u,o,i),this.southeast.update(t+.5*a,r+.5*n,.5*a,.5*n,u,o,i),this.southwest.update(t,r+.5*n,.5*a,.5*n,u,o,i);else{var l=s[u];if(l&&l.length>4)return this.northeast=l.pop(),this.northwest=l.pop(),this.southeast=l.pop(),this.southwest=l.pop(),void this.subDivide();this.northeast=new e([t+.5*a,r,.5*a,.5*n],u,o,i),this.northwest=new e([t,r,.5*a,.5*n],u,o,i),this.southeast=new e([t+.5*a,r+.5*n,.5*a,.5*n],u,o,i),this.southwest=new e([t,r+.5*n,.5*a,.5*n],u,o,i)}this.divide=!0},e.prototype.___query=function(e,r,a,n,o,i,s){void 0===s&&(s=-1);var u=this.items,l=this.index,A=this.itemsXYWH;if(c(this.boundry,e,r,a,n)){for(var d=0;d<l;d++){var p=u[d];if(!i[p]&&p!==s){var f=4*d;(0,t.intersectsXYWH_XYWH)(e,r,a,n,A[f],A[f+1],A[f+2],A[f+3])&&(i[p]=!0,o.push(p))}}this.divide&&(this.northeast.___query(e,r,a,n,o,i,s),this.northwest.___query(e,r,a,n,o,i,s),this.southeast.___query(e,r,a,n,o,i,s),this.southwest.___query(e,r,a,n,o,i,s))}return o},e.prototype.insert=function(e,t,r){if(!A(this.boundry,t))return!1;if(!(this.index<this.capacity))return this.divide||this.subDivide(),!!(this.northeast.insert(e,t,r)||this.northwest.insert(e,t,r)||this.southeast.insert(e,t,r)||this.southwest.insert(e,t,r));this.items[this.index]=e,this.itemsSleepState[this.index]=r;var a=4*this.index;return this.itemsXYWH[a]=t[0],this.itemsXYWH[a+1]=t[1],this.itemsXYWH[a+2]=t[2],this.itemsXYWH[a+3]=t[3],this.index++,!!d(this.boundry,t)||void 0},e.prototype.reset=function(){this.index=0;var e=!this.northwest;if(this.northwest){var t=this.northeast.reset(),r=this.northwest.reset(),a=this.southeast.reset(),n=this.southwest.reset();if(t&&r&&a&&n&&(this.deleteBranchMarker++,this.deleteBranchMarker>30)){var o=s[this.northeast.capacity];o||(o=s[this.northeast.capacity]=[]),o.push(this.northeast,this.northwest,this.southeast,this.southwest),this.northeast=null,this.northwest=null,this.southeast=null,this.southwest=null,this.deleteBranchMarker=0}this.divide=!1}return e},e}();t.QuadTreeInt32QtBranch=p;var f=function(){function e(e,t,r,a,n){void 0===a&&(a=8),void 0===n&&(n=!1);var o=this;this.divide=!1,this.findIndex=function(e,t){if(void 0===t&&(t=null),t){if((r=t.items.indexOf(e))>-1)return r;t.divide&&(o.findIndex(e,t.northeast),o.findIndex(e,t.northwest),o.findIndex(e,t.southeast),o.findIndex(e,t.southwest))}else{var r;if((r=o.items.indexOf(e))>-1)return r;o.divide&&(o.findIndex(e,o.northeast),o.findIndex(e,o.northwest),o.findIndex(e,o.southeast),o.findIndex(e,o.southwest))}},this.debugAABBs=function(e,t){var r=new Int32Array([e.x,e.y,e.width,e.height]);if(l(r,o.boundry)){for(var a=0;a<4*o.index;a+=4)t.push(u(o.itemsXYWH.slice(a,a+4)));o.divide&&(o.northeast.debugAABBs(e,t),o.northwest.debugAABBs(e,t),o.southeast.debugAABBs(e,t),o.southwest.debugAABBs(e,t))}return t},this.debugBounds=function(e){var t=[],r=[e.x,e.y,e.width,e.height];return A(o.boundry,r)&&t.push(u(o.boundry)),o.divide&&(o.northeast.debugBounds(e,t),o.northwest.debugBounds(e,t),o.southeast.debugBounds(e,t),o.southwest.debugBounds(e,t)),t},this.setup(e,t,r,a,n)}return e.prototype.shrink=function(){this.boundry[0]=0|Math.max(this.minX+1,0),this.boundry[1]=0|Math.max(this.minY+1,0),this.boundry[2]=Math.ceil(this.maxW-this.minX),this.boundry[3]=Math.ceil(this.maxH-this.minY)},e.prototype.intersectTree=function(e){var t=[],r=this.itemType===e.itemType,a=this.index;if(a>0){for(var n={},i=this.items,s=this.itemsSleepState,u=this.itemsXYWH,l=0;l<a;l++)if(0!==s[l]){var A=i[l];if(!n[A]){var c=4*l,d=u[c],p=u[c+1],f=u[c+2],h=u[c+3];n[A]=!0;var v=e.___queryXYWH(d,p,f,h,[],[],r?A:-1);v.length>0&&t.push(o([A],v,!0))}}this.divide&&(this.___iterateBranchAgainstTree(this.northeast,e,t,n),this.___iterateBranchAgainstTree(this.northwest,e,t,n),this.___iterateBranchAgainstTree(this.southeast,e,t,n),this.___iterateBranchAgainstTree(this.southwest,e,t,n))}return t},e.prototype.___iterateBranchAgainstTree=function(e,t,r,a){var n=e.index,i=this.itemType===t.itemType;if(n>0){for(var s=e.items,u=e.itemsSleepState,l=e.itemsXYWH,A=0;A<n;A++)if(0!==u[A]){var c=s[A];if(!a[c]){var d=4*A,p=l[d],f=l[d+1],h=l[d+2],v=l[d+3];a[c]=!0;var g=t.___queryXYWH(p,f,h,v,[],[],i?c:-1);g.length>0&&r.push(o([c],g,!0))}}e.divide&&(this.___iterateBranchAgainstTree(e.northeast,t,r,a),this.___iterateBranchAgainstTree(e.northwest,t,r,a),this.___iterateBranchAgainstTree(e.southeast,t,r,a),this.___iterateBranchAgainstTree(e.southwest,t,r,a))}},e.prototype.___queryXYWH=function(e,r,a,n,o,i,s){void 0===s&&(s=-1);var u=this.items,l=this.itemsXYWH;if(c(this.boundry,e,r,a,n)){for(var A=0;A<this.index;A++){var d=u[A];if(!i[d]&&d!==s){var p=4*A;(0,t.intersectsXYWH_XYWH)(e,r,a,n,l[p],l[p+1],l[p+2],l[p+3])&&(i[d]=1,o.push(d))}}this.divide&&(this.northeast.___query(e,r,a,n,o,i,s),this.northwest.___query(e,r,a,n,o,i,s),this.southeast.___query(e,r,a,n,o,i,s),this.southwest.___query(e,r,a,n,o,i,s))}return o},e.prototype.insert=function(e,t){var r=e.radius,a=e.pos.x,n=e.pos.y,o=2*r,i=2*r,s=e.sleepingAABB?0:1;if(this.AABB_VEL){var u=e.vel.x*-t,l=e.vel.y*-t;u>0?o+=u:(a+=u,o-=u),l>0?i+=l:(n+=l,i-=l)}var c=a-r,p=n-r,f=[c,p,o,i];if(!A(this.boundry,f))return!1;if(this.references[this.totalItems]=e,this.totalItems++,!(this.index<this.capacity))return this.divide||this.subDivide(),this.northeast.insert(this.REFERENCE_INDEX,f,s)||this.northwest.insert(this.REFERENCE_INDEX,f,s)||this.southeast.insert(this.REFERENCE_INDEX,f,s)||this.southwest.insert(this.REFERENCE_INDEX,f,s)?(this.REFERENCE_INDEX++,!0):void this.REFERENCE_INDEX++;this.items[this.index]=this.REFERENCE_INDEX,this.itemsSleepState[this.index]=s;var h=4*this.index;return this.itemsXYWH[h]=c,this.itemsXYWH[h+1]=p,this.itemsXYWH[h+2]=o,this.itemsXYWH[h+3]=i,this.index++,this.REFERENCE_INDEX++,!!d(this.boundry,f)||void 0},e.prototype.subDivide=function(){var e=this.boundry[0],t=this.boundry[1],r=this.boundry[2],a=this.boundry[3],n=this.maxDepth,o=this.capacity;this.northeast?(this.northeast.update(e+.5*r,t,.5*r,.5*a,o,0,n),this.northwest.update(e,t,.5*r,.5*a,o,0,n),this.southeast.update(e+.5*r,t+.5*a,.5*r,.5*a,o,0,n),this.southwest.update(e,t+.5*a,.5*r,.5*a,o,0,n)):(this.northeast=new p([e+.5*r,t,.5*r,.5*a],o,0,n),this.northwest=new p([e,t,.5*r,.5*a],o,0,n),this.southeast=new p([e+.5*r,t+.5*a,.5*r,.5*a],o,0,n),this.southwest=new p([e,t+.5*a,.5*r,.5*a],o,0,n)),this.divide=!0},e.prototype.___query=function(e,r,a,n){var o=[],i=[],s=this.items,u=this.itemsXYWH;if(c(this.boundry,e,r,a,n)){for(var l=0;l<this.index;l++){var A=s[l];if(!o[A]){var d=4*l;(0,t.intersectsXYWH_XYWH)(e,r,a,n,u[d],u[d+1],u[d+2],u[d+3])&&(o[A]=1,i.push(A))}}this.divide&&(this.northeast.___query(e,r,a,n,i,o),this.northwest.___query(e,r,a,n,i,o),this.southeast.___query(e,r,a,n,i,o),this.southwest.___query(e,r,a,n,i,o))}var p=i.length;if(0===p)return[];var f=new Array(p);for(l=0;l<p;l++)f[l]=this.references[i[l]];return f},e.prototype.query=function(e){var t=e.radius;return this.___query(e.pos.x-t,e.pos.y-t,2*t,2*t)},e.prototype.queryShape=function(e){for(var t=Number.MAX_VALUE,r=Number.MIN_VALUE,n=Number.MAX_VALUE,o=Number.MIN_VALUE,i=e.length,s=0;s<i;s++){var u=e[s];u.x>r&&(r=u.x),u.x<t&&(t=u.x),u.y>o&&(o=u.y),u.y<n&&(n=u.y)}for(var l=new a.Rectangle(t,n,r-t,o-n),A=this.queryInt(l),c=A.length,d=0;d<c;d++)for(var p=A[d],f=new a.Rectangle(p.pos.x-p.radius,p.pos.y-p.radius,2*p.radius,2*p.radius).toPointArray(),h=0;h<4;h++){var v=f[h],g=(s=0,0),y=void 0;for(s=0,g=i-1;s<i;g=s++)e[s].y>v.y!=e[g].y>v.y&&v.x<(e[g].x-e[s].x)*(v.y-e[s].y)/(e[g].y-e[s].y)+e[s].x&&(y=!y);if(y)return[p]}return[]},e.prototype.queryRay=function(e,t){for(var r,a,o,i,s=Math.min(e.x,t.x),u=Math.min(e.y,t.y),l=Math.max(e.x,t.x)-s,A=Math.max(e.y,t.y)-u,c=this.___query(s,u,l,A),d=e.x,p=e.y,f=t.x,h=t.y,v=[],g=c.length,y=0;y<g;y++){var m=c[y],_=m.pos.x,x=m.pos.y,S=m.radius;(0,n.LineIntersects)(d,p,f,h,_-S,x-S,_+S,x-S)||(0,n.LineIntersects)(d,p,f,h,_+S,x-S,_+S,x+S)||(0,n.LineIntersects)(d,p,f,h,_-S,x+S,_+S,x+S)||(0,n.LineIntersects)(d,p,f,h,_-S,x-S,_-S,x+S)?v.push(m):(a=x,i=p,(r=_)>(o=d)||r+S<o||a>i||a+S<i||v.push(m))}return v},e.prototype.queryCircle=function(e,t){var a=this.___query(e.x-t,e.y-t,2*t,2*t);if(0===a.length)return a;for(var n,o,i,s,u,l=.7*t,A=[e.x-l,e.y-l,2*l,2*l],c=a.length,d=[],p=0;p<c;p++){var f=a[p];n=A,o=f.pos.x-f.radius,i=f.pos.y-f.radius,s=2*f.radius,u=2*f.radius,n[0]>o+s||n[0]+n[2]<o||n[1]>i+u||n[1]+n[3]<i?(0,r.radiusIntersectXYXY)(e.x,e.y,t,f.pos.x,f.pos.y,f.radius)&&d.push(f):d.push(f)}return d},e.prototype.queryInt=function(e){return this.___query(e.x,e.y,e.width,e.height)},e.prototype.queryVec=function(e,t,r){return this.___query(e.x-t,e.y-r,2*t,2*r)},e.prototype.destroy=function(){this.northeast=null,this.northwest=null,this.southeast=null,this.southwest=null},e.prototype.reset=function(){this.index=0,this.totalItems=0,this.REFERENCE_INDEX=0,this.references=[],this.divide&&(this.northeast.reset(),this.northwest.reset(),this.southeast.reset(),this.southwest.reset()),this.divide=!1},e.prototype.getRangeType=function(){return"INT32"},e.prototype.setup=function(e,t,r,a,n){void 0===a&&(a=8),void 0===n&&(n=!1);var o=e.x,s=e.y,u=e.width,l=e.height;this.boundry=new Int32Array([o,s,u,l]),(o>2147483647||s>2147483647||u>2147483647||l>2147483647||o<-2147483648||s<-2147483648)&&console.log("Out of range @ Quadtree constructor "+this.boundry.join(",")+" "+(0,i.TypesToString)(this.itemType)),this.AABB_VEL=n,this.items=new Int32Array(t),this.itemsSleepState=new Uint8Array(t),this.itemsXYWH=new Int32Array(4*t),this.capacity=t,this.itemType=r,this.references=[],this.REFERENCE_INDEX=0,this.index=0,this.totalItems=0,this.minX=65535,this.minY=65535,this.maxW=0,this.maxH=0,this.maxDepth=a},e.prototype.visualize=function(e,t,r,a){if(this.divide){var n=600/this.boundry[2];this.__visualize(n,10,e,t,r,a,r-300,a+40,this.northwest),this.__visualize(n,10,e,t,r,a,r-100,a+40,this.northeast),this.__visualize(n,10,e,t,r,a,r+100,a+40,this.southwest),this.__visualize(n,10,e,t,r,a,r+300,a+40,this.southeast)}},e.prototype.__visualize=function(e,t,r,a,n,o,i,s,u){r.push(n,o,i,s);var l=u.boundry,A=100,c=240;r.push(l[0]*e+A,l[1]*e+c,(l[0]+l[2])*e+A,l[1]*e+c,(l[0]+l[2])*e+A,l[1]*e+c,(l[0]+l[2])*e+A,(l[1]+l[3])*e+c,l[0]*e+A,l[1]*e+c,l[0]*e+A,(l[1]+l[3])*e+c,l[0]*e+A,(l[1]+l[3])*e+c,(l[0]+l[2])*e+A,(l[1]+l[3])*e+c),t*=.25,u.divide?(this.__visualize(e,t,r,a,i,s,i-30*t,s+40,u.northwest),this.__visualize(e,t,r,a,i,s,i-10*t,s+40,u.northeast),this.__visualize(e,t,r,a,i,s,i+10*t,s+40,u.southwest),this.__visualize(e,t,r,a,i,s,i+30*t,s+40,u.southeast)):u.southwest&&(this.__visualize(e,t,a,a,i,s,i-30*t,s+40,u.northwest),this.__visualize(e,t,a,a,i,s,i-10*t,s+40,u.northeast),this.__visualize(e,t,a,a,i,s,i+10*t,s+40,u.southwest),this.__visualize(e,t,a,a,i,s,i+30*t,s+40,u.southeast))},e}();t.QuadTreeInt32=f}.apply(t,a),void 0===n||(e.exports=n)},2881:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};a=[r,t,r(7185),r(484),r(1638),r(1330)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuadTreeInt32Base=t.intersectsXYWH_XYWH=void 0;var s={},u=function(e){return new a.Rectangle(e[0],e[1],e[2],e[3])},l=function(e,t){return!(e[0]>t[0]+t[2]||e[0]+e[2]<t[0]||e[1]>t[1]+t[3]||e[1]+e[3]<t[1])},A=function(e,t){return!(e[0]>t[0]+t[2]||e[0]+e[2]<t[0]||e[1]>t[1]+t[3]||e[1]+e[3]<t[1])},c=function(e,t,r,a,n){return!(e[0]>t+a||e[0]+e[2]<t||e[1]>r+n||e[1]+e[3]<r)};t.intersectsXYWH_XYWH=function(e,t,r,a,n,o,i,s){return!(e>n+i||e+r<n||t>o+s||t+a<o)};var d=function(e,t){return t[0]>e[0]&&t[1]>e[1]&&t[0]+t[2]<e[0]+e[2]&&t[1]+t[3]<e[1]+e[3]},p=function(){function e(e,t,r,a){var n=this;this.divide=!1,this.debugBounds=function(e,t){var r=new Int32Array([e.x,e.y,e.width,e.height]);return l(r,n.boundry)&&t.push(u(n.boundry)),n.divide&&(n.northeast.debugBounds(e,t),n.northwest.debugBounds(e,t),n.southeast.debugBounds(e,t),n.southwest.debugBounds(e,t)),t},this.debugAABBs=function(e,t){var r=new Int32Array([e.x,e.y,e.width,e.height]);if(l(r,n.boundry)){for(var a=0;a<4*n.index;a+=4)t.push(u(n.itemsXYWH.slice(a,a+4)));n.divide&&(n.northeast.debugAABBs(e,t),n.northwest.debugAABBs(e,t),n.southeast.debugAABBs(e,t),n.southwest.debugAABBs(e,t))}return t},this.boundry=new Int32Array(e),this.capacity=r>=a?8*t:t,this.items=new Int32Array(this.capacity),this.itemsXYWH=new Int32Array(4*this.capacity),this.index=0,this.currentDepth=r,this.maxDepth=a,this.deleteBranchMarker=0}return e.prototype.update=function(e,t,r,a,n,o,i){this.boundry[0]=e,this.boundry[1]=t,this.boundry[2]=r,this.boundry[3]=a,this.capacity=n,this.currentDepth=o,this.maxDepth=i,this.index=0},e.prototype.subDivide=function(){var t=this.boundry[0],r=this.boundry[1],a=this.boundry[2],n=this.boundry[3],o=this.currentDepth+1,i=this.maxDepth,u=o>=i?8*this.capacity:this.capacity;if(this.northeast)this.northeast.update(t+.5*a,r,.5*a,.5*n,u,o,i),this.northwest.update(t,r,.5*a,.5*n,u,o,i),this.southeast.update(t+.5*a,r+.5*n,.5*a,.5*n,u,o,i),this.southwest.update(t,r+.5*n,.5*a,.5*n,u,o,i);else{var l=s[u];if(l&&l.length>4)return this.northeast=l.pop(),this.northwest=l.pop(),this.southeast=l.pop(),this.southwest=l.pop(),void this.subDivide();this.northeast=new e([t+.5*a,r,.5*a,.5*n],u,o,i),this.northwest=new e([t,r,.5*a,.5*n],u,o,i),this.southeast=new e([t+.5*a,r+.5*n,.5*a,.5*n],u,o,i),this.southwest=new e([t,r+.5*n,.5*a,.5*n],u,o,i)}this.divide=!0},e.prototype.___query=function(e,r,a,n,o,i,s){void 0===s&&(s=-1);var u=this.items,l=this.index,A=this.itemsXYWH;if(c(this.boundry,e,r,a,n)){for(var d=0;d<l;d++){var p=u[d];if(!i[p]&&p!==s){var f=4*d;(0,t.intersectsXYWH_XYWH)(e,r,a,n,A[f],A[f+1],A[f+2],A[f+3])&&(i[p]=!0,o.push(p))}}this.divide&&(this.northeast.___query(e,r,a,n,o,i,s),this.northwest.___query(e,r,a,n,o,i,s),this.southeast.___query(e,r,a,n,o,i,s),this.southwest.___query(e,r,a,n,o,i,s))}return o},e.prototype.insert=function(e,t){if(!A(this.boundry,t))return!1;if(!(this.index<this.capacity))return this.divide||this.subDivide(),!!(this.northeast.insert(e,t)||this.northwest.insert(e,t)||this.southeast.insert(e,t)||this.southwest.insert(e,t));this.items[this.index]=e;var r=4*this.index;return this.itemsXYWH[r]=t[0],this.itemsXYWH[r+1]=t[1],this.itemsXYWH[r+2]=t[2],this.itemsXYWH[r+3]=t[3],this.index++,!!d(this.boundry,t)||void 0},e.prototype.reset=function(){this.index=0;var e=!this.northwest;if(this.northwest){var t=this.northeast.reset(),r=this.northwest.reset(),a=this.southeast.reset(),n=this.southwest.reset();if(t&&r&&a&&n&&(this.deleteBranchMarker++,this.deleteBranchMarker>30)){var o=s[this.northeast.capacity];o||(o=s[this.northeast.capacity]=[]),o.push(this.northeast,this.northwest,this.southeast,this.southwest),this.northeast=null,this.northwest=null,this.southeast=null,this.southwest=null,this.deleteBranchMarker=0}this.divide=!1}return e},e}(),f=function(){function e(e,t,r,a){void 0===a&&(a=8);var n=this;this.divide=!1,this.findIndex=function(e,t){if(void 0===t&&(t=null),t){if((r=t.items.indexOf(e))>-1)return r;t.divide&&(n.findIndex(e,t.northeast),n.findIndex(e,t.northwest),n.findIndex(e,t.southeast),n.findIndex(e,t.southwest))}else{var r;if((r=n.items.indexOf(e))>-1)return r;n.divide&&(n.findIndex(e,n.northeast),n.findIndex(e,n.northwest),n.findIndex(e,n.southeast),n.findIndex(e,n.southwest))}},this.debugAABBs=function(e,t){var r=new Int32Array([e.x,e.y,e.width,e.height]);if(l(r,n.boundry)){for(var a=0;a<4*n.index;a+=4)t.push(u(n.itemsXYWH.slice(a,a+4)));n.divide&&(n.northeast.debugAABBs(e,t),n.northwest.debugAABBs(e,t),n.southeast.debugAABBs(e,t),n.southwest.debugAABBs(e,t))}return t},this.debugBounds=function(e){var t=[],r=[e.x,e.y,e.width,e.height];return A(n.boundry,r)&&t.push(u(n.boundry)),n.divide&&(n.northeast.debugBounds(e,t),n.northwest.debugBounds(e,t),n.southeast.debugBounds(e,t),n.southwest.debugBounds(e,t)),t},this.setup(e,t,r,a)}return e.prototype.shrink=function(){this.boundry[0]=0|Math.max(this.minX+1,0),this.boundry[1]=0|Math.max(this.minY+1,0),this.boundry[2]=Math.ceil(this.maxW-this.minX),this.boundry[3]=Math.ceil(this.maxH-this.minY)},e.prototype.intersectTree=function(e){var t=[],r=this.itemType===e.itemType,a=this.index;if(a>0){for(var n={},i=this.items,s=this.itemsXYWH,u=0;u<a;u++){var l=i[u];if(!n[l]){var A=4*u,c=s[A],d=s[A+1],p=s[A+2],f=s[A+3];n[l]=!0;var h=e.___queryXYWH(c,d,p,f,[],[],r?l:-1);h.length>0&&t.push(o([l],h,!0))}}this.divide&&(this.___iterateBranchAgainstTree(this.northeast,e,t,n),this.___iterateBranchAgainstTree(this.northwest,e,t,n),this.___iterateBranchAgainstTree(this.southeast,e,t,n),this.___iterateBranchAgainstTree(this.southwest,e,t,n))}return t},e.prototype.___iterateBranchAgainstTree=function(e,t,r,a){var n=e.index,i=this.itemType===t.itemType;if(n>0){for(var s=e.items,u=e.itemsXYWH,l=0;l<n;l++){var A=s[l];if(!a[A]){var c=4*l,d=u[c],p=u[c+1],f=u[c+2],h=u[c+3];a[A]=!0;var v=t.___queryXYWH(d,p,f,h,[],[],i?A:-1);v.length>0&&r.push(o([A],v,!0))}}e.divide&&(this.___iterateBranchAgainstTree(e.northeast,t,r,a),this.___iterateBranchAgainstTree(e.northwest,t,r,a),this.___iterateBranchAgainstTree(e.southeast,t,r,a),this.___iterateBranchAgainstTree(e.southwest,t,r,a))}},e.prototype.___queryXYWH=function(e,r,a,n,o,i,s){void 0===s&&(s=-1);var u=this.items,l=this.itemsXYWH;if(c(this.boundry,e,r,a,n)){for(var A=0;A<this.index;A++){var d=u[A];if(!i[d]&&d!==s){var p=4*A;(0,t.intersectsXYWH_XYWH)(e,r,a,n,l[p],l[p+1],l[p+2],l[p+3])&&(i[d]=1,o.push(d))}}this.divide&&(this.northeast.___query(e,r,a,n,o,i,s),this.northwest.___query(e,r,a,n,o,i,s),this.southeast.___query(e,r,a,n,o,i,s),this.southwest.___query(e,r,a,n,o,i,s))}return o},e.prototype.insert=function(e){var t=e.radius,r=2*t,a=2*t,n=e.pos.x-t,o=e.pos.y-t,i=[n,o,r,a];if(!A(this.boundry,i))return!1;if(this.references[this.totalItems]=e,this.totalItems++,!(this.index<this.capacity))return this.divide||this.subDivide(),this.northeast.insert(this.REFERENCE_INDEX,i)||this.northwest.insert(this.REFERENCE_INDEX,i)||this.southeast.insert(this.REFERENCE_INDEX,i)||this.southwest.insert(this.REFERENCE_INDEX,i)?(this.REFERENCE_INDEX++,!0):void this.REFERENCE_INDEX++;this.items[this.index]=this.REFERENCE_INDEX;var s=4*this.index;return this.itemsXYWH[s]=n,this.itemsXYWH[s+1]=o,this.itemsXYWH[s+2]=r,this.itemsXYWH[s+3]=a,this.index++,this.REFERENCE_INDEX++,!!d(this.boundry,i)||void 0},e.prototype.subDivide=function(){var e=this.boundry[0],t=this.boundry[1],r=this.boundry[2],a=this.boundry[3],n=this.maxDepth,o=this.capacity;this.northeast?(this.northeast.update(e+.5*r,t,.5*r,.5*a,o,0,n),this.northwest.update(e,t,.5*r,.5*a,o,0,n),this.southeast.update(e+.5*r,t+.5*a,.5*r,.5*a,o,0,n),this.southwest.update(e,t+.5*a,.5*r,.5*a,o,0,n)):(this.northeast=new p([e+.5*r,t,.5*r,.5*a],o,0,n),this.northwest=new p([e,t,.5*r,.5*a],o,0,n),this.southeast=new p([e+.5*r,t+.5*a,.5*r,.5*a],o,0,n),this.southwest=new p([e,t+.5*a,.5*r,.5*a],o,0,n)),this.divide=!0},e.prototype.___query=function(e,r,a,n){var o=[],i=[],s=this.items,u=this.itemsXYWH;if(c(this.boundry,e,r,a,n)){for(var l=0;l<this.index;l++){var A=s[l];if(!o[A]){var d=4*l;(0,t.intersectsXYWH_XYWH)(e,r,a,n,u[d],u[d+1],u[d+2],u[d+3])&&(o[A]=1,i.push(A))}}this.divide&&(this.northeast.___query(e,r,a,n,i,o),this.northwest.___query(e,r,a,n,i,o),this.southeast.___query(e,r,a,n,i,o),this.southwest.___query(e,r,a,n,i,o))}var p=i.length;if(0===p)return[];var f=new Array(p);for(l=0;l<p;l++)f[l]=this.references[i[l]];return f},e.prototype.query=function(e){var t=e.radius;return this.___query(e.pos.x-t,e.pos.y-t,2*t,2*t)},e.prototype.queryPoint=function(e){throw"not implemented : queryPoint @ QuadTreeInt32Base"},e.prototype.queryShape=function(e){for(var t=Number.MAX_VALUE,r=Number.MIN_VALUE,n=Number.MAX_VALUE,o=Number.MIN_VALUE,i=e.length,s=0;s<i;s++){var u=e[s];u.x>r&&(r=u.x),u.x<t&&(t=u.x),u.y>o&&(o=u.y),u.y<n&&(n=u.y)}for(var l=new a.Rectangle(t,n,r-t,o-n),A=this.queryInt(l),c=A.length,d=0;d<c;d++)for(var p=A[d],f=new a.Rectangle(p.pos.x-p.radius,p.pos.y-p.radius,2*p.radius,2*p.radius).toPointArray(),h=0;h<4;h++){var v=f[h],g=(s=0,0),y=void 0;for(s=0,g=i-1;s<i;g=s++)e[s].y>v.y!=e[g].y>v.y&&v.x<(e[g].x-e[s].x)*(v.y-e[s].y)/(e[g].y-e[s].y)+e[s].x&&(y=!y);if(y)return[p]}return[]},e.prototype.queryRay=function(e,t){for(var r,a,o,i,s=Math.min(e.x,t.x),u=Math.min(e.y,t.y),l=Math.max(e.x,t.x)-s,A=Math.max(e.y,t.y)-u,c=this.___query(s,u,l,A),d=e.x,p=e.y,f=t.x,h=t.y,v=[],g=c.length,y=0;y<g;y++){var m=c[y],_=m.pos.x,x=m.pos.y,S=m.radius;(0,n.LineIntersects)(d,p,f,h,_-S,x-S,_+S,x-S)||(0,n.LineIntersects)(d,p,f,h,_+S,x-S,_+S,x+S)||(0,n.LineIntersects)(d,p,f,h,_-S,x+S,_+S,x+S)||(0,n.LineIntersects)(d,p,f,h,_-S,x-S,_-S,x+S)?v.push(m):(a=x,i=p,(r=_)>(o=d)||r+S<o||a>i||a+S<i||v.push(m))}return v},e.prototype.queryCircle=function(e,t){var a=this.___query(e.x-t,e.y-t,2*t,2*t);if(0===a.length)return a;for(var n,o,i,s,u,l=.7*t,A=[e.x-l,e.y-l,2*l,2*l],c=a.length,d=[],p=0;p<c;p++){var f=a[p];n=A,o=f.pos.x-f.radius,i=f.pos.y-f.radius,s=2*f.radius,u=2*f.radius,n[0]>o+s||n[0]+n[2]<o||n[1]>i+u||n[1]+n[3]<i?(0,r.radiusIntersectXYXY)(e.x,e.y,t,f.pos.x,f.pos.y,f.radius)&&d.push(f):d.push(f)}return d},e.prototype.queryInt=function(e){return this.___query(e.x,e.y,e.width,e.height)},e.prototype.queryVec=function(e,t,r){return this.___query(e.x-t,e.y-r,2*t,2*r)},e.prototype.destroy=function(){this.northeast=null,this.northwest=null,this.southeast=null,this.southwest=null},e.prototype.reset=function(){this.index=0,this.totalItems=0,this.REFERENCE_INDEX=0,this.references=[],this.divide&&(this.northeast.reset(),this.northwest.reset(),this.southeast.reset(),this.southwest.reset()),this.divide=!1},e.prototype.getRangeType=function(){return"INT32"},e.prototype.setup=function(e,t,r,a){void 0===a&&(a=8);var n=e.x,o=e.y,s=e.width,u=e.height;this.boundry=new Int32Array([n,o,s,u]),(n>2147483647||o>2147483647||s>2147483647||u>2147483647||n<-2147483648||o<-2147483648)&&console.log("Out of range @ Quadtree constructor "+this.boundry.join(",")+" "+(0,i.TypesToString)(this.itemType)),this.items=new Int32Array(t),this.itemsXYWH=new Int32Array(4*t),this.capacity=t,this.itemType=r,this.references=[],this.REFERENCE_INDEX=0,this.index=0,this.totalItems=0,this.minX=65535,this.minY=65535,this.maxW=0,this.maxH=0,this.maxDepth=a},e.prototype.visualize=function(e,t,r,a){if(this.divide){var n=600/this.boundry[2];this.__visualize(n,10,e,t,r,a,r-300,a+40,this.northwest),this.__visualize(n,10,e,t,r,a,r-100,a+40,this.northeast),this.__visualize(n,10,e,t,r,a,r+100,a+40,this.southwest),this.__visualize(n,10,e,t,r,a,r+300,a+40,this.southeast)}},e.prototype.__visualize=function(e,t,r,a,n,o,i,s,u){r.push(n,o,i,s);var l=u.boundry,A=100,c=240;r.push(l[0]*e+A,l[1]*e+c,(l[0]+l[2])*e+A,l[1]*e+c,(l[0]+l[2])*e+A,l[1]*e+c,(l[0]+l[2])*e+A,(l[1]+l[3])*e+c,l[0]*e+A,l[1]*e+c,l[0]*e+A,(l[1]+l[3])*e+c,l[0]*e+A,(l[1]+l[3])*e+c,(l[0]+l[2])*e+A,(l[1]+l[3])*e+c),t*=.25,u.divide?(this.__visualize(e,t,r,a,i,s,i-30*t,s+40,u.northwest),this.__visualize(e,t,r,a,i,s,i-10*t,s+40,u.northeast),this.__visualize(e,t,r,a,i,s,i+10*t,s+40,u.southwest),this.__visualize(e,t,r,a,i,s,i+30*t,s+40,u.southeast)):u.southwest&&(this.__visualize(e,t,a,a,i,s,i-30*t,s+40,u.northwest),this.__visualize(e,t,a,a,i,s,i-10*t,s+40,u.northeast),this.__visualize(e,t,a,a,i,s,i+10*t,s+40,u.southwest),this.__visualize(e,t,a,a,i,s,i+30*t,s+40,u.southeast))},e}();t.QuadTreeInt32Base=f}.apply(t,a),void 0===n||(e.exports=n)},9328:(e,t,r)=>{var a,n;a=[r,t,r(1330),r(3058)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuadTreeInt32Point=t.intersectsInt32Arr_XYWH=t.intersectsInt32ArrXY=void 0;var n={};t.intersectsInt32ArrXY=function(e,t,r){return!(e[0]>t||e[0]+e[2]<t||e[1]>r||e[1]+e[3]<r)},t.intersectsInt32Arr_XYWH=function(e,t,r,a,n){return!(e[0]>t+a||e[0]+e[2]<t||e[1]>r+n||e[1]+e[3]<r)};var o=function(){function e(e,t,r,a){this.divide=!1,this.boundry=new Int32Array(e),this.capacity=r>=a?8*t:t,this.items=new Int32Array(this.capacity),this.itemsXY=new Int32Array(2*this.capacity),this.index=0,this.currentDepth=r,this.maxDepth=a,this.deleteBranchMarker=0}return e.prototype.update=function(e,t,r,a,n,o,i){this.boundry[0]=e,this.boundry[1]=t,this.boundry[2]=r,this.boundry[3]=a,this.capacity=n,this.currentDepth=o,this.maxDepth=i,this.index=0},e.prototype.subDivide=function(){var t=this.boundry[0],r=this.boundry[1],a=this.boundry[2],o=this.boundry[3],i=this.currentDepth+1,s=this.maxDepth,u=i>=s?8*this.capacity:this.capacity;if(this.northeast)this.northeast.update(t+Math.ceil(.5*a),r,Math.ceil(.5*a),Math.ceil(.5*o),u,i,s),this.northwest.update(t,r,Math.ceil(.5*a),Math.ceil(.5*o),u,i,s),this.southeast.update(t+Math.ceil(.5*a),r+Math.ceil(.5*o),Math.ceil(.5*a),Math.ceil(.5*o),u,i,s),this.southwest.update(t,r+Math.ceil(.5*o),Math.ceil(.5*a),Math.ceil(.5*o),u,i,s);else{var l=n[u];if(l&&l.length>4)return this.northeast=l.pop(),this.northwest=l.pop(),this.southeast=l.pop(),this.southwest=l.pop(),void this.subDivide();this.northeast=new e([t+Math.ceil(.5*a),r,Math.ceil(.5*a),Math.ceil(.5*o)],u,i,s),this.northwest=new e([t,r,Math.ceil(.5*a),Math.ceil(.5*o)],u,i,s),this.southeast=new e([t+Math.ceil(.5*a),r+Math.ceil(.5*o),Math.ceil(.5*a),Math.ceil(.5*o)],u,i,s),this.southwest=new e([t,r+Math.ceil(.5*o),Math.ceil(.5*a),Math.ceil(.5*o)],u,i,s)}this.divide=!0},e.prototype.___query=function(e,r,n,o,i,s,u){void 0===u&&(u=-1);var l=this.items,A=this.index,c=this.itemsXY;if((0,t.intersectsInt32Arr_XYWH)(this.boundry,e,r,n,o)){for(var d=0;d<A;d++){var p=l[d];if(!s[p]&&p!==u){var f=2*d;(0,a.intersectsXYWH_XY)(e,r,n,o,c[f],c[f+1])&&(s[p]=!0,i.push(p))}}this.divide&&(this.northeast.___query(e,r,n,o,i,s,u),this.northwest.___query(e,r,n,o,i,s,u),this.southeast.___query(e,r,n,o,i,s,u),this.southwest.___query(e,r,n,o,i,s,u))}return i},e.prototype.insert=function(e,t,r){if(this.index<this.capacity){this.items[this.index]=e;var a=2*this.index;return this.itemsXY[a]=t,this.itemsXY[a+1]=r,this.index++,!0}this.divide||this.subDivide();var n=this.boundry[0]+.5*this.boundry[2],o=this.boundry[1]+.5*this.boundry[3];return t<n?r<o?this.northwest.insert(e,t,r):this.southwest.insert(e,t,r):r<o?this.northeast.insert(e,t,r):this.southeast.insert(e,t,r),!0},e.prototype.reset=function(){this.index=0;var e=!this.northwest;if(this.northwest){var t=this.northeast.reset(),r=this.northwest.reset(),a=this.southeast.reset(),o=this.southwest.reset();if(t&&r&&a&&o&&(this.deleteBranchMarker++,this.deleteBranchMarker>3)){var i=n[this.northeast.capacity];i||(i=n[this.northeast.capacity]=[]),i.push(this.northeast,this.northwest,this.southeast,this.southwest),this.northeast=null,this.northwest=null,this.southeast=null,this.southwest=null,this.deleteBranchMarker=0}this.divide=!1}return e},e.prototype.getDepth=function(e){return this.divide?Math.max(this.northeast.getDepth(e+1),this.northwest.getDepth(e+1),this.southeast.getDepth(e+1),this.southwest.getDepth(e+1)):e},e}(),i=function(){function e(e,t,r,a){void 0===a&&(a=8),this.divide=!1,this.setup(e,t,r,a)}return e.prototype.___queryXYWH=function(e,r,n,o,i,s,u){void 0===u&&(u=-1);var l=this.items,A=this.itemsXY;if((0,t.intersectsInt32Arr_XYWH)(this.boundry,e,r,n,o)){for(var c=0;c<this.index;c++){var d=l[c];if(!s[d]&&d!==u){var p=2*c;(0,a.intersectsXYWH_XY)(e,r,n,o,A[p],A[p+1])&&(s[d]=1,i.push(d))}}this.divide&&(this.northeast.___query(e,r,n,o,i,s,u),this.northwest.___query(e,r,n,o,i,s,u),this.southeast.___query(e,r,n,o,i,s,u),this.southwest.___query(e,r,n,o,i,s,u))}return i},e.prototype.insertUnsafe=function(e){var t=e.pos.x,r=e.pos.y;if(this.references[this.totalItems]=e,this.totalItems++,this.index<this.capacity){this.items[this.index]=this.REFERENCE_INDEX;var a=2*this.index;this.itemsXY[a]=t,this.itemsXY[a+1]=r,this.index++}else{this.divide||this.subDivide();var n=this.boundry[0]+.5*this.boundry[2],o=this.boundry[1]+.5*this.boundry[3];t<n?r<o?this.northwest.insert(this.REFERENCE_INDEX,t,r):this.southwest.insert(this.REFERENCE_INDEX,t,r):r<o?this.northeast.insert(this.REFERENCE_INDEX,t,r):this.southeast.insert(this.REFERENCE_INDEX,t,r)}this.REFERENCE_INDEX++},e.prototype.insert=function(e){var r=e.pos.x,a=e.pos.y;if(!(0,t.intersectsInt32ArrXY)(this.boundry,r,a))return!1;if(this.references[this.totalItems]=e,this.totalItems++,this.index<this.capacity){this.items[this.index]=this.REFERENCE_INDEX;var n=2*this.index;return this.itemsXY[n]=r,this.itemsXY[n+1]=a,this.index++,this.REFERENCE_INDEX++,!0}return this.divide||this.subDivide(),this.northeast.insert(this.REFERENCE_INDEX,r,a)||this.northwest.insert(this.REFERENCE_INDEX,r,a)||this.southeast.insert(this.REFERENCE_INDEX,r,a)||this.southwest.insert(this.REFERENCE_INDEX,r,a)?(this.REFERENCE_INDEX++,!0):(this.REFERENCE_INDEX++,!1)},e.prototype.subDivide=function(){var e=this.boundry[0],t=this.boundry[1],r=this.boundry[2],a=this.boundry[3],n=this.maxDepth,i=this.capacity;this.northeast?(this.northeast.update(e+Math.ceil(.5*r),t,Math.ceil(.5*r),Math.ceil(.5*a),i,0,n),this.northwest.update(e,t,Math.ceil(.5*r),Math.ceil(.5*a),i,0,n),this.southeast.update(e+Math.ceil(.5*r),t+Math.ceil(.5*a),Math.ceil(.5*r),Math.ceil(.5*a),i,0,n),this.southwest.update(e,t+Math.ceil(.5*a),Math.ceil(.5*r),Math.ceil(.5*a),i,0,n)):(this.northeast=new o([e+Math.ceil(.5*r),t,Math.ceil(.5*r),Math.ceil(.5*a)],i,0,n),this.northwest=new o([e,t,Math.ceil(.5*r),Math.ceil(.5*a)],i,0,n),this.southeast=new o([e+Math.ceil(.5*r),t+Math.ceil(.5*a),Math.ceil(.5*r),Math.ceil(.5*a)],i,0,n),this.southwest=new o([e,t+Math.ceil(.5*a),Math.ceil(.5*r),Math.ceil(.5*a)],i,0,n)),this.divide=!0},e.prototype.___query=function(e,r,n,o){var i=[],s=[],u=this.items,l=this.itemsXY;if((0,t.intersectsInt32Arr_XYWH)(this.boundry,e,r,n,o)){for(var A=0;A<this.index;A++){var c=u[A];if(!i[c]){var d=2*A;(0,a.intersectsXYWH_XY)(e,r,n,o,l[d],l[d+1])&&(i[c]=1,s.push(c))}}this.divide&&(this.northeast.___query(e,r,n,o,s,i),this.northwest.___query(e,r,n,o,s,i),this.southeast.___query(e,r,n,o,s,i),this.southwest.___query(e,r,n,o,s,i))}var p=s.length;if(0===p)return[];var f=new Array(p);for(A=0;A<p;A++)f[A]=this.references[s[A]];return f},e.prototype.query=function(e){var t=e.radius;return this.___query(e.pos.x-t,e.pos.y-t,2*t,t)},e.prototype.queryCircle=function(e,t){var r=this.___query(e.x-t,e.y-t,2*t,2*t);if(0===r.length)return r;for(var n=.7*t,o=[e.x-n,e.y-n,2*n,2*n],i=r.length,s=[],u=0;u<i;u++){var l=r[u];((0,a.intersectsArr_XY)(o,l.pos.x,l.pos.y)||(e.x-l.pos.x)*(e.x-l.pos.x)+(e.y-l.pos.y)*(e.y-l.pos.y)<t*t)&&s.push(l)}return s},e.prototype.queryInt=function(e){return this.___query(e.x,e.y,e.width,e.height)},e.prototype.queryVec=function(e,t,r){return this.___query(e.x-t,e.y-r,2*t,2*r)},e.prototype.destroy=function(){},e.prototype.reset=function(){this.index=0,this.totalItems=0,this.REFERENCE_INDEX=0,this.references=[],this.divide&&(this.northeast.reset(),this.northwest.reset(),this.southeast.reset(),this.southwest.reset()),this.divide=!1},e.prototype.setup=function(e,t,a,n){void 0===n&&(n=8);var o=e.x,i=e.y,s=e.width,u=e.height;this.boundry=new Int32Array([o,i,s,u]),(o>2147483647||i>2147483647||s>2147483647||u>2147483647||o<-2147483648||i<-2147483648)&&console.log("Out of range @ Quadtree [Int32 point] constructor "+this.boundry.join(",")+" "+(0,r.TypesToString)(this.itemType)),this.items=new Int32Array(t),this.itemsXY=new Int32Array(2*t),this.capacity=t,this.itemType=a,this.references=[],this.REFERENCE_INDEX=0,this.index=0,this.totalItems=0,this.minX=65535,this.minY=65535,this.maxW=0,this.maxH=0,this.maxDepth=n},e.prototype.getRangeType=function(){return"INT32 (P)"},e.prototype.getDepth=function(){return this.divide?Math.max(this.northeast.getDepth(1),this.northwest.getDepth(1),this.southeast.getDepth(1),this.southwest.getDepth(1)):0},e.prototype.visualize=function(e,t,r,a,n,o,i){if(void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=.3),this.divide){var s=i;this.__visualize(s,10,e,t,r,a,r-300,a+40,this.northwest,n,o),this.__visualize(s,10,e,t,r,a,r-100,a+40,this.northeast,n,o),this.__visualize(s,10,e,t,r,a,r+100,a+40,this.southwest,n,o),this.__visualize(s,10,e,t,r,a,r+300,a+40,this.southeast,n,o)}},e.prototype.__visualize=function(e,t,r,a,n,o,i,s,u,l,A){var c=u.boundry;r.push((l+c[0])*e,(A+c[1])*e,(l+(c[0]+c[2]))*e,(A+c[1])*e,(l+(c[0]+c[2]))*e,(A+c[1])*e,(l+(c[0]+c[2]))*e,(A+(c[1]+c[3]))*e,(l+c[0])*e,(A+c[1])*e,(l+c[0])*e,(A+(c[1]+c[3]))*e,(l+c[0])*e,(A+(c[1]+c[3]))*e,(l+(c[0]+c[2]))*e,(A+(c[1]+c[3]))*e),t*=.25,u.divide?(this.__visualize(e,t,r,a,i,s,i-30*t,s+40,u.northwest,l,A),this.__visualize(e,t,r,a,i,s,i-10*t,s+40,u.northeast,l,A),this.__visualize(e,t,r,a,i,s,i+10*t,s+40,u.southwest,l,A),this.__visualize(e,t,r,a,i,s,i+30*t,s+40,u.southeast,l,A)):u.southwest&&(this.__visualize(e,t,a,a,i,s,i-30*t,s+40,u.northwest,l,A),this.__visualize(e,t,a,a,i,s,i-10*t,s+40,u.northeast,l,A),this.__visualize(e,t,a,a,i,s,i+10*t,s+40,u.southwest,l,A),this.__visualize(e,t,a,a,i,s,i+30*t,s+40,u.southeast,l,A))},e}();t.QuadTreeInt32Point=i}.apply(t,a),void 0===n||(e.exports=n)},371:(e,t,r)=>{var a,n;a=[r,t,r(1330)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetQuadtreeOnTreeIntersections=t.getMostIntensiveTree=t.getNumCollisions=void 0;var a,n=0,o=0;t.getNumCollisions=function(){var e=n,t=o;return n=0,o=0,{collisions:e,broadPhase:t}};var i=0,s="",u="";t.getMostIntensiveTree=function(){return{mostIntensiveTreetype:s,mostIntensiveTree:i,mostIntensAmounts:u}},t.GetQuadtreeOnTreeIntersections=function(e,t){var l=function(e){var t=[];for(var r in e)t.push(parseInt(r,10));return t}(t),A=l.length;i=0,s="",a=[];for(var c=0;c<A;c++){var d=l[c],p=e[d];o+=p.REFERENCE_INDEX;for(var f=t[d],h=f.length,v=0;v<h;v++){var g=e[f[v].type];if(0!==p.references.length&&0!==g.references.length){var y=performance.now(),m=p.intersectTree(g),_=performance.now()-y;_>i&&(i=_,s=(0,r.TypesToString)(p.itemType)+" - "+(0,r.TypesToString)(g.itemType),u=p.references.length+" - "+g.references.length),m.length>0&&(n+=m.length-1)}}}return a}}.apply(t,a),void 0===n||(e.exports=n)},1705:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};a=[r,t,r(7185),r(484),r(1638),r(1330)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuadTreeUint16=t.intersectsXYWH_XYWH=void 0;var s={},u=function(e){return new a.Rectangle(e[0],e[1],e[2],e[3])},l=function(e,t){return!(e[0]>t[0]+t[2]||e[0]+e[2]<t[0]||e[1]>t[1]+t[3]||e[1]+e[3]<t[1])},A=function(e,t,r,a,n){return!(e[0]>t+a||e[0]+e[2]<t||e[1]>r+n||e[1]+e[3]<r)};t.intersectsXYWH_XYWH=function(e,t,r,a,n,o,i,s){return!(e>n+i||e+r<n||t>o+s||t+a<o)};var c=function(e,t){return t[0]>e[0]&&t[1]>e[1]&&t[0]+t[2]<e[0]+e[2]&&t[1]+t[3]<e[1]+e[3]},d=function(){function e(e,t,r,a){var n=this;this.divide=!1,this.debugBounds=function(e,t){var r,a;return r=new Uint16Array([e.x,e.y,e.width,e.height]),a=n.boundry,r[0]>a[0]+a[2]||r[0]+r[2]<a[0]||r[1]>a[1]+a[3]||r[1]+r[3]<a[1]||t.push(u(n.boundry)),n.divide&&(n.northeast.debugBounds(e,t),n.northwest.debugBounds(e,t),n.southeast.debugBounds(e,t),n.southwest.debugBounds(e,t)),t},this.boundry=new Uint16Array(e),this.capacity=r>=a?8*t:t,this.items=new Uint16Array(this.capacity),this.itemsSleepState=new Uint8Array(this.capacity),this.itemsXYWH=new Uint16Array(4*this.capacity),this.index=0,this.currentDepth=r,this.maxDepth=a,this.deleteBranchMarker=0}return e.prototype.update=function(e,t,r,a,n,o,i){this.boundry[0]=e,this.boundry[1]=t,this.boundry[2]=r,this.boundry[3]=a,this.capacity=n,this.currentDepth=o,this.maxDepth=i,this.index=0},e.prototype.subDivide=function(){var t=this.boundry[0],r=this.boundry[1],a=this.boundry[2],n=this.boundry[3],o=this.currentDepth+1,i=this.maxDepth,u=o>=i?8*this.capacity:this.capacity;if(this.northeast)this.northeast.update(t+.5*a,r,.5*a,.5*n,u,o,i),this.northwest.update(t,r,.5*a,.5*n,u,o,i),this.southeast.update(t+.5*a,r+.5*n,.5*a,.5*n,u,o,i),this.southwest.update(t,r+.5*n,.5*a,.5*n,u,o,i);else{var l=s[u];if(l&&l.length>4)return this.northeast=l.pop(),this.northwest=l.pop(),this.southeast=l.pop(),this.southwest=l.pop(),void this.subDivide();this.northeast=new e([t+.5*a,r,.5*a,.5*n],u,o,i),this.northwest=new e([t,r,.5*a,.5*n],u,o,i),this.southeast=new e([t+.5*a,r+.5*n,.5*a,.5*n],u,o,i),this.southwest=new e([t,r+.5*n,.5*a,.5*n],u,o,i)}this.divide=!0},e.prototype.___query=function(e,r,a,n,o,i,s){void 0===s&&(s=-1);var u=this.items,l=this.index,c=this.itemsXYWH;if(A(this.boundry,e,r,a,n)){for(var d=0;d<l;d++){var p=u[d];if(!i[p]&&p!==s){var f=4*d;(0,t.intersectsXYWH_XYWH)(e,r,a,n,c[f],c[f+1],c[f+2],c[f+3])&&(i[p]=!0,o.push(p))}}this.divide&&(this.northeast.___query(e,r,a,n,o,i,s),this.northwest.___query(e,r,a,n,o,i,s),this.southeast.___query(e,r,a,n,o,i,s),this.southwest.___query(e,r,a,n,o,i,s))}return o},e.prototype.insert=function(e,t,r){if(!l(this.boundry,t))return!1;if(!(this.index<this.capacity))return this.divide||this.subDivide(),!!(this.northeast.insert(e,t,r)||this.northwest.insert(e,t,r)||this.southeast.insert(e,t,r)||this.southwest.insert(e,t,r));this.items[this.index]=e,this.itemsSleepState[this.index]=r;var a=4*this.index;return this.itemsXYWH[a]=t[0],this.itemsXYWH[a+1]=t[1],this.itemsXYWH[a+2]=t[2],this.itemsXYWH[a+3]=t[3],this.index++,!!c(this.boundry,t)||void 0},e.prototype.reset=function(){this.index=0;var e=!this.northwest;if(this.northwest){var t=this.northeast.reset(),r=this.northwest.reset(),a=this.southeast.reset(),n=this.southwest.reset();if(t&&r&&a&&n&&(this.deleteBranchMarker++,this.deleteBranchMarker>30)){var o=s[this.northeast.capacity];o||(o=s[this.northeast.capacity]=[]),o.push(this.northeast,this.northwest,this.southeast,this.southwest),this.northeast=null,this.northwest=null,this.southeast=null,this.southwest=null,this.deleteBranchMarker=0}this.divide=!1}return e},e}(),p=function(){function e(e,t,r,a,n){void 0===a&&(a=8),void 0===n&&(n=!1);var o=this;this.divide=!1,this.findIndex=function(e,t){if(void 0===t&&(t=null),t){if((r=t.items.indexOf(e))>-1)return r;t.divide&&(o.findIndex(e,t.northeast),o.findIndex(e,t.northwest),o.findIndex(e,t.southeast),o.findIndex(e,t.southwest))}else{var r;if((r=o.items.indexOf(e))>-1)return r;o.divide&&(o.findIndex(e,o.northeast),o.findIndex(e,o.northwest),o.findIndex(e,o.southeast),o.findIndex(e,o.southwest))}},this.debugAABBs=function(e,t){return console.error("NOT IMPLEMENTED"),t},this.debugBounds=function(e){var t=[],r=[e.x,e.y,e.width,e.height];return l(o.boundry,r)&&t.push(u(o.boundry)),o.divide&&(o.northeast.debugBounds(e,t),o.northwest.debugBounds(e,t),o.southeast.debugBounds(e,t),o.southwest.debugBounds(e,t)),t},this.setup(e,t,r,a,n)}return e.prototype.shrink=function(){this.boundry[0]=0|Math.max(this.minX+1,0),this.boundry[1]=0|Math.max(this.minY+1,0),this.boundry[2]=Math.ceil(this.maxW-this.minX),this.boundry[3]=Math.ceil(this.maxH-this.minY)},e.prototype.intersectTree=function(e){var t=[],r=(this.itemType,e.itemType,this.index);if(r>0){for(var a={},n=this.items,i=this.itemsSleepState,s=this.itemsXYWH,u=0;u<r;u++)if(0!==i[u]){var l=n[u];if(!a[l]){var A=4*u,c=s[A],d=s[A+1],p=s[A+2],f=s[A+3];a[l]=!0;var h=e.___queryXYWH(c,d,p,f,[],[],l);h.length>0&&t.push(o([l],h,!0))}}this.divide&&(this.___iterateBranchAgainstTree(this.northeast,e,t,a),this.___iterateBranchAgainstTree(this.northwest,e,t,a),this.___iterateBranchAgainstTree(this.southeast,e,t,a),this.___iterateBranchAgainstTree(this.southwest,e,t,a))}return t},e.prototype.___iterateBranchAgainstTree=function(e,t,r,a){var n=e.index,i=this.itemType===t.itemType;if(n>0){for(var s=e.items,u=e.itemsSleepState,l=e.itemsXYWH,A=0;A<n;A++)if(0!==u[A]){var c=s[A];if(!a[c]){var d=4*A,p=l[d],f=l[d+1],h=l[d+2],v=l[d+3];a[c]=!0;var g=t.___queryXYWH(p,f,h,v,[],[],i?c:-1);g.length>0&&r.push(o([c],g,!0))}}e.divide&&(this.___iterateBranchAgainstTree(e.northeast,t,r,a),this.___iterateBranchAgainstTree(e.northwest,t,r,a),this.___iterateBranchAgainstTree(e.southeast,t,r,a),this.___iterateBranchAgainstTree(e.southwest,t,r,a))}},e.prototype.___queryXYWH=function(e,r,a,n,o,i,s){void 0===s&&(s=-1);var u=this.items,l=this.itemsXYWH;if(A(this.boundry,e,r,a,n)){for(var c=0;c<this.index;c++){var d=u[c];if(!i[d]&&d!==s){var p=4*c;(0,t.intersectsXYWH_XYWH)(e,r,a,n,l[p],l[p+1],l[p+2],l[p+3])&&(i[d]=1,o.push(d))}}this.divide&&(this.northeast.___query(e,r,a,n,o,i,s),this.northwest.___query(e,r,a,n,o,i,s),this.southeast.___query(e,r,a,n,o,i,s),this.southwest.___query(e,r,a,n,o,i,s))}return o},e.prototype.insert=function(e,t){var r=e.radius,a=e.pos.x,n=e.pos.y,o=2*r,i=2*r,s=e.sleepingAABB?0:1;if(this.AABB_VEL){var u=e.vel.x*-t,A=e.vel.y*-t;u>0?o+=u:(a+=u,o-=u),A>0?i+=A:(n+=A,i-=A)}var d=a-r,p=n-r,f=d<0?0:d,h=p<0?0:p,v=[f,h,o,i];if(!l(this.boundry,v))return!1;if(this.references[this.totalItems]=e,this.totalItems++,!(this.index<this.capacity))return this.divide||this.subDivide(),this.northeast.insert(this.REFERENCE_INDEX,v,s)||this.northwest.insert(this.REFERENCE_INDEX,v,s)||this.southeast.insert(this.REFERENCE_INDEX,v,s)||this.southwest.insert(this.REFERENCE_INDEX,v,s)?(this.REFERENCE_INDEX++,!0):void this.REFERENCE_INDEX++;this.items[this.index]=this.REFERENCE_INDEX,this.itemsSleepState[this.index]=s;var g=4*this.index;return this.itemsXYWH[g]=f,this.itemsXYWH[g+1]=h,this.itemsXYWH[g+2]=o,this.itemsXYWH[g+3]=i,this.index++,this.REFERENCE_INDEX++,!!c(this.boundry,v)||void 0},e.prototype.subDivide=function(){var e=this.boundry[0],t=this.boundry[1],r=this.boundry[2],a=this.boundry[3],n=this.maxDepth,o=this.capacity;this.northeast?(this.northeast.update(e+.5*r,t,.5*r,.5*a,o,0,n),this.northwest.update(e,t,.5*r,.5*a,o,0,n),this.southeast.update(e+.5*r,t+.5*a,.5*r,.5*a,o,0,n),this.southwest.update(e,t+.5*a,.5*r,.5*a,o,0,n)):(this.northeast=new d([e+.5*r,t,.5*r,.5*a],o,0,n),this.northwest=new d([e,t,.5*r,.5*a],o,0,n),this.southeast=new d([e+.5*r,t+.5*a,.5*r,.5*a],o,0,n),this.southwest=new d([e,t+.5*a,.5*r,.5*a],o,0,n)),this.divide=!0},e.prototype.___query=function(e,r,a,n){var o=[],i=[],s=this.items,u=this.itemsXYWH;if(A(this.boundry,e,r,a,n)){for(var l=0;l<this.index;l++){var c=s[l];if(!o[c]){var d=4*l;(0,t.intersectsXYWH_XYWH)(e,r,a,n,u[d],u[d+1],u[d+2],u[d+3])&&(o[c]=1,i.push(c))}}this.divide&&(this.northeast.___query(e,r,a,n,i,o),this.northwest.___query(e,r,a,n,i,o),this.southeast.___query(e,r,a,n,i,o),this.southwest.___query(e,r,a,n,i,o))}var p=i.length;if(0===p)return[];var f=new Array(p);for(l=0;l<p;l++)f[l]=this.references[i[l]];return f},e.prototype.query=function(e){var t=e.radius;return this.___query(e.pos.x-t,e.pos.y-t,2*t,2*t)},e.prototype.queryShape=function(e){for(var t=Number.MAX_VALUE,r=Number.MIN_VALUE,n=Number.MAX_VALUE,o=Number.MIN_VALUE,i=e.length,s=0;s<i;s++){var u=e[s];u.x>r&&(r=u.x),u.x<t&&(t=u.x),u.y>o&&(o=u.y),u.y<n&&(n=u.y)}for(var l=new a.Rectangle(t,n,r-t,o-n),A=this.queryInt(l),c=A.length,d=0;d<c;d++)for(var p=A[d],f=new a.Rectangle(p.pos.x-p.radius,p.pos.y-p.radius,2*p.radius,2*p.radius).toPointArray(),h=0;h<4;h++){var v=f[h],g=(s=0,0),y=void 0;for(s=0,g=i-1;s<i;g=s++)e[s].y>v.y!=e[g].y>v.y&&v.x<(e[g].x-e[s].x)*(v.y-e[s].y)/(e[g].y-e[s].y)+e[s].x&&(y=!y);if(y)return[p]}return[]},e.prototype.queryRay=function(e,t){for(var r,a,o,i,s=Math.min(e.x,t.x),u=Math.min(e.y,t.y),l=Math.max(e.x,t.x)-s,A=Math.max(e.y,t.y)-u,c=this.___query(s,u,l,A),d=e.x,p=e.y,f=t.x,h=t.y,v=[],g=c.length,y=0;y<g;y++){var m=c[y],_=m.pos.x,x=m.pos.y,S=m.radius;(0,n.LineIntersects)(d,p,f,h,_-S,x-S,_+S,x-S)||(0,n.LineIntersects)(d,p,f,h,_+S,x-S,_+S,x+S)||(0,n.LineIntersects)(d,p,f,h,_-S,x+S,_+S,x+S)||(0,n.LineIntersects)(d,p,f,h,_-S,x-S,_-S,x+S)?v.push(m):(a=x,i=p,(r=_)>(o=d)||r+S<o||a>i||a+S<i||v.push(m))}return v},e.prototype.queryCircle=function(e,t){var a=this.___query(e.x-t,e.y-t,2*t,2*t);if(0===a.length)return a;for(var n,o,i,s,u,l=.7*t,A=[e.x-l,e.y-l,2*l,2*l],c=a.length,d=[],p=0;p<c;p++){var f=a[p];n=A,o=f.pos.x-f.radius,i=f.pos.y-f.radius,s=2*f.radius,u=2*f.radius,n[0]>o+s||n[0]+n[2]<o||n[1]>i+u||n[1]+n[3]<i?(0,r.radiusIntersectXYXY)(e.x,e.y,t,f.pos.x,f.pos.y,f.radius)&&d.push(f):d.push(f)}return d},e.prototype.queryInt=function(e){return this.___query(e.x,e.y,e.width,e.height)},e.prototype.groupResult=function(e,t){for(var r=e.length,a={},n=0;n<r;n++){var o=e[n],i=o.type;(l=a[i])||(l=a[i]=[]),l.push(o)}a[3001]=e;var s=[],u=t.length;for(n=0;n<u;n++){var l;if(l=a[t[n]])for(var A=l.length,c=0;c<A;c++)s.push(l[c])}return a[3002]=s,a},e.prototype.queryVecTypes=function(e,t,r,a){var n=this.___query(e.x-t,e.y-r,2*t,2*r);return this.groupResult(n,a)},e.prototype.queryVec=function(e,t,r){return this.___query(e.x-t,e.y-r,2*t,2*r)},e.prototype.destroy=function(){this.northeast=null,this.northwest=null,this.southeast=null,this.southwest=null},e.prototype.reset=function(){this.index=0,this.totalItems=0,this.REFERENCE_INDEX=0,this.references=[],this.divide&&(this.northeast.reset(),this.northwest.reset(),this.southeast.reset(),this.southwest.reset()),this.divide=!1},e.prototype.getRangeType=function(){return"UINT16"},e.prototype.setup=function(e,t,r,a,n){void 0===a&&(a=8),void 0===n&&(n=!1);var o=e.x,s=e.y,u=e.width,l=e.height;this.boundry=new Uint16Array([o<0?0:o,s<0?0:s,u,l]),(o>65535||s>65535||u>65535||l>65535)&&console.log("Out of range @ Quadtree constructor "+this.boundry.join(",")+" "+(0,i.TypesToString)(this.itemType)),this.AABB_VEL=n,this.items=new Uint16Array(t),this.itemsSleepState=new Uint8Array(t),this.itemsXYWH=new Uint16Array(4*t),this.capacity=t,this.itemType=r,this.references=[],this.REFERENCE_INDEX=0,this.index=0,this.totalItems=0,this.minX=65535,this.minY=65535,this.maxW=0,this.maxH=0,this.maxDepth=a},e.prototype.visualize=function(e,t,r,a){if(this.divide){var n=600/this.boundry[2];this.__visualize(n,10,e,t,r,a,r-300,a+40,this.northwest),this.__visualize(n,10,e,t,r,a,r-100,a+40,this.northeast),this.__visualize(n,10,e,t,r,a,r+100,a+40,this.southwest),this.__visualize(n,10,e,t,r,a,r+300,a+40,this.southeast)}},e.prototype.__visualize=function(e,t,r,a,n,o,i,s,u){r.push(n,o,i,s);var l=u.boundry,A=100,c=240;r.push(l[0]*e+A,l[1]*e+c,(l[0]+l[2])*e+A,l[1]*e+c,(l[0]+l[2])*e+A,l[1]*e+c,(l[0]+l[2])*e+A,(l[1]+l[3])*e+c,l[0]*e+A,l[1]*e+c,l[0]*e+A,(l[1]+l[3])*e+c,l[0]*e+A,(l[1]+l[3])*e+c,(l[0]+l[2])*e+A,(l[1]+l[3])*e+c),t*=.25,u.divide?(this.__visualize(e,t,r,a,i,s,i-30*t,s+40,u.northwest),this.__visualize(e,t,r,a,i,s,i-10*t,s+40,u.northeast),this.__visualize(e,t,r,a,i,s,i+10*t,s+40,u.southwest),this.__visualize(e,t,r,a,i,s,i+30*t,s+40,u.southeast)):u.southwest&&(this.__visualize(e,t,a,a,i,s,i-30*t,s+40,u.northwest),this.__visualize(e,t,a,a,i,s,i-10*t,s+40,u.northeast),this.__visualize(e,t,a,a,i,s,i+10*t,s+40,u.southwest),this.__visualize(e,t,a,a,i,s,i+30*t,s+40,u.southeast))},e}();t.QuadTreeUint16=p}.apply(t,a),void 0===n||(e.exports=n)},3863:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(1330),r(3058)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuadTreeUint16Point=t.intersectsUintArr16_XYWH=t.intersectsUintArr16XY=void 0;var o={};t.intersectsUintArr16XY=function(e,t,r){return!(e[0]>t||e[0]+e[2]<t||e[1]>r||e[1]+e[3]<r)},t.intersectsUintArr16_XYWH=function(e,t,r,a,n){return!(e[0]>t+a||e[0]+e[2]<t||e[1]>r+n||e[1]+e[3]<r)};var i=function(){function e(e,t,r,a){this.divide=!1,this.boundry=new Uint16Array(e),this.capacity=r>=a?8*t:t,this.items=new Uint16Array(this.capacity),this.itemsXY=new Uint16Array(2*this.capacity),this.index=0,this.currentDepth=r,this.maxDepth=a,this.deleteBranchMarker=0}return e.prototype.update=function(e,t,r,a,n,o,i){this.boundry[0]=e,this.boundry[1]=t,this.boundry[2]=r,this.boundry[3]=a,this.capacity=n,this.currentDepth=o,this.maxDepth=i,this.index=0},e.prototype.subDivide=function(){var t=this.boundry[0],r=this.boundry[1],a=this.boundry[2],n=this.boundry[3],i=this.currentDepth+1,s=this.maxDepth,u=i>=s?8*this.capacity:this.capacity;if(this.northeast)this.northeast.update(t+Math.ceil(.5*a),r,Math.ceil(.5*a),Math.ceil(.5*n),u,i,s),this.northwest.update(t,r,Math.ceil(.5*a),Math.ceil(.5*n),u,i,s),this.southeast.update(t+Math.ceil(.5*a),r+Math.ceil(.5*n),Math.ceil(.5*a),Math.ceil(.5*n),u,i,s),this.southwest.update(t,r+Math.ceil(.5*n),Math.ceil(.5*a),Math.ceil(.5*n),u,i,s);else{var l=o[u];if(l&&l.length>4)return this.northeast=l.pop(),this.northwest=l.pop(),this.southeast=l.pop(),this.southwest=l.pop(),void this.subDivide();this.northeast=new e([t+Math.ceil(.5*a),r,Math.ceil(.5*a),Math.ceil(.5*n)],u,i,s),this.northwest=new e([t,r,Math.ceil(.5*a),Math.ceil(.5*n)],u,i,s),this.southeast=new e([t+Math.ceil(.5*a),r+Math.ceil(.5*n),Math.ceil(.5*a),Math.ceil(.5*n)],u,i,s),this.southwest=new e([t,r+Math.ceil(.5*n),Math.ceil(.5*a),Math.ceil(.5*n)],u,i,s)}this.divide=!0},e.prototype.___query=function(e,r,a,o,i,s,u){void 0===u&&(u=-1);var l=this.items,A=this.index,c=this.itemsXY;if((0,t.intersectsUintArr16_XYWH)(this.boundry,e,r,a,o)){for(var d=0;d<A;d++){var p=l[d];if(!s[p]&&p!==u){var f=2*d;(0,n.intersectsXYWH_XY)(e,r,a,o,c[f],c[f+1])&&(s[p]=!0,i.push(p))}}this.divide&&(this.northeast.___query(e,r,a,o,i,s,u),this.northwest.___query(e,r,a,o,i,s,u),this.southeast.___query(e,r,a,o,i,s,u),this.southwest.___query(e,r,a,o,i,s,u))}return i},e.prototype.insert=function(e,r,a){if(!(0,t.intersectsUintArr16XY)(this.boundry,r,a))return!1;if(this.index<this.capacity){this.items[this.index]=e;var n=2*this.index;return this.itemsXY[n]=r,this.itemsXY[n+1]=a,this.index++,!0}return this.divide||this.subDivide(),!!(this.northeast.insert(e,r,a)||this.northwest.insert(e,r,a)||this.southeast.insert(e,r,a)||this.southwest.insert(e,r,a))},e.prototype.reset=function(){this.index=0;var e=!this.northwest;if(this.northwest){var t=this.northeast.reset(),r=this.northwest.reset(),a=this.southeast.reset(),n=this.southwest.reset();if(t&&r&&a&&n&&(this.deleteBranchMarker++,this.deleteBranchMarker>3)){var i=o[this.northeast.capacity];i||(i=o[this.northeast.capacity]=[]),i.push(this.northeast,this.northwest,this.southeast,this.southwest),this.northeast=null,this.northwest=null,this.southeast=null,this.southwest=null,this.deleteBranchMarker=0}this.divide=!1}return e},e}(),s=function(){function e(e,t,r,a){void 0===a&&(a=8),this.divide=!1,this.setup(e,t,r,a)}return e.prototype.___queryXYWH=function(e,r,a,o,i,s,u){void 0===u&&(u=-1);var l=this.items,A=this.itemsXY;if((0,t.intersectsUintArr16_XYWH)(this.boundry,e,r,a,o)){for(var c=0;c<this.index;c++){var d=l[c];if(!s[d]&&d!==u){var p=2*c;(0,n.intersectsXYWH_XY)(e,r,a,o,A[p],A[p+1])&&(s[d]=1,i.push(d))}}this.divide&&(this.northeast.___query(e,r,a,o,i,s,u),this.northwest.___query(e,r,a,o,i,s,u),this.southeast.___query(e,r,a,o,i,s,u),this.southwest.___query(e,r,a,o,i,s,u))}return i},e.prototype.insertUnsafe=function(e){throw"insert unsafe not implemented @ QuadtreeUint16Point"},e.prototype.insert=function(e){var r=e.pos.x,a=e.pos.y;if(!(0,t.intersectsUintArr16XY)(this.boundry,r,a))return!1;if(this.references[this.totalItems]=e,this.totalItems++,this.index<this.capacity){this.items[this.index]=this.REFERENCE_INDEX;var n=2*this.index;return this.itemsXY[n]=r,this.itemsXY[n+1]=a,this.index++,this.REFERENCE_INDEX++,!0}return this.divide||this.subDivide(),this.northeast.insert(this.REFERENCE_INDEX,r,a)||this.northwest.insert(this.REFERENCE_INDEX,r,a)||this.southeast.insert(this.REFERENCE_INDEX,r,a)||this.southwest.insert(this.REFERENCE_INDEX,r,a)?(this.REFERENCE_INDEX++,!0):(this.REFERENCE_INDEX++,!1)},e.prototype.subDivide=function(){var e=this.boundry[0],t=this.boundry[1],r=this.boundry[2],a=this.boundry[3],n=this.maxDepth,o=this.capacity;this.northeast?(this.northeast.update(e+Math.ceil(.5*r),t,Math.ceil(.5*r),Math.ceil(.5*a),o,0,n),this.northwest.update(e,t,Math.ceil(.5*r),Math.ceil(.5*a),o,0,n),this.southeast.update(e+Math.ceil(.5*r),t+Math.ceil(.5*a),Math.ceil(.5*r),Math.ceil(.5*a),o,0,n),this.southwest.update(e,t+Math.ceil(.5*a),Math.ceil(.5*r),Math.ceil(.5*a),o,0,n)):(this.northeast=new i([e+Math.ceil(.5*r),t,Math.ceil(.5*r),Math.ceil(.5*a)],o,0,n),this.northwest=new i([e,t,Math.ceil(.5*r),Math.ceil(.5*a)],o,0,n),this.southeast=new i([e+Math.ceil(.5*r),t+Math.ceil(.5*a),Math.ceil(.5*r),Math.ceil(.5*a)],o,0,n),this.southwest=new i([e,t+Math.ceil(.5*a),Math.ceil(.5*r),Math.ceil(.5*a)],o,0,n)),this.divide=!0},e.prototype.___query=function(e,r,a,o){var i=[],s=[],u=this.items,l=this.itemsXY;if((0,t.intersectsUintArr16_XYWH)(this.boundry,e,r,a,o)){for(var A=0;A<this.index;A++){var c=u[A];if(!i[c]){var d=2*A;(0,n.intersectsXYWH_XY)(e,r,a,o,l[d],l[d+1])&&(i[c]=1,s.push(c))}}this.divide&&(this.northeast.___query(e,r,a,o,s,i),this.northwest.___query(e,r,a,o,s,i),this.southeast.___query(e,r,a,o,s,i),this.southwest.___query(e,r,a,o,s,i))}var p=s.length;if(0===p)return[];var f=new Array(p);for(A=0;A<p;A++)f[A]=this.references[s[A]];return f},e.prototype.query=function(e){var t=e.radius;return this.___query(e.pos.x-t,e.pos.y-t,2*t,t)},e.prototype.queryCircle=function(e,t){var a=this.___query(e.x-t,e.y-t,2*t,2*t);if(0===a.length)return a;for(var o=.7*t,i=[e.x-o,e.y-o,2*o,2*o],s=a.length,u=[],l=0;l<s;l++){var A=a[l];((0,n.intersectsArr_XY)(i,A.pos.x,A.pos.y)||(0,r.radiusIntersectPoint)(e.x,e.y,t,A.pos.x,A.pos.y))&&u.push(A)}return u},e.prototype.queryInt=function(e){return this.___query(e.x,e.y,e.width,e.height)},e.prototype.queryVec=function(e,t,r){return this.___query(e.x-t,e.y-r,2*t,2*r)},e.prototype.destroy=function(){},e.prototype.reset=function(){this.index=0,this.totalItems=0,this.REFERENCE_INDEX=0,this.references=[],this.divide&&(this.northeast.reset(),this.northwest.reset(),this.southeast.reset(),this.southwest.reset()),this.divide=!1},e.prototype.setup=function(e,t,r,n){void 0===n&&(n=8);var o=Math.max(0,e.x),i=Math.max(0,e.y),s=e.width,u=e.height;this.boundry=new Uint16Array([o,i,s,u]),(o>65535||i>65535||s>65535||u>65535)&&console.log("Out of range @ Quadtree constructor "+this.boundry.join(",")+" "+(0,a.TypesToString)(this.itemType)),this.items=new Uint16Array(t),this.itemsXY=new Uint16Array(2*t),this.capacity=t,this.itemType=r,this.references=[],this.REFERENCE_INDEX=0,this.index=0,this.totalItems=0,this.minX=65535,this.minY=65535,this.maxW=0,this.maxH=0,this.maxDepth=n},e.prototype.getRangeType=function(){return"UINT16"},e.prototype.getDepth=function(){return console.error("depth not implemented"),-1},e.prototype.visualize=function(e,t,r,a,n,o,i){if(void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=.3),this.divide){var s=i;this.__visualize(s,10,e,t,r,a,r-300,a+40,this.northwest,n,o),this.__visualize(s,10,e,t,r,a,r-100,a+40,this.northeast,n,o),this.__visualize(s,10,e,t,r,a,r+100,a+40,this.southwest,n,o),this.__visualize(s,10,e,t,r,a,r+300,a+40,this.southeast,n,o)}},e.prototype.__visualize=function(e,t,r,a,n,o,i,s,u,l,A){var c=u.boundry;r.push((l+c[0])*e,(A+c[1])*e,(l+(c[0]+c[2]))*e,(A+c[1])*e,(l+(c[0]+c[2]))*e,(A+c[1])*e,(l+(c[0]+c[2]))*e,(A+(c[1]+c[3]))*e,(l+c[0])*e,(A+c[1])*e,(l+c[0])*e,(A+(c[1]+c[3]))*e,(l+c[0])*e,(A+(c[1]+c[3]))*e,(l+(c[0]+c[2]))*e,(A+(c[1]+c[3]))*e),t*=.25,u.divide?(this.__visualize(e,t,r,a,i,s,i-30*t,s+40,u.northwest,l,A),this.__visualize(e,t,r,a,i,s,i-10*t,s+40,u.northeast,l,A),this.__visualize(e,t,r,a,i,s,i+10*t,s+40,u.southwest,l,A),this.__visualize(e,t,r,a,i,s,i+30*t,s+40,u.southeast,l,A)):u.southwest&&(this.__visualize(e,t,a,a,i,s,i-30*t,s+40,u.northwest,l,A),this.__visualize(e,t,a,a,i,s,i-10*t,s+40,u.northeast,l,A),this.__visualize(e,t,a,a,i,s,i+10*t,s+40,u.southwest,l,A),this.__visualize(e,t,a,a,i,s,i+30*t,s+40,u.southeast,l,A))},e}();t.QuadTreeUint16Point=s}.apply(t,a),void 0===n||(e.exports=n)},484:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Rectangle=t.rect_pool_put=t.rect_pool_pop=t.getRects=void 0;var r=[],a=0;t.getRects=function(){return a+" / "+r.length},t.rect_pool_pop=function(e,t,a,o){if(r.length>0){var i=r.pop();return i.update(e,t,a,o),i}return new n(e,t,a,o)},t.rect_pool_put=function(e){r.push(e)};var n=function(){function e(e,t,r,n){this.x=e,this.y=t,this.height=n,this.width=r,a++}return e.prototype.update=function(e,t,r,a){this.x=e,this.y=t,this.height=a,this.width=r},e.prototype.updateFromRect=function(e){this.x=e.x,this.y=e.y,this.height=e.height,this.width=e.width},e.prototype.intersects=function(e){return!(e.x>this.x+this.width||e.x+e.width<this.x||e.y>this.y+this.height||e.y+e.height<this.y)},e.prototype.intersectsIM=function(e){return!(e.pos.x>this.x+this.width||e.pos.x+e.radius<this.x||e.pos.y>this.y+this.height||e.pos.y+e.radius<this.y)},e.prototype.containsIM=function(e){return e.pos.x-e.radius>this.x&&e.pos.y-e.radius>this.y&&e.pos.x+2*e.radius<this.x+this.width&&e.pos.y+2*e.radius<this.y+this.height},e.prototype.updateFromIM=function(e){this.x=e.pos.x-e.radius,this.x=e.pos.x-e.radius,this.width=2*e.radius,this.height=2*e.radius},e.prototype.containsRect=function(e){return e.x>this.x&&e.y>this.y&&e.x+e.width<this.x+this.width&&e.y+e.height<this.y+this.height},e.prototype.intersectsPoint=function(e){return e.x>this.x&&e.y>this.y&&e.x<this.x+this.width&&e.y<this.y+this.height},e.prototype.intersectsPointVertical=function(e){return e.y>this.y&&e.y<this.y+this.height},e.prototype.intersectsXY=function(e,t){return e>this.x&&t>this.y&&e<this.x+this.width&&t<this.y+this.height},e.prototype.scale=function(e){var t=e*this.width,r=e*this.height,a=this.x-.5*(t-this.width),n=this.y-.5*(r-this.height);this.x=a,this.y=n,this.width=t,this.height=r},e.prototype.add=function(e){var t=this.width+2*e,r=this.height+2*e,a=this.x-e,n=this.y-e;this.x=a,this.y=n,this.width=t,this.height=r},e.prototype.toPointArray=function(){return[{x:this.x,y:this.y},{x:this.x,y:this.y+this.height},{x:this.x+this.width,y:this.y},{x:this.x+this.width,y:this.y+this.height}]},e.prototype.toLines=function(e,t){return[this.x-e,this.y-t,this.x+this.width-e,this.y-t,this.x-e,this.y+this.height-t,this.x+this.width-e,this.y+this.height-t,this.x-e,this.y-t,this.x-e,this.y+this.height-t,this.x+this.width-e,this.y-t,this.x+this.width-e,this.y+this.height-t]},e.prototype.toString=function(e){return e?"x:"+(0|this.x)+", y:"+(0|this.y)+", w:"+(0|this.width)+", h:"+(0|this.height):"x:"+this.x+", y:"+this.y+", w:"+this.width+", h:"+this.height},e}();t.Rectangle=n}.apply(t,[r,t]),void 0===a||(e.exports=a)},9075:(e,t,r)=>{var a,n;a=[r,t,r(9262)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollData=void 0;var a=new r.Vector(0,0),n=new r.Vector(0,0),o=new r.Vector(0,0),i=new r.Vector(0,0),s=new r.Vector(0,0),u=new r.Vector(0,0),l=new r.Vector(0,0),A=new r.Vector(0,0),c=new r.Vector(0,0),d=new r.Vector(0,0),p=new r.Vector(0,0),f=new r.Vector(0,0),h=function(){function e(e,t,r,a,n){this.o1=e,this.o2=t,this.normal=r,this.pen=a,this.cp=n}return e.prototype.penRes=function(){p.setFromVec(this.normal).mult(this.pen/(this.o1.inv_m+this.o2.inv_m)),f.setFromVec(p),p.mult(this.o1.inv_m),this.o1.pos.add(p),f.mult(-this.o2.inv_m),this.o2.pos.add(f)},e.prototype.collRes=function(){a.setFromVec(this.cp).subtr(this.o1.comp[0].pos),o.set(-this.o1.angVel*a.y,this.o1.angVel*a.x),s.setFromVec(this.o1.vel).add(o),n.setFromVec(this.cp).subtr(this.o2.comp[0].pos),i.set(-this.o2.angVel*n.y,this.o2.angVel*n.x),u.setFromVec(this.o2.vel).add(i);var e=r.Vector.cross(a,this.normal);e=e*this.o1.inv_inertia*e;var t=r.Vector.cross(n,this.normal);t=t*this.o2.inv_inertia*t,l.setFromVec(s).subtr(u);var p=r.Vector.dot(l,this.normal),f=(-p*Math.min(this.o1.elasticity,this.o2.elasticity)-p)/(this.o1.inv_m+this.o2.inv_m+e+t);A.setFromVec(this.normal).mult(f),c.setFromVec(A).mult(this.o1.inv_m),d.setFromVec(A).mult(-this.o2.inv_m),this.o1.vel.add(c),this.o2.vel.add(d),this.o1.angVel+=this.o1.inv_inertia*r.Vector.cross(a,A),this.o2.angVel-=this.o2.inv_inertia*r.Vector.cross(n,A)},e}();t.CollData=h}.apply(t,a),void 0===n||(e.exports=n)},9702:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MatrixOpRotMx22=t.MatrixOpMultiplyVec=t.CreateMatrix22=void 0,t.CreateMatrix22=function(){for(var e=[],t=0;t<2;t++){e[t]=[];for(var r=0;r<2;r++)e[t][r]=0}return e},t.MatrixOpMultiplyVec=function(e,t,r){return r.x=e[0][0]*t.x+e[0][1]*t.y,r.y=e[1][0]*t.x+e[1][1]*t.y,r},t.MatrixOpRotMx22=function(e,t){e[0][0]=Math.cos(t),e[0][1]=-Math.sin(t),e[1][0]=Math.sin(t),e[1][1]=Math.cos(t)}}.apply(t,[r,t]),void 0===a||(e.exports=a)},8015:(e,t,r)=>{var a,n;a=[r,t,r(9262)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SAT_collider=function(e,t){for(var r={pen:null,axis:null,vertex:null},a=0;a<e.comp.length;a++)for(var o=0;o<t.comp.length;o++){var i=n(e.comp[a],t.comp[o]);i&&i.pen>r.pen&&(r=i)}return r};var a=new r.Vector(0,0);function n(e,t){var r=null;a.set(0,0);for(var n,m,x,S=a,T=function(e,t){var r=[];return 0===e.shape&&0===t.shape?(y.setFromVec(t.pos).subtr(e.pos),y.mag()>0?(i.setFromVec(y).unit(),r.push(i)):(i.set(Math.random(),Math.random()).unit(),r.push(i)),r):(0===e.shape&&(i.setFromVec(_(t,e.pos)).subtr(e.pos),i.unit(),r.push(i)),2===e.shape&&(g.setFromVec(e.dir),g.normal(),r.push(g)),4===e.shape&&(s.setFromVec(e.dir).normal(),r.push(s),r.push(e.dir)),1===e.shape&&(u.setFromVec(e.vertex[1]).subtr(e.vertex[0]),l.setFromVec(e.vertex[2]).subtr(e.vertex[1]),A.setFromVec(e.vertex[0]).subtr(e.vertex[2]),u.normal(),l.normal(),A.normal(),r.push(u),r.push(l),r.push(A)),0===t.shape&&(c.setFromVec(_(e,t.pos)).subtr(t.pos),c.unit(),r.push(c)),2===t.shape&&(d.setFromVec(t.dir).normal(),r.push(d)),4===t.shape&&(p.setFromVec(t.dir).normal(),r.push(p),r.push(t.dir)),1===t.shape&&(f.setFromVec(t.vertex[1]).subtr(t.vertex[0]),h.setFromVec(t.vertex[2]).subtr(t.vertex[1]),v.setFromVec(t.vertex[0]).subtr(t.vertex[2]),f.normal(),h.normal(),v.normal(),r.push(f),r.push(h),r.push(v)),r)}(e,t),E=function(e){if(0===e.shape||2===e.shape)return 1;if(4===e.shape)return 2;if(1===e.shape)return 3;throw"unknown shape @ getshape axes"}(e),M=0;M<T.length;M++){m=o(T[M],e),x=o(T[M],t);var b=Math.min(m.max,x.max)-Math.max(m.min,x.min);if(b<0)return!1;if(m.max>x.max&&m.min<x.min||m.max<x.max&&m.min>x.min){var I=Math.abs(m.min-x.min),L=Math.abs(m.max-x.max);I<L?b+=I:(b+=L,T[M].mult(-1))}(b<r||null===r)&&(r=b,S=T[M],M<E?(n=t,m.max>x.max&&S.setFromVec(T[M]).mult(-1)):(n=e,m.max<x.max&&S.setFromVec(T[M]).mult(-1)))}var P=o(S,n).collVertex;return n===t&&S.setFromVec(S).mult(-1),{pen:r,axis:S.clone(),vertex:P.clone()}}function o(e,t){!function(e,t){0===e.shape&&(e.vertex[0].setFromVec(e.pos),x.setFromVec(t),x.unit(),x.mult(-e.r),e.vertex[0].add(x),e.vertex[1].setFromVec(e.pos),x.setFromVec(t),x.unit(),x.mult(e.r),e.vertex[1].add(x))}(t,e);for(var a=r.Vector.dot(e,t.vertex[0]),n=a,o=t.vertex[0],i=0;i<t.vertex.length;i++){var s=r.Vector.dot(e,t.vertex[i]);s<a&&(a=s,o=t.vertex[i]),s>n&&(n=s)}return{min:a,max:n,collVertex:o}}var i=new r.Vector(0,0),s=new r.Vector(0,0),u=new r.Vector(0,0),l=new r.Vector(0,0),A=new r.Vector(0,0),c=new r.Vector(0,0),d=new r.Vector(0,0),p=new r.Vector(0,0),f=new r.Vector(0,0),h=new r.Vector(0,0),v=new r.Vector(0,0),g=new r.Vector(0,0),y=new r.Vector(0,0),m=new r.Vector(0,0);function _(e,t){for(var r,a=null,n=0;n<e.vertex.length;n++){m.setFromVec(t).subtr(e.vertex[n]);var o=m.mag();(o<a||null===a)&&(r=e.vertex[n],a=o)}return r}var x=new r.Vector(0,0)}.apply(t,a),void 0===n||(e.exports=n)},943:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(5778),r(108)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ballUpdater=t.BallCreator=void 0,t.BallCreator=function(e,t,n,i){return o({},(0,r.RigidBodyCreatorBase)(0,i,[(0,a.CircleCreator)(e,t,n)],e,t))},t.ballUpdater=function(e,t){(0,r.bodyUpdater)(e),e.pos.set(e.pos.x+e.vel.x*t,e.pos.y+e.vel.y*t),e.comp[0].pos=e.pos}}.apply(t,a),void 0===n||(e.exports=n)},5778:(e,t,r)=>{var a,n;a=[r,t,r(9262)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyUpdater=t.RigidBodyCreatorBase=void 0,t.RigidBodyCreatorBase=function(e,t,a,n,o){return{shape:e,comp:a,pos:new r.Vector(n,o),opos:{x:n,y:o},m:t,inv_m:0===t?0:1/t,inertia:0,inv_inertia:0,elasticity:.99,friction:.01,angFriction:.1,maxSpeed:0,vel:new r.Vector(0,0),acc:new r.Vector(0,0),keyForce:1,angKeyForce:.1,angle:0,angVel:0}},t.bodyUpdater=function(e){e.acc.unit(),e.acc.mult(e.keyForce),e.vel.add(e.acc),e.vel.mult(1-e.friction),0!==e.maxSpeed&&e.vel.mag()>e.maxSpeed&&(e.vel.unit(),e.vel.mult(e.maxSpeed)),e.angVel*=1-e.angFriction}}.apply(t,a),void 0===n||(e.exports=n)},1e3:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(5778),r(5778),r(6752),r(6752),r(9262)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WedgeCreator=t.wedgeUpdater=void 0,t.wedgeUpdater=function(e,t){(0,a.bodyUpdater)(e),e.pos.set(e.pos.x+e.vel.x*t,e.pos.y+e.vel.y*t);var r=e.comp[0];r.pos=e.pos,(0,i.TriangleGetVertices)(r,e.angle+e.angVel),e.angle+=e.angVel},t.WedgeCreator=function(e,t,a,i){var u=[(0,n.TriangleCreator)(e+20*a,t,e-20*a,t-13*a,e-20*a,t+13*a,new s.Vector(e,t))],l=new s.Vector(e,t),A=40*a,c=i*(Math.pow(A,2)+Math.pow(A,2))/12,d=0;return 0!==i&&(d=1/c),o(o({},(0,r.RigidBodyCreatorBase)(1,i,u,l.x,l.y)),{inertia:c,inv_inertia:d})}}.apply(t,a),void 0===n||(e.exports=n)},6752:(e,t,r)=>{var a,n;a=[r,t,r(9702),r(9262)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TriangleGetVertices=t.TriangleCreator=void 0,t.TriangleCreator=function(e,t,n,o,i,s,u){var l=[];l[0]=new a.Vector(e,t),l[1]=new a.Vector(n,o),l[2]=new a.Vector(i,s);var A=u||new a.Vector((l[0].x+l[1].x+l[2].x)/3,(l[0].y+l[1].y+l[2].y)/3),c=new a.Vector(0,0);c.setFromVec(l[0]),c.subtr(A),c.unit();var d=c.clone(),p=[];return p[0]=l[0].clone(),p[1]=l[1].clone(),p[2]=l[2].clone(),p[0].subtr(A),p[1].subtr(A),p[2].subtr(A),{vertex:l,pos:A,dir:c,refDir:d,refDiam:p,angle:0,rotMat:(0,r.CreateMatrix22)(),shape:1}},t.TriangleGetVertices=function(e,t){(0,r.MatrixOpRotMx22)(e.rotMat,t),e.dir=(0,r.MatrixOpMultiplyVec)(e.rotMat,e.refDir,e.dir);for(var a=0;a<3;a++)(0,r.MatrixOpMultiplyVec)(e.rotMat,e.refDiam[a],e.vertex[a]),e.vertex[a].add(e.pos)}}.apply(t,a),void 0===n||(e.exports=n)},108:(e,t,r)=>{var a,n;a=[r,t,r(9262)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircleCreator=void 0,t.CircleCreator=function(e,t,a){return{vertex:[new r.Vector(0,0),new r.Vector(0,0)],pos:new r.Vector(e,t),r:a,shape:0}}}.apply(t,a),void 0===n||(e.exports=n)},5587:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unpack=t.pack=t.getDescriptor=void 0;var r={},a={},n="isVector",o=function(e,t){var r={};for(var a in e)r[a]=e[a];for(var a in t)r[a]=t[a];return r},i=function(e){l=e.keyset,r=o(r,e.packHash),a=o(a,function(e){var t={};for(var r in e)t[e[r]]=r;return t}(e.packHash))};t.getDescriptor=function(){return{keyset:l,packHash:r}};var s="qwertuiopasdfghjklzcvbnm",u=(s+s.toUpperCase()).split(""),l=[0],A=function(e){if("x"===e||"y"===e)return r[e]=e,a[e]=e,e;var t=parseInt(e,10);if(t>=0)return t;if(r[e])return r[e];var n=function(){for(var e=u.length,t=l.map((function(e){return u[e]})).join(""),r=l.length;r>=0;r--){var a=l[r];if(a<e-1){l[r]=a+1,r!==l.length-1&&l[r+1]>0&&(l[r+1]=0);break}if(0===r){l.push(0);for(var n=0;n<l.length;n++)l[n]=0}}return t}();return r[e]=n,a[n]=e,n},c=function(e,t,r){for(var o in e){var i=e[o],s=a[o];if("object"==typeof i)if(i[a[n]]){var u=t[s]={},l=a.x,A=a.y,d=a.id,p=a[n];u[l]=i[l],u[A]=i[A],u[d]=i[d],u[p]=i[p]}else if(Array.isArray(i))t[s]=[],c(i,t[s],r);else if(Array.isArray(t)){var f={};c(i,f,r),t.push(f)}else t[s]={},c(i,t[s],r);else Array.isArray(t)?t.push(i):t[s]=i}},d=function(e,t,r){for(var a in e){var o=e[a];if(null!=o){var i=A(a);if("object"==typeof o)if(o.isVector){var s=t[i]={};s[A("x")]=r?0|o.x:o.x,s[A("y")]=r?0|o.y:o.y,s[A(n)]=o.isVector,void 0!==o.id&&(s[A("id")]=o.id)}else Array.isArray(o)?(t[i]=[],d(o,t[i],r)):(t[i]={},d(o,t[i],r));else if(r&&"number"==typeof o){var u=o;(u+"").indexOf(".")>-1&&(u=.1*Math.round(10*u)),Array.isArray(t)?t.push(u):t[i]=u}else Array.isArray(t)?t.push(o):t[i]=o}}return t};t.pack=function(e,r,a){i(r);var n={};return d(e,n,a),{result:n,descriptor:(0,t.getDescriptor)()}},t.unpack=function(e,t,r){i(t);var a={};return c(e,a,r),a}}.apply(t,[r,t]),void 0===a||(e.exports=a)},2114:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onStage=t.blockCircleRGBA=t.lineVerticalRGBADash=t.lineHorizontalRGBADash=t.line2=t.fillRGBA=t.distort=t.setRGBA=void 0;var r=2*Math.PI;t.setRGBA=function(e,t,r,a,n,o,i,s){if(!(t>e||t<0)){var u=Math.floor(r)*e*4+4*Math.floor(t);s[u]=a,s[u+1]=n,s[u+2]=o,s[u+3]=i}},t.distort=function(e,t,r,a){for(var n=Math.floor(r),o=Math.floor(t),i=n-o,s=[],u=0;u<i;u++)s.push(4*Math.round(-4*u*u*Math.random()*.001)+4);for(var l=0,A=o;A<n;A+=2){var c=s[l];l++;var d=Math.floor(A)*e*4+400,p=Math.floor(A)*e*4+4*Math.floor(e-400);for(u=d;u<p;u+=8)a[u+c]=a[u],a[u+1+c]=a[u+1],a[u+2+c]=a[u+2],a[u+3+c]=a[u+3],Math.random()>.9&&(a[u+e]=a[u],a[u+1+e]=a[u+1],a[u+2+e]=a[u+2],a[u+3+e]=a[u+3])}},t.fillRGBA=function(e,r,a,n,o,i,s,u,l,A,c,d){void 0===c&&(c=0),void 0===d&&(d=0);for(var p=0;p<n;p++)for(var f=0;f<o;f++)(0,t.setRGBA)(e,r+p+c,a+f+d,i,s,u,l,A)},t.line2=function(e,r,a,n,o,i,s,u,l,A,c){void 0===c&&(c=1),function(r,a,n,o){for(var d=Math.abs(n-r),p=Math.abs(o-a),f=r<n?1:-1,h=a<o?1:-1,v=d-p;;){if(c>1){(0,t.setRGBA)(e,r,a,i,s,u,l,A);for(var g=0;g<c;g++)(0,t.setRGBA)(e,r+g,a,i,s,u,l,A),(0,t.setRGBA)(e,r,a+g,i,s,u,l,A)}else(0,t.setRGBA)(e,r,a,i,s,u,l,A);if(r==n&&a==o)break;var y=2*v;y>-p&&(v-=p,r+=f),y<d&&(v+=d,a+=h)}}(Math.floor(r),Math.floor(a),Math.floor(n),Math.floor(o))},t.lineHorizontalRGBADash=function(e,r,a,n,o,i,s,u,l,A,c,d,p){void 0===A&&(A=1),void 0===c&&(c=0),void 0===d&&(d=0),void 0===p&&(p=0);for(var f=0,h=r-c;h<n-p;h++)if(++f<=c){if(h+p>r)for(var v=0;v<A;v++)(0,t.setRGBA)(e,h+p,a+v,o,i,s,u,l)}else f>c+d&&(f=0)},t.lineVerticalRGBADash=function(e,r,a,n,o,i,s,u,l,A,c,d,p){void 0===A&&(A=1),void 0===c&&(c=0),void 0===d&&(d=0),void 0===p&&(p=0);for(var f=0,h=a-c;h<n-p;h++)if(++f<c){if(h+p>a)for(var v=0;v<A;v++)(0,t.setRGBA)(e,r+v,h+p,o,i,s,u,l)}else f>c+d&&(f=0)},t.blockCircleRGBA=function(e,a,n,o,i,s,u,l,A,c,d,p,f,h,v,g,y,m,_,x){var S,T,E,M;void 0===p&&(p=0),void 0===f&&(f=0),void 0===h&&(h=0),void 0===y&&(y=0),void 0===m&&(m=e),void 0===_&&(_=0),void 0===x&&(x=e);var b=e;for(S=n+Math.cos(r*(b/e)+i)*a|0,T=o+Math.sin(r*(b/e)+i)*a|0,E=0,M=0;b>-1;--b)E=n+Math.cos(r*(b/e)+i)*a|0,M=o+Math.sin(r*(b/e)+i)*a|0,g&&b%2!=1||!(b>=y&&b<=m||b>=_&&b<=x)||(0,t.line2)(d,S-f,T-h,E-f,M-h,u,l,A,c,s,v||(a>40?6:2)),S=E,T=M},t.onStage=function(e,t,r,a){void 0===a&&(a=0);var n=e.SX,o=e.SY,i=e.SW,s=e.SH;return t>n-a&&t<n+i+a&&r>o-a&&r<o+s+a}}.apply(t,[r,t]),void 0===a||(e.exports=a)},7561:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(9262),r(1706),r(1706),r(199),r(7185),r(7967),r(7899)],n=function(e,t,r,a,n,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawDebug=t.toClipSpaceY=t.toClipSpaceX=t.drawColor=t.drawColorMapSingle=t.drawColorMap=t.setupBuffers=t.unitePolyColorMaps=t.getColorMapColorKey=t.crossHair45degLines=t.crossHair45deg=t.crossHairLinesTech=t.crossHairLines=t.crossHair=t.addToColorMap=t.inPerimiter=t.onStage=t.blockCirclePoly=t.createBlockCirclePolySingleWall=t.drawRectPoly=t.drawTriangle=t.lineVerticalRGBADash=t.lineHorizontalRGBADash=t.line2PolyHalf=t.line2PolyMiteredAuto=t.MiterType=t.line2PolyTriangleRotateableFilled=t.line2PolyTriangleRotateable=t.line2PolyTriangle=t.line2PolyCone=t.line2PolyLabeled=t.line2Poly=t.LineThicknessWeight=t.fillPoly=t.fillPolyForFan=t.setTriangle=t.rectangleBorderPoly=t.rectangleRotated45Poly=t.rectanglePolyRect=t.rectanglePoly=t.readPerformance=t.cutoffRectBGTris=t.cutoffRect=t.setPoly=void 0,n=o(n),i=o(i),u=o(u);var A=2*Math.PI;t.setPoly=function(e,t,r,a){var n=t,o=r,i=n+1,s=o+1;return a.push(n,o,i,o,n,s,n,s,i,o,i,s),6},t.cutoffRect=function(e,r,a,n,o,i,s){i.push(e,r,e+a,r),i.push(e,r+n,e+a-o,r+n),i.push(e,r,e,r+n),i.push(e+a,r,e+a,r+n-o),i.push(e+a-o,r+n,e+a,r+n-o),s&&(0,t.cutoffRectBGTris)(e,r,a,n,o,s)},t.cutoffRectBGTris=function(e,t,r,a,n,o){o.push(e,t,e+r,t,e,t+a),o.push(e,t+a,e+r-n,t+a,e+r,t),o.push(e+r-n,t+a,e+r,t+a-n,e+r,t)};var c,d={addToColorMap:0,drawColorMap:0,drawColor:0,drawColorMapSingle:0,drawColorMapCalls:0,drawColorMapSingleTimings:0,vertices:0},p={addToColorMap:0,drawColorMap:0,drawColor:0,drawColorMapSingle:0,drawColorMapCalls:0,drawColorMapSingleTimings:0,vertices:0};t.readPerformance=function(e){return void 0===e&&(e=!0),p.drawColor=d.drawColor,p.drawColorMap=d.drawColorMap,p.drawColorMapCalls=d.drawColorMapCalls,p.drawColorMapSingle=d.drawColorMapSingle,p.addToColorMap=d.addToColorMap,p.vertices=d.vertices,p.drawColorMapSingleTimings=d.drawColorMapSingleTimings,e&&(d.drawColor=0,d.drawColorMap=0,d.drawColorMapCalls=0,d.drawColorMapSingle=0,d.addToColorMap=0,d.drawColorMapSingleTimings=0,d.vertices=0),p},t.rectanglePoly=function(e,t,r,a,n){n.push(e,t,e+r,t,e,t+a,e+r,t,e+r,t+a,e,t+a)},t.rectanglePolyRect=function(e,t,r,a,n){void 0===n&&(n=!1);var o=e.x-t,i=e.y-r,s=e.width,u=e.height;a.push(o,i,o+s,i,o,i+u,o+s,i+u,o,i,o,i+u,o+s,i,o+s,i+u),n&&a.push(o,i,o+s,i+u,o,i+u,o+s,i)},t.rectangleRotated45Poly=function(e,t,r,a){a.push(e-r,t,e,t-r,e+r,t,e-r,t,e,t+r,e+r,t)},t.rectangleBorderPoly=function(e,r,a,n,o,i){var s=o[0];(0,t.line2Poly)(e,r+.5*s,e+a,r+.5*s,i,s),s=o[1],(0,t.line2Poly)(e,r+n-.5*s,e+a,r+n-.5*s,i,s),s=o[2],(0,t.line2Poly)(e+.5*s,r,e+.5*s,r+n,i,s),s=o[3],(0,t.line2Poly)(e+a-.5*s,r,e+a-.5*s,r+n,i,s)},t.setTriangle=function(e,t,r,a){void 0===a&&(a=1),r.push(e-a,t-a,e+a,t-a,e,t)},t.fillPolyForFan=function(e,t,r,a,n,o,i,s){void 0===i&&(i=0),void 0===s&&(s=0);var u=t+i,l=r+s,A=u+a,c=l+n;o.push(u,l,A,l,u,c,u,c,A,l,A,c)},t.fillPoly=function(e,t,r,a,n,o,i,s){void 0===i&&(i=0),void 0===s&&(s=0);var u=t+i,l=r+s,A=u+a,c=l+n;return o.push(u,l,A,l,u,c,u,c,A,l,A,c),6},function(e){e[e.Center=0]="Center",e[e.Left=1]="Left",e[e.Right=2]="Right"}(c||(t.LineThicknessWeight=c={}));var f=new r.Vector(0,0),h=.5*Math.PI;t.line2Poly=function(e,t,r,a,n,o,i){void 0===o&&(o=2),void 0===i&&(i=c.Center);var s=Math.atan2(t-a,e-r);i!==c.Center&&(o*=2),f.x=.5*o,f.y=.5*o,f.setAngle(s+(i===c.Left?-h:h));var u=e+f.x,l=t+f.y,A=r+f.x,d=a+f.y;return i===c.Center&&(e-=f.x,t-=f.y,r-=f.x,a-=f.y),n.push(e,t,r,a,u,l,r,a,u,l,A,d),6},t.line2PolyLabeled=function(e,t,r,o,A,d,p,v){void 0===p&&(p=2),void 0===v&&(v=c.Center);var g=Math.atan2(t-o,e-r);v!==c.Center&&(p*=2),f.x=.5*p,f.y=.5*p,f.setAngle(g+(v===c.Left?-h:h));var y=e+f.x,m=t+f.y,_=r+f.x,x=o+f.y;v===c.Center&&(e-=f.x,t-=f.y,r-=f.x,o-=f.y),A.push(e,t,r,o,y,m,r,o,y,m,_,x);var S=(0,s.midpointN)(e,r),T=(0,s.midpointN)(t,o);return u.default.addGL((0,i.default)().gui.gl,(0,n.default)(a.GLctx.Texture,(0,i.default)().gui.gl),u.default.create(d,l.TEXT_SIZE_SMALL,"w"),S,T,(0,i.default)().gui),6},t.line2PolyCone=function(e,t,r,a,n,o,i){var s=Math.atan2(t-a,e-r);f.x=.5*o,f.y=.5*o,f.setAngle(s+h);var u=e+f.x,l=t+f.y;e-=f.x,t-=f.y,f.x=.5*i,f.y=.5*i,f.setAngle(s+h);var A=r+f.x,c=a+f.y;return r-=f.x,a-=f.y,n.push(e,t,r,a,u,l,r,a,u,l,A,c),6},t.line2PolyTriangle=function(e,t,r,a,n,o){void 0===o&&(o=2);var i=Math.atan2(t-a,e-r);f.x=.5*o,f.y=.5*o,f.setAngle(i+h);var s=e+f.x,u=t+f.y;return n.push(e,t,r,a,s,u),6};var v,g=new r.Vector(0,0),y=new r.Vector(0,0),m=new r.Vector(0,0);t.line2PolyTriangleRotateable=function(e,r,a,n,o,i){void 0===i&&(i=2),g.set(a,0),g.setAngle(o),g.addXY(e,r),y.set(a,0),y.setAngle(o-.75*Math.PI),y.addXY(e,r),m.set(a,0),m.setAngle(o+.75*Math.PI),m.addXY(e,r),(0,t.line2Poly)(g.x,g.y,y.x,y.y,n,i),(0,t.line2Poly)(g.x,g.y,m.x,m.y,n,i),(0,t.line2Poly)(y.x,y.y,m.x,m.y,n,i)},t.line2PolyTriangleRotateableFilled=function(e,t,r,a,n){g.set(r,0),g.setAngle(n),g.addXY(e,t),y.set(r,0),y.setAngle(n-.75*Math.PI),y.addXY(e,t),m.set(r,0),m.setAngle(n+.75*Math.PI),m.addXY(e,t),a.push(g.x,g.y,y.x,y.y,m.x,m.y)},function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight"}(v||(t.MiterType=v={}));var _=.25*Math.PI,x=new r.Vector(0,0);t.line2PolyMiteredAuto=function(e,t,r,a,n,o){var i=Math.atan2(t-a,e-r);f.x=.5*o,f.y=.5*o,x.x=.5*o,x.y=.5*o,f.setAngle(i+h),x.setAngle(i+_);var s=e+x.x,u=t+x.y;x.setAngle(i+_+h);var l=r+x.x,A=a+x.y;return e-=f.x,t-=f.y,r-=f.x,a-=f.y,n.push(e,t,r,a,s,u,r,a,s,u,l,A),6},t.line2PolyHalf=function(e,t,r,a,n,o){void 0===o&&(o=2);var i=Math.atan2(t-a,e-r);f.x=.5*o,f.y=.5*o,f.setAngle(i+h);var s=e+f.x,u=t+f.y;return e-=f.x,t-=f.y,r-=f.x,a-=f.y,n.push(e,t,r,a,s,u),6},t.lineHorizontalRGBADash=function(e,r,a,n,o,i,s,u,l){void 0===i&&(i=1),void 0===s&&(s=0),void 0===u&&(u=0),void 0===l&&(l=0);for(var A=0,c=r-s;c<n-l;c++)++A<=s?c+l>r&&(0,t.line2Poly)(c+l,a,c+l,a+i,o):A>s+u&&(A=0)},t.lineVerticalRGBADash=function(e,r,a,n,o,i,s,u,l){void 0===i&&(i=1),void 0===s&&(s=0),void 0===u&&(u=0),void 0===l&&(l=0);for(var A=0,c=a-s;c<n-l;c++)++A<s?c+l>a&&(0,t.line2Poly)(r,c+l,r+i,c+l,o):A>s+u&&(A=0)},t.drawTriangle=function(e,t,r,a,n,o){o.push(e-r-a,t-r-n,e-r-a,t+r-n,e+r-a,t-n)},t.drawRectPoly=function(e,r,a,n,o){(0,t.line2Poly)(e.x-r,e.y-a,e.x+e.width-r,e.y-a,n,o),(0,t.line2Poly)(e.x-r,e.y-a,e.x-r,e.y+e.height-a,n,o),(0,t.line2Poly)(e.x+e.width-r,e.y-a,e.x+e.width-r,e.y+e.height-a,n,o),(0,t.line2Poly)(e.x+e.width-r,e.y+e.height-a,e.x-r,e.y+e.height-a,n,o)},t.createBlockCirclePolySingleWall=function(e,t,r,a,n,o,i){for(var s=a,u=e+Math.cos(A*(s/a)+n)*o|0,l=t+Math.sin(A*(s/a)+n)*o|0;s>-1;--s){var c=e+Math.cos(A*(s/a)+n)*o|0,d=t+Math.sin(A*(s/a)+n)*o|0;r.push(u,l,c,d),i&&r.push(e,t),u=c,l=d}},t.blockCirclePoly=function(e,t,r,a,n,o,i,s,u,l,c,d,p,f,h){var v,g,y,m,_,x,S,T;void 0===i&&(i=0),void 0===s&&(s=0),void 0===u&&(u=0),void 0===l&&(l=1),void 0===d&&(d=0),void 0===p&&(p=e),void 0===f&&(f=0),void 0===h&&(h=e);var E=e;for(v=r+Math.cos(A*(E/e)+n)*t|0,g=a+Math.sin(A*(E/e)+n)*t|0,_=r+Math.cos(A*(E/e)+n)*(t-l)|0,x=a+Math.sin(A*(E/e)+n)*(t-l)|0,y=0,m=0;E>-1;--E){if(y=r+Math.cos(A*(E/e)+n)*t|0,m=a+Math.sin(A*(E/e)+n)*t|0,S=r+Math.cos(A*(E/e)+n)*(t-l)|0,T=a+Math.sin(A*(E/e)+n)*(t-l)|0,(!c||E%2==1)&&(E>=d&&E<=p||E>=f&&E<=h)){var M=v-s,b=g-u,I=y-s,L=m-u,P=S-s,w=T-u,R=_-s,O=x-u;o.push(M,b,I,L,P,w,M,b,P,w,R,O)}v=y,g=m,_=S,x=T}return 0},t.onStage=function(e,t,r,a){void 0===a&&(a=0);var n=e.SX,o=e.SY,i=e.SW,s=e.SH;return t>n-a&&t<n+i+a&&r>o-a&&r<o+s+a},t.inPerimiter=function(e,t,r,a,n){void 0===n&&(n=0);var o=t.x-.5*r,i=t.x+.5*r,s=t.y-.5*a,u=t.y+.5*a;return e.x+n>o&&e.x-n<i&&e.y+n>s&&e.y-n<u},t.addToColorMap=function(e,t,r,a,n,o,i){void 0===i&&(i=!1);var s=e.length,u=0===s?s:e[s-1].stop+e[s-1].start,l=t.length-u;(l>0||i)&&(d.addToColorMap++,e.push({start:u,stop:l,r,g:a,b:n,a:o}))},t.crossHair=function(e,r,a,n,o,i,s){void 0===n&&(n=6),void 0===o&&(o=1),void 0===i&&(i=0),void 0===s&&(s=0);var u=.5*n;(0,t.line2Poly)(e-u-i,r-s,e+u-i,r-s,a,o),(0,t.line2Poly)(e-i,r-u-s,e-i,r+u-s,a,o)},t.crossHairLines=function(e,t,r,a,n,o){void 0===a&&(a=6),void 0===n&&(n=0),void 0===o&&(o=0);var i=.5*a;r.push(e-i-n,t-o,e+i-n,t-o),r.push(e-n,t-i-o,e-n,t+i-o)},t.crossHairLinesTech=function(e,t,r,a,n,o){void 0===a&&(a=6),void 0===n&&(n=0),void 0===o&&(o=0);var i=.5*a;r.push(e-i-n,t-o,e+i-n,t-o),r.push(e-n,t-i-o,e-n,t+i-o)},t.crossHair45deg=function(e,r,a,n,o,i,s){void 0===n&&(n=6),void 0===o&&(o=1),void 0===i&&(i=0),void 0===s&&(s=0);var u=.5*n;(0,t.line2Poly)(e-u-i,r-u-s,e+u-i,r+u-s,a,o),(0,t.line2Poly)(e+u-i,r-u-s,e-u-i,r+u-s,a,o)},t.crossHair45degLines=function(e,t,r,a,n,o,i){void 0===a&&(a=6),void 0===n&&(n=1),void 0===o&&(o=0),void 0===i&&(i=0);var s=.5*a;r.push(e-s-o,t-s-i,e+s-o,t+s-i),r.push(e+s-o,t+s-i,e-s-o,t-s-i)},t.getColorMapColorKey=function(e,t,r,a){return e+"_"+t+"_"+r+"_"+a},t.unitePolyColorMaps=function(e,r){for(var a=e.length,n=[],o=[],i=e[0].length,s=0;s<i;s++){for(var u=0;u<a;u++){var l=e[u][s],A=r[u].slice(l.start,l.start+l.stop);o.push.apply(o,A)}var c=e[0][s];(0,t.addToColorMap)(n,o,c.r,c.g,c.b,c.a)}return{colorMap:n,polys:o}};var S=null,T=null;t.setupBuffers=function(e){S=e.createBuffer(),T=e.createBuffer()},t.drawColorMap=function(e,t,r,n,o){if(void 0===o&&(o=n.TRIANGLES),0!==t.length){d.drawColorMap++,d.vertices+=t.length;var i=(0,a.GLUniformLocation)(n,"u_color");n.bufferData(n.ARRAY_BUFFER,M(t),n.STREAM_DRAW);for(var s=e.length,u=0;u<s;u++){var l=e[u];l.stop>0&&(d.drawColorMapCalls++,n.uniform4f(i,l.r,l.g,l.b,l.a),n.drawArrays(o,.5*l.start,.5*l.stop))}}},t.drawColorMapSingle=function(e,t,r,o){if(void 0===o&&(o=r.TRIANGLES),0!==t.length){var i=performance.now();d.vertices+=t.length,d.drawColorMapSingle++;for(var s=M(t,.5*t.length*4),u=0,l=e.length,A=0;A<l;A++){var c=e[A];if(c.stop>0)for(var p=.5*c.stop,f=0;f<p;f++)s[u]=c.r,s[u+1]=c.g,s[u+2]=c.b,s[u+3]=c.a,u+=4}(0,n.default)(a.GLctx.VerticesMultiColor,r);var h=(0,a.GLAttribLocations)(r,"a_color");r.bindBuffer(r.ARRAY_BUFFER,S),r.bufferData(r.ARRAY_BUFFER,s,r.STREAM_DRAW),r.enableVertexAttribArray(h),r.vertexAttribPointer(h,4,r.FLOAT,!1,0,0);var v=(0,a.GLAttribLocations)(r,"a_position");if(r.bindBuffer(r.ARRAY_BUFFER,T),r.bufferData(r.ARRAY_BUFFER,M(t),r.STREAM_DRAW),r.enableVertexAttribArray(v),r.vertexAttribPointer(v,2,r.FLOAT,!1,0,0),r.drawArrays(o,0,.5*t.length),t.length%2!=0)throw"Err uneven count";var g=performance.now()-i;d.drawColorMapSingleTimings+=g}},t.drawColor=function(e,t,r,n,o,i,s){if(void 0===s&&(s=t.TRIANGLES),e.length>0){d.drawColor++,d.vertices+=e.length;var u=(0,a.GLUniformLocation)(t,"u_color"),l=M(e);if(t.bufferData(t.ARRAY_BUFFER,l,t.STREAM_DRAW),t.uniform4f(u,r,n,o,i),t.drawArrays(s,0,e.length/2),e.length%2!=0)throw"Err uneven count"}};var E={};!function(){for(var e=10;e<4e3;e+=10)E[e]=new Float32Array(e)}();var M=function(e,t){void 0===t&&(t=e.length);var r=10*Math.ceil(.1*t),a=E[r];if(a)return a.set(e),a;var n=new Float32Array(r);return r<1e3&&(E[r]=n),n.set(e),n};t.toClipSpaceX=function(e,t){return e/t*2-1},t.toClipSpaceY=function(e,t){return-1*(e/t*2-1)},t.drawDebug=function(e){e((0,i.default)().gui)}}.apply(t,a),void 0===n||(e.exports=n)},107:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClearHard=void 0;var r=1;t.default=function(e){var t=e.frame;e.WW,e.WH,e.SW,e.SH,t.length,function(e,t){for(var r=e.length,a=t;a<r;a+=4)e[a]=e[a]-20,e[a+1]=e[a+1]-20,e[a+2]=e[a+2]-20,e[a+3]=255}(t,4*r),--r<0&&(r=1)},t.ClearHard=function(e){for(var t=e.frame,r=e.SW*e.SH*4,a=0;a<r;a+=4)t[a]=0,t[a+1]=0,t[a+2]=0,t[a+3]=255}}.apply(t,[r,t]),void 0===a||(e.exports=a)},7967:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(8684),r(1706),r(7899)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r);var i=function(){function e(){}return e.createUnitializedTextBuffers=function(e,t,r){void 0===r&&(r=!1),window.textBuffers=this.buffer,this.INITIALIZATION=!1;var a=[];for(var n in this.initializationBuffer)a.push(n);this.initalizer(a,a.length,e,t,r)},e.initalizer=function(e,t,r,a,n){var o=this;void 0===n&&(n=!1);var i=function(){var i=e.pop(),s=i.split(o.CACHE_SPLIT_KEY),u=o.create(s[0],parseInt(s[1],10),s[2],1===parseInt(s[3],10),!1,a),l=o.buffer[i];l.frame=u.frame,l.rgbIndex=u.rgbIndex,l.w=u.w,l.h=u.h,l.length=u.length,l.texture=u.texture,e.length>0?(r(Math.abs(e.length/t-1),!1,e.length),o.initalizer(e,t,r,a)):n?(o.IGNORE_CACHE=!1,r(1,!0,t)):setTimeout((function(){o.IGNORE_CACHE=!1,r(1,!0,t)}),2)};n?i():setTimeout((function(){setTimeout(i,0)}),0)},e.createSplitted=function(e,t,r,a,n,o,i){void 0===a&&(a="_"),void 0===n&&(n=!1),void 0===o&&(o=!1);var s=[],u=e.split("");a&&u.push(a);for(var l=0;l<u.length;l++)s.push(this.create(u[l],t,r,n,o,i));return s},e.create=function(e,t,a,o,i,s,u){if(void 0===o&&(o=!1),void 0===i&&(i=!1),void 0===u&&(u=!1),e.indexOf(this.CACHE_SPLIT_KEY)>-1)throw new Error("illeagal charS "+this.CACHE_SPLIT_KEY+" at text create");var l=e+this.CACHE_SPLIT_KEY+t+this.CACHE_SPLIT_KEY+a+this.CACHE_SPLIT_KEY+(o?"1":"0");if(this.INITIALIZATION&&!i){this.initializationBuffer[l]=l;var A={frame:null,rgbIndex:0,w:0,h:0,length:0,imageData:null,texture:{width:0,height:0,texture:null,index:0},str:e};return this.buffer[l]?this.buffer[l]:(u||(this.buffer[l]=A),A)}var c=this.buffer[l];if(c&&!this.IGNORE_CACHE)return c;this.INITIALIZATION||this.IGNORE_CACHE||i||this.NumErrTypeWarns<this.MaxErrTypeWarns&&(console.warn("text created runtime:",'"'+e+'"',"size: "+t),this.NumErrTypeWarns++,this.NumErrTypeWarns===this.MaxErrTypeWarns&&console.warn("max text errors reported. Ignoring rest"));var d,p=0,f=0,h=0;switch(a){case"r":p=255,d=0;break;case"g":f=255,d=1;break;case"b":h=255,d=2;break;case"z":d=0;break;case"w":p=255,f=255,h=255,d=0;break;case"y":p=255,f=255,h=0,d=0}var v=document.createElement("canvas");v.height=t;var g=v.getContext("2d"),y=t<n.TEXT_SIZE_MEDIUM?"monospace":"dorito",m="rgba("+p+","+f+","+h+",255)";g.font="100 "+t+"px "+y,g.fillStyle=m;var _=g.measureText(e);v.width=_.width+.3*t,g=v.getContext("2d"),o&&(g.fillStyle=m,g.fillRect(0,0,v.width,v.height),g.fillStyle="black",g.fillRect(2,2,v.width-4,v.height-4)),g.font="100 "+t+"px "+y,g.fillStyle=m,g.fillText(e,5,.8*t);var x=g.getImageData(0,0,v.width,v.height),S=(0,r.default)().global_gl,T={imageData:x,frame:x.data,rgbIndex:d,w:v.width,h:v.height,length:x.data.length,texture:S?this.imageDataToTexture(S,x):null,str:e};return this.IGNORE_CACHE&&!i||u||(this.buffer[l]=T),T},e.addList=function(t,r,a,n,o,i,s,u){void 0===i&&(i=!1),void 0===s&&(s=1),void 0===u&&(u=.8);var l=a.length,A=n;if(i)for(var c=0;c<l;c++){var d=a[c];e.addDistorted(t,r,d,A,o,s,u),A+=d.w}else for(c=0;c<l;c++)d=a[c],e.add(t,r,d,A,o),A+=d.w},e.addListGL=function(t,r,a,n,o,i,s){void 0===s&&(s=!1);for(var u=a.length,l=n,A=0;A<u;A++){var c=a[A];e.addGL(t,r,c,l,o,i,s),l+=c.w}},e.printListGL=function(e,t,r,a,n,o,i,s,u,l){void 0===u&&(u=!1),void 0===l&&(l=1);for(var A=Math.min(o,r.length-1),c=[],d=0;d<A;d++)c.push(r[d]);i&&c.push(r[r.length-1]),this.addListGL(e,t,c,a,n,s)},e.printList=function(e,t,r,a,n,o,i,s,u){void 0===s&&(s=!1),void 0===u&&(u=1);for(var l=Math.min(o,r.length-1),A=[],c=0;c<l;c++)A.push(r[c]);i&&A.push(r[r.length-1]),this.addList(e,t,A,a,n,s,u)},e.measureBuffers=function(e){for(var t=e.length,r=0,a=0;a<t;a++){var n=e[a];!n||n.w,r+=n.w}return r},e.addDistorted=function(t,r,a,n,o,i,s){void 0===i&&(i=1),void 0===s&&(s=.8),e.add(t,r,a,n+Math.random()*i*6,o+Math.random()*i*6,Math.random()>s?Math.floor(a.w*(.5*Math.random()+.5)):Math.random()>s?Math.floor(a.w*(.0025*Math.random()+.9975)):a.w,Math.random()>s?Math.floor(a.length*Math.random()):a.length,Math.random()>s?Math.floor(a.length*Math.random()*.4):0)},e.add=function(e,t,r,a,n,o,i,s){void 0===o&&(o=r.w),void 0===i&&(i=r.length),void 0===s&&(s=0);for(var u=r.frame,l=r.rgbIndex,A=o,c=0,d=0,p=s;p<i;p+=4){var f=Math.floor(a+d);if(f<e&&f>0){var h=Math.floor(n+c)*e*4+4*f,v=u[p+l];v&&(t[h+l]=v)}d>=A&&(c++,d=0),d++}},e.getTextsBatched=function(){return null},e.addGLBatched=function(e,t,r,a,n){void 0===n&&(n=1),this.textBatch[e]||(this.textBatch[e]=[]),this.textBatch[e].push({program:e,buffer:t,dstX:r,dstY:a,tx:n})},e.addGL=function(e,t,r,n,o,i,s){void 0===s&&(s=!1);var u=r.texture.texture,l=r.texture.width,A=r.texture.height;e.bindTexture(e.TEXTURE_2D,u);var c=(0,a.GLAttribLocations)(e,"a_texcoord"),d=(0,a.GLUniformLocation)(e,"u_matrix"),p=(0,a.GLUniformLocation)(e,"u_texture"),f=(0,a.GLUniformLocation)(e,"distortionStart"),h=(0,a.GLUniformLocation)(e,"distortionEnd");e.uniform1f(f,Math.random()),e.uniform1f(h,Math.random());var v=window.m4;e.enableVertexAttribArray(c),e.vertexAttribPointer(c,2,e.FLOAT,!1,0,0);var g=v.orthographic(0,s?i.SW:e.canvas.width,s?i.SH:e.canvas.height,0,-1,1);g=v.translate(g,n,o,0),g=v.scale(g,l,A,1),e.uniformMatrix4fv(d,!1,g),e.uniform1i(p,0),e.drawArrays(e.TRIANGLES,0,6)},e.imageDataToTexture=function(e,t){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);var a={width:t.width,height:t.height,texture:r,index:this.textureIndex};return this.textureIndex++,e.bindTexture(e.TEXTURE_2D,a.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),a},e.textBatch={},e.textureIndex=0,e.MaxErrTypeWarns=4,e.NumErrTypeWarns=0,e.positionBuffer=null,e.positions=new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),e.texcoords=new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),e.INITIALIZATION=!0,e.IGNORE_CACHE=!0,e.initializationBuffer={},e.buffer={},e.CACHE_SPLIT_KEY="[-_-]",e.addNumberCacheable=function(t,r,a){for(var n=(t+"").split(""),o=n.length,i=[],s=0;s<o;s++)i.push(e.create(n[s],r,a));return i},e}();t.default=i}.apply(t,a),void 0===n||(e.exports=n)},4157:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(8684),r(1706)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r);var n=function(){function e(){}return e.create=function(e,t,a,n){void 0===a&&(a=!1);var o=t.getContext("2d").getImageData(0,0,t.width,t.height),i=(0,r.default)().global_gl,s={imageData:o,w:t.width,h:t.height,length:o.data.length,texture:this.imageDataToTexture(i,o),str:e};return this.IGNORE_CACHE&&!a||(this.buffer[e]=s),s},e.addGL=function(e,t,r,n,o,i,s,u){void 0===s&&(s=1),void 0===u&&(u=1);var l=r.texture.texture,A=r.texture.width,c=r.texture.height;e.bindTexture(e.TEXTURE_2D,l);var d=(0,a.GLAttribLocations)(e,"a_texcoord"),p=(0,a.GLUniformLocation)(e,"u_matrix"),f=(0,a.GLUniformLocation)(e,"u_texture"),h=(0,a.GLUniformLocation)(e,"distortionStart"),v=(0,a.GLUniformLocation)(e,"distortionEnd");e.uniform1f(h,Math.random()),e.uniform1f(v,Math.random());var g=window.m4;e.enableVertexAttribArray(d),e.vertexAttribPointer(d,2,e.FLOAT,!1,0,0);var y=g.orthographic(0,i.SW,i.SH,0,-1,1);y=g.translate(y,n-r.texture.width*s*.5,o-r.texture.height*u*.5,0),y=g.scale(y,A*s,c*u,1),e.uniformMatrix4fv(p,!1,y),e.uniform1i(f,0),e.drawArrays(e.TRIANGLES,0,6)},e.imageDataToTexture=function(e,t){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);var a={width:t.width,height:t.height,texture:r,index:this.textureIndex};return this.textureIndex++,e.bindTexture(e.TEXTURE_2D,a.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),a},e.textBatch={},e.textureIndex=0,e.MaxErrTypeWarns=4,e.NumErrTypeWarns=0,e.positionBuffer=null,e.positions=new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),e.texcoords=new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),e.INITIALIZATION=!0,e.IGNORE_CACHE=!0,e.initializationBuffer={},e.buffer={},e.CACHE_SPLIT_KEY="[-_-]",e}();t.default=n}.apply(t,a),void 0===n||(e.exports=n)},1706:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(2261)],n=function(e,t,r){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentProgramGLctx=t.GLBufferCached=t.GLCTXreadPerformance=t.GLAttribLocations=t.GLAttribBatchSwitch=t.GLAttribNameLookup=t.GLUniformLocation=t.compileProgram=t.zoom=t.debugGetProgram=t.programToString=t.GLctx=void 0,function(e){e[e.Vertices=0]="Vertices",e[e.VerticesOverlay=1]="VerticesOverlay",e[e.VerticesMultiColor=2]="VerticesMultiColor",e[e.VerticesFastAlpha=3]="VerticesFastAlpha",e[e.Vertices3d=4]="Vertices3d",e[e.Texture=5]="Texture",e[e.TextureCombineMultiply=6]="TextureCombineMultiply",e[e.TextureDist=7]="TextureDist",e[e.TextureBlur=8]="TextureBlur",e[e.GameBufferDist=9]="GameBufferDist",e[e.GameBufferNoise=10]="GameBufferNoise",e[e.VerticesGradient=11]="VerticesGradient",e[e.VerticesGradientDarkMultply=12]="VerticesGradientDarkMultply",e[e.VerticesGradient2tone=13]="VerticesGradient2tone",e[e.VerticesGradientBLACK=14]="VerticesGradientBLACK",e[e.particleUpdate=15]="particleUpdate",e[e.particleRender=16]="particleRender",e[e.VerticesGradientLinear=17]="VerticesGradientLinear",e[e.EdgeGradient=18]="EdgeGradient",e[e.PerlinNoiseFog=19]="PerlinNoiseFog"}(a||(t.GLctx=a={})),t.programToString=function(e){switch(e){case a.Vertices:return"vertices";case a.VerticesOverlay:return"vertices overlay";case a.VerticesMultiColor:return"vertices multicolor";case a.VerticesFastAlpha:return"vertices fastalpha";case a.Vertices3d:return"vertices 3d";case a.Texture:return"texture";case a.TextureCombineMultiply:return"texture combineMultiply";case a.TextureDist:return"texture dist";case a.GameBufferDist:return"GB dist";case a.GameBufferNoise:return"GB noise";case a.VerticesGradient:return"vertices gradient";case a.VerticesGradientDarkMultply:return"vertices gradient dark multiply";case a.VerticesGradient2tone:return"vertices gradient 2tone";case a.VerticesGradientBLACK:return"vertices gradientBLACK";case a.particleUpdate:return"particle update";case a.particleRender:return"particle render";case a.VerticesGradientLinear:return"vertices gradient linear";case a.EdgeGradient:return"edge gradient";case a.PerlinNoiseFog:return"perlin noise FOG";case a.TextureBlur:return"texture blur";default:return"unknwon: "+e}};var n=a.Vertices,i={},s=new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),u=new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]);t.debugGetProgram=function(e){return i[e]},t.zoom=function(e,n){void 0===n&&(n=!1);var o=e.game,i=e.gl;(o.SW!==o.currentResW||o.SH!==o.currentResH||n)&&[a.Vertices,a.Texture,a.TextureDist,a.VerticesGradient,a.VerticesGradientBLACK,a.VerticesGradientLinear,a.EdgeGradient].map((function(n){p(n,i);var s=(0,t.GLUniformLocation)(i,"u_resolution"),u=(0,t.GLUniformLocation)(i,"u_pointSize"),l=e;l.game.zoomTXinverted&&i.uniform1f(u,(0,r.map)(l.game.zoomTXinverted,1,4,1,2,!0)),i.uniform2f(s,o.SW,o.SH),o.currentResW=o.SW,o.currentResH=o.SH,p(a.VerticesGradient,i);var A=(0,t.GLUniformLocation)(i,"u_resolution");i.uniform2f(A,o.SW,o.SH),o.currentResW=o.SW,o.currentResH=o.SH}))},t.compileProgram=function(e,t,r,a,n,o,s){var u=window.webglUtils.createProgramFromSources(t,[r.vertex,r.fragment]);if(i[e]=u,t.useProgram(u),null!=s&&t.transformFeedbackVaryings(u,s,t.INTERLEAVED_ATTRIBS),t.linkProgram(u),a&&n){var l=t.getAttribLocation(u,"a_position"),A=t.getUniformLocation(u,"u_resolution");t.getUniformLocation(u,"u_color"),t.uniform2f(A,a,n);var c=t.createBuffer();if(t.bindBuffer(t.ARRAY_BUFFER,c),t.enableVertexAttribArray(l),o){var d=window.m4,p=45*Math.PI/180,f=a/n,h=d.perspective(p,f,.1,100),v=t.getUniformLocation(u,"uProjectionMatrix");t.uniformMatrix4fv(v,!1,h),t.vertexAttribPointer(l,3,t.FLOAT,!1,0,0)}else t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0);t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)}return u};var l={},A={};t.GLUniformLocation=function(e,t){var r=l[n];if(r){var a=r[t];if(a)return a}else l[n]={};var o=i[n],s=e.getUniformLocation(o,t);if(-1===s)throw" unable to get uniform "+t+" @ "+n;return l[n][t]=s,s},t.GLAttribNameLookup=function(e,t){void 0===t&&(t=n);var r=A[t];if(r)for(var a in r)if(r[a]===e)return a},t.GLAttribBatchSwitch=function(e,t,r){void 0===r&&(r=!1),console.log("Attrib switch: enable?"+r,"program:* "+t);var a=A[t];if(a)for(var n in a)r?(console.log("SHADER*:"+t+" enables: "+n),e.enableVertexAttribArray(a[n])):(console.log("SHADER*:"+t+" disables: "+n),e.disableVertexAttribArray(a[n]))},t.GLAttribLocations=function(e,t){var r=A[n];if(r){var a=r[t];if(a)return a}else A[n]={};var o=i[n],s=e.getAttribLocation(o,t);if(-1===s)throw" unable to get attrib "+t+" @ program type:"+n;return A[n][t]=s,s};var c={switchedProgram:0,switchedCacheHit:0};t.GLCTXreadPerformance=function(e){void 0===e&&(e=!0);var t=o({},c);return c.switchedCacheHit=0,c.switchedProgram=0,t};var d={};t.GLBufferCached=function(e,t){return d[t]||(d[t]=e.createBuffer(),d[t])},t.getCurrentProgramGLctx=function(){return n};var p=function(e,r){if(n===e)return c.switchedCacheHit++,i[e];var o=i[e];r.useProgram(o),n=e,c.switchedProgram++;var l=r.getAttribLocation(o,"a_position");switch(e){case a.VerticesFastAlpha:case a.Vertices3d:case a.VerticesOverlay:r.enableVertexAttribArray(l),r.vertexAttribPointer(l,3,r.FLOAT,!1,0,0);break;case a.EdgeGradient:var d=(0,t.GLBufferCached)(r,"GLCTX_edgeGradient");r.bindBuffer(r.ARRAY_BUFFER,d),r.enableVertexAttribArray(l),r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0);break;case a.VerticesGradient:var p=(0,t.GLBufferCached)(r,"GLCTX_vertexGradient");r.bindBuffer(r.ARRAY_BUFFER,p),r.enableVertexAttribArray(l),r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0);break;case a.VerticesGradientDarkMultply:var f=(0,t.GLBufferCached)(r,"GLCTX_vertexGradientDarkMultply");r.bindBuffer(r.ARRAY_BUFFER,f),r.enableVertexAttribArray(l),r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0);break;case a.VerticesGradientBLACK:var h=(0,t.GLBufferCached)(r,"GLCTX_vertexGradientBlack");r.bindBuffer(r.ARRAY_BUFFER,h),r.enableVertexAttribArray(l),r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0);break;case a.VerticesGradientLinear:var v=(0,t.GLBufferCached)(r,"GLCTX_vertexGradientLinear");r.bindBuffer(r.ARRAY_BUFFER,v),r.enableVertexAttribArray(l),r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0);break;case a.VerticesMultiColor:case a.Vertices:var g=(0,t.GLBufferCached)(r,"GLCTX_vertex");r.bindBuffer(r.ARRAY_BUFFER,g),r.enableVertexAttribArray(l),r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0);break;case a.particleUpdate:break;case a.GameBufferDist:case a.GameBufferNoise:var y=(0,t.GLBufferCached)(r,"GLCTX_frambuffer");r.bindBuffer(r.ARRAY_BUFFER,y),r.enableVertexAttribArray(l),r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,u,r.STATIC_DRAW);break;case a.Texture:case a.TextureDist:case a.TextureCombineMultiply:case a.TextureBlur:var m=(0,t.GLBufferCached)(r,"GLCTX_texture");r.bindBuffer(r.ARRAY_BUFFER,m),r.enableVertexAttribArray(l),r.vertexAttribPointer(l,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,s,r.STATIC_DRAW);break;case a.PerlinNoiseFog:break;default:throw"unhandled program switch:"+(0,t.programToString)(e)}return window.lah=function(){return console.log(A)},o};t.default=p}.apply(t,a),void 0===n||(e.exports=n)},5308:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t});a=[r,t,r(1706),r(1706),r(7561)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupFrameBuffer=t.setTargetToCanvas=t.renderFrameBuffer=t.setTargetToFrameBuffer=t.resetFrameBuffer=void 0,r=u(r);var o=null,i=null;t.resetFrameBuffer=function(e){var t=e.gl;e.game,t.bindFramebuffer(t.FRAMEBUFFER,i),t.viewport(0,0,t.canvas.width,t.canvas.height)},t.setTargetToFrameBuffer=function(e){var t=e.gl,a=e.game;if(t.bindFramebuffer(t.FRAMEBUFFER,i),t.viewport(0,0,t.canvas.width,t.canvas.height),a.menuSettings.motionBlur){t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),(0,r.default)(r.GLctx.Vertices,t);var o=[];(0,n.fillPoly)(0,0,0,t.canvas.width,t.canvas.height,o),(0,n.drawColor)(o,t,0,0,0,.3),t.blendFunc(t.ONE,t.ONE)}else t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},t.renderFrameBuffer=function(e,t,r){e.bindFramebuffer(e.FRAMEBUFFER,null),e.useProgram(t),e.bindTexture(e.TEXTURE_2D,r?o:null),e.viewport(0,0,e.canvas.width,e.canvas.height);var n=(0,a.GLAttribLocations)(e,"a_texcoord"),i=(0,a.GLUniformLocation)(e,"u_matrix"),s=(0,a.GLUniformLocation)(e,"u_texture"),u=(0,a.GLUniformLocation)(e,"distortionStart"),l=(0,a.GLUniformLocation)(e,"distortionEnd");e.uniform1f(u,Math.random()),e.uniform1f(l,Math.random());var A=window.m4;e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0);var c=A.orthographic(0,e.canvas.width,e.canvas.height,0,-1,1);c=A.translate(c,0,e.canvas.height,0),c=A.scale(c,e.canvas.width,-e.canvas.height,1),e.uniformMatrix4fv(i,!1,c),e.uniform1i(s,0),e.drawArrays(e.TRIANGLES,0,6)},t.setTargetToCanvas=function(e){e.bindFramebuffer(e.FRAMEBUFFER,null)},t.setupFrameBuffer=function(e){var t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t);var r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),o=e.createTexture(),e.bindTexture(e.TEXTURE_2D,o);var a=e.RGBA,n=e.RGBA,s=e.UNSIGNED_BYTE;e.texImage2D(e.TEXTURE_2D,0,a,e.canvas.width,e.canvas.height,0,n,s,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),i=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,i);var u=e.COLOR_ATTACHMENT0;e.framebufferTexture2D(e.FRAMEBUFFER,u,e.TEXTURE_2D,o,0)}}.apply(t,a),void 0===n||(e.exports=n)},1947:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t});a=[r,t,r(1706),r(1706)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupFrameBufferMulti=t.setTargetToCanvasMulti=t.renderFrameBufferMultiCombine=t.renderFrameBufferMulti=t.renderTextureToBufferMulti=t.setTargetToFrameBufferMulti=t.GetTextureFromFBMulti=void 0,r=u(r);var n=[],o=[],i=0,s=0,l={},A=function(e,t){var r=l[e+"_"+t];if(r)return r;var a=window.m4,n=a.orthographic(0,e,t,0,-1,1);return n=a.translate(n,0,t,0),n=a.scale(n,e,-t,1),l[e+"_"+t]=n,n};t.GetTextureFromFBMulti=function(e){return n[e]},t.setTargetToFrameBufferMulti=function(e,t,r,a){var n=e.gl;e.game,n.bindFramebuffer(n.FRAMEBUFFER,o[t]),n.viewport(0,0,r,a),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),i=r,s=a},t.renderTextureToBufferMulti=function(e,t,u,l,c,d,p,f){void 0===l&&(l=r.GLctx.Texture),void 0===c&&(c=0),void 0===d&&(d=0),void 0===p&&(p=e.canvas.width),void 0===f&&(f=e.canvas.height);var h=(0,r.default)(l,e);if(e.bindFramebuffer(e.FRAMEBUFFER,o[t]),e.viewport(c,d,p,f),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),i=p,s=f,e.useProgram(h),l===r.GLctx.TextureBlur){var v=(0,a.GLUniformLocation)(e,"u_textureSize");e.uniform2f(v,1,1)}e.activeTexture(e.TEXTURE0+u),e.bindTexture(e.TEXTURE_2D,n[u]);var g=(0,a.GLAttribLocations)(e,"a_texcoord"),y=(0,a.GLUniformLocation)(e,"u_matrix"),m=(0,a.GLUniformLocation)(e,"u_texture");e.enableVertexAttribArray(g),e.vertexAttribPointer(g,2,e.FLOAT,!1,0,0);var _=A(i,s);e.uniformMatrix4fv(y,!1,_),e.uniform1i(m,u),e.drawArrays(e.TRIANGLES,0,6)},t.renderFrameBufferMulti=function(e,t,o,u,l,c,d){void 0===u&&(u=0),void 0===l&&(l=0),void 0===c&&(c=e.canvas.width),void 0===d&&(d=e.canvas.height);var p=(0,r.default)(t,e);if(e.bindFramebuffer(e.FRAMEBUFFER,null),e.useProgram(p),t===r.GLctx.TextureBlur){var f=(0,a.GLUniformLocation)(e,"u_textureSize");e.uniform2f(f,1,1)}e.activeTexture(e.TEXTURE0+o),e.bindTexture(e.TEXTURE_2D,n[o]),e.viewport(u,l,c,d);var h=(0,a.GLAttribLocations)(e,"a_texcoord"),v=(0,a.GLUniformLocation)(e,"u_matrix"),g=(0,a.GLUniformLocation)(e,"u_texture");window.m4,e.enableVertexAttribArray(h),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0);var y=A(i,s);e.uniformMatrix4fv(v,!1,y),e.uniform1i(g,o),e.drawArrays(e.TRIANGLES,0,6)},t.renderFrameBufferMultiCombine=function(e,t,r,o,u,l,c,d){void 0===u&&(u=0),void 0===l&&(l=0),void 0===c&&(c=e.canvas.width),void 0===d&&(d=e.canvas.height),e.bindFramebuffer(e.FRAMEBUFFER,null),e.useProgram(t),e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,n[r]),e.activeTexture(e.TEXTURE0+o),e.bindTexture(e.TEXTURE_2D,n[o]),e.viewport(u,l,c,d);var p=(0,a.GLAttribLocations)(e,"a_texcoord"),f=(0,a.GLUniformLocation)(e,"u_matrix"),h=(0,a.GLUniformLocation)(e,"u_texture"),v=(0,a.GLUniformLocation)(e,"u_texture_b");window.m4,e.enableVertexAttribArray(p),e.vertexAttribPointer(p,2,e.FLOAT,!1,0,0);var g=A(i,s);e.uniformMatrix4fv(f,!1,g),e.uniform1i(h,r),e.uniform1i(v,o),e.drawArrays(e.TRIANGLES,0,6)},t.setTargetToCanvasMulti=function(e){e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,e.canvas.width,e.canvas.height)},t.setupFrameBufferMulti=function(e,t,r,a){i=r,s=a;var u=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,u);var l=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,l);var A=n[t]||e.createTexture();n[t]=A,e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,A);var c=e.RGBA,d=e.RGBA,p=e.UNSIGNED_BYTE;e.texImage2D(e.TEXTURE_2D,0,c,r,a,0,d,p,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);var f=o[t]||e.createFramebuffer();o[t]=f,e.bindFramebuffer(e.FRAMEBUFFER,f);var h=e.COLOR_ATTACHMENT0;e.framebufferTexture2D(e.FRAMEBUFFER,h,e.TEXTURE_2D,A,0)}}.apply(t,a),void 0===n||(e.exports=n)},8684:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobalGL=void 0;var r={global_gl:null};t.default=function(){return r},t.setGlobalGL=function(e){r.global_gl=e}}.apply(t,[r,t]),void 0===a||(e.exports=a)},6038:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:"\n    precision mediump float;\n    \n    uniform vec4 u_color;    \n    varying vec2 vPos;\n    varying vec2 vPos2;\n   \n    uniform vec2 fromA;\n    uniform vec2 toA;\n    uniform vec2 fromB;\n    uniform vec2 toB;\n    uniform vec2 fromC;\n    uniform vec2 toC;\n\n\n   \n\n    void main() {\n\n        vec4 color0 = u_color; //vec4(0.0,0.0,0.0,1.0);\n        vec4 color1 = vec4(1.0,1.0,1.0,1.0);\n\n        \n        vec2 gradVec;\n        float value;\n        float valueT;\n        \n        gradVec = toA - fromA;\n        value = dot(vPos2 - fromA, gradVec)/dot(gradVec, gradVec);\n        valueT = clamp(value, 0.0, 1.0);\n       \n        gradVec = toB - fromB;\n        value = dot(vPos2 - fromB, gradVec)/dot(gradVec, gradVec);\n        valueT = clamp( max(valueT, value),0.0,1.0);\n        \n        gradVec = toC - fromC;\n        value = dot(vPos2 - fromC, gradVec)/dot(gradVec, gradVec);\n        valueT = clamp( max(valueT, value),0.0,1.0);\n       \n        gl_FragColor = mix(color0, color1, valueT);\n          \n    }\n    ",vertex:"\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvarying vec2 vPos;\nvarying vec2 vPos2;\n\nvoid main() {\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = a_position / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    //gl_Position = vec4(a_position, 0, 1);\n    vPos = gl_Position.xy;\n    vPos2 = a_position;\n}\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},1927:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:"\nprecision mediump float;\nuniform float uTime;\nvarying vec3 vPosition;\nuniform vec2 uLocation;\nuniform float uColorMultip;\nuniform float uIntensity;\nuniform int uInvertColors;\nfloat d;\n\n\n// Noise\nvec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t*t*t*(t*(t*6.0-15.0)+10.0); }\nfloat noise(vec3 P) {\n    vec3 i0 = mod289(floor(P)), i1 = mod289(i0 + vec3(1.0));\n    vec3 f0 = fract(P), f1 = f0 - vec3(1.0), f = fade(f0);\n    vec4 ix = vec4(i0.x, i1.x, i0.x, i1.x), iy = vec4(i0.yy, i1.yy);\n    vec4 iz0 = i0.zzzz, iz1 = i1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy), ixy0 = permute(ixy + iz0), ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0), gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    vec4 gx1 = ixy1 * (1.0 / 7.0), gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0); gx1 = fract(gx1);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0), sz0 = step(gz0, vec4(0.0));\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1), sz1 = step(gz1, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5); gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5); gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g0 = vec3(gx0.x,gy0.x,gz0.x), g1 = vec3(gx0.y,gy0.y,gz0.y),\n        g2 = vec3(gx0.z,gy0.z,gz0.z), g3 = vec3(gx0.w,gy0.w,gz0.w),\n        g4 = vec3(gx1.x,gy1.x,gz1.x), g5 = vec3(gx1.y,gy1.y,gz1.y),\n        g6 = vec3(gx1.z,gy1.z,gz1.z), g7 = vec3(gx1.w,gy1.w,gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g0,g0), dot(g2,g2), dot(g1,g1), dot(g3,g3)));\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g4,g4), dot(g6,g6), dot(g5,g5), dot(g7,g7)));\n    g0 *= norm0.x; g2 *= norm0.y; g1 *= norm0.z; g3 *= norm0.w;\n    g4 *= norm1.x; g6 *= norm1.y; g5 *= norm1.z; g7 *= norm1.w;\n    vec4 nz = mix(vec4(dot(g0, vec3(f0.x, f0.y, f0.z)), dot(g1, vec3(f1.x, f0.y, f0.z)),\n        dot(g2, vec3(f0.x, f1.y, f0.z)), dot(g3, vec3(f1.x, f1.y, f0.z))),\n        vec4(dot(g4, vec3(f0.x, f0.y, f1.z)), dot(g5, vec3(f1.x, f0.y, f1.z)),\n            dot(g6, vec3(f0.x, f1.y, f1.z)), dot(g7, vec3(f1.x, f1.y, f1.z))), f.z);\n    return 2.2 * mix(mix(nz.x,nz.z,f.y), mix(nz.y,nz.w,f.y), f.x);\n}\nfloat noise(vec2 P) { return noise(vec3(P, 0.0)); }\nfloat fractal(vec3 P) {\n    float f = 0., s = 1.;\n    for (int i = 0 ; i < 9 ; i++) {\n        f += noise(s * P) / s;\n        s *= 2.;\n        P = vec3(.866 * P.x + .5 * P.z, P.y + 100., -.5 * P.x + .866 * P.z);\n    }\n    return f;\n}\nfloat turbulence(vec3 P) {\n    float f = 0., s = 1.;\n    for (int i = 0 ; i < 9 ; i++) {\n        f += abs(noise(s * P)) / s;\n        s *= 2.;\n        P = vec3(.866 * P.x + .5 * P.z, P.y + 100., -.5 * P.x + .866 * P.z);\n    }\n    return f;\n}\n\nvec3 clouds(float x, float y) {\n    float L = turbulence(vec3(x, y, uTime * .1));\n    return vec3(noise(vec3(.5, .5, L) * .7));\n}\n\nfloat dist(vec2 p0, vec2 pf){\n    return sqrt((pf.x-p0.x)*(pf.x-p0.x)+(pf.y-p0.y)*(pf.y-p0.y));\n}\n\nvoid main() {\n    vec3 color;\n    float x = vPosition.x;\n    float y = vPosition.y;\n    vec3 cloudEffect = clouds(vPosition.x + uLocation.x , vPosition.y + uLocation.y);\n    color = cloudEffect + vec3(uColorMultip, uColorMultip, uColorMultip);\n\n    //d = dist(vec2(0.,0.), vec2(x,y)) /  1. ;\n    gl_FragColor = vec4(uInvertColors == 1 ?  1.0 - color * uIntensity : color * uIntensity, color * uIntensity);\n    //gl_FragColor = vec4(uInvertColors == 1 ?  1.0 - color * uIntensity : color * uIntensity, color * uIntensity);\n}\n    ",vertex:"\n   attribute vec3 aPosition;\n   varying   vec3 vPosition;\n   void main() {\n      gl_Position = vec4(aPosition, 1.0);\n      vPosition = aPosition;\n   }\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},5303:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShaderInstrument=t.readShaderPerformanceHash=t.readShaderPerformanceList=void 0;var r={};t.readShaderPerformanceList=function(){var e=[];for(var t in r){var a=r[t];e.push({name:a.name,time:a.time,success:a.success})}return e},t.readShaderPerformanceHash=function(){var e={};for(var t in r){var a=r[t];e[a.name]={name:a.name,time:a.time,success:a.success}}return e},t.ShaderInstrument=function(e,t,a){return e.game.menuSettings.fps?(function(e,t){var a=e.gl,n=r[t];if(n&&(n.success=!1,n.query)){var o=a.getQueryParameter(n.query,a.QUERY_RESULT_AVAILABLE),i=a.getParameter(n.ext.GPU_DISJOINT_EXT);if(o&&!i){var s=a.getQueryParameter(n.query,a.QUERY_RESULT);n.time=s/1e6,n.success=!0}(o||i)&&(a.deleteQuery(n.query),n.query=null)}}(e,t),function(e,t,a){var n=e.gl,o=r[t]=r[t]||{ext:null,query:null,time:-1,success:!1,name:"unknown"},i=!1;o.query&&!o.success||(o.ext=n.getExtension("EXT_disjoint_timer_query_webgl2"),o.query=n.createQuery(),n.beginQuery(o.ext.TIME_ELAPSED_EXT,o.query),i=!0);var s=a(e);return o.name=s||"unknown",i&&n.endQuery(o.ext.TIME_ELAPSED_EXT),s}(e,t,a)||"unknown"):a(e)||"unknown"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},6124:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:'#version 300 es\n        \n                // fragment shaders don\'t have a default precision so we need\n                // to pick one. mediump is a good default. It means "medium precision"\n                precision mediump float;\n                \n                // our texture\n                uniform sampler2D u_texture;\n        \n                uniform float distortionStart;\n                uniform float distortionEnd;\n                \n                // the texCoords passed in from the vertex shader.\n                in vec2 v_texcoord;\n                \n                // we need to declare an output for the fragment shader\n                out vec4 outColor;\n                \n                vec4 temp; \n                vec4 temp2;\n\n                vec4 boost1;\n                vec4 boost2;\n                vec4 boostVec4;\n                float threshold;\n                \n                float randNoise(vec2 co){\n                    return fract(sin(dot(co.xy *distortionStart  ,vec2(12.9898,78.233))) * 43758.5453) * 0.3 ;\n                }\n\n                float rand(vec2 co){\n                    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453) * (distortionStart+distortionEnd);\n                }\n                \n                void main() {\n                    temp = texture(u_texture, v_texcoord).rgba;\n        \n                    \n                    temp2 = texture(u_texture, vec2(v_texcoord.x + rand(v_texcoord) * 0.1 * distortionEnd , v_texcoord.y)).rgba;\n                    /*if(  v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd &&  int(v_texcoord.y * 100.0) % 2 == 0 && temp2.r > 0.01    ){\n                        outColor =  texture(u_texture, v_texcoord).rgba;\n                        outColor += v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd ? texture(u_texture , vec2( v_texcoord.x  , v_texcoord.y+    rand(v_texcoord))  ).rgba : texture(u_texture, v_texcoord).rgba ;\n                    }else{\n        */\n                    if(temp.r > 0.1 || temp.g > 0.1 || temp.b > 0.1 ){\n                        outColor =  temp.rgba;\n                    }else if(temp2.r > 0.1 || temp2.g > 0.1 || temp2.b > 0.1 ){\n                        if(distortionStart > 0.5){\n                            outColor =  temp2.brga;\n                        }else{\n                        outColor =  temp2.rgba ; \n                        }\n                    }else{\n                        \n                        outColor =  texture(u_texture, v_texcoord).rgba;\n                        \n                       outColor += v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd ? texture(u_texture , vec2( v_texcoord.x+    rand(v_texcoord)  , v_texcoord.y)  ).rgba : texture(u_texture, v_texcoord).rgba ;\n                       /*   \n                       outColor += v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd ? texture(u_texture , vec2( v_texcoord.x +    rand(v_texcoord) , v_texcoord.y)  ).rgba : texture(u_texture, v_texcoord).rgba ;\n                       outColor += v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd ? texture(u_texture , vec2( v_texcoord.x +    rand(v_texcoord) +0.01 , v_texcoord.y)  ).rgba : texture(u_texture, v_texcoord).rgba ;\n                       outColor += v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd ? texture(u_texture , vec2( v_texcoord.x +    rand(v_texcoord) +0.02 , v_texcoord.y)  ).rgba : texture(u_texture, v_texcoord).rgba ;\n                       outColor += v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd ? texture(u_texture , vec2( v_texcoord.x +    rand(v_texcoord) +0.03 , v_texcoord.y)  ).rgba : texture(u_texture, v_texcoord).rgba ;\n                       outColor += v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd ? texture(u_texture , vec2( v_texcoord.x +    rand(v_texcoord) +0.05 , v_texcoord.y)  ).rgba : texture(u_texture, v_texcoord).rgba ;\n                       */\n                    }\n                    //noise\n                      outColor += vec4(randNoise(v_texcoord),randNoise(v_texcoord),randNoise(v_texcoord),randNoise(v_texcoord));\n\n\n                      //colorboost\n                      threshold = 0.5;\n                    boostVec4 = vec4(0.2,0.2,0.2,1.0);\n                      boost1 = texture(u_texture, vec2(v_texcoord.x + randNoise(v_texcoord) * 0.001 *distortionStart   , v_texcoord.y)).rgba;\n                      boost2 = texture(u_texture, vec2(v_texcoord.x - randNoise(v_texcoord) * 0.001 *distortionEnd , v_texcoord.y)).rgba;\n                      if (boost1.r > threshold || boost1.g > threshold || boost1.b > threshold) { \t\n                        if (outColor.r > threshold || outColor.g > threshold || outColor.b > threshold) {\n                            outColor += boostVec4;\n                        }                   \n                    }\n                    if (boost2.r > threshold || boost2.g > threshold || boost2.b > threshold) { \t                   \n                        if (outColor.r > threshold || outColor.g > threshold || outColor.b > threshold) {\n                            outColor += boostVec4;\n                        }\n                    }\n                }\n                ',vertex:"#version 300 es\nprecision mediump float;\n\nin vec4 a_position;\nin vec2 a_texcoord;\n\nuniform mat4 u_matrix;\n\nout vec2 v_texcoord;\n\nvoid main() {\ngl_Position = u_matrix * a_position;\nv_texcoord = a_texcoord;\n}\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},7693:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:'#version 300 es\n        \n                // fragment shaders don\'t have a default precision so we need\n                // to pick one. mediump is a good default. It means "medium precision"\n                precision mediump float;\n                \n                // our texture\n                uniform sampler2D u_texture;\n        \n                uniform float distortionStart;\n                uniform float distortionEnd;\n                \n                // the texCoords passed in from the vertex shader.\n                in vec2 v_texcoord;\n                \n                // we need to declare an output for the fragment shader\n                out vec4 outColor;\n                \n                vec4 temp1; \n                vec4 temp2;\n\n                vec4 boost1;\n                vec4 boost2;\n                vec4 boostVec4;\n\n                float threshold;\n                \n                float rand(vec2 co){\n                    return fract(sin(dot(co.xy *distortionStart  ,vec2(12.9898,78.233))) * 43758.5453) * 0.3 ;\n                }\n                \n                void main() {   \n                    threshold = 0.5;\n                    boostVec4 = vec4(0.2,0.2,0.2,1.0);\n\n                    temp1 = texture(u_texture, vec2(v_texcoord.x + rand(v_texcoord) * 0.01 *distortionStart   , v_texcoord.y)).rgba;\n                    temp2 = texture(u_texture, vec2(v_texcoord.x - rand(v_texcoord) * 0.01 *distortionEnd , v_texcoord.y)).rgba;\n                    outColor =  texture(u_texture, v_texcoord).rgba;\n                    \n                    boost1 = texture(u_texture, vec2(v_texcoord.x + rand(v_texcoord) * 0.001 *distortionStart   , v_texcoord.y)).rgba;\n                    boost2 = texture(u_texture, vec2(v_texcoord.x - rand(v_texcoord) * 0.001 *distortionEnd , v_texcoord.y)).rgba;\n\n                    \n\n                    if(temp1.r > threshold || temp1.g > threshold || temp1.b > threshold){\n                        outColor += temp1;\n                    }\n                    if(temp2.r > threshold || temp2.g > threshold || temp2.b > threshold){\n                        outColor += temp2;\n                    }                    \n\n\n                    if (boost1.r > threshold || boost1.g > threshold || boost1.b > threshold) { \t\n                        if (outColor.r > threshold || outColor.g > threshold || outColor.b > threshold) {\n                            outColor += boostVec4;\n                        }                   \n                    }\n                    if (boost2.r > threshold || boost2.g > threshold || boost2.b > threshold) { \t                   \n                        if (outColor.r > threshold || outColor.g > threshold || outColor.b > threshold) {\n                            outColor += boostVec4;\n                        }\n                    }\n\n                    outColor += vec4(rand(v_texcoord) * v_texcoord.y,rand(v_texcoord),rand(v_texcoord),rand(v_texcoord));\n\n                    \n                    if(int(v_texcoord.y * 100.0) % 2 == 0 ){                       \n                        outColor.b -= 0.1;\n                        if(v_texcoord.y < distortionEnd && v_texcoord.y > distortionStart && rand(v_texcoord) >  0.29){\n                            outColor.r += 0.3;\n                        }\n                    }\n                }\n                ',vertex:"#version 300 es\nprecision mediump float;\n\nin vec4 a_position;\nin vec2 a_texcoord;\n\nuniform mat4 u_matrix;\n\nout vec2 v_texcoord;\n\nvoid main() {\ngl_Position = u_matrix * a_position;\nv_texcoord = a_texcoord;\n}\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},8340:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:"\n    precision highp float;\n    \n    uniform vec4 u_color;    \n    varying vec2 vPos;\n    varying vec2 vPos2;\n\n    uniform float u_pos_x;\n    uniform float u_pos_y;   \n\n    uniform float u_perimiter;\n\n    float gradientNoise(in vec2 uv)\n    {\n        return fract(52.9829189 * fract(dot(uv, vec2(0.06711056, 0.00583715))));\n    }\n\n    \n    \n    \n    \n\n    float dist(vec2 p0, vec2 pf){\n        return sqrt((pf.x-p0.x)*(pf.x-p0.x)+(pf.y-p0.y)*(pf.y-p0.y));\n    }\n    float d;\n    vec4 res;\n\n    float noise;\n    void main() {       \n        d = (dist(vec2(u_pos_x,u_pos_y), vPos2 )) / u_perimiter * 2. ;\n      \n        noise = gradientNoise(vPos2.xy);\n        gl_FragColor += mix(u_color + noise*.1, vec4(0.0, 0.0, 0.0, 1.0), d) *u_color.a;\n           \n        \n\n        \n    }\n    ",vertex:"\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvarying vec2 vPos;\nvarying vec2 vPos2;\n\nvoid main() {\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = a_position / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    //gl_Position = vec4(a_position, 0, 1);\n    vPos = gl_Position.xy;\n    vPos2 = a_position;\n}\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},4437:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:"\n    precision mediump float;\n    \n    uniform vec4 u_color;    \n    uniform vec4 u2_color;    \n    varying vec2 vPos;\n    varying vec2 vPos2;\n    uniform float u_range;\n\n    uniform float u_pos_x;\n    uniform float u_pos_y;   \n\n    uniform float u_perimiter;\n\n    float dist(vec2 p0, vec2 pf){\n        return sqrt((pf.x-p0.x)*(pf.x-p0.x)+(pf.y-p0.y)*(pf.y-p0.y));\n    }\n    float d;\n    vec4 res;\n    float m_range;\n\n    void main() {       \n        d = (dist(vec2(u_pos_x,u_pos_y), vPos2 )) / u_perimiter * 2. ;\n      \n        m_range = 1.0 - u_range;\n        gl_FragColor += mix(u_color, u2_color,d > 0.5 ? 0.5 + d * 0.01 : d);\n       //gl_FragColor = u_color;     \n    }\n    ",vertex:"\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvarying vec2 vPos;\nvarying vec2 vPos2;\n\nvoid main() {\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = a_position / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    //gl_Position = vec4(a_position, 0, 1);\n    vPos = gl_Position.xy;\n    vPos2 = a_position;\n}\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},5728:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:"\n    precision mediump float;\n    \n    uniform vec4 u_color;    \n    varying vec2 vPos;\n    varying vec2 vPos2;\n\n    uniform float u_pos_x;\n    uniform float u_pos_y; \n    \n    \n\n    uniform float u_perimiter;\n\n    float dist(vec2 p0, vec2 pf){\n        return sqrt((pf.x-p0.x)*(pf.x-p0.x)+(pf.y-p0.y)*(pf.y-p0.y));\n    }\n    float d;\n\n    void main() {       \n       d = ((dist(vec2(u_pos_x,u_pos_y), vPos2 )) / u_perimiter );\n       d = d * d * d * d * d;\n       gl_FragColor += mix(u_color, vec4(0.0, 0.0, 0.0, 1), d);\n       // gl_FragColor = u_color;\n           \n    }\n    ",vertex:"\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvarying vec2 vPos;\nvarying vec2 vPos2;\n\nvoid main() {\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = a_position / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    \n    vPos = gl_Position.xy;\n    vPos2 = a_position;\n}\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},9371:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:"\n    precision highp float;\n    \n    uniform vec4 u_color;    \n    varying vec2 vPos;\n    varying vec2 vPos2;\n\n    uniform float u_pos_x;\n    uniform float u_pos_y;   \n\n    uniform float u_perimiter;\n\n    float gradientNoise(in vec2 uv)\n    {\n        return fract(52.9829189 * fract(dot(uv, vec2(0.06711056, 0.00583715))));\n    }\n\n    \n    \n    \n    \n\n    float dist(vec2 p0, vec2 pf){\n        return sqrt((pf.x-p0.x)*(pf.x-p0.x)+(pf.y-p0.y)*(pf.y-p0.y));\n    }\n    float d;\n    vec4 res;\n\n    float noise;\n    void main() {       \n        d = (dist(vec2(u_pos_x,u_pos_y), vPos2 )) / u_perimiter * 2. ;\n      \n        noise = gradientNoise(vPos2.xy);\n        gl_FragColor += mix( u_color , vec4(0.0, 0.0, 0.0, 0.0),   d) ;   //compare with reugal triangle shader here for alpha settings\n           \n        \n\n        \n    }\n    ",vertex:"\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvarying vec2 vPos;\nvarying vec2 vPos2;\n\nvoid main() {\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = a_position / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    //gl_Position = vec4(a_position, 0, 1);\n    vPos = gl_Position.xy;\n    vPos2 = a_position;\n}\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},6238:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:"\n    precision mediump float;\n    \n    uniform vec4 u_color;    \n    varying vec2 vPos;\n    varying vec2 vPos2;\n   \n    \n    uniform float u_pos_from_x;\n    uniform float u_pos_from_y;   \n    uniform float u_pos_to_x;\n    uniform float u_pos_to_y;   \n    \n\n\n    uniform float u_perimiter;\n\n    float dist(vec2 p0, vec2 pf){\n        return sqrt((pf.x-p0.x)*(pf.x-p0.x)+(pf.y-p0.y)*(pf.y-p0.y));\n    }\n    float d;\n    vec4 res;\n\n    void main() {       \n        vec2 from = vec2(u_pos_from_x, u_pos_from_y);\n        vec2 to = vec2(u_pos_to_x, u_pos_to_y);\n        vec2 gradVec;\n        float value;\n    \n        gradVec = to - from;\n        value = dot(vPos2 - from, gradVec)/dot(gradVec, gradVec);\n        value = clamp(value, 0.0, 1.0);\n    \n        gl_FragColor += mix(u_color, vec4(0.0, 0.0, 0.0, 1), value);\n       // gl_FragColor = vec4(value,0.0,0.0,0);  \n    }\n    ",vertex:"\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvarying vec2 vPos;\nvarying vec2 vPos2;\n\nvoid main() {\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = a_position / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    //gl_Position = vec4(a_position, 0, 1);\n    vPos = gl_Position.xy;\n    vPos2 = a_position;\n}\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},7154:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:"\n    precision mediump float;\n\n    uniform vec4 u_color;\n\n    void main() {\n        \n        gl_FragColor = u_color;\n        // gl_FragColor = vec4(1,1,1,1);  // ALL WHITE\n        // gl_FragColor = vec4(0.5,0.5,0.5,1);  // ALL GREY\n    }\n    ",vertex:"\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nuniform float u_pointSize;\n\nvoid main() {\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = a_position / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    gl_PointSize = u_pointSize; // enable gl.POINTS\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    \n}\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},9109:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:"\n    precision mediump float;\n\n    uniform vec4 u_color;\n\n    \n\n    varying vec4 pos;\n\n    void main() {\n\n        float z = 1.0 - pos.z*-0.5;\n\n        float y = pos.y *4.0;\n        \n        vec4 color = vec4((u_color.r ) - z*0.1   ,  u_color.g  -z ,u_color.b  -z, 1);\n\n        gl_FragColor = color * 0.5;\n    }\n    ",vertex:"\n \n attribute vec4 a_position;\n attribute vec4 aVertexColor;\n uniform mat4 uModelViewMatrix;\n uniform mat4 uProjectionMatrix;\n varying lowp vec4 vColor;\n uniform vec2 u_resolution;\n\n varying vec4 pos;\n\n void main(void) {\n  // gl_Position = uProjectionMatrix * uModelViewMatrix * a_position;\n  // vColor = aVertexColor;\n\n   vec2 normSpace = vec2(a_position.x, a_position.y);\n\n   // convert the rectangle from pixels to 0.0 to 1.0\n   vec2 zeroToOne = normSpace / u_resolution;\n\n   // convert from 0->1 to 0->2\n   vec2 zeroToTwo = zeroToOne * 2.0;\n\n   // convert from 0->2 to -1->+1 (clipspace)\n   vec2 clipSpace = zeroToTwo - 1.0;\n\n   vec2 res = clipSpace * vec2(1, -1);\n\n   gl_Position =uProjectionMatrix  * vec4(res, a_position.z, 1);\n   pos = gl_Position;\n }\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},274:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:"\n    precision mediump float;    \n\n    uniform vec4 u_color;\n\n    varying float v_fast_color_alpha;\n\n    void main() {\n        gl_FragColor = vec4(u_color.r,u_color.g,u_color.b, v_fast_color_alpha);     \n    }\n    ",vertex:"\nattribute vec3 a_position;\n\nuniform vec2 u_resolution;\n\nvarying float v_fast_color_alpha;\n\nvoid main() {\n\n    vec2 pos2d = vec2(a_position.x, a_position.y);\n    v_fast_color_alpha = a_position.z;\n\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = pos2d / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    gl_PointSize = 1.0; // enable gl.POINTS\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    \n}\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},6266:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:"\n    precision mediump float;\n\n    varying vec4 v_vertex_color;\n\n    void main() {\n        gl_FragColor = v_vertex_color;\n    }\n    ",vertex:"\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nattribute vec4 a_color;\n\nvarying vec4 v_vertex_color;\n\nvoid main() {\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = a_position / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    gl_PointSize = 1.0; // enable gl.POINTS\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    v_vertex_color = a_color;\n    \n}\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},9124:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:"#version 300 es\n    precision mediump float;\n\n    \n    in vec2 v_texcoord;\n\n    uniform sampler2D u_texture;\n    out vec4 outColor;\n    void main() {\n        outColor = texture(u_texture, v_texcoord);\n    }\n",vertex:"#version 300 es\n    precision mediump float;\n    \n    in vec4 a_position;\n    in vec2 a_texcoord;\n    \n    uniform mat4 u_matrix;\n    \n    out vec2 v_texcoord;\n    \n    void main() {\n    gl_Position = u_matrix * a_position;\n    v_texcoord = a_texcoord;\n    }\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},4881:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:"# version 300 es\n    precision highp float;\n    in vec2 v_texcoord;\n   // uniform vec2 u_textureSize;\n    uniform sampler2D u_texture;\n    out vec4 outColor;\n\n    float normpdf(in float x, in float sigma)\n    {\n        return 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;\n    }\n\n    void main() {\n\n        const vec2 u_textureSize = vec2(100.0,100.0);\n\n        vec3 c = texture(u_texture, v_texcoord.xy / u_textureSize.xy).rgb;\n        \n        \n        //declare stuff\n        const int mSize = 11;\n        const int kSize = (mSize-1)/2;\n        float kernel[mSize];\n        vec3 final_colour = vec3(0.0);\n        \n        //create the 1-D kernel\n        float sigma = 7.0;\n        float Z = 0.0;\n        for (int j = 0; j <= kSize; ++j)\n        {\n            kernel[kSize+j] = kernel[kSize-j] = normpdf(float(j), sigma);\n        }\n        \n        //get the normalization factor (as the gaussian has been clamped)\n        for (int j = 0; j < mSize; ++j)\n        {\n            Z += kernel[j];\n        }\n        \n        //read out the texels\n        for (int i=-kSize; i <= kSize; ++i)\n        {\n            for (int j=-kSize; j <= kSize; ++j)\n            {\n                final_colour += kernel[kSize+j]*kernel[kSize+i]*texture(u_texture, (v_texcoord.xy+vec2(float(i),float(j))) / u_textureSize.xy).rgb;\n\n            }\n        }\n        \n        \n        outColor = vec4(final_colour/(Z*Z), 1.0);\n    }\n\n",vertex:"# version 300 es\nprecision highp float;\nin vec4 a_position;\nin vec2 a_texcoord;\nuniform mat4 u_matrix;\nout vec2 v_texcoord;\n\nvoid main() {\n    gl_Position = u_matrix * a_position;\n    v_texcoord = a_texcoord;\n}\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},7563:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:"#version 300 es\n    precision mediump float;\n\n    \n    in vec2 v_texcoord;\n\n    uniform sampler2D u_texture;\n    uniform sampler2D u_texture_b;\n    out vec4 outColor;\n    void main() {\n       // Multiply 2 textures, ...i hope\n        vec4 color0 = texture(u_texture, v_texcoord);\n        vec4 color1 = texture(u_texture_b, v_texcoord);\n        outColor = color0 * color1 * 5.7;\n        //outColor = color0 + color1;\n    }\n",vertex:"#version 300 es\n    precision mediump float;\n    \n    in vec4 a_position;\n    in vec2 a_texcoord;\n    \n    uniform mat4 u_matrix;\n    \n    out vec2 v_texcoord;\n    \n    void main() {\n    gl_Position = u_matrix * a_position;\n    v_texcoord = a_texcoord;\n    }\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},6284:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fragment:'#version 300 es\n        \n                // fragment shaders don\'t have a default precision so we need\n                // to pick one. mediump is a good default. It means "medium precision"\n                precision mediump float;\n                \n                // our texture\n                uniform sampler2D u_texture;\n        \n                uniform float distortionStart;\n                uniform float distortionEnd;\n                \n                // the texCoords passed in from the vertex shader.\n                in vec2 v_texcoord;\n                \n                // we need to declare an output for the fragment shader\n                out vec4 outColor;\n                \n                vec4 temp; \n                vec4 temp2;\n                \n                float rand(vec2 co){\n                    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453) * (distortionStart+distortionEnd);\n                }\n                \n                void main() {\n                    temp = texture(u_texture, v_texcoord).rgba;\n        \n                    \n                    temp2 = texture(u_texture, vec2(v_texcoord.x + rand(v_texcoord) * 0.1 * distortionEnd , v_texcoord.y)).rgba;\n        \n                    if( v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd){\n                        //inside distortionspace\n        \n                        if(distortionStart > 0.9 && distortionEnd > 0.9){\n                            outColor =  texture(u_texture, vec2(rand(v_texcoord),rand(v_texcoord))).rgba;\n                        }else if(int(v_texcoord.y * 100.0) % 2 == 0 && temp2.r > 0.01){\n                            outColor = vec4(1,distortionStart,distortionEnd,1);\n                        }else{\n                            outColor = vec4(0,0,0,0);\n                        }\n                    }else{\n                        if(distortionStart > 0.5){\n                            outColor =  texture(u_texture, v_texcoord).rgba;\n                        }else  if(int(v_texcoord.y * 100.0) % 1 == 0){\n                            outColor = vec4(0,0,0,0);\n                        }else{\n                            outColor =  texture(u_texture, v_texcoord).rgba;\n                        }\n                    }\n        \n                    //outColor.a = 0.0;\n                        /*\n                    if(  v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd &&  int(v_texcoord.y * 100.0) % 2 == 0 && temp2.r > 0.01    ){\n                        outColor = vec4(1,0,0,1);\n                    }else{\n        \n                        outColor =  texture(u_texture, v_texcoord).rgba;\n                        \n                        if(int(v_texcoord.y * 100.0) % 1 == 0){\n                            outColor = vec4(0,0,0,1);\n                        }else{\n                            outColor =  texture(u_texture, v_texcoord).rgba;\n                        }\n                        \n                       // outColor = v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd ? texture(u_texture , vec2( v_texcoord.x +    rand(v_texcoord) , v_texcoord.y)  ).rgba : texture(u_texture, v_texcoord).rgba ;\n                    }*/\n                  \n                }\n                ',vertex:"#version 300 es\nprecision mediump float;\n\nin vec4 a_position;\nin vec2 a_texcoord;\n\nuniform mat4 u_matrix;\n\nout vec2 v_texcoord;\n\nvoid main() {\ngl_Position = u_matrix * a_position;\nv_texcoord = a_texcoord;\n}\n"}}.apply(t,[r,t]),void 0===a||(e.exports=a)},9733:function(e,t,r){var a,n,o=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function i(e){try{u(a.next(e))}catch(e){o(e)}}function s(e){try{u(a.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((a=a.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,a,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(r=1,a&&(n=2&s[0]?a.return:s[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;switch(a=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};a=[r,t,r(9271),r(7899)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLadder=t.setLadderValue=t.createUser=t.createOfflineUser=t.getUserOnlineStatus=t.getUser=t.getRequestsInFlight=t.getUserName=void 0;var n="https://api.globalstats.io/",s="",u="",l="",A="local_user_name_FFG",c="local_user_score_id_FFG";t.getUserName=function(){return l||(0,r.loadStr)(A)},l=(0,r.loadStr)(A),u=(0,r.loadStr)(c);var d=0;t.getRequestsInFlight=function(){return d};var p=function(e,t){return o(void 0,void 0,void 0,(function(){var r;return i(this,(function(a){switch(a.label){case 0:return d++,[4,o(void 0,void 0,void 0,(function(){return i(this,(function(e){return[2,new Promise((function(e,t){setTimeout((function(){e()}),20)}))]}))}))];case 1:return a.sent(),(r=fetch(e,t)).then((function(){d--})).catch((function(){d--})),[2,r]}}))}))},f=function(){return o(void 0,void 0,void 0,(function(){var e,t;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,p("".concat(n,"oauth/access_token"),{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=client_credentials&scope=endpoint_client&client_id=".concat("c9bcr0PNSyDu2zpnNJCmF88LN3IxmY2y7eLzfAm7","&client_secret=").concat("ZCbz1ynLaJriRc6VVEhTHQ1VBAabWikWUvwW4THf")})];case 1:return 200!==(e=r.sent()).status?[2,Promise.reject()]:[4,e.json()];case 2:return t=r.sent(),s=t.access_token,setTimeout((function(){s=null}),3e6),[2,Promise.resolve()];case 3:return r.sent(),[2,Promise.reject()];case 4:return[2]}}))}))},h=function(e){return o(void 0,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,p("".concat(n,"v1/statistics/").concat(u),{method:"PUT",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({name:l,values:{score:e}})})];case 1:return 200!==(t=r.sent()).status?[2,Promise.reject()]:[4,t.json()];case 2:return r.sent(),[2,Promise.resolve()];case 3:return r.sent(),[2,Promise.reject()];case 4:return[2]}}))}))};t.getUser=function(){return l},t.getUserOnlineStatus=function(){return!(!l||!u)},t.createOfflineUser=function(e){l=e},t.createUser=function(e,t){return o(void 0,void 0,void 0,(function(){return i(this,(function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),s?[3,2]:[4,f()];case 1:d.sent(),d.label=2;case 2:return[4,(h=t,o(void 0,void 0,void 0,(function(){var e,t;return i(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,p("".concat(n,"v1/statistics"),{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({name:h,values:{score:0}})})];case 1:return 200!==(e=a.sent()).status?[2,Promise.reject()]:[4,e.json()];case 2:return t=a.sent(),u=t._id,l=h,(0,r.saveStr)(c,u),(0,r.saveStr)(A,l),[2,Promise.resolve()];case 3:return a.sent(),[2,Promise.reject()];case 4:return[2]}}))}))).then((function(){e.game.notifications.push({life:a.NOTIFICATION_LIFE,type:71,message:"user '"+t+"' created successfully."})})).catch((function(){e.game.notifications.push({life:a.NOTIFICATION_LIFE,type:72,message:"unable to create user."})}))];case 3:return d.sent(),[2,Promise.resolve()];case 4:return d.sent(),[3,5];case 5:return[2,Promise.reject()]}var h}))}))},t.setLadderValue=function(e,t){return o(void 0,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),s?[3,2]:[4,f()];case 1:r.sent(),r.label=2;case 2:return[4,h(t)];case 3:return r.sent(),e.game.notifications.push({life:a.NOTIFICATION_LIFE,type:73,message:"score saved: "+t}),[2,Promise.resolve()];case 4:return r.sent(),e.game.notifications.push({life:a.NOTIFICATION_LIFE,type:73,message:"unable to save score... was:"+t}),[3,5];case 5:return[2,Promise.resolve()]}}))}))},t.getLadder=function(){return o(void 0,void 0,void 0,(function(){var e,t;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),s?[3,2]:[4,f()];case 1:r.sent(),r.label=2;case 2:return[4,o(void 0,void 0,void 0,(function(){var e,t;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,p("".concat(n,"v1/statistics/").concat(u,"/section/score"),{method:"GET",cache:"no-cache",headers:{Authorization:"Bearer ".concat(s)}})];case 1:return[4,(e=r.sent()).json()];case 2:return t=r.sent(),200!==e.status?[2,Promise.reject()]:[2,Promise.resolve(t)];case 3:return r.sent(),[2,Promise.reject()];case 4:return[2]}}))}))];case 3:return e=r.sent(),t=[],e.better_ranks.data.map((function(e){return t.push(e.rank+" "+e.name+" "+e.value)})),t.push("> "+e.user_rank.rank+" "+e.user_rank.name+" "+e.user_rank.value),e.worse_ranks.data.map((function(e){return t.push(e.rank+" "+e.name+" "+e.value)})),[2,Promise.resolve(t)];case 4:return r.sent(),[2,Promise.reject()];case 5:return[2]}}))}))}}.apply(t,a),void 0===n||(e.exports=n)},3182:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Math.sqrt(2);t.default=function(){function e(e){for(var t=e,r=[];t.parent;)r.unshift(t),t=t.parent;return r}var t={search:function(r,a,n,i){r.cleanDirty();var s=(i=i||{}).heuristic||t.heuristics.manhattan,u=i.closest||!1,l=new o((function(e){return e.f})),A=a;for(a.h=s(a,n),r.markDirty(a),l.push(a);l.size()>0;){var c=l.pop();if(c===n)return e(c);c.closed=!0;for(var d=r.neighbors(c),p=0,f=d.length;p<f;++p){var h=d[p];if(!h.closed&&!h.isWall()){var v=c.g+h.getCost(c),g=h.visited;(!g||v<h.g)&&(h.visited=!0,h.parent=c,h.h=h.h||s(h,n),h.g=v,h.f=h.g+h.h,r.markDirty(h),u&&(h.h<A.h||h.h===A.h&&h.g<A.g)&&(A=h),g?l.rescoreElement(h):l.push(h))}}}return u?e(A):[]},heuristics:{manhattan:function(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},diagonal:function(e,t){var a=r,n=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);return 1*(n+o)+(a-2)*Math.min(n,o)}},cleanNode:function(e){e.f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=null}};function a(e,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(var r=0;r<e.length;r++){this.grid[r]=[];for(var a=0,o=e[r];a<o.length;a++){var i=new n(r,a,o[a]);this.grid[r][a]=i,this.nodes.push(i)}}this.init()}function n(e,t,r){this.x=e,this.y=t,this.weight=r}function o(e){this.content=[],this.scoreFunction=e}return a.prototype.init=function(){this.dirtyNodes=[];for(var e=0;e<this.nodes.length;e++)t.cleanNode(this.nodes[e])},a.prototype.cleanDirty=function(){for(var e=0;e<this.dirtyNodes.length;e++)t.cleanNode(this.dirtyNodes[e]);this.dirtyNodes=[]},a.prototype.markDirty=function(e){this.dirtyNodes.push(e)},a.prototype.neighbors=function(e){var t=[],r=e.x,a=e.y,n=this.grid;return n[r-1]&&n[r-1][a]&&t.push(n[r-1][a]),n[r+1]&&n[r+1][a]&&t.push(n[r+1][a]),n[r]&&n[r][a-1]&&t.push(n[r][a-1]),n[r]&&n[r][a+1]&&t.push(n[r][a+1]),this.diagonal&&(n[r-1]&&n[r-1][a-1]&&t.push(n[r-1][a-1]),n[r+1]&&n[r+1][a-1]&&t.push(n[r+1][a-1]),n[r-1]&&n[r-1][a+1]&&t.push(n[r-1][a+1]),n[r+1]&&n[r+1][a+1]&&t.push(n[r+1][a+1])),t},a.prototype.toString=function(){for(var e=[],t=this.grid,r=0;r<t.length;r++){for(var a=[],n=t[r],o=0;o<n.length;o++)a.push(n[o].weight);e.push(a.join(" "))}return e.join("\n")},n.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},n.prototype.getCost=function(e){return e&&e.x!=this.x&&e.y!=this.y?1.41421*this.weight:this.weight},n.prototype.isWall=function(){return 0===this.weight},o.prototype={push:function(e){this.content.push(e),this.sinkDown(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e},remove:function(e){var t=this.content.indexOf(e),r=this.content.pop();t!==this.content.length-1&&(this.content[t]=r,this.scoreFunction(r)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(e){this.sinkDown(this.content.indexOf(e))},sinkDown:function(e){for(var t=this.content[e];e>0;){var r=(e+1>>1)-1,a=this.content[r];if(!(this.scoreFunction(t)<this.scoreFunction(a)))break;this.content[r]=t,this.content[e]=a,e=r}},bubbleUp:function(e){for(var t=this.content.length,r=this.content[e],a=this.scoreFunction(r);;){var n,o=e+1<<1,i=o-1,s=null;if(i<t){var u=this.content[i];(n=this.scoreFunction(u))<a&&(s=i)}if(o<t){var l=this.content[o];this.scoreFunction(l)<(null===s?a:n)&&(s=o)}if(null===s)break;this.content[e]=this.content[s],this.content[s]=r,e=s}}},{astar:t,Graph:a}}}.apply(t,[r,t]),void 0===a||(e.exports=a)},3239:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};a=[r,t,r(9262),r(7185),r(2261),r(5182),r(2093),r(484)],n=function(e,t,r,a,n,i,s,u){"use strict";function l(e,t){var r,a,n,o,i,s,u,l=[],A={x:0,y:0},c={x:0,y:0};return A.x=t.p2.x-t.p1.x,A.y=t.p2.y-t.p1.y,c.x=t.p1.x-e.pos.x,c.y=t.p1.y-e.pos.y,r=A.x*c.x+A.y*c.y,a=2*(A.x*A.x+A.y*A.y),r*=-2,n=Math.sqrt(r*r-2*a*(c.x*c.x+c.y*c.y-e.radius*e.radius)),isNaN(n)||(i=(r+n)/a,s={},u={},(o=(r-n)/a)<=1&&o>=0&&(s.x=t.p1.x+A.x*o,s.y=t.p1.y+A.y*o,l[0]=s),i<=1&&i>=0&&(u.x=t.p1.x+A.x*i,u.y=t.p1.y+A.y*i,l[l.length]=u)),l}Object.defineProperty(t,"__esModule",{value:!0}),t.getGenericAvoidance=void 0;var A=function(e,t,r){for(var n=null,o=0,i=0,s=Number.MAX_VALUE,u=0;u<t.length;u++){var A=t[u];if(e.guid!==A.guid){var c=l(A,{p1:e.pos,p2:r});if(c.length)if(c.length>1){var d=(0,a.distanceBetweenXYXY)(e.pos.x,e.pos.y,c[0].x,c[0].y),p=(0,a.distanceBetweenXYXY)(e.pos.x,e.pos.y,c[1].x,c[1].y);d<s&&(s=d,n=A,o=c[0].x,i=c[0].y),p<s&&(s=p,n=A,o=c[0].x,i=c[0].y)}else{var f=(0,a.distanceBetweenXYXY)(e.pos.x,e.pos.y,c[0].x,c[0].y);f<s&&(s=f,n=A,o=c[0].x,i=c[0].y)}}}return{item:n,x:o,y:i}},c=[{angle:0,dist:1},{angle:.01,dist:.7},{angle:-.01,dist:.7},{angle:.15,dist:.5},{angle:-.15,dist:.5}],d=new r.Vector(0,0),p=new r.Vector(0,0),f=new r.Vector(0,0),h=(0,u.rect_pool_pop)(0,0,0,0);t.getGenericAvoidance=function(e,t,r,a,n){if(void 0===n&&(n=800),(0,i.onStage)(t,e,3*e.radius)){var u=(0,s.getQuadTreesObj)();if(!u.All)return[];h.update(e.pos.x-.5*n,e.pos.y-.5*n,n,n);var l=u.queryTreesRect(o(o([],r,!0),[4,17],!1),h);return l.push.apply(l,a),l}return[]},t.default=function(e,t,r,o){if(void 0===o&&(o=1),d.x=0,d.y=0,0===r.length||e.vel.getLength()<o)return{avoidance:d,avoidanceAngle:0};p.x=0,p.y=0;for(var i=null,s=-1,u=0,l=0;l<c.length;l++){p.x=0,p.y=0,p.setLength(500*c[l].dist),(0,n.rotateVector)(p,t+Math.PI*c[l].angle,p),p.add(e.pos);var h=A(e,r,p);if(i){s<0&&(s=(0,a.distanceBetweenXYXY)(e.pos.x,e.pos.y,i.x,i.y)/c[l].dist);var v=(0,a.distanceBetweenXYXY)(e.pos.x,e.pos.y,h.x,h.y)/c[l].dist;v<s&&(s=v,i=h,u=c[l].angle)}else i=h,u=c[l].angle}var g=i.item,y=i.x,m=i.y;if(f.x=0,f.y=0,null==g)return{avoidance:d,avoidanceAngle:0};var _=Math.atan2(g.pos.y-e.pos.y,g.pos.x-e.pos.x),x=Math.atan2(m-e.pos.y,y-e.pos.x);f.setLength(g.radius+1.5*e.radius);var S=0;return u<0||0===u&&_<x?S=x+.5*Math.PI-Math.PI*u:S=x-.5*Math.PI-Math.PI*u,(f=(0,n.rotateVector)(f,S)).add(g.pos),d.setLength(.1),(d=(0,n.rotateVector)(d,S)).getLength()>2&&d.setLength(2),{avoidance:d,avoidanceAngle:u,data:{force:{x:e.pos.x+50*d.x,y:e.pos.y+50*d.y},radius:{x:f.x,y:f.y},threat:g,closest:{x:y,y:m}}}}}.apply(t,a),void 0===n||(e.exports=n)},2104:(e,t,r)=>{var a,n;a=[r,t,r(1128)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSightPolygon=t.pairToPolys=t.polysToPair=t.getRayCasterTimings=void 0,t.getRayCasterTimings=function(e){var t=[];return t.push(a.angles*e),t.push(a.angles2*e),function(){for(var e in a)a[e]=0}(),t};var a={total:0,polysToPair:0,pairToPolys:0,interSectionNew:0,interSection:0,raycasting:0,setup:0,filtering:0,uniqe:0,uniqe2:0,angles:0,angles2:0,sorting:0};t.polysToPair=function(e){for(var t=e.length,r=[],a=0;a<t;a+=4)r.push({a:{x:e[a],y:e[a+1]},b:{x:e[a+2],y:e[a+3]}});return r},t.pairToPolys=function(e){for(var t=e.length,r=[],a=0;a<t;a++){var n=e[a];r.push(n.x,n.y)}return r};var n=function(e,t){var a=e.a.x,n=e.a.y,o=e.b.x-e.a.x,i=e.b.y-e.a.y,s=t.a.x,u=t.a.y,l=t.b.x-t.a.x,A=t.b.y-t.a.y,c=(0,r.OperatorApproxDist97)(o,i),d=(0,r.OperatorApproxDist97)(l,A);if(o/c==l/d&&i/c==A/d)return null;var p=(o*(u-n)+i*(a-s))/(l*i-A*o);if(p<0||p>1)return null;var f=(s+l*p-a)/o;return f<0?null:{x:a+o*f,y:n+i*f,param:f}};t.getSightPolygon=function(e,t,r){var o=function(e){for(var t=performance.now(),r=[],n={},o=e.length,i=0;i<o;i++){var s=e[i],u=s.a.x/s.a.y;n[u]||(r.push(s.a),n[u]=!0);var l=s.b.x/s.b.y;n[l]||(r.push(s.b),n[l]=!0)}return a.uniqe+=performance.now()-t,r}(r),i=performance.now(),s=function(e,t,r){for(var n=performance.now(),o=[],i=e.length,s=0;s<i;s++){var u=e[s],l=Math.atan2(u.y-r,u.x-t);u.angle=l,o.push(l-1e-5,l+1e-5)}return a.angles+=performance.now()-n,o}(o,e,t);i=performance.now();for(var u=[],l=s.length,A=0;A<l;A++){var c=s[A],d={a:{x:e,y:t},b:{x:e+Math.cos(c),y:t+Math.sin(c)},angle:c};u.push(d)}for(var p=[],f=(Number.MAX_VALUE,Number.MIN_VALUE,1.01*t),h=.99*t,v=1.01*e,g=.99*e,y=[],m=[],_=[],x=[],S=performance.now(),T=0;T<r.length;T++){var E=r[T],M=E.a.y>f,b=E.b.y>f,I=E.a.y<h,L=E.b.y<h,P=E.a.x>v,w=E.b.x>v,R=E.a.x<g,O=E.b.x<g;M&&b&&R&&O?_.push(E):M&&b&&P&&w?x.push(E):I&&L&&R&&O?y.push(E):I&&L&&P&&w?m.push(E):M&&b?(_.push(E),x.push(E)):I&&L?(y.push(E),m.push(E)):P&&w?(x.push(E),m.push(E)):R&&O?(_.push(E),y.push(E)):(_.push(E),x.push(E),y.push(E),m.push(E))}a.sorting+=performance.now()-S;var C=[];for(A=0;A<l;A++){var D=null,G=(C=(c=(d=u[A]).angle)<-.5*Math.PI?y:c<0?m:c<.5*Math.PI?x:_).length;for(T=0;T<G;T++){var N=n(d,C[T]);N&&(!D||N.param<D.param)&&(D=N)}D&&(D.angle=c,p.push(D))}a.interSectionNew+=performance.now()-i,i=performance.now();for(var B=[],F=0;F<p.length;F++){for(var V=p[F],k=!0,X=F;X<p.length;X++){var H=p[X];if(F!=X&&Math.abs(V.x-H.x)<2&&Math.abs(V.y-H.y)<2){k=!1;break}}k&&B.push(V)}return p=B,a.filtering+=performance.now()-i,p.sort((function(e,t){return e.angle-t.angle}))}}.apply(t,a),void 0===n||(e.exports=n)},7569:(e,t,r)=>{var a,n;a=[r,t,r(5047)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformPosToGrid=void 0;var a=function(e,t,r,a,n,o){if(!(r<1))for(var i,s,u=0,l=r,A=-r;u<=l;)i=e-l,s=l+l,c(e-u,t-l,t+l,u+u),c(i,t-u,t+u,s),(A+=u+++u)>=0&&(A-=--l+l);function c(e,t,r,a){a++;for(var n=0;a--;)d(n=e+a,t),d(n,r)}function d(e,t){e<n&&t<o&&e>=0&&t>=0&&(a[t*n+e]=0)}};t.transformPosToGrid=function(e,t,a,n,o,i){var s=(0,r.getSectorSize)(e.WW,e.WH);return{x:Math.round((t-s.w*n)/s.w*i),y:Math.round((a-s.h*o)/s.h*i)}},t.default=function(e,t,n,o,i,s,u){for(var l=[],A=n*o,c=0;c<A;c++)l.push(1);var d=(0,r.getSectorSize)(t.WW,t.WH),p={},f=i.length;for(c=0;c<f;c++){var h=i[c],v=h.guid;if(!p[v]){p[v]=!0;var g=(h.pos.x-d.w*s)/d.w*e,y=(h.pos.y-d.h*u)/d.h*e,m=h.radius/d.w*e;a(Math.round(g),Math.round(y),Math.ceil(m),l,n,o)}}var _=[];for(c=0;c<o;c++)_.push(l.slice(c*n,c*n+n));return _}}.apply(t,a),void 0===n||(e.exports=n)},7185:(e,t,r)=>{var a,n;a=[r,t,r(9262),r(7899),r(2261),r(8015),r(9075)],n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.circleCircleResolverQuick=t.resolve=t.angleDifference=t.fastPointCircleColl=t.fastCircleColl=t.distBetweenVectorsRelative=t.distanceBetweenVectors2Arrow=t.distanceBetweenVectors=t.distanceBetweenXYXY=t.distanceBetweenXYXYRelative=t.radiusIntersectPoint=t.radiusIntersectXYXY=t.radiusIntersect=t.midpointN=t.midpointAXAYBXBY=t.midpoint=t.distanceBetween=t.coarseVecotr=t.coarse=t.fine=t.getGuid=t.SetGuidToNegative=t.getMathSqrtUsage=void 0,t.distanceBetweenVectors2=function(e,t){d++;var r=e.x-t.x,a=e.y-t.y;return Math.sqrt(r*r+a*a)};var s=500,u=0,l=0,A=0,c=0,d=0,p=0;t.getMathSqrtUsage=function(){var e={distanceBetweenXYXYUse:p,fineUse:u,coarseUse:l,coarseVectorUse:A,distanceBetweenUse:c,distanceBetweenVectorsUse:d};return u=0,l=0,A=0,c=0,d=0,p=0,e};var f=1;t.SetGuidToNegative=function(){f=-1},t.getGuid=function(){return s+=f},t.fine=function(e,t,r){u++;var a,n=0,o=0;for(n=0,o=e-1;n<e;o=n++)t[n].y>r.y!=t[o].y>r.y&&r.x<(t[o].x-t[n].x)*(r.y-t[n].y)/(t[o].y-t[n].y)+t[n].x&&(a=!a);return a},t.coarse=function(e,t){l++;var r=e.radius+t.radius,a=e.pos.x-t.pos.x,n=e.pos.y-t.pos.y;return r>Math.sqrt(a*a+n*n)},t.coarseVecotr=function(e,t,r,a){A++;var n=t+a,o=e.x-r.x,i=e.y-r.y;return n>Math.sqrt(o*o+i*i)},t.distanceBetween=function(e,t){c++;var r=e.pos.x-t.pos.x,a=e.pos.y-t.pos.y;return Math.sqrt(r*r+a*a)},t.midpoint=function(e,t,a,n){return void 0===a&&(a=.5),void 0===n&&(n=new r.Vector(0,0)),n.set(e.x+(t.x-e.x)*a,e.y+(t.y-e.y)*a),n},t.midpointAXAYBXBY=function(e,t,r,a,n){return void 0===n&&(n=.5),[e+(r-e)*n,t+(a-t)*n]},t.midpointN=function(e,t,r){return void 0===r&&(r=.5),e+(t-e)*r},t.radiusIntersect=function(e,t){return(e.pos.x-t.pos.x)*(e.pos.x-t.pos.x)+(e.pos.y-t.pos.y)*(e.pos.y-t.pos.y)<(e.radius+t.radius)*(e.radius+t.radius)},t.radiusIntersectXYXY=function(e,t,r,a,n,o){return(e-a)*(e-a)+(t-n)*(t-n)<(r+o)*(r+o)},t.radiusIntersectPoint=function(e,t,r,a,n){return(e-a)*(e-a)+(t-n)*(t-n)<r*r},t.distanceBetweenXYXYRelative=function(e,t,r,a){var n=e-r,o=t-a;return n*n+o*o},t.distanceBetweenXYXY=function(e,t,r,a){p++;var n=e-r,o=t-a;return Math.sqrt(n*n+o*o)},t.distanceBetweenVectors=function(e,t){d++;var r=e.x-t.x,a=e.y-t.y;return Math.sqrt(r*r+a*a)},t.distanceBetweenVectors2Arrow=function(e,t){var r=e.x-t.x,a=e.y-t.y;return Math.sqrt(r*r+a*a)},t.distBetweenVectorsRelative=function(e,t){var r=e.x-t.x,a=e.y-t.y;return r*r+a*a},t.fastCircleColl=function(e,t){var r=e.radius+t.radius,a=e.pos.x-t.pos.x,n=e.pos.y-t.pos.y;return r*r>a*a+n*n},t.fastPointCircleColl=function(e,t){var r=t.radius,a=e.x-t.pos.x,n=e.y-t.pos.y;return r*r>a*a+n*n},t.angleDifference=function(e,t){var r=(e-t)%a.doublePI,n=(e-t)%a.doublePI;return r<n?-r:n};var h=new r.Vector(0,0),v=new r.Vector(0,0);t.resolve=function(e,r,n){if(6===r.shape||6===n.shape||3===r.shape||3===n.shape)return(0,t.circleCircleResolverQuick)(e,r,n);var s=r.vel.getLength(),u=n.vel.getLength();if(s>a.VELOCITY_THRESHOLD_COLLISION_SUBSTEP||u>a.VELOCITY_THRESHOLD_COLLISION_SUBSTEP){h.setFromVec(r.vel).mult(e),v.setFromVec(n.vel).mult(e),r.pos.subtract(h),n.pos.subtract(v);var l=Math.max(s,u),A=Math.ceil(l/a.VELOCITY_THRESHOLD_COLLISION_SUBSTEP),c=1/A;h.mult(c),v.mult(c);for(var d=!1,p=0;p<A;p++)if(r.pos.add(h),n.pos.add(v),(0,t.fastCircleColl)(r,n)&&null!==(f=(0,o.SAT_collider)(r,n)).pen){(g=new i.CollData(r,n,f.axis,f.pen,f.vertex)).penRes(),g.collRes(),d=!0;break}if(d)return!0}else{var f,g;if(null!==(f=(0,o.SAT_collider)(r,n)).pen)return(g=new i.CollData(r,n,f.axis,f.pen,f.vertex)).penRes(),g.collRes(),!0}return!1},t.circleCircleResolverQuick=function(e,t,r,a,o,i,s,u){void 0===a&&(a=t.radius),void 0===o&&(o=r.radius),void 0===i&&(i=t.radius),void 0===s&&(s=r.radius),void 0===u&&(u=1);var l=r.pos.x-t.pos.x,A=r.pos.y-t.pos.y,c=Math.sqrt(l*l+A*A);if(0===c)return t.pos.x+=o,t.pos.y+=o,!0;if(a+o>=c){var d=l/c,p=A/c,f=c*(a/(a+o))*u,h=t.pos.x+d*f,v=t.pos.y+p*f;if(t.pos.x=h-d*a,t.pos.y=v-p*a,r.pos.x=h+d*o,r.pos.y=v+p*o,a+o>=c){var g=l/c,y=A/c;r.pos.x=t.pos.x+g*(a+o),r.pos.y=t.pos.y+y*(a+o)}return function(e,t,r,a,o,i,s,u,l){var A=u-l,c=u+l,d=r*Math.sin(o-s),p=Math.cos(s),f=Math.sin(s),h=r*Math.cos(o-s),v=a*Math.cos(i-s),g=Math.cos(s+Math.PI/2),y=Math.sin(s+Math.PI/2),m=(h*A+2*l*v)/c,_=m*p+d*g,x=m*f+d*y,S=e.vel.getAngle();e.vel.x=_,e.vel.y=x;var T=e.vel.getAngle(),E=(0,n.angleDelta)(S,T);s+=Math.PI;var M=a*Math.sin(i-s);h=r*Math.cos(o-s);var b=(m=((v=a*Math.cos(i-s))*-A+2*u*h)/c)*-p+M*-g,I=m*-f+M*-y,L=t.vel.getAngle();t.vel.x=b,t.vel.y=I;var P=t.vel.getAngle(),w=(0,n.angleDelta)(L,P);e.vel.mult(.98-(0,n.map)(Math.abs(E),0,Math.PI,0,.08)),t.vel.mult(.98-(0,n.map)(Math.abs(w),0,Math.PI,0,.08))}(t,r,Math.sqrt(t.vel.x*t.vel.x+t.vel.y*t.vel.y),Math.sqrt(r.vel.x*r.vel.x+r.vel.y*r.vel.y),Math.atan2(t.vel.y,t.vel.x),Math.atan2(r.vel.y,r.vel.x),Math.atan2(p,d),t.mass,r.mass),t.pos.x+=t.vel.x,t.pos.y+=t.vel.y,r.pos.x+=r.vel.x,r.pos.y+=r.vel.y,!0}return!1}}.apply(t,a),void 0===n||(e.exports=n)},2610:(e,t,r)=>{var a,n;a=[r,t,r(9262),r(7344),r(4077),r(1330)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForcelifeImpact=void 0,new r.Vector(0,0),new r.Vector(0,0),t.ForcelifeImpact=function(e,t){var r=Math.abs(t.x),a=Math.abs(t.y);(r>5||a>5)&&Math.max(r,a)},t.default=function(e,t,r,a,n){void 0===a&&(a=1),void 0===n&&(n=1)}}.apply(t,a),void 0===n||(e.exports=n)},5182:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onStageXY=t.onStage=t.check=t.contain=t.bounce=t.shift=t.disableMapShift=void 0;var r=!1;t.disableMapShift=function(e){void 0===e&&(e=!0),r=e},t.shift=function(e,t,a,n,o){return void 0===n&&(n=1),void 0===o&&(o=1),!r&&(e.pos.x>=t?(e.pos.x=n,!0):e.pos.x<=n?(e.pos.x=t-o-1,!0):e.pos.y>=a?(e.pos.y=o,!0):e.pos.y<=o&&(e.pos.y=a-o-1,!0))},t.bounce=function(e,t,r,a,n){void 0===a&&(a=0),void 0===n&&(n=0);var o=-.5,i=e.radius+1,s=!1;return e.pos.x+i>=t?(e.pos.x=t-i,e.vel.x*=o,s=!0):e.pos.x-i<=a&&(e.pos.x=i,e.vel.x*=o,s=!0),e.pos.y+i+0>=r?(e.pos.y=r-(i+0),e.vel.y*=o,e.vel.x*=.5,s=!0):e.pos.y-i<=n&&(e.pos.y=i,e.vel.y*=o,s=!0),s},t.contain=function(e,t,r,a){void 0===a&&(a=100);var n=e.radius+1+a;e.pos.x+n>=t?(e.pos.x=t-n,e.vel.x=0):e.pos.x-n<=0&&(e.pos.x=n,e.vel.x=0),e.pos.y+n>=r?(e.pos.y=r-n,e.vel.y=0):e.pos.y-n<=0&&(e.pos.y=n,e.vel.y=0)},t.check=function(e,t,r,a,n){return void 0===a&&(a=1),void 0===n&&(n=1),e.pos.x>=t||e.pos.x<=a||e.pos.y>=r||e.pos.y<=n},t.onStage=function(e,t,r){void 0===r&&(r=0);var a=t.pos.x,n=t.pos.y,o=e.SX,i=e.SY,s=e.SW,u=e.SH;return a>o-r&&a<o+s+r&&n>i-r&&n<i+u+r},t.onStageXY=function(e,t,r,a){void 0===a&&(a=0);var n=e.SX,o=e.SY,i=e.SW,s=e.SH;return t>n-a&&t<n+i+a&&r>o-a&&r<o+s+a}}.apply(t,[r,t]),void 0===a||(e.exports=a)},9752:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeasureTimeSingle=t.MeasureTimeFn=void 0,t.default=function(e,t,r,a,n){void 0===n&&(n=1);var o=performance.now(),i=e(t)||"unknown (yup we fucked up)",s=(performance.now()-o)*n;return r.push({name:i,time:s,type:a}),{time:s,name:i}},t.MeasureTimeFn=function(e,t){var r=performance.now();e();var a=performance.now()-r;return t&&t.push(a),a},t.MeasureTimeSingle=function(e){var t=performance.now();return e(),performance.now()-t}}.apply(t,[r,t]),void 0===a||(e.exports=a)},1128:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fastFunctionParticleUpdate=t.fastFunctionTreeInsert=t.operatorAtan2=t.OperatorSqrt99=t.OperatorApproxDist96=t.OperatorApproxDist97=t.getOperatorUsage=void 0;var r=0,a=0;t.getOperatorUsage=function(){var e={dist97:r,dist96:a};return r=0,a=0,e},t.OperatorApproxDist97=function(e,t){var a,n,o;return r++,e<0&&(e=-e),t<0&&(t=-t),e<t?(a=e,n=t):(a=t,n=e),o=1007*n+441*a,n<a<<4&&(o-=40*n),o+512>>10},t.OperatorApproxDist96=function(e,t){var r,n;return a++,e<0&&(e=-e),t<0&&(t=-t),e<t?(r=e,n=t):(r=t,n=e),(n<<8)+(n<<3)-(n<<4)-(n<<1)+(r<<7)-(r<<5)+(r<<3)-(r<<1)>>8};var n=new ArrayBuffer(Float32Array.BYTES_PER_ELEMENT),o=new Float32Array(n),i=new Uint32Array(n);t.OperatorSqrt99=function(e){var t=.5*e;o[0]=e,i[0]=1597463007-(i[0]>>1);var r=o[0];return r*(1.5-t*r*r)},t.operatorAtan2=function(e,t){var r=1-(e<0)<<1,a=e*r+2220446049250313e-31,n=(t<0)<<1,o=1-n;return(.7853981634*(n+1)+(.1821*(a=(t-o*a)/(o*t+a))*a-.9675)*a)*r*.25},t.fastFunctionTreeInsert=function(e,t,r){for(var a=r.x,n=r.y,o=a+r.width,i=n+r.height,s=e.length,u=0;u<s;u++){var l=e[u],A=l.pos.x,c=l.pos.y;A>a&&c>n&&A<o&&c<i&&t.insertUnsafe(l)}},t.fastFunctionParticleUpdate=function(e,t,r){void 0===r&&(r=.98);for(var a=e.length,n=0;n<a;n++){var o=e[n],i=o.vel,s=i.x*t,u=i.y*t;o.pos.x+=s,o.pos.y+=u,i.x*=r,i.y*=r}}}.apply(t,[r,t]),void 0===a||(e.exports=a)},1845:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerlinNoise3d=t.PerlinNoise2d=void 0;var r=function(e,t,r){this.dot2=function(e,t){return this.x*e+this.y*t},this.dot3=function(e,t,r){return this.x*e+this.y*t+this.z*r},this.x=e,this.y=t,this.z=r},a=[new r(1,1,0),new r(-1,1,0),new r(1,-1,0),new r(-1,-1,0),new r(1,0,1),new r(-1,0,1),new r(1,0,-1),new r(-1,0,-1),new r(0,1,1),new r(0,-1,1),new r(0,1,-1),new r(0,-1,-1)],n=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],o=new Array(512),i=new Array(512);!function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var t=0;t<256;t++){var r;r=1&t?n[t]^255&e:n[t]^e>>8&255,o[t]=o[t+256]=r,i[t]=i[t+256]=a[r%12]}}(0);var s=function(e){return e*e*e*(e*(6*e-15)+10)},u=function(e,t,r){return(1-r)*e+r*t};t.PerlinNoise2d=function(e,t){var r=Math.floor(e),a=Math.floor(t);e-=r,t-=a;var n=i[(r&=255)+o[a&=255]].dot2(e,t),l=i[r+o[a+1]].dot2(e,t-1),A=i[r+1+o[a]].dot2(e-1,t),c=i[r+1+o[a+1]].dot2(e-1,t-1),d=s(e);return u(u(n,A,d),u(l,c,d),s(t))},t.PerlinNoise3d=function(e,t,r){var a=Math.floor(e),n=Math.floor(t),l=Math.floor(r);e-=a,t-=n,r-=l;var A=i[(a&=255)+o[(n&=255)+o[l&=255]]].dot3(e,t,r),c=i[a+o[n+o[l+1]]].dot3(e,t,r-1),d=i[a+o[n+1+o[l]]].dot3(e,t-1,r),p=i[a+o[n+1+o[l+1]]].dot3(e,t-1,r-1),f=i[a+1+o[n+o[l]]].dot3(e-1,t,r),h=i[a+1+o[n+o[l+1]]].dot3(e-1,t,r-1),v=i[a+1+o[n+1+o[l]]].dot3(e-1,t-1,r),g=i[a+1+o[n+1+o[l+1]]].dot3(e-1,t-1,r-1),y=s(e),m=s(t),_=s(r);return u(u(u(A,f,y),u(c,h,y),_),u(u(d,v,y),u(p,g,y),_),m)}}.apply(t,[r,t]),void 0===a||(e.exports=a)},4138:(e,t,r)=>{var a,n;a=[r,t,r(9262),r(484)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRagdoll=t.RagDoll=t.Link=void 0;var n=function(){function e(e){this.x=e.x,this.y=e.y,this.xb=this.x,this.yb=this.y+2,this.w=0,this.stiffness=e.stiffness,this.mass=1}return e.prototype.anim=function(e){var t=(this.x-this.xb)*this.stiffness,r=(this.y-this.yb)*this.stiffness;this.xb=this.x,this.yb=this.y,this.x+=t+.5*(Math.random()-.5)*e,this.y+=r+.5*(Math.random()-.5)*e},e}(),o=function(){function e(e,t,r,a,n,o,i,s){this.p1=e,this.p2=t,this.p3=r,this.len1=a,this.len2=n,this.angle=o,this.range=i,this.force=s||.2}return e.prototype.solve=function(){var e,t,r,a,n,o,i,s,u,l,A,c;e=Math.atan2(this.p2.y-this.p1.y,this.p2.x-this.p1.x),t=Math.atan2(this.p3.y-this.p2.y,this.p3.x-this.p2.x),r=(r=this.angle-(t-e))>Math.PI?r-2*Math.PI:r<-Math.PI?r+2*Math.PI:r,a=Math.abs(r)>this.range?(-Math.sign(r)*this.range+r)*this.force:0,n=this.p1.mass+this.p2.mass,o=this.p1.mass/n,i=this.p2.mass/n,A=Math.cos(e-a),c=Math.sin(e-a),u=this.p1.x+(this.p2.x-this.p1.x)*i,l=this.p1.y+(this.p2.y-this.p1.y)*i,this.p1.x=u-A*this.len1*i,this.p1.y=l-c*this.len1*i,this.p2.x=u+A*this.len1*o,this.p2.y=l+c*this.len1*o,e=Math.atan2(this.p2.y-this.p3.y,this.p2.x-this.p3.x)+a,n=this.p2.mass+this.p3.mass,i=this.p2.mass/n,s=this.p3.mass/n,A=Math.cos(e),c=Math.sin(e),u=this.p3.x+(this.p2.x-this.p3.x)*i,l=this.p3.y+(this.p2.y-this.p3.y)*i,this.p3.x=u-A*this.len2*i,this.p3.y=l-c*this.len2*i,this.p2.x=u+A*this.len2*s,this.p2.y=l+c*this.len2*s},e}(),i=function(){function e(e,t){this.length=t.length*e.s,this.width=t.width*e.s,this.type=t.memberType,e.points[t.p0]=this.p0=e.points[t.p0]?e.points[t.p0]:new n(e),e.points[t.p1]=this.p1=e.points[t.p1]?e.points[t.p1]:new n(e),this.width>this.p0.w&&(this.p0.w=this.width);var r=t.mass||1;r>this.p0.mass&&(this.p0.mass=r),r>this.p1.mass&&(this.p1.mass=r)}return e.prototype.draw=function(){var e=this.p1.x-this.p0.x,t=this.p1.y-this.p0.y,a=Math.atan2(t,e),n=new r.Vector(this.length,0);n.setAngle(a);var o=n.toPoint();return{a:{x:this.p0.x,y:this.p0.y},b:o,angle:a,end:{x:this.p0.x+n.x,y:this.p0.y+n.y}}},e}();t.Link=i;var s=(0,a.rect_pool_pop)(0,0,0,0),u=function(){function e(e,t,r,a,n){function s(e,t){for(var r=0;r<n.links.length;r++){var a=n.links[r];if(a.p0===e&&a.p1===t||a.p0===t&&a.p1===e)return a.length}return 1}this.points=[],this.links=[],this.angles=[],this.x=e,this.y=t,this.s=r,this.stiffness=a,this.points=[],this.links=[],this.angles=[];for(var u=0;u<n.links.length;u++){var l=n.links[u];this.links.push(new i(this,l))}for(u=0;u<n.constraints.length;u++){var A=n.constraints[u];this.angles.push(new o(this.points[A.p1],this.points[A.p2],this.points[A.p3],s(A.p1,A.p2)*r,s(A.p2,A.p3)*r,A.angle,A.range,A.force))}}return e.prototype.anim=function(e){for(var t=0,r=void 0;r=this.points[t++];r.anim(e));for(t=0,r=void 0;r=this.angles[t++];r.solve());},e.prototype.getRect=function(){for(var e=Number.MAX_VALUE,t=Number.MAX_VALUE,r=Number.MIN_VALUE,a=Number.MIN_VALUE,n=0,o=void 0;o=this.points[n++];)o.x>r&&(r=o.x),o.y>a&&(a=o.y),o.x<e&&(e=o.x),o.y<t&&(t=o.y);return s.update(e,t,r-e,a-t),s},e.prototype.collideIM=function(e){for(var t=0,r=void 0;r=this.points[t++];){var a=r.x-e.pos.x,n=r.y-e.pos.y,o=Math.sqrt(a*a+n*n),i=e.radius+r.w;if(o<i){o=Math.abs(i-o);var s=Math.atan2(n,a);r.x+=o*Math.cos(s),r.y+=o*Math.sin(s)}}},e.prototype.collide=function(e){for(var t=0,r=void 0;r=this.points[t++];)for(var a=0,n=void 0;n=e.points[a++];){var o=r.x-n.x,i=r.y-n.y,s=Math.sqrt(o*o+i*i),u=.5*(r.w+n.w);if(s<u){s=Math.abs(u-s);var l=Math.atan2(i,o),A=s*Math.cos(l)*.5,c=s*Math.sin(l)*.5;r.x+=A,r.y+=c,n.x-=A,n.y-=c}}},e}();t.RagDoll=u;var l=.1,A=.1,c={links:[{p0:0,p1:1,length:3,width:3,img:"rd05.png",memberType:1},{p0:1,p1:2,length:5,width:2.5,img:"rd09.png",memberType:2},{p0:3,p1:7,length:6,width:3.5,img:"rd01.png",memberType:5},{p0:7,p1:8,length:7,width:5,img:"rd06.png",memberType:6},{p0:3,p1:9,length:6,width:3.5,img:"rd01.png",memberType:7},{p0:9,p1:10,length:7,width:5,img:"rd06.png",memberType:8},{p0:0,p1:4,length:2.5,width:4.5,img:"rd04.png",memberType:9},{p0:0,p1:3,length:9,width:5,mass:10,img:"rd08.png",memberType:0},{p0:0,p1:5,length:5,width:3,img:"rd05.png",memberType:3},{p0:5,p1:6,length:5,width:2.5,img:"rd07.png",memberType:4}],constraints:[{p1:4,p2:0,p3:3,angle:0,range:.1,force:.2*A*5},{p1:3,p2:0,p3:1,angle:Math.PI/2,range:2*Math.PI*l,force:.2*A},{p1:0,p2:1,p3:2,angle:-Math.PI/2,range:Math.PI/2*l,force:.2*A},{p1:3,p2:0,p3:5,angle:Math.PI/2,range:2*Math.PI*l,force:.2*A},{p1:0,p2:5,p3:6,angle:-Math.PI/2,range:Math.PI/2*l,force:.2*A},{p1:0,p2:3,p3:7,angle:-Math.PI/3,range:Math.PI/2*l,force:.2*A},{p1:0,p2:3,p3:9,angle:-Math.PI/3,range:Math.PI/2*l,force:.2*A},{p1:3,p2:7,p3:8,angle:Math.PI/2,range:Math.PI/3*l,force:.2*A},{p1:3,p2:9,p3:10,angle:Math.PI/2,range:Math.PI/3*l,force:.2*A}]};t.createRagdoll=function(e,t,r){return void 0===e&&(e=300),void 0===t&&(t=300),void 0===r&&(r=10),new u(e,t,r,.998,c)}}.apply(t,a),void 0===n||(e.exports=n)},2261:(e,t,r)=>{var a,n;a=[r,t,r(9262),r(7899)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spreadValueEquallyInArray=t.createBlockcircleArray=t.normalize=t.pad_9=t.pad0009=t.pad009=t.pad09=t.rotateVector=t.RandomStepBased=t.angleDelta=t.normalizeRadianAngle=t.normalizeRadianNew=t.faceTargetPos=t.diffRadianPositive=t.normalizeRadianPositive=t.wrapRadianAngle=t.eqNumberInArr=t.wrapTargetPos=t.map=t.MAX_INT_RANGES=void 0;t.MAX_INT_RANGES={MAX_INT_32:2147483647,MAX_INT_32_SS_5000:2147478647,MAX_INT_32_HALF:Math.round(1073741823.5),MAX_INT_32_QUART:Math.round(536870911.75)},t.map=function(e,t,r,a,n,o,i){void 0===o&&(o=!0),void 0===i&&(i=!1);var s=(e-t)*(n-a)/(r-t)+a;return i&&(s=n-s),o?Math.max(a,Math.min(n,s)):s};var n=new r.Vector(0,0);t.wrapTargetPos=function(e,t,r,a,o){var i=Math.abs(r.x-a.x),s=Math.abs(r.y-a.y),u=r.x-a.x,l=r.y-a.y,A=a.x,c=a.y;return i>.5*e&&(A+=u>0?u+e:u-e),s>.5*t&&(c+=l>0?l+t:l-t),(o=o||n).x=A,o.y=c,o},t.eqNumberInArr=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1},t.wrapRadianAngle=function(e){return e<0&&(e+=a.doublePI),e%a.doublePI},t.normalizeRadianPositive=function(e){var t=2*Math.PI;return e<0?e=e%t+t:e>t&&(e%=t),e},t.diffRadianPositive=function(e,t){var r=Math.abs(e-t)>Math.PI,a=e>Math.PI,n=t>Math.PI,o=2*Math.PI;return a?n?t-e:r?o-e+t:t-e:n&&r?-(o-t+e):t-e},t.faceTargetPos=function(e,r,a,n,o,i){void 0===o&&(o=.05),void 0===i&&(i=1.1);var s=Math.atan2(a.y-e.y,a.x-e.x);return r+(0,t.angleDelta)(r,s)*i*o*n},t.normalizeRadianNew=function(e){return(e=(360+(e%=360))%360)>180&&(e-=360),e},t.normalizeRadianAngle=function(e){return e-a.doublePI*Math.floor((e+Math.PI)/a.doublePI)},t.angleDelta=function(e,t){return Math.abs(t-e)<Math.PI?t-e:t>e?t-e-a.doublePI:t-e+a.doublePI};var o={};t.RandomStepBased=function(e,t){return 0===e?o[t]||(o[t]=Math.random()):Math.random()},t.rotateVector=function(e,t,a){void 0===a&&(a=new r.Vector(0,0));var n=e.x*Math.cos(t)-e.y*Math.sin(t),o=e.y*Math.cos(t)+e.x*Math.sin(t);return a.set(n,o),a},t.pad09=function(e){return e<10?"0"+e:e},t.pad009=function(e){return e<100?e<10?"00"+e:"0"+e:e+""},t.pad0009=function(e){return e<1e3?e<100?e<10?"000"+e:"00"+e:"0"+e:e+""},t.pad_9=function(e){return e<10?" "+e:e+""};var i={},s={};t.normalize=function(e,t,r,a,n){void 0===r&&(r=100),void 0===a&&(a=0),void 0===n&&(n="");var o=0,u=Number.MIN_VALUE,l=Number.MAX_VALUE,A=i[t]=i[t]||[];A.push(e);var c=s[t]=s[t]||[];n&&c.push(n);var d=A.length;d>r&&(A.shift(),d--);for(var p=0;p<d;p++){var f=A[p];o+=f,f<l&&(l=f),f>u&&(u=f)}return a>0?{avg:parseFloat((o/d).toFixed(a)),high:parseFloat(u.toFixed(a)),low:parseFloat(l.toFixed(a)),name:n}:{avg:Math.round(o/d),high:Math.round(u),low:Math.round(l),name:n}},t.createBlockcircleArray=function(e,t,n,o){for(var i=o.x,s=o.y,u=0,l=0,A=e,c=[];A>-1;--A)u=i+Math.cos(a.doublePI*(A/e)+t)*n|0,l=s+Math.sin(a.doublePI*(A/e)+t)*n|0,c.push(new r.Vector(u,l));return c},t.spreadValueEquallyInArray=function(e,t,r){var a=e.length*r,n=e.map((function(e){return(r-e)/a})),o=0;if(n.forEach((function(e){return o+=e})),0===o)return e;var i=n.map((function(e,t){return n[t]/o})).map((function(e){return Math.round(e*t)}));return e.map((function(e,t){return Math.min(r,e+i[t])}))}}.apply(t,a),void 0===n||(e.exports=n)},1874:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var a=r.pos,n=r.radius,o=e.x-a.x,i=e.y-a.y,s=t.x-a.x,u=(t.y-a.y-i)/(s-o),l=i-u*o,A=Math.pow(n,2)*Math.pow(u,2)+Math.pow(n,2)-Math.pow(l,2);if(A<0)return!1;var c=(-u*l+Math.sqrt(A))/(Math.pow(u,2)+1),d=(-u*l-Math.sqrt(A))/(Math.pow(u,2)+1);return[{x:c+a.x,y:u*c+l+a.y},{x:d+a.x,y:u*d+l+a.y}]}}.apply(t,[r,t]),void 0===a||(e.exports=a)},9262:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=t.SubtractVector=t.vec_pool_put=t.vec_pool_pop=t.getRects=t.getVecs=void 0;var r=0;t.getVecs=function(){return r};var a=[];t.getRects=function(){return"0 / "+a.length},t.vec_pool_pop=function(e,t){if(a.length>0){var r=a.pop();return r.set(e,t),r}return new n(e,t)},t.vec_pool_put=function(e){a.push(e)},t.SubtractVector=function(e,t,r){return void 0===r&&(r=new n(0,0)),r.x=e.x-t.x,r.y=e.y-t.y,r};var n=function(){function e(e,t,a){this.x=0,this.y=0,this.id=0,this.x=e,this.y=t,this.id=a,r++}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.roundToZero=function(){Math.abs(this.x)<.01&&Math.abs(this.y)<.01&&(this.x=0,this.y=0)},e.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},e.prototype.addXY=function(e,t){return this.x+=e,this.y+=t,this},e.prototype.set=function(e,t){return this.x=e,this.y=t,this},e.prototype.setFromVec=function(e){return this.x=e.x,this.y=e.y,this},e.prototype.clampTop=function(e){this.getLength()>e&&this.setLength(e)},e.prototype.mult=function(e){return this.x*=e,this.y*=e,this},e.prototype.dot=function(e){return this.x*e.x+this.y*e.y},e.prototype.normalize=function(){var e=this.norm();this.x=this.x/e||0,this.y=this.y/e||0},e.prototype.subtractXY=function(t,r){return new e(this.x-t,this.y-r)},e.prototype.subTractXYmodify=function(e,t){this.x-=e,this.y-=t},e.prototype.subtract=function(e){return this.x-=e.x,this.y-=e.y,this},e.prototype.norm=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.getLengthApproxFast=function(){return Math.max(Math.abs(this.x),Math.abs(this.y))},e.prototype.setLength=function(e){var t=this.getAngle();this.x=Math.cos(t)*e,this.y=Math.sin(t)*e},e.prototype.getAngle=function(){return Math.atan2(this.y,this.x)},e.prototype.setAngle=function(e){var t=this.getLength();this.x=Math.cos(e)*t,this.y=Math.sin(e)*t},e.prototype.rotate=function(e,t){t=t*Math.PI/180;var r=e.x,a=e.y,n=this.x,o=this.y;return{x:Math.cos(t)*(n-r)-Math.sin(t)*(o-a)+r,y:Math.sin(t)*(n-r)+Math.cos(t)*(o-a)+a}},e.prototype.div=function(e){return this.x/=e,this.y/=e,this},e.prototype.magSq=function(){var e=this.x,t=this.y;return e*e+t*t},e.prototype.limit=function(e){var t=this.magSq();t>e*e&&(this.div(Math.sqrt(t)),this.mult(e))},e.prototype.subtr=function(e){this.x-=e.x,this.y-=e.y},e.prototype.mag=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.unit=function(){var e=this.mag();0===e?(this.x=0,this.y=0):(this.x/=e,this.y/=e)},e.prototype.normal=function(){var e=this.x;this.x=-this.y,this.y=e,this.unit()},e.dot=function(e,t){return e.x*t.x+e.y*t.y},e.cross=function(e,t){return e.x*t.y-e.y*t.x},e.prototype.toVertices=function(){return[this.x,this.y]},e.prototype.toPoint=function(){return{x:this.x,y:this.y}},e.prototype.toPointINT=function(){return{x:0|this.x,y:0|this.y}},e.prototype.toVertArray=function(e,t){return[this.x-e,this.y-t]},e.prototype.toPointString=function(){return"".concat(this.x,"-").concat(this.y)},e}();t.Vector=n}.apply(t,[r,t]),void 0===a||(e.exports=a)},4541:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(9752)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resizeUpdaters=t.initUpdaters=t.resetUpdaters=t.runUpdatersTimed=void 0,r=o(r),t.runUpdatersTimed=function(e,t,a,n,o){for(var i=0;i<e.length;i++){var s=e[i];(0,r.default)(s.update,t,a,n,o)}},t.resetUpdaters=function(e,t){e.forEach((function(e){var r;return null===(r=e.reset)||void 0===r?void 0:r.call(e,t)}))},t.initUpdaters=function(e,t){e.forEach((function(e){var r;return null===(r=e.init)||void 0===r?void 0:r.call(e,t)}))},t.resizeUpdaters=function(e,t){e.forEach((function(e){var r;return null===(r=e.resize)||void 0===r?void 0:r.call(e,t)}))}}.apply(t,a),void 0===n||(e.exports=n)},5714:function(e,t,r){var a,n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},n.apply(this,arguments)};a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setImovableDefaults=void 0,t.setImovableDefaults=function(e){return n({inTree:!0,remove:!1,stunned:!1,targetFlagged:!1,forceX:0,forceY:0,procedurallyCreated:!1,sleepingAABB:!1,hasSlept:!1,removeProcedural:!1,shape:6,acc:null,opos:null,mass:1,inv_m:1,simTimeRemain:0,debug:{}},e||{})}}.apply(t,[r,t]),void 0===a||(e.exports=a)},2065:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};a=[r,t,r(9262),r(4077),r(5470),r(9893),r(8497),r(4457),r(9910),r(7509),r(1432),r(105),r(3220),r(484)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f){"use strict";var h;Object.defineProperty(t,"__esModule",{value:!0}),t.resetGuidHashNetwork=t.writeGH=t.readFromGH=t.GUIDHASH=void 0,t.GUIDHASH=((h={})[4]={},h[9]={},h[8]={},h[10]={},h[3]={},h[11]={},h[39]={},h[31]={},h[33]={},h[45]={},h[1]={},h[50]={},h[23]={},h);var v={};for(var g in t.GUIDHASH)v[g]={};t.readFromGH=function(e,r){return v[e][r]=100,t.GUIDHASH[e][r]},t.writeGH=function(e,r,a){v[e][r]=100,t.GUIDHASH[e][r]=a},t.resetGuidHashNetwork=function(){for(var e in t.GUIDHASH)t.GUIDHASH[e]={}},t.default=function(e,t,h,v){t.WW=h.WW=e.WW,t.WH=h.WH=e.WH,h.game.asteroids=(0,s.clientCreateAsteroids)(e),h.game.parasites=(0,u.clientCreateParasites)(e),h.game.spaceSnake=(0,l.clientCreateSnakes)(e,t),h.game.rockFormations=(0,A.clientCreateRocks)(e),h.game.spaceSquids=(0,c.clientCreateSquids)(e,t),h.game.spacePorts=(0,d.clientCreateSpaceports)(e,t),h.game.spaceSpiders=(0,i.clientCreateSpiders)(e,t),function(e,t){for(var r=0;r<e.length;r++){var a=e[r];if(a.guid===t)return a}}(h.game.player,h.game.playerGuid),h.game.player=(0,p.clientCreateShips)(e,t,45),(0,a.LOG_GL_FIXED)(h.game.player.length,"NTGC len"),h.game.enemies=(0,p.clientCreateShips)(e,t,1),h.game.drones=(0,p.clientCreateShips)(e,t,50),h.game.bullets=e.game.bullets,h.game.rockets=o([],(0,n.clientCreateRockets)(e),!0),h.game.anomlies=e.game.anomalies,h.game.playerPositions=e.game.playerPositions,h.game.charges=e.game.charges,function(e){for(var t=0;t<e.length;t++){var a=e[t];a.pos=new r.Vector(a.pos.x,a.pos.y),a.vel=new r.Vector(a.vel.x,a.vel.y)}}(h.game.charges),h.game.networkDebugRect=new f.Rectangle(e.game.rd_x,e.game.rd_y,e.game.rd_w,e.game.rd_h),(0,a.LOG_GL_FIXED)((0|e.game.rd_x)+","+(0|e.game.rd_y)+","+(0|e.game.rd_w)+","+(0|e.game.rd_h),"RDB"),(0,a.LOG_GL_FIXED)((0|e.SX)+", "+(0|e.SY),"RDSXSY")}}.apply(t,a),void 0===n||(e.exports=n)},8497:(e,t,r)=>{var a,n;a=[r,t,r(2065),r(6812)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateAsteroids=void 0,t.clientCreateAsteroids=function(e){for(var t=[],n=e.game.asteroids,o=0;o<n.length;o++){var i=n[o],s=(0,r.readFromGH)(4,i.guid);s||(s=(0,a.createSingleAsteroid)(i.radius,i.pos,i.vel,{angleVel:0,angle:i.angle,type:i.type}),(0,r.writeGH)(4,i.guid,s)),s.netangle=i.angle,s.netpos=i.pos,s.netvel=i.vel,s.life=i.life,t.push(s)}return t}}.apply(t,a),void 0===n||(e.exports=n)},4457:(e,t,r)=>{var a,n;a=[r,t,r(2065),r(3605),r(4077)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateParasites=void 0,t.clientCreateParasites=function(e){for(var t=[],o=e.game.parasites,i=0;i<o.length;i++){var s=o[i],u=(0,r.readFromGH)(39,s.guid);if(u||(u=(0,a.createParasite)(s.pos.x,s.pos.y,s.numSegments,s.restPos.x,s.restPos.y,s.life),(0,r.writeGH)(39,s.guid,u),(0,n.LOG_GL)("PARASITE CREATED "+s.guid)),s.target){var l=(0,r.readFromGH)(50,s.target.targetGuid)||(0,r.readFromGH)(45,s.target.targetGuid)||(0,r.readFromGH)(1,s.target.targetGuid);l&&(u.target={ship:l,idxA:s.target.idxA,idxB:s.target.idxB,valueBetween:s.target.valueBetween})}else u.target&&(u.target=null);u.netpos=s.pos,t.push(u)}return t}}.apply(t,a),void 0===n||(e.exports=n)},5470:(e,t,r)=>{var a,n;a=[r,t,r(2065),r(8854)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateRockets=void 0,t.clientCreateRockets=function(e){for(var t=[],n=e.game.rockets,o=n.length,i=0;i<o;i++){var s=n[i],u=(0,r.readFromGH)(s.type,s.guid);u||(u=(0,a.createRocketClient)({angle:s.angle,life:s.life,pos:s.pos,vel:s.vel,ownerType:s.type,ownerGuid:s.ownerGuid,target:s.target}),(0,r.writeGH)(s.type,s.guid,u)),u.netpos=s.pos,u.netvel=s.vel,u.netangle=s.angle,t.push(u)}return t}}.apply(t,a),void 0===n||(e.exports=n)},7509:(e,t,r)=>{var a,n;a=[r,t,r(2065),r(4590)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateRocks=void 0,t.clientCreateRocks=function(e){for(var t=[],n=e.game.rockformation,o=0;o<n.length;o++){var i=n[o],s=(0,r.readFromGH)(11,i.guid);s||(s=(0,a.createRFsingle)(i.pos,i.radius),(0,r.writeGH)(11,i.guid,s)),t.push(s)}return t}}.apply(t,a),void 0===n||(e.exports=n)},3220:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r},s=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};a=[r,t,r(2065),r(3578),r(9262)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateShips=void 0;var u=function(e,t){e.guid,e.type,e.pos,e.vel,e.angle;var r=e.thrust,a=i(e,["guid","type","pos","vel","angle","thrust"]);for(var n in t.netpos=e.pos,t.netvel=e.vel,t.netangle=e.angle,r&&t.thrust.setFromVec(r),a)t[n]=a[n]};t.clientCreateShips=function(e,t,r){if(45===r){var a=A(e,t);return a?s([a],l(e.game.ships,r,t),!0):l(e.game.ships,r,t)}if(1===r)return l(e.game.enemies,r,t);if(50===r)return l(e.game.drones,r,t);throw new Error("unknown type @ createClient ship + "+r)};var l=function(e,t,s){for(var l=[],A=0;A<e.length;A++){var c=e[A],d=(0,r.readFromGH)(t,c.guid),p=(c.pos,c.vel,c.angle,i(c,["pos","vel","angle"]));d||(d=(0,a.createShip)(s,o(o({},p),{pos:new n.Vector(c.pos.x,c.pos.y),vel:new n.Vector(c.vel.x,c.vel.y),angle:c.angle,guid:c.guid})),(0,r.writeGH)(t,c.guid,d)),u(c,d),l.push(d)}return l},A=function(e,t){var s=e.game.playerShip;if(!s)return null;var l=(0,r.readFromGH)(45,s.guid),A=(s.pos,s.vel,s.angle,s.thrust,i(s,["pos","vel","angle","thrust"]));return l||(l=(0,a.createShip)(t,o(o({},A),{pos:new n.Vector(s.pos.x,s.pos.y),vel:new n.Vector(s.vel.x,s.vel.y),thrust:new n.Vector(s.thrust.x,s.thrust.y),angle:s.angle,guid:s.guid})),(0,r.writeGH)(45,s.guid,l)),l.SW=e.SW,l.SH=e.SH,l.netSX=e.SX,l.netSY=e.SY,u(s,l),l}}.apply(t,a),void 0===n||(e.exports=n)},9910:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2065),r(6990),r(4077)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateSnakes=void 0,a=o(a),t.clientCreateSnakes=function(e,t){for(var o=[],i=e.game.spaceSnakes,s=0;s<i.length;s++){var u=i[s],l=(0,r.readFromGH)(8,u.guid);l||(l=(0,a.default)(t,1,u.segments[0].pos.x,u.segments[0].pos.y,u.size,u.restPos)[0],(0,r.writeGH)(8,u.guid,l),(0,n.LOG_GL)("SNAKE CREATED "+u.guid)),o.push(l)}return o}}.apply(t,a),void 0===n||(e.exports=n)},105:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2065),r(9262),r(611),r(4077),r(6959)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateSpaceports=void 0,n=o(n),t.clientCreateSpaceports=function(e,t){for(var o=[],u=e.game.spacePorts,l=0;l<u.length;l++){var A=u[l],c=(0,r.readFromGH)(3,A.guid);if(!c){c=(0,n.default)(t,A.radius,new a.Vector(A.pos.x,A.pos.y),A.name,A.reparations,A.cannons),(0,i.LOG_GL)("SPACEPORT CREATED "+A.guid),(0,r.writeGH)(3,A.guid,c);for(var d=0;d<c.cannons.length;d++){var p=c.cannons[d];A.cannons[d]&&p.guid===A.cannons[d].guid?(0,r.writeGH)(23,A.cannons[d].guid,c.cannons[d]):(c.cannons.splice(d,1),d--)}}var f={},h={},v=Math.max(c.cannons.length,A.cannons.length);for(d=0;d<v;d++)(p=c.cannons[d])&&(f[p.guid]=p),(y=A.cannons[d])&&(h[y.guid]=y);for(var g in f){p=f[g];var y=h[g];p&&(y?(p.life=y.life,p.angle=y.angle,p.isCannon=y.isCannon):(p.life=0,p.remove=!0,c.cannons=(0,s.cleanList)(c.cannons,t)))}o.push(c)}return o}}.apply(t,a),void 0===n||(e.exports=n)},9893:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2065),r(8260)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateSpiders=void 0,a=o(a),t.clientCreateSpiders=function(e,t){for(var n=[],o=e.game.spaceSpiders,i=o.length,s=0;s<i;s++){var u=o[s],l=(0,r.readFromGH)(u.type,u.guid);l||(l=(0,a.default)(t,1,u.pos.x,u.pos.y,u.radius,u.restPos,{life:u.life})[0],(0,r.writeGH)(u.type,u.guid,l)),l.netpos=u.pos,l.netangle=u.angle,n.push(l)}return n}}.apply(t,a),void 0===n||(e.exports=n)},1432:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2065),r(6203),r(4077)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateSquids=void 0,a=o(a),t.clientCreateSquids=function(e,t){for(var o=[],i=e.game.spaceSquids,s=0;s<i.length;s++){var u=i[s],l=(0,r.readFromGH)(9,u.guid);l||(l=(0,a.default)(t,1,u.pos.x,u.pos.y,u.radius,u.restPos,{life:u.life})[0],(0,n.LOG_GL)("SQUID CREATED "+u.guid),(0,r.writeGH)(9,u.guid,l)),l.netpos=u.pos,l.netangle=u.angle,l.stunned=u.stunned,o.push(l)}return o}}.apply(t,a),void 0===n||(e.exports=n)},638:function(e,t,r){var a;a=function(e,t){"use strict";var r=this;Object.defineProperty(t,"__esModule",{value:!0}),t.serverInit=t.serverEvent=t.clientRecieveGameEvents=t.getNumClients=t.serverSendShipId=t.serverSend=t.serverSendHeartbeat=t.clientRecieve=t.clientRecieveShipId=t.clientRecieveHeartbeat=t.clientSend=t.clientCreateShip=t.initClient=t.VOLATILE_GAME_STATE_TRAFFIC=void 0;var a="client",n="client_create_ship",o="client_ship_id",i="server",s="server_event",u="server_heartbeat",l=null,A=null,c=0;t.VOLATILE_GAME_STATE_TRAFFIC=!0,t.initClient=function(){console.log("init client IO() "),l=r.io()},t.clientCreateShip=function(e,t,r){var a={playerName:e,SW:t,SH:r};l.emit(n,a)},t.clientSend=function(e){l.emit(a,e)},t.clientRecieveHeartbeat=function(e){l.on(u,(function(t){e(t)}))},t.clientRecieveShipId=function(e){l.on(o,(function(t){e(t)}))},t.clientRecieve=function(e){l.on(i,(function(t){e(t)}))},t.serverSendHeartbeat=function(e){t.VOLATILE_GAME_STATE_TRAFFIC?A.volatile.emit(u,e):A.emit(u,e)},t.serverSend=function(e){t.VOLATILE_GAME_STATE_TRAFFIC?A.volatile.emit(i,e):A.emit(i,e)},t.serverSendShipId=function(e){A.emit(o,e)},t.getNumClients=function(){return c},t.clientRecieveGameEvents=function(e){l.on(s,(function(t){e(t)}))},t.serverEvent=function(e,t){e.emit(s,t)},t.serverInit=function(e,t,r,s,u){A=e,e.on("connection",(function(e){c++,console.log("client connected",e.id),s(e.id,e,c),e.on(a,(function(r){var a=t(r);a&&e.emit(i,a)})),e.on(n,(function(t){e.emit(o,r(t,e.id))})),e.broadcast.emit("newclientconnect",{description:c+" clients connected!"}),e.on("disconnect",(function(){u(e.id),console.log("client disconnect",e.id),c--,e.broadcast.emit("newclientconnect",{description:c+" clients connected!"})}))}))}}.apply(t,[r,t]),void 0===a||(e.exports=a)},9271:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadData=t.loadStr=t.loadBool=t.loadInt=t.saveData=t.saveStr=t.saveBool=t.saveInt=t.containsData=t.containsStr=t.containsBool=t.containsInt=void 0;var r=null;try{r=window.localStorage}catch(e){r={setItem:function(){return null},getItem:function(){return null}}}var a="_int",n="_str",o="_bool",i="_data",s=function(e){return!(null===r.getItem(e))};t.containsInt=function(e){return s(e+a)},t.containsBool=function(e){return s(e+o)},t.containsStr=function(e){return s(e+n)},t.containsData=function(e){return s(e+i)},t.saveInt=function(e,t){r.setItem(e+a,t+"")},t.saveBool=function(e,t){r.setItem(e+o,(t?1:0)+"")},t.saveStr=function(e,t){r.setItem(e+n,t)},t.saveData=function(e,t){var a=JSON.stringify(t);return r.setItem(e+i,a),a.length},t.loadInt=function(e){return parseInt(r.getItem(e+a),10)},t.loadBool=function(e){var t=r.getItem(e+o);return 1===parseInt(t)||0!==parseInt(t)&&void 0},t.loadStr=function(e){return r.getItem(e+n)},t.loadData=function(e){var t=r.getItem(e+i);if(t)return JSON.parse(t)}}.apply(t,[r,t]),void 0===a||(e.exports=a)},199:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobalContexts=void 0;var r={engine:null,gui:null};t.default=function(){return r},t.setGlobalContexts=function(e,t){r.engine=e,r.gui=t}}.apply(t,[r,t]),void 0===a||(e.exports=a)},2201:(e,t,r)=>{var a,n;a=[r,t,r(4077),r(5173),r(1330)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dev_log_abnormal_fillrates_throttled=t.pool_log=t.pool_get=t.pool_put=void 0;var o={},i={26:10,49:10,21:10,29:10};o[26]=[],o[49]=[],o[21]=[],o[29]=[];var s=0;t.pool_put=function(e,t){o[e],o[e].push(t)},t.pool_get=function(e){var t=o[e];return t.length>0||function(e){s=e;for(var t=i[e],r=0;r<t;r++)o[e].push((0,a.struct)(e));i[e]=t+10}(e),t.pop()},t.pool_log=function(){for(var e in o)(0,r.LOG_GL_FIXED_FORCED)("F/R: "+i[e]+" | "+o[e].length,(0,n.TypesToString)(parseInt(e,10)));(0,r.LOG_GL_FIXED_FORCED)((0,n.TypesToString)(s),"LAST FILLED")};var u=0;t.dev_log_abnormal_fillrates_throttled=function(e,t){if(void 0===e&&(e=800),void 0===t&&(t=200),++u>t)for(var a in u=0,o){var s=i[a];s>e&&(0,r.LOG_GL_FIXED_FORCED)(s+" | "+o[a].length,(0,n.TypesToString)(parseInt(a,10))+":: Abnormal pool F/R: ",!0)}}}.apply(t,a),void 0===n||(e.exports=n)},4663:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7967),r(107),r(2114),r(1706)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=l(r),o=u(o);var i=!1,s=function(e,t,a,n,i,s){for(var u=Math.max(0,t.length-18),l=u;l<t.length;l++){var A=a[l];s.gl?r.default.printListGL(s.gl,(0,o.default)(o.GLctx.Texture,s.gl),A,50,50+40*(l-u),t[l],l===t.length-1&&i,s):r.default.printList(e,n.data,A,50,50+40*(l-u),t[l],l===t.length-1&&i)}},A=function(e,t,r,o,u,l,c,d,p){void 0===p&&(p=!1),setTimeout((function(){if(!i){var f=t.length-1;p&&(t[f]<e[f].length?t[f]=t[f]+1:t.length<e.length?t.push(0):d&&(d(),d=void 0)),r.gl?s(l,t,e,u,!p,r):((0,a.ClearHard)(r),s(l,t,e,u,!p,r),(0,n.distort)(l,c*Math.random(),c*Math.random(),u.data),o.putImageData(u,0,0)),A(e,t,r,o,u,l,c,d,!p)}}),20)};t.default=function(e,t,r,a,n,o,s){void 0===s&&(s=0),i=!1;var u=function(){i||(window.removeEventListener("keydown",u),i=!0,setTimeout((function(){t()}),30))};setTimeout((function(){window.addEventListener("keydown",u)}),1e3),A(e,[0],r,a,n,o,r.SH,(function(){setTimeout((function(){i||(i=!0,setTimeout((function(){t()}),30))}),8e3)}))}}.apply(t,a),void 0===n||(e.exports=n)},6030:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleOnce=t.schedule=void 0;var r={},a={},n={update:function(e){for(var t in r){var n=r[t];e.frameCnt%n.frame==0&&n.fn(e)}var o=performance.now();for(var t in a){var i=a[t];o>=i.time&&(i.fn(e),delete a[t])}return"run-scheduler"},reset:function(){for(var e in r)delete r[e];for(var e in a)delete a[e]}};t.default=n,t.schedule=function(e,t,a){r[e]||(r[e]={frame:a,fn:t})},t.scheduleOnce=function(e,t,r){a[e]||(a[e]={time:performance.now()+r,fn:t})}}.apply(t,[r,t]),void 0===a||(e.exports=a)},2826:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(2201),r(7899),r(8787)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createParticle=t.createBullet=void 0,t.createBullet=function(e,t){var i=(0,a.pool_get)(e);return i.type=e,i.collType=12,i.guid=(0,r.getGuid)(),t&&(i.ownerGuid=t.guid,i.owenerType=t.type,i.pos.x=t.pos.x+Math.cos(t.angle)*t.radius,i.pos.y=t.pos.y+Math.sin(t.angle)*t.radius,i.vel.x=0,i.vel.y=0,i.vel.setLength(t.vel.getLength()+20),i.vel.setAngle(t.angle+.02*(Math.random()-.5))),i.damage=o.weaponDatas.bullet.damage,i.shape=3,i.life=n.BULLET_START_LIFE,i.homing=!1,i.remove=!1,i.forceX=null,i.forceY=null,i.stunned=!1,i.target=null,i.targetFlagged=!1,i},t.createParticle=function(e,t,r,n,o){var i=(0,a.pool_get)(21);return i.collType=26,i.pos.x=e,i.pos.y=t,i.vel.x=r,i.vel.y=n,i.life=o,i.type=21,i}}.apply(t,a),void 0===n||(e.exports=n)},8840:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(633),r(8787),r(34)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSkillTreeLayout=t.getSkillTree=t.resetSkillTree=void 0;var i={type:14,description:"",name:"",aquired:!0,children:[{type:15,name:"INFO",description:"Welcome to the spaceport trading system.",perks:[{value:"Here you can sell resources, buy [WEAPONS] and [ABILITES]."},{value:"Don't forget to stock up on ammunition."},{headline:!0,value:""},{value:"A tip to get started.",headline:!0},{value:"Buy the following [ABILITIES] to be able to mine iron:"},{value:"Lazersight",headline:!0},{value:"Targetlock",headline:!0},{value:"MiningRig",headline:!0},{value:"Go out and mine some iron and come back to a spaceport"},{value:"and exchange it for some sweet space credits."},{value:"After that you can go haywire and buy weapons"},{value:"and start making the real money by killing space beasts."}]},{type:16,name:"SHIP INFORMATION",description:"your ship",quadrant:"BL",aquired:!0,children:[{type:17,name:"rearrange weapons",description:"equip and unequip weapons",quadrant:"BL",aquired:!0},{type:18,name:"rearrange abilities",description:"equip and unequip abilites",quadrant:"BL",aquired:!0}]},{type:3,name:"WEAPONS",description:"Weapons, ammunition and upgrades for weapons",quadrant:"BR",aquired:!0},{type:6,name:"ABILITIES",description:"Abilities and upgrades for abilities",quadrant:"TL",aquired:!0},{type:19,name:"DRONES",description:"Buy drones",aquired:!0},{type:7,name:"TRADE",description:"Sell collected resources for space credits",aquired:!0,children:[{type:8,name:"sell iron",description:"Sell iron for space credits",aquired:!0},{type:10,name:"sell platinum",description:"Sell platinum for space credits",aquired:!0},{type:9,name:"sell rare minerals",description:"Sell rare minerals for space credits",aquired:!0}]}]},s=function(e){return e>1?"Increase":"Decrease"},u=function(e){return Math.round(100*e)+""},l=function(e,t){var r=[],a=e>1;r.push(s(e)),r.push(t);var n;return n=a?u(e-1)+"%":"-"+u(1-e)+"%",r.push(n),r.join(" ")+"."},A=function(e,t,r){var a=r.shift(),n=[];n.push({value:l(a,"ammo with"),headline:!1},{headline:!0,value:""},{value:"Reguirements:",headline:!0},{value:"previous upgrade"},{headline:!0,value:""});var i={type:1,name:"ammo"+l(a,""),installationData:o({},t.installationData),description:"".concat(s(a)," max ammunition of ").concat(e.name),weaponUpgrade:{ammunition:{max:a}},requirements:[{installationType:2,type:0,subType:1}],perks:n,children:[]};return r.length>0&&i.children.push(A(e,i,r)),i},c=function(e,t,r){var a=r.shift(),n=[];n.push({value:l(a,"damage with"),headline:!1},{headline:!0,value:""},{value:"Reguirements:",headline:!0},{value:"previous upgrade"},{headline:!0,value:""});var i={type:1,name:"damage"+l(a,""),installationData:o({},t.installationData),description:"".concat(s(a)," damage of ").concat(e.name),weaponUpgrade:{damage:{value:a}},requirements:[{installationType:2,type:0,subType:0}],perks:n,children:[]};return r.length>0&&i.children.push(c(e,i,r)),i},d=function(e){if(e.children)for(var t=0;t<e.children.length;t++){var r=e.children[t];if(0===r.type){r.children||(r.children=[]),r.weaponInformation.ammunitionCost>0&&r.children.push({type:11,name:"Ammunition",description:"Ammunition for ".concat((i=r).name),weaponInformation:i.weaponInformation,requirements:[{installationType:2,type:0}],perks:[],children:[]});for(var a=[1.2,1.3,1.4,1.5,1.55],n=0;n<a.length;n++)r.children.push(c(r,r,[a[n]]));if(1===r.weaponInformation.ammunition.type){var o=[1.2,1.6,1.8,2];for(n=0;n<o.length;n++)r.children.push(A(r,r,[o[n]]))}}else d(r)}var i},p=function(e){var t;e.children||(e.children=[]);for(var r=0;r<e.children.length;r++){var a=e.children[r];a.selected=!1,a.focused=!1,a.perks=a.perks||[],a.aquired=null!==(t=a.aquired)&&void 0!==t&&t,p(a)}},f=function(e){if(e.children)for(var t=0;t<e.children.length;t++){var a=e.children[t];if(6===a.type)for(var n in a.children||(a.children=[]),r.abilityDatas){var o=r.abilityDatas[n],i=[];switch(i.push({value:"Drain type:",headline:!0}),o.drainType){case 0:i.push({value:"ENERGY"});break;case 1:i.push({value:"N/A"})}switch(i.push({headline:!0,value:""}),i.push({value:"Activation type:",headline:!0}),o.activationType){case 1:i.push({value:"manually activated"});break;case 0:i.push({value:"passive"})}i.push({headline:!0,value:""}),o.requirements&&i.push({value:"Reguirements:",headline:!0},{value:o.requirements.name},{headline:!0,value:""});var s={type:4,name:o.name,description:o.description,perks:i,children:[],installationData:{installationType:1,type:o.type,cost:o.cost},requirements:o.requirements?[{installationType:1,type:o.requirements.type}]:null};a.children.push(s)}else f(a)}},h=null,v=[],g=function(e,t,r){t[r]=(t[r]||0)+e.children.length;for(var a=0;a<e.children.length;a++){var n=e.children[a];g(n,t,r+1)}},y=function(e,t,r,a){r[a]=r[a]||0,14===e.type&&(e.x=0,e.y=0);for(var n=0;n<e.children.length;n++){var o=e.children[n],i=150*t[a]*-.5;o.x=i+150*r[a]+.5*e.x,o.y=300*-a,o.parentx=e.x,o.parenty=e.y,r[a]+=1,y(o,t,r,a+1)}};t.resetSkillTree=function(){(function(e){if(e.children)for(var t=0;t<e.children.length;t++){var r=e.children[t];if(3===r.type)for(var o in r.children||(r.children=[]),a.weaponDatas){var i=a.weaponDatas[o],s=[],l=void 0;switch((i.requiresTargetLock||i.requiresLazerSight)&&(l=[],s.push({value:"Reguirements:",headline:!0}),i.requiresTargetLock&&(s.push({value:"target lock ability"}),l.push({installationType:1,type:4})),i.requiresLazerSight&&(s.push({value:"lazersight ability"}),l.push({installationType:1,type:10})),s.push({headline:!0,value:""})),s.push({value:"Ammunition:",headline:!0}),i.ammunition.type){case 0:s.push({value:"Ammo type: Energy"});break;case 1:s.push({value:"Ammo type: Physical"})}s.push({value:"Max loadout "+i.ammunition.max+" units"}),s.push({value:"Requires "+i.ammunition.perShot+" units per shot"}),s.push({value:"Stock ammo "+i.ammunition.value}),s.push({headline:!0,value:""}),s.push({value:"Damage",headline:!0}),s.push({value:"type: "+(0,n.DamageTypeToString)(i.damage.type)}),s.push({value:"value: "+i.damage.value}),i.damage.valuePercent>0&&s.push({value:"percent of target life "+u(i.damage.valuePercent)+"%"}),i.damage.stunMS>0&&s.push({value:"Stuns target for "+i.damage.stunMS+" ms"}),i.damage.slowPercentM>0&&s.push({value:"Slows target by "+u(i.damage.slowPercentM)+"%"}),i.damage.pushPercentM>0&&s.push({value:"Pushes on target "+u(i.damage.slowPercentM)+"%"}),i.projectile.speed>0&&(s.push({headline:!0,value:""}),s.push({value:"Projectile:",headline:!0}),s.push({value:"Speed: "+i.projectile.speed+" space knots."})),r.children.push({type:0,children:[],requirements:l,description:i.description,installationData:{installationType:0,type:i.type,cost:i.cost},weaponInformation:i,name:i.name,perks:s})}}})(h=JSON.parse(JSON.stringify(i))),d(h),f(h),p(h),h.children[0].focused=!0,g(h,v=[],0),y(h,v,[],0)},(0,t.resetSkillTree)(),t.getSkillTree=function(){return h},t.getSkillTreeLayout=function(){return v}}.apply(t,a),void 0===n||(e.exports=n)},6632:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DESTROYER_BULLET_DAMAGE=t.DESTROYER_BULLET_VEL_LEN=t.SPACE_PORT_BULLET_DAMAGE=t.SPACE_PORT_BULLET_VEL_LEN=void 0,t.SPACE_PORT_BULLET_VEL_LEN=55,t.SPACE_PORT_BULLET_DAMAGE={type:1,valuePercent:0,value:6,stunMS:1,pushPercentM:.01,slowPercentM:.01,ownerGuid:-1},t.DESTROYER_BULLET_VEL_LEN=22,t.DESTROYER_BULLET_DAMAGE={type:1,valuePercent:0,value:3,stunMS:1,pushPercentM:.001,slowPercentM:.01,ownerGuid:-1}}.apply(t,[r,t]),void 0===a||(e.exports=a)},840:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(4412),r(9752),r(5502),r(686),r(8407),r(6153),r(5934),r(7344),r(5345),r(5014),r(6325),r(6652),r(199),r(6845),r(2126),r(9014),r(2273),r(9191),r(4022),r(9867),r(3275),r(8181),r(9900),r(7519),r(1521),r(386),r(8155),r(2412),r(4541),r(2201)],n=function(e,t,r,a,n,s,u,l,A,c,d,p,f,h,v,g,y,m,_,x,S,T,E,M,b,I,L,P,w,R,O,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDevProjectEngineClient=void 0,r=i(r),n=i(n),s=i(s),u=i(u),l=i(l),A=i(A),c=i(c),d=i(d),p=i(p),f=i(f),h=i(h),v=i(v),g=i(g),y=i(y),m=i(m),_=i(_),x=i(x),S=i(S),T=i(T),E=i(E),M=i(M),b=i(b),I=i(I),L=i(L),P=i(P),w=i(w),R=i(R);var D="engineClient",G=[A.default,l.default,x.default,c.default,_.default,S.default,E.default,f.default,T.default,M.default],N=[m.default],B=[n.default,R.default,u.default,r.default,d.default,P.default,w.default,s.default,p.default,h.default,g.default,y.default,b.default,I.default,L.default],F=!1;t.setDevProjectEngineClient=function(){F=!0};var V={update:function(e){var t=e.game;if(!F){var r=e.game.performance.engineClient=[];return t.performance.totalEngineClient=(0,a.MeasureTimeFn)((function(){e.IS_MULTIPLAYER&&(0,O.runUpdatersTimed)(G,e,r,D),(0,O.runUpdatersTimed)(B,e,r,D),e.IS_MULTIPLAYER&&(0,O.runUpdatersTimed)(N,e,r,D)})),(0,C.dev_log_abnormal_fillrates_throttled)(),D}},resize:function(e){return(0,O.resizeUpdaters)(e.IS_MULTIPLAYER?o(o(o([],B,!0),G,!0),N,!0):B,e)},reset:function(e){return(0,O.resetUpdaters)(o(o(o([],B,!0),G,!0),N,!0),e)},init:function(e){return(0,O.initUpdaters)(e.IS_MULTIPLAYER?o(o(o([],B,!0),G,!0),N,!0):B,e)}};t.default=V}.apply(t,a),void 0===n||(e.exports=n)},386:(e,t,r)=>{var a,n;a=[r,t,r(1330),r(9262),r(7185),r(484),r(2093),r(6265),r(2261),r(1477),r(1128)],n=function(e,t,r,a,n,o,i,s,u,l,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFragment=t.getFragmentTree=void 0,new a.Vector(0,0);var c=(0,o.rect_pool_pop)(0,0,0,0),d=new l.QuadTreeFastPoint32((0,o.rect_pool_pop)(0,0,10,10),5,40);t.getFragmentTree=function(){return d};var p=0;t.createFragment=function(e,t,r,n,o,i){void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0);var s=t.game.fragments,u=s.length>24e3?p:-1;if(u>=0){var l=s[u];l.pos.x=e.x,l.pos.y=e.y,l.vel.x=n,l.vel.y=o,l.rot=i,l.triangle=r}else{var A={pos:new a.Vector(e.x,e.y),vel:new a.Vector(n,o),remove:!1,triangle:r,rot:i};s.push(A)}u>=0&&++u>23999&&(u=0),u>=0&&(p=u)};var f={update:function(e){var t=e.game,a=e.step,o=(e.SW,e.SH,e.SX,e.SY,(0,i.getQuadTreesObj)()),l=t.fragments,p=(l.length,t.screen.rectSS_800),f=t.screen.rectSS_600;d.reset(),d.setup(p,50,40,2),(0,A.fastFunctionTreeInsert)(l,d,p);for(var h=d.references,v=h.length,g=o.queryTreesRect(r.PUSHING_TYPES,f),y=g.length,m=0;m<y;m++){var _=g[m];if(!_.remove){var x,S=_.radius;if(45===_.type&&(S=2*_.originalRadius),c.x=_.pos.x-S,c.y=_.pos.y-S,c.width=2*S,c.height=2*S,0===_.type||45===_.type)for(var T=(x=d.queryVec(_.pos,_.radius,_.radius)).length,E=0===_.type?3:.6,M=0;M<T;M+=2){var b=x[M];if((0,n.fine)(3,_.comp[0].vertex,b.pos)){var I=Math.atan2(_.pos.y-b.pos.y,_.pos.x-b.pos.x);b.vel.setAngle(I+Math.PI),b.vel.setLength(E+Math.random());var L=.6*Math.random();b.rot=M%2==0?L:-L}}else for(T=(x=d.queryCircle(_.pos,_.radius)).length,M=0;M<T;M+=2)b=x[M],I=Math.atan2(_.pos.y-b.pos.y,_.pos.x-b.pos.x),b.vel.setAngle(I+Math.PI),b.vel.setLength(1+Math.random())}}for((0,s.FastForce2CachedReversed)(d,f),m=0;m<v;m++){var P=(b=h[m]).vel,w=P.x*a,R=P.y*a;if(b.pos.x+=w,b.pos.y+=R,P.x*=.98,P.y*=.98,b.rot*=.95,0!==b.rot)for(M=0;M<3;M++)(0,u.rotateVector)(b.triangle[M],b.rot,b.triangle[M]);else Math.abs(b.rot)<.002&&(b.rot=0)}return"fragments"}};t.default=f}.apply(t,a),void 0===n||(e.exports=n)},8155:(e,t,r)=>{var a,n;a=[r,t,r(9262),r(7185),r(484),r(2093),r(6265),r(2261),r(5345),r(6030),r(1330),r(1477),r(1128)],n=function(e,t,r,a,n,o,i,s,u,l,A,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFragmentBlack=t.getFragmentBlackTree=void 0,new r.Vector(0,0);var p=(0,n.rect_pool_pop)(0,0,0,0),f=new c.QuadTreeFastPoint32((0,n.rect_pool_pop)(0,0,10,10),5,40);t.getFragmentBlackTree=function(){return f};var h=0;t.createFragmentBlack=function(e,t,a,n,o,i){void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0);var u=t.game.fragmentsBlack,l=u.length>5e3?h:-1;if(0!==i){for(var A=0;A<3;A++)(0,s.rotateVector)(a[A],i,a[A]);i=0}if(l>=0){var c=u[l];c.pos.x=e.x,c.pos.y=e.y,c.vel.x=n,c.vel.y=o,c.rot=i,c.triangle=a}else{var d={pos:new r.Vector(e.x,e.y),vel:new r.Vector(n,o),remove:!1,triangle:a,rot:i};u.push(d)}l>=0&&++l>4999&&(l=0),l>=0&&(h=l)};var v={update:function(e){var t=e.game,r=e.step;e.SW,e.SH,e.SX,e.SY,(0,l.schedule)("fragmentsBlack",(function(e){for(var t=e.game.fragmentsBlack,r=t.length,a=[],n=0;n<r;n++){var o=t[n];o.remove||a.push(o)}e.game.fragmentsBlack=a}),30);var n=(0,o.getQuadTreesObj)(),c=t.screen.rectSS_800,h=t.screen.rectSS_600,v=(h.x,h.y,h.width,h.height,t.fragmentsBlack);v.length,f.reset(),f.setup(c,50,40,2),(0,d.fastFunctionTreeInsert)(v,f,c);for(var g=f.references,y=g.length,m=n.queryTreesRect(A.PUSHING_TYPES,h),_=m.length,x=0;x<_;x++){var S=m[x];if(!S.remove){var T,E=S.radius;if(45===S.type&&(E=2*S.originalRadius),p.x=S.pos.x-E,p.y=S.pos.y-E,p.width=2*E,p.height=2*E,0===S.type||45===S.type)for(var M=(T=f.queryVec(S.pos,S.radius,S.radius)).length,b=0===S.type?3:.6,I=0;I<M;I+=2){var L=T[I];if((0,a.fine)(3,S.comp[0].vertex,L.pos)){var P=Math.atan2(S.pos.y-L.pos.y,S.pos.x-L.pos.x);if(Math.random()>.2)L.remove=!0,(0,u.createDust)(L.pos,12*Math.random()+8,6*Math.random()+3,e,L.vel.x,L.vel.y);else{L.vel.setAngle(P+Math.PI),L.vel.setLength(b+Math.random());var w=.3*Math.random();L.rot=I%2==0?w:-w}}}else for(M=(T=f.queryCircle(S.pos,S.radius)).length,I=0;I<M;I+=2)L=T[I],Math.random()>.5?(L.remove=!0,(0,u.createDust)(L.pos,12*Math.random()+8,6*Math.random()+3,e,L.vel.x,L.vel.y)):(P=Math.atan2(S.pos.y-L.pos.y,S.pos.x-L.pos.x),L.vel.setAngle(P+Math.PI),L.vel.setLength(1+Math.random()))}}for((0,i.FastForce2CachedReversed)(f,h),x=0;x<y;x++){var R=(L=g[x]).vel,O=R.x*r,C=R.y*r;if(L.pos.x+=O,L.pos.y+=C,R.x*=.98,R.y*=.98,L.rot*=.95,0!==L.rot)for(I=0;I<3;I++)(0,s.rotateVector)(L.triangle[I],L.rot,L.triangle[I]);else Math.abs(L.rot)<.002&&(L.rot=0)}return"fragments-black"}};t.default=v}.apply(t,a),void 0===n||(e.exports=n)},6153:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2068),r(3684),r(2261),r(289),r(2261),r(9262)],n=function(e,t,r,a,n,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o(i);var l=function(e,t){for(var a=e.length,n=0;n<a;n++)(0,r.PositionUpdaterPoint)(e[n],t)},A=new u.Vector(0,0),c=function(e,t){A.set(e.netvel.x,e.netvel.y),A.mult(t),e.netpos.x+=A.x,e.netpos.y+=A.y},d=function(e,t,r,a,o,i,u,l){void 0===r&&(r=!0),void 0===a&&(a=!0),void 0===o&&(o=!1),void 0===i&&(i=100),void 0===u&&(u=.1),void 0===l&&(l=.05);for(var A=e.length,d=0;d<A;d++){var p=e[d],f=p.pos.x-p.netpos.x,h=p.pos.y-p.netpos.y,v=p.vel.x-p.netvel.x,g=p.vel.y-p.netvel.y,y=p.pos.x,m=p.pos.y;if(p.pos.x-=f*u*t,p.pos.y-=h*u*t,a&&(o?Math.abs(f)>5||Math.abs(h)>5?(p.pos.x=y,p.pos.y=m,p.vel.x=p.vel.x-f/i,p.vel.y=p.vel.y-h/i):(p.vel.x=p.netvel.x,p.vel.y=p.netvel.y):o||(p.vel.x-=v,p.vel.y-=g)),(Math.abs(f)>i||Math.abs(h)>i)&&(p.pos.setFromVec(p.netpos),p.vel.setFromVec(p.netvel)),r){p.angle=(0,n.normalizeRadianPositive)(p.angle),p.netangle=(0,n.normalizeRadianPositive)(p.netangle);var _=(0,s.diffRadianPositive)(p.angle,p.netangle);p.angle+=_*l*t}c(p,t)}},p={update:function(e){var t=e.game,n=e.step;return d(t.spaceSquids,n,!1,!0),d(t.rockets,n,!0,!0,!0,100),d(t.asteroids,n,!0,!0,!0,100),d(t.spaceSpiders,n,!0,!1),d(t.drones,n,!0,!1,!1,30),d(t.enemies,n,!0,!1,!1,30),function(e,t,n){for(var o=e.length,s=0;s<o;s++){var u=e[s];u.guid===n.game.playerGuid?((0,a.ShipCamera)(u,n),n.SX=u.SX,n.SY=u.SY,u.keyCodes=n.game.allKeyCodes.game.keys,(0,i.default)(u,t),u.netangle+=u.turnAcc*t):(u.angle+=u.turnAcc*t,(0,r.PositionUpdaterPoint)(u,t))}}(t.player,n,e),d(t.player,n,!0,!0,!1,200,.19,.2),l(t.charges,n),l(t.bullets,n),"interpolation"}};t.default=p}.apply(t,a),void 0===n||(e.exports=n)},8407:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={update:function(e){for(var t=e.game,r=0;r<t.notifications.length;r++){var a=t.notifications[r];if(a.life--,a.life<0){t.notifications.splice(r,1);break}}return"notifications"}}}.apply(t,[r,t]),void 0===a||(e.exports=a)},384:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParticleSetting=void 0,t.getParticleSetting=function(e,t,r,a){var n=e.game.menuSettings.particleSettingIndex,o=r*e.game.menuSettings.particleSettingsArr[n];return o!==t&&a.length>o&&a.slice(o,a.length),o}}.apply(t,[r,t]),void 0===a||(e.exports=a)},4412:(e,t,r)=>{var a,n;a=[r,t,r(3431),r(3923),r(484),r(2201),r(6265),r(9262),r(2826),r(1477)],n=function(e,t,r,a,n,o,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParticleTree=void 0;var A=new l.QuadTreeFastPoint32((0,n.rect_pool_pop)(0,0,10,10),5,21);t.getParticleTree=function(){return A};var c=3,d=new s.Vector(0,0),p={update:function(e){var t=e.game,n=e.step;if(e.WW,e.WH,e.SX,e.SY,e.SW,e.SH,performance.now(),++c>3&&(c=0),t.menuSettings.particles&&!t.levelEditor){for(var s=t.particles,l=[],p=e.game.screen.rectSS_400,f=(0,i.getForce2Tree)().queryInt(p),h=0;h<f.length;h++){var v=f[h];1===v.type&&v.intensity>0&&(0,a.particleForExplosion)(Math.min(.03*v.radius,450),v.pos.x,v.pos.y,t.particles)}var g=(0,r.getAllAnomalies)(e.game);for(h=0;h<g.length;h++){var y=g[h];if(e.game.screen.rectSS_2000.intersectsPoint(y.pos))for(var m=0;m<40;m++){y.positive?d.set(.1*y.radius,0):d.set(.9*y.radius+Math.random()*y.radius*.09,0),d.setAngle(Math.random()*Math.PI*2),d.add(y.pos);var _=(0,u.createParticle)(d.x,d.y,1*(Math.random()-.5),1*(Math.random()-.5),450+300*Math.random());s.push(_)}}var x=s.length;A.reset(),performance.now();var S=p.x,T=p.y,E=S+p.width,M=T+p.height;for(A.setup(p,5,21,4),h=0;h<x;h++){var b=(P=s[h]).pos.x,I=P.pos.y;b>S&&I>T&&b<E&&I<M?A.insertUnsafe(P):(0,o.pool_put)(P.type,P)}(0,i.FastForce2CachedReversed)(A,p,39);var L=A.references;for(x=L.length,performance.now(),l=[],h=0;h<x;h++){var P,w=(P=L[h]).vel.getLengthApproxFast();if(P.life<0&&w<.01||Math.random()>.98)(0,o.pool_put)(P.type,P);else{P.life-=n;var R=P.vel;w>20&&R.setLength(20);var O=R.x*n,C=R.y*n;P.pos.x+=O,P.pos.y+=C,R.x*=.98,R.y*=.98,l.push(P)}}t.particles=l;var D=t.customParticles;for(x=D.length,h=0;h<x;h++){var G=D[h];G.life-=n,O=G.vel.x*n,C=G.vel.y*n,G.pos.x+=O,G.pos.y+=C,G.vel.x*=.98,G.vel.y*=.98,(G.life<0&&G.vel.getLengthApproxFast()<1||Math.random()>.98)&&(D.splice(h,1),h--,x--,G.remove=!0)}return"particles"}t.particles=[]}};t.default=p}.apply(t,a),void 0===n||(e.exports=n)},5345:(e,t,r)=>{var a,n;a=[r,t,r(9262),r(7185),r(484),r(2093),r(6265),r(1477),r(384),r(1128)],n=function(e,t,r,a,n,o,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDust=t.GetSpaceDustTree=t.getSpaceDustTimings=void 0,new r.Vector(0,0),new r.Vector(0,0);var A=(0,n.rect_pool_pop)(0,0,0,0),c=new r.Vector(0,0),d=!1,p=new s.QuadTreeFastPoint32((0,n.rect_pool_pop)(0,0,10,10),5,41),f=64e3,h=0,v=0,g=0,y=0,m=0,_={filtering:0,insertions:0,collisions:0,reset:0,update:0,numDust:0,onscreen:0,quadrantSize:0,totalTime:0};t.getSpaceDustTimings=function(){return _.reset=g,_.update=y,_.collisions=v,_.insertions=h,_.filtering=0,_.totalTime=m,_},t.GetSpaceDustTree=function(){return p};var x=0;t.createDust=function(e,t,a,n,o,i){void 0===o&&(o=0),void 0===i&&(i=0);for(var s=n.game.spaceDust,u=s.length>f?x:-1,l=0;l<t;l++){c.set(.5*a*Math.random(),0),c.setAngle(Math.random()*Math.PI*2);var A=c.x,d=c.y;if(u>=0){var p=s[u];p.pos.x=e.x+A,p.pos.y=e.y+d,p.vel.x=o,p.vel.y=i}else{var h={pos:new r.Vector(e.x+A,e.y+d),vel:new r.Vector(o,i)};s.push(h)}u>=0&&++u>f-1&&(u=0)}u>=0&&(x=u)};var S={update:function(e){var r=e.game,n=e.step,s=(e.SW,e.SH,e.SX,e.SY,e.WW,e.WH,performance.now());d=!d;var x=(0,o.getQuadTreesObj)();if(r.menuSettings.spacedust&&x&&x.All){f=(0,u.getParticleSetting)(e,f,64e3,r.spaceDust);var S=r.screen.rectSS_800,T=r.screen.rectSS_600,E=(T.x,T.y,T.width,T.height,r.spaceDust);_.numDust=E.length;for(var M=(0,i.getForce2Tree)().queryInt(S),b=0;b<M.length;b++){var I=M[b];if(0!==I.type)for(var L=I.radius,P=Math.ceil(.01*L),w=0;w<P;w++)c.x=0,c.y=0,c.setLength(L*Math.random()),c.setAngle(9*Math.random()),(0,t.createDust)({x:I.pos.x+c.x,y:I.pos.y+c.y},1,1,e,Math.random()-.5,Math.random()-.5)}var R=performance.now();p.reset(),_.quadrantSize=40,p.setup(S,40,41,3),g=performance.now()-R;var O=performance.now();(0,l.fastFunctionTreeInsert)(E,p,T),h=performance.now()-O;var C=p.references,D=(C.length,performance.now()),G=x.queryTreesRect([50,2,1,45,31,4,23,10,11,0,22],T),N=(performance.now(),G.length);for(b=0;b<N;b++){var B=G[b],F=B.radius;if(45===B.type&&(F=2*B.originalRadius),A.x=B.pos.x-F,A.y=B.pos.y-F,A.width=2*F,A.height=2*F,0===B.type||45===B.type){var V=(U=p.queryVec(B.pos,B.radius,B.radius)).length,k=0===B.type?3:.6;for(w=0;w<V;w+=2){var X=U[w];if((0,a.fine)(3,B.comp[0].vertex,X.pos)){var H=Math.atan2(B.pos.y-X.pos.y,B.pos.x-X.pos.x);X.vel.setAngle(H+Math.PI),X.vel.setLength(k+Math.random())}}}else{var U;for(V=(U=p.queryCircle(B.pos,B.radius)).length,w=0;w<V;w+=2)X=U[w],H=Math.atan2(B.pos.y-X.pos.y,B.pos.x-X.pos.x),X.vel.setAngle(H+Math.PI),X.vel.setLength(1+Math.random())}}v=performance.now()-D;var Y=performance.now();return(0,i.FastForce2CachedReversed)(p,T),(0,l.fastFunctionParticleUpdate)(C,n),y=performance.now()-Y,m=performance.now()-s,"spacedust"}}};t.default=S}.apply(t,a),void 0===n||(e.exports=n)},5014:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(5934),r(9262),r(2261),r(2068),r(2610),r(484),r(2093),r(5714)],n=function(e,t,r,a,n,s,u,l,A,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s=i(s),u=i(u);var d=(0,l.rect_pool_pop)(0,0,5,5),p=0,f={update:function(e){var t=e.game,i=e.step,l=(e.SW,t.spacePorts),f=(0,A.getQuadTreesObj)();if(f&&f.All){++p>6&&(p=0);for(var h=0;h<l.length;h++){var v=l[h],g=v.shipChargeHash,y=v.centerNoneCannon;for(var m in g){var _=(0,r.GetPlayerByGuidOrNull)(parseInt(m,10),e);if(_&&v.chargeParticles.length<1e3)for(var x=0;x<20;x++)v.chargeParticles.push(o(o({pos:new a.Vector(y.pos.x+60*(Math.random()-.5),y.pos.y+60*(Math.random()-.5)),vel:new a.Vector(5+5*Math.random(),20*(Math.random()-.5)),life:300,type:30,collType:26,radius:1,guid:-1,target:_},(0,c.setImovableDefaults)(null)),{armor:null}))}for(var S=v.chargeParticles,T=S.length,E=0;E<T;E++){(R=S[E]).life-=i;var M=R.target;if(M&&!M.remove){d.x=M.pos.x,d.y=M.pos.y;var b=Math.atan2(M.pos.y-R.pos.y,M.pos.x-R.pos.x),I=R.vel.getAngle();I=(0,n.normalizeRadianAngle)(I),I+=.5*(0,n.angleDelta)(I,b)*i,R.vel.setAngle(I)}(0,u.default)(t,R,!1);var L=R.vel.getLength();L>10&&R.vel.setLength(10),L>3&&R.vel.mult(.99),(0,s.default)(R,i),(R.life<0||d.intersectsPoint(R.pos))&&(R.remove=!0,R.target=void 0)}for(var P=[],w=0;w<T;w++){var R;(R=S[w]).remove||P.push(R)}v.chargeParticles=P,v.shipChargeHash={}}return"Spaceport"}}};t.default=f}.apply(t,a),void 0===n||(e.exports=n)},6845:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={update:function(e){for(var t=e.game.sparks,r=t.length,a=[],n=0;n<r;n++){var o=t[n];o.pos.addXY(o.vel.x*e.step,o.vel.y*e.step),o.vel.addXY(0,.3*e.step),o.life-=e.stepMS,o.life>0&&a.push(o)}return e.game.sparks=a,"sparks"}}}.apply(t,[r,t]),void 0===a||(e.exports=a)},9900:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(737),r(7185),r(7899)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r);var i=[0,0,1,1,0,1],s=[1,0,0,1,1,0],u=[0,1,0,0,1,1],l=0,A=!1,c=function(e){var t=e.game.traceLine;if(t.length>0){var r=t[t.length-1];if(r.active)return r}t.length===i.length&&(e.game.traceLine.shift(),A||(e.game.notifications.push({life:n.NOTIFICATION_LIFE,type:73,message:"Lost traceline. Adding more will loose the oldest."}),A=!0),++l>t.length&&(l=0));var a,o=(a=t.length-l,{a:1,r:i[a%i.length],g:s[a%s.length],b:u[a%u.length],line:[],active:!0});return t.push(o),o},d=0,p={update:function(e){var t,n=e.stepMS;d+=n;var o=(0,r.default)(e),i=null===(t=null==o?void 0:o.abilities.hash[9])||void 0===t?void 0:t.activated;if(o&&i&&d>500){var s=c(e);o.isTracing?(s.line.push(o.pos.toPoint()),s.active=!1):s.line.push(o.pos.toPoint()),o.isTracing=!o.isTracing,d=0}if(e.frameCnt%60==0&&(null==o?void 0:o.isTracing)){var u=(s=c(e)).line;if(0===u.length)u.push(o.pos.toPoint());else if(u.length>1500)s.active=!1;else{var l=u[u.length-1];if((0,a.distanceBetweenVectors)(l,o.pos)>100){var A=u[u.length-2];if(A){var p=(0,a.distanceBetweenVectors)(A,o.pos),f=(0,a.distanceBetweenVectors)(A,l)+(0,a.distanceBetweenVectors)(l,o.pos);Math.abs(p-f)<20?(l.x=o.pos.x,l.y=o.pos.y):u.push(o.pos.toPoint())}else u.push(o.pos.toPoint())}}}return"TraceLine"}};t.default=p}.apply(t,a),void 0===n||(e.exports=n)},686:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(5182),r(2261),r(2068),r(3431),r(484),r(1128),r(2093),r(7185),r(6265),r(1477),r(384)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetPartsTree=void 0,n=o(n),t.GetPartsTree=function(){return v};var f=6e3,h=(0,s.rect_pool_pop)(0,0,0,0),v=new d.QuadTreeFastPoint32((0,s.rect_pool_pop)(0,0,100,100),20,84),g={update:function(e){var t=e.game,o=(e.SW,e.SH,e.SX,e.SY,e.WW),s=e.WH,d=e.step,g=(0,l.getQuadTreesObj)();if(g&&g.All){f=(0,p.getParticleSetting)(e,f,6e3,t.asteroidParts);var y=t.screen.rectSS_400,m=t.asteroidParts;v.reset(),v.setup(y,20,84);for(var _=m.length,x=0;x<_;x++){var S=m[x];v.insert(S)}var T=v.queryInt(y),E=T.length,M=g.queryTreesRect([50,2,1,45,31,4,23,11,0],y),b=M.length;for(x=0;x<b;x++){var I,L=M[x],P=2*L.radius;if(45===L.type?P=2*L.originalRadius:4!==L.type&&23!==L.type||(P=L.radius),h.x=L.pos.x-P,h.y=L.pos.y-P,h.width=2*P,h.height=2*P,0===L.type)for(var w=(I=v.queryInt(h)).length,R=0;R<w;R++){var O=I[R];if((0,A.fine)(3,L.comp[0].vertex,O.pos)){var C=Math.atan2(L.pos.y-O.pos.y,L.pos.x-O.pos.x);O.vel.setAngle(C+Math.PI);var D=.7*Math.random();O.vel.setLength(1*D+2),(0,n.default)(O,d),Math.abs(O.angleVel)<.1?O.angleVel=(D>.5?D:.4-D)*D*.1:O.angleVel*=2}}else for(w=(I=v.queryInt(h)).length,R=0;R<w;R++){O=I[R],C=Math.atan2(L.pos.y-O.pos.y,L.pos.x-O.pos.x);var G=O.pos.x-L.pos.x,N=O.pos.y-L.pos.y;(0,u.OperatorApproxDist96)(G,N)<P&&(O.vel.setAngle(C+Math.PI),D=.7*Math.random(),O.vel.setLength(1*D+.1),(0,n.default)(O,d),Math.abs(O.angleVel)<.1?O.angleVel=(D>.5?D:.4-D)*D*.1:O.angleVel*=2)}}for(x=0;x<E;x++){var B=(S=T[x]).vel.getLength();B>7&&S.vel.setLength(7),(0,n.default)(S,d),S.angle+=S.angleVel,B>0&&S.vel.mult(.98),S.angleVel*=.996;var F=S.angle;(S.angleVel>.01||S.angleVel<.01)&&(S.angleVel>.3?S.angleVel=.3:S.angleVel<-.3&&(S.angleVel=-.3),S.rotatedEdgeA&&(S.rotatedEdgeA=(0,a.rotateVector)(S.edgeA,F,S.rotatedEdgeA)),S.rotatedEdgeB&&(S.rotatedEdgeB=(0,a.rotateVector)(S.edgeB,F,S.rotatedEdgeB))),(0,r.shift)(S,o,s),(0,i.wormhole)(S,e)}var V=(0,c.getForce2Tree)().queryInt(e.game.screen.rectSS_400);for(x=0;x<V.length;x++){var k=V[x],X=v.queryCircle(k.pos,k.radius);(0,c.FastForce2Cached)(X,k,1.9)}if(t.screen.rectSS_800,m.length>2500){var H=[],U=0;for(x=0;x<_;x++)O=m[x],U<50&&!y.intersectsPoint(O.pos)?U++:H.push(O);t.asteroidParts=H}return"parts"}}};t.default=g}.apply(t,a),void 0===n||(e.exports=n)},1521:(e,t,r)=>{var a,n;a=[r,t,r(9405),r(8867)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={update:function(e){return e.game,e.stepMS,0}}}.apply(t,a),void 0===n||(e.exports=n)},4831:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(7899),r(9262),r(7185),r(5714),r(7561),r(9217)],n=function(e,t,r,a,n,i,s,u){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0});var A=((l={})[4]=24,l[36]=37,l[9]=38,l);t.default=function(e,t,l){void 0===l&&(l=1);var c=e,d=c.sides,p=A[e.type],f=c.radius;if(4===e.type&&f>20){var h=[],v=c;(0,s.blockCirclePoly)(v.sides,v.radius*(v.radius>100?.5:.6),v.pos.x,v.pos.y,v.angle,h,0,0,0,Math.max(4,.22*v.radius));for(var g=new a.Vector(5,0),y=0;y<h.length;y+=6){var m=h[y],_=h[y+1],x=Math.atan2(_-v.pos.y,m-v.pos.x);g.setAngle(x),(0,u.createFragmentsFromTriangle)(t,[{x:h[y],y:h[y+1]},{x:h[y+2],y:h[y+3]},{x:h[y+4],y:h[y+5]}],Math.min(Math.ceil(v.radius/80),2),v,g)}}else{var S=c.angle,T=d;d=f<20?3:d;for(var E=Math.cos(r.doublePI*(d/T)+S)*f|0,M=Math.sin(r.doublePI*(d/T)+S)*f|0,b=0,I=0,L=new a.Vector(0,0),P=25+25*Math.random();d>-1;--d){b=Math.cos(r.doublePI*(d/T)+S)*f|0,I=Math.sin(r.doublePI*(d/T)+S)*f|0;var w=new a.Vector(b+c.pos.x,I+c.pos.y),R=new a.Vector(E+c.pos.x,M+c.pos.y),O=(0,n.distanceBetweenVectors)(w,R),C=Math.atan2(w.y-R.y,w.x-R.x),D=Math.atan2(c.pos.y-R.y,c.pos.x-R.x);L.set(0,0),L.setLength(O),L.setAngle(C);for(var G=O>P?Math.ceil(O/P):1,N=O/G*.5,B=0;B<G;B++){var F=B/G,V=new a.Vector(0,0);V.setLength(F+N),V.setAngle(C),V.add(w);var k=new a.Vector(0,0);k.setAngle(C),k.setLength(N);var X=new a.Vector(0,0);X.setAngle(C-Math.PI),X.setLength(N);var H=new a.Vector(b*Math.random()-.5*l,I*Math.random()-.5*l),U=o(o({fromType:e.type,edgeA:k,edgeB:X,rotatedEdgeA:new a.Vector(0,0),rotatedEdgeB:new a.Vector(0,0),colorFade:255,complexPartIndices:null,complexPartVectors:null,pos:V,angle:D,angleVel:.01*Math.random()-.005,vel:H.clone(),guid:(0,n.getGuid)(),type:p,collType:26,life:100+50*Math.random(),radius:.05*c.radius,width:12*Math.min(30,Math.max(.01*c.radius),4)},(0,i.setImovableDefaults)(null)),{armor:null});t.game.asteroidParts.push(U)}E=b,M=I}}}}.apply(t,a),void 0===n||(e.exports=n)},1201:(e,t,r)=>{var a,n;a=[r,t,r(2261),r(9262),r(337)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AimPoint=void 0;var o=new a.Vector(0,0);t.AimPoint=function(e){o.set(3e3,0),o.setAngle(e.angle),o.add(e.pos);var t=(0,n.rayIntersections)(e.pos,o,(0,r.normalizeRadianAngle)(e.angle),e.guid);t.target?(e.aimPoint.x=t.pos.x,e.aimPoint.y=t.pos.y,e.aimTarget=t.target):(e.aimPoint.x=o.x,e.aimPoint.y=o.y,e.aimTarget=null)}}.apply(t,a),void 0===n||(e.exports=n)},9254:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(5654)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r),t.default=function(e,t){(0,r.default)(t,e)}}.apply(t,a),void 0===n||(e.exports=n)},2412:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(9262),r(2826),r(2093)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForceEffectBalls=t.ForceEffectShipArray=void 0;var i=new a.Vector(0,0);t.ForceEffectShipArray=function(e,t){for(var r=t.length,a=0;a<r;a++)u(e,t[a])};var s=(0,a.vec_pool_pop)(0,0);t.ForceEffectBalls=function(e,t){for(var r=t.length,a=0;a<r;a++){var o=t[a];if(void 0!==o.forceX&&0!==o.forceX||void 0!==o.forceY&&0!==o.forceY){s.set(o.radius,0),s.setAngle(Math.random()*Math.PI*2);for(var i=.1*o.radius,u=0;u<i;u++){var l=(0,n.createParticle)(o.pos.x+s.x,o.pos.y+s.y,o.forceX,o.forceY,5*Math.random()+2);e.game.particles.push(l)}o.forceX*=.8,o.forceY*=.8,Math.abs(o.forceX)<.1&&Math.abs(o.forceY)<.1&&(o.forceX=0,o.forceY=0)}}};var u=function(e,t){if(void 0!==t.forceX&&0!==t.forceX||void 0!==t.forceY&&0!==t.forceY){for(var a=t.comp[0].vertex,o=[0,1,0,2],s=[2,2,1,0],u=Math.abs(t.forceX)+Math.abs(t.forceY),l=0;l<a.length;l++){var A=a[l],c=(Math.random()-.5)*u*15,d=(Math.random()-.5)*u*15;A.x+=c,A.y+=d}for(var p=0;p<o.length;p++)for(l=0;l<a.length;l++){var f=(0,r.midpoint)(a[o[p]],a[s[p]],Math.random(),i),h=(0,n.createParticle)(f.x,f.y,t.forceX,t.forceY,5*Math.random()+2);e.game.particles.push(h)}Math.abs(t.forceX)<.07&&Math.abs(t.forceY)<.07&&(t.forceX=0,t.forceY=0),t.forceX*=.8,t.forceY*=.8}},l={update:function(e){var r=e.game;return(0,t.ForceEffectShipArray)(e,(0,o.getQuadTreesObj)().queryTreesRect([50,0,45,1],r.screen.rectSS_600)),(0,t.ForceEffectBalls)(e,(0,o.getQuadTreesObj)().queryTreesRect([4,43,23,11,44,42,25],r.screen.rectSS_600)),"ForceEffect"}};t.default=l}.apply(t,a),void 0===n||(e.exports=n)},7331:(e,t,r)=>{var a,n;a=[r,t,r(2826),r(5345),r(2093)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=e.game,o=(0,n.getQuadTreesObj)().queryTreesRect([31,33],t.screen.rectSS_600),i=o.length,s=0;s<i;s++){for(var u=o[s],l=0;l<4;l++){var A=(0,r.createParticle)(u.pos.x-u.vel.x/((l+1)/4),u.pos.y-u.vel.y/((l+1)/4),Math.random()-.5,Math.random()-.5,300);t.particles.push(A)}Math.random()>.8&&(0,a.createDust)(u.pos,Math.floor(3*Math.random()),1,e)}}}.apply(t,a),void 0===n||(e.exports=n)},5502:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7331),r(9195),r(7899),r(5345),r(1201)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r),a=o(a);var u={update:function(e){var t,o,u,l,A=e.game.player;(0,r.default)(e);for(var c=0;c<A.length;c++){var d=A[c],p=d.keyCodes;if(!(d.abilities.active.cloak>0)){if(0==(null===(t=d.aimTarget)||void 0===t?void 0:t.armor.type)&&(null===(o=d.weapons.hash[28])||void 0===o?void 0:o.active)&&(0,i.createDust)(d.aimPoint,7,13,e),d.abilities.hash[14]&&(p.STRAFELEFT&&((0,a.default)(e,d,.5*Math.PI,2),(0,a.default)(e,d,.5*Math.PI,2,-2*n.SHIP_LENGTH_RADIUS,-2*n.SHIP_LENGTH_RADIUS)),p.STRAFERIGHT&&((0,a.default)(e,d,.5*-Math.PI,2),(0,a.default)(e,d,.5*-Math.PI,2,-2*n.SHIP_LENGTH_RADIUS,-2*n.SHIP_LENGTH_RADIUS))),p.LEFT&&((0,a.default)(e,d,.5*Math.PI,2,-2*n.SHIP_LENGTH_RADIUS,-2*n.SHIP_LENGTH_RADIUS),(0,a.default)(e,d,.5*-Math.PI,3)),p.RIGHT&&((0,a.default)(e,d,.5*-Math.PI,2,-2*n.SHIP_LENGTH_RADIUS,-2*n.SHIP_LENGTH_RADIUS),(0,a.default)(e,d,.5*Math.PI,3)),p.DOWN&&((0,a.default)(e,d,0,3,0,n.SHIP_WIDTH_RADIUS,!0),(0,a.default)(e,d,0,3,0,-n.SHIP_WIDTH_RADIUS,!0)),p.UP||(null===(u=d.abilities.hash[2])||void 0===u?void 0:u.activated)){var f;f=(null===(l=d.abilities.hash[2])||void 0===l?void 0:l.activated)?50:Math.round(20*d.keyCodes.UP),(0,a.default)(e,d,Math.PI+.2*(Math.random()-.5),f)}d.abilities.hash[10]&&(0,s.AimPoint)(d)}}return"ship"}};t.default=u}.apply(t,a),void 0===n||(e.exports=n)},9195:(e,t,r)=>{var a,n;a=[r,t,r(9262),r(7899),r(2826)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=new r.Vector(0,0);t.default=function(e,t,r,i,s,u,l){void 0===s&&(s=0),void 0===u&&(u=0),void 0===l&&(l=!1);for(var A=0;A<i;A++){l?o.setLength(Math.min(3*i,5)):o.setLength(Math.min(3*i,20)),o.setAngle(t.angle+r),o.mult(Math.random());var c=(0,n.createParticle)(t.pos.x-t.vel.x*((A+1)/i)*2+Math.cos(t.angle)*-(a.SHIP_LENGTH_RADIUS+s),t.pos.y-t.vel.y*((A+1)/i)*2+Math.sin(t.angle)*-(a.SHIP_LENGTH_RADIUS+u),o.x,o.y,15*Math.random());e.game.particles.push(c)}}}.apply(t,a),void 0===n||(e.exports=n)},7405:(e,t,r)=>{var a,n;a=[r,t,r(2261),r(2093),r(770)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MineralsExhangeRate=t.PlatinumExhangeRate=t.IronExhangeRate=void 0;var o=function(e,t,a){var n=e.cannons.filter((function(e){return e.isCannon})),o=n.map((function(e){return e.bullets})),i=(0,r.spreadValueEquallyInArray)(o,t.iron.value*a,n[0].maxBullets);n.forEach((function(e,t){return e.bullets=i[t]}))};t.IronExhangeRate=function(e,t){var r=e.abilities.hash[11];if(r){var i=r.data;if(i.iron.value>0){var s=(0,a.getQuadTreesObj)().queryTreesVec([3],e.pos,e.radius,e.radius)[0];if(s){var u=parseFloat(Math.min(Math.max(.06,100/(.1*(s.resources.iron+i.iron.value+1))),.42).toFixed(2));return t&&i.iron.value>0&&(o(s,i,.78),(0,n.updateShipCredits)(e,Math.round(i.iron.value*u)),s.resources.iron+=i.iron.value,i.iron.value=0),{success:!0,rate:u,resource:Math.round(i.iron.value),credits:Math.round(i.iron.value*u)}}}}return{success:!1}},t.PlatinumExhangeRate=function(e,t){var r=e.abilities.hash[11];if(r){var i=r.data;if(i.platinum.value>0){var s=(0,a.getQuadTreesObj)().queryTreesVec([3],e.pos,e.radius,e.radius)[0];if(s){var u=parseFloat(Math.min(Math.max(3.32,100/(.1*(s.resources.platinum+i.platinum.value+1))),18.42).toFixed(2));return t&&i.platinum.value>0&&(o(s,i,1.43),(0,n.updateShipCredits)(e,Math.round(i.platinum.value*u)),s.resources.platinum+=i.platinum.value,i.platinum.value=0),{success:!0,rate:u,resource:Math.round(i.platinum.value),credits:Math.round(i.platinum.value*u)}}}}return{success:!1}},t.MineralsExhangeRate=function(e,t){var r=e.abilities.hash[11];if(r){var i=r.data;if(i.minerals.value>0){var s=(0,a.getQuadTreesObj)().queryTreesVec([3],e.pos,e.radius,e.radius)[0];if(s){var u=parseFloat(Math.min(Math.max(9.2,100/(.1*(s.resources.minerals+i.minerals.value+1))),23.1).toFixed(2));return t&&i.minerals.value>0&&(o(s,i,3.76),(0,n.updateShipCredits)(e,Math.round(i.minerals.value*u)),s.resources.minerals+=i.minerals.value,i.minerals.value=0),{success:!0,rate:u,resource:Math.round(i.minerals.value),credits:Math.round(i.minerals.value*u)}}}}return{success:!1}}}.apply(t,a),void 0===n||(e.exports=n)},1470:(e,t,r)=>{var a,n;a=[r,t,r(3473)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=!1,n=-1,o=-1,i=[],s=[],u=function(e){a=!1,o=-1,o=-1,e.abilities.all.forEach((function(e){e.guiHardSelected=!1,e.guiSoftSelected=!1,e.guiSoftSelectedMoveTo=!1}))},l=function(e){e.abilities.all.forEach((function(e){e.guiSoftSelected=!1})),i=[],s=[];for(var t=[e.abilities.primary,e.abilities.secondary,e.abilities.aux],r=0;r<t.length;r++){for(var a=t[r],o=0;o<a.types.length;o++)s.push(e.abilities.hash[a.types[o]]);if(a.types.length>1){for(o=0;o<a.types.length;o++)i.push(e.abilities.hash[a.types[o]]);-1===n&&(n=0,e.abilities.hash[a.types[0]].guiSoftSelected=!0)}}i.length>0&&(n=0)};t.default={moveSelection:function(e){n++,a?(n>s.length-1&&(n=0),s.forEach((function(e){e.guiSoftSelected=!1,e.guiSoftSelectedMoveTo=!1})),s[n].guiSoftSelectedMoveTo=!0):(i.forEach((function(e){e.guiSoftSelected=!1,e.guiSoftSelectedMoveTo=!1})),n>i.length-1&&(n=0),i[n].guiSoftSelected=!0)},reset:u,init:function(e){-1===n&&l(e)},action:function(e){a&&-1!==o?function(e){var t=e.abilities.all.find((function(e){return e.guiHardSelected})),a=e.abilities.all.find((function(e){return e.guiSoftSelectedMoveTo})),n=e.abilities.byArrayType[a.arrayType].types.indexOf(a.type);(0,r.reOrderAbilitys)(e.abilities.byArrayType[t.arrayType],e.abilities.byArrayType[a.arrayType],t.type,e.abilities,n),u(e),l(e)}(e):-1===n?l(e):(i[n].guiSoftSelected=!1,i[n].guiHardSelected=!0,(o=n+1)>i.length-1&&(o=0),i[o].guiSoftSelectedMoveTo=!0,a=!0)}}}.apply(t,a),void 0===n||(e.exports=n)},3857:(e,t,r)=>{var a,n;a=[r,t,r(6063)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=!1,n=-1,o=-1,i=[],s=[],u=function(e){a=!1,o=-1,o=-1,e.weapons.all.forEach((function(e){e.guiHardSelected=!1,e.guiSoftSelected=!1,e.guiSoftSelectedMoveTo=!1}))},l=function(e){e.weapons.all.forEach((function(e){e.guiSoftSelected=!1})),i=[],s=[];for(var t=[e.weapons.primary,e.weapons.secondary,e.weapons.aux],r=0;r<t.length;r++){for(var a=t[r],o=0;o<a.types.length;o++)s.push(e.weapons.hash[a.types[o]]);if(a.types.length>1){for(o=0;o<a.types.length;o++)i.push(e.weapons.hash[a.types[o]]);-1===n&&(n=0,e.weapons.hash[a.types[0]].guiSoftSelected=!0)}}i.length>0&&(n=0)};t.default={moveSelection:function(e){n++,a?(n>s.length-1&&(n=0),s.forEach((function(e){e.guiSoftSelected=!1,e.guiSoftSelectedMoveTo=!1})),s[n].guiSoftSelectedMoveTo=!0):(i.forEach((function(e){e.guiSoftSelected=!1,e.guiSoftSelectedMoveTo=!1})),n>i.length-1&&(n=0),n>-1&&i.length>0&&(i[n].guiSoftSelected=!0))},reset:u,init:function(e){-1===n&&l(e)},action:function(e){a&&-1!==o?function(e){var t=e.weapons.all.find((function(e){return e.guiHardSelected})),a=e.weapons.all.find((function(e){return e.guiSoftSelectedMoveTo})),n=e.weapons.byArrayType[a.arrayType].types.indexOf(a.type);(0,r.reOrderWeapons)(e.weapons.byArrayType[t.arrayType],e.weapons.byArrayType[a.arrayType],t.type,e.weapons,n),u(e),l(e)}(e):-1===n?l(e):n>=0&&n<i.length&&(i[n].guiSoftSelected=!1,i[n].guiHardSelected=!0,(o=n+1)>i.length-1&&(o=0),i[o].guiSoftSelectedMoveTo=!0,a=!0)}}}.apply(t,a),void 0===n||(e.exports=n)},7519:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(34),r(2993),r(6063),r(737),r(3473),r(4077),r(770),r(7405),r(3857),r(1470),r(6330),r(3578),r(9262)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o(i),c=o(c),d=o(d),p=o(p);var v=function(e,t){e.node.focused=!1;var r=0;switch(t){case 2:14===e.parent.type?e.node.focused=!0:e.parent.focused=!0;break;case 3:e.parent.aquired&&e.node.children.length?e.node.children[0].focused=!0:e.node.focused=!0;break;case 0:e.parent.aquired?r=-1:e.node.focused=!0;break;case 1:e.parent.aquired?r=1:e.node.focused=!0}if(0!==r){var a=e.parent.children.indexOf(e.node),n=e.parent.children[a+r];n&&a>-1?n.focused=!0:e.node.focused=!0}},g=function(e,t,r){for(var a=0;a<e.children.length;a++){var n=e.children[a],o=t+100*a,i=r+-200;if(n.focused)return{node:n,parent:e};var s=g(n,o,i);if(s)return s}},y=!1,m=0,_=function(e,t){for(var r=0;r<e.children.length;r++){var a=e.children[r];if(!a.aquired){if(0===a.type){var n=a.installationData.type;a.aquired=!!t.weapons.hash[n]}if(4===a.type){var o=a.installationData.type;a.aquired=!!t.abilities.hash[o]}}_(a,t)}},x={update:function(e){var t,o,x,S,T,E=e.game,M=e.stepMS;if(E.skillTree.active)E.allKeyCodes.currentKeyCode===a.Keys.ESCAPE&&(E.skillTree.active=!1);else{if(!(E.currentLevel>13))return;var b=(0,i.default)(e);b&&b.keyCodes.INTERACT&&b.inSafeZone&&(E.skillTree.active||p.default.resetAll(b),E.skillTree.active=!0,E.skillTree.hasBeenActivated=!0)}if(E.skillTree.active){var I=(0,i.default)(e);if(I){var L=E.skillTree.node;_(L,I);var P=g(L,0,0);if(E.skillTree.focused=P,I)if(17===P.node.type&&c.default.init(I),18===P.node.type&&d.default.init(I),!y&&I.keyCodes.LEFT)v(P,2),y=!0,m=0;else if(!y&&I.keyCodes.RIGHT)p.default.moveSelection(I,P.node.type)||v(P,3),y=!0,m=0;else if(!y&&I.keyCodes.DOWN)v(P,1),y=!0,m=0;else if(!y&&I.keyCodes.UP)v(P,0),y=!0,m=0;else if(!y&&I.keyCodes.PRIMARY_WEAPON){if(y=!0,m=0,p.default.action(I,P.node.type),11===P.node.type){var w=P.node,R=I.weapons.hash[w.weaponInformation.type];if(R){var O=R.ammunitionCost*(R.ammunition.max-R.ammunition.value);if(I.credits>=O)(0,l.updateShipCredits)(I,-O),R.ammunition.value=R.ammunition.max;else{var C=Math.floor(I.credits/R.ammunitionCost);(0,l.updateShipCredits)(I,-C*R.ammunitionCost),R.ammunition.value+=C}}}else if(8===P.node.type)(0,A.IronExhangeRate)(I,!0);else if(9===P.node.type)(0,A.MineralsExhangeRate)(I,!0);else if(10===P.node.type)(0,A.PlatinumExhangeRate)(I,!0);else if(19===P.node.type){if(I.credits>800){(0,l.updateShipCredits)(I,-800);var D=(0,h.vec_pool_pop)(500,0);D.setAngle(Math.random()*Math.PI*2),D.add(I.pos);var G=(0,f.createDrones)(e,D,1,I.guid);(t=E.drones).push.apply(t,G)}}else if((null===(x=null===(o=P.node)||void 0===o?void 0:o.installationData)||void 0===x?void 0:x.cost)&&!P.node.aquired&&I.credits>=P.node.installationData.cost){if(0===(null===(S=P.node.installationData)||void 0===S?void 0:S.installationType)){var N=I.weapons.hash[P.node.installationData.type],B=!(U=P.node.requirements);if(U)e:for(var F=0;F<U.length;F++){if(0===(W=U[F]).installationType&&(B=!!I.weapons.hash[W.type]),1===W.installationType&&(B=!!I.abilities.hash[W.type]),2===W.installationType){var V=P.parent.children.indexOf(P.node),k=P.parent.children[V-1];if(k)for(var X=0;X<k.requirements.length;X++){var H=k.requirements[X];if((H.subType!==W.subType||H.subType===W.subType&&k.aquired)&&(B=!0),!B)break e}else B=!0}if(!B)break}P.parent.aquired&&B&&(N?(0,r.upgradeWeapon)(N,P.node.weaponUpgrade):(0,n.addWeaponToShip)(I,(0,n.createWeapon)(P.node.installationData.type,I.guid,I.type)),(0,l.updateShipCredits)(I,-P.node.installationData.cost),P.node.aquired=!0)}if(1===(null===(T=P.node.installationData)||void 0===T?void 0:T.installationType)){var U,Y=I.abilities.hash[P.node.installationData.type];if(B=!(U=P.node.requirements),U)for(F=0;F<U.length;F++){var W;if(1===(W=U[F]).installationType&&(B=!!I.abilities.hash[W.type]),0===W.installationType&&(B=!!I.weapons.hash[W.type]),2===W.installationType&&(0,u.LOG_GL_FIXED_FORCED)("SKILL TYPE NOT IMPLEMENTED","[PREVIOUSREQUIRED]"),!B)break}P.parent.aquired&&B&&(Y?(0,r.upgradeAbility)(Y,P.node.abilityUpgrade):(0,s.addAbilityToShip)(I,(0,s.createAbility)(P.node.installationData.type)),(0,l.updateShipCredits)(I,-P.node.installationData.cost),P.node.aquired=!0)}}}else(m+=M)>140&&(y=!1);return"skilltree"}}}};t.default=x}.apply(t,a),void 0===n||(e.exports=n)},770:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateShipCredits=void 0,t.updateShipCredits=function(e,t){t>0&&(e.score+=3*t),e.credits+=t}}.apply(t,[r,t]),void 0===a||(e.exports=a)},6330:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1470),r(3857)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r),a=o(a),t.default={reset:function(e,t){18===t&&r.default.reset(e),17===t&&a.default.reset(e)},init:function(e,t){18===t&&r.default.init(e),17===t&&a.default.init(e)},resetAll:function(e){r.default.reset(e),a.default.reset(e)},moveSelection:function(e,t){return 17===t?(a.default.moveSelection(e),!0):18===t?(r.default.moveSelection(e),!0):void 0},action:function(e,t){17===t&&a.default.action(e),18===t&&r.default.action(e)}}}.apply(t,a),void 0===n||(e.exports=n)},2126:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(737),r(7899),r(5346),r(7185),r(2093),r(4359),r(8465)],n=function(e,t,r,a,n,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r);var A=0,c=!1,d={update:function(e){var t,o,d,p,f=e.game,h=e.SW,v=e.stepMS,g=(e.SX,e.SY,e.SH),y=(0,s.getQuadTreesObj)(),m=f.screen.rect,_=(0,r.default)(e);if(_&&y.All)if((0,u.posInAncient)(_.pos)){(0,n.createSubtitle)({text:["COMMANDER: Are you sure that is a good idea?"],noShowAgainMS:25e4,face:0});var x=y.queryTreesVec([6],_.pos,_.radius,_.radius)[0];x&&(0,i.distanceBetweenVectors)(x.pos,_.pos)<x.radius-300?(c=!0,(0,n.createSubtitle)({text:["COMMANDER: I guess you did...  I can't see you on my system anymore","We talk again when you get out."],noShowAgainMS:25e4,face:0})):c&&(0,n.createSubtitle)({text:["COMMANDER: I see there's more to you than meets the eye.","I hope you found what you where looking for.","Now let's blast some space beasts to hell."],noShowAgainMS:25e4,face:0})}else{c=!1;var S=y.queryTreesVec([3],_.pos,_.radius,_.radius)[0];if(S){S.centerNoneCannon.life<.66*a.SPACEPORT_START_LIFE&&(0,n.createSubtitle)({text:[S.name+": We can't take this anymore. They are overwhelming us.","You need to get the hell out of here."],noShowAgainMS:2e4,face:1});for(var T=S.cannons,E=T.length,M=0;M<E;M++){var b=T[M];b.life<.95*a.SPACEPORT_START_LIFE&&b.life>.85*a.SPACEPORT_START_LIFE?(0,n.createSubtitle)({text:[S.name+": Cannon crew "+b.name+" taking damage"],noShowAgainMS:2e7,face:1}):b.life>.45*a.SPACEPORT_START_LIFE&&b.life<.7*a.SPACEPORT_START_LIFE?(0,n.createSubtitle)({text:[S.name+": Cannon crew "+b.name+" taking heavy damage"],noShowAgainMS:2e7,face:1}):b.life<.3*a.SPACEPORT_START_LIFE?(0,n.createSubtitle)({text:[S.name+": Cannon crew "+b.name+" reporting in.","We won't be able to take this much longer..."],noShowAgainMS:2e7,face:1}):(b.life<=0||b.remove)&&(b.isCannon?(0,n.createSubtitle)({text:[b.ownerName+": Oh god! We just lost the crew on cannon "+b.name+". ","Those poor souls. You must leave this place.","You will be the death of us all..."],noShowAgainMS:8e3,face:1}):(0,n.createSubtitle)({text:[b.ownerName+": Nooooooo...     [static]"],noShowAgainMS:1e3,face:1}))}}if((A+=v)>800){if(A=0,(0,n.createSubtitle)({text:["God speed captain.","I will do my best to guide you."],noShowAgainMS:9e11,face:0}),!_.inSafeZone){var I=(0,s.getQuadTreesObj)().queryCircle([3],_.pos,3*h)[0];I&&I.reparations.life>_.life&&(0,n.createSubtitle)({text:["COMMANDER: There is a spaceport nearby.","Make a visit and restock your armory",I.name+"It is located at: "+(I.pos.x*l.COORD_GUI_HUD_M+.5*h*l.COORD_GUI_HUD_M|0)+" | "+(I.pos.y*l.COORD_GUI_HUD_M+.5*g*l.COORD_GUI_HUD_M|0)],noShowAgainMS:5e4,face:0})}if(_.life<20||(null===(t=_.weapons.hash[26])||void 0===t?void 0:t.ammunition.value)<250){var L=Number.MAX_VALUE,P=null;for(M=0;M<f.spacePorts.length;M++){var w=f.spacePorts[M],R=(0,i.distanceBetweenVectors)(_.pos,w.pos);R<L&&(L=R,P=w)}P&&((null===(o=_.weapons.hash[26])||void 0===o?void 0:o.ammunition.value)<250&&_.life>20?(null===(d=_.weapons.hash[26])||void 0===d?void 0:d.ammunition.value)<1?(0,n.createSubtitle)({text:["COMMANDER: You have gone through your entire magazine of space-bullets.","You need to find a spaceport.","The closest one is "+P.name+".","It is located at: "+(P.pos.x*l.COORD_GUI_HUD_M|0)+" | "+(P.pos.y*l.COORD_GUI_HUD_M|0)],noShowAgainMS:5e4,face:0}):(0,n.createSubtitle)({text:["COMMANDER: You are soon out of space-bullets.","You need to find a spaceport.","The closest one is "+P.name+".","It is located at: "+(P.pos.x*l.COORD_GUI_HUD_M|0)+" | "+(P.pos.y*l.COORD_GUI_HUD_M|0)],noShowAgainMS:5e4,face:0}):(0,n.createSubtitle)({text:["COMMANDER: You need to find a spaceport fast.","The closest one is "+P.name+".","It is located at: "+(P.pos.x*l.COORD_GUI_HUD_M|0)+" | "+(P.pos.y*l.COORD_GUI_HUD_M|0)],noShowAgainMS:5e4,face:0}))}var O=f.notifications[0];if(O&&72===O.type&&(0,n.createSubtitle)({text:["Oh no! Space-parasites!","I hope there are not too many of them on you."],noShowAgainMS:1e6,face:0}),_.targetLock&&m.intersectsPoint(_.targetLock.pos)){var C=(null===(p=_.weapons.hash[31])||void 0===p?void 0:p.ammunition.value)>0,D=_.weapons.hash[51]&&_.abilities.values.energy>0,G="",N=!1,B=!1,F="";C?(N=!0,G="rockets"):D?(N=!0,G="electrobastardray"):G="spacebullets";var V="";switch(_.targetLock.type){case 1:V="enemy ship",F=" to blow it up!";break;case 36:V="got damn spacesnake",F=" to destroy it!";break;case 9:V="spacesquid from hell",F=" to send it back to where it came from.";break;case 10:V="godforsaken spacespider",F=" and fucking kill it.";break;case 4:_.targetLock.radius<100&&(B=!0),G="spacebullets",V="asteroid",F=" and hopefully get some sweet powerups.";break;case 11:V="space ice",G="spacebullets",F=" or just leave it....";break;default:return void(V="[ "+_.targetLock.type+" ]")}B||(0,n.createSubtitle)({text:["Captain!","You have that "+V+(N?" locked on.":" in your sight."),"Use your "+G+F],noShowAgainMS:1e8,face:0})}return y.queryTreesRect([1,9,10],f.screen.rect).length>4&&(0,n.createSubtitle)({text:["There seems to be a whole lot of hostility in your sector.","Maybe you should get the fuck out of there."],noShowAgainMS:1e8,face:0}),"subtitles"}}}};t.default=d}.apply(t,a),void 0===n||(e.exports=n)},7899:(e,t,r)=>{var a;a=function(e,t){"use strict";var r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.PLAYER_SCORE_PLAYER_COLLIDED_WITH_ASTEROID=t.PLAYER_SCORE_REMOVED_ASTEROID=t.P_CHUNKS_SIZE_RES=t.PLAYER_SCORE_BULLET_HIT_ASTEROID=t.PLAYER_SCORE_KILLED_OTHER_SHIP=t.PLAYER_SCORE_BULLET_HIT_OTHER_SHIP=t.PLAYER_SCORE_STRUCK_BY_BULLET=t.PLAYER_SCORE_PLAYER_COLLIDED_WITH_SHIP=t.SHIP_MAX_MINES=t.SHIP_MAX_FLAMES=t.SHIP_MAX_ULTRABRIGHT=t.SHIP_MAX_HOMING_BULLETS=t.SHIP_MAX_SHIELD=t.SHIP_MAX_ELECTROBASTARDRAYS=t.SHIP_MAX_PROXIMITYMINES=t.SHIP_MAX_LIFE=t.SHIP_MAX_MISSILES=t.SHIP_MAX_BULLETS=t.SHIP_MAX_ROCKETS=t.SHIP_MAX_BOOST=t.SHIP_MAX_VEL=t.SPACEPORT_START_LIFE=t.ROCKET_START_LIFE=t.TEXT_SIZE_HUGE=t.TEXT_SIZE_SMALL=t.LEVEL_COMPLETION_TIMEOUT=t.BULLET_OWNER_IMMUNE_THRESHOLD=t.BULLET_START_LIFE=t.VERSION_STR=t.CHANGELOG=t.VELOCITY_THRESHOLD_COLLISION_SUBSTEP=t.PX_TO_MEETERS_CONVERSION=t.DAYLIGHT_LEVEL_START_TIME=t.DAYLIGHT_NIGHT_TIME=t.DAYLIGHT_TOTAL_DUSK_TIME=t.DAYLIGHT_TOTAL_DAWN_TIME=t.DAYLIGHT_DUSK_BEGIN_TIME=t.DAYLIGHT_DAWN_BEGIN_TIME=t.DAYLIGHT_TOTAL_TIME=t.STEP_MULTIP=t.NOTIFICATION_LIFE=t.TEXT_SIZE_LARGE=t.TEXT_SIZE_MEDIUM=t.ROCKFORMATION_RADIUS_LIFE_MULTIP=t.ASTEROID_RADIUS_LIFE_MULTIP=t.GAME_INTRO_TIMER=t.FORCE_FIELD_RESOLUTION=t.explosionsSizeList=t.FORCEFIELD_RESOLUTION_REVERSED_F2=t.FORCEFIELD_RESOLUTION_F2=t.WHITE_HOLE_Y=t.WHITE_HOLE_X=t.WORM_HOLE_OUT_Y=t.WORM_HOLE_OUT_X=t.WORM_HOLE_IN_Y=t.WORM_HOLE_IN_X=t.MAX_RADIUS_ENTITY=t.MAX_NUM_ASTEROIDS=t.IS_DEV=t.IS_NODE=t.MAP_SAFETY_ZONE=t.SHIP_WIDTH_RADIUS=t.SHIP_LENGTH_RADIUS=t.doublePI=t.PARTICLE_SPEED_TO_COLOR=t.PARTICLE_MAX_SPEED=t.PLAYER_LIFE_LOW_THRESHOLD=void 0,t.PLAYER_LIFE_LOW_THRESHOLD=30,t.PARTICLE_MAX_SPEED=30,t.PARTICLE_SPEED_TO_COLOR=255/t.PARTICLE_MAX_SPEED,t.doublePI=2*Math.PI,t.SHIP_LENGTH_RADIUS=20,t.SHIP_WIDTH_RADIUS=13,t.MAP_SAFETY_ZONE=400,t.IS_NODE="undefined"!=typeof process,t.IS_DEV=!t.IS_NODE&&(null===(a=null===(r=null===window||void 0===window?void 0:window.location)||void 0===r?void 0:r.origin)||void 0===a?void 0:a.startsWith("file")),t.MAX_NUM_ASTEROIDS=1800,t.MAX_RADIUS_ENTITY=400,t.WORM_HOLE_IN_X=.3,t.WORM_HOLE_IN_Y=.15,t.WORM_HOLE_OUT_X=.5,t.WORM_HOLE_OUT_Y=.5,t.WHITE_HOLE_X=.8,t.WHITE_HOLE_Y=.8,t.FORCEFIELD_RESOLUTION_F2=10,t.FORCEFIELD_RESOLUTION_REVERSED_F2=1/t.FORCEFIELD_RESOLUTION_F2,t.explosionsSizeList=[3,30,70,90,250,510,750,1010],t.FORCE_FIELD_RESOLUTION=.01,t.GAME_INTRO_TIMER=300,t.ASTEROID_RADIUS_LIFE_MULTIP=5,t.ROCKFORMATION_RADIUS_LIFE_MULTIP=22,t.TEXT_SIZE_MEDIUM=30,t.TEXT_SIZE_LARGE=60,t.NOTIFICATION_LIFE=220,t.STEP_MULTIP=.065,t.DAYLIGHT_TOTAL_TIME=3e5,t.DAYLIGHT_DAWN_BEGIN_TIME=0*t.DAYLIGHT_TOTAL_TIME,t.DAYLIGHT_DUSK_BEGIN_TIME=.7*t.DAYLIGHT_TOTAL_TIME,t.DAYLIGHT_TOTAL_DAWN_TIME=.04*t.DAYLIGHT_TOTAL_TIME,t.DAYLIGHT_TOTAL_DUSK_TIME=.04*t.DAYLIGHT_TOTAL_TIME,t.DAYLIGHT_NIGHT_TIME=t.DAYLIGHT_DUSK_BEGIN_TIME+1.2*t.DAYLIGHT_TOTAL_DUSK_TIME,t.DAYLIGHT_LEVEL_START_TIME=.9*t.DAYLIGHT_TOTAL_TIME,t.PX_TO_MEETERS_CONVERSION=.25,t.VELOCITY_THRESHOLD_COLLISION_SUBSTEP=5,t.CHANGELOG=["0.51.2 Stable multiple intersection resolution","0.51.1 Flight of the predators","0.50.2 Fog object tracing","0.49.1 xbox bt controller support (somewhat..) ~{O_o}~*","0.48 Electron forge","0.47.4 RAGL Illumination and fire snakes","0.46 Raycasted spacefog","0.45.5.1 Parasite: trial by fire","0.45 force damage","0.44 Minefields","0.43.5.1 One tree to rule them all (pooling)","0.41 From dusk til dawn","0.40.2 AMD shadows working(!)","0.40 Destroyers repaired by spaceport workers","0.39 the space snakes are back","0.38.1.1 coaxial gun mount","0.38 destruction","0.37.0.1 cluster rockets","0.36.2.1 persistant chunks","0.36 Chunks > scanline (alpha)","0.35.5 The iron economy","0.35 tech tree","0.34 highscore ladder","0.33.6.1 Dynamic layered forcemaps","0.32.1 High velocity impact resolver","0.31.2 ancient structures","0.30.2 procedural world","0.29 SAT collisions resolution","0.28.9.5 LOS shadows linear gradient","0.28.9.5 LOS shadows linear gradient","0.28.9.4 LOS shadows improved","0.28.9.1 LOS line of sight","0.28.9 shadow targets","0.28.8 back to crappy physics","0.28.7 destroyers","0.28.6 Fixed menu bugs."],t.VERSION_STR=t.CHANGELOG[0]+" 10/26/2025",t.BULLET_START_LIFE=400,t.BULLET_OWNER_IMMUNE_THRESHOLD=t.BULLET_START_LIFE-100,t.LEVEL_COMPLETION_TIMEOUT=16e3,t.TEXT_SIZE_SMALL=16,t.TEXT_SIZE_HUGE=110,t.ROCKET_START_LIFE=20,t.SPACEPORT_START_LIFE=1e3,t.SHIP_MAX_VEL=10,t.SHIP_MAX_BOOST=400,t.SHIP_MAX_ROCKETS=20,t.SHIP_MAX_BULLETS=5e3,t.SHIP_MAX_MISSILES=30,t.SHIP_MAX_LIFE=200,t.SHIP_MAX_PROXIMITYMINES=40,t.SHIP_MAX_ELECTROBASTARDRAYS=300,t.SHIP_MAX_SHIELD=1600,t.SHIP_MAX_HOMING_BULLETS=380,t.SHIP_MAX_ULTRABRIGHT=3800,t.SHIP_MAX_FLAMES=1200,t.SHIP_MAX_MINES=30,t.PLAYER_SCORE_PLAYER_COLLIDED_WITH_SHIP=1,t.PLAYER_SCORE_STRUCK_BY_BULLET=2,t.PLAYER_SCORE_BULLET_HIT_OTHER_SHIP=6,t.PLAYER_SCORE_KILLED_OTHER_SHIP=180,t.PLAYER_SCORE_BULLET_HIT_ASTEROID=2,t.P_CHUNKS_SIZE_RES=8e3,t.PLAYER_SCORE_REMOVED_ASTEROID=function(e){return e<40?10:50+Math.round(.25*e)},t.PLAYER_SCORE_PLAYER_COLLIDED_WITH_ASTEROID=function(e){return e<40?0:Math.round(2+.01*e)}}.apply(t,[r,t]),void 0===a||(e.exports=a)},3923:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(9262),r(7185),r(2826),r(5714),r(6265)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customExplosion=t.particleForExplosion=void 0,t.particleForExplosion=function(e,t,r,a){if(!(a.length>6e3)){for(var o=0;o<e;o++)(l=(0,n.createParticle)(t,r,Math.random()-.5,Math.random()-.5,100*Math.random())).vel.setLength(Math.random()+1),a.push(l);for(o=0;o<e;o++)(l=(0,n.createParticle)(t,r,15*(Math.random()-.5),15*(Math.random()-.5),50*Math.random())).vel.setLength(.1*Math.random()),a.push(l);if(e>10)for(var i=0;i<4;i++)for(var s=[10*Math.random()-5,10*Math.random()-5,10*Math.random()-5,10*Math.random()-5],u=0;u<s.length;u+=2)for(o=0;o<80;o++){var l;(l=(0,n.createParticle)(t,r,s[u]+.1*Math.random(),-s[u+1]+.1*Math.random(),130*Math.random())).vel.setLength(.1*o),a.push(l)}}},t.customExplosion=function(e,t,n,s,u,l,A,c){if(!(c.length>5e3)){for(var d=0;d<e;d++)(v=o(o({type:20,collType:26,guid:(0,a.getGuid)(),color:{r:s,g:u,b:l,a:A},life:100*Math.random(),radius:1,pos:new r.Vector(t,n),vel:new r.Vector(Math.random()-.5,Math.random()-.5)},(0,i.setImovableDefaults)(null)),{armor:null})).vel.setLength(Math.random()+1),c.push(v);for(d=0;d<e;d++)(v=o(o({type:20,collType:26,guid:(0,a.getGuid)(),color:{r:s,g:u,b:l,a:A},radius:1,life:50*Math.random(),pos:new r.Vector(t,n),vel:new r.Vector(15*(Math.random()-.5),15*(Math.random()-.5))},(0,i.setImovableDefaults)(null)),{armor:null})).vel.setLength(.1*Math.random()),c.push(v);if(e>10)for(var p=0;p<4;p++)for(var f=[10*Math.random()-5,10*Math.random()-5,10*Math.random()-5,10*Math.random()-5],h=0;h<f.length;h+=2)for(d=0;d<80;d++){var v;(v=o(o({type:20,collType:26,guid:(0,a.getGuid)(),color:{r:s,g:u,b:l,a:A},radius:1,life:130*Math.random(),pos:new r.Vector(t,n),vel:new r.Vector(f[h]+.1*Math.random(),-f[h+1]+.1*Math.random())},(0,i.setImovableDefaults)(null)),{armor:null})).vel.setLength(.1*d),c.push(v)}}}}.apply(t,a),void 0===n||(e.exports=n)},2965:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(6095),r(5461),r(9191),r(1768),r(7344),r(9511),r(2273),r(2509),r(2423),r(9752),r(5934),r(8181),r(5941),r(3275),r(6325),r(8920),r(4022),r(9867),r(9014),r(337),r(7496),r(8380),r(2485),r(2093),r(3684),r(1708),r(5371),r(4359),r(6265),r(7728),r(6030),r(9801),r(6595),r(4541),r(4541)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f,h,v,g,y,m,_,x,S,T,E,M,b,I,L,P,w,R,O,C,D,G,N,B){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProceduralEngineType=t.setDevProjectEngine=void 0,r=o(r),a=o(a),n=o(n),i=o(i),s=o(s),u=o(u),l=o(l),A=o(A),c=o(c),p=o(p),f=o(f),h=o(h),v=o(v),g=o(g),y=o(y),m=o(m),_=o(_),x=o(x),S=o(S),T=o(T),E=o(E),M=o(M),I=o(I),L=o(L),P=o(P),w=o(w),R=o(R),O=o(O),C=o(C),D=o(D),G=o(G);var F=!1;t.setDevProjectEngine=function(){F=!0};var V=[P.default,p.default,A.default,C.default,O.default,R.default,a.default,h.default,L.default,f.default,S.default,T.default,E.default,r.default,M.default,i.default,n.default,D.default,g.default,v.default,m.default,s.default,u.default,l.default,G.default,x.default,_.default,w.default,y.default,c.default,I.default];t.getProceduralEngineType=function(){return 1};var k={update:function(e){var t=e.game;if(!F&&!t.skillTree.active){e.frameCnt%5==0&&(0,b.staleWhileRevalidateApiCache)();var r=e.game.performance.engine=[];return t.performance.totalEngine=(0,d.MeasureTimeFn)((function(){t.performance.asteroids=t.asteroids.length,(0,B.runUpdatersTimed)(V,e,r,"engine"),t.performance.particles=0,t.clock+=e.stepMS,window.trees=(0,b.getQuadTreesObj)()})),"engine"}},resize:function(e){return(0,N.resizeUpdaters)(V,e)},reset:function(e){return(0,N.resetUpdaters)(V,e)},init:function(e){return(0,N.initUpdaters)(V,e)}};t.default=k}.apply(t,a),void 0===n||(e.exports=n)},9191:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(5182),r(9262),r(4271),r(3431),r(3605),r(2068),r(6812),r(6265),r(4831)],n=function(e,t,r,a,n,i,s,u,l,A,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeAsteroid=void 0,c=o(c),t.removeAsteroid=function(e,t){e.remove=!0;var r=0,o=0;if(e.radius>300?(r=750,o=4):e.radius>200?(r=510,o=2):e.radius>150||e.radius>100||e.radius>50?(r=250,o=2):(r=90,o=1),(0,c.default)(e,t,0),(0,A.addForceExplosion)(t.game,e.pos.x,e.pos.y,r,o,null),e.radius>40&&t.game.settings_asteroid_spawns_new&&(!t.IS_MULTIPLAYER||t.IS_SERVER)&&11!==e.type)for(var i=0;i<5;i++){var u=new a.Vector(5*Math.random(),5*Math.random());u.setLength(2*Math.random()+.1);var d=(0,n.getRandBonusType)();if((!t.IS_MULTIPLAYER||t.IS_SERVER)&&e.radius>30&&Math.random()>.96)for(var p=1+Math.random()*e.radius*.033,f=0;f<p;f++){var h=32*Math.random()+8,v=(0,s.createParasite)(e.pos.x+(Math.random()-.5)*e.radius,e.pos.y+(Math.random()-.5)*e.radius,h,t.WW*Math.random(),t.WH*Math.random());t.game.parasites.push(v)}var g=4!==d?30:.2*e.radius,y=e.pos.x+(Math.random()-.5)*e.radius,m=e.pos.y+(Math.random()-.5)*e.radius,_=(0,l.createSingleAsteroid)(g,{x:y,y:m},u,{type:4,subType:d,angleVel:.01*(1-2*Math.random())});t.game.asteroids.push(_)}};var d={update:function(e){for(var t=e.game,a=e.WW,n=e.WH,o=e.step,s=t.asteroids,l=s.length,A=0;A<l;A++){var c=s[A];if((0,u.PositionUpdaterAutoSleep)(c,o),0!==c.vel.x||0!==c.vel.y){var d=c.vel.getLength();d<.01?c.vel.set(0,0):d>.2?c.vel.mult(.9999):c.angleVel*=.999}(0,r.shift)(c,a,n),(0,i.wormhole)(c,e)}return"Asteroid"}};t.default=d}.apply(t,a),void 0===n||(e.exports=n)},5941:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2068),r(2610),r(5182)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r),a=o(a);var i={update:function(e){for(var t=e.game,o=e.step,i=e.WW,s=e.WH,u=e.stepMS,l=t.charges,A=l.length,c=0;c<A;c++){var d=l[c];d.timer-=u,d.timer<3?d.remove=!0:(d.vel.mult(.98),d.vel.limit(4),(0,r.default)(d,o),(0,n.shift)(d,i,s),(0,a.default)(t,d,!1))}return"Charges"}};t.default=i}.apply(t,a),void 0===n||(e.exports=n)},2423:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3431),r(6812),r(7899),r(2093)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a);var s=0,u=function(e,t){for(var r=e.length,a=0,n=0;n<r;n++){var o=e[n];o.ownedByStructureGuid===t&&(o.remove=!0,o.ownedByStructureGuid=null,o.ownedByStructureType=null,a++)}return a},l={update:function(e){var t=e.game;if(e.step,e.SW,e.SH,e.SX,e.SY,e.WW,e.WH,++s>200){s=0;for(var o=0;o<t.anomlies.length;o++)if(12===(v=t.anomlies[o]).type){var l=(0,i.getQuadTreesObj)().queryTreesVec([4],v.pos,400,400);l.length>20&&(0,r.wormhole)(l[0],e,!0);break}}if(t.asteroids.length>n.MAX_NUM_ASTEROIDS)for(o=0;o<t.asteroids.length;o++){(c=t.asteroids[o]).remove=!0;break}else if(t.asteroids.length<100&&e.IS_MULTIPLAYER){var A=(0,a.default)(e,50,60,120);for(o=0;o<A.length;o++){var c=A[o];(0,r.wormhole)(c,e,!0),t.asteroids.push(c)}}if(t.IS_PROCEDURAL){var d=t.procedural.boundsSS,p=t.spaceFog;for(o=0;o<p.length;o++){var f=p[o];if(!d.intersectsPoint({x:f.x,y:f.y})){t.spaceFog.splice(o,1);break}}var h=t.anomlies;for(o=0;o<h.length;o++){var v=h[o];if(!d.intersectsPoint(v.pos)){t.anomlies.splice(o,1);break}}if(t.procedural.map.MOVED_XY_ABS_DIST_CELLS<10){var g=t.anomalyPairs;for(o=0;o<g.length;o++){var y=g[o];if(!d.intersectsPoint(y.in.pos)&&!d.intersectsPoint(y.out.pos)){t.anomalyPairs.splice(o,1);break}}}var m=t.asteroidBelts;for(o=0;o<m.length;o++){var _=m[o];if(!d.intersectsPoint({x:_.x,y:_.y})){t.asteroidBelts.splice(o,1);break}}var x=e.game.ancients;for(o=0;o<x.length;o++){var S=x[o];if(!d.intersectsPoint(S.pos)){e.game.ancients=[],e.game.ancientBlocks=[];for(var T=S.rooms,E=T.length,M=0;M<E;M++)switch(T[M].inhabitantType){case 8:for(var b=t.spaceSnake.length,I=0;I<b;I++){var L=t.spaceSnake[o];u(L.segments,S.guid)}break;case 9:u(e.game.spaceSquids,S.guid);break;case 10:u(e.game.spaceSpiders,S.guid)}}}}return"cleanup"}};t.default=l}.apply(t,a),void 0===n||(e.exports=n)},2485:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},A=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2610),r(9262),r(2261),r(7185),r(5345),r(2093),r(7185),r(3431),r(3239),r(2068),r(6632),r(9217),r(2826)],n=function(e,t,r,a,n,o,i,s,c,d,p,f,h,v,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFragmentsFromDestroyer=void 0,r=A(r),p=u(p);var y=[.2,.6],m=[],_=[7,6,0],x=l(l([],_,!0),[3],!1);t.createFragmentsFromDestroyer=function(e,t){var r=t.comp[0].vertex,a=0===t.type?6:50===t.type?2:3;(0,v.createFragmentsFromTriangle)(e,r,a,t)};var S={update:function(e){for(var t=e.game,u=e.step,A=(e.SX,e.SY,t.destroyers),v=l(l(l([],t.spaceSquids,!0),t.spaceSpiders,!0),t.enemies,!0),S=v.length>0?v[0]:null,T=S,E=0;E<A.length;E++){var M=A[E],b=(0,s.getQuadTreesObj)().query([3],M);if(1===b.length)if((0,c.distanceBetweenVectors)(b[0].pos,M.pos)<.85*M.radius+b[0].radius+(void 0===M.repairingCloseAngle?0:500))if(M.repairing){if(void 0===M.repairingCloseAngle)M.repairingCloseAngle=(0,n.wrapRadianAngle)(M.angle+.75*Math.PI);else if(M.life>200){var I=(0,c.angleDifference)(M.angle,M.repairingCloseAngle);Math.abs(I)>.1&&(M.angle+=.007*(I>0?-1:1),M.angle=(0,n.wrapRadianAngle)(M.angle))}M.thrust.mult(.9999)}else{M.repairingCloseAngle=void 0;var L=M.thrust.getLength();0===L&&M.thrust.setLength(.05),L<.5&&M.thrust.mult(1.01)}else M.thrust.setLength(.2);else M.thrust.setLength(.5);if(S=(0,s.getQuadTreesObj)().queryTreesVec([9,10,1,36],M.pos,1200,1200,!0)[0]||S,M.life<600||M.repairing){var P=(0,s.getQuadTreesObj)().queryTreesVec([3],M.pos,3500,3500,!0),w=[];P.length>1&&(w=(0,s.getQuadTreesObj)().queryTreesVec([3],M.pos,800,800,!0));var R=w[0]||P[0]||t.spacePorts[0];R&&(M.repairing=!0,M.life>.9*M.oLife&&(M.repairing=!1)),T=R||S}var O=0,C=1e4,D=M.thrust.getLength(),G=l([],t.rockFormationSystemRadius,!0);3!==(null==S?void 0:S.type)&&G.push.apply(G,t.spacePorts);var N=(0,p.getGenericAvoidance)(M,e,3===(null==S?void 0:S.type)?_:x,[]),B=(0,p.default)(M,M.angle,N);if(M.vel.add(B.avoidance),T){var F=Math.atan2(T.pos.y-M.pos.y,T.pos.x-M.pos.x);if(m.push(.001*(0,n.angleDelta)(M.angle,F)*u),m.length>200){m.shift();for(var V=0,k=0;k<200;k++)V+=m[k];O=.015*V}C=(0,c.distanceBetweenVectors)(T.pos,M.pos),3===(null==T?void 0:T.type)&&C<4500?M.thrust.getLength()>.01&&M.thrust.mult(Math.max(C/4500,.01)):D<1&&(M.thrust.setLength(1.01*D),D<.01&&M.thrust.setLength(.01))}M.thrust.setAngle(M.angle),M.radarAngle+=O,M.radarAngle+=.04*u,M.radarAngle=(0,n.normalizeRadianAngle)(M.radarAngle),M.angle+=O+100*M.angleVel,M.angle=(0,n.wrapRadianAngle)(M.angle);for(var X=0,H=0;H<2;H++)for(var U=0;U<3;U++){var Y=(0,o.midpoint)(M.pos,M.comp[0].vertex[U],y[H]),W=M.cannons[X];W.pos.setFromVec(Y),new a.Vector(100,0).setAngle(W.min),new a.Vector(100,0).setAngle(W.max);var j=S?S.pos:{x:5e3,y:5e3},q=S?Math.atan2(j.y-W.pos.y,j.x-W.pos.x):M.angle,z=M.angle+0,K=(0,n.angleDelta)(W.angle,q),Z=W.baseAngle+z+q;Z>W.max&&Z<W.min||Z<W.max&&W.min;var Q=!1;if(K+W.baseAngle+z>W.baseMax+z?(Q=!0,W.baseAngle-=.05):K+W.baseAngle+z<W.baseMin+z&&(Q=!0,W.baseAngle+=.05),Q||(W.baseAngle+=.12*(0,n.angleDelta)(W.angle,q)*u-O),W.baseAngle+z>W.baseMax+z?W.baseAngle=W.baseMax-.001:W.baseAngle+z<W.baseMin+z&&(W.baseAngle=W.baseMin+.001),W.angle=W.baseAngle+M.angle,W.min=W.baseMin+M.angle,W.max=W.baseMax+M.angle,S&&!W.fired&&3!==(null==S?void 0:S.type)){if(!Q&&(0,o.distanceBetweenXYXY)(M.pos.x,M.pos.y,j.x,j.y)<1500){var J=(0,g.createBullet)(29,M);J.pos.x=W.pos.x,J.pos.y=W.pos.y,J.vel.setLength(h.DESTROYER_BULLET_VEL_LEN),J.vel.setAngle(W.angle),J.life=400,(0,i.createDust)(W.pos,3,2,e,.1*J.vel.x,.1*J.vel.y),e.game.bullets.push(J),W.fired=!0}}else Math.random()>.8&&(W.fired=!1);X++}M.vel.add(M.thrust),(0,r.default)(t,M,!0),(0,d.wormhole)(M,e),M.vel.getLength()>4&&M.vel.setLength(4),(0,f.ShipPositionUpdater)(M,u),3===(null==T?void 0:T.type)?(M.vel.x*=.9,M.vel.y*=.9):(M.vel.x*=.97,M.vel.y*=.97)}return"Destroyer"}};t.default=S}.apply(t,a),void 0===n||(e.exports=n)},1768:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(5182),r(7185),r(2610),r(2068),r(3431),r(3239),r(2261),r(8854),r(3239),r(2093),r(2826),r(5475),r(1708),r(8787),r(484)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f,h,v,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n),i=o(i),u=o(u);var y=.1,m=(0,g.rect_pool_pop)(0,0,0,0),_={update:function(e){var t=e.game,o=(e.SX,e.SY,e.SW,e.SH,e.WW),g=e.WH,_=e.step,x=t.enemies,S=x.length,T=(0,d.getQuadTreesObj)();if(T.All){for(var E=0;E<S;E++){var M=x[E];(y+=.002)>.1&&(y=.1),M.thrust.setLength(y),M.thrust.setAngle(M.angle),M.vel.add(M.thrust),M.vel.mult(.99),M.vel.getLength()>M.maxVel&&M.vel.setLength(M.maxVel);var b=(0,u.default)(M,M.angle,(0,c.getGenericAvoidance)(M,e,[23,3],[]));if(M.vel.add(b.avoidance),M.avoidance=b,M.angle=(0,l.normalizeRadianAngle)(M.angle),(0,i.default)(M,_),(0,n.default)(t,M,!0),(0,s.wormhole)(M,e),t.daylight.is_night){m.x=M.pos.x-1200,m.y=M.pos.y-1200,m.width=2400,m.height=2400;var I=T.queryTreesRect([10,9,36],m);if(I.length>0){var L=I[0],P=Math.atan2(L.pos.y-M.pos.y,L.pos.x-M.pos.x)+Math.PI;M.turnAcc=.1*(0,l.angleDelta)(M.angle,P),M.angle+=M.turnAcc*_;continue}}var w=T.queryTreesVec(M.guid%2==0?[45,50,2,44,9,10,8,0]:[0,50,2,44,45,9,10,8],M.pos,450,450,!0);M.bulletsFired>0&&(M.bulletsFired-=.05*_);for(var R=null,O=null,C=0;C<w.length;C++){var D=w[C];if(!(45===D.type&&D.abilities.active.cloak>0)){O=D,R=D.pos;break}if((0,a.distanceBetweenVectors)(D.pos,M.pos)<180){O=D,R=D.pos;break}}if(R){var G=(0,f.getUpgradeLevel)(M),N=G>2,B=(0,a.distanceBetweenVectors)(R,M.pos);if(N&&B<400||!N&&B<t.resW){var F=.05;if(B<100&&(y=.01,F=.15),P=Math.atan2(R.y-M.pos.y,R.x-M.pos.x),M.turnAcc=(0,l.angleDelta)(M.angle,P)*F,M.angle+=M.turnAcc*_,M.bulletsFired<M.maxBullets+5*G){if(N){var V=(0,h.createFlame)(M,v.weaponDatas.flameThrower);t.flames.push(V),M.bulletsFired++}else{var k=(0,p.createBullet)(49,M);(0,r.shift)(k,o,g),t.bullets.push(k),M.bulletsFired++}(O.inSafeZone?Math.random()>.95:Math.random()>.986-.02*(0,f.getUpgradeLevel)(M))&&(Math.random()>.66?t.rockets.push((0,A.createRocket)(M,M.weapons.hash[31],O)):(0,A.createRocket)(M,M.weapons.hash[33],O))}}}}return"enemies"}}};t.default=_}.apply(t,a),void 0===n||(e.exports=n)},1500:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findEnemyShipWithGuid=t.findDroneWithGuid=t.findShipLikeWithGuid=t.findPlayerWithGuid=void 0,t.default=function(e,t){for(var r=e.game.player,a=r.length,n=0;n<a;n++){var o=r[n];if(t.ownerGuid===o.guid)return o}return null},t.findPlayerWithGuid=function(e,t){for(var r=e.game.player,a=r.length,n=0;n<a;n++){var o=r[n];if(t===o.guid)return o}return null},t.findShipLikeWithGuid=function(e,t,r){var a;switch(r){case 1:a=e.game.enemies;break;case 50:a=e.game.drones;break;case 45:a=e.game.player;break;case 2:a=e.game.npcs;break;default:return null}for(var n=a.length,o=0;o<n;o++){var i=a[o];if(t===i.guid)return i}return null},t.findDroneWithGuid=function(e,t){for(var r=e.game.drones,a=r.length,n=0;n<a;n++){var o=r[n];if(t===o.guid)return o}return null},t.findEnemyShipWithGuid=function(e,t){for(var r=e.game.enemies,a=r.length,n=0;n<a;n++){var o=r[n];if(t===o.guid)return o}return null}}.apply(t,[r,t]),void 0===a||(e.exports=a)},1708:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2068),r(5182),r(2610),r(9262),r(5714),r(7185),r(6270),r(8787)],n=function(e,t,r,a,n,s,u,l,A,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFlameoutFlame=t.createFlame=t.createRamp=t.rampSize=void 0,r=i(r),n=i(n),t.rampSize=[],t.createRamp=function(e,t,r,a,n){for(var o=Math.abs(r-a),i=a>r,s=Math.min(r,a),u=1/t,l=0;l<t;l++){var A=s+o*u*l+(Math.random()-.5)*n;i||(A=1-A),A=Math.min(Math.max(r,a),A),A=Math.max(Math.min(r,a),A),e.push(A)}},(0,t.createRamp)(t.rampSize,25,.05,.1,.01),(0,t.createRamp)(t.rampSize,25,.1,.3,.04),(0,t.createRamp)(t.rampSize,25,.3,1,.08),(0,t.createRamp)(t.rampSize,25,1,0,.02),t.createFlame=function(e,t,r,a){void 0===r&&(r=0),void 0===a&&(a={});var n=new s.Vector(0,0);n.setLength(e.vel.getLength()+24+4*Math.random()),n.setAngle(e.angle+r+(Math.random()-.5)*Math.PI*.02);var i=(0,l.getGuid)();return o(o(o({},(0,u.setImovableDefaults)(null)),{pos:new s.Vector(e.pos.x+Math.cos(e.angle+r)*e.radius,e.pos.y+Math.sin(e.angle+r)*e.radius),mass:1,inv_m:.0010187862353965493,vel:n,guid:i,ownerGuid:e.guid,ownerType:e.type,colorRamp:0,radius:10,life:100,large:i%10==0,type:27,collType:22,friction:.95,collided:!1,armor:null,damage:t.damage}),a)},t.createFlameoutFlame=function(e,t,r,a,n,i,A){var d=new s.Vector(0,0);d.setLength(n.getLength()+2+3*Math.random()),d.setAngle(a+(Math.random()-.5)*Math.PI*.02);var p=new s.Vector(t,r),f=(0,l.getGuid)();return o(o({},(0,u.setImovableDefaults)(null)),{pos:p,vel:d,guid:f,mass:1,inv_m:.0010187862353965493,ownerGuid:i,ownerType:A,colorRamp:0,radius:10,life:100,large:f%10==0,type:27,collType:22,friction:.95,collided:!1,armor:null,damage:c.flameoutDamageData})};var d={update:function(e){for(var t=e.game,o=e.WW,i=e.WH,s=e.step,u=t.flames.length,l=0;l<u;l++){var c=t.flames[l],d=s+2*Math.random();c.colorRamp+=s+2*Math.random(),(0,A.DamgeItemFixedValue)(c,d+s),c.colorRamp>=99?c.remove=!0:(c.vel.mult(c.friction),(0,n.default)(t,c,!1),(0,r.default)(c,s),(0,a.shift)(c,o,i))}return"flames"}};t.default=d}.apply(t,a),void 0===n||(e.exports=n)},8920:(e,t,r)=>{var a,n;a=[r,t,r(9262),r(5182),r(2093),r(6270)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=new r.Vector(0,0),s={update:function(e){var t=e.game,r=(e.WW,e.WH,e.step),s=(0,n.getQuadTreesObj)();if(s.All){for(var u=t.spaceFog,l=u.length,A=0;A<l;A++){var c=u[A];if((0,a.onStageXY)(e,c.x,c.y,c.radius)&&(i.set(c.x,c.y),c.fire))for(var d=s.queryTreesVec([45,50,1,36,9,2],i,c.radius,c.radius),p=0;p<d.length;p++){var f=d[p];45===f.type&&Math.random()>.9&&(f.damageTaken=!0),(0,o.DamgeItemFixedValue)(f,.3*r)}}return"fog"}}};t.default=s}.apply(t,a),void 0===n||(e.exports=n)},6265:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};a=[r,t,r(9262),r(2093),r(2881),r(484),r(7899),r(4077),r(7899),r(7185),r(6270)],n=function(e,t,r,a,n,i,s,u,l,A,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugForce2=t.addForce=t.addForceExplosion=t.FastForce2Cached=t.FastForce2CachedReversed=t.getForce2Tree=void 0;var d=new n.QuadTreeInt32Base((0,i.rect_pool_pop)(0,0,0,0),5,-200,2);t.getForce2Tree=function(){return d},window.force2Tree=d;var p={update:function(e){var t=e.game,r=e.WW,a=e.WH,n=e.step,u=e.stepMS,l=t.IS_PROCEDURAL?t.proceduralBounds:new i.Rectangle(0,0,r,a);d.reset(),d.setup(l,5,-200,2);for(var A=t.force2,c=A.length,p=0;p<c;p++){var f=A[p];if(1===f.type&&(f.life-=n,f.positive&&(f.radius+=.13*f.originalRadius*n,f.radius>f.originalRadius&&(f.radius=f.originalRadius),f.sizeRoundedToOddRes=T(f.radius),f.intensity*=.9)),f.changing){var h=f.changing;if(f.positive)h.currentPositiveMS<h.positiveMS?h.currentPositiveMS+=u:(h.currentPositiveMS=0,f.positive=!1,f.intensity=f.oIntensity);else if(h.currentNegativeMS<h.negativeMS)if(h.currentNegativeMS+=u,h.currentNegativeMS<.3*h.negativeMS){var g=s.explosionsSizeList[s.explosionsSizeList.length-1],y=T(g);f.sizeRoundedToOddRes=y,f.radius=g}else f.radius=f.originalRadius,f.sizeRoundedToOddRes=T(f.radius);else h.currentNegativeMS=0,f.positive=!0,f.intensity=1}f.life>0&&d.insert(f)}return t.force2=o([],d.references,!0),v(e,t.force2),"Force2"}};t.default=p;var f=[4,25,0,1,27,42,31,33,26,27,43,10,44,50,2,45,9],h=o(o([],f,!0),[11,23],!1),v=function(e,t){for(var r=t.length,n=0;n<r;n++){var o=t[n];if(o.radius>30&&o.intensity>0&&(_((0,a.getQuadTreesObj)().queryTreesVec(f,o.pos,.5*o.sizeRoundedToOddRes,.5*o.sizeRoundedToOddRes),o),o.damage)){for(var i=(0,a.getQuadTreesObj)().queryTreesVec(h,o.pos,o.originalRadius,o.originalRadius),s=0;s<i.length;s++)m(e,i[s],o);o.damage=null}}},g=new r.Vector(0,0),y=new r.Vector(0,0),m=function(e,t,r){if(!t.remove&&t.life>0){var a=r.originalRadius,n=(0,A.distanceBetweenVectors)(t.pos,r.pos)-t.radius,o=(a-n)/a,i=n<.8*r.originalRadius?Math.min(o,.98):.02;(0,c.DamageByForce)(e,t,r.damage,i)}},_=function(e,t){for(var r=E(t),a=r.field,n=t.intensity,o=t.pos.x-.5*r.size,i=t.pos.y-.5*r.size,l=e.length,c=0;c<l;c++){var d=e[c],p=d.pos.x,f=d.pos.y;if(4===d.type&&d.radius>20&&(0,A.distanceBetweenVectors)(d.pos,t.pos)>.9*t.radius){var h=(0,A.midpointAXAYBXBY)(d.pos.x,d.pos.y,t.pos.x,t.pos.y,.9);p=h[0],f=h[1]}var v=(p-o)*s.FORCEFIELD_RESOLUTION_REVERSED_F2|0,g=a[(f-i)*s.FORCEFIELD_RESOLUTION_REVERSED_F2|0];if(g){var y=g[2*v],m=g[2*v+1];if(y&&m){var _=n*d.inv_m*1e4*(d.radius*d.radius)*.1,x=y*_,S=m*_;if(isNaN(x)||isNaN(S)){(0,u.LOG_GL_FIXED_FORCED)("NaN error","Force2");continue}d.vel.x+=x,d.vel.y+=S,d.forceX=x,d.forceY=S}}}};t.FastForce2CachedReversed=function(e,r,a){void 0===a&&(a=1);for(var n=d.queryInt(r),o=n.length,i=0;i<o;i++){var s=n[i],u=e.queryVec(s.pos,s.radius,s.radius);(0,t.FastForce2Cached)(u,s,a)}},t.FastForce2Cached=function(e,t,r){void 0===r&&(r=1);for(var a=E(t),n=a.field,o=t.intensity*r,i=t.pos.x-.5*a.size,u=t.pos.y-.5*a.size,l=e.length,A=0;A<l;A++){var c=e[A],d=(c.pos.x-i)*s.FORCEFIELD_RESOLUTION_REVERSED_F2|0,p=n[(c.pos.y-u)*s.FORCEFIELD_RESOLUTION_REVERSED_F2|0];if(p){var f=p[2*d],h=p[2*d+1];c.vel.x+=f*o*40,c.vel.y+=h*o*40}}},t.addForceExplosion=function(e,r,a,n,o,i,s,u,l){void 0===s&&(s=!0),void 0===u&&(u=!1),void 0===l&&(l=1),(0,t.addForce)(e,r,a,n,o,i,s,u,l)},t.addForce=function(e,t,a,n,o,i,s,l,A,c,d){void 0===s&&(s=!0),void 0===l&&(l=!1),void 0===A&&(A=1),void 0===c&&(c=0),void 0===d&&(d=0),n<3&&(0,u.LOG_GL_FIXED_FORCED)("err radius to small","Force 2"),n>1010&&(0,u.LOG_GL_FIXED_FORCED)("err radius to large","Force 2");var p=n,f=s&&1===A?30:p,h=x(n),v={pos:new r.Vector(t,a),radius:f,sizeRoundedToOddRes:T(f),originalRadius:p,damage:i,intensity:o,oIntensity:o,life:h,olife:h,positive:s,rotating:l,type:A};c>0&&d>0&&(v.changing={negativeMS:d,positiveMS:c,currentNegativeMS:0,currentPositiveMS:0}),e.force2.push(v)};var x=function(e){switch(e){case 30:return 12;case 70:return 18;case 90:return 20;case 250:return 22;case 510:return 24;case 750:return 26;case 1010:return 28;default:return 10}},S={};s.IS_NODE||(window.forceCache=S);var T=function(e){var t=Math.round(Math.round((e+e)*s.FORCEFIELD_RESOLUTION_REVERSED_F2)),r=t%2==0;return t*=l.FORCEFIELD_RESOLUTION_F2,r&&(t+=l.FORCEFIELD_RESOLUTION_F2),t},E=function(e,t){void 0===t&&(t=!0);var r=[e.sizeRoundedToOddRes,e.positive,e.rotating].join("_"),a=S[r];if(a&&a.size>=e.sizeRoundedToOddRes)return S[r];var n=performance.now(),o=b(e),i={size:e.sizeRoundedToOddRes,field:o.field,fx:o.fx,fy:o.fy};S[r]=i;var s=performance.now()-n;return t&&console.log("-cache miss F2- r:"+e.sizeRoundedToOddRes+" "+Math.round(s)+" ms"),i},M=new r.Vector(0,0),b=function(e){for(var t=e.sizeRoundedToOddRes,r=.5*t,a=Math.floor(.5*t*s.FORCEFIELD_RESOLUTION_REVERSED_F2),n=Math.floor(.5*t*s.FORCEFIELD_RESOLUTION_REVERSED_F2),o=[],i=r*s.FORCEFIELD_RESOLUTION_REVERSED_F2*r*s.FORCEFIELD_RESOLUTION_REVERSED_F2,u=Math.ceil(t*s.FORCEFIELD_RESOLUTION_REVERSED_F2),l=0;l<u;l++){for(var A=[],c=0;c<u;c++){var d=(c-a)*(c-a)+(l-n)*(l-n);if(i>d){M.x=0,M.y=0;var p=Math.abs(d-i)/i*.003,f=Math.atan2(n-l,a-c);g.x=p,g.y=0,e.positive?g.setAngle(f+Math.PI):(g.setAngle(f),e.rotating&&(g.mult(.2),y.x=.05*p,y.y=0,y.setAngle(f+.7*Math.PI),M.add(y))),M.add(g),A.push(M.x,M.y)}else A.push(0,0)}o.push(A)}return{field:o,fx:a,fy:n}};!function(){for(var e=performance.now(),t=3;t<100;t++){var a=10*t,n=T(a),o={intensity:1,oIntensity:1,life:1,olife:1,originalRadius:a,pos:new r.Vector(0,0),positive:!0,radius:a,sizeRoundedToOddRes:n,rotating:!1,type:1,damage:null};E(o,!1)}var i=[510,750,1010];[!0,!1].map((function(e){i.map((function(t){var a=t,n=T(a),o={intensity:1,oIntensity:1,life:1,olife:1,originalRadius:a,pos:new r.Vector(0,0),positive:!0,radius:a,sizeRoundedToOddRes:n,rotating:e,type:0,damage:null};E(o,!1)}))}));var s=performance.now()-e;console.log("force cache warmup took "+Math.round(s)+" ms")}(),t.debugForce2={getOrCreateCachedForceField:E,createForceField:b}}.apply(t,a),void 0===n||(e.exports=n)},3431:function(e,t,r){var a,n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wormhole=t.getAllAnomalies=void 0,t.getAllAnomalies=function(e){for(var t=n([],e.anomlies,!0),r=e.anomalyPairs.length,a=0;a<r;a++)t.push(e.anomalyPairs[a].in),t.push(e.anomalyPairs[a].out);return t},t.wormhole=function(e,t,r){void 0===r&&(r=!1),t.WW,t.WH;var a=t.game;if(a.IS_PROCEDURAL)return function(e,t,r){void 0===r&&(r=!1),t.WW,t.WH;for(var a=t.game,n=a.anomlies.length,o=0;o<n;o++){var i=a.anomlies[o];if(i.out){var s=i.pos.x,u=i.pos.y,l=i.out.x,A=i.out.y,c=s,d=u,p=200;if(r||e.pos.x<c+p&&e.pos.x>c-p&&e.pos.y<d+p&&e.pos.y>d-p)return e.vel.setAngle(Math.random()-.5),e.pos.x=l+(Math.random()-.5)*p,e.pos.y=A+(Math.random()-.5)*p,!0}}}(e,t,r);for(var n=a.anomalyPairs.length,o=0;o<n;o++){var i=a.anomalyPairs[o],s=i.in.pos.x,u=i.in.pos.y,l=i.out.pos.x,A=i.out.pos.y,c=s,d=u,p=200;if(r||e.pos.x<c+p&&e.pos.x>c-p&&e.pos.y<d+p&&e.pos.y>d-p)return e.vel.setAngle(Math.random()-.5),e.pos.x=l+(Math.random()-.5)*p,e.pos.y=A+(Math.random()-.5)*p,!0}return!1}}.apply(t,[r,t]),void 0===a||(e.exports=a)},6595:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(737),r(4359),r(7899)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r);var i={update:function(e){var t=e.game.daylight.fog,o=(0,r.default)(e);return o&&(0,a.posInAncient)(o.pos)?(e.game.daylight.fog=0,e.game.daylight.time=n.DAYLIGHT_NIGHT_TIME,"heavyfog"):(e.game.daylight.is_day||e.game.daylight.is_dawn?t+=.003:t-=.003,t>1?t=1:t<0&&(t=0),e.game.daylight.fog=t,"heavyfog")}};t.default=i}.apply(t,a),void 0===n||(e.exports=n)},9801:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(9262),r(7496),r(5714),r(7185),r(4077)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMineField=void 0;var u=0,l=new r.Vector(0,0),A=new r.Vector(0,0),c=180,d=1/c,p=22.5,f=function(e,t){return Math.floor(e*d)+"_"+Math.floor(t*d)},h=function(e){var t=Math.floor(e*d)*c;return t+p>e?t+p:e>t+c-p?t+c-p:e};t.createMineField=function(e,t,s,u,c,d,p){var v,g={},y=[],m=t+.5*u,_=s+.5*c,x=.5*Math.min(u,c);l.setLength(.5*u),l.setAngle(p);for(var S=15e-5,T=Math.round(x*x*Math.PI*S),E=0;E<T;E++){A.setLength(50+(x-50)*d()),A.setAngle(2*Math.PI*d());var M=h(m+A.x),b=h(_+A.y);g[D=f(M,b)]||(y.push((0,a.createSpaceMineWoShip)(M,b)),g[D]=!0)}for(var I=-1;I<2;I+=2)for(var L=.7*x,P=L,w=0;w<3;w++){P+=1.2*L,l.setLength(P);var R=m+l.x*I,O=_+l.y*I,C=Math.round(L*L*Math.PI*S);for(E=0;E<C;E++){var D;A.setLength(50+(L-50)*d()),A.setAngle(2*Math.PI*d()),M=h(R+A.x),b=h(O+A.y),g[D=f(M,b)]||(y.push((0,a.createSpaceMineWoShip)(M,b)),g[D]=!0)}L*=.7}var G=.5*Math.max(u,c);e.game.minefields.push(o(o({mines:y,radius:G,type:17},(0,n.setImovableDefaults)(null)),{pos:new r.Vector(t+G,s+G),vel:new r.Vector(0,0),collType:25,sleepingAABB:!0,life:9999999,angle:0,opos:{x:t,y:s},mass:9999999999,guid:(0,i.getGuid)(),oLife:9999999,acc:new r.Vector(0,0),armor:{type:6,value:1}})),(v=e.game.spaceMines).push.apply(v,y)};var v={update:function(e){var t=e.game.minefields;if(t.length>0){var r=t[u];if(r){for(var a=r.mines,n=a.length,o=[],i=0;i<n;i++){var l=a[i];l.remove||o.push(l)}r.mines=o,o.length<5&&(t.splice(u,1),(0,s.LOG_GL)("minefield removed"))}}return++u>t.length-1&&(u=0),"minefields"}};t.default=v}.apply(t,a),void 0===n||(e.exports=n)},9511:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7185),r(2068),r(5182),r(3182),r(5047),r(7569),r(7569),r(484),r(3239),r(3239),r(2093),r(1401),r(2800),r(7561)],n=function(e,t,r,a,n,u,l,A,c,d,p,f,h,v,g,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ASTAR_GRID_RES=void 0,a=s(a),u=s(u),A=s(A),p=s(p),v=s(v);var m=[2,45],_=i(i([],m,!0),[23],!1),x=function(e,t,r){return r?Math.min(e.gridX,t.gridX):Math.min(e.gridY,t.gridY)},S=function(e,t,r){return r?Math.max(e.gridX,t.gridX):Math.max(e.gridY,t.gridY)};t.ASTAR_GRID_RES=4;var T=function(e,r,a,n,i){void 0===i&&(i=2);var s=x(r,a,!0)+-.5*i,u=S(r,a,!0)+.5*i,c=x(r,a,!1)+-.5*i,p=S(r,a,!1)+.5*i,f=((0,l.getSectorSize)(e.WW,e.WH).w,(u-s)*t.ASTAR_GRID_RES),v=(p-c)*t.ASTAR_GRID_RES,g=(0,d.rect_pool_pop)(s/l.RESOLUTION,c/l.RESOLUTION,u/l.RESOLUTION-s/l.RESOLUTION,p/l.RESOLUTION-c/l.RESOLUTION),y=(0,h.getQuadTreesObj)().queryTreesRect([n],g);if((0,d.rect_pool_put)(g),e.game.player[0]){var m=o({},e.game.player[0]);m.radius=2.5*m.radius,y.push(m)}return{allPass:!1,res:(0,A.default)(t.ASTAR_GRID_RES,e,f,v,y,s,c),fromX:s,fromY:c}},E=function(e){for(var t=[],r=e.length,a=0;a<r;a++)t.push({x:e[a].y,y:e[a].x});return t},M=null,b=0,I=0,L=null,P=0,w=6,R=w,O={update:function(e){e.keyCodes;var o,i,s=e.game,A=e.WW,d=e.WH,x=(e.SX,e.SY,e.SW,e.SH,e.step),S=e.stepMS,O=(0,h.getQuadTreesObj)();if(O.All){if(s.menuSettings.debugItems.workerTarget){for(var C=O.queryTreesRect([23],s.screen.rect),D=[],G=[],N=0;N<C.length;N++){var B=C[N];(0,y.line2Poly)(B.pos.x-50,B.pos.y-40,B.pos.x-50+B.life/B.oLife*100,B.pos.y-40,D,4),(0,y.line2Poly)(B.pos.x-50,B.pos.y-30,B.pos.x-50+B.bullets/B.maxBullets*100,B.pos.y-30,G,4)}(0,g.drawExternal)({polys:D,r:.3,b:.3,g:1,autoSXSY:!0}),(0,g.drawExternal)({polys:G,r:.3,b:1,g:.3,autoSXSY:!0})}var F=s.wayPoints;P+=S;var V=s.npcs,k=V.length;for(N=0;N<k;N++){var X=V[N];X.thrust.setLength(.05);var H=V[N-1];if(F[X.currentWayPointIndex],F.length>0)if(0===N){var U=(0,l.getPoistionVecXYinGrid)(X.pos);if(P>200||!L||M&&1===M.length||U.x!==L.x||U.y!==L.y){P=0;var Y={gridX:U.x,gridY:U.y};w=Math.min(F.length-1-X.currentWayPointIndex,w),R>w&&(R=w);var W=F[X.currentWayPointIndex+R];if(W){var j=T(e,Y,W,4,6),q=(0,u.default)();b=j.fromX,I=j.fromY;var z=(0,c.transformPosToGrid)(e,X.pos.x,X.pos.y,j.fromX,j.fromY,t.ASTAR_GRID_RES),K={x:(W.gridX-j.fromX)*t.ASTAR_GRID_RES,y:(W.gridY-j.fromY)*t.ASTAR_GRID_RES},Z=new q.Graph(j.res,{diagonal:!0}),Q=Z.grid[z.y][z.x],J=Z.grid[K.y][K.x];if(M=E(q.astar.search(Z,Q,J,null)),s.debug&&(s.debug.graphMap={graphMap:M,x:b,y:I,grid:j.res,wp:W,wpStart:U}),M&&M.length<R)if(M.length>0){R<w&&R++;for(var $=0;$<k;$++)V[$].currentWayPointIndex++}else R>2?R--:R=w;M.length>0&&(L=U)}}var ee=M[Math.min(M.length-1,3)];if(ee){var te=(0,l.gridPosToWorld)(ee.x/t.ASTAR_GRID_RES+b,ee.y/t.ASTAR_GRID_RES+I);Math.atan2(te.y-X.pos.y,te.x-X.pos.x)}else L&&(te=(0,l.gridPosToWorld)(L.x,L.y,A,d),Math.atan2(te.y-X.pos.y,te.x-X.pos.x))}else{Math.atan2(H.pos.y-X.pos.y,H.pos.x-X.pos.x);var re=(0,r.distanceBetweenVectors)(H.pos,X.pos);!(re<3*X.radius)&&X.radius}X.vel.mult(.98),(0,v.default)(X,e);var ae=[],ne=!1;if(null===(o=null==X?void 0:X.miningRig)||void 0===o?void 0:o.base.guid){var oe=O.queryTreesVec([3],X.pos,500,500)[0];if(oe&&oe.guid===X.miningRig.base.guid&&(ne=!0,X.miningRig.repairTarget)){var ie=X.miningRig.repairTarget.guid;for($=0;$<oe.cannons.length;$++)(B=oe.cannons[$]).guid!==ie&&ae.push(B)}}var se=(0,f.getGenericAvoidance)(X,e,ne?m:_,ae,ne?200:500),ue=(0,p.default)(X,X.angle,se);if(ue.avoidance.mult(.3),X.vel.add(ue.avoidance),X.avoidance=ue,s.menuSettings.debugItems.workerTarget&&(null===(i=X.miningRig)||void 0===i?void 0:i.repairTarget)&&(s.screen.rect.containsIM(X)||s.screen.rect.containsIM(X.miningRig.repairTarget))){var le=[];(0,y.line2Poly)(X.pos.x,X.pos.y,X.miningRig.repairTarget.pos.x,X.miningRig.repairTarget.pos.y,le);var Ae=X.miningRig.minedMinerals>0;(0,g.drawExternal)({polys:le,autoSXSY:!0,r:Ae?0:1,g:Ae?1:0,b:0,a:1});var ce=[],de=[],pe=[];if((0,y.line2Poly)(X.pos.x-30,X.pos.y-30,X.pos.x-30+(.2*X.miningRig.minedMinerals+1),X.pos.y-30,ce),X.miningRig.repairTarget.isCannon&&(0,y.line2Poly)(X.pos.x-30,X.pos.y-35,X.pos.x-30+.2*(X.miningRig.repairTargetTargetBullets-X.miningRig.repairTarget.bullets),X.pos.y-35,de),(0,y.line2Poly)(X.pos.x-30,X.pos.y-40,X.pos.x-30+.2*(X.miningRig.repairTargetTargetLife-X.miningRig.repairTarget.life),X.pos.y-40,pe),(0,g.drawExternal)({polys:ce,autoSXSY:!0,r:1,g:1,b:0}),(0,g.drawExternal)({polys:de,autoSXSY:!0,r:0,g:0,b:1}),(0,g.drawExternal)({polys:pe,autoSXSY:!0,r:0,g:1,b:0}),X.avoidance.data){var fe=[],he=X.avoidance.avoidance.clone(),ve=X.avoidance.data.threat,ge=X.avoidance.data.closest;(0,y.line2Poly)(X.pos.x,X.pos.y,ve.pos.x,ve.pos.y,fe,1),(0,y.line2Poly)(X.pos.x,X.pos.y,ge.x,ge.y,fe,1),he.mult(1e3),he.add(X.pos),(0,y.line2Poly)(X.pos.x,X.pos.y,he.x,he.y,fe,1),he.setLength(150),he.setAngle(X.avoidance.avoidanceAngle),he.add(X.pos),(0,y.line2Poly)(X.pos.x,X.pos.y,he.x,he.y,fe,3),(0,g.drawExternal)({polys:fe,r:1,b:.5,g:.5,autoSXSY:!0})}}(0,a.default)(X,x),(0,n.shift)(X,A,d),X.damageTaken=!1}return"npc"}}};t.default=O}.apply(t,a),void 0===n||(e.exports=n)},3275:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(9262),r(5182),r(2068),r(2889),r(7185),r(7899),r(2093),r(484),r(1477),r(5345),r(6270)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParasiteTree=t.getShipLayoutIDX=void 0,n=o(n),i=o(i);var f=new r.Vector(0,0);t.getShipLayoutIDX=function(){var e=Math.random();return e>.66?[0,1]:e>.33?[1,2]:[0,2]};var h=new c.QuadTreeFastPoint32((0,A.rect_pool_pop)(0,0,0,0),5,39);t.getParasiteTree=function(){return h};var v={update:function(e){var r=e.game,o=e.WW,c=e.WH,v=e.step,y=(0,l.getQuadTreesObj)();if(y.All&&!r.settings_be_the_snake_mode){var m=e.game.parasites,_=m.length;h.reset(),r.IS_PROCEDURAL?h.setup(r.proceduralBounds,5,39):h.setup(new A.Rectangle(0,0,o,c),5,39);for(var x=[],S=0;S<_;S++)(T=m[S]).segments.length>1&&!T.remove&&x.push(T);for(e.game.parasites=m=x,_=x.length,S=0;S<_;S++){var T,E=(T=m[S]).segments[T.segments.length-1];E||(console.log("PARASITE ERROR"),console.log(JSON.stringify(T)),console.log(T));var M=E.pos;if(T.pos.setFromVec(M),h.insert(T),(0,p.DamgeItemFixedValue)(T,v),T.life<100){if(T.target&&T.target.ship.guid===e.game.playerGuid&&(!e.IS_MULTIPLAYER||e.IS_SERVER)){var b={life:u.NOTIFICATION_LIFE,type:73,message:"PARASITE DETACHED FROM SHIP"};r.notifications.unshift(b)}T.target=null}T.life<-500&&T.segments.pop();var I=(0,i.default)(e,T,M,50,600,[1,45,50]);if(T.life>100&&!T.target&&I.targetIsIM&&(0,s.distanceBetweenVectors)(I.targetPos,E.pos)<20){var L=(0,t.getShipLayoutIDX)();(0,p.LifeIncreaseFixedValue)(T,500+500*Math.random()),T.target={ship:I.target,valueBetween:Math.random(),idxA:L[0],idxB:L[1]},I.target.guid!==e.game.playerGuid||e.IS_MULTIPLAYER&&!e.IS_SERVER||(b={life:u.NOTIFICATION_LIFE,type:72,message:"PARASITE ATTACHED TO SHIP"},r.notifications.unshift(b))}if(T.target){var P=T.target.ship;if(P.life<1){T.target=null;continue}P.life>5?(0,p.DamgeItemFixedValue)(P,.05*v):I.targetPos=T.restPos,P.vel.x*=.98,P.vel.y*=.98,P.turnAcc*=.9;var w=P.comp[0].vertex,R=T.target.idxA,O=T.target.idxB,C=(0,s.midpoint)(w[R],w[O],T.target.valueBetween);E.pos.set(C.x,C.y)}else{T.life<100&&(I.targetPos=T.restPos),T.targetShift>100?T.tsValue=-v:T.targetShift<-100&&(T.tsValue=v),T.targetShift+=T.tsValue*v*12;var D=Math.atan2(I.targetPos.y-E.pos.y,I.targetPos.x-E.pos.x);f.set(T.targetShift,0),f.setAngle((T.targetShift>0?.5*Math.PI:-.5*Math.PI)+D);var G=Math.atan2(I.targetPos.y+f.y-E.pos.y,I.targetPos.x+f.x-E.pos.x);E.vel.addXY(.1,.1),E.vel.setAngle(I.targetIsIM?G:D),I.targetIsIM||(f.mult(.05),E.vel.add(f)),T.life<90?E.vel.getLength()>7&&E.vel.setLength(7):E.vel.getLength()>3&&E.vel.setLength(3),E.offsetFront.setAngle(D),E.offsetRear.setAngle(D-Math.PI),(0,n.default)(E,v)}if(y.queryTreesVec([27],T.pos,10,10,!0).length>0){T.remove=!0;for(var N=0;N<T.segments.length;N++){var B=T.segments[N];(0,d.createDust)(B.pos,1,0,e,0,0)}}g(T.segments),(0,a.shift)(E,o,c)}return"parasite"}}};t.default=v;var g=function(e){for(var t=e.length-1;t>0;t--){var r=e[t];a=e[t-1],n=r,o=void 0,i=void 0,s=void 0,u=void 0,o=2*a.radius,i=a.pos.x-n.pos.x,s=a.pos.y-n.pos.y,u=Math.atan2(s,i),a.pos.x=n.pos.x+Math.cos(u)*o,a.pos.y=n.pos.y+Math.sin(u)*o,a.angle=u,a.offsetFront.setAngle(u),a.offsetRear.setAngle(u-Math.PI)}var a,n,o,i,s,u}}.apply(t,a),void 0===n||(e.exports=n)},6095:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2610),r(2068),r(3431),r(2261)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r),a=o(a);var s={update:function(e){var t=e.game,o=e.step,s=(e.SW,e.SH,e.WW,e.WH,0),u=t.customParticles;s=u.length;for(var l=[],A=0;A<s;A++){var c=u[A];c.life-=o,(0,a.default)(c,o),c.vel.mult(.99),c.vel.getLength()>5&&c.vel.setLength(5),c.life>0&&(l.push(c),(0,r.default)(t,c,!1),(0,n.wormhole)(c,e))}t.customParticles=l;var d=t.bullets;for(s=d.length,A=0;A<s;A++){var p=d[A];if(p.life-=o,p.homing){var f=p.target;if(f&&!f.remove&&f.life>0){var h=Math.atan2(f.pos.y-p.pos.y,f.pos.x-p.pos.x),v=p.vel.getAngle();v=(0,i.normalizeRadianAngle)(v),v+=.5*(0,i.angleDelta)(v,h)*o,p.vel.setAngle(v)}else p.homing=!1,p.target=void 0}(0,a.default)(p,o),(0,r.default)(t,p,!1),p.life<0&&(p.remove=!0,p.target=void 0)}return"particles (& bullets)"}};t.default=s}.apply(t,a),void 0===n||(e.exports=n)},5934:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetPlayerByGuidOrNull=t.GetPlayerByGuidOrEmptyArray=void 0,t.GetPlayerByGuidOrEmptyArray=function(e,t){var r=t.game.playerGuidHash[e];return r?[r]:[]},t.GetPlayerByGuidOrNull=function(e,t){return t.game.playerGuidHash[e]};t.default={update:function(e){var t=e.game.player,r=t.length,a=e.game;a.playerGuidHash={};for(var n=0;n<r;n++){var o=t[n];a.playerGuidHash[o.guid]=o}return"playerGuidHash"}}}.apply(t,[r,t]),void 0===a||(e.exports=a)},2068:(e,t,r)=>{var a,n;a=[r,t,r(9262),r(943),r(1e3)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PositionUpdaterAutoSleep=t.PositionUpdaterPoint=t.ParticleUpdater=t.ShipPositionUpdater=void 0;var o=new r.Vector(0,0);t.default=function(e,r){switch(e.shape){case 3:case 6:o.set(e.vel.x,e.vel.y),o.mult(r),e.pos.add(o);break;case 0:(0,t.PositionUpdaterAutoSleep)(e,r);break;case 1:(0,n.wedgeUpdater)(e,r)}},t.ShipPositionUpdater=function(e,t,r){void 0===r&&(r=!0),(0,n.wedgeUpdater)(e,t)},t.ParticleUpdater=function(e,t){o.set(e.vel.x,e.vel.y),o.mult(t),e.pos.x+=o.x,e.pos.y+=o.y},t.PositionUpdaterPoint=function(e,t){o.set(e.vel.x,e.vel.y),o.mult(t),e.pos.x+=o.x,e.pos.y+=o.y},t.PositionUpdaterAutoSleep=function(e,t){var r=e.vel;0===e.shape?((0,a.ballUpdater)(e,t),0===r.x&&0===r.y?(e.sleepingAABB=!0,e.hasSlept||(e.opos=e.pos.toPointINT()),e.hasSlept=!0):(e.sleepingAABB=!1,r.roundToZero())):(o.set(r.x,r.y),o.mult(t),e.pos.add(o),0===r.x&&0===r.y?(e.sleepingAABB=!0,e.hasSlept||(e.opos=e.pos.toPointINT()),e.hasSlept=!0):(e.sleepingAABB=!1,r.roundToZero()))}}.apply(t,a),void 0===n||(e.exports=n)},337:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(9262),r(2068),r(2610),r(7185),r(2261),r(2093),r(1638),r(3872),r(7185),r(5714),r(943)],n=function(e,t,r,a,n,s,u,l,A,c,d,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProximityMine=t.createProximityMineFromShip=t.rayIntersections=t.PROXIMITY_MINE_RAY_LENGTH=void 0,a=i(a),n=i(n),t.PROXIMITY_MINE_RAY_LENGTH=2700;var h=new r.Vector(t.PROXIMITY_MINE_RAY_LENGTH,0),v=new r.Vector(1.5,0),g=new r.Vector(0,0);t.rayIntersections=function(e,r,a,n){var o=(0,l.getQuadTreesObj)(),i=t.PROXIMITY_MINE_RAY_LENGTH;g.set(r.x,r.y);var s=S(o.queryRay([4,11,22,23],e,r),e,r,i);i=s.closestDist;var u=_(o.queryRay([10,9,36,43,44],e,r),e,r,i,a);i=u.closestDist;var A=x(o.queryRay([45,50,1,2,0],e,r),e,r,i,n);i=A.closestDist;var c=T(o.queryRay([42],e,r),e,r,i,n);return i=c.closestDist,c.target?c:A.target?A:u.target?u:s},new r.Vector(0,0);var y=new r.Vector(0,0),m=new r.Vector(0,0),_=function(e,t,r,a,n){for(var o=e.length,i=r.x,s=r.y,u=!1,l=null,c=0;c<o;c++){var p=e[c];if((0,A.LineInterceptCircle)(t,r,p.pos,p.radius)){var f=(0,d.distanceBetweenVectors)(t,p.pos)-p.radius;if(f<a){y.set(t.x,t.y),m.set(r.x,r.y);var v=(0,A.LineInterceptCircleToPositions)(y,m,p.pos,p.radius);v.length>0&&(i=v[0].x,s=v[0].y,u=!0,a=f,l=p)}}}return{pos:u?{x:i,y:s}:h,target:l,closestDist:a}},x=function(e,t,r,a,n){for(var o=e.length,i=r.x,u=r.y,l=null,c=!1,d=0;d<o;d++){var p=e[d];if(p.guid!==n)for(var f=p.comp[0].vertex,v=[f[0].x,f[0].y,f[1].x,f[1].y,f[0].x,f[0].y,f[2].x,f[2].y,f[1].x,f[1].y,f[2].x,f[2].y],g=v.length,y=0;y<g;y+=4){var m=(0,A.LineIntersectsToPoint)(t.x,t.y,r.x,r.y,v[y],v[y+1],v[y+2],v[y+3]);if(m){var _=(0,s.distanceBetweenXYXY)(m.x,m.y,t.x,t.y);_<a&&(a=_,i=m.x,u=m.y,c=!0,l=p)}}}return{pos:c?{x:i,y:u}:h,target:l,closestDist:a}},S=function(e,t,r,a){for(var n=e.length,o=Number.MAX_VALUE,i=Number.MAX_VALUE,u=null,l=!1,d=0;d<n;d++){var p=e[d];if(4===p.type||11===p.type||23===p.type||22===p.type){var f=[];(0,c.blockCirclePolyForRayCaster2)(p.sides,p.radius,p.pos.x,p.pos.y,p.angle,f,-1,0,0,t.x,t.y);for(var v=f.length,g=0;g<v;g+=4){var y=(0,A.LineIntersectsToPoint)(t.x,t.y,r.x,r.y,f[g],f[g+1],f[g+2],f[g+3]);if(y){var m=(0,s.distanceBetweenXYXY)(y.x,y.y,t.x,t.y);m<a&&(a=m,o=y.x,i=y.y,l=!0,u=p)}}}}return{pos:l?{x:o,y:i}:h,target:u,closestDist:a}},T=function(e,t,r,a,n){for(var o=e.length,i=Number.MAX_VALUE,u=Number.MAX_VALUE,l=null,d=!1,p=0;p<o;p++){var f=e[p];if(f.guid!==n){var v=[];(0,c.blockCirclePolyForRayCaster2)(6,f.radius,f.pos.x,f.pos.y,0,v,-1,0,0,t.x,t.y);for(var g=v.length,y=0;y<g;y+=4){var m=(0,A.LineIntersectsToPoint)(t.x,t.y,r.x,r.y,v[y],v[y+1],v[y+2],v[y+3]);if(m){var _=(0,s.distanceBetweenXYXY)(m.x,m.y,t.x,t.y);_<a&&(a=_,i=m.x,u=m.y,d=!0,l=f)}}}}return{pos:d?{x:i,y:u}:h,target:l,closestDist:a}},E=new r.Vector(0,0),M=new r.Vector(0,0),b=!1,I={};t.createProximityMineFromShip=function(e,a,n){var o=e.vel.clone();o.mult(.85);var i=new r.Vector(e.pos.x+Math.cos(e.angle+Math.PI)*(e.radius+10),e.pos.y+Math.sin(e.angle+Math.PI)*(e.radius+10)),s=2*Math.PI*Math.random();a.game.proximityMines.push((0,t.createProximityMine)(i,o,n,s))},t.createProximityMine=function(e,t,r,a,n){return o(o(o({damage:r.damage,pos:e,vel:t,guid:(0,s.getGuid)(),life:100,radius:7,rayAngleA:a,rayAngleB:Math.PI+a,ownerGuid:r.ownerGuid,ownerType:r.ownerType,type:42,collType:18},(0,p.setImovableDefaults)((0,f.BallCreator)(e.x,e.y,7,7))),{target:null,aquireMode:0,aquireTimer:0,timerT:1200,intersectA:e.toPoint(),intersectB:e.toPoint(),intersectAaquired:!1,intersectBaquired:!1,origin:e.clone(),armor:{type:3,value:1}}),n)};var L={update:function(e){var r=e.game,o=(e.WW,e.WH,e.step),i=e.stepMS;I={};var l=r.proximityMines.length,A=0,c=!1;if(b){var p=0;for(var f in I)I[f]>p&&(p=I[f],A=parseInt(f,10))}for(var g=0;g<l;g++){var y=r.proximityMines[g];l>80&&!c&&(b&&y.guid===A&&(y.remove=!0,c=!0),I[y.guid]?I[y.guid]++:I[y.guid]=1,b=!0,0===g&&(y.remove=!0)),y.vel.mult(.97),y.vel.getLength()>6&&y.vel.setLength(6),y.target=null,y.intersectAaquired=!1,y.intersectBaquired=!1;var m=y.pos;h.set(t.PROXIMITY_MINE_RAY_LENGTH,0),h.setAngle(y.rayAngleA),h.add(m);var _=(0,t.rayIntersections)(m,h,y.rayAngleA,y.guid);y.intersectA.x=_.pos.x,y.intersectA.y=_.pos.y,_.target&&(y.target=_.target,y.intersectAaquired=!0),h.set(t.PROXIMITY_MINE_RAY_LENGTH,0),h.setAngle(y.rayAngleB),h.add(m);var x=(0,t.rayIntersections)(m,h,y.rayAngleB,y.guid);if(y.intersectB.x=x.pos.x,y.intersectB.y=x.pos.y,x.target&&(y.intersectBaquired=!0),!y.target&&x.target&&(y.target=x.target),y.target){var S=y.target.type;if(y.target.guid===y.ownerGuid||2===S||4===S||11===S||23===S||43===S||44===S||0===S||22===S||y.target.ownerGuid===y.ownerGuid)y.aquireMode=2,y.rayAngleA+=o*Math.PI*5e-4,y.rayAngleB+=o*Math.PI*5e-4;else{E.set(y.target.pos.x,y.target.pos.y),E.subtract(y.pos);var T=E.getAngle(),L=(0,s.angleDifference)(y.rayAngleA,T);y.rayAngleA-=.13*L,Math.abs(L)<.08&&(y.aquireTimer+=i,M.set(y.target.radius*(Math.random()-.5),0),M.setAngle(T+.5*Math.PI),M.add(E),y.rayAngleA=M.getAngle(),y.aquireMode=1);var P=(0,s.angleDifference)(y.rayAngleB,T);y.rayAngleB-=.13*P,Math.abs(P)<.08&&(y.aquireTimer+=i,M.set(y.target.radius*(Math.random()-.5),0),M.setAngle(T+.5*Math.PI),M.add(E),y.rayAngleB=M.getAngle(),y.aquireMode=1);var w=y.target;if(w&&!w.remove&&w.life>0){var R=Math.atan2(w.pos.y-y.pos.y,w.pos.x-y.pos.x),O=y.vel.getAngle();O=(0,u.normalizeRadianAngle)(O),O+=.5*(0,u.angleDelta)(O,R)*o,v.set(.4,0),v.setAngle(O),y.vel.add(v)}else y.aquireTimer=0;y.target&&y.aquireTimer>y.timerT&&(0,d.distanceBetweenVectors)(y.pos,y.target.pos)<y.target.radius+150&&(y.aquireTimer=y.timerT+1,y.remove=!0)}}else{y.aquireMode=0,y.aquireTimer=0;var C=(0,s.angleDifference)(y.rayAngleA,y.rayAngleB);Math.abs(C)<.9*Math.PI?(y.rayAngleA+=o*Math.PI*.009,y.rayAngleB+=o*Math.PI*.002):(y.rayAngleA+=o*Math.PI*.0033,y.rayAngleB=y.rayAngleA+Math.PI)}y.rayAngleA=(0,u.normalizeRadianAngle)(y.rayAngleA),y.rayAngleB=(0,u.normalizeRadianAngle)(y.rayAngleB),(0,n.default)(r,y,!0),(0,a.default)(y,o)}return"proximitymines"}};t.default=L}.apply(t,a),void 0===n||(e.exports=n)},9867:(e,t,r)=>{var a,n;a=[r,t,r(9262),r(2093)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new r.Vector(0,0),o={update:function(e){var t=e.game,r=t.rockFormationSystemRadius;if(0!==r.length&&(0,a.getQuadTreesObj)().All){var o=r[0];if(13===t.currentLevel){var i=[];i.push(45,8,10,9),function(e,t){t.length;for(var r=e.pos.x,o=e.pos.y,i=(0,a.getQuadTreesObj)().queryTreesVec(t,e.pos,e.radius,e.radius),s=i.length,u=0;u<s;u++){var l=i[u],A=Math.atan2(l.pos.y-o,l.pos.x-r);n.set(.13,0),n.setAngle(A),l.vel.add(n)}}(o,i)}for(var s=t.rockFormations,u=s.length,l=0;l<u;l++){var A=s[l];A.minerals<1&&(A.remove=!0),A.pos.setFromVec(A.staticPos)}return"rockFormations"}}};t.default=o}.apply(t,a),void 0===n||(e.exports=n)},8181:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2261),r(7899),r(2068),r(5182),r(2610),r(6270),r(1287)],n=function(e,t,r,a,n,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n),s=o(s);var A={update:function(e){for(var t=e.game,o=e.WW,A=e.WH,c=e.step,d=t.rockets.length,p=0;p<d;p++){var f=t.rockets[p];if(31===f.type){var h=f.target;if(h&&!h.remove||((0,l.changeType)(f,33),f.target=void 0),h){var v=Math.atan2(h.pos.y-f.pos.y,h.pos.x-f.pos.x);f.angle=(0,r.normalizeRadianAngle)(f.angle),f.angle+=.07*(0,r.angleDelta)(f.angle,v)*c}}f.thrust.setLength(.1),f.thrust.setAngle(f.angle),f.vel.add(f.thrust);var g=33===f.type?10.5:9.5;f.vel.getLength()>g&&f.vel.setLength(g),f.angle=f.angle%a.doublePI,(0,s.default)(t,f,!1),(0,n.default)(f,c),(0,u.DamgeItemFixedValue)(f,.01*c),f.life<0&&(f.remove=!0),(0,i.shift)(f,o,A)}return"rockets/missiles"}};t.default=A}.apply(t,a),void 0===n||(e.exports=n)},5371:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,r){var a=e.SX,n=e.SY,o=e.SW,i=e.SH;t.x=a-r,t.y=n-r,t.width=o+2*r,t.height=i+2*r},a={update:function(e){var t=e.game.screen;return r(e,t.rectMinus_400,-400),r(e,t.rectMinus_200,-200),r(e,t.rect,0),r(e,t.rectSS_200,200),r(e,t.rectSS_400,400),r(e,t.rectSS_600,600),r(e,t.rectSS_800,800),r(e,t.rectSS_1000,1e3),r(e,t.rectSS_1500,1500),r(e,t.rectSS_2000,2e3),"screenRect"}};t.default=a}.apply(t,[r,t]),void 0===a||(e.exports=a)},7496:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2610),r(2068),r(3431),r(5182),r(9262),r(7185),r(5714),r(943),r(8787)],n=function(e,t,r,a,n,s,u,l,A,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSpaceMine=t.createSpaceMineWoShip=void 0,r=i(r),a=i(a);var p=d.mineWDT;t.createSpaceMineWoShip=function(e,t){var r=new u.Vector(e,t);return o(o({ownerGuid:-1,damage:p.damage,pos:r,vel:new u.Vector(0,0),guid:(0,l.getGuid)(),life:100,radius:7,collType:19,type:43},(0,A.setImovableDefaults)((0,c.BallCreator)(r.x,r.y,7,7))),{activationTimer:1100,lightIntensity:Math.random(),armor:{type:3,value:1}})},t.createSpaceMine=function(e,t,r){var a=e.vel.clone();a.mult(.65);var n=new u.Vector(e.pos.x+Math.cos(e.angle+Math.PI)*(e.radius+10),e.pos.y+Math.sin(e.angle+Math.PI)*(e.radius+10));t.game.spaceMines.push(o(o({ownerGuid:e.guid,damage:r.damage,pos:n,vel:a,guid:(0,l.getGuid)(),life:100,radius:7,collType:19,type:43},(0,A.setImovableDefaults)((0,c.BallCreator)(n.x,n.y,7,7))),{activationTimer:1100,lightIntensity:Math.random(),armor:{type:3,value:1}}))};var f={update:function(e){for(var t=e.game,o=e.WW,i=e.WH,u=e.step,l=e.stepMS,A=t.spaceMines.length,c=0;c<A;c++){var d=t.spaceMines[c];d.activationTimer>0?d.activationTimer-=l:d.lightIntensity<1?d.lightIntensity+=.03*u:d.lightIntensity=0;var p=d.vel.getLength();p>3&&d.vel.setLength(3),p>.2&&d.vel.mult(.97),(0,a.default)(d,u),(0,s.shift)(d,o,i),(0,r.default)(t,d,!0),(0,n.wormhole)(d,e)}return"SpaceMines"}};t.default=f}.apply(t,a),void 0===n||(e.exports=n)},6325:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(484),r(7899),r(9262),r(7185),r(2610),r(2068),r(2261),r(2093),r(6632),r(2826)],n=function(e,t,r,a,n,i,s,u,l,A,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpacePortClassType=t.getSpaceportCannonHash=t.prePopulateSpaceportCannonHash=void 0,s=o(s),u=o(u);var p=0,f={};t.prePopulateSpaceportCannonHash=function(e){for(var t=0;t<e.length;t++)for(var r=e[t],a=0;a<r.cannons.length;a++){var n=r.cannons[a];f[n.guid]=r}},t.getSpaceportCannonHash=function(){return f};var h=[{name:"AURIGA",size:500},{name:"HORIZON",size:450},{name:"GENESIS",size:400},{name:"CHALLENGER",size:420},{name:"RYBERG",size:480}];t.getSpacePortClassType=function(e){var t=Math.floor(e()*h.length);return t>h.length-1&&(t=h.length-1),h[t]};var v={update:function(e){var t=e.game,o=e.step,f=e.stepMS,h=(0,A.getQuadTreesObj)();if(h&&h.All){p++;for(var v=t.spacePorts,g=[],y=0;y<v.length;y++){var m=v[y];if(m.shieldImpacts=[],m.centerNoneCannon.life>.3*a.SPACEPORT_START_LIFE&&m.shields<m.oshields&&7===m.cannons.length){var _=m.shields<0;m.shields<0&&m.shields>-10?m.shields+=35e-5*m.radius*o*.2:m.shields+=35e-5*m.radius*o,_&&m.shields>=0&&(m.shields=.69*m.oshields),m.shields<-100&&(m.shields=-100),m.shields>m.oshields&&(m.shields=m.oshields)}m.pos=m.staticPos.clone(),m.vel.x=0,m.vel.y=0;var x=3.25*m.radius,S=(0,r.rect_pool_pop)(m.pos.x-x,m.pos.y-x,2*x,2*x),T=(0,r.rect_pool_pop)(m.pos.x-m.radius,m.pos.y-m.radius,2*m.radius,2*m.radius),E=m.isEnemyForMS>0?[]:h.queryTreesRect([45],T);m.weaponsActive=E.length>0,g.push.apply(g,E),m.isEnemyForMS-=f,m.isEnemyForMS<0&&(m.isEnemyForMS=0);var M=[],b=m.cannons,I=b.length;if(m.weaponsActive)M=b;else for(var L=0;L<I;L++){var P=b[L];P.weaponsActiveTimerMS>0&&(M.push(P),P.weaponsActiveTimerMS-=f)}for(var w=0;w<m.cannons.length;w++){var R=m.cannons[w];if(R.busy=!1,R.fireing=!1,R.pos.x>R.staticPos.x+1?R.pos.x--:R.pos.x<R.staticPos.x-1&&R.pos.x++,R.pos.y>R.staticPos.y+1?R.pos.y--:R.pos.y<R.staticPos.y-1&&R.pos.y++,(0,s.default)(t,R,!0,5,.5),R.vel.getLength()>20&&R.vel.setLength(20),R.vel.mult(.7),(0,u.default)(R,o),M.length>0){var O=h.queryTreesRect([36,9,1,10],S);O.length<2&&O.push.apply(O,h.queryTreesRect([45],S));for(var C=O.length,D=0;D<C;D++){var G=O[D],N=45===G.type;if(p>3)for(var B=0;B<I;B++){var F=b[B];if(F.bullets>0){var V=F.aggressionForGuidsHash[G.guid]||0;if(F.busy||!F.isCannon)continue;var k=Math.atan2(G.pos.y+8*G.vel.y-F.pos.y,G.pos.x+8*G.vel.x-F.pos.x)+Math.random()*Math.PI*.02-.01*Math.PI,X=Math.atan2(F.pos.y-m.pos.y,F.pos.x-m.pos.x);if(F.angle=(0,l.normalizeRadianAngle)(F.angle),N&&V<20){if(1===C){Math.abs(F.angle-F.idleSweepTargetAngle)<.1&&Math.random()>.96&&(F.idleSweepTargetAngle=X+(Math.random()-.5)*Math.PI*.5);var H=(F.guid%10*1e-5+7e-5)*o;F.angle>F.idleSweepTargetAngle?F.angle-=H:F.angle+=H}continue}if(N){if(V<40&&Math.random()>.05)continue;if(V<60&&Math.random()>.2)continue}if(Math.abs(k-X)>.59*Math.PI)continue;var U=(0,n.vec_pool_pop)(c.SPACE_PORT_BULLET_VEL_LEN,0);U.setAngle(k);var Y=(0,i.angleDifference)(F.angle,k);if(F.angle-=.07*Y*o,Math.abs(Y)<.05*Math.PI){var W=(0,d.createBullet)(29);W.vel.x=U.x,W.vel.y=U.y,W.pos.x=F.pos.x,W.pos.y=F.pos.y,W.damage=c.SPACE_PORT_BULLET_DAMAGE,W.ownerGuid=F.guid,W.owenerType=F.type,t.bullets.push(W),F.fireing=!0,F.bullets--}(0,n.vec_pool_put)(U),F.busy=!0}}}}}(0,r.rect_pool_put)(T),(0,r.rect_pool_put)(S)}if(p>10){p=0;var j={},q=g.length;for(y=0;y<q;y++)j[g[y].guid]=!0;if(!e.IS_MULTIPLAYER||e.IS_SERVER){var z=t.player,K=z.length;for(y=0;y<K;y++){var Z=z[y];if(!j[Z.guid]&&Z.inSafeZone){Z.inSafeZone=!1;var Q={life:a.NOTIFICATION_LIFE,type:75,onlyForGuid:Z.guid};e.game.notifications.unshift(Q)}}}}return"spaceports"}}};t.default=v}.apply(t,a),void 0===n||(e.exports=n)},7344:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(9262),r(7185),r(2261),r(2610),r(2068),r(3431),r(2889),r(7185),r(4831),r(2889),r(2093),r(5714),r(5345),r(6270),r(7561),r(8155),r(1708),r(8787),r(6030)],n=function(e,t,r,a,n,u,l,A,c,d,p,f,h,v,g,y,m,_,x,S,T){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPartsFromSpaceSnake=t.snakeIK=t.populateSpaceSnakeSegmentHash=t.resetSpaceSnakeSegmentHash=t.getSpacesnakeFromSegment=void 0,u=s(u),l=s(l),c=s(c),p=s(p);var E=0,M=new r.Vector(.3,.3),b={};t.getSpacesnakeFromSegment=function(e){return b[e]},t.resetSpaceSnakeSegmentHash=function(){b={}},t.populateSpaceSnakeSegmentHash=function(e){for(var t=0;t<e.segments.length;t++){var r=e.segments[t];b[r.guid]=e}},t.snakeIK=function(e,t,r,a){for(var n=e.length-1;n>0;n--){var o=e[n];r?o.legAngle=0:o.legAngleDirectionForward?(o.legAngle+=.13*t*a,o.legAngle>.6&&(o.legAngleDirectionForward=!1)):(o.legAngle-=.26*t*a,o.legAngle<-.6&&(o.legAngleDirectionForward=!0)),i=e[n-1],s=o,u=void 0,l=void 0,A=void 0,c=void 0,d=void 0,p=void 0,u=2*i.radius,l=i.pos.x-s.pos.x,A=i.pos.y-s.pos.y,c=Math.atan2(A,l),d=s.pos.x+Math.cos(c)*u,p=s.pos.y+Math.sin(c)*u,i.pos.x=d,i.pos.y=p,i.angle=c,i.offsetFront.setAngle(c),i.offsetRear.setAngle(c-Math.PI)}var i,s,u,l,A,c,d,p},t.createPartsFromSpaceSnake=function(e,t){for(var a=t.segments,n=a.length,i=0;i<n;i++){var s=a[i];if((0,p.default)(s,e,0),i>0){var u=a[i-1],l=s.vel.clone();l.getLength()>1&&l.setLength(1);var A=(0,d.midpoint)(s.pos,u.pos,.5),c=s.pos.clone(),f=u.pos.clone();c.subtract(A),f.subtract(A);var h=o(o({},(0,v.setImovableDefaults)(null)),{fromType:s.type,edgeA:c,edgeB:f,rotatedEdgeA:new r.Vector(0,0),rotatedEdgeB:new r.Vector(0,0),colorFade:255,complexPartIndices:null,complexPartVectors:null,pos:A,angle:0,angleVel:.005*Math.random(),vel:l.clone(),guid:(0,d.getGuid)(),type:37,collType:26,life:100+50*Math.random(),radius:.28*s.radius,width:.18*s.radius,armor:null}),y=o(o({},(0,v.setImovableDefaults)(null)),{fromType:s.type,edgeA:c.clone(),edgeB:new r.Vector(0,0),rotatedEdgeA:new r.Vector(0,0),rotatedEdgeB:new r.Vector(0,0),colorFade:255,complexPartIndices:null,complexPartVectors:null,pos:A.clone(),angle:.5*Math.PI+.1*s.legAngle,angleVel:.005*Math.random(),vel:l.clone(),guid:(0,d.getGuid)(),type:37,collType:26,life:100+50*Math.random(),radius:.18*s.radius,width:.18*s.radius,armor:null}),m=o(o({},(0,v.setImovableDefaults)(null)),{fromType:s.type,edgeA:c.clone(),edgeB:new r.Vector(0,0),rotatedEdgeA:new r.Vector(0,0),rotatedEdgeB:new r.Vector(0,0),colorFade:255,complexPartIndices:null,complexPartVectors:null,pos:A.clone(),angle:-.5*Math.PI+.1*s.legAngle,angleVel:.005*Math.random(),vel:l.clone(),guid:(0,d.getGuid)(),type:37,collType:26,life:100+50*Math.random(),radius:.18*s.radius,width:.18*s.radius,armor:null});(0,g.createDust)(A,15,5,e,l.x,l.y),(0,g.createDust)(h.pos,14,4,e,l.x,l.y),(0,g.createDust)(y.pos,16,6,e,l.x,l.y),(0,g.createDust)(m.pos,16,6,e,l.x,l.y);for(var x=0;x<16;x++)(0,_.createFragmentBlack)(s.pos.clone().addXY(Math.random()*s.radius-.5*s.radius,Math.random()*s.radius-.5*s.radius),e,[new r.Vector(0,0),new r.Vector(6+6*Math.random(),0),new r.Vector(0,6+6*Math.random())],l.x+Math.random()-.5,l.y+Math.random()-.5,Math.random());e.game.asteroidParts.push(h),e.game.asteroidParts.push(y),e.game.asteroidParts.push(m)}}};var I={update:function(e){var o,s=e.game,d=(e.WW,e.WH,e.SW,e.SH,e.SX,e.SY,e.step),p=e.stepMS;if((0,h.getQuadTreesObj)().All&&!s.settings_be_the_snake_mode){for(var v,g=(0,f.getBaseTargetArrays)(e),_=e.game.spaceSnake,b=_.length,I=function(f){var h=_[f];if(h.tryToMoveAwayAfterStationaryAttackMs>0&&(h.tryToMoveAwayAfterStationaryAttackMs-=e.stepMS,h.tryToMoveAwayAfterStationaryAttackMs=Math.max(0,h.tryToMoveAwayAfterStationaryAttackMs)),h.fleeDangerMS>0&&(h.tryToMoveAwayAfterStationaryAttackMs=0,h.attackMode=!1),h.prioritzeRestposMS>0&&(h.prioritzeRestposMS-=e.stepMS),0===h.segments.length||h.remove)return h.remove=!0,h.segments.forEach((function(e){return e.remove=!0})),"continue";var b=h.segments[Math.floor(.5*h.segments.length)];b&&(h.pos.x=b.pos.x,h.pos.y=b.pos.y);var I=(0,a.distanceBetweenVectors)(h.restPos,h.segments[0].pos);(0,T.schedule)(h.guid,(function(){for(var e=h.segments.length,t=0;t<e;t++)h.life=Math.min(h.life,h.segments[t].life);h.guid%2==0&&h.segments.find((function(e){var t=e.life<.33*h.oLife;return h.life=Math.min(e.life,h.life),h.prioritzeRestposMS&&e.life<.77*h.life&&(0,y.LifeIncreaseFixedValue)(e,.05),t}))&&I>1500&&(h.prioritzeRestposMS=3e4),I<1e3&&h.prioritzeRestposMS&&h.segments.forEach((function(e){(0,y.LifeIncreaseFixedValue)(e,1),h.life>e.life&&(h.life=e.life)}))}),20);var L=h.segments[h.attackMode?0:h.segments.length-1];if(h.spasm){var P=Math.floor(.5*h.segments.length),w=h.segments.length-1,R=h.segments[P],O=h.segments[0],C=h.segments[w];if(!h.spasm){O.vel.set(.1,0),C.vel.set(0,0);var D=new r.Vector(0,R.radius*P);D.setAngle(O.angle+.83*Math.PI),D.add(O.pos);var G=new r.Vector(0,R.radius*P);G.setAngle(C.angle+.83*Math.PI),G.add(C.pos),h.spasm={firstPos:D,lastPos:G,firstDone:!1,lastDone:!1,firstMS:0,lastMS:0};var N=Math.atan2(h.spasm.lastPos.y-O.pos.y,h.spasm.lastPos.x-O.pos.x);O.vel.setAngle(N)}var B=new r.Vector(.1,0),F=.1;if(h.spasm.firstDone)h.spasm.lastMS+=p,k=Math.atan2(h.spasm.firstPos.y-C.pos.y,h.spasm.firstPos.x-C.pos.x),B.setAngle(k),C.vel.subtract(B),C.vel.getLength()<F&&C.vel.setLength(F),C.angle=k,(0,t.snakeIK)(h.segments,d,!0,0),(0,l.default)(C,d),h.spasm.lastMS>100&&(h.spasm=null);else{h.spasm.firstMS+=p,N=Math.atan2(h.spasm.lastPos.y-O.pos.y,h.spasm.lastPos.x-O.pos.x),B.setAngle(N),O.vel.subtract(B),O.vel.getLength()<F&&O.vel.setLength(F);var V=i([],h.segments,!0).reverse();if((0,t.snakeIK)(V,d,!0,0),(0,l.default)(O,d),h.spasm.firstMS>100){h.spasm.firstDone=!0;var k=Math.atan2(h.spasm.firstPos.y-C.pos.y,h.spasm.firstPos.x-C.pos.x);C.vel.set(.1,0),C.vel.setAngle(k)}}}var X=h.segments[h.segments.length-1],H=(0,c.default)(e,h,X.pos,X.radius,Math.max(h.segments.length*X.radius*7,1600),g),U=H.targetPos,Y=(0,a.distanceBetweenVectors)(L.pos,H.targetPos);v=Math.atan2(H.targetPos.y-L.pos.y,H.targetPos.x-L.pos.x);var W=H.targetPos.clone(),j=new r.Vector(Math.min(Y,250),0),q=(0,n.rotateVector)(j,v+E);q.setLength(Math.min(.3*Y,180));var z=!h.spasm;if((Y<12*X.radius||h.tryToMoveAwayAfterStationaryAttackMs>0)&&(h.spasm||H.targetIsIM&&(null===(o=H.target)||void 0===o?void 0:o.vel.getLength())<2)&&!h.ownedByStructureGuid){var K=Math.max(h.segments.length*X.radius*3,900);h.tryToMoveAwayAfterStationaryAttackMs<1&&(q.setLength(K),q.setAngle(v-Math.PI+.25*Math.PI*(h.guid%2==0?1:-1)),q.setAngle(v+.5*Math.PI),h.moveAwayLocation.setFromVec(q),h.tryToMoveAwayAfterStationaryAttackMs=200*h.segments.length),z=!1,(0,a.distanceBetweenVectors)(X.pos,H.targetPos)>.9*K&&(h.tryToMoveAwayAfterStationaryAttackMs=0),q.setFromVec(h.moveAwayLocation)}W.add(q),U=W,E+=.007+.015*X.vel.getLength();var Z=(0,n.faceTargetPos)(X.pos,X.angle,U,d),Q=h.segments[h.segments.length-2],J=Math.atan2(X.pos.y-Q.pos.y,X.pos.x-Q.pos.x),$=new r.Vector(300,0);$.setAngle(J);var ee=.15*Math.PI,te=[];(0,m.line2Poly)(Q.pos.x,Q.pos.y,Q.pos.x+$.x,Q.pos.y+$.y,te,4),$.setLength(450),$.setAngle(Z),(0,m.line2Poly)(Q.pos.x,Q.pos.y,Q.pos.x+$.x,Q.pos.y+$.y,te,4);var re=[];$.setAngle(J+ee),(0,m.line2Poly)(Q.pos.x,Q.pos.y,Q.pos.x+$.x,Q.pos.y+$.y,re,4),$.setAngle(J-ee),(0,m.line2Poly)(Q.pos.x,Q.pos.y,Q.pos.x+$.x,Q.pos.y+$.y,re,4),Math.abs((0,n.normalizeRadianPositive)(J)-(0,n.normalizeRadianPositive)(Z))<Math.PI&&(L.angle=Z,X.offsetFront.setAngle(Z),X.offsetRear.setAngle(Z-Math.PI));var ae=X.vel.getLength();if(H.targetIsIM&&(z||Math.random()>.97)&&(Y<600+H.target.radius||Y<900&&Math.random()>.97)){var ne=(0,x.createFlame)(X,S.weaponDatas.flameThrower,0);ne.ownerGuid=h.guid,e.game.flames.push(ne)}(0,t.snakeIK)(h.segments,d,!1,ae<1?.03:.4),(0,u.default)(s,X,!0),(0,A.wormhole)(X,e),M.setAngle(Z),X.vel.add(M),h.attackMode?(X.vel.mult(1.3),X.vel.getLength()>18&&X.vel.setLength(18)):(X.vel.mult(1.05),ae>4&&X.vel.setLength(4)),(0,l.default)(X,h.infected?.33*d:d)},L=0;L<b;L++)I(L);return"spacesnakes"}}};t.default=I}.apply(t,a),void 0===n||(e.exports=n)},4022:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7185),r(2261),r(9262),r(2068),r(5182),r(2889),r(2889),r(3431),r(3239),r(3239),r(2093),r(5475),r(6270)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maxRotateSpiderLeg=t.minRotateSpiderLeg=t.updateSpiderLeg=void 0,i=o(i),u=o(u),c=o(c);var v=1.089-1,g=1.019-1,y=.89-1,m=.969-1,_=.01,x=new n.Vector(0,0),S=new n.Vector(0,0),T=function(e){for(var t=0;t<e.legs.length;t++){var r=e.legs[t].bones[0];r.angle=r.staticAngle+e.angle,S.set(.7*e.radius,0),S.setAngle(r.angle),r.pos.set(S.x+e.pos.x,S.y+e.pos.y)}};function E(e,t,n){var o,i=e.length,s=e.pos.x-t.pos.x,u=e.pos.y-t.pos.y,l=Math.atan2(u,s),A=(0,a.normalizeRadianAngle)(t.angle);n&&(l=t.maxRange<0?(o=(0,a.normalizeRadianAngle)(-(0,r.angleDifference)(A,l)))>t.minRange?(0,a.normalizeRadianAngle)(A+t.minRange):o<t.maxRange?(0,a.normalizeRadianAngle)(A+t.maxRange):(0,a.normalizeRadianAngle)(A+o):(o=(0,a.normalizeRadianAngle)(-(0,r.angleDifference)(A,l)))<t.minRange?(0,a.normalizeRadianAngle)(A+t.minRange):o>t.maxRange?(0,a.normalizeRadianAngle)(A+t.maxRange):(0,a.normalizeRadianAngle)(A+o)),e.pos.x=t.pos.x+Math.cos(l)*i,e.pos.y=t.pos.y+Math.sin(l)*i,n&&(e.angle=(0,a.normalizeRadianAngle)(l))}t.updateSpiderLeg=function(e){for(var t=e.bones,r=t.length,a=1;a<r;a++){var n=t[a-1],o=t[a];S.set(o.length,0),S.setAngle(n.angle),o.pos.x=n.pos.x+S.x,o.pos.y=n.pos.y+S.y}},t.minRotateSpiderLeg=function(e){var t=e.bones,r=t.length;t[0].angle=(0,a.normalizeRadianAngle)(t[0].staticAngle+t[0].minRange);for(var n=1;n<r;n++){var o=t[n-1],i=t[n];i.angle=(0,a.normalizeRadianAngle)(i.minRange+o.angle)}},t.maxRotateSpiderLeg=function(e,t,r){void 0===t&&(t=1);var n=e.bones,o=n.length,i=n[0];i.angle=(0,a.normalizeRadianAngle)(i.maxRange*t-i.minRange+r);for(var s=1;s<o;s++){var u=n[s-1],l=n[s];l.angle=(0,a.normalizeRadianAngle)(l.maxRange*t-l.minRange+u.angle)}};var M={update:function(e){var n=e.game,o=e.WW,S=e.WH,M=e.step;if(!(0,p.getQuadTreesObj)().All)return 0;for(var b=(0,l.getBaseTargetArrays)(e),I=0;I<n.spaceSpiders.length;I++){var L=n.spaceSpiders[I];L.prioritzeRestposMS>0&&(L.prioritzeRestposMS-=e.stepMS,L.prioritzeRestposMS<0&&(L.prioritzeRestposMS=0));var P=L.life<60;P&&(0,h.DamgeItemFixedValue)(L,.75);var w=(0,u.default)(e,L,L.pos,L.radius,2e3,b),R=Math.atan2(w.targetPos.y-L.pos.y,w.targetPos.x-L.pos.x)+Math.PI;L.angle=(0,a.normalizeRadianAngle)(L.angle);var O=.07*(0,a.angleDelta)(L.angle,R)*M;if(P||(L.angle+=O),(0,i.default)(L,M),T(L),(0,s.shift)(L,o,S),(0,A.wormhole)(L,e),!L.stunned||P){var C=(0,r.distanceBetweenVectors)(w.targetPos,L.pos)-2*L.radius;w.target&&C<w.target.radius+1.2*L.radius&&(w.target.vel.mult(.88),(0,h.DamgeItemFixedValue)(w.target,.5+.2*L.level),(0,f.PredatorLevelUpgrade)(L,w.target));var D=.0033*Math.min(C,300);if(x.set((L.infected?.04:.1)*D,0),x.setAngle(L.angle+Math.PI),P||L.vel.add(x),L.vel.getLength()>4&&L.vel.setLength(4),L.vel.mult(.99),!P){var G=(0,c.default)(L,L.angle,(0,d.getGenericAvoidance)(L,e,L.fleeDangerMS>0?[3]:[],[]));L.vel.add(G.avoidance)}if(e.IS_MULTIPLAYER){if(e.IS_SERVER)continue}else if(!(0,s.onStage)(e,L,15*L.radius))continue;for(X=0;X<L.legs.length;X++)if(H=L.legs[X],P)(0,t.updateSpiderLeg)(H),X>=2&&X<=5?(0,t.maxRotateSpiderLeg)(H,-1.5,L.angle):(0,t.maxRotateSpiderLeg)(H,1.5,L.angle);else if(n.screen.rectSS_600.intersectsIM(L))if(X>=2&&X<=5){var N=H.bones[H.bones.length-1];N.pos.x-=.1*(N.pos.x-w.targetPos.x),N.pos.y-=.1*(N.pos.y-w.targetPos.y);for(var B=H.bones.length-1;B>0;B--)E(H.bones[B-1],H.bones[B],!1);var F=H.bones[0];for(F.pos.x=L.pos.x,F.pos.y=L.pos.y,B=1;B<H.bones.length;B++)E(H.bones[B],H.bones[B-1],!0)}else{(0,t.updateSpiderLeg)(H);var V=.6*L.vel.getLength();L.swimPosInL?L.swimPosL+=O>_?L.swimPosL*v*V*M:O<-.01?L.swimPosL*g*V*M:L.swimPosL*v*V*M:L.swimPosL+=O>_?L.swimPosL*y*V*M:O<-.01?L.swimPosL*m*V*M:L.swimPosL*y*V*M,L.swimPosInR?L.swimPosR+=O>_?L.swimPosR*g*V*M:L.swimPosR*v*V*M:L.swimPosR+=O>_?L.swimPosR*m*V*M:L.swimPosR*y*V*M,X<4?(0,t.maxRotateSpiderLeg)(H,L.swimPosL,L.angle):X>3&&(0,t.maxRotateSpiderLeg)(H,L.swimPosR,L.angle),L.swimPosL>=1?(L.swimPosL=.99,L.swimPosInL=!1):L.swimPosL<=.01&&(L.swimPosL=.01,L.swimPosInL=!0),L.swimPosR>=1?(L.swimPosR=.99,L.swimPosInR=!1):L.swimPosR<=.01&&(L.swimPosR=.01,L.swimPosInR=!0)}}else{L.stunned=!1;for(var k=L.legs.length,X=0;X<k;X++){var H=L.legs[X];(0,t.updateSpiderLeg)(H),(0,t.maxRotateSpiderLeg)(H,(X%2==0?(k-X)/k:X/k)+.2*Math.random(),L.angle)}}}return"Space spiders"}};t.default=M}.apply(t,a),void 0===n||(e.exports=n)},8380:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2610),r(2068),r(3431),r(5182),r(9262),r(7185),r(2093),r(5714),r(5345),r(943),r(2513),r(2826),r(484)],n=function(e,t,r,a,n,s,u,l,A,c,d,p,f,h,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSpaceTurret=void 0,r=i(r),a=i(a);var g=new u.Vector(0,0),y=(0,v.rect_pool_pop)(0,0,0,0);t.createSpaceTurret=function(e,t,r){var a=e.vel.clone();a.mult(.65);var n=new u.Vector(e.pos.x+Math.cos(e.angle+Math.PI)*(e.radius+10),e.pos.y+Math.sin(e.angle+Math.PI)*(e.radius+10));t.game.spaceTurrets.push(o(o({ownerGuid:e.guid,damage:r.damage,pos:n,vel:a,guid:(0,l.getGuid)(),life:100,radius:9},(0,c.setImovableDefaults)((0,p.BallCreator)(n.x,n.y,9,9))),{type:44,collType:20,activationTimer:3100,overheatVal:0,overHeatTimerMS:0,lightIntensity:0,bullets:480,opos:n.toPoint(),targetLength:750,targetSpread:.24*Math.PI,targetAngle:e.angle+Math.PI,angle:e.angle+Math.PI,origin:n.clone(),fireing:!1,armor:{type:3,value:1}}))};var m={update:function(e){for(var t=e.game,o=e.WW,i=e.WH,u=e.step,l=e.stepMS,c=t.spaceTurrets.length,p=0;p<c;p++){var v=t.spaceTurrets[p];if(v.fireing=!1,v.bullets>0){if(v.overHeatTimerMS>0)v.overheatVal>30&&(v.overheatVal*=.99),v.overHeatTimerMS-=l;else if(v.bullets>0&&v.activationTimer<0&&v.guid%2==e.frameCnt%2){y.update(v.pos.x-v.targetLength,v.pos.y-v.targetLength,2*v.targetLength,2*v.targetLength);for(var m=(0,A.getQuadTreesObj)().queryTreesRect([10,9,36,1],y),_=0;_<m.length;_++){var x=m[_];if(!(x.fleeDangerMS>1500)&&(0,f.getLineOfSight)(v.pos,x)){var S=Math.atan2(x.pos.y+2*x.vel.y-v.pos.y,x.pos.x+2*x.vel.x-v.pos.x);v.angle=S;var T=(0,h.createBullet)(26);T.vel.setLength(20),T.damage=v.damage,T.owenerType=44,T.ownerGuid=v.ownerGuid,T.vel.setAngle(S),T.pos.x=v.pos.x,T.pos.y=v.pos.y,T.pos.add(T.vel),T.pos.add(T.vel),v.overheatVal+=2,v.overheatVal>=50&&(v.overHeatTimerMS=1300),(0,d.createDust)(T.pos,1,.1,e,g.x,g.y),t.bullets.push(T),v.bullets--,v.fireing=!0;break}}}v.fireing||v.overheatVal>0&&v.overheatVal--,v.vel.getLength()>5&&v.vel.setLength(5),v.vel.mult(.97),v.activationTimer>0?v.activationTimer-=l:v.lightIntensity<1?v.lightIntensity+=.03*u:v.lightIntensity=0}(0,a.default)(v,u),(0,s.shift)(v,o,i),(0,r.default)(t,v,!0),(0,n.wormhole)(v,e)}return"SpaceTurret  "}};t.default=m}.apply(t,a),void 0===n||(e.exports=n)},2509:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(5081),r(2261),r(737)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SlowMotion=void 0,n=o(n);var i=1,s=2e-4;t.SlowMotion=function(){i=s};var u={update:function(e){var t,o=e.game;e.step,e.SW,1!==i&&(e.step*=i,e.stepMS*=i),i<1?(i+=.003,o.eventMap[r.GAME_EVENT.TIME_SCALE_CHANGED]={intensity:(0,a.map)(i,s,1,.1,1)}):i=1;var u=(0,n.default)(e);return u&&(null===(t=u.abilities.hash[5])||void 0===t?void 0:t.activated)&&(i=.1),"timescale"}};t.default=u}.apply(t,a),void 0===n||(e.exports=n)},4359:(e,t,r)=>{var a,n;a=[r,t,r(2093),r(7185)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rectInAncient=t.posInAncient=void 0,t.default={update:function(e){for(var t=e.game.ancientBlocks,r=t.length,a=0;a<r;a++){var n=t[a];n.pos.x=n.staticPos.x,n.pos.y=n.staticPos.y}return"Ancient"}},t.posInAncient=function(e,t){void 0===t&&(t=!1);var n=(0,r.getQuadTreesObj)().queryTreesVec([6],e,30,30);if(t&&n.length>0)return!0;for(var o=0;o<n.length;o++){var i=n[o];if((0,a.distanceBetweenVectors)(e,i.pos)<i.radius)return!0}return!1},t.rectInAncient=function(e){return(0,r.getQuadTreesObj)().queryTreesRect([6],e).length>0}}.apply(t,a),void 0===n||(e.exports=n)},5443:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(7185),r(9262),r(7899),r(6926),r(5714),r(6203),r(8260),r(6990)],n=function(e,t,r,a,n,u,l,A,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.populateAncientRooms=t.CreateAncient=void 0,c=s(c),d=s(d),p=s(p);var f=function(e,t,r,a,n,o){void 0===o&&(o=1);for(var s=r,l=e+Math.cos(u.doublePI*(s/r)+a)*n|0,A=t+Math.sin(u.doublePI*(s/r)+a)*n|0,c=[],d=[];s>-1;--s){var p=s%o==0,f=e+Math.cos(u.doublePI*(s/r)+a)*n|0,h=t+Math.sin(u.doublePI*(s/r)+a)*n|0;p?(c.push(i([],d,!0)),d=[]):d.push(l,A,f,h),l=f,A=h}return c},h=new n.Vector(0,0),v=new n.Vector(0,0),g=new n.Vector(0,0),y=function(e,t,r,n,o,i,s){h.set(t,r),v.set(n,o);for(var u=(0,a.distanceBetweenVectors)(h,v),A=function(e,t,r,a){for(var n=[],o=0,i=a-r;o<t;){var s=e()*i+r;if(o+s>t&&(s=t-o)<r){var u=n.length-1,l=n[u];if(l<a&&a-l>s){(o+=A=a-l)>t&&(A-=o-t,o=t),n[u]=l+A;continue}if(l>r){var A;o-=A=l-r,n[u]=r;continue}}n.push(s),o+=s}return n}(e,u,i,s),c=A.length,d=0,p=[],f=0;f<c;f++){var y=A[f],m=.5*y,_=d+m;(0,a.midpoint)(h,v,_/u,g),p.push((0,l.createAncientBlockSingle)(1.2*m,g,8,.1*f)),d+=y}return p};t.CreateAncient=function(e,t,s,u,c,d){for(var p=[],h=f(u,c,32,-.2+s,300*t,8),v=f(u,c,64,0+s,200*t,16),g=f(u,c,16,0+s,100*t,2),_=f(u,c,8,.86+s,145*t,2),x=0;x<_.length;x++){var S=_[x];p.push.apply(p,S)}for(x=0;x<g.length;x++)S=g[x],p.push.apply(p,S);var T=[],E=0,M=1;for(x=0;x<h.length;x++){var b=h[x],I=v[x],L=g[E],P=g[M];E+=2,(M+=2)>g.length-1&&(M=1);var w=b.length,R=I.length,O=P.length;T.push(b[0],b[1]),T.push(I[0],I[1]),T.push(I[0],I[1]),T.push(L[0],L[1]),T.push(b[w-2],b[w-1]),T.push(I[R-2],I[R-1]),T.push(I[R-2],I[R-1]),T.push(P[O-2],P[O-1]),p.push.apply(p,i(i([],b,!1),I,!1))}for(var C=[],D=[],G=0;G<p.length;G+=4){var N=p[0+G],B=p[1+G],F=p[2+G],V=p[3+G];C.push({start:{x:N,y:B},end:{x:F,y:V}}),D.push.apply(D,y(e,N,B,F,V,8*t,13*t))}for(G=0;G<T.length;G+=4)N=T[0+G],B=T[1+G],F=T[2+G],V=T[3+G],C.push({start:{x:N,y:B},end:{x:F,y:V}}),D.push.apply(D,y(e,N,B,F,V,2*t,5*t));var k=[],X=f(u,c,8,1.2+s,175*t,2);for(x=0;x<X.length;x++){var H=X[x];if(H.length>0){var U=.5*H.length;k.push({pos:{x:H[U],y:H[U+1]},inhabitantType:m(e),numInhabitants:3+Math.round(6*e())})}}var Y=[];(0,r.createBlockCirclePolySingleWall)(u,c,Y,6,s,40*t,!1);var W=Y.length-2;for(x=2;x<W;x+=4)D.push((0,l.createAncientBlockSingle)(10*t,{x:Y[x],y:Y[x+1]},8,.1*x,!0));return D.push((0,l.createAncientBlockSingle)(8*t,{x:u,y:c},12,0,!0)),{blocks:D,ancient:o(o({},(0,A.setImovableDefaults)(null)),{radius:300*t,pos:new n.Vector(u,c),vel:new n.Vector(0,0),type:6,collType:23,sleepingAABB:!0,rooms:k,seedKey:d,life:999999,angle:0,opos:{x:u,y:c},mass:9999999999,guid:(0,a.getGuid)(),oLife:9999999,acc:new n.Vector(0,0),walls:C,armor:{type:6,value:1}})}};var m=function(e){switch(Math.floor(3*e())){case 0:return 9;case 1:return 8;case 2:return 10}};t.populateAncientRooms=function(e,t){for(var r,a,n,o=t.rooms,i={ownedByStructureGuid:t.guid,ownedByStructureType:t.type},s=0;s<o.length;s++){var u=o[s];switch(u.inhabitantType){case 9:var l=(0,c.default)(e,u.numInhabitants,u.pos.x,u.pos.y,null,u.pos,i);(r=e.game.spaceSquids).push.apply(r,l);break;case 9:var A=(0,d.default)(e,u.numInhabitants,u.pos.x,u.pos.y,null,u.pos,i);(a=e.game.spaceSpiders).push.apply(a,A);break;case 8:var f=(0,p.default)(e,u.numInhabitants,u.pos.x,u.pos.y,null,u.pos,i);(n=e.game.spaceSnake).push.apply(n,f)}}}}.apply(t,a),void 0===n||(e.exports=n)},6926:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(943),r(7185),r(5714),r(9262),r(6812)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAncientBlockSingle=void 0,t.createAncientBlockSingle=function(e,t,u,l,A,c){return void 0===u&&(u=8),void 0===l&&(l=0),void 0===A&&(A=!1),void 0===c&&(c={}),o(o(o({},(0,n.setImovableDefaults)((0,r.BallCreator)(t.x,t.y,e,0))),{specular:.1,centerStone:A,isLV426:!1,netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},type:22,collType:24,sleepingAABB:!0,guid:(0,a.getGuid)(),staticPos:{x:t.x,y:t.y},minerals:0,radius:e,vel:new i.Vector(0,0),sides:u,angle:l,angleVel:.01*(1-2*Math.random()),life:9999999,oLife:9999999,acc:new i.Vector(0,0),opos:{x:t.x,y:t.y},armor:{type:6,value:1},resources:(0,s.createDefaultResources)(0,22)}),c)}}.apply(t,a),void 0===n||(e.exports=n)},2513:(e,t,r)=>{var a,n;a=[r,t,r(2093)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLineOfSight=void 0,t.getLineOfSight=function(e,t){return 0===(0,r.getQuadTreesObj)().queryRay([4,11,22,23],e,t.pos).filter((function(e){return 22===e.type||e.radius>t.radius})).length}}.apply(t,a),void 0===n||(e.exports=n)},2889:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(484),r(9262),r(7185),r(737),r(2093),r(4359),r(2513)],n=function(e,t,r,a,n,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetTargetBehaviourHashes=t.getBaseTargetArrays=void 0,i=o(i),t.getBaseTargetArrays=function(e){if(!(0,s.getQuadTreesObj)().All)return[];var t=(0,i.default)(e);return t&&t.inSafeZone?[0,23,45,50,2]:[0,23,45,50,1,44,2]};var A={},c={},d={};t.resetTargetBehaviourHashes=function(){A={},c={},d={}};var p=(0,r.rect_pool_pop)(0,0,0,0),f=(0,a.vec_pool_pop)(0,0),h=(0,a.vec_pool_pop)(0,0);t.default=function(e,t,a,o,i,v){void 0===i&&(i=2500),void 0===v&&(v=[]);var g=(0,s.getQuadTreesObj)(),y=null,m=A[t.guid],_=c[t.guid];if(p.update(a.x-200,a.y-200,400,400),t.fleeDangerMS>0){if(t.fleeDangerMS-=e.stepMS,!(t.fleeDangerMS<0)){var x=d[t.guid];if(x)return t.restPos=x,t.preyPos=null,{target:null,targetIsIM:!1,targetPos:x};h.set(7500,0),h.setAngle(t.fleeDirection),f.set(a.x+h.x,a.y+h.y);var S=d[t.guid]=f.clone();return t.restPos=S,t.preyPos=null,(0,n.distanceBetweenVectors)(S,t.pos)<1700&&(t.fleeDangerMS=0),{target:null,targetIsIM:!1,targetPos:S}}t.fleeDangerMS=0,delete d[t.guid]}if(t.prioritzeRestposMS>0&&(0===v.length||t.life<.3*t.oLife||0===g.queryTreesRect(v,p).length))return(0,n.distanceBetweenVectors)(a,t.restPos)<1e3&&(t.prioritzeRestposMS=0),t.preyPos=t.restPos.toPoint(),{target:null,targetIsIM:!1,targetPos:t.restPos};if(g.All){var T=(0,r.rect_pool_pop)(a.x-.5*i,a.y-.5*i,i,i);0===v.length&&v.push(45);var E=g.queryTreesRect(v,T);(0,r.rect_pool_put)(T);for(var M=Math.min(8,E.length),b=2*i,I=0;I<M;I++){var L=E[I];if(45===L.type||(0,u.posInAncient)(a)){if(45===L.type){if(L.inSafeZone)continue;if(L.abilities.active.cloak&&(0,n.distanceBetweenVectors)(L.pos,a)>L.radius+o+100)continue}if(45===L.type&&!(0,l.getLineOfSight)(a,L)){if(m){if((0,n.distanceBetweenVectors)(m,a)<1.3*o){m=A[t.guid]=null;break}}else _&&(m=A[t.guid]=_.clone());continue}m&&(m=A[t.guid]=null)}if(23===L.type){var P=L,w=(0,r.rect_pool_pop)(P.pos.x-1e3,P.pos.y-1e3,2e3,2e3),R=g.queryTreesRect([45],w).length;if((0,r.rect_pool_put)(w),0===R)continue}else if(23===L.type&&M>1&&!L.isCannon&&M>1)continue;if(L.life>0){var O=(0,n.distanceBetweenVectors)(L.pos,a);O<b&&(b=O,y=L)}}}var C=t.restPos,D=m||(y?y.pos.clone():C.clone());if(c[t.guid]=y&&y.pos.clone(),t.infected&&Math.random()>.98){var G=D.x+500*(Math.random()-.5),N=D.y+500*(Math.random()-.5);0===g.queryTreesVec([3],{x:G,y:N},700,700).length&&D.addXY(G,N)}var B={targetPos:D,target:m?null:y,targetIsIM:!m&&!!y};return t.preyPos=D.toPoint(),B}}.apply(t,a),void 0===n||(e.exports=n)},9014:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3501),r(6959),r(7289),r(5104),r(9752),r(2965),r(6843),r(371),r(7899)],n=function(e,t,r,a,n,o,i,s,A,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQuadTreesConstructionTimings=void 0,r=l(r),a=l(a),n=u(n),o=l(o),A=l(A);var p=0,f=0,h=0,v=0,g=0;t.getQuadTreesConstructionTimings=function(){var e=(0,n.getNumCollisions)(),t=(0,c.getMostIntensiveTree)();return{constructionItems:f,constructionTime:p,collideTime:v,resolveTime:g,cleanupTime:h,broadphase:e.broadPhase,calls:e.collisions,mostIntensiveTree:t.mostIntensiveTree,mostIntensiveTreeType:t.mostIntensiveTreetype,mostIntensAmounts:t.mostIntensAmounts}};var y=[],m={update:function(e){return performance.now(),p=(0,i.MeasureTimeSingle)((function(){f=(0,r.default)(e)})),v=(0,i.MeasureTimeSingle)((function(){y=(0,n.default)()})),g=(0,i.MeasureTimeSingle)((function(){(0,o.default)(e,y)})),d.IS_DEV,e.game.IS_PROCEDURAL&&1===(0,s.getProceduralEngineType)()&&(0,A.default)(e),e.IS_MULTIPLAYER&&!e.IS_SERVER||(h=(0,i.MeasureTimeSingle)((function(){(0,a.default)(e)}))),"intersections QuadTree"}};t.default=m}.apply(t,a),void 0===n||(e.exports=n)},3170:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(9191),r(5934),r(4831),r(7344),r(9262),r(3605),r(9254),r(5345),r(6265),r(6030),r(2485),r(8155)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n),l=o(l);var h=new s.Vector(0,0);t.default=function(e,t){t.SX,t.SY,t.SW,t.SH;var o=t.game;if(!t.game.levelEditor){var v=!0,g=t.IS_MULTIPLAYER&&t.IS_SERVER,y=o.screen.rectSS_400;switch(e.type){case 31:case 33:case 32:e.life<1&&(0,c.addForceExplosion)(t.game,e.pos.x,e.pos.y,70,1,null);break;case 11:case 4:var m=e;(0,r.removeAsteroid)(m,t),g&&t.game.removedAsteroids.push(m),t.game.proceduralDestroyedData.push(m);break;case 36:case 8:for(var _=e,x=8===e.type?e:(0,i.getSpacesnakeFromSegment)(_.guid),S=0;S<x.segments.length;S++)(T=x.segments[S]).remove=!0;if(!x.remove){if(!g)for((0,i.createPartsFromSpaceSnake)(t,x),S=0;S<x.segments.length;S++){var T=x.segments[S];if((0,A.createDust)(T.pos,T.radius,T.radius,t),x.infected)for(var E=Math.ceil(4*Math.random()),M=0;M<E;M++)t.game.parasites.push((0,u.createParasite)(T.pos.x+(Math.random()-.5)*T.radius,T.pos.y+(Math.random()-.5)*T.radius,32*Math.random()+8,t.WW*Math.random(),t.WH*Math.random()))}x.remove=!0}break;case 10:var b=e;if(!g){if(y.intersectsPoint(b.pos)){for(S=0;S<20;S++)(0,f.createFragmentBlack)(b.pos,t,[new s.Vector(0,0),new s.Vector(6+6*Math.random(),0),new s.Vector(0,6+6*Math.random())],b.vel.x*Math.random(),b.vel.y*Math.random(),Math.random());(0,A.createDust)(b.pos,b.radius,b.radius,t,b.vel.x*Math.random(),b.vel.y*Math.random())}if(b.infected){E=Math.ceil(Math.random()*b.radius*.5)+4;for(var I=0;I<E;I++)t.game.parasites.push((0,u.createParasite)(b.pos.x+(Math.random()-.5)*b.radius,b.pos.y+(Math.random()-.5)*b.radius,32*Math.random()+8,t.WW*Math.random(),t.WH*Math.random()))}for(S=0;S<b.legs.length;S++)for(var L=b.legs[S],P=0;P<L.bones.length;P++){var w=L.bones[P],R=w.length;h.set(R,0),h.setAngle(w.angle),(0,f.createFragmentBlack)(w.pos,t,[new s.Vector(0,-3),new s.Vector(0,3),new s.Vector(R,0)],b.vel.x*Math.random(),b.vel.y*Math.random(),w.angle)}}break;case 9:if(!g){var O=e;if(y.intersectsPoint(O.pos)){var C=3*O.radius,D=new s.Vector(0,0);for(S=0;S<C;S++)D.setLength(Math.random()*O.radius*.7),D.setAngle(Math.random()*Math.PI*2),(0,f.createFragmentBlack)({x:O.pos.x+D.x,y:O.pos.y+D.y},t,[new s.Vector(0,-6),new s.Vector(3*Math.random()+5,0),new s.Vector(0,4*Math.random()+4)],O.vel.x*Math.random(),O.vel.y*Math.random(),Math.random()*Math.PI*2);for(S=0;S<O.tentacles.length;S++){var G=O.tentacles[S];for(P=0;P<G.arm.length;P++){var N=G.arm[P];N.centerX;for(var B=0;B<3;B++)(0,f.createFragmentBlack)({x:N.centerX+O.pos.x+(Math.random()-5),y:N.centerY+O.pos.y+(Math.random()-5)},t,[new s.Vector(0,-10),new s.Vector(0,0),new s.Vector(Math.min(9,N.getLength()),0)],O.vel.x*Math.random(),O.vel.y*Math.random(),Math.random()*Math.PI*2)}}}if(O.infected){E=Math.ceil(Math.random()*O.radius*.25)+9;for(var F=0;F<E;F++)t.game.parasites.push((0,u.createParasite)(O.pos.x+(Math.random()-.5)*O.radius,O.pos.y+(Math.random()-.5)*O.radius,32*Math.random()+8,t.WW*Math.random(),t.WH*Math.random()))}}break;case 23:(0,c.addForceExplosion)(t.game,e.pos.x,e.pos.y,510,4,null),g||((0,n.default)(e,t,0),(0,A.createDust)(e.pos,e.radius,e.radius,t)),e.remove=!0,t.game.proceduralDestroyedData.push(e);break;case 0:var V=e;if(!g){y.intersectsPoint(V.pos)&&((0,p.createFragmentsFromDestroyer)(t,V),(0,A.createDust)(V.pos,.4*V.radius,1,t,V.vel.x,V.vel.y));var k=200,X=function(e){var r=V.cannons[e];(0,d.scheduleOnce)(V.guid+"c"+e,(function(){(0,c.addForceExplosion)(t.game,r.pos.x+V.vel.x*(k+150*e)*.05,r.pos.y+V.vel.y*(k+150*e)*.05,90,4,null)}),k+150*e)};for(S=0;S<V.cannons.length;S++)X(S);(0,d.scheduleOnce)(V.guid+"H",(function(){(0,c.addForceExplosion)(t.game,V.pos.x,V.pos.y,510,8,null)}),k+150*V.cannons.length),(0,d.scheduleOnce)(V.guid+"m",(function(){(0,c.addForceExplosion)(t.game,V.comp[0].vertex[0].x,V.comp[0].vertex[0].y,510,8,null)}),1600)}break;case 45:case 50:case 2:case 1:var H=e;(0,c.addForceExplosion)(t.game,e.pos.x,e.pos.y,90,2,null);var U=(0,a.GetPlayerByGuidOrNull)(H.killedByGuid,t);g||y.intersectsPoint(H.pos)&&((0,l.default)(H,t),(0,p.createFragmentsFromDestroyer)(t,H)),U?(U.kills++,g&&t.game.networkMessages.push({msg:((U.name||"UNKNOWN")+" KILLED "+(H.name||"UNKNOWN")).toUpperCase(),level:1})):g&&t.game.networkMessages.push({msg:(H.name||"UNKNOWN")+" SACRIFICED HIMSELF",level:1}),g&&t.game.removedShips.push(H),H.deaths++;break;case 44:(0,c.addForceExplosion)(t.game,e.pos.x,e.pos.y,90,2,null);break;case 25:(0,c.addForceExplosion)(t.game,e.pos.x,e.pos.y,750,16,e.damage);break;case 43:(0,c.addForceExplosion)(t.game,e.pos.x,e.pos.y,510,8,e.damage);break;case 42:(0,c.addForceExplosion)(t.game,e.pos.x,e.pos.y,250,4,e.damage);break;default:v=!1}v&&g&&t.game.networkMessages.push({msg:"remove",remove:{type:e.type,guid:e.guid},level:1})}}}.apply(t,a),void 0===n||(e.exports=n)},574:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QtEntitiesEnemiesList=t.QtEntitiesToString=t.ALL_QT_ENTITIES_ARR=void 0,t.ALL_QT_ENTITIES_ARR=[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24];var r=[23,4],a=[15,16,3,24],n=[12,13,22,19],o=t.ALL_QT_ENTITIES_ARR.filter((function(e){return!r.includes(e)&&!n.includes(e)})),i=o.filter((function(e){return!a.includes(e)}));t.QtEntitiesToString=function(e){switch(e){case 2:return"Asteroids";case 3:return"RockFormations";case 4:return"RockFormationSystems";case 5:return"Enemies";case 6:return"Player";case 7:return"SpaceSnakes";case 8:return"Npcs";case 9:return"SpaceSquids";case 10:return"SpaceSquidsTentacles";case 11:return"Drones";case 12:return"Bullets";case 13:return"Rockets";case 14:return"Charges";case 15:return"SpacePorts";case 16:return"SpacePortCannons";case 17:return"SpaceSpiders";case 18:return"ProximityMines";case 19:return"SpaceMines";case 20:return"SpaceTurrets";case 21:return"Destroyers";case 22:return"Flames";case 23:return"Ancients";case 24:return"AncientBlocks";case 26:return"one way collision";default:return"unknown: "+e}},t.QtEntitiesEnemiesList=[5,7,17,9],function(e){for(var r=[],a=[],n=0;n<e.length;n++)for(var o=n;o<e.length;o++)r.push([e[n],e[o]]),a.push([(0,t.QtEntitiesToString)(e[n]),(0,t.QtEntitiesToString)(e[o])]);a.length}(i);var s=function(e,r){for(var a=[],n=[],o=0;o<e.length;o++)for(var i=0;i<r.length;i++)a.push([e[o],r[i]]),n.push([(0,t.QtEntitiesToString)(e[o]),(0,t.QtEntitiesToString)(r[i])]);n.length};s(a,i),s(n,o)}.apply(t,[r,t]),void 0===a||(e.exports=a)},3109:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(5714),r(9262),r(7185)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertMuscleSegmentsToLineImov=t.resetLinePoolIndexes=void 0;var i=[],s=0,u=0;t.resetLinePoolIndexes=function(){u=0},t.convertMuscleSegmentsToLineImov=function(e,t){var l=e.length,A=l-(s-u);if(A>0)for(var c=0;c<A;c++)i.push(o(o({},(0,r.setImovableDefaults)(null)),{life:1e6,guid:(0,n.getGuid)(),type:19,collType:10,pos:(0,a.vec_pool_pop)(0,0),vel:(0,a.vec_pool_pop)(0,0),radius:1,armor:null,line_length:-1,line_angle:-1,ownerGuid:-1})),s++;var d=t.x,p=t.y,f=[];for(c=0;c<l;c++){var h=i[c+u],v=e[c],g=v.getLength();h.pos.x=v.centerX+d,h.pos.y=v.centerY+p,h.radius=g,h.ownerGuid=v.ownerguid,h.sleepingAABB=!0,h.hasSlept=!0,h.line_angle=v.angle,h.line_length=g,f.push(h)}return u+=l,f}}.apply(t,a),void 0===n||(e.exports=n)},6959:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3170),r(2201),r(6265),r(6270)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanList=void 0,r=o(r),t.cleanList=function(e,t,r,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);var i=[],s=e.length,u=!!r;if(t.game.IS_PROCEDURAL,o)for(var l=0;l<s;l++)(A=e[l]).remove||A.life<1&&A?(n&&(0,a.pool_put)(A.type,A),u&&r(A,t)):i.push(A);else for(l=0;l<s;l++){var A;(A=e[l]).remove||A.life<1||!A.inTree?(n&&(0,a.pool_put)(A.type,A),u&&r(A,t)):i.push(A)}return i};var s=0;t.default=function(e){var a=e.game;e.WW,e.WH,s=performance.now();for(var o=0;o<a.spaceSnake.length;o++){var u=a.spaceSnake[o];u.segments=(0,t.cleanList)(u.segments,e,r.default)}for(a.spaceSnake=(0,t.cleanList)(a.spaceSnake,e,r.default,!1,!0),a.asteroids=(0,t.cleanList)(a.asteroids,e,r.default),a.rockFormations=(0,t.cleanList)(a.rockFormations,e,r.default),o=0;o<a.spacePorts.length;o++){var l=a.spacePorts[o];if(l.cannons=(0,t.cleanList)(l.cannons,e,r.default),l.centerNoneCannon.remove){if((0,i.__LifeFixedValueSet)(l,0),l.cannons.length>0){if(Math.random()>.75){var A=l.cannons.pop();A.remove=!0,(0,r.default)(A,e)}}else l.cannons=[],l.remove=!0,a.spacePorts.splice(o,1),(0,n.addForceExplosion)(a,l.pos.x,l.pos.y,250,4,null),a.IS_PROCEDURAL&&a.proceduralRemovalData.push(l);break}}a.bullets=(0,t.cleanList)(a.bullets,e,null,!0),a.rockets=(0,t.cleanList)(a.rockets,e,r.default),a.drones=(0,t.cleanList)(a.drones,e,r.default),a.player=(0,t.cleanList)(a.player,e,r.default,!1,!0),a.npcs=(0,t.cleanList)(a.npcs,e,r.default),a.spaceSquids=(0,t.cleanList)(a.spaceSquids,e,r.default),a.spaceSpiders=(0,t.cleanList)(a.spaceSpiders,e,r.default),a.enemies=(0,t.cleanList)(a.enemies,e,r.default),a.charges=(0,t.cleanList)(a.charges,e,r.default),a.proximityMines=(0,t.cleanList)(a.proximityMines,e,r.default),a.spaceMines=(0,t.cleanList)(a.spaceMines,e,r.default),a.spaceTurrets=(0,t.cleanList)(a.spaceTurrets,e,r.default),a.destroyers=(0,t.cleanList)(a.destroyers,e,r.default),a.flames=(0,t.cleanList)(a.flames,e),s=performance.now()-s}}.apply(t,a),void 0===n||(e.exports=n)},6843:(e,t,r)=>{var a,n;a=[r,t,r(2201)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t,a){void 0===t&&(t=!1),void 0===a&&(a=null);for(var n=[],o=e.length,i=0;i<o;i++){var s=e[i];s.removeProcedural?t&&(0,r.pool_put)(s.type,s):n.push(s)}return n},n=0;t.default=function(e){var t=e.game;n=performance.now(),t.spaceSnake=a(t.spaceSnake),t.asteroids=a(t.asteroids),t.rockFormations=a(t.rockFormations),t.rockFormationSystemRadius=a(t.rockFormationSystemRadius),t.spacePorts=a(t.spacePorts);for(var r=0;r<t.spacePorts.length;r++){var o=t.spacePorts[r];o.cannons=a(o.cannons)}t.bullets=a(t.bullets,!0),t.rockets=a(t.rockets),t.npcs=a(t.npcs),t.spaceSquids=a(t.spaceSquids),t.spaceSpiders=a(t.spaceSpiders),t.enemies=a(t.enemies),t.charges=a(t.charges),t.proximityMines=a(t.proximityMines),t.spaceMines=a(t.spaceMines),t.minefields=a(t.minefields),t.spaceTurrets=a(t.spaceTurrets),t.destroyers=a(t.destroyers),t.flames=a(t.flames),t.ancientBlocks=a(t.ancientBlocks),t.ancients=a(t.ancients),n=performance.now()-n}}.apply(t,a),void 0===n||(e.exports=n)},4340:(e,t,r)=>{var a,n;a=[r,t,r(484),r(3109)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateEntityList=t.getEntityList=t.getAllSpacePortCannonsCached=t.getAllSpaceSnakeSegmentsCached=void 0;var n=[],o=[];t.getAllSpaceSnakeSegmentsCached=function(e){if(n.length>0)return n;for(var t=[],r=e.length,a=0;a<r;a++)for(var o=e[a].segments,i=o.length,s=0;s<i;s++){var u=o[s];t.push(u)}return n=t,t},t.getAllSpacePortCannonsCached=function(e){if(o.length>0)return o;for(var t=[],r=e.length,a=0;a<r;a++)for(var n=e[a].cannons,i=n.length,s=0;s<i;s++){var u=n[s];t.push(u)}return o=t,t};var i=12,s=[];s[0]={type:89,list:[],preCalculateBounds:!1,AABB_VELOCITY_BASED:!0,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!0},s[1]={type:89,list:[],preCalculateBounds:!1,AABB_VELOCITY_BASED:!0,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!0},s[2]={type:4,list:[],preCalculateBounds:!1,AABB_VELOCITY_BASED:!0,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!1},s[3]={type:11,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!0},s[4]={type:7,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!0},s[5]={type:1,list:[],preCalculateBounds:!1,AABB_VELOCITY_BASED:!0,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!1},s[6]={type:45,list:[],preCalculateBounds:!1,AABB_VELOCITY_BASED:!0,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!1},s[8]={type:2,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!1},s[7]={type:36,list:[],preCalculateBounds:!1,AABB_VELOCITY_BASED:!1,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:3,largeProceduralBounds:!0},s[9]={type:9,list:[],preCalculateBounds:!1,AABB_VELOCITY_BASED:!1,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!0},s[11]={type:50,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!0,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!1},s[13]={type:31,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!0,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!1},s[12]={type:26,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!0,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!1},s[14]={type:25,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!1},s[15]={type:3,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!0},s[16]={type:23,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!0},s[17]={type:10,list:[],preCalculateBounds:!1,AABB_VELOCITY_BASED:!1,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!0},s[18]={type:42,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!1},s[19]={type:43,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!0,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!1},s[20]={type:44,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!0,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!1},s[21]={type:0,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!0},s[22]={type:27,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!0,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!1},s[23]={type:6,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!0},s[25]={type:17,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!0};var u=-1;s[24]={type:22,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:(0,r.rect_pool_pop)(0,0,0,0),cap:5,maxDepth:i,largeProceduralBounds:!0,keepEvaluator:function(e){var t=e.game.ancients;if(1===t.length){var r=t[0];if(r.guid===u)return!0;u=r.guid}return!1}},t.getEntityList=function(){return s},t.updateEntityList=function(e){var r=e.game;n=[],o=[];var i=r.asteroids,u=r.rockFormations,l=r.rockFormationSystemRadius,A=r.enemies,c=r.player,d=r.npcs,p=(0,t.getAllSpaceSnakeSegmentsCached)(r.spaceSnake),f=r.bullets,h=r.rockets,v=r.drones,g=r.charges,y=r.spacePorts,m=r.spaceSpiders,_=(0,t.getAllSpacePortCannonsCached)(r.spacePorts),x=r.spaceSquids,S=function(e,t){(0,a.resetLinePoolIndexes)();for(var r=e.length,n=[],o=0;o<r;o++){var i=e[o];if(t.game.screen.rectSS_1000.intersectsIM(i))for(var s=i.pos,u=0;u<i.tentacles.length;u++){var l=i.tentacles[u];n.push.apply(n,(0,a.convertMuscleSegmentsToLineImov)(l.arm,s))}}return n}(x,e),T=r.proximityMines,E=r.spaceMines,M=r.spaceTurrets,b=r.destroyers,I=r.flames,L=r.ancients,P=r.ancientBlocks,w=r.minefields;return s[0].list=function(e){for(var t=[],r=e.length,a=0;a<r;a++)for(var n=e[a],o=n.length,i=0;i<o;i++)t.push(n[i]);return t}([i,u,l,A,c,d,p,x,S,v,h,f,g,y,_,m,T,E,M,b,I,L,P,w]),s[2].list=i,s[3].list=u,s[4].list=l,s[5].list=A,s[6].list=c,s[8].list=d,s[7].list=p,s[9].list=x,s[11].list=v,s[13].list=h,s[12].list=f,s[14].list=g,s[15].list=y,s[16].list=_,s[17].list=m,s[18].list=T,s[19].list=E,s[20].list=M,s[21].list=b,s[22].list=I,s[23].list=L,s[24].list=P,s[25].list=w,s}}.apply(t,a),void 0===n||(e.exports=n)},3501:(e,t,r)=>{var a,n;a=[r,t,r(4340),r(2093),r(484),r(9752),r(2261)],n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=e.step,s=(0,r.updateEntityList)(e),u=(0,a.___getQtreeList)(),l=e.game.IS_PROCEDURAL?e.game.procedural.treeBounds||e.game.proceduralBounds:new n.Rectangle(0,0,e.WW,e.WH),A=u[0],c=((0,i.normalize)((0,o.MeasureTimeFn)((function(){A.setup(l,12,89,7,!0)})),"qtf32 setup/init",50,1),s[0].list),d=c.length,p=0;p<d;p++){var f=c[p];f.inTree=!0,!1===A.insert(f,t)&&(f.inTree=!1)}return A.references.length}}.apply(t,a),void 0===n||(e.exports=n)},6250:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(9656),r(5751),r(314),r(8729),r(9030),r(7542),r(7108),r(4836),r(4633),r(1917),r(8309),r(5185),r(2531),r(5117),r(5959),r(4016),r(202),r(7839),r(6993),r(7596),r(9258)],n=function(e,t,r,a,n,s,u,l,A,c,d,p,f,h,v,g,y,m,_,x,S,T,E){"use strict";var M,b,I;Object.defineProperty(t,"__esModule",{value:!0}),t.ignoredIntersections=t.getIntersectionData=void 0,r=i(r),a=i(a),n=i(n),s=i(s),u=i(u),l=i(l),A=i(A),c=i(c),d=i(d),p=i(p),f=i(f),h=i(h),v=i(v),g=i(g),y=i(y),m=i(m),_=i(_),S=i(S),T=i(T),E=i(E);var L=function(e,t,r){return void 0===r&&(r=[]),t.filter((function(e){return r.indexOf(e)<0})).map((function(t){return{type:t,handler:e}}))},P=((M={})[2]=o(o([],L(r.default,[2,16]),!0),L(g.default,[3]),!0),M[5]=o([],L(r.default,[2,15,16,5,3,7]),!0),(b={})[2]=[{type:2,handler:r.default},{type:16,handler:r.default},{type:3,handler:g.default},{type:24,handler:r.default}],b[5]=[{type:2,handler:r.default},{type:15,handler:r.default},{type:16,handler:r.default},{type:5,handler:r.default},{type:3,handler:r.default},{type:24,handler:r.default},{type:8,handler:r.default},{type:14,handler:r.default},{type:7,handler:r.default}],b[9]=[{type:2,handler:r.default},{type:15,handler:a.default},{type:9,handler:r.default},{type:5,handler:r.default},{type:3,handler:r.default},{type:24,handler:r.default}],b[10]=o([],L(E.default,[22,12,13]),!0),b[17]=[{type:2,handler:r.default},{type:15,handler:a.default},{type:16,handler:r.default},{type:9,handler:r.default},{type:5,handler:r.default},{type:17,handler:r.default},{type:6,handler:n.default},{type:11,handler:n.default},{type:8,handler:n.default},{type:3,handler:r.default},{type:24,handler:r.default},{type:7,handler:r.default}],b[7]=[{type:2,handler:r.default},{type:15,handler:a.default},{type:3,handler:r.default},{type:24,handler:r.default},{type:6,handler:r.default},{type:16,handler:r.default},{type:21,handler:r.default}],b[8]=[{type:2,handler:r.default},{type:8,handler:r.default},{type:16,handler:r.default},{type:3,handler:r.default},{type:24,handler:r.default},{type:7,handler:r.default}],b[6]=[{type:3,handler:r.default},{type:24,handler:r.default},{type:8,handler:s.default},{type:5,handler:s.default},{type:2,handler:u.default},{type:6,handler:s.default},{type:16,handler:r.default},{type:15,handler:l.default}],b[13]=[{type:6,handler:A.default},{type:5,handler:A.default},{type:8,handler:A.default},{type:7,handler:c.default},{type:9,handler:d.default},{type:17,handler:d.default},{type:21,handler:A.default},{type:11,handler:A.default},{type:2,handler:p.default},{type:3,handler:p.default},{type:24,handler:p.default},{type:15,handler:T.default},{type:16,handler:p.default}],b[11]=[{type:16,handler:r.default},{type:2,handler:r.default},{type:11,handler:r.default},{type:6,handler:r.default},{type:5,handler:r.default},{type:8,handler:r.default},{type:3,handler:r.default},{type:24,handler:r.default},{type:7,handler:r.default}],b[12]=[{type:15,handler:T.default},{type:5,handler:f.default},{type:2,handler:h.default},{type:3,handler:h.default},{type:24,handler:h.default},{type:7,handler:v.default},{type:9,handler:d.default},{type:17,handler:d.default},{type:6,handler:f.default},{type:21,handler:f.default},{type:11,handler:f.default},{type:8,handler:f.default},{type:16,handler:h.default},{type:18,handler:_.default},{type:20,handler:_.default}],b[14]=[{type:2,handler:r.default},{type:3,handler:r.default},{type:24,handler:r.default},{type:6,handler:r.default},{type:11,handler:r.default},{type:8,handler:r.default},{type:16,handler:r.default},{type:7,handler:r.default},{type:17,handler:r.default},{type:9,handler:r.default},{type:21,handler:r.default}],b[18]=[{type:18,handler:y.default},{type:2,handler:y.default},{type:3,handler:y.default},{type:24,handler:y.default},{type:6,handler:y.default},{type:11,handler:y.default},{type:8,handler:y.default},{type:16,handler:y.default},{type:5,handler:y.default},{type:7,handler:y.default},{type:9,handler:y.default},{type:17,handler:y.default},{type:21,handler:y.default}],b[19]=[{type:19,handler:m.default},{type:18,handler:m.default},{type:2,handler:m.default},{type:3,handler:m.default},{type:24,handler:m.default},{type:6,handler:m.default},{type:11,handler:m.default},{type:8,handler:m.default},{type:16,handler:m.default},{type:5,handler:m.default},{type:7,handler:m.default},{type:9,handler:m.default},{type:17,handler:m.default},{type:12,handler:m.default},{type:20,handler:m.default},{type:21,handler:m.default}],b[20]=[{type:18,handler:r.default},{type:20,handler:r.default},{type:2,handler:r.default},{type:3,handler:r.default},{type:24,handler:r.default},{type:6,handler:r.default},{type:11,handler:r.default},{type:8,handler:r.default},{type:5,handler:r.default},{type:16,handler:r.default},{type:7,handler:r.default},{type:17,handler:r.default},{type:9,handler:r.default},{type:21,handler:r.default}],b[21]=[{type:21,handler:r.default},{type:6,handler:r.default},{type:3,handler:r.default},{type:24,handler:r.default},{type:8,handler:r.default},{type:5,handler:r.default},{type:11,handler:r.default},{type:2,handler:r.default},{type:16,handler:r.default},{type:9,handler:r.default},{type:17,handler:r.default}],b[22]=[{type:5,handler:S.default},{type:2,handler:S.default},{type:3,handler:S.default},{type:24,handler:S.default},{type:7,handler:S.default},{type:9,handler:S.default},{type:17,handler:S.default},{type:6,handler:S.default},{type:21,handler:S.default},{type:11,handler:S.default},{type:8,handler:S.default},{type:16,handler:S.default},{type:18,handler:S.default},{type:20,handler:S.default}],b);!function(){var e=0;for(var t in P)e+=P[t].length;console.log("intersectionData len:: "+e)}(),t.getIntersectionData=function(){return P},t.ignoredIntersections=((I={})[3]=[15,3,16,24],I[15]=[15,16,24,22,20,19,18,2,8,9],I[16]=[16],I[24]=[16],I[12]=[12,13,14,22],I[13]=[13],I[7]=[7],I),(0,x.startupTests)()}.apply(t,a),void 0===n||(e.exports=n)},7289:(e,t,r)=>{var a,n;a=[r,t,r(6250),r(2093)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNumCollisions=void 0;var n=0,o=0;t.getNumCollisions=function(){var e=n,t=o;return n=0,o=0,{collisions:e,broadPhase:t}};var i=(0,r.getIntersectionData)(),s={},u=function(e){var t=i[e],r={};t.forEach((function(e){return r[e.type]=e.handler})),s[e]=r};for(var l in i)u(l);t.default=function(){for(var e=(0,a.___getQtreeList)()[0],t=e.intersectTree(void 0),r=e.references,i=[],u=0;u<t.length;u++)for(var l=t[u],A=r[l[0]],c=1;c<l.length;c++){var d=r[l[c]];if(A.guid!==d.guid&&!A.remove&&!d.remove){var p=!1,f=s[A.collType];if(f&&(h=f[d.collType])&&(p=!0,i.push({a:A,b:d,handler:h,AABB_VEL:!0})),!p){var h,v=s[d.collType];v&&(h=v[A.collType])&&(p=!0,i.push({b:A,a:d,handler:h,AABB_VEL:!0}))}o++,p&&n++}}return i}}.apply(t,a),void 0===n||(e.exports=n)},5104:(e,t,r)=>{var a,n;a=[r,t,r(2093)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableResponseDebug=t.RESPONSE_DEBUG=t.getImIntersections=void 0;var a=[];t.getImIntersections=function(){return a},t.default=function(e,t){var n=t.length;(0,r.___getQtreeList)()[0].references,a=[];for(var o=0;o<n;o++){var i=t[o];i.handler(i.a,i.b,e)}},t.RESPONSE_DEBUG=[],t.enableResponseDebug=function(){}}.apply(t,a),void 0===n||(e.exports=n)},5160:(e,t,r)=>{var a,n;a=[r,t,r(9328),r(484),r(3863),r(7839),r(1477),r(9262)],n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.quadTreePointTest=void 0,t.quadTreePointTest=function(){var e=(0,a.rect_pool_pop)(0,0,1e3,100);u(new r.QuadTreeInt32Point(e,5,26),e),u(new n.QuadTreeUint16Point(e,5,26),e),u(new i.QuadTreeFastPoint32(e,5,26),e),(0,a.rect_pool_put)(e)};var u=function(e,t){for(var r=!0,a=0;a<998;a++){var n={pos:new s.Vector(.1*a,20),vel:new s.Vector(0,0)};e.insert(n)||(r=!1,(0,o.TestLogger)("qt point "+e.getRangeType()+" not inserted",!1),(0,o.TestLogger)("X:"+n.pos.x+" Y:"+n.pos.y,!1))}r&&(0,o.TestLogger)("tree insertion "+e.getRangeType(),!0);var i=e.queryInt(t).length;998!==i?((0,o.TestLogger)("qt point query "+e.getRangeType(),!1),(0,o.TestLogger)(" expected 998",!1),(0,o.TestLogger)(" actual "+i,!1),(0,o.TestLogger)(" refs "+e.references.length,!1)):(0,o.TestLogger)("tree point query rect "+e.getRangeType(),!0)}}.apply(t,a),void 0===n||(e.exports=n)},8232:(e,t,r)=>{var a,n;a=[r,t,r(1638),r(9262)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bulletCircleTests=void 0,t.bulletCircleTests=function(){var e=new a.Vector(100,100),t=new a.Vector(0,0),n=new a.Vector(200,200);(0,r.LineInterceptCircle)(t,n,e,50)}}.apply(t,a),void 0===n||(e.exports=n)},8188:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(6812),r(2068),r(7839)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collisiontests=void 0,t.collisiontests=function(){var e=(0,a.createSingleAsteroid)(20,{x:-100,y:100},{x:240,y:1.1},{life:1e4,sides:30}),t=(0,a.createSingleAsteroid)(100,{x:100,y:100},{x:1,y:1},{life:1e4});(0,n.PositionUpdaterAutoSleep)(e,1),(0,n.PositionUpdaterAutoSleep)(t,1),(0,r.resolve)(1,e,t)?(0,o.TestLogger)("fast impact test",!0):((0,o.TestLogger)("fast impact test",!1),(0,r.resolve)(1,e,t));var i=(0,a.createSingleAsteroid)(10,{x:200,y:0},{x:0,y:0}),s=(0,a.createSingleAsteroid)(10,{x:190,y:0},{x:8,y:0});(0,n.PositionUpdaterAutoSleep)(i,1),(0,n.PositionUpdaterAutoSleep)(s,1),(0,r.resolve)(1,i,s)?(0,o.TestLogger)("slow impact test",!0):(0,o.TestLogger)("slow impact test",!1)}}.apply(t,a),void 0===n||(e.exports=n)},6228:(e,t,r)=>{var a,n;a=[r,t,r(7899)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.functionInlinerPerformance=void 0;var a=function(){for(var e,t,r,a,n=0,o=performance.now(),i=0;i<2e5;i++)n+=(t=2+i,a=6-i,(e=1+i)>(r=5+i)||e+(3-i)<r||t>a||t+(4-i)<a?0:1);return console.log(n),performance.now()-o},n=function(){for(var e,t,r,a,n=0,o=performance.now(),i=0;i<8e5;i++)n+=(t=2+i,a=6-i,(e=1+i)>(r=5+i)||e+(3-i)<r||t>a||t+(4-i)<a?0:1);return console.log(n),performance.now()-o},o=function(e,t){void 0===t&&(t=5);for(var r=0,a=0;a<5;a++)r+=e();return r/t};t.functionInlinerPerformance=function(){o(a),o(n);var e=0,t=0;e+=o(a),t+=o(n),(e+=o(a))>(t+=o(n))?console.warn("inline slower than norm ~ ",(t/e*100).toFixed(0)+" % "):console.log("inline faster than norm ~ ",(t/e*100).toFixed(0)+" %"),console.log(":: norm:",t,"inline:",e)},r.IS_NODE||(window.inlineperformance=t.functionInlinerPerformance)}.apply(t,a),void 0===n||(e.exports=n)},1540:(e,t,r)=>{var a,n;a=[r,t,r(574),r(7839),r(6250)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifier=void 0,t.verifier=function(e){var t=function(e,t,n){var o="Intersection "+e+": "+t.split("_").map((function(e){return(0,r.QtEntitiesToString)(parseInt(e,10))})).join(" > ");if(n)throw o;(0,a.TestLogger)(o,!1)},o={},i={},s=function(r){i[r]=r+"",e[r].map((function(e){i[e.type]=e.type+"";var a=r+"_"+e.type,n=e.type+"_"+r;o[a]&&t("duplicate",a,!0),o[n]&&t("duplicate",n,!0),o[a]=!0,o[n]=!0}))};for(var u in e)s(u);(0,a.TestLogger)("IntersectionData.",!0);var l,A,c,d,p,f,h={};for(var u in i)for(var v in i)if((void 0===o[u+"_"+v]||void 0===o[v+"_"+u])&&!h[u+v]&&(h[u+v]=!0,h[v+u]=!0,f=v,10===parseInt(u,10)||10===parseInt(f,10)||(l=v,A=void 0,c=void 0,void 0,void 0,d=parseInt(u,10),p=parseInt(l,10),(null===(A=null===n.ignoredIntersections||void 0===n.ignoredIntersections?void 0:n.ignoredIntersections[d])||void 0===A?void 0:A.includes(p))||(null===(c=null===n.ignoredIntersections||void 0===n.ignoredIntersections?void 0:n.ignoredIntersections[p])||void 0===c?void 0:c.includes(d)))))continue}}.apply(t,a),void 0===n||(e.exports=n)},9431:(e,t,r)=>{var a,n;a=[r,t,r(731),r(484)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intersectionOverlapTest=function(){var e=(0,a.rect_pool_pop)(0,0,1e3,1e3),t=new r.QuadTreeFastRect32(e,2,0,4);(0,a.rect_pool_put)(e);for(var n=function(e){return function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296}}(76),o=0;o<100;o++)t.insert({collType:0,pos:{x:10+800*n(),y:10+800*n()},vel:{x:0,y:0},radius:5,sleepingAABB:!1,type:0},0);t.insert({collType:1,pos:{x:400,y:400},vel:{x:0,y:0},radius:300,sleepingAABB:!1,type:1},0);var i=(0,a.rect_pool_pop)(200,200,500,500),s=t.queryInt(i);(0,a.rect_pool_put)(i);var u=s.filter((function(e){return 1===e.type}));console.log("bases",u),console.log("TODO: verify intersection multiple overlaps test")}}.apply(t,a),void 0===n||(e.exports=n)},9653:(e,t,r)=>{var a,n;a=[r,t,r(3863),r(9328),r(7839)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rectIntersectionTests=void 0,t.rectIntersectionTests=function(){o(0,0,100,100,!0),o(0,100,100,100,!0),o(100,0,100,100,!0),o(100,100,100,100,!0),o(1.1,2.9,100,100,!0),o(.1,.9,100,100,!0),o(90.80000000000001,20,100,100,!0),o(-1,0,100,100,!1),o(101,0,100,100,!1),i(0,0,100,100,!0),i(0,100,100,100,!0),i(100,0,100,100,!0),i(100,100,100,100,!0),i(1.1,2.9,100,100,!0),i(.1,.9,100,100,!0),i(90.80000000000001,20,100,100,!0),i(-1,0,100,100,!1),i(101,0,100,100,!1)};var o=function(e,t,a,o,i,s,u){void 0===s&&(s=0),void 0===u&&(u=0);var l=[0,0,a,o],A=new Uint16Array(l);(0,r.intersectsUintArr16XY)(A,e,t)!==i?((0,n.TestLogger)("intersectsUintArr16XY (uint16)",!1),(0,n.TestLogger)(l.join(",")+" rect (uint16)",!1),(0,n.TestLogger)([e,t].join(",")+" item (uint16)",!1)):(0,n.TestLogger)("rect intersection (uint16)",!0)},i=function(e,t,r,o,i,s,u){void 0===s&&(s=0),void 0===u&&(u=0);var l=[0,0,r,o],A=new Int32Array(l);(0,a.intersectsInt32ArrXY)(A,e,t)!==i?((0,n.TestLogger)("intersectsInt32ArrXY (int32)",!1),(0,n.TestLogger)(l.join(",")+" rect (int32)",!1),(0,n.TestLogger)([e,t].join(",")+" item (int32)",!1)):(0,n.TestLogger)("rect intersection (int32)",!0)}}.apply(t,a),void 0===n||(e.exports=n)},5491:(e,t,r)=>{var a,n;a=[r,t,r(7839),r(6763),r(4753)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.seedGenTests=void 0;var o=[],i=function(e){var t=(0,n.getSeedFromINTEGERS)(e.x,e.y),a=(0,n.getCoordFromSeed_positive_only)(t);a.x===e.x&&a.y===e.y?((0,r.TestLogger)("seed ok X: => ",!0),(0,r.TestLogger)("seed ok Y: => ",!0)):((0,r.TestLogger)("seed ok X:"+e.x+" => "+a.x,!1),(0,r.TestLogger)("seed ok Y:"+e.y+" => "+a.y,!1))};t.seedGenTests=function(){!function(){for(var e=0;e<100;e++){var t=(0,a.mulberry32)(e*e);o.push({x:Math.round(e*e*e*(t()-.5)),y:Math.round(e*e*e*(t()-.5))})}}();for(var e=0;e<o.length;e++){var t=o[e];i(t)}}}.apply(t,a),void 0===n||(e.exports=n)},4705:(e,t,r)=>{var a,n;a=[r,t,r(731),r(6036),r(484),r(7839),r(8140),r(2800)],n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sleepingAABBStest=function(){for(var e=[!0,!1],t=(a.QuadTreeInt32,[r.QuadTreeFastRect32]),i=0;i<e.length;i++)for(var s=e[i],u=0;u<t.length;u++){for(var l=new(0,t[u])(new n.Rectangle(0,0,100,100),2,0,4,!1),A=0;A<3;A++)l.insert({collType:0,pos:{x:10+2*A,y:10+2*A},vel:{x:0,y:0},radius:5,sleepingAABB:s,type:0},0);l.insert({collType:0,pos:{x:30,y:30},vel:{x:0,y:0},radius:30,sleepingAABB:s,type:0},0),l.insert({collType:0,pos:{x:12,y:16},vel:{x:0,y:0},radius:5,sleepingAABB:!1,type:0},0),l.insert({collType:0,pos:{x:14,y:18},vel:{x:0,y:0},radius:5,sleepingAABB:!1,type:0},0);var c=l.intersectTree(l).sort((function(e,t){return e.length===t.length?0:e.length>t.length?-1:1})),d=!1;s?(d="[[4,0,1,2,3],[5,0,1,2,3],[4,5]]"===JSON.stringify(c),(0,o.TestLogger)("sleeping AABB",d),d||console.log("sleeping",c,JSON.stringify(c))):(d="[[0,1,2,3,4],[1,2,3,4],[2,3,4],[3,4],[0,5],[1,5],[2,5],[3,5],[4,5]]"===JSON.stringify(c),(0,o.TestLogger)("none sleeping AABB",d),d||console.log("not sleeping",c,JSON.stringify(c)))}}}.apply(t,a),void 0===n||(e.exports=n)},7839:(e,t,r)=>{var a,n;a=[r,t,r(1540),r(6250),r(5415),r(5160),r(9653),r(8232),r(8188),r(4077),r(5491),r(4077),r(9431),r(4705),r(6228)],n=function(e,t,r,a,n,o,i,s,u,l,A,c,d,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestLogger=t.startupTests=void 0,t.startupTests=function(){(0,A.seedGenTests)(),(0,s.bulletCircleTests)(),(0,r.verifier)((0,a.getIntersectionData)()),(0,n.velocityAABBtest)(),(0,i.rectIntersectionTests)(),(0,o.quadTreePointTest)(),(0,u.collisiontests)(),(0,d.intersectionOverlapTest)(),(0,p.sleepingAABBStest)(),(0,f.functionInlinerPerformance)(),v||(0,l.LOG_GL_CLEAR)()};var h="failed",v=!1;t.TestLogger=function(e,t){t?console.log(e+" : success"):(v=!0,console.error(e+" : "+h),(0,c.LOG_GL_FIXED_FORCED)(h,e))}}.apply(t,a),void 0===n||(e.exports=n)},8140:(e,t,r)=>{var a,n;a=[r,t,r(731),r(6036),r(484),r(7561),r(9262),r(2800),r(4590)],n=function(e,t,r,a,n,o,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawTreeRec=void 0,t.drawTreeRec=function(e,r,a,i,s,u,l,A){if(void 0===l&&(l=1),void 0===A&&(A=[]),e.children_length>0)e.children.map((function(e){return(0,t.drawTreeRec)(e,r,a,i,s,u,l,A)}));else for(var c=e.indexes_I_XYWH_S,d=0;d<c.length;d+=6){var p=c[d+1]*l,f=c[d+2]*l,h=c[d+3]*l,v=c[d+4]*l,g=c[d+5];(0,o.drawRectPoly)(new n.Rectangle(p,f,h,v),-s,-u,1===g?A:i,3)}(0,o.drawRectPoly)(new n.Rectangle(e.x*l,e.y*l,e.width*l,e.height*l),-s,-u,a,1)}}.apply(t,a),void 0===n||(e.exports=n)},3781:(e,t,r)=>{var a,n;a=[r,t,r(731),r(484),r(9752),r(9262),r(7899)],n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.treeTest=void 0;var s=1e5,u=1e5,l=new a.Rectangle(0,0,s,u),A=[],c=new r.QuadTreeFastRect32(l,10,-1,6,!0),d=new r.QuadTreeFastRect32(l,10,-1,6,!0),p=new r.QuadTreeFastRect32(l,10,-1,6,!0);t.treeTest=function(){for(var e=0;e<3e3;e++){var t={collType:1,pos:new o.Vector(Math.random()*s,Math.random()*u),radius:10+700*Math.random(),sleepingAABB:e<50,type:1,vel:e<50?new o.Vector(0,0):new o.Vector(20*(Math.random()-.5),20*(Math.random()-.5))};A.push(t)}setTimeout((function(){console.log("tree test started."),f(),setInterval(f,1e3)}),50)};var f=function(){i.IS_NODE&&console.clear(),function(){for(var e=0;e<3e3;e++){var t=A[e];l.intersectsPoint(t.pos)?(t.pos.x+=t.vel.x,t.pos.y+=t.vel.y):(t.pos.x=Math.random()*s,t.pos.y=Math.random()*u)}}(),c.reset(),d.reset(),p.reset(),console.log("iter insert, ",(0,n.MeasureTimeFn)((function(){for(var e=A.length,t=0;t<e;t++){var r=A[t];d.insertUnsafe(r,1)}d.logInserts("iter")}))),console.log("iter batched insert, ",(0,n.MeasureTimeFn)((function(){c.insertUnsafeBatched(A,1),c.logInserts("iterbatched")}))),console.log("insert, ",(0,n.MeasureTimeFn)((function(){for(var e=A.length,t=0;t<e;t++){var r=A[t];d.insert(r,1)}d.logInserts("std")}))),c.intersectTree(c),console.log("::"),console.log("::")}}.apply(t,a),void 0===n||(e.exports=n)},5415:(e,t,r)=>{var a,n;a=[r,t,r(484),r(7839),r(731),r(8140),r(2800)],n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.velocityAABBtest=void 0;var s=function(e){var t=[],r=[];(0,o.drawTreeRec)(e.root,e,t,r,100,100),(0,i.drawExternal)({polys:t}),(0,i.drawExternal)({polys:r,g:0,b:0})};t.velocityAABBtest=function(){for(var e=[n.QuadTreeFastRect32],t=0;t<e.length;t++){var o=e[t],u=(0,r.rect_pool_pop)(0,0,500,500),l=(0,r.rect_pool_pop)(0,0,500,500),A=(0,r.rect_pool_pop)(0,0,500,500),c=new o(l,5,26,5,!0),d=new o(A,5,26,5,!1);(0,r.rect_pool_put)(u),(0,r.rect_pool_put)(l),(0,r.rect_pool_put)(A);var p={pos:{x:220,y:100},vel:{x:0,y:0},radius:25,type:4,collType:2,sleepingAABB:!1};c.insert({pos:{x:270,y:100},vel:{x:100,y:0},radius:1,type:26,collType:12,sleepingAABB:!1},1),c.insert(p,1),d.insert({pos:{x:200,y:100},vel:{x:100,y:0},radius:1,type:26,collType:12,sleepingAABB:!1},1),d.insert(p,1);var f=c.intersectTree(c);console.log("swept result",t,f),1===f.length&&2===f[0].length?(0,a.TestLogger)("AABB (swept)"+c.getRangeType(),!0):((0,a.TestLogger)("AABB (swept)"+c.getRangeType(),!1),1===t&&(s(d),s(c),(0,i.drawExternal)({polys:[],halt:!0}))),d.intersectTree(d).length?(0,a.TestLogger)("AABB"+d.getRangeType(),!0):(0,a.TestLogger)("AABB"+d.getRangeType(),!1)}}}.apply(t,a),void 0===n||(e.exports=n)},5185:(e,t,r)=>{var a,n;a=[r,t,r(5081),r(9262),r(2261),r(1500),r(7899),r(7927),r(6265),r(6270)],n=function(e,t,r,a,n,o,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var A=new a.Vector(0,0);t.default=function(e,t,a){var c=(0,s.circleLineColl)(e,t,a);if((4===t.type||23===t.type||22===t.type||11===t.type)&&c.collided){if(e.remove)return;if(23===t.type&&29===e.type)return;var d=c.cp,p=26===e.type,f=e;if(23===t.type){var h=t,v=h.aggressionForGuidsHash[f.ownerGuid]||0;h.aggressionForGuidsHash[f.ownerGuid]=v+1,v>=20&&(h.weaponsActiveTimerMS=5e3),A.setFromVec(d),A.subtract(h.pos),A.mult(.8*Math.random()+.1),(0,n.rotateVector)(A,-h.angle,A),h.damages.push(A.clone()),h.damages.length>200&&h.damages.shift()}if((0,l.DamageItem2)(a,t,f),t.life<0){if(4===t.type&&p){var g=f.ownerGuid;(y=(0,o.findPlayerWithGuid)(a,g))&&(y.score+=(0,i.PLAYER_SCORE_REMOVED_ASTEROID)(t.radius))}a.game.eventMap[r.GAME_EVENT.EXPLOSION]={x:t.pos.x,y:t.pos.y,radius:t.radius}}else{var y;if(p)g=f.ownerGuid,(y=(0,o.findPlayerWithGuid)(a,g))&&(y.score+=i.PLAYER_SCORE_BULLET_HIT_ASTEROID);(0,u.addForceExplosion)(a.game,d.x,d.y,70,0,null),a.game.eventMap[r.GAME_EVENT.SPACE_BULLET_IMPACT]={x:d.x,y:d.y}}}}}.apply(t,a),void 0===n||(e.exports=n)},202:(e,t,r)=>{var a,n;a=[r,t,r(5081),r(7185),r(6265),r(6270)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){(0,a.coarse)(t,e)&&((0,o.DamageItem2)(i,t,e),(0,n.addForceExplosion)(i.game,e.pos.x-e.vel.x,e.pos.y-e.vel.y,30,0,null),i.game.eventMap[r.GAME_EVENT.SPACE_BULLET_IMPACT]={x:e.pos.x,y:e.pos.y})}}.apply(t,a),void 0===n||(e.exports=n)},6993:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(6270),r(7344),r(5345)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var s,u,l=(u=t,27===(s=e).type?s:u),A=function(e,t){return 27!==e.type?e:t}(e,t),c=l;if(36===A.type){var d=(0,n.getSpacesnakeFromSegment)(A.guid);if(d.guid===c.ownerGuid&&d.segments[d.segments.length-1].guid===A.guid)return}if(A.guid!==c.ownerGuid){var p=!1;switch(A.shape){case 0:default:p=(0,r.distanceBetweenVectors)(A.pos,l.pos)<A.radius;break;case 1:var f=A;p=(0,r.fine)(3,f.comp[0].vertex,l.pos)}if(p)if(c.damage&&(0===A.armor.type&&(0,o.createDust)(A.pos,1,2*A.radius,i,A.vel.x,A.vel.y),(0,a.DamageItem2)(i,A,l)),Math.random()>.9||l.life>20){l.pos.x-=l.vel.x*i.step,l.pos.y-=l.vel.y*i.step,c.collided=!0,c.damage=null;var h=Math.PI*(Math.random()>.5?1.2:-1.2);l.vel.setAngle(l.vel.getAngle()+h),l.vel.mult(.01)}else l.remove=!0}}}.apply(t,a),void 0===n||(e.exports=n)},9656:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(9262),r(7344)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),new a.Vector(0,0),t.default=function(e,t,a){if((0,r.resolve)(a.step,e,t)){if(36===e.type)11!==t.type&&22!==t.type||(o=(0,n.getSpacesnakeFromSegment)(e.guid)).tryToMoveAwayAfterStationaryAttackMs&&(o.tryToMoveAwayAfterStationaryAttackMs=0);else if(36===t.type){var o;11!==e.type&&22!==e.type||(o=(0,n.getSpacesnakeFromSegment)(t.guid)).tryToMoveAwayAfterStationaryAttackMs&&(o.tryToMoveAwayAfterStationaryAttackMs=0)}return!0}}}.apply(t,a),void 0===n||(e.exports=n)},314:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(5182)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if((0,r.resolve)(n.step,e,t))return(0,a.shift)(e,n.WW,n.WH),(0,a.shift)(t,n.WW,n.WH),e.vel.mult(.1),!0}}.apply(t,a),void 0===n||(e.exports=n)},9258:(e,t,r)=>{var a,n;a=[r,t,r(1330),r(6270),r(2273),r(4077)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var s=null,u=null;19===e.type?(s=e,u=t):19===t.type&&(s=t,u=e);var l=(0,n.getSpaceSquidFromGuid)(s.ownerGuid);(0,r.isProjectile)(u.type)&&9===l.type?(0,a.DamageItem2)(i,l,u):(0,o.LOG_GL_FIXED_FORCED)("handler mismatch "+(0,r.TypesToString)(e.type)+"<>"+(0,r.TypesToString)(t.type)+" isP: "+(0,r.isProjectile)(u.type)+" squidT: "+l.type,"squidarm",!0)}}.apply(t,a),void 0===n||(e.exports=n)},5475:(e,t,r)=>{var a,n;a=[r,t,r(1330),r(1500),r(4077),r(1330)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PredatorLevelUpgrade=t.getUpgradeLevel=void 0,t.getUpgradeLevel=function(e){return 0|e.level};var i=function(e,t){if((0,r.ShipLike)(t.type)||(0,o.PredatorLike)(t.type)||23===t.type){var a=(0,r.ShipLike)(e.type),n=(0,o.PredatorLike)(e.type),i=n?.3:1;a||n?(e.level<1?e.level+=1*i:e.level>2?e.level+=.2*i:e.level+=.4*i,e.life=Math.max(10,Math.min(1.1*e.life,60))*i):(e.life+=2,e.level+=.1),e.level>3&&(e.level=3)}},s=function(e,t,r){var n;switch(e.type){case 33:case 31:var o=e;n=(0,a.findShipLikeWithGuid)(t,o.ownerGuid,o.ownerType);break;case 26:o=e,n=(0,a.findShipLikeWithGuid)(t,o.ownerGuid,o.owenerType)}n&&i(n,r)};t.PredatorLevelUpgrade=function(e,t){(t.remove||t.life<1)&&i(e,t)},t.default=function(e,t,a){e.remove&&t.remove&&(void 0!==e.level?(0,r.isProjectile)(t.type)&&s(t,a,e):void 0!==t.level&&(0,r.isProjectile)(e.type)&&s(e,a,t))}}.apply(t,a),void 0===n||(e.exports=n)},2531:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(5345),r(6265),r(6270)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){if((0,r.coarse)(e,t)){if(i.IS_MULTIPLAYER&&!i.IS_SERVER)return;for(var s=0;s<8;s++)(0,a.createDust)(e.pos,1,0,i,Math.random()-.5,Math.random()-.5);(0,o.DamageItem2)(i,t,e),(0,n.addForceExplosion)(i.game,t.pos.x,t.pos.y,30,0,null)}}}.apply(t,a),void 0===n||(e.exports=n)},8729:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7185),r(5182),r(9968),r(7899),r(6265),r(6270),r(9656)],n=function(e,t,r,a,n,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n),l=o(l),t.default=function(e,t,o){var A=e,c=t;if(A.abilities.active.shield>3)(0,n.default)(e,c,o);else if(c.abilities.active.shield>3)(0,n.default)(c,e,o);else{if(45!==A.type&&45!==c.type)return(0,l.default)(e,t,o);for(var d=A.vel.getLength(),p=c.vel.getLength(),f=d<3&&p<3,h=0;h<3;h++){var v=c.comp[0].vertex[h],g=A.comp[0].vertex[h],y=(0,r.fine)(A.comp[0].vertex.length,A.comp[0].vertex,v),m=(0,r.fine)(c.comp[0].vertex.length,c.comp[0].vertex,g);if(y||m){if((0,r.resolve)(o.step,e,t)){if((0,a.shift)(e,o.WW,o.WH),(0,a.shift)(t,o.WW,o.WH),f||(0,u.DamageImpact)(A,c),A.score-=i.PLAYER_SCORE_PLAYER_COLLIDED_WITH_SHIP,f){if(o.game.eventMap,f){var _=y?v:g;(0,s.addForce)(o.game,_.x,_.y,3,0,null)}}else(0,s.addForceExplosion)(o.game,v.x,v.y,30,0,null);A.life<1&&c.level++,c.life<1&&A.level++}break}}}}}.apply(t,a),void 0===n||(e.exports=n)},7542:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(7899),r(6270)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t){return e.life>=t.life};t.default=function(e,t,i){var s=t,u=e;if((0,r.coarse)(s,e)){if(s.isEnemyForMS>0)return void(u.inSafeZone=!1);var l=s.reparations,A=o(u,l);if(!u.inSafeZone){var c={life:a.NOTIFICATION_LIFE,type:76,onlyForGuid:u.guid};if(i.game.notifications.unshift(c),!A){var d={life:a.NOTIFICATION_LIFE,type:79,onlyForGuid:u.guid};i.game.notifications.unshift(d)}u.inSafeZone=!0}var p=!1;if(u.life<l.life&&((0,n.LifeIncreaseFixedValue)(u,1),p=!0),A=o(u,l),p&&!A&&(s.shipChargeHash[e.guid]=!0),A&&p){var f={life:a.NOTIFICATION_LIFE,type:80,onlyForGuid:u.guid};i.game.notifications=i.game.notifications.filter((function(e){return e.type!==f.type})),i.game.notifications.unshift(f)}}}}.apply(t,a),void 0===n||(e.exports=n)},7596:(e,t,r)=>{var a,n;a=[r,t,r(5081),r(7185),r(6270),r(34),r(7927),r(6265),r(9262)],n=function(e,t,r,a,n,o,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={pos:(0,u.vec_pool_pop)(0,0),radius:1},A=(0,u.vec_pool_pop)(0,0);t.default=function(e,t,u){var c=3===t.type?t:e,d=3===t.type?e:t;if(c.shields>0&&!d.remove){if(d.ownerGuid===c.guid)return;if((0,a.coarse)(c,d)){if(l.pos.setFromVec(d.pos),l.radius=d.radius,A.setFromVec(d.vel),A.setAngle(A.getAngle()+Math.PI),A.setLength(3*A.getLength()),l.pos.add(A),(0,a.coarse)(c,l))return;var p=o.damageArmorMap[d.damage.type][c.armor.type];c.shields-=p*d.damage.value,c.shields<0&&c.shields>-5&&(c.shields=-5),d.remove=!0,(0,n.DamgeItemFixedValue)(c.centerNoneCannon,.1);var f=(0,i.circleLineColl)(d,c,u).cp;f&&(c.shieldImpacts.push(f),(0,s.addForceExplosion)(u.game,f.x,f.y,70,0,null),u.game.eventMap[r.GAME_EVENT.SPACE_BULLET_IMPACT]={x:f.x,y:f.y})}}}}.apply(t,a),void 0===n||(e.exports=n)},5959:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(5182)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if((0,r.resolve)(n.step,e,t)&&((0,a.shift)(e,n.WW,n.WH),(0,a.shift)(t,n.WW,n.WH),42===e.type)){var o=e;o.target&&o.target.guid===t.guid&&(o.aquireTimer=o.timerT+1)}}}.apply(t,a),void 0===n||(e.exports=n)},1917:(e,t,r)=>{var a,n;a=[r,t,r(5081),r(7185),r(9262),r(2261),r(6265),r(6270)],n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=new n.Vector(0,0);t.default=function(e,t,n){if(4===t.type)(0,a.coarse)(t,e)&&(n.game.eventMap[r.GAME_EVENT.EXPLOSION]={x:t.pos.x,y:t.pos.y,radius:t.radius},(0,s.DamageItem2)(n,t,e),(0,i.addForceExplosion)(n.game,e.pos.x,e.pos.y,250,2,null));else if(23===t.type){if((0,a.coarse)(t,e)){var l=t;n.game.eventMap[r.GAME_EVENT.EXPLOSION]={x:t.pos.x,y:t.pos.y,radius:t.radius},(0,s.DamageItem2)(n,t,e);for(var A=0;A<33;A++)u.setFromVec(e.pos),u.subtract(l.pos),u.mult(.5*Math.random()+.4),(0,o.rotateVector)(u,-l.angle,u),(0,o.rotateVector)(u,(Math.random()-.5)*Math.PI*.12,u),l.damages.push(u.clone()),l.damages.length>200&&l.damages.shift();(0,i.addForceExplosion)(n.game,e.pos.x,e.pos.y,250,2,null)}}else 11!==t.type&&22!==t.type||(0,a.coarse)(t,e)&&((0,i.addForceExplosion)(n.game,e.pos.x,e.pos.y,250,2,null),(0,s.DamageItem2)(n,t,e))}}.apply(t,a),void 0===n||(e.exports=n)},7108:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(7899),r(1330),r(4077),r(6265),r(6270)],n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,u){if((0,r.coarse)(e,t)&&(0,r.fine)(3,t.comp[0].vertex,e.pos)){var l=e,A=t;(A.guid!==l.ownerGuid||l.life<a.ROCKET_START_LIFE-100)&&((0,n.ShipLike)(l.type)&&(0,o.LOG_GL_FIXED_FORCED)("Err rocket is not ship","Type ERROR"),(0,s.DamageItem2)(u,A,l),A.inSafeZone&&l.vel.mult(.4),0===A.type&&l.vel.mult(.1),A.vel.add(l.vel),A.life<1&&(A.killedByGuid=l.ownerGuid),(0,i.addForceExplosion)(u.game,l.pos.x,l.pos.y,90,2,null))}}}.apply(t,a),void 0===n||(e.exports=n)},4836:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(6265),r(6270)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,o){if((0,r.coarse)(e,t)){if(o.IS_MULTIPLAYER&&!o.IS_SERVER)return;(0,n.DamageItem2)(o,t,e),(0,a.addForceExplosion)(o.game,t.pos.x,t.pos.y,70,1,null)}}}.apply(t,a),void 0===n||(e.exports=n)},5117:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(9262),r(7185),r(5714),r(943),r(7185),r(6812)],n=function(e,t,r,a,n,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,l){var A=null;if(4===e.type&&11===t.type)A=e;else{if(4!==t.type||11!==e.type)return void((0,a.coarse)(e,t)&&(0,s.resolve)(l.step,e,t));A=t}if(l.game.rockFormations.length>200)(0,a.coarse)(e,t)&&(0,s.resolve)(l.step,e,t);else if((0,s.coarseVecotr)(e.pos,.85*e.radius,t.pos,.85*t.radius)){A.remove=!0;var c=o(o({specular:.9,minerals:A.radius,isLV426:A.isLV426},(0,n.setImovableDefaults)((0,i.BallCreator)(A.pos.x,A.pos.y,A.radius,20*A.m))),{netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},vel:new r.Vector(0,0),staticPos:A.pos.clone(),life:A.life,sides:A.sides,angle:A.angle,guid:(0,s.getGuid)(),angleVel:0,radius:A.radius,type:11,collType:3,armor:{type:5,value:1},resources:(0,u.createDefaultResources)(A.radius,11)});A.remove=!0,l.game.rockFormations.push(c)}}}.apply(t,a),void 0===n||(e.exports=n)},4016:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(6270)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var o=t.pos.x-e.pos.x,i=t.pos.y-e.pos.y,s=Math.sqrt(o*o+i*i);if(e.radius+t.radius>=s)if(43===e.type&&((u=e).activationTimer<=0?u.remove=!0:(0,r.resolve)(n.step,e,t)),43===t.type)(u=t).activationTimer<=0||43===e.type?u.remove=!0:(0,r.resolve)(n.step,e,t);else if(43===e.type&&t.armor)(u=e).activationTimer<=0&&(0,a.DamageItem2)(n,t,e);else if(43===t.type&&e.armor){var u;(u=t).activationTimer<=0&&(0,a.DamageItem2)(n,e,t)}}}.apply(t,a),void 0===n||(e.exports=n)},4633:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(6265),r(7927),r(6270)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var s,u;if(void 0!==t.armor?(u=t,s=e):(u=e,s=t),(0,r.coarse)(s,u)){var l=(0,n.circleLineColl)(s,u,i,void 0,!0);if(l.collided){if(i.IS_MULTIPLAYER&&!i.IS_SERVER)return;(0,o.DamageItem2)(i,u,s),u.life<1||(0,a.addForce)(i.game,l.cp.x,l.cp.y,30,0,null,!0)}}}}.apply(t,a),void 0===n||(e.exports=n)},7927:(e,t,r)=>{var a,n;a=[r,t,r(9262),r(1638),r(4981)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.circleLineColl=void 0;var o=new r.Vector(0,0);t.circleLineColl=function(e,t,r,i,s){void 0===s&&(s=!1);var u=r.step;o.set(e.pos.x+e.vel.x*-u,e.pos.y+e.vel.y*-u);var l=(0,a.LineInterceptCircle)(e.pos,o,t.pos,i||t.radius);if(l){var A=(0,a.LineInterceptCircleToPositions)(e.pos,o,t.pos,t.radius);return{collided:l,cp:(0,n.getCorrectCollisionPoint)(A,e)}}return{collided:l}}}.apply(t,a),void 0===n||(e.exports=n)},4981:(e,t,r)=>{var a,n;a=[r,t,r(7185)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCorrectCollisionPoint=void 0,t.getCorrectCollisionPoint=function(e,t){var a=e.length;if(0===a)return t.pos;if(1===a)return e[0];for(var n=t.pos.x-1e3*t.vel.x,o=t.pos.y-1e3*t.vel.y,i=Number.MAX_VALUE,s=0,u=0;u<e.length;u++){var l=(0,r.distanceBetweenXYXYRelative)(n,o,e[u].x,e[u].y);l<i&&(i=l,s=u)}return e[s]}}.apply(t,a),void 0===n||(e.exports=n)},4727:(e,t,r)=>{var a,n;a=[r,t,r(9262),r(1638),r(4981)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triangleLineColl=void 0;var o=new r.Vector(0,0),i=[0,1,2],s=[1,2,0];t.triangleLineColl=function(e,t,r,u){void 0===u&&(u=!1);var l=r.step;o.set(e.pos.x+e.vel.x*-l,e.pos.y+e.vel.y*-l);for(var A=t.comp[0].vertex,c=[],d=0;d<3;d++){var p=A[i[d]],f=A[s[d]],h=(0,a.LineIntersectsToPoint)(p.x,p.y,f.x,f.y,e.pos.x,e.pos.y,o.x,o.y);h&&c.push(h)}return 0===c.length?{collided:!1}:{collided:!0,cp:(0,n.getCorrectCollisionPoint)(c,e)}}}.apply(t,a),void 0===n||(e.exports=n)},8379:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trianglePoint=void 0,t.trianglePoint=function(e,t){var r=t[0],a=t[1],n=t[2],o=e.x-r.x,i=e.y-r.y,s=(a.x-r.x)*i-(a.y-r.y)*o>0;return(n.x-r.x)*i-(n.y-r.y)*o>0!=s&&(n.x-a.x)*(e.y-a.y)-(n.y-a.y)*(e.x-a.x)>0==s},console.log("TEST > true:"+(0,t.trianglePoint)({x:2,y:2},[{x:0,y:0},{x:0,y:5},{x:10,y:2}])),console.log("TEST > false:"+(0,t.trianglePoint)({x:-2,y:2},[{x:0,y:0},{x:0,y:5},{x:10,y:2}]))}.apply(t,[r,t]),void 0===a||(e.exports=a)},8309:(e,t,r)=>{var a,n;a=[r,t,r(5081),r(7899),r(1500),r(4727),r(7927),r(6265),r(6270)],n=function(e,t,r,a,n,o,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,l){var A,c=t,d=e;if(c.comp[0].vertex,!(c.guid===d.ownerGuid&&d.life>a.BULLET_OWNER_IMMUNE_THRESHOLD)){var p=null===(A=c.abilities.hash[3])||void 0===A?void 0:A.activated,f=p?(0,i.circleLineColl)(e,c,l,2*c.radius):(0,o.triangleLineColl)(e,c,l);if(f.collided&&((0,s.addForceExplosion)(l.game,f.cp.x,f.cp.y,30,0,null),p||(0,u.DamageItem2)(l,t,e),t.life<1)){c.killedByGuid=d.ownerGuid;var h=d.ownerGuid,v=(0,n.findPlayerWithGuid)(l,h);v&&(v.score+=a.PLAYER_SCORE_KILLED_OTHER_SHIP),(0,s.addForceExplosion)(l.game,f.cp.x,f.cp.y,90,2,null),l.game.eventMap[r.GAME_EVENT.EXPLOSION]={y:f.cp.x,x:f.cp.y}}}}}.apply(t,a),void 0===n||(e.exports=n)},9030:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7185),r(5182),r(4271),r(7041),r(1874),r(7899),r(6265),r(6270),r(9656)],n=function(e,t,r,a,n,i,s,u,l,A,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n),i=o(i),s=o(s),c=o(c),t.default=function(e,t,o){var d=e;if(d.abilities.active.shield>3)return(0,i.default)(e,t,o);if(45!==d.type)return(0,c.default)(e,t,o);var p=d.comp[0].vertex,f=t.subType,h=e.vel.getLength()<5;if((0,r.distanceBetweenVectors)(d.pos,t.pos)<1.2*d.radius+t.radius){var v=!1;if(t.radius<e.radius){if((0,s.default)(d.comp[0].vertex[0],d.comp[0].vertex[1],t)||(0,s.default)(d.comp[0].vertex[1],d.comp[0].vertex[2],t)||(0,s.default)(d.comp[0].vertex[2],d.comp[0].vertex[0],t))return(0,r.resolve)(o.step,d,t),!0}else for(var g=0;g<p.length;g++){var y=p[g];if((0,r.distanceBetweenXYXY)(y.x,y.y,t.pos.x,t.pos.y)<t.radius){v=!0,h&&(0,l.addForce)(o.game,y.x,y.y,3,0,null),4===f&&(h||(0,l.addForce)(o.game,y.x,y.y,30,0,null,!0));break}}if(v){if(4===f)return h||(0,A.DamageImpact)(t,e),(0,r.resolve)(o.step,d,t),d.score-=(0,u.PLAYER_SCORE_PLAYER_COLLIDED_WITH_ASTEROID)(t.radius),(0,a.shift)(e,o.WW,o.WH),(0,a.shift)(t,o.WW,o.WH),!0;(0,n.default)(t,d,o)}}}}.apply(t,a),void 0===n||(e.exports=n)},7041:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7185),r(5182),r(4271),r(6270)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n),t.default=function(e,t,o){if(4===t.type){if((0,r.resolve)(o.step,e,t))return(0,a.shift)(e,o.WW,o.WH),(0,a.shift)(t,o.WW,o.WH),(0,i.DamageImpact)(t,e),!0}else(0,r.distanceBetweenVectors)(e.pos,t.pos)<e.radius+t.radius&&(0,n.default)(t,e,o)}}.apply(t,a),void 0===n||(e.exports=n)},9968:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(5182)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){(0,r.resolve)(n.step,e,t)&&((0,a.shift)(e,n.WW,n.WH),(0,a.shift)(t,n.WW,n.WH))}}.apply(t,a),void 0===n||(e.exports=n)},5751:(e,t,r)=>{var a,n;a=[r,t,r(7185)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var n=e.radius,o=t.radius;if(3===e.type){var i=e;n=i.cannons.length<=1?0:n*(i.cannons.length/7)*.6}if(3===t.type){var s=t;o=s.cannons.length<=1?0:o*(s.cannons.length/7)*.6}(0,r.resolve)(a.step,e,t)}}.apply(t,a),void 0===n||(e.exports=n)},2093:(e,t,r)=>{var a,n;a=[r,t,r(484),r(731)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQuadTreesObj=t.getApiReqestData=t.staleWhileRevalidateApiCache=t.resetApiCache=t.___getQtreeList=t.SetupQuadTreeRangeType=void 0;var n=[];t.SetupQuadTreeRangeType=function(e){n.map((function(e){return e.destroy()}));for(var t=[],o=0;o<2;o++)t.push(new a.QuadTreeFastRect32(new r.Rectangle(0,0,0,0),0,0));n=t,m()},t.___getQtreeList=function(){return n};var o={},i=[];t.resetApiCache=function(){o={},i.length=0},t.staleWhileRevalidateApiCache=function(){for(var e=i.splice(0,Math.min(i.length,Math.max(Math.floor(.75*i.length),20))),t=e.length,r=0;r<t;r++)delete o[e[r]]};var s=0,u=0,l=0;t.getApiReqestData=function(){var e={cachehit:s,cachemiss:u,queryTreesRectTime:l};return s=0,u=0,l=0,e};var A=function(e,t,r,a,o,i){return void 0===o&&(o=!1),void 0===i&&(i=3002),_(n[0].queryVec(t,r,a),e)[i]},c=function(e,t,r,a,o,i){void 0===i&&(i=3002);for(var s=n[0].queryVec(t,r,a),u=[],l=s.length,A=0;A<l;A++){var c=s[A];c.guid!==o&&u.push(c)}return _(u,[e])[i]},d=function(e,t,r,a){void 0===r&&(r=!1),void 0===a&&(a=3002);var A=performance.now(),c=function(e){return 10*(.1*e.x|0)+"_"+10*(.1*e.y|0)+"_"+10*(.1*e.width|0)+"_"+10*(.1*e.height|0)}(t),d=function(e){return o[e]}(c);if(d){var p=[];if(3002===a)for(var f=e.length,h=0;h<f;h++){var v=e[h];p.push.apply(p,d[v])}else for(var g in d)v=d[g],p.push.apply(p,v);return s++,l+=performance.now()-A,p}var y=n[0],m=.5*t.width,x=.5*t.height,S={x:t.x+m,y:t.y+x},T=_(y.queryVec(S,m,x),e);return function(e,t){o[e]=t,i.push(e)}(c,T),u++,l+=performance.now()-A,T[a]},p=function(e,t,r){return _(n[0].queryCircle(t,r),e)[3002]},f=function(e,t){return _(n[0].queryShape(t),e)[3002]},h=function(e,t,r){return _(n[0].queryRay(t,r),e)[3002]},v=function(e,t){for(var r=n[0].query(t),a=r.length,o=[],i=0;i<a;i++){var s=r[i];s.guid!==t.guid&&o.push(s)}return _(o,e)[3002]},g=function(e,t){for(var r=e.length,a=0;a<r;a++)t(n[e[a]])},y={All:n[0],query:v,queryTreesVec:A,queryTreeVecIgnoreGuid:c,queryTreesRect:d,queryShapeFirstHit:f,queryRay:h,queryCircle:p,customOperator:g},m=function(){y={All:n[0],query:v,queryTreesVec:A,queryTreeVecIgnoreGuid:c,queryTreesRect:d,queryShapeFirstHit:f,queryRay:h,queryCircle:p,customOperator:g}};function _(e,t){for(var r=e.length,a={},n=0;n<r;n++){var o=e[n],i=o.type;(l=a[i])||(l=a[i]=[]),l.push(o)}a[3001]=e;var s=[],u=t.length;for(n=0;n<u;n++){var l;if(l=a[t[n]])for(var A=l.length,c=0;c<A;c++)s.push(l[c])}return a[3002]=s,a}t.getQuadTreesObj=function(){return y}}.apply(t,a),void 0===n||(e.exports=n)},9217:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(9262),r(386),r(8155)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFragmentsFromTriangle=void 0,t.createFragmentsFromTriangle=function(e,t,r,a,u,l){void 0===u&&(u={x:0,y:0}),void 0===l&&(l=!1);for(var A=i(t,a.pos),c=s(A,r),d=0;d<c.length;d++){var p=c[d],f=p[0],h=p[1],v=p[2],g=.34*(f.x+h.x+v.x),y=.32*(f.y+h.y+v.y),m=i(p,{x:g,y});l?(0,o.createFragmentBlack)({x:g+a.pos.x,y:y+a.pos.y},e,m,a.vel.x+u.x,a.vel.y+u.y):(0,n.createFragment)({x:g+a.pos.x,y:y+a.pos.y},e,m,a.vel.x+u.x*Math.random(),a.vel.y+u.y*Math.random())}};var i=function(e,t){for(var r=[],n=0;n<3;n++){var o=e[n];r.push(new a.Vector(o.x-t.x,o.y-t.y))}return r},s=function(e,t){for(var r=[e],a=0;a<t;a++){for(var n=[],o=0;o<r.length;o++)n.push.apply(n,u(r[o]));r=n}return r},u=function(e){var t=e[0],a=e[1],n=e[2],o=(0,r.midpoint)(t,a),i=(0,r.midpoint)(t,n),s=(0,r.midpoint)(a,n);return[[{x:t.x,y:t.y},{x:o.x,y:o.y},{x:i.x,y:i.y}],[{x:i.x,y:i.y},{x:s.x,y:s.y},{x:o.x,y:o.y}],[{x:a.x,y:a.y},{x:o.x,y:o.y},{x:s.x,y:s.y}],[{x:n.x,y:n.y},{x:i.x,y:i.y},{x:s.x,y:s.y}]]}}.apply(t,a),void 0===n||(e.exports=n)},4271:(e,t,r)=>{var a,n;a=[r,t,r(4077),r(7899)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandBonusType=void 0,t.default=function(e,t,a){e.subType,(0,r.LOG_GL_FIXED_FORCED)("BONUSES NOT IMPLEMENTED","ERR")},t.getRandBonusType=function(e){if(void 0===e&&(e=.05),Math.random()<e)switch(Math.floor(16*Math.random())){case 0:return 52;case 1:case 7:case 8:return 53;case 2:case 3:case 4:return 55;case 5:return 59;case 6:return 60;case 9:return 61;case 10:return 62;case 11:return 58;case 12:return 64;case 13:return 65;case 14:return 54;case 15:return 66}return 4}}.apply(t,a),void 0===n||(e.exports=n)},1811:(e,t,r)=>{var a,n;a=[r,t,r(4077)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortedHash=void 0;var a=function(){function e(){this.hash={},this.sortedHash=[],this.hashLen=0}return e.prototype.add=function(e,t){this.hash[e]=t,this.sortedHash.push(e),this.hashLen++},e.prototype.get=function(e){return this.hash[e]},e.prototype.remove=function(e){this.hash[e]&&(delete this.hash[e],this.hashLen--)},e.prototype.clear=function(){this.hash={},this.sortedHash=[]},e.prototype.sizeList=function(){return this.sortedHash.length},e.prototype.sizeHash=function(){return this.hashLen},e.prototype.housekeeping=function(e,t,a){if(void 0===e&&(e=4e3),void 0===t&&(t=.1*e),this.sortedHash.length>e){for(var n=this.sortedHash.length-(e-t),o=this.sortedHash.splice(n,this.sortedHash.length),i=0;i<n;i++)delete this.hash[this.sortedHash[i]];this.sortedHash=o,this.hashLen=this.sortedHash.length,a&&(0,r.LOG_GL)("SortedHash cleared "+n+" items")}},e}();t.SortedHash=a}.apply(t,a),void 0===n||(e.exports=n)},7728:(e,t,r)=>{var a,n;a=[r,t,r(484),r(8867),r(9405),r(1870),r(6030),r(224)],n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=(0,r.rect_pool_pop)(0,0,0,0),l={update:function(e){var t=e.game,r=e.SX,l=e.SY,A=e.SW,c=e.SH,d=t.procedural.map,p=d.GEN_RES,f=d.GEN_SIZE_PIXELS,h=Math.floor(A/p)*p+p,v=Math.floor(c/p)*p+p;u.update(4*-f+r,4*-f+l,h+4*f*2,v+4*f*2),e.game.procedural.boundsSS=u,e.game.proceduralBounds=e.game.procedural.boundsSS;var g=t.procedural.chunks;(0,i.schedule)("generatorSchedulable",n.generatorSchedulable,8),(0,i.schedule)("pruneAliveEntities",s.pruneAliveEntities,16),(0,a.processChunkQeue)(e,g.qeue);for(var y=t.proceduralDestroyedData,m=0;m<y.length;m++){var _=y[m];switch(_.type){case 4:case 11:(0,o.putAsteroid)(_);break;case 23:(0,o.putLifeItem)(_);break;case 3:(0,o.putSpacePort)(_)}}t.proceduralDestroyedData=[],(0,o.hashhousekeeping)();var x=Number.MAX_SAFE_INTEGER,S=Number.MAX_SAFE_INTEGER,T=Number.MIN_SAFE_INTEGER,E=Number.MIN_SAFE_INTEGER,M=[],b=t.procedural.chunks.qeue,I=t.procedural.chunks.hash;for(var L in I)M.push(I[L]);for(var L in b){var P=b[L],w=P.length;for(m=0;m<w;m++){var R=P[m];M.push(R.chunk)}}var O=M.length;if(0===O){var C=e.game.player[0];if(C){var D=8e3;x=C.pos.x-D,S=C.pos.y-D,T=C.pos.x+D,E=C.pos.y+D}}else for(m=0;m<O;m++){var G=M[m].rect;G.x<x&&(x=G.x),G.y<S&&(S=G.y),G.x+G.width>T&&(T=G.x+G.width),G.y+G.height>E&&(E=G.y+G.height)}return e.game.procedural.treeBounds.update(x,S,T-x,E-S),"chunkgenerator"}};t.default=l}.apply(t,a),void 0===n||(e.exports=n)},8867:(e,t,r)=>{var a,n;a=[r,t,r(484),r(1330),r(69)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createChunkRec=t.processChunkQeue=t.removeChildrenFromQeue=t.populateChunk=void 0;var o=[[0,0],[.5,0],[0,.5],[.5,.5]];t.populateChunk=function(e,t,r,o,i,s){var u=(0,n.createItemForChunk)(t,r,o,i,s);5===(null==u?void 0:u.type)&&console.log((0,a.TypesToString)(u.type)),void 0!==u&&(e.typeHash[u.type]=u.type,t.populated=!0,t.itemData=u,t.type=u.type)},t.removeChildrenFromQeue=function(e,t){var r=t[e.seed];if(r)for(var a=0;a<r.length;a++){var n=r[a];n.child=null,n.chunk=null}t[e.seed]=[],delete t[e.seed]},t.processChunkQeue=function(e,t,r){void 0===r&&(r=.2);for(var a=performance.now();performance.now()<a+r;){var n=!1;for(var o in t)(A=t[o]).length>0&&A[0].chunk.rect.intersects(e.game.screen.rect)&&(i(e,t,A),n=!0);var s=!1;if(!n)for(var o in t)(A=t[o]).length>0&&(i(e,t,A),s=!0);if(!s&&!n)break}var u=0,l=[];for(var o in t){var A,c=(A=t[o]).length;0===c&&l.push(o),u+=c}for(var d=0;d<l.length;d++)delete t[l[d]];return u};var i=function(e,r,a){var n=a.shift();if(n){if(n.chunk.remove)return;n.child.rect,(0,t.createChunkRec)(e,n.chunk,n.child,n.rand,n.child.rect.x,n.child.rect.y,n.res,n.threshold,n.thresholdIncrease,n.depth,n.maxDepth,r,n.addToGame)}};t.createChunkRec=function(e,a,n,i,s,u,l,A,c,d,p,f,h){for(var v=0;v<4;v++)if(i()>A){var g=o[v],y=.5*l,m={rect:(0,r.rect_pool_pop)(s+l*g[0],u+l*g[1],y,y),children:[],populated:!1,type:void 0};(0,t.populateChunk)(a,m,e,i,h),n.children.push(m)}if(d<p)for(v=0;v<n.children.length;v++){var _=n.children[v];!_.populated&&d<6&&i()>.4&&(void 0,((x=f)[T=(S={chunk:a,child:_,depth:d+1,rand:i,res:.5*l,threshold:A+c,thresholdIncrease:c,maxDepth:p,addToGame:h}).chunk.seed]=x[T]||[]).push(S))}var x,S,T}}.apply(t,a),void 0===n||(e.exports=n)},69:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7185),r(9262),r(6812),r(4590),r(611),r(6203),r(7899),r(5443),r(6325),r(4077),r(4753),r(9207),r(2261),r(3180),r(8402),r(1870),r(4077),r(6270),r(8260),r(3578),r(6990),r(9801)],n=function(e,t,r,a,n,s,u,l,A,c,d,p,f,h,v,g,y,m,_,x,S,T,E,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createItemForChunk=void 0,s=i(s),u=i(u),l=i(l),g=i(g),S=i(S),E=i(E);var b=function(e,t,r,a,o,i,s){if(e<800){var u=(0,n.createSingleAsteroid)(t,{x:r,y:a},{x:.001,y:.001},i);return s.game.asteroids.push(u),u}},I=1e3;t.createItemForChunk=function(e,t,i,L,P){var w,R,O,C,D,G=null!=P?P:Math.floor(18*i()),N=t.game,B=e.rect,F=.5*B.width,V=B.x+F,k=B.y+F,X=Math.floor(i()*F*.6)+.2*F,H=V+(F-X)*(i()-.5)*1,U=k+(F-X)*(i()-.5)*1,Y=(0,f.getSeedFromINTEGERS)(0|H,0|U),W={seedKey:Y,procedurallyCreated:!0,pos:new a.Vector(H,U),opos:{x:H,y:U}},j=o(o({},W),{pos:new a.Vector(V,k),opos:{x:V,y:k}});switch(G){case 4:if(F<I){if(L){if((0,m.getDead)(Y))return(0,_.LOG_GL)("--AST WAS DEAD"),{type:87,x:H,y:U,radius:X};var q=(xe=(0,m.getAsteroid)(Y))?o(o({},W),{life:xe.life,resources:xe.resources,pos:new a.Vector(xe.x,xe.y)}):W;xe&&(0,_.LOG_GL)("--AST WAS MODIFIED FROM HASH"),b(F,X,H,U,0,q,t)}return{type:G,x:H,y:U,radius:X}}break;case 3:var z=i;z(),z();var K=(0,d.getSpacePortClassType)(z);if(K.size<X){if(L){if((0,m.getDead)(Y))return{type:87,x:H,y:U,radius:K.size};var Z=(0,u.default)(t,K.size,new a.Vector(H,U),K.name,{life:Math.floor(.2*A.SHIP_MAX_LIFE+z()*A.SHIP_MAX_LIFE*.8)},null,j),Q=(0,m.getSpaceport)(Y);Z.isEnemyForMS=null!=Q?Q:0;for(var J=0;J<Z.cannons.length;J++){var $=Z.cannons[J],ee=(0,f.getSeedFromINTEGERS)(0|$.pos.x,0|$.pos.y);if($.seedKey=ee,(0,m.getDead)(ee))$.removeProcedural=!0,(0,_.LOG_GL)("create SP [dead]");else{var te=(0,m.getLifeItem)(ee);te>0&&((0,_.LOG_GL)("create SP ["+te+"]"),(0,x.__LifeFixedValueSet)($,te))}}N.spacePorts.push(Z),e.item=Z}return{type:3,x:H,y:U,radius:K.size}}break;case 5:if(F>1200){if(L){var re=(0,n.createAsteroidBelt)(i,V,k,F-100,2*Math.PI*i(),Math.PI*i()*.3,20+40*i(),90+120*i(),100+120*i(),1.01,e.rect);for(J=0;J<re.asteroids.length;J++){var ae=re.asteroids[J],ne=(0,f.getSeedFromINTEGERS)(0|ae.pos.x,0|ae.pos.y);ae.seedKey=ne,(ie=(0,m.getDead)(ne))?ae.removeProcedural=ie:(xe=(0,m.getAsteroid)(ne))&&(ae.pos.x=xe.x,ae.pos.y=xe.y,ae.resources=xe.resources,(0,x.__LifeFixedValueSet)(ae,xe.life))}t.game.asteroidBelts.push(re.belt),(w=t.game.asteroids).push.apply(w,re.asteroids)}return{type:G,x:V,y:k,radius:F}}break;case 7:if(F>=2e3){if(L){var oe=(0,s.default)(i,H,U,250,e.rect);for((R=N.rockFormations).push.apply(R,oe.rockFormations),N.rockFormationSystemRadius.push(oe.rfSystem),oe.rfSystem.seedKey=Y,oe.rfSystem.procedurallyCreated=!0,J=0;J<oe.rockFormations.length;J++){var ie;ae=oe.rockFormations[J],ne=(0,f.getSeedFromINTEGERS)(0|ae.pos.x,0|ae.pos.y),ae.seedKey=ne,(ie=(0,m.getDead)(ne))?ae.removeProcedural=ie:(xe=(0,m.getAsteroid)(ne))&&(ae.pos.x=xe.x,ae.pos.y=xe.y,ae.resources=xe.resources,(0,x.__LifeFixedValueSet)(ae,xe.life))}}return{type:G,x:H,y:U,radius:F}}break;case 6:if(F>3900){if(L){var se=(0,c.CreateAncient)(i,12,i()*Math.PI,V,k,Y);N.ancients.push(se.ancient),(O=N.ancientBlocks).push.apply(O,se.blocks),(0,c.populateAncientRooms)(t,se.ancient)}return{type:G,x:V,y:k,radius:F}}break;case 15:if(F>1e3){var ue=100+600*i()+(i()>.2?100*i():20*i());if(L){var le={fire:!0,guid:(0,r.getGuid)(),radius:ue,x:V,y:k,seedKey:Y,type:15};N.spaceFog.push(le)}return{type:G,x:V,y:k,radius:ue}}break;case 16:if(F>1e3){if(ue=100+600*i()+(i()>.2?100*i():20*i()),L&&(le={fire:!1,guid:(0,r.getGuid)(),radius:ue,x:V,y:k,seedKey:Y,type:16},N.spaceFog.push(le),i()>.9)){var Ae=(0,l.default)(t,1,V,k,80*i()+80)[0];N.spaceSquids.push(Ae)}return{type:G,x:V,y:k,radius:ue}}break;case 12:if(F>=1800)return ue=510,L&&(0,h.createAnomaly)(t,H,U,i()>.92,i()>.9?4:2,ue,!0,!0,Y,12,i()>.8),{type:G,x:H,y:U,radius:ue};break;case 13:if(e.rect.width>A.P_CHUNKS_SIZE_RES-100){if(ue=750,L){(0,h.createAnomaly)(t,V,k,!0,16,ue,!0,!0,Y,13,!0);var ce=Math.floor(25*i());for(J=0;J<ce;J++)N.asteroids.push((0,n.createSingleAsteroid)(30+200*i(),{x:V+(i()-.5)*e.rect.width*.8,y:k+(i()-.5)*e.rect.height*.8},{x:i(),y:i()}))}return{type:G,x:V,y:k,radius:ue}}break;case 14:if(F>1800&&(ue=750,L)){var de=Math.round(i()*v.MAX_INT_RANGES.MAX_INT_32_QUART*(i()>.5?1:-1)/A.P_CHUNKS_SIZE_RES)*A.P_CHUNKS_SIZE_RES,pe=Math.round(i()*v.MAX_INT_RANGES.MAX_INT_32_QUART*(i()>.5?1:-1)/A.P_CHUNKS_SIZE_RES)*A.P_CHUNKS_SIZE_RES,fe=0,he=0;if((0,g.default)(2048,(function(e,t,r){var a=e*A.P_CHUNKS_SIZE_RES+de|0,n=t*A.P_CHUNKS_SIZE_RES+pe|0,o=(0,f.getSeedFromINTEGERS)(a,n);return!!(0,y.randWithWhiteHole)(o).wh&&(fe=a+.5*A.P_CHUNKS_SIZE_RES,he=n+.5*A.P_CHUNKS_SIZE_RES,!0)})),0!==fe&&0!==he)return(0,h.createAnomaly)(t,H,U,!1,16,ue,!0,!0,Y,14,!0,{x:fe,y:he}),{type:G,x:V,y:k,radius:ue};(0,p.LOG_GL_FIXED_FORCED)("could not create black hole. Unable to find white hole..","SEARCH ERR")}break;case 9:if(F<I&&F>(ue=60*i()+140))return L&&(Ae=(0,l.default)(t,1,V,k,ue,{x:V,y:k},j)[0],N.spaceSquids.push(Ae)),{type:G,x:V,y:k,radius:ue};break;case 10:if(F<I&&F>(ue=8+8*i())){if(L){var ve=(0,S.default)(t,1,V,k,ue,{x:V,y:k},j)[0];N.spaceSpiders.push(ve)}return{type:G,x:V,y:k,radius:ue}}break;case 8:if(F<I&&F>300){if(L){var ge=(0,E.default)(t,1,V,k,9+18*i(),{x:V,y:k},j)[0];N.spaceSnake.push(ge)}return{type:G,x:V,y:k,radius:300}}break;case 0:if(F<I&&F>(ue=15*T.shipRadius)){if(L){var ye=(0,T.createDestroyer)(t,j,15);N.destroyers.push(ye)}return{type:G,x:V,y:k,radius:ue}}break;case 1:if(F<I&&F>(ue=T.shipRadius))return L&&(C=N.enemies).push.apply(C,(0,T.createEnemies)(t,1,j)),{type:G,x:V,y:k,radius:ue};break;case 2:if(F<I&&F>(ue=T.shipRadius))return L&&(D=N.npcs).push.apply(D,(0,T.createNPCs)(t,1,j,-1)),{type:G,x:V,y:k,radius:ue};break;case 17:if(F>1800){var me=.4*F+i()*F*.4,_e=.4*me+.4*me*i();return L&&(0,M.createMineField)(t,V-.5*me,k-.5*me,me,_e,i,i()*Math.PI*2),{type:G,x:V,y:k,radius:.6*me}}break;default:var xe;if(F<I&&i()>.8)return(0,m.getDead)(Y)?((0,_.LOG_GL)("--AST WAS DEAD"),{type:87,x:H,y:U,radius:X}):(q=(xe=(0,m.getAsteroid)(Y))?o(o({},W),{life:xe.life,resources:xe.resources,pos:new a.Vector(xe.x,xe.y)}):W,xe&&(0,_.LOG_GL)("--AST WAS MODIFIED FROM HASH"),b(F,X,H,U,0,q,t),{type:4,x:H,y:U,radius:X})}}}.apply(t,a),void 0===n||(e.exports=n)},9405:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(4753),r(484),r(8402),r(8867),r(3180),r(4077),r(4890)],n=function(e,t,r,a,n,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generator=t.generatorSchedulable=void 0,s=o(s);var A=function(e,t){return e>0?e-e%t:e-e%t-t};t.generatorSchedulable=function(e){var r=e.game.procedural.chunks;(0,t.generator)(e,r.size,r.ss,r.hash,r.qeue,!0)};var c=0,d=0,p=!1,f=(0,a.rect_pool_pop)(0,0,0,0);t.generator=function(e,t,o,h,v,g,y){void 0===y&&(y=12);var m=e.SW,_=e.SH,x=e.SX,S=e.SY,T=S+.5*_,E=A(x+.5*m,t),M=A(T,t);(0,s.default)(7,(function(o,s,u){var l=o*t+E|0,A=s*t+M|0,c=0===l&&0===A?(0,r.getSeedFromINTEGERS)(63,78):(0,r.getSeedFromINTEGERS)(0|l,0|A);return!h[c]&&(function(e,t,r,o,s,u,l,A,c){void 0===c&&(c=12);var d={rect:(0,a.rect_pool_pop)(r,o,s,s),children:[],seed:t,typeHash:{},populated:!1,type:88,remove:!1};u[t]=d;var p=(0,n.randWithWhiteHole)(t),f=p.rng;if(p.wh)(0,i.populateChunk)(d,d,e,f,A,13);else if(f()<.02)(0,i.populateChunk)(d,d,e,f,A,6);else if(f()>.03)(0,i.createChunkRec)(e,d,d,f,r,o,s,0,0,0,c,l,A);else{for(var h=0;h<5&&((0,i.populateChunk)(d,d,e,f,A),!d.populated);h++);d.populated||(0,i.createChunkRec)(e,d,d,f,r,o,s,0,1e-4,0,c,l,A)}}(e,c,l,A,t,h,v,g,y),!0)})),(0,s.default)(25,(function(a,n,o){if(Math.abs(a)>1||Math.abs(n)>1){var i=a*t+E|0,s=n*t+M|0,A=0===i&&0===s?(0,r.getSeedFromINTEGERS)(63,78):(0,r.getSeedFromINTEGERS)(0|i,0|s);if(h[A])return(0,l.clearChunk)(e,h[A],h),!0}if(p||Math.abs(c-x)>t||Math.abs(d-S)>t){f.x=x-8*t,f.y=S-8*t,f.width=16*t,f.height=16*t;var v=performance.now();for(var g in p=!1,h){var y=h[g];if(!y.rect.intersects(f)){p=!0,(0,l.clearChunk)(e,y,h);break}}p&&(0,u.LOG_GL)("cleared  out of bounds chunks @ "+(performance.now()-v).toFixed(2)+" ms")}return c=x,d=S,!1}))}}.apply(t,a),void 0===n||(e.exports=n)},1870:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(4077),r(1811)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hashhousekeeping=t.resetHashes=t.getSpaceport=t.getLifeItem=t.getAsteroid=t.getDead=t.putSpacePort=t.putLifeItem=t.putAsteroid=void 0;var n=new a.SortedHash,i=new a.SortedHash,s=new a.SortedHash,u=new a.SortedHash;t.putAsteroid=function(e){(function(e){if(Math.abs(e.pos.x-e.opos.x)>10||Math.abs(e.pos.y-e.opos.y)>10||e.life<e.oLife)return!0})(e)&&(e.life>0&&!e.remove?n.add(e.seedKey,o(o({life:0|e.life},e.pos.toPointINT()),{resources:{iron:0|e.resources.iron,minerals:0|e.resources.minerals,platinum:0|e.resources.platinum}})):(i.add(e.seedKey,!0),n.remove(e.seedKey)))},t.putLifeItem=function(e){var t;(t=e).life<t.oLife&&(e.life>0&&!e.remove?((0,r.LOG_GL)(">> lifeitem put in hash"),s.add(e.seedKey,0|e.life)):((0,r.LOG_GL)(">> lifeitem put in [destroyed] hash"),i.add(e.seedKey,!0),s.remove(e.seedKey)))},t.putSpacePort=function(e){e.isEnemyForMS>0&&(e.life>0&&!e.remove?u.add(e.seedKey,0|e.isEnemyForMS):(i.add(e.seedKey,!0),u.remove(e.seedKey)))},t.getDead=function(e){return i.get(e)},t.getAsteroid=function(e){return n.get(e)},t.getLifeItem=function(e){return s.get(e)},t.getSpaceport=function(e){return u.get(e)},t.resetHashes=function(){i.clear(),n.clear(),s.clear(),u.clear()},t.hashhousekeeping=function(){i.housekeeping(3e4),n.housekeeping(15e3),s.housekeeping(9e3),u.housekeeping(100)}}.apply(t,a),void 0===n||(e.exports=n)},224:(e,t,r)=>{var a,n;a=[r,t,r(484),r(2093)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pruneAliveEntities=void 0;var n=(0,r.rect_pool_pop)(0,0,0,0),o=0;t.pruneAliveEntities=function(e){var t=e.game.procedural.chunks,r=t.hash,i=t.size,s=Number.MAX_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER,A=Number.MIN_SAFE_INTEGER;for(var c in r){var d=r[c].rect;s=Math.min(d.x,s),u=Math.min(d.y,u),l=Math.max(d.x,l),A=Math.max(d.y,A)}switch(o){case 0:n.x=s-2*i,n.y=u-2*i,n.width=7*i,n.height=2*i;break;case 3:n.x=s-2*i,n.y=A+i,n.width=7*i,n.height=2*i;break;case 1:n.x=s-2*i,n.y=u-2*i,n.width=2*i,n.height=7*i;break;case 2:n.x=l+i,n.y=u-2*i,n.height=7*i,n.width=2*i;break;default:throw"illegal quadrant"}++o>3&&(o=0),t.pruneRect=n;for(var p=(0,a.getQuadTreesObj)().queryTreesRect([0,2,8,10,9,50,1,4,43,42,44,17],n,!1),f=p.length,h=0;h<f;h++)p[h].removeProcedural=!0}}.apply(t,a),void 0===n||(e.exports=n)},4890:(e,t,r)=>{var a,n;a=[r,t,r(484),r(2093),r(8867),r(1870)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pruneGenerateChunks=t.clearChunk=t.pruneGenerateChunksSchedulable=void 0;var i=function(e){for(var t=0;t<e.children.length;t++){var a=e.children[t];i(a)}e.item=null,(0,r.rect_pool_put)(e.rect),e.children=null};t.pruneGenerateChunksSchedulable=function(e){(0,t.pruneGenerateChunks)(e,e.game.procedural.chunks.hash,e.game.procedural.chunks.pruneRect)},t.clearChunk=function(e,t,r){var s=[];for(var u in t.typeHash){var l=t.typeHash[u];switch(l){case 4:case 3:case 23:case 2:case 1:case 0:case 8:case 10:case 9:case 17:case 43:s.push(l);break;case 6:s.push(22,6,8,10,9);break;case 7:s.push(11,7);break;case 15:case 16:for(var A=[],c=e.game.spaceFog,d=0;d<c.length;d++){var p=c[d];t.rect.intersectsPoint(p)||A.push(p)}e.game.spaceFog=A;break;case 12:case 13:case 14:var f=[],h=e.game.anomlies;for(d=0;d<h.length;d++){var v=h[d];t.rect.intersectsPoint(v.pos)||f.push(v)}e.game.anomlies=f,s.push(4)}}!function(e,t){for(var r=(0,a.getQuadTreesObj)().queryTreesRect(e,t,!1),n=r.length,i=0;i<n;i++){var s=r[i];switch(s.removeProcedural=!0,s.type){case 4:case 11:(0,o.putAsteroid)(s);break;case 23:(0,o.putLifeItem)(s);break;case 3:(0,o.putSpacePort)(s)}}}(s,t.rect),delete r[t.seed],(0,n.removeChildrenFromQeue)(t,e.game.procedural.chunks.qeue),i(t)},t.pruneGenerateChunks=function(e,r,a){for(var n in r){var o=r[n];o.rect.intersects(a)||(0,t.clearChunk)(e,o,r)}}}.apply(t,a),void 0===n||(e.exports=n)},8402:(e,t,r)=>{var a,n;a=[r,t,r(6763)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randWithWhiteHole=void 0,t.randWithWhiteHole=function(e){var t=(0,r.mulberry32)(e),a=t();return{rng:t,wh:a>.97&&a<.98}}}.apply(t,a),void 0===n||(e.exports=n)},3180:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,a,n,o,i,s,u){void 0===e&&(e=0),void 0===a&&(a=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===u&&(u=0);var l=a,A=n;if(!t(l,A,u)&&u<=e){if(l===o&&A===o){var c=o-1,d=i+=2;return void r(e,t,c+1,c,c,d,1,u+1)}a===o+i&&n===o?s=2:n===o+i&&a===o+i?s=0:a===o&&n===o+i&&(s=3);var p=l,f=A;switch(s){case 0:p--;break;case 1:p++;break;case 2:f++;break;case 3:f--}r(e,t,p,f,o,i,s,u+1)}};t.default=r}.apply(t,[r,t]),void 0===a||(e.exports=a)},4753:(e,t,r)=>{var a,n;a=[r,t,r(2261)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomTruncatedPosAndSeed=t.getCoordFromSeed_positive_only=t.getSeedFromINTEGERS=void 0;var a=function(e){return e<0?-2*e-1:2*e},n=function(e){return t=e,-2*Math.floor(.5*t)+t==1?-.5*(e+1):.5*e;var t};t.getSeedFromINTEGERS=function(e,t){if(e!==Math.round(e))throw"x must be INTEGER";if(t!==Math.round(t))throw"y must be INTEGER";return function(e,t){return e!=Math.max(e,t)?t*t+e:e*e+e+t}(a(e),a(t))},t.getCoordFromSeed_positive_only=function(e){var t,r,a,o={x:(a=(t=e)-(r=Math.trunc(Math.sqrt(t)))*r)<r?a:r,y:a<r?r:a-r};return{x:n(o.x),y:n(o.y)}},t.getRandomTruncatedPosAndSeed=function(e,a){var n=e()*r.MAX_INT_RANGES.MAX_INT_32_QUART*(e()>.5?1:-1),o=e()*r.MAX_INT_RANGES.MAX_INT_32_QUART*(e()>.5?1:-1),i=Math.floor(n/a)*a,s=Math.floor(o/a)*a;return{x:i,y:s,seed:(0,t.getSeedFromINTEGERS)(i,s)}}}.apply(t,a),void 0===n||(e.exports=n)},7641:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkDiffed=void 0,t.checkDiffed=function(e){return!e.seedKey||!(!e.opos||!(Math.abs(e.opos.x-e.opos.x)>Math.max(.1*e.radius,30)||Math.abs(e.opos.y-e.opos.y)>Math.max(.1*e.radius,30)||e.life!==e.oLife))}}.apply(t,[r,t]),void 0===a||(e.exports=a)},2552:(e,t,r)=>{var a,n;a=[r,t,r(2093)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createExistingSeedHash=void 0,t.createExistingSeedHash=function(e){var t={};(0,r.___getQtreeList)().map((function(e){for(var r=e.references.length,a=0;a<r;a++){var n=e.references[a];if(6===n.shape||3===n.shape)break;n.procedurallyCreated&&(t[n.seedKey]=!0)}}));for(var a=e.game.anomlies,n=a.length,o=0;o<n;o++){var i=a[o];t[i.seedKey]=!0}var s=e.game.anomalyPairs;for(n=s.length,o=0;o<n;o++){var u=s[o];t[u.in.seedKey]=!0,t[u.out.seedKey]=!0}var l=e.game.asteroidBelts;for(n=l.length,o=0;o<n;o++){var A=l[o];t[A.seedkey]=!0}var c=e.game.ancients;for(n=c.length,o=0;o<n;o++){var d=c[o];t[d.seedKey]=!0}return t}}.apply(t,a),void 0===n||(e.exports=n)},1245:(e,t,r)=>{var a,n;a=[r,t,r(6812),r(9262),r(3578)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var o,i={},s=t.x,u=t.y;switch(i.pos=new a.Vector(t.x,t.y),i.life=t.life,i.seedKey=t.oSeedK,i.opos={x:t.ox,y:t.oy},i.oLife=t.oLife,i.radius=t.radius,t.type){case 0:e.game.destroyers.push((0,n.createDestroyer)(e,i));break;case 1:(o=e.game.enemies).push.apply(o,(0,n.createEnemies)(e,1,i));break;case 2:case 25:case 26:case 29:case 30:case 31:case 33:case 34:case 3:case 24:case 7:case 8:case 9:case 10:case 23:case 11:case 20:case 21:case 36:case 37:case 38:case 39:case 12:case 13:case 14:case 41:case 42:case 43:case 44:break;case 4:var l=(0,r.createSingleAsteroid)(t.radius,{x:s,y:u},{x:.1,y:.1},i);e.game.asteroids.push(l);break;default:return}}}.apply(t,a),void 0===n||(e.exports=n)},4011:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(6812),r(611),r(9262),r(3578),r(4590),r(2261),r(8260),r(6203),r(7185),r(484),r(2093),r(5443),r(737),r(3578),r(6325),r(6801),r(7899),r(9207)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f,h,v,g,y,m,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exist=void 0,a=o(a),s=o(s),l=o(l),A=o(A),h=o(h),t.exist=function(e,t){return e.filter((function(e){return e.seedKey===t})).length>0};var x=function(e,t,r,a){var n=(0,d.rect_pool_pop)(r-.5*t,a-.5*t,t,t),o=e.queryInt(n).length>0;return(0,d.rect_pool_put)(n),o},S=function(e,t,r,a,n,o){var i=(0,d.rect_pool_pop)(r-.5*t,a-.5*t,t,t),s=e.queryInt(i);(0,d.rect_pool_put)(i);var u={};if(void 0!==n&&(u[n]=!0),void 0!==o)for(var l=0;l<o.length;l++)u[o[l]]=!0;var A=s.length;for(l=0;l<A;l++)if(u[s[l].type])return!0;return!1};t.default=function(e,t,o,d,T,E,M){var b,I,L,P,w,R=t.game,O={seedKey:e,procedurallyCreated:!0,pos:new n.Vector(d,T),opos:{x:d,y:T}},C=Math.floor(18*o());switch(C){case 0:if(o()>.99)return x(E,300,d,T)?void M.add(e,!0):(R.destroyers.push((0,i.createDestroyer)(t,O)),C);break;case 1:if(o()>.97)return x(E,50,d,T)?void M.add(e,!0):((b=R.enemies).push.apply(b,(0,i.createEnemies)(t,1,O)),C);break;case 2:if(o()>.98&&R.npcs.length<30)return x(E,50,d,T)?void M.add(e,!0):((I=R.npcs).push.apply(I,(0,v.createNPCs)(t,1,O,-1)),C);break;case 25:case 26:case 29:case 30:case 31:case 33:case 34:case 24:case 8:case 23:case 11:case 20:case 21:case 36:case 37:case 38:case 39:case 13:case 41:break;case 3:if(o()>.98){if(x(E,2e3,d,T))return void M.add(e,!0);if(S(E,4500,d,T,void 0,[12,14,13,15,16]))return void M.add(e,!0);var D=o;D(),D();var G=(0,g.getSpacePortClassType)(D),N=(0,a.default)(t,G.size,new n.Vector(d,T),G.name,{life:Math.floor(.2*m.SHIP_MAX_LIFE+D()*m.SHIP_MAX_LIFE*.8)},null,O);return R.spacePorts.push(N),E.insert(N,0),(0,p.getQuadTreesObj)().query([4],N).map((function(e){return e.radius>30&&(e.remove=!0)})),C}break;case 5:if(o()>.996){var B=2600*o()+256;if(x(E,2*B,d,T))return void M.add(e,!0);var F=(0,r.createAsteroidBelt)(o,d,T,B,2*Math.PI*o(),Math.PI*o()*.3,20+40*o(),90+120*o(),100+120*o());return E.insert((0,y.beltAsTreeItem)(F.belt),0),t.game.asteroidBelts.push(F.belt),(L=t.game.asteroids).push.apply(L,F.asteroids),C}break;case 4:var V=Math.floor(300*o()+20);if(S(E,2.2*V,d,T,null,[6,3]))return;return N=(0,r.createSingleAsteroid)(V,{x:d,y:T},{x:o()-.5,y:o()-.5},O),R.asteroids.push(N),C;case 7:if(o()>.995){if(x(E,2800,d,T))return;if(S(E,4500,d,T,-1,[12,14,13,15,16]))return void M.add(e,!0);var k=(0,s.default)(o,d,T,200);return(P=R.rockFormations).push.apply(P,k.rockFormations),R.rockFormationSystemRadius.push(k.rfSystem),k.rfSystem.seedKey=e,k.rfSystem.procedurallyCreated=!0,E.insert(k.rfSystem,0),C}break;case 9:if(o()>.994){if(x(E,300,d,T))return;(K=(0,A.default)(t,1,d,T,60*o()+140,{x:d,y:T})[0]).seedKey=e,K.procedurallyCreated=!0,R.spaceSquids.push(K)}break;case 10:if(o()>.994){if(x(E,300,d,T))return;var X=(0,l.default)(t,1,d,T,8+8*o(),{x:d,y:T})[0];return X.seedKey=e,X.procedurallyCreated=!0,R.spaceSpiders.push(X),C}break;case 6:if(o()>.997&&0===R.ancients.length){if(x(E,7400,d,T))return void M.add(e,!0);if(S(E,7400,d,T,-1,[12,14,13,15,16]))return void M.add(e,!0);var H=(0,h.default)(t);if((0,c.distanceBetweenVectors)(H.pos,{x:d,y:T})<4e3)return;for(var U=(0,f.CreateAncient)(o,12,o()*Math.PI,d,T,e),Y=(0,p.getQuadTreesObj)().queryTreesVec([0,4],{x:d,y:T},3700,3700,!1),W=Y.length,j=0;j<W;j++){var q=Y[j];q.remove=!0,M.add(q.seedKey,!0)}return R.ancients.push(U.ancient),(w=R.ancientBlocks).push.apply(w,U.blocks),(0,f.populateAncientRooms)(t,U.ancient),E.insert((0,y.ancientAsTreeItem)(U.ancient),0),C}break;case 15:if(o()>.991){if(x(E,1200,d,T))return void M.add(e,!0);if(S(E,4500,d,T,-1,[12,14,13,15,16]))return void M.add(e,!0);var z={fire:!0,guid:(0,c.getGuid)(),radius:100+600*o()+(o()>.2?100*o():20*o()),x:d,y:T,seedKey:e,type:15};return R.spaceFog.push(z),E.insert((0,y.spaceFogAsTreeItem)(z),0),C}break;case 16:if(o()>.988){if(x(E,1200,d,T))return void M.add(e,!0);if(S(E,4500,d,T,-1,[12,14,13,15,16]))return void M.add(e,!0);if(z={fire:!1,guid:(0,c.getGuid)(),radius:100+600*o()+(o()>.2?100*o():20*o()),x:d,y:T,seedKey:e,type:16},R.spaceFog.push(z),o()>.9){var K=(0,A.default)(t,1,d,T,80*o()+80,{x:d,y:T})[0];R.spaceSquids.push(K)}return E.insert((0,y.spaceFogAsTreeItem)(z),0),C}break;case 12:if(o()>.99){if(x(E,1200,d,T))return void M.add(e,!0);if(S(E,4500,d,T,-1,[12,14,13,15,16]))return void M.add(e,!0);var Z=(0,_.createAnomaly)(t,d,T,o()>.92,o()>.9?4:2,510,!0,!0,e);return E.insert((0,y.anomalyAsTreeItem)(Z,t),0),C}break;case 14:if(o()>.993){if(x(E,1200,d,T))return void M.add(e,!0);if(S(E,4500,d,T,-1,[12,14,13,15,16]))return void M.add(e,!0);var Q=(0,_.createAnomalyPair)(t,d,T,o()*u.MAX_INT_RANGES.MAX_INT_32_QUART*(o()>.5?1:-1),o()*u.MAX_INT_RANGES.MAX_INT_32_QUART*(o()>.5?1:-1),e),J=(0,y.anomalyPairAsTreeItem)(Q,t);return E.insert(J[0],0),E.insert(J[1],0),C}break;default:return}}}.apply(t,a),void 0===n||(e.exports=n)},4910:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSeedFromGenResXY=t.getSeedFromCoord=void 0,t.getSeedFromCoord=function(e,t,r){var a=Math.floor(e/r)*r,n=Math.floor(t/r)*r;return a<<16|(n>0?Math.abs(n)+5e4:Math.abs(n))},t.getSeedFromGenResXY=function(e,t){return e<<16|(t>0?Math.abs(t)+5e4:Math.abs(t))}}.apply(t,[r,t]),void 0===a||(e.exports=a)},1148:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=void 0;var r=function(){function e(){this._hash={},this._sortedHash=[]}return e.prototype.add=function(e,t){this._hash[e]=t,this._sortedHash.push(e)},e.prototype.get=function(e){return this._hash[e]},e.prototype.remove=function(e){delete this._hash[e]},e.prototype.clear=function(){this._hash={},this._sortedHash=[]},e.prototype.size=function(){return this._sortedHash.length},e.prototype.hashSize=function(){var e=0;for(var t in this._hash)e++;return e},e.prototype.housekeeping=function(e,t){if(void 0===e&&(e=4e3),void 0===t&&(t=.1*e),this._sortedHash.length>e){for(var r=this._sortedHash.length-(e-t),a=this._sortedHash.splice(r,this._sortedHash.length),n=0;n<r;n++)delete this._hash[this._sortedHash[n]];this._sortedHash=a}},e}();t.Hash=r}.apply(t,[r,t]),void 0===a||(e.exports=a)},6763:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mulberry32=function(e){return function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296}}}.apply(t,[r,t]),void 0===a||(e.exports=a)},6801:(e,t,r)=>{var a,n;a=[r,t,r(6265),r(9207),r(4077)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateTree=t.anomalyPairAsTreeItem=t.ancientAsTreeItem=t.minefieldAsTreeItem=t.anomalyAsTreeItem=t.rockformationSystemAsTreeItem=t.spaceFogAsTreeItem=t.beltAsTreeItem=void 0,t.beltAsTreeItem=function(e){return{pos:{x:e.x,y:e.y},vel:{x:0,y:0},radius:e.radius,sleepingAABB:!0,type:e.type,collType:-1,seedKey:e.seedkey}},t.spaceFogAsTreeItem=function(e){return{pos:{x:e.x,y:e.y},vel:{x:0,y:0},radius:e.radius,seedKey:e.seedKey,sleepingAABB:!1,type:e.type,collType:-1}},t.rockformationSystemAsTreeItem=function(e){return{pos:e.pos,vel:{x:0,y:0},radius:e.radius,seedKey:e.seedKey,sleepingAABB:!1,type:e.type,collType:-1}},t.anomalyAsTreeItem=function(e,t){return{pos:e.pos,vel:{x:0,y:0},radius:e.effect*t.game.procedural.map.GEN_RES,seedKey:e.seedKey,sleepingAABB:!1,type:e.type,collType:-1}},t.minefieldAsTreeItem=function(e){return{pos:{x:e.pos.x,y:e.pos.y},vel:{x:0,y:0},radius:e.radius+200,seedKey:e.seedKey,sleepingAABB:!1,type:e.type,collType:-1}},t.ancientAsTreeItem=function(e){return{pos:{x:e.pos.x,y:e.pos.y},vel:{x:0,y:0},radius:e.radius+200,seedKey:e.seedKey,sleepingAABB:!1,type:e.type,collType:-1}},t.anomalyPairAsTreeItem=function(e,t){return[{pos:e.in.pos,vel:{x:0,y:0},radius:e.in.radius,seedKey:e.in.seedKey,sleepingAABB:!1,type:e.in.type,collType:-1},{pos:e.out.pos,vel:{x:0,y:0},radius:e.out.radius,seedKey:e.out.seedKey,sleepingAABB:!1,type:e.out.type,collType:-1}]},t.updateTree=function(e,o){o.reset(),o.setup(e.game.procedural.boundsSS,16,-1,8,!1),(0,n.LOG_GL_FIXED)("-","IS THIS USED???");var i=e.game;i.minefields.map((function(e){o.insert((0,t.minefieldAsTreeItem)(e),0)})),i.asteroidBelts.map((function(e){o.insert((0,t.beltAsTreeItem)(e),0)})),i.spacePorts.map((function(e){o.insert(e,0)})),i.spaceFog.map((function(e){o.insert((0,t.spaceFogAsTreeItem)(e),0)})),i.rockFormationSystemRadius.map((function(e){o.insert((0,t.rockformationSystemAsTreeItem)(e),0)})),i.anomlies.map((function(r){o.insert((0,t.anomalyAsTreeItem)(r,e),0)})),i.ancients.map((function(e){o.insert((0,t.ancientAsTreeItem)(e),0)})),i.anomalyPairs.map((function(n){var i=(0,t.anomalyPairAsTreeItem)(n,e);o.insert(i[0],0);var s=i[1];o.insert(s,0)&&0===(0,r.getForce2Tree)().queryVec(s.pos,2,2).length&&(0,a.createForceFromAnomaly)(e,n.out)}))}}.apply(t,a),void 0===n||(e.exports=n)},5158:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(4077),r(4011),r(1148),r(6763),r(484),r(4910),r(7641),r(1245),r(1330),r(7561),r(2800),r(3275),r(2552),r(6036),r(6801)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f,h,v,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetProceduralWorld=t.getRectangles=void 0,a=o(a),A=o(A);var y=[];t.getRectangles=function(){return y};var m=new n.Hash,_=new n.Hash,x=new v.QuadTreeInt32((0,s.rect_pool_pop)(0,0,0,0),5,0,20,!1);t.resetProceduralWorld=function(){m.clear(),_.clear(),x.reset(),S=0,T=0,E=!0};var S=0,T=0,E=!0,M=0,b=0,I=function(e,t,n,o){var s=(0,u.getSeedFromGenResXY)(t,n),l=m.get(s);if(l)return(0,A.default)(e,l),m.remove(s),void(o[s]=!0);if(!o[s]&&!_.get(s)){var d=(0,i.mulberry32)(s),p=d();if(M=Math.min(p,M),b=Math.max(p,b),p>.6){var f=(0,a.default)(s,e,d,t,n,x,_);f&&5===f&&(0,r.LOG_GL)("creating : "+(0,c.TypesToString)(f)+" "+t+" "+n+" S:"+s),o[s]=!0}}},L=function(e,t,r,a,n,o,i){for(var s=e;s<t;s+=i)for(var u=r;u<a;u+=i)I(n,s,u,o)},P=(0,s.rect_pool_pop)(0,0,0,0),w=(0,s.rect_pool_pop)(0,0,0,0);t.default=function(e){if(e.game.IS_PROCEDURAL){var t=e.game,a=e.SX,n=e.SY,o=e.SW,i=e.SH,s=t.procedural.map,A=s.GEN_RES,d=s.GEN_SIZE_PIXELS;M=2e7,b=0,y=[];performance.now();var p=Math.floor(o/A)*A+A,v=Math.floor(i/A)*A+A;P.update(-d+a,-d+n,p+2*d,v+2*d),(0,r.LOG_GL_FIXED_FORCED)(e.game.procedural.treeBounds.x,"X"),(0,r.LOG_GL_FIXED_FORCED)(e.game.procedural.treeBounds.y,"Y"),(0,r.LOG_GL_FIXED_FORCED)(e.game.procedural.treeBounds.width,"width"),(0,r.LOG_GL_FIXED_FORCED)(e.game.procedural.treeBounds.height,"height"),e.game.proceduralBounds=P,w.update(2*-d+a,2*-d+n,p+4*d,v+4*d),e.game.procedural.boundsSS=w;var I=(0,h.createExistingSeedHash)(e);(0,g.updateTree)(e,x);var R=x.intersectTree(x);R.length>0&&(0,r.LOG_GL_FIXED)(R.length,"Procedual tree err");for(var O=0;O<t.proceduralRemovalData.length;O++)if(4===(D=t.proceduralRemovalData[O]).type&&(!D.procedurallyCreated||(0,l.checkDiffed)(D))){var C=(0,u.getSeedFromCoord)(D.pos.x,D.pos.y,A);if(D.procedurallyCreated&&_.add(D.seedKey,!0),!D.opos)throw console.log(D),console.log((0,c.TypesToString)(D.type)),"missing opos";m.add(C,{type:D.type,x:0|D.pos.x,y:0|D.pos.y,ox:0|D.opos.x,oy:0|D.opos.y,life:0|D.life,oLife:0|D.oLife,radius:D.radius,guid:D.guid,oSeedK:C})}for(t.proceduralRemovalData=[],O=0;O<t.proceduralDestroyedData.length;O++){var D;6!==(D=t.proceduralDestroyedData[O]).shape&&3!==D.shape&&D.seedKey&&D.procedurallyCreated&&(_.add(D.seedKey,!0),D.type)}t.proceduralDestroyedData=[];var G=Math.floor(a/A)*A-d,N=Math.floor(n/A)*A-d,B=p+2*d,F=v+2*d,V=G+B,k=N+F;if(s.SX=G,s.SY=N,s.WIDTH=B,s.HEIGHT=F,s.SX_END=V,s.SY_END=k,s.MOVED_X=G-S,s.MOVED_Y=N-T,s.MOVED_XY_ABS_DIST_CELLS=Math.abs(s.MOVED_X)+Math.abs(s.MOVED_Y),s.MOVED_X_RES=s.MOVED_X/s.GEN_RES,s.MOVED_Y_RES=s.MOVED_Y/s.GEN_RES,s.FULL_REFRESH=E||Math.abs(G-S)>d||Math.abs(N-T)>d,s.WIDTH_RES=B/A,s.HEIGHT_RES=F/A,s.FULL_REFRESH)performance.now(),L(G,V,N,k,e,I,A);else if(G!==S||N!==T){var X=0,H=0,U=0,Y=0;G<S?(X=G,H=S,U=Math.min(N,T),Y=Math.max(N,T)+F,L(X,H,U,Y,e,I,A)):G>S&&(X=S+B,H=G+B,U=Math.min(N,T),Y=Math.max(N,T)+F,L(X,H,U,Y,e,I,A)),N<T?(U=N,Y=T,X=Math.min(G,S),H=Math.max(G,S)+B,L(X,H,U,Y,e,I,A)):N>T&&(U=T+F,Y=N+F,X=Math.min(G,S),H=Math.max(G,S)+B,L(X,H,U,Y,e,I,A))}return performance.now(),window.metaHash=m,S=G,T=N,E=!1,m.housekeeping(1e4,1e3),_.housekeeping(2e4,1e3),window.parasiteTree=(0,f.getParasiteTree)(),"procedural world"}}}.apply(t,a),void 0===n||(e.exports=n)},7785:(e,t,r)=>{var a,n;a=[r,t,r(6270),r(1330),r(484),r(7185),r(2261),r(2093),r(9262)],n=function(e,t,r,a,n,o,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shipNotDisabledByCloak=t.Abilities=void 0;var l=function(e,t){var r,a;if(11===t.type&&(t.canChangeState=!1,t.activated=!1,e.targetLock&&(4===(null===(r=e.aimTarget)||void 0===r?void 0:r.type)||11===(null===(a=e.aimTarget)||void 0===a?void 0:a.type))&&e.aimTarget.guid===e.targetLock.guid)){var n=e.aimTarget;if((n.resources.iron>0||n.resources.minerals>0&&e.abilities.hash[13]||n.resources.platinum>0&&e.abilities.hash[12])&&(0,o.distanceBetweenVectors)(e.aimPoint,e.pos)<250)return t.canChangeState=!0,!0}if(1===t.drainType)return!0;var i=e.abilities.hash[6];if(i&&0===t.drainType&&i.value.n>=t.drainValue){if(t.activated)return!0;if(i.value.n>=t.minDrainStartValue)return!0}return!1},A=function(e,t,r){var a=function(e,t){for(var r=e.abilities.all,a=0;a<r.length;a++){var n=r[a];if(n.type===t)return n}}(e,t);if(a)if(0===a.stateChangeType){if(a.activated&&a.canChangeState)return a.activated=!1,void(a.canChangeState=!1);if(l(e,a)&&a.canChangeState)return a.activated=!0,void(a.canChangeState=!1)}else if(1===a.stateChangeType&&l(e,a))return void(a.activated=!0);e.unableToComply=!0},c="",d=function(e,t,r){1===r?t.types.length<1?e.unableToComply=!0:t.canSelect&&(t.canSelect=!1,c===t.name+t.subtype?t.index<t.types.length-1?t.index++:t.index=0:c=t.name+t.subtype):t.canSelect=!0},p=(0,n.rect_pool_pop)(0,0,0,0),f=(0,n.rect_pool_pop)(0,0,0,0),h=function(e,t){for(var r,a,n=e.abilities.hash[6],o=e.abilities.hash[1],i=e.abilities.all,s=0;s<i.length;s++){var u=i[s];if(u.activated&&1===u.activationType){if(0===u.drainType&&(n.value.n>u.drainValue*t.step?n.value.n-=u.drainValue*t.step:u.activated=!1),(null==o?void 0:o.activated)&&u.type!==o.type){u.activated=!1;continue}if(11===u.type&&u.activated){var l=u.data;if(4===(null===(r=e.aimTarget)||void 0===r?void 0:r.type)||11===(null===(a=e.aimTarget)||void 0===a?void 0:a.type)){var A=e.aimTarget;l.iron.value<l.iron.max&&A.resources.iron>0?(l.iron.value+=.8*t.step,A.resources.iron-=t.step,A.resources.iron<0&&(A.resources.iron=0,u.activated=!1)):e.abilities.hash[13]&&l.minerals.value<l.minerals.max&&A.resources.minerals>0?(l.minerals.value+=.8*t.step,A.resources.minerals-=t.step,A.resources.minerals<0&&(A.resources.minerals=0,u.activated=!1)):e.abilities.hash[12]&&l.platinum.value<l.platinum.max&&A.resources.platinum>0?(l.platinum.value+=.8*t.step,A.resources.platinum-=t.step,A.resources.platinum<0&&(A.resources.platinum=0,u.activated=!1)):u.activated=!1}else u.activated=!1}}}};t.Abilities=function(e,t){var n=e.keyCodes,o=e.abilities,l=n.PRIMARY_ABILITY,c=n.SECONDARY_ABILITY,v=n.AUX_ABILITY;!function(e,t){for(var n,o,l,A,c=e.abilities.passive,d=0;d<c.length;d++){var h=c[d];switch(h.type){case 0:e.life<h.value.max&&(0,r.LifeIncreaseFixedValue)(e,h.value.n*t.step);break;case 4:var v=h.data;e.aimTarget||(v.timer=0),e.targetLock&&((null===(n=e.targetLock)||void 0===n?void 0:n.remove)||0!==e.forceY||0!==e.forceX?e.targetLock=null:(p.x=e.SX,p.y=e.SY,p.width=e.SW,p.height=e.SH,f.x=e.targetLock.pos.x-e.targetLock.radius,f.y=e.targetLock.pos.y-e.targetLock.radius,f.width=2*e.targetLock.radius,f.height=2*e.targetLock.radius,p.intersects(f)||(e.targetLock=null))),e.aimTarget&&!e.aimTarget.remove&&(null===(o=e.targetLock)||void 0===o?void 0:o.guid)!==e.aimTarget.guid&&(e.aimTarget.guid===v.currentTargetGuid?(v.timer+=t.stepMS,v.timer>=v.timerT&&(e.targetLock=e.aimTarget,v.timer=0)):v.currentTargetGuid=e.aimTarget.guid),e.targetLock&&e.targetLock.guid!==(null===(l=e.aimTarget)||void 0===l?void 0:l.guid)?v.dropLockTimer+=t.stepMS:v.dropLockTimer=0,v.dropLockTimer>v.dropLockTimerT&&(v.dropLockTimer=0,e.targetLock=void 0);break;case 6:h.value.n<h.value.max&&(e.inSafeZone?h.value.n+=h.regenValue*t.step*1.8:h.value.n+=h.regenValue*t.step),e.abilities.values.energy=h.value.n;break;case 7:break;case 15:var g=void 0;if(e.targetLock)(0,a.EnemyLike)(e.targetLock.type)&&(g=e.targetLock.pos);else for(var y=0;y<8&&!(g=null===(A=(0,s.getQuadTreesObj)().queryTreesVec([10,1,36,9],e.pos,100+120*y,100+120*y,!0)[0])||void 0===A?void 0:A.pos);y++);if(g)e.coaxialMount.locked=g.toPoint();else{g=new u.Vector(0,0);var m=new u.Vector(300,0);m.setAngle(e.angle),g.x=e.pos.x+m.x,g.y=e.pos.y+m.y,e.coaxialMount.locked=null}var _=Math.atan2(g.y-e.pos.y,g.x-e.pos.x);_=(0,i.normalizeRadianAngle)(_),e.coaxialMount.angle+=.08*(0,i.angleDelta)(e.coaxialMount.angle,_)*t.step,e.coaxialMount.barrel.setAngle(e.coaxialMount.angle)}}}(e,t),h(e,t),function(e,t,r,a){for(var n=0;n<e.length;n++){var o=e[n];if(1===o.activationType){if(0===o.stateChangeType&&!o.canChangeState)switch(o.arrayType){case 0:t||(o.canChangeState=!0);break;case 1:r||(o.canChangeState=!0);break;case 2:a||(o.canChangeState=!0)}if(1===o.stateChangeType)switch(o.arrayType){case 0:t||(o.activated=!1);break;case 1:r||(o.activated=!1);break;case 2:a||(o.activated=!1)}}}}(e.abilities.all,l,c,v),l&&A(e,o.primary.types[o.primary.index]),c&&A(e,o.secondary.types[o.secondary.index]),v&&A(e,o.aux.types[o.aux.index]),d(e,o.primary,n.TOGGLE_PRIMARY_ABILITY),d(e,o.secondary,n.TOGGLE_SECONDARY_ABILITY),d(e,o.aux,n.TOGGLE_AUX_ABILITY)},t.shipNotDisabledByCloak=function(e,t){var r=e.abilities.hash[1];if(null==r?void 0:r.activated){for(var a in r.time.curr-=t.stepMS,h(e,t),e.keyCodes)e.keyCodes[a]&&(r.time.curr<=0?r.activated=!1:e.unableToComply=!0);return!1}return r&&(r.time.curr=r.time.value),!0}}.apply(t,a),void 0===n||(e.exports=n)},3684:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShipCamera=void 0;var r=[],a=[];t.ShipCamera=function(e,t){t.step;var n=e.SW,o=e.SH;if(t.IS_SERVER)return e.SX=e.pos.x-.5*n,void(e.SY=e.pos.y-.5*o);var i=function(e){r.push(e.x),a.push(e.y);var t=r.length;t>50&&(r.shift(),a.shift(),t--);for(var n=0,o=0,i=0;i<t;i++)n+=r[i],o+=a[i];return{x:n/t,y:o/t}}(e.vel);e.SX=e.pos.x-.5*n+20*i.x,e.SY=e.pos.y-.5*o+20*i.y};var n={update:function(e){for(var r=e.game,a=(e.step,e.SW),n=e.SH,o=(r.resW,r.player),i=0;i<o.length;i++){var s=o[i];e.IS_MULTIPLAYER||s.SW!==a&&(s.SW=a,s.SH=n),(0,t.ShipCamera)(s,e)}return"ship cam/SRVR"}};t.default=n}.apply(t,[r,t]),void 0===a||(e.exports=a)},6174:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(9262),r(7185),r(5714),r(943)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCharge=void 0,t.createCharge=function(e,t,s){var u=new r.Vector(1.2*e.vel.x,1.2*e.vel.y);u.mult(.5);var l=new r.Vector(e.pos.x+Math.cos(e.angle+Math.PI)*(e.radius+9+1),e.pos.y+Math.sin(e.angle+Math.PI)*(e.radius+9+1)),A=o(o({ownerGuid:e.guid,damage:s.damage,type:25,collType:14,guid:(0,a.getGuid)(),vel:u,timer:4e3,totalTime:4e3,radius:9,life:100},(0,n.setImovableDefaults)((0,i.BallCreator)(l.x,l.y,9,9))),{armor:{type:3,value:1}});t.game.charges.push(A)}}.apply(t,a),void 0===n||(e.exports=n)},289:(e,t,r)=>{var a,n;a=[r,t,r(2261),r(7899)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHIP_TURNING_MAX_VAL=t.SHIP_TURNING_INITIAL=void 0,t.SHIP_TURNING_INITIAL=.005,t.SHIP_TURNING_MAX_VAL=.1,t.default=function(e,n){var o,i,s,u=e.keyCodes;e.abilities.hash[14]&&(u.STRAFELEFT&&((s=e.vel.clone()).setLength(.1),s.setAngle(e.angle-.5*Math.PI),e.vel.add(s)),u.STRAFERIGHT&&((s=e.vel.clone()).setLength(.1),s.setAngle(e.angle+.5*Math.PI),e.vel.add(s)));if(u.UP&&e.life<a.PLAYER_LIFE_LOW_THRESHOLD){var l=1-(0,r.map)(e.life,0,a.PLAYER_LIFE_LOW_THRESHOLD,0,1);e.angle+=n*l*.01}u.LEFT&&(e.angVel+=e.turnAcc*n*.05*u.LEFT,e.turnAcc>-t.SHIP_TURNING_MAX_VAL&&(e.turnAcc-=t.SHIP_TURNING_INITIAL*n),e.angleVel*=.99),u.RIGHT&&(e.angVel+=e.turnAcc*n*.05*u.RIGHT,e.turnAcc<t.SHIP_TURNING_MAX_VAL&&(e.turnAcc+=t.SHIP_TURNING_INITIAL*n),e.angleVel*=.99),u.LEFT||u.RIGHT||(e.turnAcc=0),e.angle=(0,r.normalizeRadianAngle)(e.angle),u.UP||(null===(o=e.abilities.hash[2])||void 0===o?void 0:o.activated)?((null===(i=e.abilities.hash[2])||void 0===i?void 0:i.activated)?e.thrust.setLength(.5*u.UP):e.thrust.setLength(.1*u.UP),e.thrust.setAngle(e.angle)):(e.vel.mult(.99),e.thrust.setLength(0)),e.keyCodes.DOWN&&(e.thrust.setLength(.07*u.DOWN),e.thrust.setAngle(e.angle+Math.PI)),e.vel.add(e.thrust)}}.apply(t,a),void 0===n||(e.exports=n)},3057:(e,t,r)=>{var a,n;a=[r,t,r(9262),r(5182),r(5345),r(2826)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=new r.Vector(0,0);t.default=function(e,t,s,u,l,A){void 0===u&&(u=0);var c=t.WW,d=t.WH,p=t.game;new r.Vector(0,0),l=l||i;var f=(0,o.createBullet)(26,e);f.vel.setLength(e.vel.getLength()+30);var h=0;A?(f.pos.x=e.pos.x+l.x,f.pos.y=e.pos.y+l.y,h=u):(f.pos.x=e.pos.x+Math.cos(e.angle)*e.radius+l.x,f.pos.y=e.pos.y+Math.sin(e.angle)*e.radius+l.y,h=u+e.angle),f.vel.setAngle(h+.02*(Math.random()-.5)),(0,a.shift)(f,c,d),p.bullets.push(f);var v=(0,r.vec_pool_pop)(f.vel.x,f.vel.y);v.setAngle(e.angle+.5*Math.PI+.1*Math.random()-.05),v.setLength(3+Math.random()),v.add(e.vel),(0,n.createDust)(f.pos,1,.3,t,v.x,v.y),(0,r.vec_pool_put)(v)}}.apply(t,a),void 0===n||(e.exports=n)},104:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(5182),r(3239),r(2261),r(2068),r(2610),r(3431),r(7185),r(5934),r(3239),r(2093),r(2826),r(2513),r(2068),r(6270)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f,h,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a),i=o(i),s=o(s);var g=0;t.default=function(e){var t=e.game,o=(e.SX,e.SY,e.SW),y=e.SH,m=e.WW,_=e.WH,x=e.step,S=(0,d.getQuadTreesObj)();if(S.All)for(var T=t.drones,E=T.length,M=.2,b=0;b<E;b++){var I=T[b];S.query([3],I).length>0&&I.life<I.oLife&&(0,v.LifeIncreaseFixedValue)(I,.1);var L=(0,A.GetPlayerByGuidOrEmptyArray)(I.ownerGuid,e),P=L[0];P&&P.abilities.active.cloak>0&&(P=null);var w=(0,a.default)(I,I.angle,(0,c.getGenericAvoidance)(I,e,[23,50,2],L));g+=.002,P&&P.inSafeZone&&(0,l.distanceBetweenVectors)(P.pos,I.pos)<200&&(g=0),g>.1&&(g=.1),I.vel.add(w.avoidance),I.avoidance=w,I.vel.getLength()>I.maxVel&&I.vel.setLength(I.maxVel),I.angle=(0,n.normalizeRadianAngle)(I.angle),(0,i.default)(I,x),(0,r.shift)(I,m-o*M,_-y*M,o*M,y*M),(0,s.default)(t,I,!0),(0,u.wormhole)(I,e);var R=.7,O=S.queryTreesVec([1,36,9,10],I.pos,.5*o*R,.5*y*R);O=O.concat(S.queryTreeVecIgnoreGuid(45,I.pos,.5*o*R,.5*y*R,I.ownerGuid));var C=P?(0,l.distanceBetweenVectors)(I.pos,P.pos):0,D=P?(0,n.wrapTargetPos)(m,_,I.pos,P.pos):t.player[0]?t.player[0].pos:t.asteroids[0].pos,G=!1;O.length>0&&C<450&&(G=(0,f.getLineOfSight)(I.pos,O[0]));var N=O.length>0&&G;if(I.bulletsFired>0&&(I.bulletsFired-=.05*x),!N&&C<500)C>400&&(g=.008);else{var B=N?O[0].pos:D,F=(0,l.distanceBetweenVectors)(B,I.pos);if(F<t.resW){var V=.07;F<120&&(g=.01,V=.18);var k=Math.atan2(B.y-I.pos.y,B.x-I.pos.x);if(I.turnAcc=(0,n.angleDelta)(I.angle,k)*V,I.angle+=I.turnAcc*x,N&&I.bulletsFired<I.maxBullets){var X=(0,p.createBullet)(26,I);(0,r.shift)(X,m,_),t.bullets.push(X),I.bulletsFired++}}}I.thrust.setLength(g),I.thrust.setAngle(I.angle),I.vel.add(I.thrust),(0,h.ShipPositionUpdater)(I,x,!0),I.vel.mult(.99)}}}.apply(t,a),void 0===n||(e.exports=n)},5010:(e,t,r)=>{var a,n;a=[r,t,r(7899)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var n=1.5*r.MAP_SAFETY_ZONE,o=e&&e.pos;return e&&(o.x>t-n||o.x<n||o.y>a-n||o.y<n)}}.apply(t,a),void 0===n||(e.exports=n)},1401:(e,t,r)=>{var a,n;a=[r,t,r(2261),r(2093),r(484),r(7185),r(4077),r(7899),r(6270),r(1330),r(9262)],n=function(e,t,r,a,n,o,i,s,u,l,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetRigDistributionHash=t.printRigDistributionHash=void 0;var c={};t.printRigDistributionHash=function(){for(var e in c){var t=c[e].map((function(e){return e.type+"_"+e.guid+(e.inTree?"_T":"_x")}));(0,i.LOG_GL_FIXED_FORCED)(t.length+": "+t.join(", "),e,!0)}},t.resetRigDistributionHash=function(){c={}};var d=function(e){var t=c[e.guid];return t||(t=c[e.guid]=[]),t},p=function(e){for(var t,r=d(e),a=[],n=0;n<r.length;n++){var o=r[n];o.inTree&&o.life>0&&!o.remove&&(null===(t=o.miningRig.repairTarget)||void 0===t?void 0:t.guid)===e.guid&&a.push(o)}return(r=c[e.guid]=a).length},f=function(e,t){if(e.isCannon){for(var r=d(e),a=0;a<r.length;a++)if(r[a].guid===t.guid)return;r.push(t)}},h=.004*Math.PI*2,v=function(e,t,a){var n=Math.atan2(t.pos.y-e.pos.y,t.pos.x-e.pos.x);e.angle=(0,r.normalizeRadianAngle)(e.angle),e.angle+=.01*(0,r.angleDelta)(e.angle,n)*a};t.default=function(e,t){var r=t.step,i=t.game,g=e.miningRig;if(e.thrust.setAngle(e.angle),g&&i.rockFormationSystemRadius.length>0){if(g.slowdownMultip<1&&5!==g.armState&&4!==g.armState&&1!==g.armState?g.slowdownMultip+=.003:g.slowdownMultip<1&&e.vel.getLength(),e.thrust.mult(g.slowdownMultip),e.vel.add(e.thrust),g.target&&!g.target.remove&&g.target.life>0)v(e,g.target,r),(_=(0,o.distanceBetweenVectors)(e.pos,g.target.pos)-(g.target.radius+e.radius))<500&&(g.slowdownMultip>.1&&(g.slowdownMultip*=.95),_<100?(g.slowdownMultip>.1&&(g.slowdownMultip*=.9),3===g.armState?g.armState=1:0===g.armState?g.armState=4:4===g.armState&&(g.target.minerals-=.01,g.minedMinerals++,g.minedMinerals>=300&&(g.armState=2,g.target=null))):4===g.armState&&(g.armState=0));else if(g.minedMinerals<1&&i.daylight.is_night)v(e,e.miningRig.base.centerNoneCannon,r),(0,o.distanceBetweenVectors)(e.pos,e.miningRig.base.centerNoneCannon.pos)<e.miningRig.base.radius&&e.vel.mult(.93);else if(g.minedMinerals>0){if(0===g.base.cannons.length||g.base.life<1||g.base.centerNoneCannon.remove)return i.spacePorts.length>0?void(g.base=i.spacePorts[Math.floor(i.spacePorts.length*Math.random())]):void(e.miningRig=null);var y=null;g.repairTarget,(null==(y=function(e,t){var r,a,n;if(!t.miningRig)return null;var o=null===(r=t.miningRig)||void 0===r?void 0:r.repairTarget,i=null===(a=t.miningRig)||void 0===a?void 0:a.repairTargetTargetLife,u=null===(n=t.miningRig)||void 0===n?void 0:n.repairTargetTargetBullets,l=.2*s.SPACEPORT_START_LIFE;if(23===(null==o?void 0:o.type)&&o.life>0&&!o.remove&&(o.life<i&&o.life<s.SPACEPORT_START_LIFE||o.bullets<u-1))return i-o.life>2*l&&(t.miningRig.repairTargetTargetLife=o.life+2*l),u-o.bullets>400&&(t.miningRig.repairTargetTargetBullets=o.bullets+400),o;if(o&&function(e,t){for(var r=d(e),a=[],n=0;n<r.length;n++){var o=r[n];o.guid!==t.guid&&a.push(o)}c[e.guid]=a}(o,t),t.guid%4==0&&e.centerNoneCannon.life<.95*s.SPACEPORT_START_LIFE)return t.miningRig.repairTarget=e.centerNoneCannon,t.miningRig.repairTargetTargetLife=s.SPACEPORT_START_LIFE,t.miningRig.repairTarget;for(var A=e.cannons,h=A.length,v=0,g=0,y=1e6,m=1e6,_=0,x=0,S=0,T=0,E=0,M=0;M<h;M++){var b=A[M];void 0===c[b.guid]&&(c[b.guid]=[]),p(b)>=6||b.life<1||b.remove?(T++,E++):(v+=b.life,b.life<y&&(y=b.life,_=M),b.isCannon?(g+=b.bullets,b.bullets<m&&(m=b.bullets,x=M,S=b.maxBullets)):T++)}if(v/=h-E,g/=h-T,y>.95*s.SPACEPORT_START_LIFE&&m>.95*S)return t.miningRig.repairTarget=e.centerNoneCannon,t.miningRig.repairTargetTargetLife=s.SPACEPORT_START_LIFE,t.miningRig.minedMinerals<100&&(t.miningRig.minedMinerals=0),t.miningRig.repairTarget;if(y<.2*s.SPACEPORT_START_LIFE){var I=A[_];return t.miningRig.repairTarget=I,t.miningRig.repairTargetTargetLife=Math.min(v+l,s.SPACEPORT_START_LIFE-1),t.miningRig.repairTargetTargetBullets=Math.min(g+200,I.maxBullets-1),f(t.miningRig.repairTarget,t),t.miningRig.repairTarget}if(y>.6*s.SPACEPORT_START_LIFE&&m>.6*S&&t.guid%2==0&&e.centerNoneCannon.life<.7*s.SPACEPORT_START_LIFE)return t.miningRig.repairTarget=e.centerNoneCannon,t.miningRig.repairTargetTargetLife=s.SPACEPORT_START_LIFE,t.miningRig.repairTarget;var L=A[x];return t.miningRig.repairTarget=L,t.miningRig.repairTargetTargetLife=Math.min(v+l,s.SPACEPORT_START_LIFE-1),t.miningRig.repairTargetTargetBullets=Math.min(L.bullets+200,L.maxBullets-1),f(t.miningRig.repairTarget,t),t.miningRig.repairTarget}(g.base,e))?void 0:y.life)>.6*s.SPACEPORT_START_LIFE&&e.guid%2==0&&(m=(0,a.getQuadTreesObj)().queryTreesVec([0],y.pos,600,600)[0])&&m.life<.9*m.oLife&&m.vel.getLength()<2&&(y=m),v(e,y,r),g.armState=3;var m,_,x=y.radius;if(0===y.type&&(x=(m=y).shipSizeMultip*s.SHIP_WIDTH_RADIUS),(_=(0,o.distanceBetweenVectors)(y.pos,e.comp[0].vertex[0])-(20+x))<350&&g.minedMinerals>0?g.slowdownMultip>.1&&(g.slowdownMultip*=.995):g.slowdownMultip<1&&(g.slowdownMultip*=1.05),_<90){if(g.slowdownMultip>.1&&(g.slowdownMultip*=.98),23===(null==y?void 0:y.type)&&g.repairTarget.life>=g.repairTargetTargetLife&&g.repairTarget.bullets>=g.repairTargetTargetBullets)return;var S,T=new A.Vector(20,0);if(T.setAngle(e.angle),T.add(e.comp[0].vertex[0]),(0,l.ShipLike)(y.type)?(0,o.fine)(3,y.comp[0].vertex,T):_<0)g.slowdownMultip>.1&&(g.slowdownMultip*=.99),g.armState=5,g.minedMinerals--,23===y.type&&(S=y).bullets<S.maxBullets&&S.bullets++,y.life<y.oLife&&((0,u.LifeIncreaseFixedValue)(y,0===y.type?.4:1),y.life>=y.oLife&&((0,u.LifeMaxValue)(y,y.oLife),23===y.type&&(y.damages=[])),e.life<e.oLife&&(0,u.LifeIncreaseFixedValue)(e,1),23===y.type&&(S=y).damages.length>1&&Math.random()>.8&&(S.damages.pop(),S.damages.pop())),g.minedMinerals<=0&&(g.armState=3)}}else g.repairTarget=null,v(e,i.rockFormationSystemRadius[0],r),function(e){var t,r=e.miningRig,i=(0,n.rect_pool_pop)(e.pos.x-200,e.pos.y-200,400,400),s=(0,a.getQuadTreesObj)().queryTreesRect([11],i);(0,n.rect_pool_put)(i);for(var u=Number.MAX_SAFE_INTEGER,l=0;l<s.length;l++){var A=s[l];t?A.radius>t.radius&&A.minerals>0&&(0,o.distanceBetweenVectors)(t.pos,e.pos)<u&&(t=A):A.radius>15&&A.minerals>0&&(t=A)}t&&(r.target=t)}(e);if(3!==g.armState){for(var E=e.comp[0].vertex[0].toPoint(),M=e.angle,b=0;b<g.arm.length;b++){var I=g.arm[b];I.joint.set(I.size,0),M+=I.angle,I.joint.setAngle(M),I.joint.add(E),E=I.joint.toPoint()}1===g.armState&&function(e){e.thrust.set(0,0);for(var t=e.miningRig,r=0;r<t.arm.length;r++){var a=t.arm[r];if(a.angle>a.maxAngle)return a.angle-=h*(r+1),!1;a.angle=a.maxAngle}return!0}(e)&&(g.armState=0),2===g.armState&&function(e){e.thrust.set(0,0);for(var t=e.miningRig,r=t.arm.length-1;r>=0;r--){var a=t.arm[r];if(a.angle<a.minAngle)return a.angle+=h*(r+1),!1;a.angle=a.minAngle}return!0}(e)&&(g.armState=3)}}return"MiningRig"}}.apply(t,a),void 0===n||(e.exports=n)},8854:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(9262),r(7185),r(7899),r(5714)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRocket=t.createRocketClient=void 0,t.createRocketClient=function(e){return console.error("damage not present in creatorData"),o(o({damage:{type:0,value:0,valuePercent:0,stunMS:0,pushPercentM:0,slowPercentM:0},ownerType:e.ownerType,ownerGuid:e.ownerGuid,target:e.target,type:e.target?31:33,collType:13,guid:(0,a.getGuid)(),pos:new r.Vector(e.pos.x,e.pos.y),vel:new r.Vector(e.vel.x,e.vel.y),life:e.life,radius:5,angle:e.angle,thrust:new r.Vector(0,0),tailLayout:new r.Vector(30,0),netpos:new r.Vector(0,0),netvel:new r.Vector(0,0),netangle:0},(0,i.setImovableDefaults)(null)),{mass:40,inv_m:1/40,armor:null,subType:0})},t.createRocket=function(e,t,s,u,l){void 0===u&&(u=0),void 0===l&&(l={});var A=new r.Vector(0,0);return A.setLength(e.vel.getLength()+1),A.setAngle(e.angle+.005*(Math.random()-.5)+u),o(o(o({damage:t.damage,ownerType:e.type,ownerGuid:e.guid,target:s,collType:13,type:s?31:33,guid:(0,a.getGuid)(),pos:new r.Vector(e.pos.x+Math.cos(e.angle)*n.SHIP_LENGTH_RADIUS,e.pos.y+Math.sin(e.angle)*n.SHIP_LENGTH_RADIUS),vel:A,life:n.ROCKET_START_LIFE,radius:5,angle:e.angle+u,thrust:new r.Vector(0,0),tailLayout:new r.Vector(1===l.subType?6:30,0),netpos:new r.Vector(0,0),netvel:new r.Vector(0,0),netangle:0},(0,i.setImovableDefaults)(null)),{mass:240,inv_m:1/240,armor:null,subType:0}),l)}}.apply(t,a),void 0===n||(e.exports=n)},5461:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(5081),r(7899),r(5182),r(3431),r(2509),r(104),r(289),r(1401),r(2068),r(7785),r(8734),r(65),r(1708),r(3275)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f,h,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),u=o(u),l=o(l),A=o(A);var g={update:function(e){var t,o=e.game,g=e.step,y=e.WW,m=e.WH,_=o.resW,x=o.resH,S=o.player;(0,u.default)(e);for(var T=0;T<S.length;T++){var E=S[T];E.damageTaken&&(o.eventMap[r.GAME_EVENT.PLAYER_DAMAGE]={}),(0,f.updateShipHashes)(E),(0,d.shipNotDisabledByCloak)(E,e)&&((0,d.Abilities)(E,e),(0,p.Weapons)(E,e),o.menuSettings.mouseControl&&o.currentLevel,(0,l.default)(E,g)),E.angle<0&&(E.angle+=a.doublePI),E.angle=E.angle%a.doublePI,(0,A.default)(E,e),(0,c.ShipPositionUpdater)(E,g);var M=.2;if((0,n.shift)(E,y-_*M,m-x*M,_*M,x*M),(0,i.wormhole)(E,e)&&(E.damageTaken=!0,(0,s.SlowMotion)()),E&&E.flameOutCnt<0&&(E.flameOutCnt+=.1,E.flameOutCnt>-1&&(E.flameOutCnt=0)),(null==E?void 0:E.damageTaken)&&0===E.flameOutCnt&&E.weapons.hash[27]&&!(null===(t=E.abilities.hash[1])||void 0===t?void 0:t.activated)&&(0,v.getParasiteTree)().queryVec(E.pos,1.5*E.radius,1.5*E.radius).length&&(E.flameOutCnt=36),(null==E?void 0:E.flameOutCnt)>0)for(var b=0;b<3;b++)if(E.flameOutCnt--,e.game.flames.push((0,h.createFlameoutFlame)(E.weapons.hash[27],E.pos.x,E.pos.y,E.flameOutCnt/36*Math.PI*2,E.vel,E.guid,E.type)),0===E.flameOutCnt){E.flameOutCnt=-8;break}E.damageTaken=!1,E.unableToComply=!1}return"Ship"}};t.default=g}.apply(t,a),void 0===n||(e.exports=n)},65:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateShipHashes=void 0,t.updateShipHashes=function(e){for(var t=e.abilities,r=e.weapons,a=0;a<t.all.length;a++)1===(o=t.all[a]).type&&(o.activated?e.abilities.active.cloak=1:e.abilities.active.cloak=0),3===o.type&&(o.activated?e.abilities.active.shield=o.value.n:e.abilities.active.shield=0),e.abilities.hash[o.type]=o;for(var n=0;n<t.passive.length;n++){var o=t.passive[n];e.abilities.hash[o.type]=o}for(a=0;a<r.all.length;a++){var i=r.all[a];e.weapons.hash[i.type]=i}}}.apply(t,[r,t]),void 0===a||(e.exports=a)},8734:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3057),r(8854),r(6174),r(1708),r(7496),r(8380),r(337),r(6270),r(9262),r(6763)],n=function(e,t,r,a,n,i,s,u,l,A,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Weapons=void 0,r=o(r);var p=function(e,t,r){switch(e.ammunition.type){case 0:var a=t.abilities.passive.find((function(e){return 6===e.type}));if(a&&a.value.n>=e.ammunition.perShot)return r&&(a.value.n-=e.ammunition.perShot),!0;break;case 1:if(e.ammunition.value>=e.ammunition.perShot)return r&&(e.ammunition.value-=e.ammunition.perShot),!0}return!1},f=(0,d.mulberry32)(327823),h=[],v=new c.Vector(0,0),g=function(e,t,o){var i=function(e,t){for(var r=e.weapons.all,a=0;a<r.length;a++){var n=r[a];if(n.type===t)return n}}(e,t);if(i&&p(i,e,!1)&&function(e){switch(e.cooldown.type){case 0:if(e.cooldown.value>0)return!1;break;case 1:if(e.cooldown.value>=e.cooldown.max)return!1}return!0}(i)){switch(i.cooldown.type){case 0:i.cooldown.value=i.cooldown.max;break;case 1:i.cooldown.value+=o.step*i.cooldown.incrementM}if(i.requiresTargetLock)if(e.targetLock)switch(p(i,e,!0),t){case 31:return void o.game.rockets.push((0,a.createRocket)(e,i,e.targetLock));case 32:return void h.push({amount:8,shipguid:e.guid,remove:!1,weapon:i});case 51:return void(e.targetLock?(i.active=!0,(0,A.DamageItem2)(o,e.targetLock,{type:i.type,vel:v,damage:i.damage,ownerGuid:e.guid})):i.active=!1)}else switch(t){case 31:return void o.game.rockets.push((0,a.createRocket)(e,i,e.aimTarget));case 32:return void h.push({amount:8,shipguid:e.guid,remove:!1,weapon:i});case 51:return void(e.aimTarget?(i.active=!0,(0,A.DamageItem2)(o,e.aimTarget,{type:i.type,vel:v,damage:i.damage,ownerGuid:e.guid})):i.active=!1)}else switch(p(i,e,!0),t){case 28:return i.active=!0,void(e.aimTarget&&(0,A.DamageItem2)(o,e.aimTarget,{type:i.type,vel:v,damage:i.damage,ownerGuid:e.guid}));case 26:if(e.abilities.hash[15]){var d=new c.Vector(0,0);d.add(e.coaxialMount.pos),d.add(e.coaxialMount.barrel),(0,r.default)(e,o,i,e.coaxialMount.angle,d,!0)}else(0,r.default)(e,o,i);return;case 33:return void o.game.rockets.push((0,a.createRocket)(e,i));case 25:return void(0,n.createCharge)(e,o,i);case 27:return function(e){for(var t=[],r=0;r<h.length;r++){var a=h[r];a.weapon.type!==e&&t.push(a)}h=t}(i.type),void h.push({amount:17,remove:!1,shipguid:e.guid,weapon:i});case 43:return void(0,s.createSpaceMine)(e,o,i);case 44:return void(0,u.createSpaceTurret)(e,o,i);case 42:return void(0,l.createProximityMineFromShip)(e,o,i)}}e.unableToComply=!0},y="",m=function(e,t,r){1===r?t.types.length<1?e.unableToComply=!0:t.canSelect&&(t.canSelect=!1,y===t.name+t.subtype?t.index<t.types.length-1?t.index++:t.index=0:y=t.name+t.subtype):t.canSelect=!0};t.Weapons=function(e,t){var r=e.keyCodes,n=e.weapons,o=r.PRIMARY_WEAPON,s=r.SECONDARY_WEAPON,u=r.AUX_WEAPON;!function(e,t,r,a,n){if(!(e.abilities.active.cloak>0))for(var o=e.weapons.all,i=0;i<o.length;i++){var s=o[i];if(s.active=!1,s.cooldown.value>0){var u=!1;switch(s.arrayType){case 0:u=!r;break;case 1:u=!a;break;case 2:u=!n;break;case 3:throw"error unset selectorArrayType"}if(u)switch(s.cooldown.type){case 0:s.cooldown.value-=t.stepMS;break;case 1:s.cooldown.value-=t.step}}}}(e,t,o,s,u),o&&g(e,n.primary.types[n.primary.index],t),s&&g(e,n.secondary.types[n.secondary.index],t),u&&g(e,n.aux.types[n.aux.index],t),m(e,n.primary,r.TOGGLE_PRIMARY_WEAPON),m(e,n.secondary,r.TOGGLE_SECONDARY_WEAPON),m(e,n.aux,r.TOGGLE_AUX_WEAPON),function(e){for(var t=0;t<h.length;t++){var r=(l=h[t]).shipguid;l.amount,l.amount--;for(var n=null,o=0;o<e.game.player.length;o++){var s=e.game.player[o];if(s.guid===r){n=s;break}}if(n&&!n.remove&&n.life>0)switch(l.weapon.type){case 32:e.game.rockets.push((0,a.createRocket)(n,l.weapon,n.targetLock||n.aimTarget,.3*Math.PI*(f()-.5),{subType:1}));break;case 27:e.game.flames.push((0,i.createFlame)(n,l.weapon))}else l.remove=!0;l.amount<1&&(l.remove=!0)}var u=[];for(t=0;t<h.length;t++){var l;(l=h[t]).remove||u.push(l)}h=u}(t)}}.apply(t,a),void 0===n||(e.exports=n)},6652:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(484),r(9262),r(7185),r(2068),r(5182),r(2610),r(4077),r(3431),r(2093),r(1705),r(5345),r(6036),r(6270)],n=function(e,t,r,a,n,s,u,l,A,c,d,p,f,h,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpaceBatTree=void 0,s=i(s),l=i(l);var g=new r.Rectangle(0,0,0,0),y=new p.QuadTreeUint16(g,8,81),m=[];t.getSpaceBatTree=function(){return y};var _=new a.Vector(0,0),x=new a.Vector(0,0),S=.05,T={},E=function(e,t){var r=e.guid+"_"+t.guid,a=T[r];return a||(a=(0,n.distanceBetweenVectors)(e.pos,t.pos),T[r]=a,T[t.guid+"_"+e.guid]=a,a)},M=function(e,t){return g.x=e.pos.x-.5*t,g.y=e.pos.y-.5*t,g.width=t,g.height=t,y.queryInt(g)},b=function(e){_.x=0,_.y=0;for(var t=0,r=1e3,a=M(e,r),n=a.length;n<5&&r<2e3;)n=(a=M(e,r*=4)).length;for(var o=0;o<n;o++){var i=a[o];if(i.guid!==e.guid){var s=E(e,i);s>0&&s<500&&(_.add(i.pos),t++)}}return t>0?(_.div(t),P(e,_)):_},I=function(e){_.x=0,_.y=0;for(var t=0,r=M(e,1e3),n=r.length,o=0;o<n;o++){var i=r[o];i.guid!==e.guid&&E(e,i)<500&&(_.add(i.vel),t++)}if(t>0){_.div(t),_.normalize(),_.mult(e.maxSpeed);var s=(0,a.SubtractVector)(_,e.vel,x);return s.limit(S),s}return _},L=function(e){_.x=0,_.y=0,x.x=0,x.y=0;for(var t=0,r=M(e,80),n=r.length,o=0;o<n;o++){var i=r[o];if(i.guid!==e.guid){var s=E(e,i);if(s>0&&s<40){var u=(0,a.SubtractVector)(e.pos,i.pos,x);u.normalize(),u.div(s),_.add(u),t++}}}return t>0&&_.div(t),_.magSq()>0&&(_.normalize(),_.mult(e.maxSpeed),_.subtract(e.vel),_.limit(S)),_},P=function(e,t){var r=(0,a.SubtractVector)(t,e.pos,_);r.normalize(),r.mult(e.maxSpeed);var n=(0,a.SubtractVector)(r,e.vel,x);return n.limit(S),n},w=function(e,t){_.x=0,_.y=0,x.x=0,x.y=0;var r=200;g.x=e.pos.x-100,g.y=e.pos.y-100,g.width=r,g.height=r;for(var a=(0,d.getQuadTreesObj)().queryTreesVec(t,e.pos,r,r),o=a.length,i=0,s=0;s<o;s++){var u=a[s],l=(0,n.distanceBetween)(u,e);if(l<u.radius+e.radius+100){var A=e.guid%2==0?.5*Math.PI:-.5*Math.PI,c=Math.atan2(u.pos.y-e.pos.y,u.pos.x-e.pos.x)+A;_.x=(l-(u.radius+e.radius))/50,_.setAngle(c),x.add(_),i++}}return i>1&&x.div(i),x},R={update:function(e){var t=e.game,a=e.WW,n=e.WH,i=e.SX,g=e.SY,_=e.step,x=(e.stepMS,e.SW),S=e.SH,E=t.spaceBats,M=E.length;if(t.IS_PROCEDURAL)return 0;t.IS_PROCEDURAL&&y instanceof p.QuadTreeUint16?y=new h.QuadTreeInt32(new r.Rectangle(0,0,0,0),100,100):!t.IS_PROCEDURAL&&y instanceof h.QuadTreeInt32&&(y=new p.QuadTreeUint16(new r.Rectangle(0,0,0,0),100,100)),T={};var R=(0,d.getQuadTreesObj)();m=[];var O=[4,9,8,3,0],C=o([45,1,2],O,!0),D=o([1,2],O,!0),G=o([45,2],O,!0),N=o([45,1],O,!0),B=new r.Rectangle(i-1e3,g-1e3,x+2e3,S+2e3);y.reset(),y.setup(B,8,81);for(var F=0,V=[],k=0;k<M;k++){var X=E[k];if(F<75&&B.intersectsPoint(X.pos))y.insert(X,1),V.push(X),F++;else{var H=E[X.leaderIndex];X.groupLeader?(X.target=null,X.targetType=null,y.insert(X,1),V.push(X),F++):(Math.abs(X.pos.x-H.pos.x)>500||Math.abs(X.pos.y-H.pos.y)>500)&&(X.pos.x=H.pos.x+100*Math.random(),X.pos.y=H.pos.y+100*Math.random())}}new r.Rectangle(i,g,x,S);var U=V.length,Y=1200,W=200;for(Math.random(),k=0;k<U;k++){if(H=E[(X=V[k]).leaderIndex],X.groupLeader){m=C;var j=R.queryTreesVec([45,2,1],X.pos,400,400)[0];if(j&&j.life>0&&!j.remove){switch(X.target=j,45===j.type&&j.abilities.active.cloak&&(X.target=void 0),j.type){case 45:X.targetType=45,m=D;break;case 2:X.targetType=2,m=N;break;case 1:X.targetType=1,m=G;break;default:X.target=null,(0,A.LOG_GL)("Bat targeting error. unknown type:"+j.type)}(q=P(X,j.pos)).mult(5),X.vel.add(q)}else X.target=null,X.targetType=null,m=C;X.target&&(X.target.remove||X.target.life<1)&&(X.target=null,X.targetType=null)}else if(H.target)if(H.target.life<1)H.target.remove=!0,H.target=null,H.targetType=null;else{var q;(q=P(X,H.target.pos)).mult(5),X.vel.add(q);var z=R.queryTreesVec([H.targetType],X.pos,X.radius,X.radius)[0];if(z){if(45===z.type){var K=z;K.abilities.active.cloak>0?(0,v.DamgeItemFixedValue)(z,5e-4):((0,v.DamgeItemFixedValue)(z,.005),K.damageTaken=!0)}else(0,v.DamgeItemFixedValue)(z,.005);var Z=X.vel.clone();Z.mult(25e-5),z.vel.add(Z),(0,f.createDust)(X.pos.toPoint(),1,0,e),z.life<1&&(z.remove=!0)}}if(!X.groupLeader&&(X.gettingBackToGroup||X.pos.x>H.pos.x+Y||X.pos.x<H.pos.x-Y||X.pos.y>H.pos.y+Y||X.pos.y<H.pos.y-Y))(q=P(X,H.pos)).mult(5),X.vel.add(q),X.gettingBackToGroup=!0,(X.pos.x<H.pos.x+W||X.pos.x>H.pos.x-W||X.pos.y<H.pos.y+W||X.pos.y>H.pos.y-W)&&(X.gettingBackToGroup=!1);else if(!H.target){var Q=L(X);Q.mult(1.75),X.vel.add(Q);var J=I(X);J.mult(1.5),X.vel.add(J);var $=b(X);$.mult(1.5),X.vel.add($)}var ee=w(X,m);X.vel.add(ee),X.vel.limit(X.gettingBackToGroup?1.75*X.maxSpeed:X.maxSpeed)}for(k=0;k<U;k++)X=V[k],(0,l.default)(t,X,!1),(0,c.wormhole)(X,e),(0,s.default)(X,_),(0,u.shift)(X,a,n);return"spaceBats"}};t.default=R}.apply(t,a),void 0===n||(e.exports=n)},7350:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Muscle=void 0;var r=function(){function e(e,t){this.minLength=e,this.maxLength=t,this.l=t}return e.prototype.toJSON=function(){return{minLength:this.minLength,maxLength:this.maxLength,l:this.l}},e.prototype.relax=function(){this.l=.98*this.l+.02*this.maxLength},e.prototype.contract=function(){this.l=.95*this.l+.05*this.minLength},e}();t.Muscle=r}.apply(t,[r,t]),void 0===a||(e.exports=a)},3665:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MuscleSegment=void 0;var r=function(e){for(;e<0;)e+=2*Math.PI;for(;e>=2*Math.PI;)e-=2*Math.PI;return e},a=function(){function e(e,t,r,a,n,o,i,s){this.isMuscleSegment=!0,this.width=e,this.leftMuscle=t,this.rightMuscle=r,this.centerX=a,this.centerY=n,this.angle=o,this.desiredAngleVsTarget=i,this.isMuscleSegment=!0,this.ownerguid=s,this.type=19}return e.prototype.toJSON=function(){return{width:this.width,centerX:this.centerX,centerY:this.centerY,angle:this.angle,leftMuscle:this.leftMuscle.toJSON(),rightMuscle:this.rightMuscle.toJSON(),desiredAngleVsTarget:this.desiredAngleVsTarget,isMuscleSegment:!0}},e.prototype.getLength=function(){return.5*this.leftMuscle.l+.5*this.rightMuscle.l},e.prototype.updatePosition=function(e){var t=e.centerX+Math.cos(e.angle)*e.getLength()*.5,r=e.centerY+Math.sin(e.angle)*e.getLength()*.5,a=Math.atan2(this.leftMuscle.l-this.rightMuscle.l,this.width);this.angle=e.angle+a,this.centerX=t+Math.cos(this.angle)*this.getLength()*.5,this.centerY=r+Math.sin(this.angle)*this.getLength()*.5},e.prototype.moveMusclesForTarget=function(e,t){var a=r(Math.atan2(t-this.centerY,e-this.centerX)),n=r(a-this.angle),o=r(n-this.desiredAngleVsTarget);if(o<Math.PI){var i=Math.min(.15,o/Math.PI*.5);this.rightMuscle.l=this.rightMuscle.l*(1-i)+this.rightMuscle.minLength*i}else i=Math.min(.15,.5*(2-o/Math.PI)),this.leftMuscle.l=this.leftMuscle.l*(1-i)+this.leftMuscle.minLength*i},e}();t.MuscleSegment=a}.apply(t,[r,t]),void 0===a||(e.exports=a)},2273:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7185),r(9262),r(2261),r(2068),r(3239),r(5182),r(3431),r(2610),r(2889),r(7185),r(4831),r(7893),r(1330),r(2889),r(3239),r(2093),r(5714),r(5475),r(5345),r(6270)],n=function(e,t,r,a,n,s,u,l,A,c,d,p,f,h,v,g,y,m,_,x,S,T){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPartsFromSquid=t.getSpaceSquidFromGuid=void 0,s=i(s),u=i(u),c=i(c),d=i(d),f=i(f);var E=new a.Vector(0,0),M={};t.getSpaceSquidFromGuid=function(e){return M[e]},t.createPartsFromSquid=function(e,t){var r=[];(0,h.renderSquids)(t,r,[],[],[e],0,0);for(var i=r.length,s=0;s<i;s+=2){var u=r[s],l=r[s+1];(0,S.createDust)({x:u,y:l},1,1,t)}var A=new a.Vector(0,0),c=new a.Vector(0,0);for(s=1;s<10;s++){var d=o(o({specular:.2,isLV426:!1},(0,_.setImovableDefaults)(null)),{netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},sides:8,pos:e.pos,vel:new a.Vector(0,0),life:e.life,guid:e.guid,type:e.type,collType:26,radius:.5*e.radius*s*.5,angle:e.angle,angleVel:0,armor:null,resources:null});(0,f.default)(d,t,0)}for(var v=e.pos.x,g=e.pos.y,y=e.tentacles,m=0;m<y.length;m++)for(var x=y[m],T=0;T<x.arm.length;T++){var E=x.arm[T],M=.5*E.leftMuscle.l+.5*E.rightMuscle.l;A.x=-.5*M,A.y=0,(0,n.rotateVector)(A,E.angle,A),c.x=.8*M,c.y=0,(0,n.rotateVector)(c,E.angle,c);var b=new a.Vector(0,.08*Math.random());b.setAngle(-.5*Math.random()*(4*Math.PI));var I=new a.Vector(A.x,A.y),L=new a.Vector(c.x,c.y),P=new a.Vector(E.centerX+v,E.centerY+g),w=o(o({fromType:e.type,edgeA:I,edgeB:L,rotatedEdgeA:new a.Vector(0,0),rotatedEdgeB:new a.Vector(0,0),colorFade:255,complexPartIndices:null,complexPartVectors:null,pos:P,angle:0,angleVel:.005*Math.random(),vel:b,guid:(0,p.getGuid)(),type:38,collType:26,life:100+50*Math.random(),radius:E.width,width:.3*E.width},(0,_.setImovableDefaults)(null)),{armor:null});t.game.asteroidParts.push(w)}};var b={update:function(e){var t=e.game,a=e.step,o=(e.SW,e.SH,e.SX,e.SY,e.WW),i=e.WH,f=e.stepMS;if((0,m.getQuadTreesObj)().All){var h=(0,g.getBaseTargetArrays)(e);M={};for(var _=0;_<t.spaceSquids.length;_++){var S=t.spaceSquids[_];S.prioritzeRestposMS>0&&(S.prioritzeRestposMS-=e.stepMS),M[S.guid]=S;var b=(0,d.default)(e,S,S.pos,S.radius,38*S.radius,h),I=b.targetPos;S.debugX=I.x,S.debugY=I.y;var L=S.tentacles;S.angle=(0,n.normalizeRadianAngle)(S.angle),E.x=200,E.y=0,E.setAngle(S.angle),E.add(S.pos);var P=S.pos,w=(0,r.distanceBetweenVectors)(P,I),R=S.angle;if(w>30){var O=Math.atan2(I.y-P.y,I.x-P.x),C=w>S.radius?.15:.3;if(S.angle+=(0,n.angleDelta)(S.angle,O)*C*a*.1,e.IS_MULTIPLAYER&&!e.IS_SERVER){var D=(0,p.angleDifference)(S.angle,S.netangle);D>.05*Math.PI&&(S.angle-=.05*D*a)}E.x=.1,E.y=0,E.setAngle(S.angle)}else E.setLength(0),S.vel.mult(.9);var G=(0,u.default)(S,S.angle,(0,y.getGenericAvoidance)(S,e,S.fleeDangerMS>0?[3]:[],[]));S.vel.add(G.avoidance),S.vel.add(E),R=(0,p.angleDifference)(S.angle,R);var N=4+.5*S.level;S.vel.getLength()>N&&S.vel.setLength(N),(0,s.default)(S,S.infected?.8*a:a),(0,l.shift)(S,o,i),(0,c.default)(t,S,!0,1,3),(0,A.wormhole)(S,e),b.targetIsIM&&!S.stunned&&w<2*b.target.radius&&((0,T.DamgeItemFixedValue)(b.target,1+.1*S.level),(0,v.ShipLike)(b.target.type)&&(b.target.damageTaken=!0),(0,x.PredatorLevelUpgrade)(S,b.target));for(var B=S.angle,F=L.length,V=Math.floor(F/2),k=0;k<F;k++){var X=L[k];X.glowIndex--,X.glowIndex<0&&(X.glowIndex=X.arm.length),X.searchTime+=f;var H=X.arm[X.arm.length-1],U=X.arm[0];if(E.x=U.centerX,E.y=U.centerY,(0,n.rotateVector)(E,R,E),U.centerX=E.x,U.centerY=E.y,U.angle+=R,w<X.reach)X.target.x=I.x-S.pos.x,X.target.y=I.y-S.pos.y,X.searchTime=0,(0,r.distanceBetweenXYXY)(X.target.x,X.target.y,H.centerX,H.centerY)<5&&b.targetIsIM&&b.target.vel.mult(.666);else if(X.searchTime>20){E.x=2*X.reach,E.y=0;var Y=.05*(S.infected?.1*a:a);X.swimIn?(X.swimAngle+=Y,X.swimAngle>.5&&(X.swimIn=!1)):(X.swimAngle-=Y,X.swimAngle<-.3&&(X.swimIn=!0));var W=X.swimAngle;k<V?(0,n.rotateVector)(E,B-W,E):(0,n.rotateVector)(E,B+W,E),X.target.x=E.x,X.target.y=E.y,X.searchTime=15*Math.random()}for(var j=1;j<X.arm.length;j++){var q=X.arm[j],z=X.arm[j-1];q.leftMuscle.relax(),q.rightMuscle.relax(),S.stunned?Math.random()>.5?q.leftMuscle.contract():q.rightMuscle.contract():q.moveMusclesForTarget(X.target.x,X.target.y),q.updatePosition(z)}}S.stunned=!1}return"spacesquids"}}};t.default=b}.apply(t,a),void 0===n||(e.exports=n)},454:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2839),r(9752),r(8465),r(7796),r(2443),r(9361),r(3395),r(3085),r(3481),r(7447),r(3079),r(4200),r(5482),r(5712),r(7893),r(6391),r(9752),r(9403),r(4077),r(2208),r(6739),r(6922),r(2470),r(3731),r(5849),r(5678),r(67),r(4709),r(9538),r(8751),r(1039),r(568),r(3837),r(5346),r(3080),r(7403),r(7561),r(4077),r(9794),r(8723),r(7049),r(5559),r(8803),r(2005),r(8870),r(9862),r(2756),r(6882),r(2660),r(2800),r(903),r(5852),r(3875),r(1719),r(7157),r(947),r(1134),r(9610),r(8421),r(3631),r(7136),r(6119),r(2639),r(4603),r(6702),r(9101),r(9734),r(6357),r(4563),r(5762),r(8083),r(9303),r(5436),r(57),r(57),r(1621),r(8322),r(1706),r(5303),r(9607),r(8215)],n=function(e,t,r,a,n,o,i,s,A,c,d,p,f,h,v,g,y,m,_,x,S,T,E,M,b,I,L,P,w,R,O,C,D,G,N,B,F,V,k,X,H,U,Y,W,j,q,z,K,Z,Q,J,$,ee,te,re,ae,ne,oe,ie,se,ue,le,Ae,ce,de,pe,fe,he,ve,ge,ye,me,_e,xe,Se,Te,Ee,Me,be,Ie,Le,Pe,we){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDevProjectGui=void 0,r=l(r),a=l(a),n=l(n),o=l(o),i=l(i),s=l(s),A=l(A),c=l(c),d=l(d),p=l(p),f=l(f),h=l(h),v=l(v),g=l(g),y=l(y),m=l(m),x=l(x),S=l(S),T=l(T),E=l(E),M=l(M),b=l(b),I=l(I),L=l(L),P=l(P),w=l(w),R=l(R),O=l(O),C=l(C),D=l(D),G=l(G),N=l(N),B=l(B),F=l(F),V=l(V),H=l(H),U=l(U),Y=l(Y),W=l(W),j=l(j),q=l(q),z=l(z),K=l(K),Z=l(Z),Q=l(Q),J=l(J),$=l($),ee=l(ee),te=l(te),re=l(re),ae=l(ae),ne=l(ne),oe=l(oe),ie=l(ie),se=l(se),ue=l(ue),le=l(le),Ae=l(Ae),ce=l(ce),de=l(de),pe=l(pe),fe=l(fe),he=l(he),ve=l(ve),ge=l(ge),ye=l(ye),me=l(me),_e=l(_e),xe=l(xe),Se=l(Se),Te=u(Te),Me=l(Me),Ie=u(Ie),Pe=l(Pe),we=l(we);var Re=[te.default,T.default,q.default,v.default,function(e){return(0,Te.default)(e,0)},ee.default,f.default,C.default,h.default,Y.default,ye.default,j.default,de.default,function(e){return(0,Te.default)(e,1,.2*e.game.resW,.2*e.game.resH)},Me.default,Pe.default,we.default,function(e){var t=e.gl;return(0,Te.renderTextureToBufferMultiGL)(e,2,1),(0,Ie.default)(Ie.GLctx.Vertices,t),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE),"upscale"},P.default,ge.default,s.default,ve.default,z.default,r.default,M.default,o.default,U.default,H.default,W.default,function(e){return(0,Ee.renderFrameBufferCombineGL)(e,0,2)},Ee.disableFrameBufferGL,b.default,D.default,i.default,N.default,re.default,R.default,w.default,function(e){return(0,Te.default)(e,3)},function(e){return(0,be.RAGL_POLYS_FLUSH)(e)},function(e){return(0,Te.default)(e,4)},be.RAGL_LIGHTS_FLUSH,function(e){return(0,Ee.renderFrameBufferCombineGL)(e,3,4)},Ee.disableFrameBufferGL,G.default,y.default,Z.default,function(e){return(0,Q.default)(e),(0,B.default)(e),(0,F.default)(e),(0,L.default)(e),(0,p.default)(e),(0,E.default)(e),(0,n.default)(e),(0,xe.default)(e),(0,le.default)(e),(0,x.default)(e),(0,ce.default)(e),(0,ue.default)(e),(0,I.default)(e),"player hud"},function(e){return(0,c.default)(e),(0,A.default)(e),(0,O.default)(e),(0,d.default)(e),(0,he.default)(e),(0,g.default)(e),(0,se.default)(e),(0,_e.default)(e),(0,fe.default)(e),(0,Ae.default)(e),"generic UI"},function(e){return(0,S.default)(e),(0,V.default)(e),(0,K.default)(e),(0,J.default)(e),(0,me.default)(e),(0,ae.default)(e),(0,ne.default)(e),(0,oe.default)(e),(0,ie.default)(e),(0,pe.default)(e),(0,$.default)(e),"debugs"}];t.setDevProjectGui=function(){Re=[Se.default,$.default,S.default]},t.default=function(e){var t=e.game,r=t.performance.gui=[];t.performance.totalGui=(0,_.MeasureTimeFn)((function(){for(var t=function(t){(0,a.default)((function(r){return(0,Le.ShaderInstrument)(e,t,Re[t])}),e,r,"gui")},n=0;n<Re.length;n++)t(n)})),(0,m.default)(e),t.performance.shaders=(0,Le.readShaderPerformanceList)().map((function(e){return{name:e.name,type:"shader",time:e.time}}))}}.apply(t,a),void 0===n||(e.exports=n)},9610:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(7561),r(9733)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n);var u=[],l=0;t.default=function(e){var t=e.gl,o=e.SW;u=[];var A=(0,s.getRequestsInFlight)();A>0?(l+=3)>600&&(l=600):l=0;for(var c=.5*o,d=0;d<A;d++)(0,i.line2Poly)(c-.5*l,20*(d+1),c+.5*l,20*(d+1),u,2);return u.length>0&&((0,n.default)(a.GLctx.Vertices,t),(0,r.drawColor)(u,t,.1,.8,.8,1)),"AjaxRequests"}}.apply(t,a),void 0===n||(e.exports=n)},3875:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(7561),r(2093),r(7899)],n=function(e,t,r,a,n,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a);var l=[],A=[];t.default=function(e){e.SW,e.SH;var t=e.SX,o=e.SY,u=e.gl,c=e.game,d=(0,s.getQuadTreesObj)();if(d.All){var p=c.screen.rectSS_200,f=d.queryTreesRect([22],p);l=[],A=[];for(var h=0;h<f.length;h++){var v=f[h];(0,r.createBlockCirclePolySingleWall)(v.pos.x-t,v.pos.y-o,l,v.sides,v.angle,v.radius,!0)}l.length>0&&(u.blendFunc(u.DST_COLOR,u.ZERO),(0,a.default)(n.GLctx.Vertices,u),(0,i.drawColor)(l,u,0,0,0,1),u.blendFunc(u.ONE,u.ONE),(0,i.drawColor)(A,u,1,0,0,1))}return"Ancient"}}.apply(t,a),void 0===n||(e.exports=n)},4560:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(7967),r(910),r(7899)],n=function(e,t,r,a,n,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BONUS_BUFFERS=void 0,a=o(a);var l="w",A="g",c=(i=o(i)).default.create("L",u.TEXT_SIZE_SMALL,l),d=i.default.create("R3",u.TEXT_SIZE_SMALL,l),p=i.default.create("R5",u.TEXT_SIZE_SMALL,l),f=i.default.create("R8",u.TEXT_SIZE_SMALL,l),h=i.default.create("EB",u.TEXT_SIZE_SMALL,l),v=i.default.create("SH",u.TEXT_SIZE_SMALL,l),g=i.default.create("BO",u.TEXT_SIZE_SMALL,l),y=i.default.create("WU",u.TEXT_SIZE_SMALL,l),m=i.default.create("|>",u.TEXT_SIZE_SMALL,l),_=i.default.create("M6",u.TEXT_SIZE_SMALL,l),x=i.default.create("AP",u.TEXT_SIZE_SMALL,l),S=i.default.create("UB",u.TEXT_SIZE_SMALL,l),T=i.default.create("HB",u.TEXT_SIZE_SMALL,l),E=i.default.create("P3",u.TEXT_SIZE_SMALL,l),M=i.default.create("FL",u.TEXT_SIZE_SMALL,l),b=i.default.create("??",u.TEXT_SIZE_SMALL,l),I=i.default.create("LIFE",u.TEXT_SIZE_SMALL,A),L=i.default.create("ROCKET X3",u.TEXT_SIZE_SMALL,A),P=i.default.create("ROCKET X5",u.TEXT_SIZE_SMALL,A),w=i.default.create("ROCKET X8",u.TEXT_SIZE_SMALL,A),R=i.default.create("ELECTROBASTARDRAY",u.TEXT_SIZE_SMALL,A),O=i.default.create("SHIELD",u.TEXT_SIZE_SMALL,A),C=i.default.create("BOOSTERS",u.TEXT_SIZE_SMALL,A),D=i.default.create("WEAPON_UPGRADE",u.TEXT_SIZE_SMALL,A),G=i.default.create("DRONE SHIP",u.TEXT_SIZE_SMALL,A),N=i.default.create("MISSILE X6",u.TEXT_SIZE_SMALL,A),B=i.default.create("AUTOPILOT",u.TEXT_SIZE_SMALL,A),F=i.default.create("HOMING BULLETS",u.TEXT_SIZE_SMALL,A),V=i.default.create("ULTRABRIGHT",u.TEXT_SIZE_SMALL,A),k=i.default.create("PROXIMITY MINES X3",u.TEXT_SIZE_SMALL,A),X=i.default.create("FLAMETHROWER",u.TEXT_SIZE_SMALL,A),H=i.default.create("UNKNOWN ??",u.TEXT_SIZE_SMALL,A);t.BONUS_BUFFERS={BUFFER_LIFE:I,BUFFER_ROCKET_X1:L,BUFFER_ROCKET_X2:P,BUFFER_ROCKET_X3:w,BUFFER_EB:R,BUFFER_SHIELD:O,BUFFER_BOOSTERS:C,BUFFER_WEAPON_UPGRADE:D,BUFFER_DRONE:G,BUFFER_UNKNOWN:H,BUFFER_MISSILE_X6:N,BUFFER_AUTOPILOT:B,BUFFER_HOMINGBULLETS:F,BUFFER_ULTRABRIGHT:V,BUFFER_PROXIMITY_MINES_X3:k,BUFFER_FLAME:X};var U=[],Y=[];t.default=function(e){var t=e.SX,o=e.SY,u=e.gl;U=[],Y=[];for(var l=e.game.asteroids,A=0;A<l.length;A++){var I=l[A];if((0,r.onStage)(e,I.pos.x,I.pos.y,I.radius)){var L=I.type;if(4!==I.type){var P=null;switch(L){case 59:P=h;break;case 53:P=c;break;case 55:P=d;break;case 56:P=p;break;case 57:P=f;break;case 52:P=v;break;case 60:P=g;break;case 61:P=y;break;case 62:P=m;break;case 58:P=_;break;case 63:P=x;break;case 65:P=S;break;case 64:P=T;break;case 54:P=E;break;case 66:P=M;break;default:P=b}i.default.addGL(u,(0,a.default)(n.GLctx.Texture,u),P,I.pos.x-t-.5*I.radius+5,I.pos.y-o-.5*I.radius-5,e);var w=(0,s.hexBox)(I.radius,I.pos,t,o);U.push.apply(U,w[0]),(0,r.addToColorMap)(Y,U,.1,.1,.1,1),U.push.apply(U,w[1]),(0,r.addToColorMap)(Y,U,.7,.7,.7,1),U.push.apply(U,w[2]),(0,r.addToColorMap)(Y,U,.3,.3,.3,1)}}}if(U.length>0){var R=(0,a.default)(n.GLctx.Vertices,u);(0,r.drawColorMap)(Y,U,R,u)}return"bonuses"}}.apply(t,a),void 0===n||(e.exports=n)},5678:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(2093)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a);var s=[],u=[];t.default=function(e){var t=e.SW,o=e.SH,l=e.SX,A=e.SY,c=e.gl,d=e.game;s.length=0,u.length=0;var p=d.screen.rect,f=(0,i.getQuadTreesObj)();if(f.All){for(var h=f.queryTreesRect([26,29],p),v=h.length,g=[],y=0;y<v;y++)if(!(E=h[y]).remove)if(E.homing)g.push(E);else{var m=0|E.pos.x,_=0|E.pos.y;if(m-l<t&&_-A<o&&m-l>0&&_-A>0){var x=0|E.vel.x,S=0|E.vel.y;s.push(m-l,_-A,m+(0==x?1:x)-l,_+(0==S?1:S)-A)}}(0,r.addToColorMap)(u,s,1,1,0,1);var T=f.queryTreesRect([49],p);for(v=T.length,y=0;y<v;y++)(E=T[y]).remove||(m=0|E.pos.x,_=0|E.pos.y,m-l<t&&_-A<o&&m-l>0&&_-A>0&&(x=0|E.vel.x,S=0|E.vel.y,s.push(m-l,_-A,m+(0==x?1:x)-l,_+(0==S?1:S)-A)));for((0,r.addToColorMap)(u,s,1,0,0,1),v=g.length,y=0;y<v;y++){var E;m=0|(E=g[y]).pos.x,_=0|E.pos.y,m-l<t&&_-A<o&&m-l>0&&_-A>0&&(x=0|E.vel.x,S=0|E.vel.y,s.push(m-l,_-A,m+(0==x?1:x)-l,_+(0==S?1:S)-A))}if((0,r.addToColorMap)(u,s,1,0,0,1),s.length>0){var M=(0,a.default)(n.GLctx.Vertices,c);(0,r.drawColorMap)(u,s,M,c,c.LINES)}return"bullets"}}}.apply(t,a),void 0===n||(e.exports=n)},9862:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(737),r(4077)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n),i=o(i);var u={},l=[],A=[],c=[],d=function(e){for(var t=Number.MAX_VALUE,r=Number.MIN_VALUE,a=e.length,n=0;n<a;n++){var o=e[n];o<t&&(t=o),o>r&&(r=o)}var i=r-t;return{min:t,max:r,spread:i,mult:1/(i/100)}},p=0,f=0,h=function(e,t,r,a,n,o){var i=[],s=u[e+"x"];s||(s=u[e+"x"]=[]);var l=u[e+"y"];l||(l=u[e+"y"]=[]),s.push(t),l.push(r);for(var A=d(s),c=d(l),p=s.length,f=0;f<p;f++){var h=(s[f]-A.min)*A.mult,v=(l[f]-c.min)*c.mult;i.push(n-200+f,o-200+h+a),i.push(n-200+f,o-200+v+a)}return s.length>200&&(s.shift(),l.shift()),i};t.default=function(e){var t=e.game,o=e.gl,u=e.SX,d=e.SY,v=e.SW,g=e.SH;if(t.debug){var y=(0,i.default)(e);if(y){var m=10*(y.SX-p)+y.SX,_=10*(y.SY-f)+y.SY;p=y.SX,f=y.SY,A.push(m-u+200+.5*v,_-d+.5*g),A.length>300&&(A.shift(),A.shift());for(var x=0;x<A.length;x+=2)A[x]--;y.damageTaken&&(0,s.LOG_GL)("damagetaken"),c=h("vel",y.vel.x,y.vel.y,-200,v,g)}return(l=h("camera",u,d,0,v,g)).length>0&&((0,n.default)(a.GLctx.Vertices,o),(0,r.drawColor)(l,o,1,1,1,1,o.POINTS),(0,r.drawColor)(c,o,0,1,0,1,o.POINTS),(0,r.drawColor)(A,o,1,0,0,1,o.LINES)),"CameraGraph"}}}.apply(t,a),void 0===n||(e.exports=n)},9101:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(7899),r(7561),r(7967)],n=function(e,t,r,a,n,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a),u=o(u);var l=[],A=[],c=!1,d=u.default.create("loading...",i.TEXT_SIZE_SMALL,"w");t.default=function(e){var t=e.game,o=e.gl,p=e.SH,f=(e.stepMS,e.SW);if(e.step,t.IS_PROCEDURAL){var h=t.procedural.chunks.hash,v=0;for(var g in h)v++;if(v<4&&(c=!0),c){for(var g in l=[],A=[],t.procedural.chunks.qeue){var y=.01*t.procedural.chunks.qeue[g].length;(0,s.line2Poly)(.5*f-y*f*.8*.5,.9*p+0,.5*f+y*f*.8*.5,.9*p+0,A,1)}if((0,r.fillPoly)(0,0,0,f,p,l),A.length>0){(0,a.default)(n.GLctx.Vertices,o),o.blendFunc(o.ONE,o.ONE),(0,r.drawColor)(A,o,1,1,1,1);var m=(0,a.default)(n.GLctx.Texture,o);u.default.addGL(o,m,d,.5*f-.5*d.w,.9*p-i.TEXT_SIZE_SMALL,e)}else c=!1}return"chunkloader"}}}.apply(t,a),void 0===n||(e.exports=n)},9538:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(737),r(7899),r(2261)],n=function(e,t,r,a,n,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a),i=o(i);var l=[],A=[],c=5e-4,d=0,p=1,f=0;t.default=function(e){l=[],A=[],e.game;var t=e.gl,o=e.SH,h=e.stepMS,v=e.SW,g=e.step;if((0,i.default)(e)?(f-=h*c*3*g,d=0):(f+=h*c*g,d+=h),f>1?f=1:f<0&&(f=0,p=1),f>0){(0,r.fillPoly)(0,0,0,v,o,A);var y=(0,u.map)(d,.9*s.LEVEL_COMPLETION_TIMEOUT,s.LEVEL_COMPLETION_TIMEOUT,.1,.5,!0);(0,r.fillPoly)(-1,0,0,v,o*y*f,l),(0,r.fillPoly)(-1,0,o-o*y*f,v,o*y,l)}return l.length>0&&((0,a.default)(n.GLctx.Vertices,t),t.blendFunc(t.DST_COLOR,t.ZERO),d>.7*s.LEVEL_COMPLETION_TIMEOUT&&(p>0&&(p-=.01),(0,r.drawColor)(A,t,1,p,p,1)),(0,r.drawColor)(l,t,0,0,0,1),t.blendFunc(t.ONE,t.ONE)),"cinematic"}}.apply(t,a),void 0===n||(e.exports=n)},3481:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7967),r(1706),r(7899),r(737)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.msToTime=void 0,r=l(r),a=u(a),o=l(o),r.default.createSplitted("1234567890:",n.TEXT_SIZE_SMALL,"g"),r.default.createSplitted("1234567890:",n.TEXT_SIZE_LARGE,"g");var i=r.default.create("You survived for",n.TEXT_SIZE_SMALL,"w"),s=r.default.create("1",n.TEXT_SIZE_MEDIUM,"g"),A=r.default.create("1",n.TEXT_SIZE_LARGE,"r");t.msToTime=function(e){var t=Math.floor(e%1e3/100),r=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),n=Math.floor(e/36e5);return(n>0?(n<10?"0"+n:n)+":":"")+(a<10?"0"+a:a)+":"+(r<10?"0"+r:r)+":"+t};var c=-1;t.default=function(e){var u=e.game,l=e.gl,d=u.resW,p=(u.resH,u.daylight.is_night);if(u.menuSettings.gameClock&&!(u.currentLevel<=13)){var f=(0,o.default)(e),h=f?u.fromClock>0?u.fromClock-u.clock:u.clock:c;c=h;var v=s,g=n.TEXT_SIZE_SMALL;u.fromClock&&(u.clock>u.fromClock&&(h=0),h<1e4&&(g=n.TEXT_SIZE_LARGE,v=A));var y=r.default.createSplitted((0,t.msToTime)(h),g,!f||p?"r":"g",""),m=(0,a.default)(a.GLctx.Texture,l);return r.default.addListGL(l,m,y,d-8*v.w+8,8,e),f||r.default.addGL(l,m,i,d-(8*v.w+8+i.w),8,e),"clock"}}}.apply(t,a),void 0===n||(e.exports=n)},2710:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,__createBinding=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||(ownKeys=function(e){return ownKeys=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},ownKeys(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=ownKeys(e),a=0;a<r.length;a++)"default"!==r[a]&&__createBinding(t,e,r[a]);return __setModuleDefault(t,e),t}),ownKeys,__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__,exports,__webpack_require__(7967),__webpack_require__(1706),__webpack_require__(7561),__webpack_require__(2993),__webpack_require__(3700),__webpack_require__(7899),__webpack_require__(4077)],__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,CreateText_1,GLCTX_1,BufferGL_1,KeyMapper_1,GameState_1,Consts_1,LogGL_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetConsoleOpen=exports.ForceOpen=exports.Log=exports.Err=void 0,CreateText_1=__importDefault(CreateText_1),GLCTX_1=__importStar(GLCTX_1);for(var TEXT_HEIGHT=30,TEXT_SIZE=18,MAX_LINES=14,ROW_SIZE=100,playerLockHandle=null,clearPlayerLock=function(){clearInterval(playerLockHandle),playerLockHandle=null},colors=["r","g","w"],i=0;i<colors.length;i++)CreateText_1.default.createSplitted("1234567890:-+*()[]'\"/|,.-_ <>",TEXT_SIZE,colors[i]),CreateText_1.default.createSplitted("QWERTYUIOPASDFGHJKLZXCVBNM",TEXT_SIZE,colors[i]),CreateText_1.default.createSplitted("qwertyuiopasdfghjklzxcvbnm",TEXT_SIZE,colors[i]);var measure=CreateText_1.default.create("1",TEXT_SIZE,"r"),openTarget=!1,polys=[],polyColorMap=[],isOpen=!1,isOpening=!1,isClosing=!1,topPos=window.innerHeight,OPEN_POS=.5*window.innerHeight,actualHintCode=[],hintLine=[],lines=[],currentLine="game".split(""),userInputIndexes=[],currentUserInputIndex=-1,scrollIndex=0,is_paused=!1,commands={godmode:function(e){if(1===e.player.length)if(clearPlayerLock(),playerLockHandle)e.notifications.push({type:71,message:"GOD MODE DISABLED",life:3*Consts_1.NOTIFICATION_LIFE});else{var t=e.player[0];playerLockHandle=setInterval((function(){t.life=2e3}),100),e.notifications.push({type:71,message:"GOD MODE ENABLED",life:3*Consts_1.NOTIFICATION_LIFE})}},pause:function(){(0,exports.Log)("enabled"),is_paused=!is_paused},zoom:{in:function(e){e.SW*=.7,e.SH*=.7},out:function(e){e.SW*=1.3,e.SH*=1.3},eagleEye:function(e){e.SW<4e3?(e.SW*=10,e.SH*=10):commands.zoom.reset(e)},reset:function(e){e.SW=window.innerWidth,e.SH=window.innerHeight}},clear:function(){lines=[],scrollIndex=0},kill:function(e){if(e.player[0]){var t=e.player[0];t.life=0,t.remove=!0,openTarget=!1}},lock:function(e){if(clearPlayerLock(),e.player[0]){if(playerLockHandle)e.notifications.push({type:71,message:"PLAYER LOCK DISABLED",life:10*Consts_1.NOTIFICATION_LIFE});else{var t=e.player[0],r=t.pos.toPoint();playerLockHandle=setInterval((function(){t.pos.x=r.x,t.pos.y=r.y,t.life=2e3}),100),(0,LogGL_1.LOG_GL_FIXED_FORCED)("PLAYER LOCKED","console msg"),e.notifications.push({type:71,message:"PLAYER LOCK ENABLED",life:3*Consts_1.NOTIFICATION_LIFE})}openTarget=!1}},dusk:function(e){e.daylight.time=Consts_1.DAYLIGHT_DUSK_BEGIN_TIME},dawn:function(e){e.daylight.time=Consts_1.DAYLIGHT_DAWN_BEGIN_TIME}},showHistory=function(e){var t=(currentUserInputIndex>-1?currentUserInputIndex:userInputIndexes.length-1)+e;t>userInputIndexes.length-1?t=userInputIndexes.length-1:t<0&&(t=0),lines[userInputIndexes[t]]&&(currentLine=lines[userInputIndexes[t]].join("").split(""))},convertStr=function(e,t){var r=[];if(e&&e.length>1){for(var a=e.split(""),n=0;n<a.length;n++){var o=a[n];if(t){if(t.indexOf(o)>-1){n++,r.push(o),lines.push(r),r=[];continue}}else if("\\"===o&&("n"===a[n+1]||"r"===a[n+1])){n++,lines.push(r),r=[];continue}r.push(a[n]),r.length>ROW_SIZE&&" "===o&&(lines.push(r),r=[])}r.length>0&&lines.push(r)}else lines.push(e+"");removeOld()},removeOld=function(){lines.length>400&&(lines=lines.splice(100,lines.length))},addToLine=function(e){if(e&&e.length>1)for(var t=e.split(""),r=0;r<t.length;r++)currentLine.push(t[r]),currentLine.length>ROW_SIZE&&(lines.push(currentLine),currentLine=[]);else currentLine.push(e+"");removeOld()},removeFromLine=function(){currentLine.pop()},executeCommand=function(e){for(var t=commands,r=e.split("."),a=0;a<r.length;a++){var n=r[a];t[n]&&(t=t[n])}return!(!t||"function"!=typeof t||(t(window.game),0))},executeLine=function(){var str=currentLine.join("");if(!executeCommand(str)){userInputIndexes.push(lines.length),currentUserInputIndex=-1,lines.push(currentLine),currentLine=[];var res="";try{res=JSON.stringify(eval(str),null,1)}catch(e){res=e+""}convertStr("> "+res,",{}")}},KEYMAP={TILDE:220,BACKSPACE:8,DELETE:46,RETURN:13,SHIFT:16,CAPSLOCK:20,ALT:17,ALTGR:18,UP:38,DOWN:40,LEFT:37,RIGHT:39,HOME:35,END:36,ESCAPE:27},close=function(e){e.SH,e.stepMS,isClosing=!0,(topPos*=1.1)>e.game.resH&&(topPos=e.game.resH,isClosing=!1,isOpening=!1,isOpen=!1)},open=function(e){e.SH,e.stepMS,isOpening=!0,(topPos*=.9)<.5*e.game.resH&&(topPos=.5*e.game.resH,isClosing=!1,isOpening=!1,isOpen=!0)},generateHints=function(){var str=currentLine.join(""),matcher="",parts=[];"."===str[str.length-1]?str=str.substr(0,str.length-1):(parts=str.split("."),matcher=parts.pop(),str=parts.join(".")),actualHintCode=[],hintLine=[];var hints=[],priorityHints=[];if(str.indexOf("game")>-1)try{var res=eval(str),i=1;if("object"==typeof res)for(var key in res){var keyValue=res[key],m="["+i+" "+key+":"+typeof keyValue+"]",c=str+"."+key;if(matcher.length>0){var idxof=key.indexOf(matcher);if(-1===idxof)continue;if(0===idxof){i++,priorityHints.push(m),actualHintCode.push(c);continue}}i++,hints.push(m),actualHintCode.push(c)}}catch(e){hints.push("[no matches]")}else{var i=0,cwd=commands,cwdUpdated=!1;for(0===parts.length&&commands[str]&&(cwd=commands[str],cwdUpdated=!0),i=0;i<parts.length;i++){var currPath=parts[i];cwd[currPath]&&(cwd=cwd[currPath],cwdUpdated=!0)}for(var key in i=0,cwd){var keyType=typeof cwd[key],strType="function"===keyType?"()":">";i++;var m="["+i+" "+key+":"+strType+"]";cwdUpdated?actualHintCode.push(str+"."+key):actualHintCode.push(key),hints.push(m)}}hintLine=priorityHints.concat(hints)},scroll=function(e){var t=scrollIndex+e;t>-MAX_LINES&&t<lines.length&&(scrollIndex=t)},blinkMarker=!1,blinkMarkerCnt=0,handleKeys=function(e,t){var r=e.keys,a=e.charCodeString;if(r.BACKSPACE)return console.log("console backspace"),removeFromLine(),void generateHints();if(r.DELETE)return console.log("console delete"),removeFromLine(),void generateHints();if(r.RETURN)return console.log("console return"),void executeLine();if(r.UP)return console.log("console up"),showHistory(-1),void generateHints();if(r.DOWN)return console.log("console down"),showHistory(1),void generateHints();if(r.HOME)return console.log("console home"),scroll(-1),void(hintLine=["scroll up:"+scrollIndex]);if(r.END)return console.log("console end"),scroll(1),void(hintLine=["scroll down:"+scrollIndex]);if(r.ESCAPE){console.log("console escape");var n=currentLine.join("").split(".");return 1===n.length&&0===n[0].length&&(openTarget=!1),n.pop(),void(currentLine=n.join(".").split(""))}if(r.SHIFT||r.CAPSLOCK||r.ALT||r.ALTGR||r.LEFT||r.RIGHT)console.log("console ignored keys");else{var o=t-48-1;t>=48&&t<=57&&actualHintCode.length>0&&o<actualHintCode.length&&o>=0?currentLine=actualHintCode[o].split(""):null!==a&&addToLine(a),generateHints()}};exports.default=function(e){e.frame;var t=e.game,r=e.gl,a=e.stepMS,n=t.resW,o=t.resH;if(t.allKeyCodes.currentKeyCode===KeyMapper_1.Keys.TILDE&&(t.state.console.active?isOpen&&(openTarget=!1):isOpen||(openTarget=!0,(0,GameState_1.StateMachine)(t.state).consoleActivate())),t.state.console.active&&(isOpen||openTarget||(0,GameState_1.StateMachine)(t.state).consoleDisable(),handleKeys(t.allKeyCodes.console,t.allKeyCodes.currentKeyCode),t.allKeyCodes.console.keys.ESCAPE&&(openTarget=!1),polys=[],polyColorMap=[],openTarget?open(e):isOpen&&close(e),isOpen||isOpening||isClosing)){var i=t.zoomTX;(0,BufferGL_1.fillPoly)(n*i,0,topPos*i,n*i,(topPos+.5*o)*i,polys),(0,BufferGL_1.addToColorMap)(polyColorMap,polys,0,0,0,.8),(0,BufferGL_1.fillPoly)(n*i,0,topPos*i,n*i,1*i,polys),(0,BufferGL_1.addToColorMap)(polyColorMap,polys,.5,.5,.5,1),r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);var s=(0,GLCTX_1.default)(GLCTX_1.GLctx.Vertices,r);(0,BufferGL_1.drawColorMap)(polyColorMap,polys,s,r),r.blendFunc(r.ONE,r.ONE);var u=(0,GLCTX_1.default)(GLCTX_1.GLctx.Texture,r),l=CreateText_1.default.createSplitted(hintLine.join(" ").substr(0,ROW_SIZE),TEXT_SIZE,"g","");CreateText_1.default.addListGL(r,u,l,10,10+topPos,e);for(var A=Math.max(lines.length-MAX_LINES-scrollIndex,0),c=Math.min(A+MAX_LINES,lines.length),d=1,p=A;p<c;p++){var f=CreateText_1.default.createSplitted(lines[p].join(""),TEXT_SIZE,"r","");CreateText_1.default.addListGL(r,u,f,10,10+topPos+d*TEXT_HEIGHT*1,e),d++}var h=CreateText_1.default.createSplitted(currentLine.join(""),TEXT_SIZE,"w",blinkMarker?"_":"");return CreateText_1.default.addListGL(r,u,h,10,10+topPos+d*TEXT_HEIGHT*1,e),(blinkMarkerCnt+=a)>500&&(blinkMarker=!blinkMarker,blinkMarkerCnt=0),"Console"}};var ErrCnt=0,Err=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];is_paused||(ErrCnt++,convertStr("("+ErrCnt+") "+e.join(", ")))};exports.Err=Err;var Log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];is_paused||convertStr(e.join(", "))};exports.Log=Log;var ForceOpen=function(){isOpen||is_paused||(openTarget=!0)};exports.ForceOpen=ForceOpen;var GetConsoleOpen=function(){return isOpen};exports.GetConsoleOpen=GetConsoleOpen}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},8421:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7967),r(1706),r(7899),r(737)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=l(r),a=u(a),o=l(o),r.default.createSplitted("1234567890:",n.TEXT_SIZE_SMALL,"g"),t.default=function(e){var t,i=e.game,s=e.gl,u=i.daylight.is_night;if(!(i.currentLevel<=13)){var l=i.resW,A=(0,o.default)(e);if(A&&!(null===(t=A.abilities.hash[1])||void 0===t?void 0:t.activated)){var c=n.TEXT_SIZE_SMALL,d=A.credits+"$ ",p=A.abilities.hash[11];if(p){var f=p.data;f.iron.value>0&&(d+="["+Math.floor(f.iron.value)+"Ir] "),f.platinum.value>0&&(d+="["+Math.floor(f.platinum.value)+"Pl] "),f.minerals.value>0&&(d+="["+Math.floor(f.minerals.value)+"Mi] ")}var h=r.default.createSplitted(d,c,u?"r":"g",""),v=(0,a.default)(a.GLctx.Texture,s);return r.default.addListGL(s,v,h,.5*l-h[0].w*d.length*.5,8,e),"credits"}}}}.apply(t,a),void 0===n||(e.exports=n)},5482:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(737)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Darkness=t.setDarknessFollower=void 0,a=o(a),i=o(i);var s=[],u=null;t.setDarknessFollower=function(e){u=e},t.Darkness=function(e,t,o){void 0===o&&(o=1);var i=t.game,u=t.gl,l=t.SH,A=t.SW,c=t.SX,d=t.SY;s=[];var p=(A>l?A:l)*(i.resW/A)*1.5*o,f=e.x-c,h=e.y-d;if((0,r.fillPolyForFan)(A,0,0,A,l,s),s.length>0){u.blendFunc(u.DST_COLOR,u.ZERO),(0,a.default)(n.GLctx.VerticesGradient,u);var v=(0,n.GLUniformLocation)(u,"u_pos_x"),g=(0,n.GLUniformLocation)(u,"u_pos_y");u.uniform1f(v,f),u.uniform1f(g,h);var y=(0,n.GLUniformLocation)(u,"u_perimiter");u.uniform1f(y,.5*p*(1+t.game.daylight.darkness_multip)),(0,r.drawColor)(s,u,1,1,1,1),u.blendFunc(u.ONE,u.ONE)}},t.default=function(e){s=[];var r=e.game,a=(e.gl,e.SH),n=e.SW,o=e.SX,l=e.SY;if(!r.menuSettings.extensiveUI&&!r.settings_no_darkness){var A=1,c=(0,i.default)(e),d=u;return d||(c?(c.abilities.active.cloak>0&&(A*=.2),d=c.pos):d={x:o+.5*n,y:l+.5*a}),(0,t.Darkness)(d,e,A),u=null,"darkness"}}}.apply(t,a),void 0===n||(e.exports=n)},8870:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2093),r(7561),r(1706),r(1706),r(7561),r(7185),r(998),r(9262)],n=function(e,t,r,a,n,i,s,u,l,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o(i);var c=[],d=[],p=[],f=[],h=[],v=[],g=([[.2,.2,.5],[.2,.5,.2],[.5,.2,.2]].map((function(e){return e.map((function(e){return.4*e}))})),[]),y=new A.Vector(0,0),m=new A.Vector(0,0);t.default=function(e){var t=e.game,o=e.gl,A=e.SX,_=e.SY;e.SW,e.SH,c=[],f=[],d=[],p=[],v=[],h=[],g=[];var x=t.screen.rect,S=(0,r.getQuadTreesObj)().queryTreesRect([0],x),T=t.player[0];T&&T.debugCircle&&(0,s.blockCirclePoly)(30,T.debugCircle.radius,T.debugCircle.pos.x-A,T.debugCircle.pos.y-_,0,c);for(var E=0;E<S.length;E++){for(var M=S[E],b=(0,u.midpoint)(M.comp[0].vertex[2],M.pos,.04),I=(0,u.midpoint)(M.comp[0].vertex[1],M.pos,.04),L=(0,u.midpoint)(M.comp[0].vertex[2],b,.5),P=(0,u.midpoint)(M.comp[0].vertex[1],I,.5),w=0;w<5;w++){var R=(0,u.midpoint)(L,P,.165*(w+1));g.push(R)}g[2]=(0,u.midpoint)(g[2],M.pos,.012);for(var O=0;O<M.cannons.length;O++){var C=M.cannons[O],D=.03*M.radius;(0,s.blockCirclePoly)(12,D,C.pos.x,C.pos.y,C.angle,h,0,A,_,D);for(var G=[C.angle,C.min,C.max],N=0;N<1;N++)m.setLength(0===N?.1*M.radius:40),m.setAngle(G[N]),(0,a.line2Poly)(C.pos.x-A,C.pos.y-_,C.pos.x+m.x-A,C.pos.y+m.y-_,h,0===N?3:.5);(0,l.GlowCustomLayout)(C.pos,.045,[C.pos.x-A-50,C.pos.y-_-50,C.pos.x-A-50,C.pos.y-_+50,C.pos.x-A+50,C.pos.y-_+50,C.pos.x-A+50,C.pos.y-_-50,C.pos.x-A-50,C.pos.y-_-50,C.pos.x-A+50,C.pos.y-_+50],e,.4,.4,.4,1)}if((0,s.addToColorMap)(v,h,.3,.3,.3,1),M.debugCircle&&(0,s.blockCirclePoly)(30,M.debugCircle.radius,M.debugCircle.pos.x-A,M.debugCircle.pos.y-_,0,c),M.debugVectors){var B=M.debugVectors;M.pos,(0,a.line2Poly)(B.lineNormalA.x-A,B.lineNormalA.y-_,B.lineNormalB.x-A,B.lineNormalB.y-_,c,2),(0,a.line2Poly)(B.lineNormalC.x-A,B.lineNormalC.y-_,B.lineNormalB.x-A,B.lineNormalB.y-_,c,2),(0,a.line2Poly)(B.lineNormalD.x-A,B.lineNormalD.y-_,B.lineNormalB.x-A,B.lineNormalB.y-_,c,2)}var F=M.comp[0].vertex;(0,a.line2Poly)(F[0].x-A,F[0].y-_,F[1].x-A,F[1].y-_,c,4),(0,a.line2Poly)(F[0].x-A,F[0].y-_,F[2].x-A,F[2].y-_,c,4),(0,a.line2Poly)(F[1].x-A,F[1].y-_,F[2].x-A,F[2].y-_,c,4);var V=(0,u.midpoint)(M.comp[0].vertex[1],M.comp[0].vertex[2]),k=(0,u.midpoint)(V,M.pos,.1);(0,l.GlowCustomLayout)(M.comp[0].vertex[0],1.5,[k.x-A,k.y-_,M.comp[0].vertex[1].x-A,M.comp[0].vertex[1].y-_,M.comp[0].vertex[0].x-A,M.comp[0].vertex[0].y-_],e,1,.8,.8,1),(0,l.GlowCustomLayout)(M.comp[0].vertex[2],1.5,[k.x-A,k.y-_,M.comp[0].vertex[2].x-A,M.comp[0].vertex[2].y-_,M.comp[0].vertex[0].x-A,M.comp[0].vertex[0].y-_],e,.8,.8,.8,1),(0,l.GlowCustomLayout)(k,2.5,[k.x-A,k.y-_,M.comp[0].vertex[2].x-A,M.comp[0].vertex[2].y-_,M.comp[0].vertex[1].x-A,M.comp[0].vertex[1].y-_],e,.6,.6,1,1);var X=(0,u.midpoint)(M.pos,M.comp[0].vertex[1],.7),H=(0,u.midpoint)(M.pos,M.comp[0].vertex[1],.75),U=(0,u.midpoint)(M.pos,M.comp[0].vertex[2],.7),Y=(0,u.midpoint)(M.pos,M.comp[0].vertex[2],.75),W=(0,u.midpoint)(M.pos,M.comp[0].vertex[1],.65),j=((0,u.midpoint)(M.pos,M.comp[0].vertex[1],.8),(0,u.midpoint)(M.pos,M.comp[0].vertex[2],.65)),q=((0,u.midpoint)(M.pos,M.comp[0].vertex[2],.8),(0,u.midpoint)(M.pos,V,.8)),z=(0,u.midpoint)(M.pos,V,.6);(0,l.GlowCustomLayout)(M.pos,.5,[U.x-A,U.y-_,Y.x-A,Y.y-_,q.x-A,q.y-_,z.x-A,z.y-_,q.x-A,q.y-_,U.x-A,U.y-_,X.x-A,X.y-_,H.x-A,H.y-_,q.x-A,q.y-_,z.x-A,z.y-_,q.x-A,q.y-_,X.x-A,X.y-_],e,.4,.4,.4,1),h.push(j.x-A,j.y-_,U.x-A,U.y-_,z.x-A,z.y-_,W.x-A,W.y-_,X.x-A,X.y-_,z.x-A,z.y-_),(0,s.addToColorMap)(v,h,.3,.3,.3,1);var K=(0,u.midpoint)(q,z),Z=(0,u.midpoint)(q,z,.55);y.setAngle(M.radarAngle),y.setLength(.12*M.radius),(0,a.line2Poly)(K.x-A,K.y-_,y.x+K.x-A,y.y+K.y-_,h,4),y.setAngle(M.radarAngle+Math.PI),(0,a.line2Poly)(K.x-A,K.y-_,y.x+K.x-A,y.y+K.y-_,h,4),(0,s.addToColorMap)(v,h,1,1,1,1),(0,a.line2Poly)(Z.x-A,Z.y-_,y.x+Z.x-A,y.y+Z.y-_,h,2),y.setAngle(M.radarAngle),(0,a.line2Poly)(Z.x-A,Z.y-_,y.x+Z.x-A,y.y+Z.y-_,h,2),(0,s.addToColorMap)(v,h,0,0,0,1)}if(c.length>0){var Q=(0,i.default)(n.GLctx.Vertices,o);o.disable(o.BLEND),(0,s.drawColorMap)(f,d,Q,o),(0,s.drawColorMap)(v,h,Q,o),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE),(0,a.drawColor)(p,o,1,1,1,1)}return"Destroyer"}}.apply(t,a),void 0===n||(e.exports=n)},5436:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(1947),r(1947),r(1947),r(998)],n=function(e,t,r,a,n,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n);var A=[];t.default=function(e){var t=e.gl,o=e.SW,c=e.SH,d=e.SX,p=e.SY;return A.length=0,(0,n.default)(a.GLctx.Vertices,t),(0,r.line2Poly)(100,0,1100,1e3,A,10),(0,r.drawColor)(A,t,1,1,1,1),A.length=0,A.length=0,(0,n.default)(a.GLctx.Texture,t),(0,u.setupFrameBufferMulti)(t,2,o,c),(0,u.setTargetToFrameBufferMulti)(e,2,o,c),(0,n.default)(a.GLctx.Vertices,t),(0,r.line2Poly)(0,50,1e3,50,A,30),(0,r.line2Poly)(0,100,1e3,100,A,30),(0,r.line2Poly)(0,150,1e3,150,A,30),(0,r.drawColor)(A,t,1,0,0,1),(0,l.Glow)({x:40+d,y:50+p},800,[],e,.9,.2,.3,1),A.length=0,(0,n.default)(a.GLctx.Texture,t),(0,u.setupFrameBufferMulti)(t,1,o,c),(0,u.setTargetToFrameBufferMulti)(e,1,o,c),(0,n.default)(a.GLctx.Vertices,t),(0,r.line2Poly)(0,0,0,1e3,A,30),(0,r.line2Poly)(50,0,50,1e3,A,30),(0,r.line2Poly)(100,0,100,1e3,A,30),(0,r.line2Poly)(150,0,150,1e3,A,30),(0,r.drawColor)(A,t,0,1,0,1),(0,l.Glow)({x:40+d,y:50+p},800,[],e,.1,.9,.3,1),(0,s.renderFrameBufferMultiCombine)(t,(0,n.default)(a.GLctx.TextureCombineMultiply,t),2,1),(0,i.setTargetToCanvasMulti)(t),t.activeTexture(t.TEXTURE0+0),A.length=0,(0,n.default)(a.GLctx.Vertices,t),(0,r.line2Poly)(0,0,1e3,1e3,A,10),(0,r.drawColor)(A,t,1,1,1,1),"DevGL"}}.apply(t,a),void 0===n||(e.exports=n)},5762:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t});a=[r,t,r(9262),r(7561),r(1706)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDistBoxColorOverride=t.addDistBox=void 0,n=u(n);var o=[],i=[];t.addDistBox=function(e,t,a,n,s,u,l,A,c,d,p){var f=o.pop();if(f)f.pos.x=e,f.pos.y=t,f.width=a,f.height=n,f.destination.x=s,f.destination.y=u,f.toWidth=l,f.toHeight=A,f.remove=!1,f.freeze=0,i.push(f);else{var h={pos:new r.Vector(e,t),destination:new r.Vector(s,u),vel:new r.Vector(c,d),glitch:p,width:a,height:n,toWidth:l,toHeight:A,remove:!1,polyIndex:Math.floor(4.99*Math.random()),freeze:0};i.push(h)}};var s=[],l=[],A=[],c=[],d=[],p=[s,l,A,c,d],f=(Number.MAX_SAFE_INTEGER,null);t.setDistBoxColorOverride=function(e){f=e},t.default=function(e){var t=e.gl,r=(e.SX,e.SY,e.SW,e.SH,e.game);e.step,s.length=0,l.length=0,A.length=0,c.length=0,d.length=0;for(var u=0;u<i.length;u++)(v=i[u]).freeze>0?v.freeze--:(v.pos.x+=v.vel.x,v.pos.y+=v.vel.y,u%2==0&&(v.width>10&&(v.width-=4,v.pos.x+=2),v.height>4&&(v.height-=4,v.pos.y+=2)),(v.pos.x-v.width>v.destination.x||v.pos.x+v.width<v.destination.x)&&(v.remove=!0),v.freeze=Math.random()>.92?Math.round(4*Math.random()):0);var h=[];for(u=0;u<i.length;u++){var v;(v=i[u]).remove?o.push(v):h.push(v),Math.abs(v.vel.x)+Math.abs(v.vel.y)<30&&Math.random()>.6||p[v.polyIndex].push(v.pos.x,v.pos.y,v.pos.x+v.width,v.pos.y,v.pos.x,v.pos.y+v.height,v.pos.x,v.pos.y+v.height,v.pos.x+v.width,v.pos.y+v.height,v.pos.x+v.width,v.pos.y)}return i=h,(s.length||l.length||A.length||c.length||d.length)&&((0,n.default)(n.GLctx.Vertices,t),t.blendFunc(t.DST_COLOR,t.ZERO),(0,a.drawColor)(d,t,0,0,0,1),t.blendFunc(t.ONE,t.ONE),f?((0,a.drawColor)(s,t,.7*f.r,.7*f.g,.7*f.b,f.a),(0,a.drawColor)(l,t,.8*f.r,.8*f.g,.8*f.b,f.a),(0,a.drawColor)(A,t,.6*f.r,.6*f.g,.6*f.b,f.a),(0,a.drawColor)(c,t,.9*f.r,.9*f.g,.9*f.b,f.a)):r.daylight.is_night?((0,a.drawColor)(s,t,.6,.3,.3,.9),(0,a.drawColor)(l,t,.6,.1,.1,.9),(0,a.drawColor)(A,t,.6,.3,.1,.9),(0,a.drawColor)(c,t,.6,.1,.3,.9)):((0,a.drawColor)(s,t,.3,.3,.3,.9),(0,a.drawColor)(l,t,.3,.1,.1,.9),(0,a.drawColor)(A,t,.1,.3,.1,.9),(0,a.drawColor)(c,t,.1,.1,.3,.9))),"distbox"}}.apply(t,a),void 0===n||(e.exports=n)},2800:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(199)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawExternal=void 0,n=o(n),i=o(i);var s=[];t.drawExternal=function(e){var t,r,a,n;if(e.autoSXSY)for(var o=(0,i.default)().engine,u=o.SX,l=o.SY,A=0;A<e.polys.length;A+=2)e.polys[A]-=u,e.polys[A+1]-=l;e.r=null!==(t=e.r)&&void 0!==t?t:1,e.g=null!==(r=e.g)&&void 0!==r?r:1,e.b=null!==(a=e.b)&&void 0!==a?a:1,e.a=null!==(n=e.a)&&void 0!==n?n:1,s.push(e)},t.default=function(e){var t=e.gl,o=s.length;if(o>0){(0,n.default)(a.GLctx.Vertices,t);for(var i=0;i<o;i++){var u=s[i];if((0,r.drawColor)(u.polys,t,u.r,u.g,u.b,u.a,u.mode),u.halt)throw"halting @ draw external"}s=[]}return"DrawExternalGL"}}.apply(t,a),void 0===n||(e.exports=n)},9303:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(7561),r(484),r(2093),r(7967),r(7185),r(737),r(7899),r(998)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n),l=o(l),c=o(c);var f={},h=function(e,t,o,s,u,A,c,h,v,g,y){var m;void 0===y&&(y="r");var _=e.SX,x=e.SY,S=e.gl,T=e.game,E=e.frameCnt,M=e.stepMS,b=o+s;if(c&&(f[b]=1200+150*Math.random()),(E<=1||(null===(m=t.abilities.hash[1])||void 0===m?void 0:m.activated)||T.skillTree.active)&&(f[b]=-(1500+900*Math.random())),f[b]<0&&(f[b]+=M,f[b]>-100&&(f[b]=1200+1050*Math.random())),f[b]>0){f[b]-=M,f[b]<0&&(f[b]=0);var I=E%30/30,L=l.default.create(o,d.TEXT_SIZE_SMALL,y),P=l.default.create(s,d.TEXT_SIZE_SMALL,y),w=Math.max(L.w,P.w);(0,p.Glow)({x:u+_+.5*w,y:A+d.TEXT_SIZE_SMALL+x},100,[],e,.4*h+.1*I,.4*v+.1*I,.4*g+.1*I,1);var R=(0,n.default)(a.GLctx.Texture,S);l.default.addGL(S,R,L,u+.5*(w-L.w),A,e),l.default.addGL(S,R,P,u+.5*(w-P.w),A+d.TEXT_SIZE_SMALL,e),(0,n.default)(a.GLctx.Vertices,S);var O=[];(0,i.cutoffRect)(u,A,w+8,2*d.TEXT_SIZE_SMALL,8,O),(0,r.drawColor)(O,S,h,v,g,1,S.LINES)}},v=(0,s.rect_pool_pop)(0,0,0,0);t.default=function(e){var t,r=e.SW,a=(e.SH,e.SX,e.SY,e.gl,e.game);if(a.currentLevel>13){var n=(0,c.default)(e);if(n){for(var o=.5*r-392,i=100,s=!1,l=(0,u.getQuadTreesObj)().queryTreesRect([31],a.screen.rectSS_400),p=0;p<l.length;p++)if((null===(t=l[p].target)||void 0===t?void 0:t.guid)===n.guid){s=!0;break}h(e,n,"MASTER","CAUTION",o,i,n.damageTaken||0!==n.forceX||0!==n.forceY,1,0,0,"r"),h(e,n,"HULL","FAILING",o+98,i,n.life<d.PLAYER_LIFE_LOW_THRESHOLD,1,0,0,"r"),h(e,n,"MISSILE","LOCK",o+196,i,s,1,0,0,"r"),h(e,n,"PROXIMITY","ALERT",o+294,i,function(e){v.update(e.pos.x-2*e.radius,e.pos.y-2*e.radius,4*e.radius,4*e.radius);var t=(0,u.getQuadTreesObj)().queryTreesRect([],v,!1,3001),r=e.radius,a=function(e,t){for(var r=2e5,a=e.comp[0].vertex,n=0;n<a.length;n++){var o=(0,A.distanceBetweenVectors)(a[n],t);o<r&&(r=o)}return r},n=!1;e:for(var o=0;o<t.length;o++){var i=t[o];if(i.guid!==e.guid){switch(i.type){case 3:case 6:case 7:case 17:continue}if(0===i.shape&&a(e,i.pos)-i.radius<r){n=!0;break e}}}return n}(n),1,1,0,"y"),n.weapons.hash[27]&&h(e,n,"FLAMEOUT","ACTIVE",o+392,i,n.flameOutCnt>0,1,1,0,"y"),n.abilities.hash[1]&&h(e,n,"CLOAK","ACTIVE",o+490,i,n.abilities.hash[1].activated,.1,.1,1,"b"),n.abilities.hash[5]&&h(e,n,"TIMEWARP","ACTIVE",o+588,i,n.abilities.hash[5].activated,.1,.1,1,"b"),n.abilities.hash[3]&&h(e,n,"SHIELD","ACTIVE",o+686,i,n.abilities.hash[3].activated,.1,.1,1,"b")}}return"FaultIconsGL"}}.apply(t,a),void 0===n||(e.exports=n)},903:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t});a=[r,t,r(7561),r(6599),r(1706),r(1708),r(2261),r(2093)],n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=u(n);var l=[],A=[],c=[],d=[];(0,o.createRamp)(A,80,0,1,.2),(0,o.createRamp)(A,20,1,0,.2),(0,o.createRamp)(c,8,0,.2,.1),(0,o.createRamp)(c,8,.2,0,.1),(0,o.createRamp)(c,44,0,.3,.1),(0,o.createRamp)(c,40,.4,0,.1),(0,o.createRamp)(d,50,1,.1,.15),(0,o.createRamp)(d,50,.1,0,.15),(0,o.createRamp)([],100,0,1,.1),t.default=function(e){e.SW,e.SH,e.SX,e.SY;var t=e.gl,u=e.game,p=e.step;l=[];for(var f=(0,s.getQuadTreesObj)().queryTreesRect([27],u.screen.rectSS_200),h=0;h<f.length;h++){var v=f[h],g=Math.round(v.colorRamp);o.rampSize[g]>.01&&(g<50&&!v.collided&&(0,a.RayCaster)(v.pos,.2,e,A[g],c[g],d[g],1,v.vel.getAngle(),o.rampSize[g]),v.large,(0,a.RayCaster)(v.pos,.18*(v.large?o.rampSize[g]*((0,i.RandomStepBased)(p,v.guid)>.8?9:6):o.rampSize[g]),e,A[g]*(v.large?.3:1),c[g]*(v.large?.3:1),d[g]*(v.large?.3:1),1))}return l.length>0&&((0,n.default)(n.GLctx.Vertices,t),(0,r.drawColor)(l,t,1,1,1,1)),"FlameThrower"}}.apply(t,a),void 0===n||(e.exports=n)},67:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(50),r(7561),r(2261),r(2093),r(3431)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r),t.default=function(e){var t=e.game,o=e.gl,u=(e.WW,e.WH,e.SX,e.SY,e.SW,e.SH,e.step),l=(0,i.getQuadTreesObj)();if(l.All)for(var A=l.queryTreesRect([23],t.screen.rectSS_200),c=0;c<A.length;c++)if((y=A[c]).life<100){var d=10,p=y.life/d;(0,r.default)(e,5-.5*p,d-p+(0,n.RandomStepBased)(u,y.guid)*(d-p),y.pos.x,y.pos.y,250,0,50,.3,"Enable",128,1),(0,r.default)(e,5-.5*p,d-p+(0,n.RandomStepBased)(u,y.guid)*(d-p),y.pos.x,y.pos.y,255,200,150,.3,"Enable",128,1)}if(l){var f=l.queryTreesRect([0],t.screen.rectSS_200);for(c=0;c<f.length;c++){var h=f[c];if(h.life<200)for(var v=Math.min(.005*(200-h.life)*6,h.cannons.length),g=(d=20,p=h.life/20,0);g<v;g++){var y=h.cannons[g];(0,r.default)(e,5-.5*p,d-p+(0,n.RandomStepBased)(u,h.guid+g)*(d-p),y.pos.x,y.pos.y,250,0,50,.3,"Enable",128,1)}}}var m=(0,s.getAllAnomalies)(e.game);for(c=0;c<m.length;c++){var _=m[c];(0,r.default)(e,220,350,_.pos.x,_.pos.y,50,0,0,.1,"Enable",512),(0,r.default)(e,120,159,_.pos.x,_.pos.y,255,255,255,.7,"Enable",256)}var x=t.spaceFog,S=x.length;for(c=0;c<S;c++){var T=x[c];if((0,a.onStage)(e,T.x,T.y,1200+T.radius)){var E=T.x,M=T.y;T.fire?((0,r.default)(e,T.radius,300*(0,n.RandomStepBased)(u,T.guid),E,M,100,200,100,.3,"Enable",512),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),(0,r.default)(e,.1*T.radius,250,E,M,0,0,0,.9,"Disable",256),o.blendFunc(o.ONE,o.ONE),(0,r.default)(e,30,100*(0,n.RandomStepBased)(u,T.guid)+100,E,M,100,200,100,.3,"Disable",512)):((0,r.default)(e,T.radius,128,E,M,255,0,0,.9,"Disable",32),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),(0,r.default)(e,.66*T.radius,600,E,M,0,0,0,.9,"Disable",512),(0,r.default)(e,.66*T.radius,200,E,M,100,100,100,.3,"Disable",512),o.blendFunc(o.ONE,o.ONE),(0,r.default)(e,.2*T.radius,12,E,M,255,0,0,.4,"Disable",8))}}return"fog"}}.apply(t,a),void 0===n||(e.exports=n)},6357:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(1706),r(7561),r(8155)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r);var s=[];t.default=function(e){var t=e.gl,o=(e.game,e.SX),u=e.SY;e.SW,e.SH,s=[];for(var l=(0,i.getFragmentBlackTree)().references,A=l.length,c=0;c<A;c++)for(var d=l[c],p=0;p<3;p++){var f=d.triangle[p];s.push(f.x-o+d.pos.x,f.y-u+d.pos.y)}return s.length>0&&((0,r.default)(a.GLctx.Vertices,t),t.blendFunc(t.DST_COLOR,t.ZERO),(0,n.drawColor)(s,t,.2,0,0,1,t.TRIANGLES),t.blendFunc(t.ONE,t.ONE)),"fragments"}}.apply(t,a),void 0===n||(e.exports=n)},9734:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(1706),r(7561),r(386)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r);var s=[];t.default=function(e){var t=e.gl,o=(e.game,e.SX),u=e.SY;e.SW,e.SH,s=[];for(var l=(0,i.getFragmentTree)().references,A=l.length,c=0;c<A;c++)for(var d=l[c],p=0;p<3;p++){var f=d.triangle[p];s.push(f.x-o+d.pos.x,f.y-u+d.pos.y)}return s.length>0&&((0,r.default)(a.GLctx.Vertices,t),(0,n.drawColor)(s,t,.5,.5,.5,1,t.TRIANGLES)),"fragments"}}.apply(t,a),void 0===n||(e.exports=n)},2639:(e,t,r)=>{var a,n;a=[r,t,r(2093),r(484),r(2261),r(839),r(998),r(7899),r(4359)],n=function(e,t,r,a,n,o,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=[],A=(0,a.rect_pool_pop)(0,0,0,0),c=function(e,t,r,a,n,i,s,u,l){var c=e.SX,d=e.SY,p=e.SW;e.SH,A.update(c-250,d+t,p+500,a-t+2);var f={x:A.x+(l?0:A.width),y:A.y+.5*A.height};(0,o.RayCasterLinear)(f,2*A.width,A,e,.4*n,.4*i,.4*s,.4*u,l)};t.default=function(e){e.gl;var t=e.SW,o=e.SH,A=e.SX,d=e.SY,p=e.stepMS;if(l.length=0,!(e.game.currentLevel<=13||e.game.skillTree.active||e.game.isPaused)){var f=e.game.daylight.time,h=(0,u.rectInAncient)(e.game.screen.rectSS_400);h&&(e.game.daylight.is_night||e.game.daylight.is_dusk||(f=s.DAYLIGHT_DUSK_BEGIN_TIME)),h&&e.game.daylight.is_night||(f+=p),f>s.DAYLIGHT_TOTAL_TIME&&(f=0),e.game.daylight.time=f;var v=f>s.DAYLIGHT_DAWN_BEGIN_TIME&&f<s.DAYLIGHT_DAWN_BEGIN_TIME+s.DAYLIGHT_TOTAL_DAWN_TIME,g=f>s.DAYLIGHT_DUSK_BEGIN_TIME&&f<s.DAYLIGHT_DUSK_BEGIN_TIME+s.DAYLIGHT_TOTAL_DUSK_TIME,y=f<s.DAYLIGHT_DAWN_BEGIN_TIME||f>s.DAYLIGHT_DUSK_BEGIN_TIME+s.DAYLIGHT_TOTAL_DUSK_TIME,m=f>s.DAYLIGHT_DAWN_BEGIN_TIME+s.DAYLIGHT_TOTAL_DAWN_TIME&&f<s.DAYLIGHT_DUSK_BEGIN_TIME;if(e.game.daylight.is_dawn=v,e.game.daylight.is_dusk=g,e.game.daylight.is_day=m,e.game.daylight.is_night=y,v||g){var _=(0,n.map)(f,s.DAYLIGHT_DAWN_BEGIN_TIME,s.DAYLIGHT_DAWN_BEGIN_TIME+.5*s.DAYLIGHT_TOTAL_DAWN_TIME,0,1,!0),x=(0,n.map)(f,s.DAYLIGHT_DAWN_BEGIN_TIME,s.DAYLIGHT_DAWN_BEGIN_TIME+s.DAYLIGHT_TOTAL_DAWN_TIME,0,1,!0,!0),S=((0,n.map)(f,s.DAYLIGHT_DAWN_BEGIN_TIME,s.DAYLIGHT_DAWN_BEGIN_TIME+s.DAYLIGHT_TOTAL_DAWN_TIME,0,1,!0),(0,n.map)(f,s.DAYLIGHT_DUSK_BEGIN_TIME,s.DAYLIGHT_DUSK_BEGIN_TIME+s.DAYLIGHT_TOTAL_DUSK_TIME,0,1,!0),(0,n.map)(f,s.DAYLIGHT_DUSK_BEGIN_TIME,s.DAYLIGHT_DUSK_BEGIN_TIME+.5*s.DAYLIGHT_TOTAL_DUSK_TIME,0,1,!0)),T=(0,n.map)(f,s.DAYLIGHT_DUSK_BEGIN_TIME,s.DAYLIGHT_DUSK_BEGIN_TIME+s.DAYLIGHT_TOTAL_DUSK_TIME,0,1,!0,!0);v&&(e.game.daylight.darkness_multip=_),g&&(e.game.daylight.darkness_multip=1-S);var E=4*t,M=(0,a.rect_pool_pop)(A-E,d,t+E,o),b=(0,a.rect_pool_pop)(A,d,t+E,o),I=(0,r.getQuadTreesObj)().queryTreesRect([4,23,45,1,50,2,22,11],v?M:b);(0,a.rect_pool_put)(M),(0,a.rect_pool_put)(b);var L=[],P=I.length;if(v){for(var w=0;w<o;w++)L[w]=t;for(w=0;w<P;w++)for(var R=(B=I[w]).pos.y-d,O=(j=B.pos.x-A+B.radius)>=0?1:Math.max(E+2*j,0)/E,C=B.radius*O,D=Math.round(R-C),G=Math.round(R+C),N=D;N<G;N++)(V=L[N])>j&&(L[N]=j)}if(g){for(w=0;w<o;w++)L[w]=0;for(w=0;w<P;w++){var B;for(R=(B=I[w]).pos.y-d,O=(j=B.pos.x-A-B.radius)<=t?1:Math.max(E+2*j,0)/E,C=B.radius*O,D=Math.round(R-C),G=Math.round(R+C),N=D;N<G;N++)(V=L[N])<j&&(L[N]=j)}}if(v){var F=-1,V=-1,k=0,X=!0,H=.9*_*x,U=.9*_*x,Y=.05*_*x;for(R=0;R<o;R++)(j=L[W=R])>0?-1===V?(F=W,V=j):j!==V&&(c(e,F,0,W,H,U,Y,_*x,X),k=W,F=W,V=j):-1!==V&&(c(e,F,0,W,H,U,Y,_*x,X),F=-1,V=-1,k=W);k<o&&c(e,k,0,o,H,U,Y,_*x,X),(0,i.Glow)({x:A-.5*t,y:d+.3*o+.5*o*_},2*t,[],e,2*H,2*U,2*Y,_*x*2)}if(g){for(F=-1,V=-1,k=0,X=!1,H=1*S*T,U=.1*S*T,Y=.1*S*T,R=0;R<o;R++){var W,j;(j=L[W=R])<t?-1===V?(F=W,V=j):j!==V&&(c(e,F,0,W,H,U,Y,S*T,X),k=W,F=W,V=j):-1!==V&&(c(e,F,0,W,H,U,Y,S*T,X),F=-1,V=-1,k=W)}k<o&&c(e,k,0,o,2*H,2*U,2*Y,S*T,X),(0,i.Glow)({x:A+1.5*t,y:d+.5*o},2*t,[],e,2*H,2*U,2*Y,S*T*2)}return"FromDuskTilDawn"}}}}.apply(t,a),void 0===n||(e.exports=n)},3395:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7967),r(7899),r(1706),r(737),r(5762)],n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=l(r),n=u(n),o=l(o);var s=r.default.create("GET",60,"r"),A=r.default.create("READY",70,"r"),c=r.default.create("1",50,"r"),d=r.default.create("2",50,"r"),p=r.default.create("3",50,"r");t.default=function(e){e.frame;var t=e.SW,u=e.SH,l=e.step,f=e.game,h=e.gl,v=(f.resW,(0,o.default)(e)),g=v?v.life:0,y=f.initGameTime;(y-=l)<0&&(y=0),f.initGameTime=y;var m=.4*t,_=.45*u;if(f.currentLevel>13&&y>.9*a.GAME_INTRO_TIMER)for(var x=1-(y-.9*a.GAME_INTRO_TIMER)/(.1*a.GAME_INTRO_TIMER),S=1-x,T=t,E=u,M=0;M<Math.round(Math.max(148*x,0));M++){var b=(150+120*Math.random())*S;(0,i.addDistBox)(0+T*Math.random()-.5*b,0+Math.random()*E,b,(17+60*Math.random())*S,0+T*Math.random()-.5*b,0+Math.random()*E,20+100*S,100,Math.random()>.5?30+30*Math.random():-30*Math.random()-30,0,0)}if((f.level_completed||g<1||!v)&&(y=a.GAME_INTRO_TIMER),y>0&&!f.level_completed&&g>0){var I=p;if(y<200&&(I=d),y<100&&(I=c),y<8&&(m=300+(Math.random()-.5)*t*.4,_=300+(Math.random()-.5)*t*.4),f.currentLevel>13){var L=(0,n.default)(n.GLctx.TextureDist,h);r.default.addListGL(h,L,[s,A,I],3*Math.random()+m,3*Math.random()+_,e)}}return"game intro"}}.apply(t,a),void 0===n||(e.exports=n)},3085:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7967),r(1706),r(737)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=l(r),a=u(a),n=l(n);var o=r.default.create("GAME OVER",150,"r"),i=r.default.create("space points",40,"r"),s=r.default.create("LEVEL COMPLETED",150,"r");t.default=function(e){var t=e.game,u=e.SW,l=e.SH,A=e.gl,c=u/t.resW;if(0!==t.player.length){var d=(0,n.default)(e);if((d?d.life:0)<1&&(t.SW>.5*t.resW&&(t.SW=.99*t.SW,t.SH=.99*t.SH),t.currentLevel>13)){var p=(0,a.default)(a.GLctx.TextureDist,A);r.default.addGL(A,p,o,.35*u+5*Math.random(),.15*l+5*Math.random(),e),r.default.addGL(A,p,i,.05*u+5*Math.random(),.5*l+5*Math.random(),e)}if(t.level_completed){t.SW<.5*t.resW&&(t.SW=1.01*t.SW,t.SH=1.01*t.SH),p=(0,a.default)(a.GLctx.TextureDist,A),r.default.addGL(A,p,s,.15*u+5*Math.random(),.2*l+5*Math.random(),e),r.default.addGL(A,p,i,.07*u+5*Math.random(),.4*l+5*Math.random(),e);var f=r.default.create(d.score+"",350,"r");r.default.addGL(A,p,f,i.w*c+.05*u+20+5*Math.random(),.2*l+5*Math.random(),e)}return"game over"}}}.apply(t,a),void 0===n||(e.exports=n)},737:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOtherShipsForThisGuid=t.getOtherShips=void 0,t.default=function(e){var t=e.game.player,r=t.length;if(e.game.playerGuid<0)return t[0];for(var a=e.game.playerGuid,n=0;n<r;n++){var o=t[n];if(o.guid===a)return o}},t.getOtherShips=function(e,t){for(var r=e.game.player,a=[],n=r.length,o=t||e.game.playerGuid,i=0;i<n;i++){var s=r[i];s.guid!==o&&a.push(s)}return a},t.getOtherShipsForThisGuid=function(e,t){for(var r=e.game.player,a=[],n=r.length,o=0;o<n;o++){var i=r[o];i.guid!==t&&a.push(i)}return a}}.apply(t,[r,t]),void 0===a||(e.exports=a)},4200:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(9262),r(998),r(9102),r(7899),r(1867),r(737),r(3578),r(7561),r(2261),r(2093),r(9879),r(7185),r(3431),r(6265)],n=function(e,t,r,a,n,s,u,l,A,c,d,p,f,h,v,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawGenericShipThrust=t.drawPlayerShipThrust=void 0,l=i(l),f=i(f);var y=0,m=[[0,0,1],[1,0,0],[0,1,0]],_=0,x=[],S=new r.Vector(0,0),T=new r.Vector(0,0),E=function(e,t,a,n){return void 0===a&&(a=0),void 0===n&&(n=0),new r.Vector(e.pos.x+Math.cos(t)*-(s.SHIP_LENGTH_RADIUS+a),e.pos.y+Math.sin(t)*-(s.SHIP_LENGTH_RADIUS+n))},M=new r.Vector(0,0),b=function(e,t){var r=A.ShipColors[e.colorIndex]||A.ShipColors[0];(0,a.Glow)(e.pos,4*e.radius,[],t,.5*r.r,.5*r.g,.5*r.b,1)},I=function(e,t,r,a,o,i,s,u){void 0===u&&(u=!1),(0,n.DirectionalGlow)(e,t+a,o,Math.PI*r,i,s,s,s,1),u||((0,n.DirectionalGlow)(e,1.25*t+a,o,Math.PI*r*.5,i,s,s,1,1),(0,n.DirectionalGlow)(e,1.5*t+a,o,Math.PI*r*.2,i,1,s,1,1),(0,n.DirectionalGlow)(e,1.65*t+a,o,Math.PI*r*.1,i,1,s,1,1))},L=new r.Vector(0,0);t.drawPlayerShipThrust=function(e,t,r){var n,o;void 0===r&&(r=1);var i=.5+.2*(0,d.RandomStepBased)(t.step,e.guid),s=.1*(0,d.RandomStepBased)(t.step,e.guid)*r*e.keyCodes.UP;L.set(e.radius*r*.4,0);var l=e.keyCodes,A=null===(n=e.abilities.hash[2])||void 0===n?void 0:n.activated,c=A?.8:.5;if(l.UP||A){var p=E(e,e.angle,0,0);I(p,.2*c*e.keyCodes.UP,.1*c,s,e.angle+Math.PI,t,i)}if(l.DOWN){var f=(0,h.midpoint)(e.comp[0].vertex[0],e.comp[0].vertex[1],.9),v=(0,h.midpoint)(e.comp[0].vertex[0],e.comp[0].vertex[2],.9);I(f,.03*c,.1*c,s,e.angle,t,i),I(v,.03*c,.1*c,s,e.angle,t,i)}(null===(o=e.abilities.hash[2])||void 0===o?void 0:o.activated)&&(p=E(e,e.angle,0,0),I(p,.4*c,.07*c,s,e.angle+Math.PI,t,i),(0,d.rotateVector)(L,e.angle+Math.PI,L),L.add(p),(0,u.Flare)(L,.5,t),(0,a.Glow)(L,.1,[],t,1,1,1,1));var g=.6;l.LEFT&&(I(e.comp[0].vertex[1],.05*c*g,.07*c,s,e.angle+-.5*Math.PI,t,i),I(e.comp[0].vertex[0],.05*c*g,.07*c,s,e.angle+.5*Math.PI,t,i)),l.RIGHT&&(I(e.comp[0].vertex[2],.05*c*g,.07*c,s,e.angle+.5*Math.PI,t,i),I(e.comp[0].vertex[0],.05*c*g,.07*c,s,e.angle+-.5*Math.PI,t,i)),e.abilities.hash[14]&&(l.STRAFERIGHT&&(I(e.comp[0].vertex[2],.05*c*g,.07*c,s,e.angle+-.5*Math.PI,t,i),I(e.comp[0].vertex[0],.05*c*g,.07*c,s,e.angle+-.5*Math.PI,t,i)),l.STRAFELEFT&&(I(e.comp[0].vertex[1],.05*c*g,.07*c,s,e.angle+.5*Math.PI,t,i),I(e.comp[0].vertex[0],.05*c*g,.07*c,s,e.angle+.5*Math.PI,t,i)))},t.drawGenericShipThrust=function(e,t){var r=50===e.type?.05:.3,n=.05,o=.5+.2*(0,d.RandomStepBased)(t.step,e.guid),i=(0,d.RandomStepBased)(t.step,e.guid)*n,s=(0,d.RandomStepBased)(t.step,e.guid)*n,u=(0,d.RandomStepBased)(t.step,e.guid)*n,l=(0,d.RandomStepBased)(t.step,e.guid)*n,A=(0,d.RandomStepBased)(t.step,e.guid)*n;e.turnAcc<.03?(I(e.comp[0].vertex[2],.05*r,.07*r,i,e.angle+-.5*Math.PI,t,o,!0),I(e.comp[0].vertex[0],.05*r,.07*r,s,e.angle+.5*Math.PI,t,o,!0),(0,a.Glow)(e.comp[0].vertex[2],i,[],t,o,o,o,.05),(0,a.Glow)(e.comp[0].vertex[0],s,[],t,o,o,o,.05)):e.turnAcc>.03&&(I(e.comp[0].vertex[1],.05*r,.07*r,u,e.angle+.5*Math.PI,t,o,!0),I(e.comp[0].vertex[0],.05*r,.07*r,l,e.angle+-.5*Math.PI,t,o,!0),(0,a.Glow)(e.comp[0].vertex[1],i,[],t,o,o,o,.05),(0,a.Glow)(e.comp[0].vertex[0],s,[],t,o,o,o,.05));var c=e.vel.getLength();if(!(c<1)){var p=E(e,e.angle,0,0);I(p,.2*r*c*.2,.1*r*c*.2,A,e.angle+Math.PI,t,o),(0,a.Glow)(p,A,[],t,o,o,o,.05)}};var P=0,w=!0,R=0;t.default=function(e){e.WW,e.WH;var n,i,A,E,I,L,O,C,D,G=e.game,N=(e.SW,e.SH,e.SX),B=e.SY,F=(e.gl,e.step);if(G.menuSettings.glow){x=[];var V=(0,p.getQuadTreesObj)();if(V.All){for(var k=G.screen.rect,X=V.queryTreesRect([36],k),H=X.length,U=0;U<H;U++){var Y=X[U];(0,a.Glow)(Y.pos,.003*Y.radius*1.35,x,e,.9,.1,.1,.2)}var W=V.queryTreesRect([2],k);for(U=0;U<W.length;U++){var j=W[U];if(j.miningRig)if(4===j.miningRig.armState){var q=j.miningRig.arm[j.miningRig.arm.length-1];(0,f.default)(e,q.joint,80,20),(0,a.Glow)(q.joint,.01+.05*(0,d.RandomStepBased)(F,j.guid),[],e,.3,.3,1*(0,d.RandomStepBased)(F,j.guid+3),1)}else 5===j.miningRig.armState&&(q=j.comp[0].vertex[0],(0,f.default)(e,q,80,20),(0,a.Glow)(q,.01+.05*Math.random(),[],e,.3,.3,1*Math.random(),1))}var z=V.queryTreesRect([4],k);for(H=z.length,U=0;U<H;U++){var K=z[U];4!==K.type&&(0,a.Glow)(K.pos,.1,x,e,.1,.9,.1,1)}var Z=V.queryTreesRect([43],k);for(H=Z.length,U=0;U<H;U++){var Q=Z[U];(0,a.Glow)(Q.pos,.03*Q.lightIntensity,x,e,.6,.1,.1,1)}var J=V.queryTreesRect([44],k);for(H=J.length,U=0;U<H;U++){var $=J[U];M.setLength(2*$.radius),M.setAngle($.angle),M.add($.pos),$.fireing?(0,a.Glow)(M,.01+.04*(0,d.RandomStepBased)(F,$.guid),x,e,1,1,1,1):$.bullets>0&&(0,a.Glow)($.pos,.01*$.lightIntensity,x,e,.1,.6,.3,1)}var ee=V.queryTreesRect([42],k);for(H=ee.length,U=0;U<H;U++)(Q=ee[U]).target?2===Q.aquireMode?(Q.intersectAaquired&&(0,a.Glow)(Q.intersectA,.003+.015*(0,d.RandomStepBased)(F,Q.guid),x,e,.1,.9,.1,1),Q.intersectBaquired&&(0,a.Glow)(Q.intersectB,.003+.015*(0,d.RandomStepBased)(F,Q.guid),x,e,.1,.9,.1,1),(0,a.Glow)(Q.pos,.01,x,e,.1,.9,.1,1)):1===Q.aquireMode&&(Q.intersectAaquired&&(0,a.Glow)(Q.intersectA,.003+.015*(0,d.RandomStepBased)(F,Q.guid),x,e,.9,.2,.1,1),Q.intersectBaquired&&(0,a.Glow)(Q.intersectB,.003+.015*(0,d.RandomStepBased)(F,Q.guid),x,e,.9,.2,.1,1),(0,a.Glow)(Q.pos,.01,x,e,.9,.2,.1,1)):(0,a.Glow)(Q.pos,.015,x,e,.1,.2,1,1);var te=V.queryTreesRect([3],k);for(U=0;U<te.length;U++){var re=te[U];if(ke=re.cannons[R]){var ae=ke.pos.x,ne=ke.pos.y;if(ke.fireing){T.set(2*re.wallThickness,0),(0,d.rotateVector)(T,ke.angle,T);var oe=ae+T.x,ie=ne+T.y;(0,a.Glow)({x:oe,y:ie},.05,[],e,1,1,1,1)}w?(P+=.19*F)>1&&(w=!1):(P-=.36*F)<0&&(P=0,w=!0,++R>=re.cannons.length&&(R=0));var se=re.weaponsActive?0:1,ue=re.weaponsActive?1:0;(0,a.Glow)({x:ae,y:ne},.04*P,[],e,se,ue,.1,1)}else R=0}var le=(0,v.getAllAnomalies)(e.game);for(H=le.length,U=0;U<H;U++){var Ae=le[U],ce=(ae=Ae.pos.x,ne=Ae.pos.y,new r.Vector(ae,ne));switch(Ae.type){case 12:(0,a.Glow)(ce,.1*Ae.radius,x,e,.6,.1,.6,1);break;case 13:(0,a.Glow)(ce,.1*Ae.radius,x,e,.6,.6,.1,1);break;case 14:(0,a.Glow)(ce,.1*Ae.radius,x,e,.6,.1,.1,1)}(0,u.Flare)(ce,1,e)}var de=(0,g.getForce2Tree)().queryInt(e.game.screen.rect);for(U=0;U<de.length;U++){var pe=de[U];if(1===pe.type)if(pe.radius>30)(0,a.Glow)(pe.pos,Math.max(pe.radius>90?1.8*pe.radius:.5*pe.radius,30),[],e,1,1,1,1),(0,u.Flare)(pe.pos,.1*pe.radius*.01,e);else if(Math.random()>.7){var fe=Math.random();(0,a.Glow)(pe.pos,7+7*Math.random(),[],e,1*fe,1*fe,1,1)}}var he=G.rockets;for(H=he.length,U=0;U<H;U++){var ve=he[U],ge=!0;if(ve.life>s.ROCKET_START_LIFE-20?ge=!1:ve.life>s.ROCKET_START_LIFE-40?ge=(0,d.RandomStepBased)(e.step,ve.guid)>.8:ve.life>s.ROCKET_START_LIFE-60&&(ge=(0,d.RandomStepBased)(e.step,ve.guid)>.4),ge){var ye=1===ve.subType?.3:1;(0,a.Glow)(ve.pos,.1*ye,[],e,.8,.8,1,1),(0,u.Flare)(ve.pos,.35*ye,e)}}var me=(0,l.default)(e);me&&((null===(n=me.weapons.hash[51])||void 0===n?void 0:n.active)&&((null===(i=me.targetLock)||void 0===i?void 0:i.pos)||(null===(A=me.aimTarget)||void 0===A?void 0:A.pos))&&((0,a.Glow)((null===(E=me.targetLock)||void 0===E?void 0:E.pos)||me.aimTarget.pos,.2*(0,d.RandomStepBased)(e.step,me.guid)+.1,[],e,.9,.3,.9,1),(0,u.Flare)((null===(I=me.targetLock)||void 0===I?void 0:I.pos)||me.aimTarget.pos,.3,e)),(null===(L=me.abilities.hash[3])||void 0===L?void 0:L.activated)&&b(me,e),me.life>0&&!me.abilities.active.cloak&&(0,t.drawPlayerShipThrust)(me,e),(null===(O=me.weapons.hash[51])||void 0===O?void 0:O.active)&&!me.unableToComply&&(0,a.Glow)(me.comp[0].vertex[0],.01+.06*(0,d.RandomStepBased)(F,me.guid),x,e,1,1,1,1),(null===(C=me.abilities.hash[10])||void 0===C?void 0:C.activated)&&G.currentLevel>=13&&((null===(D=me.abilities.hash[11])||void 0===D?void 0:D.activated)?(0,a.Glow)(me.aimPoint,17+38*Math.random(),x,e,1,.1,.3+.7*Math.random(),1):(0,a.Glow)(me.aimPoint,13,x,e,.3,1,.3,1)));var _e=V.queryTreesRect([1,50,45,2],k);for(H=_e.length,U=0;U<H;U++){var xe=_e[U];me&&me.guid===xe.guid||(0,c.onStage)(e,xe.pos.x,xe.pos.y,100)&&((null==xe?void 0:xe.abilities.active.shield)>0&&b(xe,e),(0,t.drawGenericShipThrust)(xe,e))}var Se=V.queryTreesRect([0],k);for(H=Se.length,U=0;U<Se.length;U++){var Te=Se[U],Ee=(se=m[y][0],ue=m[y][1],m[y][2]);(0,a.Glow)(Te.comp[0].vertex[y],.01*_,[],e,se,ue,Ee,1),(0,a.GlowCustomLayout)(Te.comp[0].vertex[y],.1*Math.max(0,_-.8)*11,o(o(o([],Te.comp[0].vertex[0].toVertArray(N,B),!0),Te.comp[0].vertex[1].toVertArray(N,B),!0),Te.comp[0].vertex[2].toVertArray(N,B),!0),e,se,ue,Ee,1),(_+=.1*e.step)>1&&(_=0,++y>2&&(y=0));for(var Me=Math.min(3,2*Te.vel.getLength()+.1),be=(0,h.midpoint)(Te.comp[0].vertex[2],Te.pos,.04),Ie=(0,h.midpoint)(Te.comp[0].vertex[1],Te.pos,.04),Le=((0,h.midpoint)(Te.comp[0].vertex[2],be,.5),(0,h.midpoint)(Te.comp[0].vertex[1],Ie,.5),(0,h.midpoint)(Te.comp[0].vertex[1],Te.comp[0].vertex[2])),Pe=(0,h.midpoint)(Le,Te.pos,.1),we=(0,h.midpoint)(Le,Te.pos,-.3),Re=.3,Oe=0;Oe<5;Oe++){var Ce=.1+.15*Me,De=.2+.15*Me,Ge=1,Ne=1,Be=(0,h.midpoint)(be,Ie,.165*(Oe+1));2===Oe&&(Be=(0,h.midpoint)(Be,Te.pos,.02)),Oe<3?Re+=.4:Re-=.4;var Fe=[Pe.x-N,Pe.y-B,we.x-N,we.y-B,Te.comp[0].vertex[1].x-N,Te.comp[0].vertex[1].y-B,Pe.x-N,Pe.y-B,we.x-N,we.y-B,Te.comp[0].vertex[2].x-N,Te.comp[0].vertex[2].y-B];Te.life<150&&Oe%2==0&&(Ce=1*(0,d.RandomStepBased)(F,Te.guid+1),De=0,Ge=0,Ne=.5*(0,d.RandomStepBased)(F,Te.guid+2)+.5),(0,a.GlowCustomLayout)(Be,.13*Re*.4+.05*(0,d.RandomStepBased)(F,Te.guid+3),Fe,e,Ce,De,Ge,1),(0,a.GlowCustomLayout)(Be,.04*Re*.4*Me*1+.01*(0,d.RandomStepBased)(F,Te.guid+4),Fe,e,Ne,Ne,Ne,1)}for(var Ve=0;Ve<Te.cannons.length;Ve++){var ke=Te.cannons[Ve];S.setLength(.1*Te.radius),S.setAngle(ke.angle),S.add(ke.pos),ke.fired&&((0,a.Glow)(S,.01+.02*(0,d.RandomStepBased)(F,Te.guid),[],e,1,1,.2,1),(0,a.GlowCustomLayout)(S,.15+.15*(0,d.RandomStepBased)(F,Te.guid),o(o(o([],Te.comp[0].vertex[0].toVertArray(N,B),!0),Te.comp[0].vertex[1].toVertArray(N,B),!0),Te.comp[0].vertex[2].toVertArray(N,B),!0),e,.2,.2,.1,1))}}for(H=G.traceLine.length,U=0;U<H;U++)for(var Xe=G.traceLine[U],He=Xe.line,Ue=He.length,Ye=0;Ye<Ue;Ye++){var We=He[Ye];(0,a.Glow)(We,.01,[],e,Xe.r,Xe.g,Xe.b,Xe.a)}return"glow"}}}}.apply(t,a),void 0===n||(e.exports=n)},7403:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7967),r(1706),r(7561),r(7899),r(2261)],n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=l(r),a=u(a);var s=[],A=[],c=[],d=0,p=performance.now(),f=0;t.default=function(e){if(e.game.menuSettings.heap){var t=e.gl,u=e.stepMS,l=e.game,h=window.performance.memory.totalJSHeapSize/1e6,v=window.performance.memory.usedJSHeapSize/1e6,g=performance.now()-p;p=performance.now();var y=1e3/g;f>100&&(f=0,c.push(y),A.push(h),s.push(v)),f+=u,A.length>l.resW-d&&(A.shift(),s.shift(),c.shift()),(0,a.default)(a.GLctx.VerticesOverlay,t);for(var m=[],_=[],x=[],S=0;S<A.length;S++)m.push(S,400-A[S]),_.push(S,400-s[S]),x.push(S,400-c[S]);var T=0;for(S=3;S<_.length;S+=3)s[S-3]>s[S]+20&&T++;(0,n.drawColor)(x,t,0,0,.6,1,t.LINE_STRIP),(0,n.drawColor)(m,t,1,0,0,1,t.LINE_STRIP),(0,n.drawColor)(_,t,0,1,0,1,t.LINE_STRIP);var E=r.default.createSplitted("TOTAL: "+(0,i.normalize)(h,"heap total",10,0).avg,o.TEXT_SIZE_SMALL,"r",""),M=r.default.createSplitted("CURR : "+(0,i.normalize)(v,"heap curr",10,0).avg,o.TEXT_SIZE_SMALL,"g",""),b=r.default.createSplitted("FPS  : "+(0,i.normalize)(y,"fps curr",10,0).avg,o.TEXT_SIZE_SMALL,"b",""),I=r.default.createSplitted("M.GC : "+T,o.TEXT_SIZE_SMALL,"w","");0===d&&(d=200);var L=(0,a.default)(a.GLctx.Texture,t),P=A.length+10;return r.default.addListGL(t,L,E,P,50,e),r.default.addListGL(t,L,M,P,70,e),r.default.addListGL(t,L,b,P,90,e),r.default.addListGL(t,L,I,P,110,e),"heap"}}}.apply(t,a),void 0===n||(e.exports=n)},8751:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(6265)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a);var s=[],u={},l=[];t.default=function(e){s=[],e.game;for(var t=e.gl,o=e.SH,A=e.SW,c=(0,i.getForce2Tree)().queryInt(e.game.screen.rect),d=0;d<c.length;d++){var p=c[d];if(1===p.type&&p.radius>200&&!u[p.pos.x+"_"+p.pos.y]){u[p.pos.x+"_"+p.pos.y]=!0,l.push({x:p.pos.x,y:p.pos.y}),(0,r.fillPoly)(-1,0,0,A,o,s);break}}if(s.length>0){(0,a.default)(n.GLctx.Vertices,t);var f=.15;(0,r.drawColor)(s,t,f,f,f,f)}else if(l.length>30){var h=l.shift();delete u[h.x+"_"+h.y]}return"highlight"}}.apply(t,a),void 0===n||(e.exports=n)},8465:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},A=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(737),r(5010),r(7967),r(7899),r(998)],n=function(e,t,r,a,n,o,i,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COORD_GUI_HUD_INV=t.COORD_GUI_HUD_M=void 0,a=u(a),n=A(n),o=A(o),i=A(i);var d=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},p=[],f=[],h=0,v=0,g=1;t.COORD_GUI_HUD_M=.005,t.COORD_GUI_HUD_INV=1/t.COORD_GUI_HUD_M,t.default=function(e){var u=e.WW,A=e.WH,y=e.SX,m=e.SY,_=e.gl,x=e.game,S=e.step,T=x.daylight.is_night,E=x.currentResW,M=x.currentResH,b=(0,n.default)(e);if(b&&!(x.currentLevel<=13)&&x.menuSettings.instruments&&!x.levelEditor){if(b.abilities.active.cloak||x.skillTree.active){if(!(h<.5))return;h+=.01*S}else h>.2&&(h-=.005*S);var I=b.damageTaken||!x.IS_PROCEDURAL&&(0,o.default)(b,u,A)||0!==b.forceX||0!==b.forceY;I?v<3*u&&(v+=g,g*=1.01):v>10?v*=.7:(g=1,v=0),f=[],p=[];for(var L=M*h,P=E*h,w=10+(I?5*Math.random():0),R=1/(4*h),O=50,C=m;C<m+M;C+=O){var D=C,G=(C-C%O)%200==0?25:18;(0,r.line2Poly)(E-w-1*R,D-m-m%O,E-G*R,D-m-m%O,p,2*R)}for(var N=y;N<y+E;N+=O){var B=N,F=(N-N%O)%200==0?25:18;(0,r.line2Poly)(B-y-y%O,M-w-1*R,B-y-y%O,M-F*R,f,2*R)}(0,r.line2Poly)(E-w,L,E-w,M-L,p,2),(0,r.line2Poly)(P,M-w,E-P,M-w,f,2),(0,c.GlowCustomLayout)({x:.5*E+y,y:M+m},1,f,e,T?1:0,T?0:1,0,1),(0,c.GlowCustomLayout)({x:E+y,y:.5*M+m},M/E,p,e,T?1:0,T?0:1,0,1);for(var V=d(Math.round(t.COORD_GUI_HUD_M*(.5*E+y)+v))+"'",k=d(Math.round(t.COORD_GUI_HUD_M*(.5*M+m)+-.5*v))+"'",X=[],H=l(l(l([],V.split(""),!0),[""],!1),k.split(""),!0),U=H.length,Y=0;Y<U;Y++)X.push(i.default.create(H[Y],s.TEXT_SIZE_SMALL,T?"r":"g"));return i.default.addListGL(_,(0,a.default)(v>5?a.GLctx.TextureDist:a.GLctx.Texture,_),X,10,M-2*s.TEXT_SIZE_SMALL*1,e),"instruments"}h=.5}}.apply(t,a),void 0===n||(e.exports=n)},6119:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(1706),r(7561),r(737),r(2093),r(7967),r(7899),r(2261),r(8083)],n=function(e,t,r,a,n,i,s,u,l,A,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r),i=o(i),u=o(u);var d=[],p=[],f={x:0,y:0},h="press e to interact",v=h,g=0;t.default=function(e){var t,o,y=e.gl,m=e.game,_=(e.SW,e.SH,e.SX),x=e.SY,S=e.step,T=e.stepMS,E=(0,i.default)(e);if(!(!E||e.game.clock<5e3||(null===(t=E.abilities.hash[1])||void 0===t?void 0:t.activated))){if(d.length=0,p.length=0,m.skillTree.hasBeenActivated?m.skillTree.hasBeenActivated&&!m.skillTree.active&&(g+=T):(g=0,v=h),E.inSafeZone||m.interactStartTimer>0){var M=(0,s.getQuadTreesObj)().queryTreesVec([3],E.pos,E.radius,E.radius)[0];(null===(o=null==M?void 0:M.centerNoneCannon)||void 0===o?void 0:o.pos)&&0===M.isEnemyForMS?(f.x=M.centerNoneCannon.pos.x,f.y=M.centerNoneCannon.pos.y,m.interactStartTimer+=.03*S,m.interactStartTimer>1&&(m.interactStartTimer=1)):m.interactStartTimer-=.03*S;var b=f.x-_,I=f.y-x,L=18*(0,A.map)(m.interactStartTimer,0,.3,0,1,!0),P=7*(0,A.map)(m.interactStartTimer,0,.6,0,1,!0);if((0,n.line2PolyMiteredAuto)(b+L,I-2*L,b+2*L,I-L,d,P),(0,n.line2PolyMiteredAuto)(b+2*L,I+L,b+L,I+2*L,d,P),(0,n.line2PolyMiteredAuto)(b-L,I+2*L,b-2*L,I+L,d,P),(0,n.line2PolyMiteredAuto)(b-2*L,I-L,b-L,I-2*L,d,P),d.length>0){var w=g>2e3,R=w?v:h;w&&(v=v.substring(0,v.length-1));var O=u.default.create(R.substr(0,R.length*(0,A.map)(m.interactStartTimer,.4,1,0,1,!0)),l.TEXT_SIZE_SMALL,"g"),C=u.default.create("E",48,"g");if((0,r.default)(a.GLctx.Vertices,y),(0,n.drawColor)(d,y,0,.9,0,1),v.length>0&&(d.length=0,(0,n.cutoffRect)(b-(2*L+P),I-(2*L+P),4*L+2*P+O.w,4*L+2*P,2*P,d,p),m.interactStartTimer>.2&&((0,c.drawBackplatePolys)(e,p),(0,n.drawColor)(d,y,0,.9,0,1,y.LINES))),m.interactStartTimer>.3){var D=(0,r.default)(m.interactStartTimer>=1?a.GLctx.Texture:a.GLctx.TextureDist,y);u.default.addGL(y,D,C,b-.5*C.w,I-.5*C.h,e,!0),u.default.addGL(y,D,O,b+L+P,I-.5*O.h,e,!0)}}}return"interact"}}}.apply(t,a),void 0===n||(e.exports=n)},4563:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(737),r(7561),r(9879),r(998)],n=function(e,t,r,a,n,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a),i=o(i),u=o(u);var A=[],c=[],d=[],p=[];t.default=function(e){e.SW,e.SH;var t,o=e.SX,f=e.SY,h=e.gl,v=(0,i.default)(e);if(v){var g=v.weapons.hash[28];if((null==g?void 0:g.active)&&v.aimPoint){A=[];var y=2.5*Math.random();(0,s.line2Poly)(v.pos.x-o,v.pos.y-f,v.aimPoint.x-o-y,v.aimPoint.y-f-y,A,2),(0,s.line2Poly)(v.pos.x-o,v.pos.y-f,v.aimPoint.x-o+y,v.aimPoint.y-f+y,A,2),(0,s.line2Poly)(v.pos.x-o,v.pos.y-f,v.aimPoint.x-o,v.aimPoint.y-f,A,2),d.length>0&&(p=[v.pos.x-o,v.pos.y-f,d[2],d[3],v.aimPoint.x-o,v.aimPoint.y-f]),y=2.5*Math.random(),(0,s.line2Poly)(v.pos.x-o,v.pos.y-f,v.aimPoint.x-o-y,v.aimPoint.y-f-y,c,.3),(0,s.line2Poly)(v.pos.x-o,v.pos.y-f,v.aimPoint.x-o+y,v.aimPoint.y-f+y,c,.3),(0,s.line2Poly)(v.pos.x-o,v.pos.y-f,v.aimPoint.x-o,v.aimPoint.y-f,c,.3),A.length>0&&((0,a.default)(n.GLctx.Vertices,h),h.blendFunc(h.ONE,h.ONE),(0,r.drawColor)(A,h,.1,.1,.7,1,h.LINES),(0,r.drawColor)(c,h,.1,.1,.7,1,h.LINES),p.length&&(0,r.drawColor)(p,h,0,0,.7,1,h.TRIANGLES)),0!==(null===(t=v.aimTarget)||void 0===t?void 0:t.armor.type)&&((0,u.default)(e,v.aimPoint,220+220*Math.random(),99),(0,l.Glow)(v.aimPoint,30+80*Math.random(),[],e,.2,.2,1,1)),d=A,c=[],A=[],p=[]}else d=[],p=[]}return"lazer"}}.apply(t,a),void 0===n||(e.exports=n)},8215:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t});a=[r,t,r(1706),r(7561),r(6265),r(6030)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=u(r);var i={},s={};t.default=function(e){var t=e.gl,u=e.game,l=e.step,A=e.SX,c=e.SY,d=e.SW,p=(e.SH,u.weather.wind),f=(0,n.getForce2Tree)().queryInt(u.screen.rect);(0,r.default)(r.GLctx.VerticesGradientDarkMultply,t),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA);for(var h=(0,r.GLUniformLocation)(t,"u_pos_x"),v=(0,r.GLUniformLocation)(t,"u_pos_y"),g=(0,r.GLUniformLocation)(t,"u_perimiter"),y=function(e){var t=f[e];if(1===t.type&&t.radius>70){var r=t.pos.toPointString();if(!s[r]){var a={contracting:!1,currRadius:0,radius:t.radius,x:t.pos.x-p.x,y:t.pos.y-p.y};(0,o.scheduleOnce)("lighcasterfoxexplosions"+r,(function(){i[r]=a}),350),s[r]=!0}}},m=0;m<f.length;m++)y(m);for(var _ in i){var x=i[_];if(x.contracting?x.currRadius-=.9925:x.currRadius+=.1*x.radius*l,x.currRadius>x.radius&&(x.currRadius=x.radius,x.contracting=!0),x.currRadius<5)delete i[_],delete s[_];else{var S=3*x.currRadius,T=x.x-A+p.x,E=x.y-c+p.y;t.uniform1f(h,T),t.uniform1f(v,E),t.uniform1f(g,S);var M=[];(0,a.fillPolyForFan)(d,T,E,S,S,M,-.5*S,-.5*S);var b=x.currRadius/x.radius,I=b*b;(0,a.drawColor)(M,t,0,0,0,I,t.TRIANGLES)}}return t.blendFunc(t.ONE,t.ONE),"fogExplosionDisplacementGL"}}.apply(t,a),void 0===n||(e.exports=n)},1621:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t});a=[r,t,r(1706),r(9262)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=u(r),(new Date).getTime(),new a.Vector(0,0),new a.Vector(0,0),new a.Vector(0,0),t.default=function(e){var t=e.gl,a=e.game,n=e.step,o=e.SX,i=e.SY,s=(e.SW,e.SH,a.resW),u=a.resH,l=a.isPaused?a.weather.wind.x:a.weather.wind.x+=.067*n,A=a.isPaused?a.weather.wind.y:a.weather.wind.y+=.047*n,c=(a.currentLevel<13||a.isPaused,(0,r.default)(r.GLctx.PerlinNoiseFog,t)),d=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,1,0,1,1,0,-1,-1,0,1,-1,0].map((function(e){return 1*e}))),t.STATIC_DRAW);var p=t.getAttribLocation(c,"aPosition");t.enableVertexAttribArray(p),t.vertexAttribPointer(p,3,t.FLOAT,!1,0,0);var f=t.getUniformLocation(c,"uTime"),h=t.getUniformLocation(c,"uLocation"),v=t.getUniformLocation(c,"uColorMultip");t.uniform1f(v,.8);var g=t.getUniformLocation(c,"uInvertColors");t.uniform1i(g,0);var y=t.getUniformLocation(c,"uIntensity");return t.uniform1f(y,1),t.uniform1f(f,.4*a.clock*.001),t.uniform2f(h,(o+.798+l)/(.5*s)%s,(i+.732+A)/(-.5*u)%u),t.drawArrays(t.TRIANGLE_STRIP,0,4),"lightcasterFogGL"}}.apply(t,a),void 0===n||(e.exports=n)},9607:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t});a=[r,t,r(1706),r(7561),r(9262),r(7185),r(2093)],n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=u(r);var s=new n.Vector(0,0),l=new n.Vector(0,0),A=new n.Vector(0,0),c={};t.default=function(e){var t=e.gl,n=e.game,u=(e.step,e.SX),d=e.SY,p=(e.SW,e.SH,(0,i.getQuadTreesObj)());if(p.All){for(var f=p.queryTreesRect([45,50,1,0,2],n.screen.rectSS_200),h=3*n.weather.wind.x,v=3*n.weather.wind.y,g={},y=f.length,m=0;m<y;m++){var _=f[m];g[_.guid]=!0,(D=c[_.guid])||(D=c[_.guid]=[]),_.vel.getLength();var x=45===_.type?90:0===_.type?140:40;D.length>x&&D.splice(0,D.length-x);for(var S=_.comp[0].vertex,T=_.pos.x,E=_.pos.y,M=(0,o.midpoint)(_.pos,S[0],1,s),b=(0,o.midpoint)(_.pos,S[1],1,l),I=(0,o.midpoint)(_.pos,S[2],1,A),L=0;L<1;L++){var P=_.vel.x*((L+1)/1),w=_.vel.y*((L+1)/1);D.push({ax:M.x+h-P,ay:M.y+v-w,bx:b.x+h-P,by:b.y+v-w,cx:I.x+h-P,cy:I.y+v-w,px:T+h-P,py:E+v-w})}}var R=[],O=.965;for(var C in c)if(g[C]){var D=c[C];for(m=0;m<D.length;m++){var G=D[m],N=(0,o.midpointAXAYBXBY)(G.px,G.py,G.ax,G.ay,O),B=N[0],F=N[1],V=(0,o.midpointAXAYBXBY)(G.px,G.py,G.bx,G.by,O),k=V[0],X=V[1],H=(0,o.midpointAXAYBXBY)(G.px,G.py,G.cx,G.cy,O),U=H[0],Y=H[1];if(G.ax=B,G.ay=F,G.bx=k,G.by=X,G.cx=U,G.cy=Y,m>0){var W=R.length;R.push(B-u-h),R.push(F-d-v),R.push(R[W-4]),R.push(R[W-3]),R.push(k-u-h),R.push(X-d-v),R.push(B-u-h),R.push(F-d-v),R.push(R[W-6]),R.push(R[W-5]),R.push(k-u-h),R.push(X-d-v),R.push(B-u-h),R.push(F-d-v),R.push(R[W-6]),R.push(R[W-5]),R.push(U-u-h),R.push(Y-d-v),R.push(B-u-h),R.push(F-d-v),R.push(k-u-h),R.push(X-d-v),R.push(R[W-2]),R.push(R[W-1]),R.push(B-u-h),R.push(F-d-v),R.push(R[W-4]),R.push(R[W-3]),R.push(R[W-2]),R.push(R[W-1])}R.push(B-u-h),R.push(F-d-v),R.push(k-u-h),R.push(X-d-v),R.push(U-u-h),R.push(Y-d-v)}}else delete c[C];t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),(0,r.default)(r.GLctx.Vertices,t),(0,a.drawColor)(R,t,0,0,0,.035),t.blendFunc(t.ONE,t.ONE)}return"fogObjectTraceGL"}}.apply(t,a),void 0===n||(e.exports=n)},4077:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},A=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7967),r(1706),r(7561),r(7899)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_GL_FIXED_ARRAY=t.LOG_GL_FIXED=t.LOG_GL_FIXED_FORCED=t.LOG_GL=t.LOG_GL_CLEAR=t.LOG_GL_CLEAR_ALL=void 0,r=A(r),a=u(a);var i=[],s={},c={},d=!1,p=!0;t.LOG_GL_CLEAR_ALL=function(){for(;i.length>0;)i.pop();for(var e in s)delete s[e];for(var e in c)delete c[e]},t.LOG_GL_CLEAR=function(){for(;i.length>0;)i.pop()},t.LOG_GL=function(e){if(p)if(i[0]&&0===i[0].indexOf(e+"")){var t=i[0],r=t.length;if(")"===t[r-1]){for(var a=0,n=0;n<6;n++)if("("===t[r-(3+n)]){a=n+3;break}var o=t.substr(r-a+1,a-2),s=parseInt(o,10);0===s&&(s=1);var u=t.substr(0,r-a)+"("+(s+1)+")";i[0]=u}else i[0]=e+" (1)"}else i.unshift(e+""),i.length>32&&i.pop()},t.LOG_GL_FIXED_FORCED=function(e,t,r){void 0===r&&(r=!1),o.IS_NODE?console.log(t,e):r&&!o.IS_DEV||(d=!0,c[t]={key:(r?"DEV: ":"")+t,val:e+""})},t.LOG_GL_FIXED=function(e,t){s[t]={key:t,val:e+""}},t.LOG_GL_FIXED_ARRAY=function(e,t){s[t]={key:t,val:e.join(",")}},t.default=function(e){var t=e.gl,o=e.game,u=o.resW,A=0;if(p=o.menuSettings.onScreenLogging,!d&&!p)return"log";var f=(0,a.default)(a.GLctx.Texture,t),h=0;for(var v in c){h++;var g=r.default.create(c[v].key+":",18,"r"),y=r.default.createSplitted(c[v].val,18,"r","");r.default.addListGL(t,f,l([g],y,!0),u-1280,150+20*A,e),A++}if(h>0){var m=u-880,_=[];(0,a.default)(a.GLctx.Vertices,t),(0,n.fillPoly)(0,m,100,100,20,_,0,0),(0,n.drawColor)(_,t,1,0,0,1)}if(!o.menuSettings.onScreenLogging)return"log";for(var x=(0,a.default)(a.GLctx.Texture,t),S=(o.zoomTX,0);S<i.length;S++){var T=r.default.create(i[S],18,"w",!1,!1,null,!1);r.default.addGL(t,x,T,u-480,150+20*S+20*h,e)}for(var v in s)g=r.default.create(s[v].key,18,"y",!1,!1,null),y=r.default.createSplitted(s[v].val,18,"y","",!1,!1,null),r.default.addListGL(t,x,l([g],y,!0),u-880,150+20*A,e),A++;return"Log"}}.apply(t,a),void 0===n||(e.exports=n)},57:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(1706),r(1947),r(1947)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderFrameBufferCombineGL=t.renderTextureToBufferMultiGL=t.renderFrameBufferGL=t.disableFrameBufferGL=void 0,r=o(r),t.default=function(e,t,n,o){void 0===n&&(n=e.game.resW),void 0===o&&(o=e.game.resH),e.SH,e.SX,e.SY;var s=e.gl;return e.game,(0,r.default)(a.GLctx.Texture,s),(0,i.setupFrameBufferMulti)(s,t,n,o),(0,i.setTargetToFrameBufferMulti)(e,t,n,o),"enableFrameBuffer"},t.disableFrameBufferGL=function(e){e.SH,e.SX,e.SY;var t=e.gl;return e.game,(0,i.setTargetToCanvasMulti)(t),t.activeTexture(t.TEXTURE0+0),"enableFrameBuffer"},t.renderFrameBufferGL=function(e,t,r,o,i,s,u){void 0===r&&(r=a.GLctx.Texture),void 0===o&&(o=0),void 0===i&&(i=0),void 0===s&&(s=e.game.resW),void 0===u&&(u=e.game.resH),e.SH,e.SX,e.SY;var l=e.gl;return e.game,(0,n.renderFrameBufferMulti)(l,r,t,o,i,s,u),l.activeTexture(l.TEXTURE0+0),"renderFrameBufferMulti"},t.renderTextureToBufferMultiGL=function(e,t,r,o,s,u,l,A){void 0===o&&(o=a.GLctx.Texture),void 0===s&&(s=0),void 0===u&&(u=0),void 0===l&&(l=e.game.resW),void 0===A&&(A=e.game.resH),e.SH,e.SX,e.SY;var c=e.gl;return e.game,(0,i.setupFrameBufferMulti)(c,t,l,A),(0,n.renderTextureToBufferMulti)(c,t,r,o,s,u,l,A),c.activeTexture(c.TEXTURE0+0),"renderTextureToBuffer"},t.renderFrameBufferCombineGL=function(e,t,o,i,s,u,l){void 0===i&&(i=0),void 0===s&&(s=0),void 0===u&&(u=e.game.resW),void 0===l&&(l=e.game.resH),e.SH,e.SX,e.SY;var A=e.gl,c=(e.game,(0,r.default)(a.GLctx.TextureCombineMultiply,A));return(0,n.renderFrameBufferMultiCombine)(A,c,t,o,i,s,u,l),A.activeTexture(A.TEXTURE0+0),"renderFrameBufferCombineMulti"}}.apply(t,a),void 0===n||(e.exports=n)},9403:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(1706),r(7967),r(4560),r(7899)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r);var u=(n=o(n)).default.create("SPACEPORT WEAPONS ONLINE",s.TEXT_SIZE_SMALL,"g"),l=n.default.create("SPACEPORT WEAPONS OFFLINE",s.TEXT_SIZE_SMALL,"r"),A=n.default.create("ENTERED SPACEPORT",s.TEXT_SIZE_SMALL,"w"),c=n.default.create("RELOADING WEAPONS, REPAIRING HULL...",s.TEXT_SIZE_SMALL,"g"),d=n.default.create("SHIP REPAIRS COMPLETED. WEAPONS RELOADED.",s.TEXT_SIZE_SMALL,"g"),p=n.default.create("LEFT SPACEPORT - SHIP WEAPONS ENABLED",s.TEXT_SIZE_SMALL,"g");t.default=function(e){for(var t=e.gl,o=e.game,f=e.game.notifications,h=f.length,v=0,g=0;g<h;g++){var y=f[g];if(!(y.onlyForGuid&&y.onlyForGuid!==o.playerGuid&&o.playerGuid>-1||o.currentLevel<=13&&71!==y.type)){var m=null;switch(y.type){case 59:m=i.BONUS_BUFFERS.BUFFER_EB;break;case 53:m=i.BONUS_BUFFERS.BUFFER_LIFE;break;case 55:m=i.BONUS_BUFFERS.BUFFER_ROCKET_X1;break;case 56:m=i.BONUS_BUFFERS.BUFFER_ROCKET_X2;break;case 57:m=i.BONUS_BUFFERS.BUFFER_ROCKET_X3;break;case 58:m=i.BONUS_BUFFERS.BUFFER_MISSILE_X6;break;case 52:m=i.BONUS_BUFFERS.BUFFER_SHIELD;break;case 60:m=i.BONUS_BUFFERS.BUFFER_BOOSTERS;break;case 61:m=i.BONUS_BUFFERS.BUFFER_WEAPON_UPGRADE;break;case 62:m=i.BONUS_BUFFERS.BUFFER_DRONE;break;case 63:m=i.BONUS_BUFFERS.BUFFER_AUTOPILOT;break;case 64:m=i.BONUS_BUFFERS.BUFFER_HOMINGBULLETS;break;case 65:m=i.BONUS_BUFFERS.BUFFER_ULTRABRIGHT;break;case 54:m=i.BONUS_BUFFERS.BUFFER_PROXIMITY_MINES_X3;break;case 66:m=i.BONUS_BUFFERS.BUFFER_FLAME;break;case 71:case 73:m=n.default.create(y.message||"err",s.TEXT_SIZE_SMALL,"y");break;case 72:m=n.default.create(y.message||"err",s.TEXT_SIZE_SMALL,"r");break;case 74:m=n.default.create(y.message||"err",s.TEXT_SIZE_SMALL,"g");break;case 77:m=A;break;case 76:m=u;break;case 75:m=l;break;case 78:m=p;break;case 79:m=c;break;case 80:m=d;break;default:m=i.BONUS_BUFFERS.BUFFER_UNKNOWN}n.default.addGL(t,(0,r.default)(y.life<20?a.GLctx.TextureDist:a.GLctx.Texture,t),m,.5*o.resW-.5*m.w,.8*o.resH-v*(1.1*s.TEXT_SIZE_SMALL),e),v++}}return"notifications"}}.apply(t,a),void 0===n||(e.exports=n)},2208:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(1706),r(7561),r(3275)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r);var s=[],u=[];t.default=function(e){var t=e.gl,o=e.game,l=e.SX,A=e.SY;e.SW,e.SH,s=[],u=[];for(var c=o.screen.rectSS_200,d=(0,i.getParasiteTree)().queryInt(c),p=d.length,f=0;f<p;f++){var h=d[f],v=h.segments,g=v.length;if(h.target){var y=h.segments[h.segments.length-1];(0,n.line2Poly)(y.pos.x-l,y.pos.y-A,h.target.ship.pos.x-l,h.target.ship.pos.y-A,u)}for(var m=1;m<g;m++){var _=v[m],x=v[m-1];s.push(_.pos.x-l,_.pos.y-A,x.pos.x-l,x.pos.y-A)}}return s.length>0&&((0,r.default)(a.GLctx.Vertices,t),(0,n.drawColor)(s,t,.9,.15,.15,1,t.LINES),(0,n.drawColor)(u,t,0,1,0,1)),"parasite"}}.apply(t,a),void 0===n||(e.exports=n)},7796:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(4412)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a);var s=[],u=[];t.default=function(e){var t=e.game,o=e.SW,l=e.SH,A=e.SX,c=e.SY,d=e.gl;if(t.menuSettings.particles){var p;s=[],u=[];for(var f=(0,i.getParticleTree)().references,h=f.length,v=0;v<h;v++){var g=0|(p=f[v]).pos.x,y=0|p.pos.y,m=0|p.vel.x,_=0|p.vel.y;s.push(g-A,y-c,g+(0==m?1:m)-A,y+(0==_?1:_)-c)}(0,r.addToColorMap)(u,s,.13,.13,.13,1);var x=t.customParticles;for(h=x.length,v=0;v<h;v++){var S=x[v];g=S.pos.x-A,y=S.pos.y-c,g<o&&y<l&&g>0&&y>0&&s.push(g,y,g+S.vel.x,y+S.vel.y)}(0,r.addToColorMap)(u,s,.5,.3,.2,1);for(var T=t.spacePorts,E=T.length,M=0;M<E;M++){var b=T[M].chargeParticles,I=b.length;for(v=0;v<I;v++){var L=b[v];g=0|L.pos.x,y=0|L.pos.y,g-A<o&&y-c<l&&g-A>0&&y-c>0&&(m=0|L.vel.x,_=0|L.vel.y,s.push(g-A,y-c,g+(0==m?1:m)-A,y+(0==_?1:_)-c))}}if((0,r.addToColorMap)(u,s,.5,1,.5,1),s.length>0){var P=(0,a.default)(n.GLctx.Vertices,d);(0,r.drawColorMap)(u,s,P,d,d.LINES)}return"particles"}}}.apply(t,a),void 0===n||(e.exports=n)},9361:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(3039),r(7561)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a);var u=[],l=[],A=function(e,t,a,n,o,s){var A=e.length;if(A>0){for(var c=0;c<A;c++){var d=e[c];u.push.apply(u,(0,i.vectorsToVertices)(d.complexPartIndices,d.complexPartVectors,d.pos.x-t,d.pos.y-a,d.angle))}(0,r.addToColorMap)(l,u,n,o,s,1)}};t.default=function(e){e.ctx,e.WW,e.WH,e.game,e.SW,e.SH;var t=e.SX,o=e.SY,i=e.gl;e.game.asteroids,u=[],l=[];for(var c=e.game.asteroidParts,d=[],p=[],f=[],h=[],v=0;v<c.length;v++){var g=c[v];if((0,r.onStage)(e,g.pos.x,g.pos.y,600)){switch(g.type){case 24:case 38:(0,s.line2PolyTriangle)(g.pos.x+g.rotatedEdgeA.x-t,g.pos.y+g.rotatedEdgeA.y-o,g.pos.x+g.rotatedEdgeB.x-t,g.pos.y+g.rotatedEdgeB.y-o,u,.25*g.width);break;case 34:d.push(g);break;case 46:p.push(g);break;case 47:h.push(g);break;case 48:f.push(g);break;default:(0,s.line2PolyTriangle)(g.pos.x+g.rotatedEdgeA.x-t,g.pos.y+g.rotatedEdgeA.y-o,g.pos.x+g.rotatedEdgeB.x-t,g.pos.y+g.rotatedEdgeB.y-o,u,g.width)}g.colorFade>127.5&&(g.colorFade-=.1)}}if((0,r.addToColorMap)(l,u,.3,.3,.3,1),A(d,t,o,.1,1,1),A(p,t,o,.6,.1,.1),A(f,t,o,.1,.6,.1),A(h,t,o,.6,.6,.6),u.length>0){var y=(0,a.default)(n.GLctx.Vertices,i);i.disable(i.BLEND),(0,r.drawColorMap)(l,u,y,i),i.enable(i.BLEND)}return"parts"}}.apply(t,a),void 0===n||(e.exports=n)},5849:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(6411),r(737),r(9262),r(7561),r(1706),r(1706),r(5010),r(7899),r(7899)],n=function(e,t,r,a,n,i,s,u,l,A,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a),s=o(s),l=o(l);var d=[],p=[],f=new n.Vector(0,0);t.default=function(e){e.frame;var t=e.WW,n=e.WH,o=e.SW,v=(e.SH,e.SX,e.SY,e.gl),g=e.game,y=(g.SW,(0,a.default)(e));if(y&&!(g.currentLevel<=13)&&g.menuSettings.shipStatus&&!g.levelEditor){f.set(y.vel.x,y.vel.y);var m=y.weapons.all,_=y.abilities.passive,x=[];x.push({str:"power",val:y.life,max:A.SHIP_MAX_LIFE,allowOverFlow:!1},{str:"speed",val:f.getLength()+.01,max:c.SHIP_MAX_VEL,allowOverFlow:!0});for(var S=0;S<m.length;S++){var T=m[S];T.ammunition.value>0&&x.push({str:T.name,val:T.ammunition.value,max:T.ammunition.max,allowOverFlow:!1})}for(S=0;S<_.length;S++){var E=_[S];E.displayAsInstrument&&x.push({str:E.name,val:E.value.n,max:E.value.max,allowOverFlow:!1})}x.push(h(e));var M=x.length,b=110*g.zoomTX,I=.5*(o-M*b);for(d=[],p=[],S=0;S<M;S++){var L=x[S],P=[],w=[],R=y.abilities.active.cloak||g.skillTree.active;(0,r.AnalogueInstrument)(I,30*g.zoomTX,100*g.zoomTX,60*g.zoomTX,L.max,R||L.val<1?0:L.val,L.allowOverFlow,L.str,e,y.guid+S+1,w,P,y.damageTaken||!g.IS_PROCEDURAL&&(0,l.default)(y,t,n)||0!==y.forceX||0!==y.forceY,!R&&L.val>0,0===S),P.length>0&&(d.push(P),p.push(w)),I+=b}if(d.length>0){var O=(0,i.unitePolyColorMaps)(d,p);(0,i.drawColorMap)(O.colorMap,O.polys,(0,s.default)(u.GLctx.Vertices,v),v)}return"PlayerstatsAnalogue"}};var h=function(e){var t=e.game.daylight,r=t.time,a=t.is_dusk,n=t.is_dawn,o=a?"dusk":n?"dawn":"twilight",i=.5;return r>A.DAYLIGHT_DUSK_BEGIN_TIME+.5*A.DAYLIGHT_TOTAL_DUSK_TIME?(i=1-(r-(A.DAYLIGHT_DUSK_BEGIN_TIME+.5*A.DAYLIGHT_TOTAL_DUSK_TIME))/(A.DAYLIGHT_TOTAL_TIME-(A.DAYLIGHT_DUSK_BEGIN_TIME+.5*A.DAYLIGHT_TOTAL_DUSK_TIME)),o="night"):r<A.DAYLIGHT_DUSK_BEGIN_TIME+.5*A.DAYLIGHT_TOTAL_DUSK_TIME&&r>A.DAYLIGHT_DAWN_BEGIN_TIME+.5*A.DAYLIGHT_TOTAL_DAWN_TIME&&(i=1-(r-(A.DAYLIGHT_DAWN_BEGIN_TIME+.5*A.DAYLIGHT_TOTAL_DAWN_TIME))/(A.DAYLIGHT_TOTAL_TIME-(A.DAYLIGHT_DAWN_BEGIN_TIME+.5*A.DAYLIGHT_TOTAL_DAWN_TIME+(A.DAYLIGHT_TOTAL_TIME-(A.DAYLIGHT_DUSK_BEGIN_TIME+.5*A.DAYLIGHT_TOTAL_DUSK_TIME)))),o="daylight"),{allowOverFlow:!0,max:100,str:o,val:100*i}}}.apply(t,a),void 0===n||(e.exports=n)},7447:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(5081),r(7967),r(1706),r(7899),r(737),r(5010),r(7899),r(4359),r(7561),r(8988)],n=function(e,t,r,a,n,o,i,s,A,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),n=u(n),i=l(i),s=l(s);var f,h="g",v=function(){for(var e={},t=0;t<10;t++)e[t]=a.default.create(t+"",o.TEXT_SIZE_SMALL,h);var r=["-","+","?","|"," "];for(t=0;t<r.length;t++)e[r[t]]=a.default.create(r[t],o.TEXT_SIZE_SMALL,h);return e}(),g=(a.default.create("autopilot:",o.TEXT_SIZE_SMALL,h),a.default.create("homing bullets:",o.TEXT_SIZE_SMALL,h),a.default.create("LV:",o.TEXT_SIZE_SMALL,h)),y=a.default.create("SPACE ICE:",o.TEXT_SIZE_SMALL,h),m=a.default.create("INTEGRITY:",o.TEXT_SIZE_SMALL,h),_=(a.default.create("LIFE:",o.TEXT_SIZE_SMALL,h),a.default.create("RADIUS:",o.TEXT_SIZE_SMALL,h)),x=a.default.create("IRON:",o.TEXT_SIZE_SMALL,h),S=a.default.create("PLATINUM:",o.TEXT_SIZE_SMALL,h),T=a.default.create("RARE MINERALS:",o.TEXT_SIZE_SMALL,h);!function(e){e[e.guid=0]="guid",e[e.size=1]="size",e[e.integrity=2]="integrity",e[e.iron=3]="iron",e[e.platinum=4]="platinum",e[e.rare_minerals=5]="rare_minerals"}(f||(f={}));var E=[{buffer:_,type:f.size},{buffer:m,type:f.integrity},{buffer:g,type:f.guid},{buffer:x,type:f.iron},{buffer:S,type:f.platinum},{buffer:T,type:f.rare_minerals}],M=[{buffer:_,type:f.size},{buffer:m,type:f.integrity},{buffer:y,type:f.guid},{buffer:x,type:f.iron},{buffer:S,type:f.platinum},{buffer:T,type:f.rare_minerals}],b=(a.default.create("hull:",o.TEXT_SIZE_SMALL,h),a.default.create("score:",o.TEXT_SIZE_SMALL,h),a.default.create("shield:",o.TEXT_SIZE_SMALL,h),a.default.create("EB:",o.TEXT_SIZE_SMALL,h),a.default.create("Rockets:",o.TEXT_SIZE_SMALL,h),a.default.create("Missiles:",o.TEXT_SIZE_SMALL,h),a.default.create("boost:",o.TEXT_SIZE_SMALL,h),null),I=!1,L=(a.default.create("WARNING: MISSILE LOCK",25,"r"),function(e,t){for(var r=(e+"").split(""),a=r.length,n=0;n<a;n++){var o=v[r[n]];o&&t.push(o)}}),P=!1,w=0,R=-1,O=0,C=function(){O=O>0?1170:1500};t.default=function(e){e.frame;var t=e.WW,u=e.WH,l=e.SW,h=(e.SH,e.SX),v=e.SY,g=e.gl,y=e.game,m=e.step,_=e.stepMS;if(!(y.currentLevel<=13)){var x=l/y.resW,S=(0,i.default)(e);if(!S||S.life<1||S.abilities.active.cloak)return void(O=0);var T=!y.IS_PROCEDURAL&&(0,s.default)(S,t,u),D=[];if(S.keyCodes.TOGGLE_PRIMARY_WEAPON?(b=S.weapons.primary,I=!0,C()):S.keyCodes.TOGGLE_SECONDARY_WEAPON?(b=S.weapons.secondary,I=!0,C()):S.keyCodes.TOGGLE_AUX_WEAPON?(b=S.weapons.aux,I=!0,C()):S.keyCodes.TOGGLE_PRIMARY_ABILITY?(b=S.abilities.primary,I=!1,C()):S.keyCodes.TOGGLE_SECONDARY_ABILITY?(b=S.abilities.secondary,I=!1,C()):S.keyCodes.TOGGLE_AUX_ABILITY&&(b=S.abilities.aux,I=!1,C()),b){var G=300;(0,n.default)(n.GLctx.Vertices,g),(0,p.drawWeaponIcon)(b.types[b.index],.5*l,G-100,.7,[],[],[],1,e);var N=(0,n.default)(O>300&&O<1200?n.GLctx.Texture:n.GLctx.TextureDist,g),B=a.default.create("["+b.name+"]",A.TEXT_SIZE_MEDIUM,"g");a.default.addGL(g,N,B,.5*l-.5*B.w,G-(A.TEXT_SIZE_MEDIUM+10),e,!1);for(var F=0;F<b.types.length;F++){var V,k=b.types[F];V=I?S.weapons.hash[k].name:S.abilities.hash[k].name;var X=a.default.create(V,F===b.index?A.TEXT_SIZE_MEDIUM+8:A.TEXT_SIZE_MEDIUM-8,"g");a.default.addGL(g,N,X,.5*l-.5*X.w,G,e,!1),G+=X.h}(O-=_)<=0&&(b=null,O=0)}if(!S.remove)if(S.life<o.PLAYER_LIFE_LOW_THRESHOLD?P||(y.eventMap[r.GAME_EVENT.PLAYER_DAMAGE_LEVEL_CRITICAL]={},P=!0):(P&&(y.eventMap[r.GAME_EVENT.PLAYER_DAMAGE_LEVEL_OK]={}),P=!1),y.menuSettings.objectData&&S.targetLock&&!(0,c.posInAncient)(S.pos)&&!(0,c.posInAncient)(S.targetLock.pos,!0)){var H=S.targetLock;D=[];var U=0;switch(G=0,H.guid!==R&&(w=0,R=H.guid),H.radius<200?(U=H.pos.x-h+40,G=H.pos.y-v-H.radius-o.TEXT_SIZE_SMALL):(U=H.pos.x-h-80,G=H.pos.y-v+30),H.type){case 4:case 11:var Y=4===H.type?E:M,W=Math.min(Y.length,w),j=0,q=0;for(F=0;F<W;F++){var z=Y[F];(D=[]).push(z.buffer);var K=0;switch(z.type){case f.guid:K=H.guid;break;case f.integrity:K=H.life/H.oLife*100;break;case f.size:K=H.radius;break;case f.iron:K=H.resources.iron;break;case f.platinum:K=H.resources.platinum;break;case f.rare_minerals:K=H.resources.minerals}w>Y.length+F&&L(Math.round(K),D),j=Math.max(j,a.default.measureBuffers(D)*x),D.length>0&&(q+=o.TEXT_SIZE_SMALL,a.default.addListGL(g,(0,n.default)(T||w<2.5*Y.length?n.GLctx.TextureDist:n.GLctx.Texture,g),D,U,G+F*-o.TEXT_SIZE_SMALL,e,!0))}var Z=Math.min(1,w/(2*Y.length)),Q=[],J=G-(q+8)+o.TEXT_SIZE_SMALL;(0,d.cutoffRect)(U-8,J,j+16,q+16,18,Q),(0,n.default)(n.GLctx.Vertices,g),(0,d.drawColor)(Q,g,0,1,0,1,g.LINES),Q=[];var $=H;$.resources.iron>0&&(0,d.line2Poly)(U+8,J-8,U+8,J-(8+Math.min(.2*$.resources.iron,25)*Z),Q,3),$.resources.platinum>0&&(0,d.line2Poly)(U+8+6,J-8,U+8+6,J-(8+Math.min(8*$.resources.platinum,25)*Z),Q,3),$.resources.minerals>0&&(0,d.line2Poly)(U+8+12,J-8,U+8+12,J-(8+Math.min(8*$.resources.minerals,25)*Z),Q,3),(0,d.drawColor)(Q,g,0,1,0,1)}w+=.3*m}else w=0;return"playersStats"}}}.apply(t,a),void 0===n||(e.exports=n)},9794:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t});a=[r,t,r(1706),r(484),r(7561),r(2261),r(2093),r(910),r(7561),r(337)],n=function(e,t,r,a,n,o,i,s,l,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=u(r);var c=[],d=[],p=[],f=[];t.default=function(e){var t=e.SW,u=e.SH,h=e.SX,v=e.SY,g=e.gl,y=(e.game,e.step);p=[],f=[],c=[],d=[];var m=(0,i.getQuadTreesObj)();if(m.All){var _=(0,a.rect_pool_pop)(h-A.PROXIMITY_MINE_RAY_LENGTH,v-A.PROXIMITY_MINE_RAY_LENGTH,t+2*A.PROXIMITY_MINE_RAY_LENGTH,u+2*A.PROXIMITY_MINE_RAY_LENGTH),x=m.queryTreesRect([42],_);(0,a.rect_pool_put)(_);for(var S=x.length,T=0;T<S;T++){var E=x[T],M=E.pos;p.push(M.x-h,M.y-v,E.intersectA.x-h,E.intersectA.y-v),p.push(M.x-h,M.y-v,E.intersectA.x-h-4,E.intersectA.y-v),p.push(M.x-h,M.y-v,E.intersectA.x-h,E.intersectA.y-v-4),E.intersectAaquired?1===E.aquireMode?(0,n.addToColorMap)(f,p,.6*(0,o.RandomStepBased)(y,E.guid),.05,.05,1):2===E.aquireMode&&(0,n.addToColorMap)(f,p,.05,.6*(0,o.RandomStepBased)(y,E.guid),.05,1):(0,n.addToColorMap)(f,p,.1,.1,.8*(0,o.RandomStepBased)(y,E.guid),1),p.push(M.x-h,M.y-v,E.intersectB.x-h,E.intersectB.y-v),p.push(M.x-h,M.y-v,E.intersectB.x-h-4,E.intersectB.y-v),p.push(M.x-h,M.y-v,E.intersectB.x-h,E.intersectB.y-v-4),E.intersectBaquired?1===E.aquireMode?(0,n.addToColorMap)(f,p,.3*(0,o.RandomStepBased)(y,E.guid),.05,.05,1):2===E.aquireMode&&(0,n.addToColorMap)(f,p,.05,.3*(0,o.RandomStepBased)(y,E.guid),.05,1):(0,n.addToColorMap)(f,p,0,0,.1*(0,o.RandomStepBased)(y,E.guid),1),1===E.aquireMode&&((0,l.blockCirclePoly)(.05*E.timerT,2*E.radius,M.x,M.y,0,c,0,h,v,3,!1,0,.05*E.aquireTimer,0,.05*E.aquireTimer),(0,n.addToColorMap)(d,c,1,.1,.1,1));var b=(0,s.hexBox)(E.radius,E.pos,h,v);c.push.apply(c,b[0]),(0,n.addToColorMap)(d,c,.1,.1,.1,1),c.push.apply(c,b[1]),(0,n.addToColorMap)(d,c,.7,.7,.7,1),c.push.apply(c,b[2]),(0,n.addToColorMap)(d,c,.3,.3,.3,1)}}return c.length>0&&((0,r.default)(r.GLctx.Vertices,g),(0,n.drawColorMapSingle)(f,p,g,g.LINES),g.disable(g.BLEND),(0,n.drawColorMapSingle)(d,c,g),g.enable(g.BLEND)),"proximityMines"}}.apply(t,a),void 0===n||(e.exports=n)},3731:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(9262),r(7561),r(1706),r(1706),r(2261),r(7185),r(737),r(7561),r(5010),r(998),r(7561),r(7561),r(4359)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResetRadar=void 0,n=o(n),l=o(l),c=o(c);var v=new r.Vector(0,0),g=new r.Vector(0,0),y=new r.Vector(0,0),m=0,_=[],x=[],S=[],T=.06*Math.PI,E={},M=(new r.Vector(0,0),function(e,t,r,a,n,o,i,s,l,A){for(var c=e.length,d=[],p=0;p<c;p++){var f=e[p],h=Math.floor(f.pos.x/r*n+i),v=Math.floor(f.pos.y/a*o+i);if(!E[f.guid]&&(0,u.fine)(3,t,{x:h,y:v})){var g=h+s,y=v+l,m=0===f.type,_={pos:{x:g,y},life:200,guid:f.guid,type:f.type,radius:f.radius,angle:m?f.angle:0};d.push(_),E[f.guid]=_}}return d}),b=new r.Vector(0,0),I=new r.Vector(0,0),L=new r.Vector(0,0),P=new r.Vector(0,0),w=0;t.ResetRadar=function(){w=0};var R=!0,O=0;t.default=function(e){e.SW;var t=e.WW,r=e.WH,o=(e.SH,e.SX),u=e.SY,C=e.game,D=e.gl,G=C.daylight.is_night,N=e.step;_=[],x=[];var B=(0,l.default)(e)||C.player[0];if(B&&!(C.currentLevel<=13)&&C.menuSettings.minimap&&!C.levelEditor){var F=(0,h.posInAncient)(B.pos);F?O<Math.PI&&(O+=.025):O>0&&(O-=.025);var V=-1*(B.angle+.5*Math.PI)+O;C.isPaused&&(N=0);var k=F&&Math.random()>.95||!C.IS_PROCEDURAL&&(0,c.default)(B,t,r)&&w>0&&!R;k&&Math.random()>.7&&(w=3*Math.random());var X=k||B.damageTaken||0!==B.forceX||0!==B.forceY?(Math.random()-.5)*(k?7:4):0;if(R){if(w-=.01,R!=(B.abilities.active.cloak>0||C.skillTree.active||0!==B.forceX||0!==B.forceY)&&(S=[],w=0,E={}),w<0)return S=[],E={},void(w=0)}else(w+=.01)>1&&(w=1);R=B.abilities.active.cloak>0||C.skillTree.active||0!==B.forceX||0!==B.forceY;var H=(0,s.map)(w,.85,1,0,1),U=110,Y=110;I.set(U,Y);var W=e.IS_MULTIPLAYER?500:800,j=e.IS_MULTIPLAYER?10:30,q=W,z=W,K=(Math.max(U,Y)-10)*(R?H:1);v.set(K,0),g.set(K,0),m+=R||0!==X?0:.025*N*w,k&&Math.random()>.97&&(m+=Math.PI*Math.random()*1.5),(0,s.rotateVector)(v,m,v),(0,s.rotateVector)(g,m-T,g),m>2*Math.PI&&(m-=2*Math.PI);for(var Z=Math.floor(B.pos.x/t*q+10),Q=Math.floor(B.pos.y/r*z+10),J=[{x:Z,y:Q},{x:v.x+Z,y:v.y+Q},{x:g.x+Z,y:g.y+Q}],$=C.enemies,ee=C.spaceSquids,te=C.spacePorts,re=C.spaceSnake,ae=C.asteroids,ne=C.rockFormations,oe=C.spaceBats,ie=C.spaceSpiders,se=C.destroyers,ue=[],le=0;le<re.length;le++)ue.push.apply(ue,re[le].segments);R||S.push.apply(S,function(e,t,r,a,n,o,i,s,u){for(var l=e.length,A=[],c=0;c<l;c++){var d=e[c];A.push.apply(A,M(d,t,r,a,n,o,10,s,u))}return A}((0,h.posInAncient)(B.pos)?[C.ancientBlocks]:[C.ancientBlocks,$,ee,te,ue,te,ae,ne,oe,ie,se],J,t,r,q,z,0,-Z+U,-Q+Y));var Ae=S.length;for(le=0;le<Ae;le++){if((me=S[le]).life-=N,R){var ce=.01*N;me.pos.y>Y?me.pos.y*=1-ce:me.pos.y<Y?me.pos.y*=1+ce:(me.pos.y=Y,me.pos.x>115?me.pos.x*=1-.3*ce:me.pos.x<105?me.pos.x*=1+.3*ce:me.pos.x=U)}b.set(me.pos.x-I.x,me.pos.y-I.y),(0,s.rotateVector)(b,V,b);var de=I.x+X+b.x,pe=I.y+X+b.y;if(me.life<0)me.remove=!0,delete E[me.guid];else{var fe=.005*me.life,he=2,ve=!1;switch(me.type){case 36:he=3;break;case 1:case 45:he=5;break;case 9:he=6;break;case 3:ve=!0,(0,A.crossHair)(de,pe,_,12,1);break;case 4:if(me.radius<j)continue;(he=Math.max(.03*me.radius,1))>4&&(ve=!0,(0,a.blockCirclePoly)(7,he,de,pe,0,_,0,0,0,2));break;case 22:he=Math.max(.062*me.radius,2),ve=!0,(0,A.createBlockCirclePolySingleWall)(de,pe,_,8,0,he,!0);break;case 11:(he=Math.max(.03*me.radius,1))>8&&(ve=!0,(0,A.createBlockCirclePolySingleWall)(de,pe,_,8,0,he,!0));break;case 81:he=2;break;case 0:(0,f.line2PolyTriangleRotateableFilled)(de,pe,7,_,me.angle-.5*Math.PI-B.angle),ve=!0}ve||(0,a.rectangleRotated45Poly)(de,pe,he,_),(0,a.addToColorMap)(x,_,(G?.7:.1)*fe*w,(G?.1:.7)*fe*w,.1*fe*w,1)}}if((0,a.addToColorMap)(x,_,w>1?.5*w:0,.2*w,w>1.1?.5*w:0,1),R){(0,A.line2Poly)(120-H*U,Y,U+90*H,Y,_,2);var ge=K*((H<.5?1:-1)>0?w:w-(w-.5))*.1;(0,a.blockCirclePoly)(40,ge,U,Y,0,_,-1,0,0,ge),(0,a.addToColorMap)(x,_,G?w:0,G?0:w,0,1)}var ye=[];for(le=0;le<Ae;le++){var me;(me=S[le]).remove||ye.push(me)}S=ye,y.set(-K,0),(0,s.rotateVector)(y,m+V,y),!function(e,t,r,n,o,i,u,l,A){L.set(r,n),(0,s.rotateVector)(L,Math.PI+.1*Math.PI,L);for(var c=L.getAngle(),d=0;d<24;d++)P.setFromVec(L),P.setAngle(c-.6*Math.PI*(d/24)),o.push(e,t,e+L.x,t+L.y,e+P.x,t+P.y),(0,a.addToColorMap)(u,o,A?(.4-.05*d)*l:0,A?0:(.4-.05*d)*l,0,1);P.setAngle(L.getAngle()+.1*Math.PI),[].push(e,t,e+L.x,t+L.y,e+P.x,t+P.y)}(U,Y,y.x,y.y,_,0,x,w,G),(0,a.addToColorMap)(x,_,1,1,1,1),(0,p.drawColorMapSingle)(x,_,D);var _e=k?10*(Math.random()-.5):0,xe=k?10*(Math.random()-.5):0;return(0,d.Glow)({x:U*C.zoomTX+o+_e,y:Y*C.zoomTX+u+xe},100*C.zoomTX,_,e,G?.3*w:0,G?0:.3*w,0,1),_=[],x=[],function(e,t,r,a,n){for(var o=r.length,i=0;i<o;i++){var s=r[i];(0,A.createBlockCirclePolySingleWall)(e,t,n,Math.round(68*s),0,a*s)}}(U*C.zoomTX,Y*C.zoomTX,[1,.75,.5,.25],(K+2)*C.zoomTX,_),(0,a.addToColorMap)(x,_,G?.1*w:0,G?0:.1*w,0,1),(0,a.drawColorMap)(x,_,(0,n.default)(i.GLctx.Vertices,D),D,D.LINES),"Radar"}w=0}}.apply(t,a),void 0===n||(e.exports=n)},568:function(e,t,r){var a,n,o,i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},s=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&s(t,e,r[a]);return u(t,e),t}),A=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(4138),r(7561),r(9262),r(7185),r(737),r(50),r(7561),r(2610),r(998),r(2093),r(5714),r(943)],n=function(e,t,r,a,n,o,s,u,c,d,p,f,h,v,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawRagdoll=t.getRagDollPos=void 0,r=l(r),u=A(u),c=A(c),p=A(p);var y=null,m=null,_=i(i({},(0,v.setImovableDefaults)((0,g.BallCreator)(0,0,2,1))),{shape:0,pos:new o.Vector(0,0),vel:new o.Vector(0,0),guid:(0,s.getGuid)(),radius:2,life:2,type:85,collType:26,remove:!1,stunned:!1,targetFlagged:!1,forceX:0,forceY:0,sleepingAABB:!1,armor:null});t.getRagDollPos=function(){return m};var x={x:0,y:0},S={x:0,y:0},T=[],E=[],M=[],b=new o.Vector(0,0),I=0,L=1,P={},w={a:[.33,.35,.32,.3,.2,.1,.05],b:[.1,.11,.12,.12,.11,.1,.05],curves:[0,.2,.3,.4,.6,.8,1]},R={a:[.05,.11,.12,.11,.08,.075,.05],b:[.05,.1,.1,.1,.1,.1,.05],curves:[0,.2,.3,.4,.6,.8,1]},O={a:[.05,.11,.12,.11,.08,.075,.05],b:[.05,.1,.1,.1,.1,.1,.05],curves:[0,.2,.3,.4,.6,.8,1]},C={a:[.1,.13,.14,.15,.15,.15,.15,.14,.125,.11,.1].map((function(e){return 2*e})),b:[.1,.13,.15,.16,.17,.16,.13,.1,.1,.1,.1].map((function(e){return 2*e})),curves:[0,.18,.22,.25,.3,.33,.37,.4,.6,.8,1]},D={a:[.1,.1,.14,.22,0,0,.16,.1,.05,0].map((function(e){return 2*e})),b:[.1,.1,.22,.22,.22,.2,.16,.1,.05,0],curves:[0,.1,.11,.4,.7,.75,.8,.85,.9,.92]};new o.Vector(0,0),t.default=function(e){e.SW,e.gl;var r=e.game,n=(e.SX,e.SY,e.stepMS);if(T=[],M=[],E=[],!r.isPaused){var o=(0,u.default)(e);o?(y=null,m=null,I=null,L=1,x.x=o.pos.x,x.y=o.pos.y,S.x=o.vel.x,S.y=o.vel.y):(y||(y=(0,a.createRagdoll)(x.x,x.y,.66),_.vel.set(S.x,S.y)),(I+=n)>3e3&&L>0&&(L*=.97),y.anim(L))}if(y){var i=y.links.filter((function(e){return 0===e.type}))[0];(0,f.Glow)(i.p0,.03,[],e,.1,0,0,1),(0,t.drawRagdoll)(e,y,3.96,1,.3,.3,.3),y.links.forEach((function(e){if(0===e.type){m={x:e.p0.x,y:e.p0.y};var t=y.getRect(),a=(0,h.getQuadTreesObj)();if(a.All)for(var n=a.queryTreesRect([4,11,50,1,2,31,26,23,36,10,9],t),o=0;o<n.length;o++)y.collideIM(n[o]);_.pos.x=e.p0.x,_.pos.y=e.p0.y,(0,p.default)(r,_,!1,5),_.vel.mult(.005),e.p0.x+=_.vel.x,e.p0.y+=_.vel.y}}))}return"Ragdoll"},t.drawRagdoll=function(e,t,a,o,i,u,l){var A=e.gl,p=e.SX,f=e.SY;t.links.forEach((function(e){P[e.type]=e})),t.links.forEach((function(t){var r=2;switch(t.type){case 2:case 1:case 6:case 5:r=1.2}var A=t.draw(),h=null,v=null,g=null;switch(t.type){case 5:case 7:h=P[0],v=w,g=C;break;case 1:case 3:h=P[0],v=R,g=C;break;case 8:h=P[7],v=R,g=w;break;case 6:h=P[5],v=R,g=w;break;case 4:h=P[3],v=R,g=R;break;case 2:h=P[1],v=R,g=R;break;default:v=null}if(v){var y=h.draw();!function(e,t,r,a,n,o,i,s,u,l,A,c,p,f,h,v){for(var g=[e.a[e.a.length-1],t.a[0]],y=[e.b[e.b.length-1],t.b[0]],m=1,_=1/u,x=0;x<u;x++){var S=g[0]*m,T=g[1]*m,E=y[0]*m,M=y[1]*m;b.set(s,0),b.mult(S),b.setAngle(o+.5*Math.PI),b.add(a);var I=b.toPoint();b.set(s,0),b.mult(T),b.setAngle(i+.5*Math.PI),b.add(a);var L=b.toPoint();c.push(I.x-l,I.y-A,L.x-l,L.y-A),b.set(s,0),b.mult(E),b.setAngle(o-.5*Math.PI),b.add(a);var P=b.toPoint();b.set(s,0),b.mult(M),b.setAngle(i-.5*Math.PI),b.add(a);var w=b.toPoint();c.push(P.x-l,P.y-A,w.x-l,w.y-A);var R=u>1?1-m:1,O=.7*f*R+.01,C=.7*h*R+.01,D=.7*v*R+.01;(0,d.addToColorMap)(p,c,O,C,D,1),m-=_}}(g,v,0,A.a,y.end,y.angle,A.angle,a,o,p,f,T,E,i*r,u*r,l*r)}var m=t.draw();0===t.type&&(0,c.default)(e,1,600,m.a.x,m.a.y,1,.1,.1,1,"Enable",8,0,20);var _=null;switch(t.type){case 7:case 5:_=w;break;case 8:case 6:_=O;break;case 3:case 4:case 1:case 2:_=R;break;case 0:_=C;break;case 9:_=D}_&&function(e,t,r,a,n,o,i,u,l,A,c,p,f,h){for(var v=null,g=null,y=e.curves,m=e.a,_=e.b,x=1,S=1/i,T=0;T<i;T++){for(var E=0;E<y.length;E++){y.length;var M=y[E],I=m[E],L=_[E];I*=x,L*=x;var P=(0,s.midpoint)(t,r,M);b.set(o,0),b.mult(I),b.setAngle(a+.5*Math.PI),b.add(P),v&&u.push(v.x-A,v.y-c,b.x-A,b.y-c),v=b.toPoint(),b.set(o,0),b.mult(L),b.setAngle(n-.5*Math.PI),b.add(P),g&&u.push(g.x-A,g.y-c,b.x-A,b.y-c),g=b.toPoint()}var w=i>1?1-x:1,R=.7*p*w+.01,O=.7*f*w+.01,C=.7*h*w+.01;(0,d.addToColorMap)(l,u,R,O,C,1),x-=S}}(_,t.p0,t.p1,m.angle,m.angle,a,o,T,E,p,f,i*r,u*r,l*r),(0,n.line2Poly)(m.a.x-p,m.a.y-f,m.a.x+1.1*m.b.x-p,m.a.y+1.1*m.b.y-f,M,1.1)}));var h=(0,r.default)(r.GLctx.Vertices,A);A.disable(A.BLEND),o>2?(0,d.drawColorMap)(E,T,h,A,A.LINES):(0,d.drawColorMap)(E,T,h,A,A.TRIANGLE_STRIP),A.enable(A.BLEND)}}.apply(t,a),void 0===n||(e.exports=n)},3079:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t});a=[r,t,r(9262),r(6599),r(7899),r(4077),r(7899),r(2261),r(2093),r(3431),r(6265),r(1706),r(998),r(568),r(3578)],n=function(e,t,r,a,n,o,i,s,l,A,c,d,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),d=u(d);var v=0,g=new r.Vector(0,0),y=new r.Vector(0,0),m=new r.Vector(0,0),_=0,x=0;t.default=function(e){e.WW,e.WH;var t=e.game,r=e.gl,u=e.step,S=e.SX,T=e.SY,E=e.SW,M=e.SH;if(t.menuSettings.raycasting){var b=t.daylight.fog;if(0!==b){var I=.1*b;(0,p.Glow)({x:.5*E+S,y:.5*M+T},1.8*M,[],e,I,I,I,b)}var L=t.screen.rectSS_400,P=(t.screen.rect,(0,l.getQuadTreesObj)());if(P&&P.All){for(var w=P.queryTreesRect([2],L),R=0;R<w.length;R++){var O=w[Math.floor(Math.random()*w.length)];if(O.miningRig&&5===O.miningRig.armState&&Math.random()>.95){var C=O.comp[0].vertex[0];(0,a.RayCaster)(C,.06+.19*Math.random(),e,.7,.7,.7+.3*Math.random(),1)}}for(var D=e.game.player,G=0;G<D.length;G++){var N=D[G];if(N.life>0){if(N.abilities.active.cloak?(_>0&&(_-=.3),x>0&&(x-=.3)):(_<.9&&(_+=.03),x<1&&(x+=.03)),!N.abilities.active.cloak){var B=N.abilities.hash[8];(null==B?void 0:B.activated)?(_=2.2,N.abilities.values.energy<10&&(_=1.8-.1*(10-N.abilities.values.energy)),x=1.5):_=N.life<n.PLAYER_LIFE_LOW_THRESHOLD?.7+.1*(0,s.RandomStepBased)(e.step,N.guid):.8}var F=h.ShipColors[N.colorIndex];(0,a.RayCaster)(N.pos,1.25*_,e,F.r*x*.3,F.g*x*.3,F.b*x*.3,1,void 0,void 0,void 0,void 0,!1,!0)}}var V=(0,f.getRagDollPos)();V&&(0,a.RayCaster)(V,2,e,.5,.05,.2,1);var k=t.rockets,X=k.length;for(R=0;R<X;R++){var H=k[R],U=!0;if(H.life>n.ROCKET_START_LIFE-.2?U=!1:H.life>n.ROCKET_START_LIFE-.4?U=(0,s.RandomStepBased)(e.step,H.guid)>.8:H.life>n.ROCKET_START_LIFE-.6&&(U=(0,s.RandomStepBased)(e.step,H.guid)>.4),U){var Y=1===H.subType?.08:.14;33===H.type?45!==H.ownerType?(0,a.RayCaster)(H.pos,Y,e,.4,.05,.1,1):(0,a.RayCaster)(H.pos,Y,e,.2,.1,.33,1):45!==H.ownerType?(0,a.RayCaster)(H.pos,Y,e,.5,.1,.1,1):(0,a.RayCaster)(H.pos,Y,e,.05,.3,.3,1)}}var W=t.charges;for(X=W.length,(v+=u)>40&&(v=0),R=0;R<X;R++){var j=W[R];(0,a.RayCaster)(j.pos,.4,e,.5,.2,.6,1)}var q=(0,A.getAllAnomalies)(e.game);for(X=q.length,R=0;R<X;R++){var z=q[R],K=z.pos.x,Z=z.pos.y;switch(m.set(K,Z),z.type){case 12:(0,a.RayCaster)(m,2.6*z.radius,e,.6,.1,.6,1);break;case 13:(0,a.RayCaster)(m,2.6*z.radius,e,.6,.6,.1,1);break;case 14:(0,a.RayCaster)(m,2.6*z.radius,e,.9,.1,.1,1);break;case 15:case 16:(0,a.RayCaster)(m,2.5*z.radius,e,.1,.1,.7,1)}}var Q=t.spaceFog;for(X=Q.length,R=0;R<X;R++){var J=Q[R];(0,s.RandomStepBased)(e.step,J.guid)<.97||(K=J.x,Z=J.y,m.set(K+((0,s.RandomStepBased)(e.step,J.guid)-.5)*J.radius*.5,Z+((0,s.RandomStepBased)(e.step,J.guid)-.5)*J.radius*.5),J.fire?(0,a.RayCaster)(m,1+(0,s.RandomStepBased)(e.step,J.guid),e,.7,.1,.1,.6):(0,a.RayCaster)(m,1.5+(0,s.RandomStepBased)(e.step,J.guid),e,.6,.1,.1,.6))}var $=performance.now(),ee=(0,c.getForce2Tree)().queryInt(e.game.screen.rect);for(R=0;R<ee.length;R++){var te=ee[R];1===te.type&&te.radius>3&&((0,a.RayCaster)(te.pos,Math.max(2*te.radius,200),e,.2,.2,.1,1),performance.now()-$>4&&0!==u&&(0,o.LOG_GL)("raycaster gl heavy time op"))}var re=P.queryTreesRect([3],L);for((0,d.default)(d.GLctx.Vertices,r),R=0;R<re.length;R++){var ae=re[R],ne=ae.centerNoneCannon.pos.x,oe=ae.centerNoneCannon.pos.y,ie=ae.centerNoneCannon.life,se=ae.isEnemyForMS>0?.9:0,ue=ie>.1*i.SPACEPORT_START_LIFE?1:2*ie/i.SPACEPORT_START_LIFE;(0,s.RandomStepBased)(e.step,ae.guid)>ue?(0,s.RandomStepBased)(e.step,ae.guid)>.2&&(0,a.RayCaster)({x:ne,y:oe},2.6*ae.radius,e,.3+se,.2,.1,1):(0,a.RayCaster)({x:ne,y:oe},2.4*ae.radius,e,.1+se,.5,.1,1)}for(var le=P.queryTreesRect([23],L),Ae=0;Ae<le.length;Ae++){var ce=le[Ae];if(ce.isCannon&&ce.lightsOn){if(y.set(2*ce.wallThickness,0),y.setAngle(ce.angle),ce.fireing){var de=(0,s.RandomStepBased)(u,234);(0,a.RayCaster)({x:ce.pos.x+y.x,y:ce.pos.y+y.y},100+100*de,e,.9,.9,.1,.3+.7*de)}g.set(1.1*ce.wallThickness,0),(0,s.rotateVector)(g,ce.angle,g);var pe=ce.pos.x+g.x,fe=ce.pos.y+g.y;g.set(.5*ce.wallThickness,0),(0,s.rotateVector)(g,ce.angle+.5*Math.PI,g);var he=pe+g.x,ve=fe+g.y;g.set(.5*ce.wallThickness,0),(0,s.rotateVector)(g,ce.angle-.5*Math.PI,g);var ge=pe+g.x,ye=fe+g.y,me=ce.bullets>0;(0,a.RayCaster)({x:he,y:ve},800,e,me?.8:.6,me?.6:.3,.2,1,ce.angle+.029*Math.PI,.07*Math.PI,void 0,void 0,!1),(0,a.RayCaster)({x:ge,y:ye},800,e,me?.8:.6,me?.6:.3,.2,1,ce.angle-.029*Math.PI,.07*Math.PI,void 0,void 0,!1)}}var _e=P.queryTreesRect([6],L);for(X=_e.length,R=0;R<X;R++){var xe=_e[R];(0,a.RayCaster)(xe.pos,1.8,e,.2,0,0,1)}return"raycaster"}}}}.apply(t,a),void 0===n||(e.exports=n)},2756:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(737),r(2093),r(5318)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r),t.default=function(e){e.gl;var t=(0,r.default)(e),o=(0,a.getQuadTreesObj)();if(o&&o.All&&t)return(0,n.RayCasterLOS)(t.pos,1,e,t.guid),"raycaster LOS"}}.apply(t,a),void 0===n||(e.exports=n)},8803:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(9262),r(2093),r(998),r(737),r(4359)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o(i);var u=new r.Vector(0,0),l=[],A=0;t.default=function(e){e.SX,e.SY,e.SW,e.SH;var t=e.step,r=e.stepMS,o=e.game,c=!1,d=(0,i.default)(e);d&&(0,s.posInAncient)(d.pos)&&(c=!0);var p=o.screen.rectSS_800,f=(0,a.getQuadTreesObj)(),h=c?[]:f.queryTreesRect([9,10,8],p,!0),v=h.length;if(A>100){if(v>0){var g=h[Math.floor(h.length*Math.random())].pos;u.set(400+1e3*Math.random(),0),u.setAngle(Math.random()*Math.PI*2),u.add(g);var y={x:2.2*(Math.random()-.5),y:2.2*(Math.random()-.5)};l.push({pos:u.toPoint(),vel:y,size:.13*(.1*Math.random()+.05),life:6e3*Math.random()+1200})}A=0}A+=r;for(var m=v>0?r:2.2*r,_=0;_<l.length;_++)(S=l[_]).pos.x+=S.vel.x*t,S.pos.y+=S.vel.y*t,S.vel.x*=.99,S.vel.y*=.99,S.life-=m,S.size-=3e-5,(0,n.Glow)({x:S.pos.x,y:S.pos.y},S.size,[],e,Math.min(.001*S.life,.8),0,0,1);var x=[];for(_=0;_<l.length;_++){var S;(S=l[_]).life>0&&S.size>0&&p.intersectsPoint(S.pos)&&x.push(S)}return l=x,"redParticles"}}.apply(t,a),void 0===n||(e.exports=n)},7049:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(998),r(2261),r(2093),r(3039),r(737),r(7185),r(3431),r(6265)],n=function(e,t,r,a,n,s,u,l,A,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),u=i(u);var d=function(e,t,a,n,o,i,u,l){for(var A=a.SX,c=a.SY,d=t.length,p=0;p<d;p++){var v=t[p].pos;if(0===e.type)(y=f(v,e,A,c)).length>0&&(0,r.GlowCustomLayout)(v,.7*n,y,a,o,i,u,l);else{for(var g=h(v,e),y=[],m=0;m<g.length;m++)y.push.apply(y,(0,s.GetShipPartComplex)(1,e,A,c,g[m]));y.length>0&&(0,r.GlowCustomLayout)(v,n,y,a,o,i,u,l)}}},p=function(e,t){var r=(0,n.getQuadTreesObj)(),a=(t.SX,t.SY,t.SW,t.SH,t.game),o=(t.WW,t.WH,a.screen.rectSS_400),i=a.screen.rectSS_800,s=r.queryTreesRect([31],o);d(e,s.filter((function(e){return 45===e.ownerType})),t,1.2,0,.2,1,1),d(e,s.filter((function(e){return 45!==e.ownerType})),t,1.4,1,0,0,1),d(e,r.queryTreesRect([3],o),t,3,.1,1,.1,1),d(e,r.queryTreesRect([25],o),t,2,.5,.2,.6,1);for(var u=(0,A.getAllAnomalies)(t.game),l=0;l<u.length;l++){var p=u[l].pos;i.intersectsPoint(p)&&d(e,[{pos:p}],t,4,1,.2,.1,1)}var f=(0,c.getForce2Tree)().queryInt(t.game.screen.rect);for(l=0;l<f.length;l++){var h=f[l];if(1===h.type){var v=.2*Math.random();d(e,[h],t,2*h.radius*Math.random(),v,v,v,.1*v)}}};t.default=function(e){var t=e.game;if(e.SW,e.SH,e.SX,e.SY,e.WW,e.WH,e.gl,t.menuSettings.reflections){var r=(0,n.getQuadTreesObj)();if(r.All){var a=(0,u.default)(e);a&&p(a,e);for(var o=t.screen.rect,i=r.queryTreesRect([1,2,50,0],o),s=0;s<i.length;s++)p(i[s],e);return"reflections"}}};var f=function(e,t,r,n){var i=Math.atan2(e.y-t.pos.y,e.x-t.pos.x),s=(0,a.normalizeRadianPositive)(t.angle-i)-Math.PI,u=Math.abs(s);if(u<.1)return[];var A=(0,l.midpoint)(t.comp[0].vertex[1],t.comp[0].vertex[2]),c=(0,l.midpoint)(A,t.pos,.1),d=o(o(o([],t.comp[0].vertex[0].toVertArray(r,n),!0),t.comp[0].vertex[1].toVertArray(r,n),!0),[c.x-r,c.y-n],!1),p=o(o(o([],t.comp[0].vertex[0].toVertArray(r,n),!0),t.comp[0].vertex[2].toVertArray(r,n),!0),[c.x-r,c.y-n],!1);return u<.1?void 0:u>Math.PI-.2?o(o([],p,!0),d,!0):(Math.PI,s<0?d:p)},h=function(e,t){var r=Math.atan2(e.y-t.pos.y,e.x-t.pos.x),n=(0,a.normalizeRadianPositive)(t.angle-r)-Math.PI,o=Math.abs(n);return o<.1?[4]:o>Math.PI-.2?[2,0,1]:o>Math.PI-.4?n>0?[1,2]:[0,2]:n>0?[1]:[0]}}.apply(t,a),void 0===n||(e.exports=n)},2144:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(7561),r(2093),r(7185),r(6763)],n=function(e,t,r,a,n,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawRockFormation=t.drawRockformationCrystals=void 0,a=o(a);var A=[],c=[],d=[],p=[],f=2*Math.PI;t.drawRockformationCrystals=function(e,t,r,a,n,o,i,s){for(var A=e.sides,c=e.angle,d=e.pos.x-t,p=e.pos.y-r,h=e.sides,v=(0,l.mulberry32)(e.guid),g=d+Math.cos(f*(h/A)+c)*a|0,y=p+Math.sin(f*(h/A)+c)*a|0,m=[o,i,s],_=0,x=0;h>-1;--h){if(0===_&&x>.33*A||1===_&&x>.66*A){_++;var S=m.shift();m.push(S)}x++,v();for(var T=d+Math.cos(f*(h/A)+c)*a|0,E=p+Math.sin(f*(h/A)+c)*a|0,M=[.6*v()+.2,1],b={x:g,y},I=0;I<2;I++)if(!(1!==n&&v()>n)){var L={x:b.x,y:b.y},P=(0,u.midpoint)({x:g,y},{x:T,y:E},M[I]);b=P;var w=(0,u.midpoint)(L,P,.5);w.setFromVec((0,u.midpoint)(w,{x:d,y:p},.12+.1*v())),m[0].push(L.x,L.y,P.x,P.y,w.x,w.y);var R=.6,O=d+(v()-.5)*a*R,C=p+(v()-.5)*a*R,D=d+(v()-.5)*a*R,G=p+(v()-.5)*a*R;m[1].push(O,C,L.x,L.y,w.x,w.y),m[1].push(D,G,O,C,L.x,L.y),m[2].push(O,C,P.x,P.y,w.x,w.y)}g=T,y=E}},t.drawRockFormation=function(e,a,n,o,i,s,u,l){(0,r.blockCirclePoly)(e.sides,.8*e.radius,e.pos.x,e.pos.y,e.angle,l,a,n,o,.8*e.radius),(0,t.drawRockformationCrystals)(e,n,o,e.radius,.46,i,s,u)},t.default=function(e){e.SW;var o=e.SH,u=e.SX,l=e.SY,f=e.gl,h=e.game,v=(0,s.getQuadTreesObj)();if(v.All){var g=h.screen.rectSS_200,y=v.queryTreesRect([11],g);if(A=[],c=[],d=[],p=[],h.debug&&h.rockFormationSystemRadius.length>0){var m=h.rockFormationSystemRadius[0];(0,r.blockCirclePoly)(40,m.radius,m.pos.x,m.pos.y,0,A,o,u,l,30)}for(var _=0;_<y.length;_++){var x=y[_];(0,t.drawRockFormation)(x,o,u,l,c,A,d,p)}A.length>0&&(f.disable(f.BLEND),(0,a.default)(n.GLctx.Vertices,f),(0,i.drawColor)(p,f,.2,.2,.4,1),(0,i.drawColor)(A,f,.1,.1,.4,1),(0,i.drawColor)(c,f,.01,.01,.01,1),f.enable(f.BLEND),(0,i.drawColor)(d,f,1,1,1,1))}return"rockFormations"}}.apply(t,a),void 0===n||(e.exports=n)},2839:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(9262),r(2261),r(1706),r(1706),r(737),r(7967),r(910),r(7185),r(3039),r(7561),r(9879),r(3578),r(7899),r(1330)],n=function(e,t,r,a,n,s,u,l,A,c,d,p,f,h,v,g,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s=i(s),l=i(l),A=i(A),p=i(p),h=i(h),Number.MIN_VALUE;var m=[],_=[],x=(A.default.create("<AUTOPILOT>",30,"g"),A.default.create("<AUTOPILOT>",30,"r"),new a.Vector(0,0));t.default=function(e){var t,i,S=e.game,T=e.SX,E=e.SY,M=e.SW,b=e.SH,I=e.gl,L=e.step,P=0,w=S.player;m=[],_=[];var R=S.enemies;P=R.length;for(var O=0;O<P;O++){var C=R[O],D=C.pos.x,G=C.pos.y;(0,r.onStage)(e,C.pos.x,C.pos.y)&&((0,p.default)(S.zoomTXinverted,C,T,E,m,_,{r:1,g:0,b:0}),D>T&&D<T+M&&G>E&&G<E+b&&(0,r.line2Poly)(D-.5*C.radius-T,G-2*C.radius-E,D-.5*C.radius+.3*C.life-T,G-2*C.radius-E,m,2))}var N=S.npcs;if((P=N.length)>0)for(O=0;O<P;O++){var B=N[O];if(D=B.pos.x,G=B.pos.y,(0,r.onStage)(e,B.pos.x,B.pos.y)&&(0,p.default)(S.zoomTXinverted,B,T,E,m,_,{r:.6,g:.9,b:.6}),B&&B.miningRig&&3!==B.miningRig.armState&&5!==B.miningRig.armState){for(var F=B.comp[0].vertex[0],V=0;V<B.miningRig.arm.length;V++){var k=B.miningRig.arm[V].joint;(0,r.line2Poly)(F.x-T,F.y-E,k.x-T,k.y-E,m,2),F=k}(0,r.addToColorMap)(_,m,.8,.8,.8,1)}}var X=(0,l.default)(e);if(X&&!S.levelEditor){if(X.abilities.hash[15]&&S.currentLevel>=13&&X.coaxialMount.locked){var H=2.5*Math.random(),U=X.pos.x+X.coaxialMount.pos.x+X.coaxialMount.barrel.x,Y=X.pos.y+X.coaxialMount.pos.y+X.coaxialMount.barrel.y,W=X.coaxialMount.locked.x,j=X.coaxialMount.locked.y,q=new a.Vector(W-U,j-Y);q.mult(.7),q.addXY(U,Y),W=q.x,j=q.y,(0,r.line2Poly)(U-T,Y-E,W-T-H,j-E-H,m,.1),(0,r.line2Poly)(U-T,Y-E,W-T+H,j-E+H,m,.1),(0,r.line2Poly)(U-T,Y-E,W-T,j-E,m,.1),(0,r.addToColorMap)(_,m,.6,.6,.2,1)}if(X.abilities.hash[10]&&13!==S.currentLevel&&!(null===(t=X.abilities.hash[1])||void 0===t?void 0:t.activated)){if(X.aimTarget){var z=Math.floor(((0,d.distanceBetweenVectors)(X.pos,X.aimPoint)-X.radius)*g.PX_TO_MEETERS_CONVERSION);if(S.currentLevel>13){var K=e.game.daylight.is_night,Z=A.default.create((0,y.TypesToString)(X.aimTarget.type),g.TEXT_SIZE_SMALL,K?"r":"g"),Q=A.default.createSplitted((z<5?"<5 ":z)+"M",g.TEXT_SIZE_SMALL,K?"r":"g","");A.default.addListGL(I,(0,s.default)(u.GLctx.Texture,I),o([Z],Q,!0),X.pos.x-.5*Z.w-T,X.pos.y-(Z.h+g.SHIP_LENGTH_RADIUS+30)-E,e,!0)}}H=2.5*Math.random(),(0,r.line2Poly)(X.pos.x-T,X.pos.y-E,X.aimPoint.x-T-H,X.aimPoint.y-E-H,m,.1),(0,r.line2Poly)(X.pos.x-T,X.pos.y-E,X.aimPoint.x-T+H,X.aimPoint.y-E+H,m,.1),(0,r.line2Poly)(X.pos.x-T,X.pos.y-E,X.aimPoint.x-T,X.aimPoint.y-E,m,.1),(null===(i=X.abilities.hash[11])||void 0===i?void 0:i.activated)?((0,r.line2Poly)(X.pos.x-T,X.pos.y-E,X.aimPoint.x-T,X.aimPoint.y-E,m,2),X.abilities.hash[12]?(0,r.addToColorMap)(_,m,1,1,.1,1):X.abilities.hash[13]?(0,r.addToColorMap)(_,m,1,0,1,1):(0,r.addToColorMap)(_,m,1,0,.1,1),(0,h.default)(e,X.aimPoint,120+120*Math.random(),90)):(0,r.addToColorMap)(_,m,.3,1,.3,1)}S.menuSettings.showCloseItems}var J=S.drones.length;for(V=0;V<J;V++){var $=S.drones[V];(0,p.default)(S.zoomTXinverted,$,T,E,m,_,{r:.1,g:.7,b:.1})}for(var ee=0;ee<w.length;ee++){var te=w[ee];if(te.guid!==S.playerGuid&&te.name&&te.name.length>1){if(!te.abilities.active.cloak){var re=A.default.create(te.name,30,"g");A.default.addGL(I,(0,s.default)(u.GLctx.Texture,I),re,te.pos.x-.5*re.w-T,te.pos.y-70-E,e)}}else if(13!==S.currentLevel){var ae=!1;if(te.unableToComply){ae=!0;var ne={x:te.pos.x,y:te.pos.y};ne.x-=T,ne.y-=E,ne.y-=2*te.originalRadius;var oe=.7*te.originalRadius,ie=.85*oe,se=.7*oe,ue=ne.y-oe,le=ne.x,Ae=ne.y+oe,ce=ne.x-ie,de=ne.y+oe,pe=ne.x+ie,fe=ne.y-.3*se,he=ne.x,ve=ne.y+se,ge=ne.x;(0,r.line2Poly)(le,ue,ce,Ae,m,2),(0,r.line2Poly)(le,ue,pe,de,m,2),(0,r.line2Poly)(ce,Ae,pe,de,m,2),(0,r.line2Poly)(he,fe,ge,ve,m,2)}else{var ye=te.weapons.hash[26];if(ye&&ye.cooldown.value>0&&!te.abilities.active.cloak){ae=!0;var me=ye.cooldown.max/60;(0,r.blockCirclePoly)(60,.6*te.originalRadius,te.pos.x,te.pos.y-2*te.originalRadius,0,m,0,T,E,4,!1,0,(ye.cooldown.max-ye.cooldown.value)/me,0,(ye.cooldown.max-ye.cooldown.value)/me)}}ae&&(0,r.addToColorMap)(_,m,0,.6,0,1)}if((0,p.default)(S.zoomTXinverted,te,T,E,m,_),(0,r.addToColorMap)(_,m,1,0,1,1),te.abilities.hash[15]){(0,r.line2Poly)(te.pos.x+te.coaxialMount.pos.x-T,te.pos.y+te.coaxialMount.pos.y-E,te.pos.x+te.coaxialMount.pos.x+te.coaxialMount.barrel.x-T,te.pos.y+te.coaxialMount.pos.y+te.coaxialMount.barrel.y-E,m,2);var _e=v.ShipColors[te.colorIndex];(0,r.addToColorMap)(_,m,_e.r,_e.g,_e.b,1)}if(te.abilities.hash[4]&&(te.targetLock||te.aimTarget)){var xe=te.weapons.hash[51];if(null==xe?void 0:xe.active){var Se=[],Te=te.targetLock||te.aimTarget;x.set(.8*Te.radius*Math.random(),0),x.setAngle(Math.random()*Math.PI*2);for(var Ee=Te.pos.x+x.x,Me=Te.pos.y+x.y,be=0;be<3;be++){var Ie=[(D=te.comp[0].vertex[0].x)-T],Le=[(G=te.comp[0].vertex[0].y)-E],Pe=(Ee-D)/10,we=(Me-G)/10;for(V=1;V<9;V++)Ie.push(Pe*(V+1)+.5*((0,n.RandomStepBased)(L,te.guid+V)-.5)*we+D-T),Le.push(we*(V+1)+.5*((0,n.RandomStepBased)(L,te.guid-V)-.5)*Pe+G-E);Ie.push(Ee-T),Le.push(Me-E);var Re=Ie.length-1;for(V=0;V<Re;V++){var Oe=Ie[V],Ce=Ie[V+1],De=Le[V],Ge=Le[V+1];Se.push(Oe,De,Ce,Ge)}}var Ne=Se.length;for(V=0;V<Ne;V+=4)(0,r.line2Poly)(Se[V],Se[V+1],Se[V+2],Se[V+3],m,2);for((0,r.addToColorMap)(_,m,.1,.1,.7,1),V=0;V<Ne;V+=4)(0,r.line2Poly)(Se[V],Se[V+1],Se[V+2],Se[V+3],m,1);(0,r.addToColorMap)(_,m,.5,.5,1,1)}}}for(P=S.rockets.length,V=0;V<P;V++){var Be=S.rockets[V],Fe=(0,n.rotateVector)(Be.tailLayout,Be.angle);(0,r.line2Poly)(Be.pos.x-T,Be.pos.y-E,Be.pos.x+Fe.x-T,Be.pos.y+Fe.y-E,m,1===Be.subType?1.5:2)}for((0,r.addToColorMap)(_,m,.5,.5,.5,1),P=S.charges.length,V=0;V<P;V++){var Ve=S.charges[V],ke=(0,c.hexBox)(Ve.radius,Ve.pos,T,E);m.push.apply(m,ke[0]),(0,r.addToColorMap)(_,m,.1,.1,.1,1),m.push.apply(m,ke[1]),(0,r.addToColorMap)(_,m,.7,.7,.7,1),m.push.apply(m,ke[2]),(0,r.addToColorMap)(_,m,.3,.3,.3,1)}return m.length>0&&(I.disable(I.BLEND),(0,f.drawColorMapSingle)(_,m,I),I.enable(I.BLEND)),"ship"}}.apply(t,a),void 0===n||(e.exports=n)},4709:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(6652),r(7561),r(9262),r(8927),r(4157),r(2261)],n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=u(r),s=l(s);var c=[],d=new o.Vector(0,0),p=new o.Vector(0,0),f=new o.Vector(0,0),h=new o.Vector(0,0);new o.Vector(0,0),new o.Vector(0,0),new o.Vector(0,0),new o.Vector(0,0),t.default=function(e){e.SW,e.SH;var t=e.SX,o=e.SY,u=e.gl,l=e.game,v=e.step;c=[];for(var g=(0,a.getSpaceBatTree)().queryInt(l.screen.rect),y=g.length,m=(0,i.createRadialGradientTexture)(75,5,5,.15,30,"Enable",!0),_=(0,i.createRadialGradientTexture)(175,5,5,.35,30,"Enable",!0),x=0;x<y;x++){var S=g[x],T=S.vel.getAngle();d.x=20,d.y=0,d.setAngle(T+Math.PI),h.x=10,h.y=0,h.setAngle(T),p.x=6,p.y=0,p.setAngle(T+.5*Math.PI),f.x=6,f.y=0,f.setAngle(T-.5*Math.PI),c.push(S.pos.x+h.x-t,S.pos.y+h.y-o,S.pos.x+p.x-t,S.pos.y+p.y-o,S.pos.x+f.x-t,S.pos.y+f.y-o,S.pos.x+d.x-t,S.pos.y+d.y-o,S.pos.x+p.x-t,S.pos.y+p.y-o,S.pos.x+f.x-t,S.pos.y+f.y-o),(0,n.line2Poly)(S.pos.x-t,S.pos.y-o,S.pos.x+1.3*d.x-t,S.pos.y+1.3*d.y-o,c,2),s.default.addGL(u,(0,r.default)(r.GLctx.Texture,u),(0,A.RandomStepBased)(v,S.guid)>.8?_:m,S.pos.x+S.vel.x-t,S.pos.y+S.vel.y-o,e,1,1)}return u.blendFunc(u.DST_COLOR,u.ZERO),c.length>0&&((0,r.default)(r.GLctx.Vertices,u),(0,n.drawColor)(c,u,0,0,0,1)),u.blendFunc(u.ONE,u.ONE),"spacebats"}}.apply(t,a),void 0===n||(e.exports=n)},6922:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(1706),r(5345),r(7561),r(737)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r),s=o(s);var u=[],l=0,A=0,c=0;t.default=function(e){var t=e.gl,o=e.game,d=e.SX,p=e.SY;if(e.SW,e.SH,o.menuSettings.spacedust){u=[];for(var f=(0,n.GetSpaceDustTree)().references,h=f.length,v=0;v<h;v++){var g=f[v];u.push(g.pos.x-d,g.pos.y-p,g.pos.x+2-d,g.pos.y-p,g.pos.x-d,g.pos.y+2-p)}return u.length>0&&((0,s.default)(e)?(l=.3,A=.15,c=.15):(l<1&&(l+=.01),A>0&&(A-=.01),c>0&&(c-=.01)),(0,r.default)(a.GLctx.Vertices,t),(0,i.drawColor)(u,t,l,A,c,1,t.POINTS)),"spacedust"}}}.apply(t,a),void 0===n||(e.exports=n)},8723:(e,t,r)=>{var a,n;a=[r,t,r(7561),r(2093),r(910)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=[],i=[];t.default=function(e){e.SW,e.SH;var t=e.SX,s=e.SY,u=e.gl,l=e.game;o=[],i=[];var A=(0,a.getQuadTreesObj)();if(A.All)for(var c=l.screen.rect,d=A.queryTreesRect([43],c),p=d.length,f=0;f<p;f++){var h=d[f],v=(0,n.hexBox)(h.radius,h.pos,t,s);o.push.apply(o,v[0]),(0,r.addToColorMap)(i,o,.1,.1,.1,1),o.push.apply(o,v[1]),(0,r.addToColorMap)(i,o,.7,.7,.7,1),o.push.apply(o,v[2]),(0,r.addToColorMap)(i,o,.3,.3,.3,1)}return o.length>0&&(u.disable(u.BLEND),(0,r.drawColorMapSingle)(i,o,u),u.enable(u.BLEND)),"proximityMines"}}.apply(t,a),void 0===n||(e.exports=n)},2470:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(7561),r(9262),r(2261),r(2093),r(998)],n=function(e,t,r,a,n,i,s,u,l,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a);var c=[],d=[],p=[],f=new s.Vector(0,0),h=new s.Vector(0,0);t.default=function(e){var t=e.SX,o=e.SY,s=(e.SW,e.SH),v=e.gl,g=e.game,y=(0,l.getQuadTreesObj)();if(y&&y.All){var m=g.daylight.is_day,_=(g.daylight.is_night,g.screen.rect),x=y.queryTreesRect([3],_);d=[],c=[],p=[];for(var S=0;S<x.length;S++){for(var T=x[S],E=T.cannons,M=0;M<E.length;M++){var b=E[M];!b.lightsOn!==m&&Math.random()>.98&&(b.lightsOn=!m&&b.bullets>0);var I=b.pos.x,L=b.pos.y;(0,r.blockCirclePoly)(b.sides,b.radius,I,L,b.angle,c,s,t,o,2*T.wallThickness),b.isCannon&&(f.set(2*T.wallThickness,0),(0,u.rotateVector)(f,b.angle,f),(0,i.line2Poly)(I-t,L-o,I+f.x-t,L+f.y-o,c,.2*T.wallThickness));for(var P=b.damages,w=P.length,R=0;R<w;R++){var O=P[R];(0,u.rotateVector)(O,b.angle,h);var C=I+h.x-t,D=L+h.y-o;h.mult(.8);var G=I+h.x-t,N=L+h.y-o;d.push(C,D,G,N)}}if((0,r.addToColorMap)(p,c,0,0,0,1),T.shieldImpacts.length>0){var B=[];(0,r.blockCirclePoly)(60,2*T.radius,T.centerNoneCannon.pos.x,T.centerNoneCannon.pos.y,0,B,s,t,o,T.radius);for(var F=0;F<T.shieldImpacts.length;F++){var V=T.shieldImpacts[F];(0,A.GlowCustomLayout)(V,300,B,e,.1,.1,1,1)}}}if(c.length>0){v.blendFunc(v.DST_COLOR,v.ZERO);var k=(0,a.default)(n.GLctx.Vertices,v);(0,i.drawColorMap)(p,c,k,v),v.blendFunc(v.ONE,v.ONE),(0,i.drawColor)(d,v,.25,.25,.25,1,v.LINES)}return"spaceport"}}}.apply(t,a),void 0===n||(e.exports=n)},6882:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(1706),r(7967),r(7899),r(2093),r(737)],n=function(e,t,r,a,n,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r),n=o(n),u=o(u),t.default=function(e){var t,o,l=e.SX,A=e.SY,c=(e.SW,e.SH,e.gl),d=e.game,p=(0,s.getQuadTreesObj)();if(p&&p.All){var f=(0,u.default)(e),h=d.screen.rect,v=p.queryTreesRect([3],h);if(13!==d.currentLevel)for(var g=0;g<v.length;g++){var y=v[g],m=null!==(o=f&&(null===(t=y.centerNoneCannon)||void 0===t?void 0:t.aggressionForGuidsHash[f.guid])>0)&&void 0!==o&&o?"r":"g";if(!y.weaponsActive){var _=n.default.create("SPACEPORT",i.TEXT_SIZE_MEDIUM,m),x=n.default.create((y.name||"")+" CLASS",i.TEXT_SIZE_MEDIUM,m),S=y.centerNoneCannon,T=S&&S.life<.2*i.SPACEPORT_START_LIFE,E=(0,r.default)(Math.random()>.98||T?a.GLctx.TextureDist:a.GLctx.Texture,c),M=S.pos.x-.5*_.w-l,b=S.pos.y-.7*y.radius-A;n.default.addGL(c,E,_,M,b,e,!0),n.default.addGL(c,E,x,M,b+i.TEXT_SIZE_MEDIUM,e,!0)}}return"spaceport texts"}}}.apply(t,a),void 0===n||(e.exports=n)},2443:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(9262),r(2261),r(7561),r(5182)],n=function(e,t,r,a,n,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a);var A=[],c=[],d=new i.Vector(0,0),p=new i.Vector(0,0),f=new i.Vector(0,0),h=new i.Vector(0,0);t.default=function(e){e.WW,e.WH,e.game,e.SW;var t=e.SH,o=e.SX,i=e.SY,v=e.gl;A=[],c=[];for(var g=e.game.spaceSnake,y=g.length,m=0;m<y;m++)for(var _=g[m].segments,x=_.length,S=0;S<x;S++){var T=_[S];if((0,l.onStage)(e,T,3*T.radius)){(0,r.blockCirclePoly)(10,T.radius*(0===S?1.3:1.2),T.pos.x,T.pos.y,T.angle,A,t,o,i,T.radius*(0===S?1.3:1.2));for(var E=_[S-1],M=1;M<6;M++)(0,r.blockCirclePoly)(5,.17*T.radius*M,T.pos.x,T.pos.y,T.pos.y-T.pos.x,c,t,o,i,.17*T.radius*M),S>0&&(0,r.line2Poly)(T.pos.x-o,T.pos.y-i,E.pos.x-o,E.pos.y-i,c,.1*T.radius*M);var b=1.13,I=.01;if(S>0&&S<x-1)for(var L=0;L<2;L++)for(var P=.3*T.radius,w=0;w<P;w++)h.x=2*T.radius+T.radius*w*.2,h.y=0,(0,s.rotateVector)(h,T.angle+(-.38*Math.PI+.04*w-.15*T.legAngle*w)*(0===L?-1:1),h),(0,r.line2Poly)(T.pos.x-o,T.pos.y-i,T.pos.x+h.x-o,T.pos.y+h.y-i,A,2),w<4&&(0,r.line2Poly)(T.pos.x-o,T.pos.y-i,T.pos.x+h.x-o,T.pos.y+h.y-i,c,2);else d.x=T.radius*b,d.y=0,(0,s.rotateVector)(d,T.angle+-.1*Math.PI+T.radius*I,d),f.x=T.radius*b,f.y=0,(0,s.rotateVector)(f,T.angle+-.1*Math.PI-T.radius*I,f),p.x=.9*T.radius,p.y=0,(0,s.rotateVector)(p,T.angle+.1*Math.PI+.065*T.legAngle,p),p.add(d),A.push(d.x+T.pos.x-o,d.y+T.pos.y-i,p.x+T.pos.x-o,p.y+T.pos.y-i,f.x+T.pos.x-o,f.y+T.pos.y-i),d.x=T.radius*b,d.y=0,(0,s.rotateVector)(d,T.angle+.1*Math.PI+T.radius*I,d),f.x=T.radius*b,f.y=0,(0,s.rotateVector)(f,T.angle+.1*Math.PI-T.radius*I,f),p.x=.9*T.radius,p.y=0,(0,s.rotateVector)(p,T.angle+-.1*Math.PI-.065*T.legAngle,p),p.add(d),A.push(d.x+T.pos.x-o,d.y+T.pos.y-i,p.x+T.pos.x-o,p.y+T.pos.y-i,f.x+T.pos.x-o,f.y+T.pos.y-i)}}return A.length>0&&((0,a.default)(n.GLctx.Vertices,v),v.blendFunc(v.DST_COLOR,v.ZERO),(0,u.drawColor)(A,v,0,0,0,1),v.blendFunc(v.ONE,v.ONE),(0,u.drawColor)(c,v,.1,.01,.01,1)),"spacesnake"}}.apply(t,a),void 0===n||(e.exports=n)},3837:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t});a=[r,t,r(1706),r(7561),r(9262),r(7561)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=u(r);var i=[],s=[],l=new n.Vector(0,0);t.default=function(e){e.ctx,e.WW,e.WH;var t=e.game,n=(e.SW,e.SH,e.SX),u=e.SY,A=e.gl;s=[],i=[];for(var c=0;c<t.spaceSpiders.length;c++){var d=t.spaceSpiders[c];if((0,o.onStage)(e,d.pos.x,d.pos.y,10*d.radius)){var p=d.pos.x-n,f=d.pos.y-u,h=d.angle,v=d.radius;(0,a.blockCirclePoly)(8,v,p,f,h,s,null,null,null,v),l.set(v,0),l.setAngle(h),(0,a.blockCirclePoly)(8,.8*v,p+l.x,f+l.y,h,s,null,null,null,.8*v),l.mult(-.8),(0,a.blockCirclePoly)(8,.6*v,p+l.x,f+l.y,h,s,null,null,null,.6*v),l.mult(2),(0,a.blockCirclePoly)(8,.5*v,p+l.x,f+l.y,h,s,null,null,null,.5*v);for(var g=0;g<d.legs.length;g++)for(var y=d.legs[g],m=0;m<y.bones.length;m++){var _=y.bones[m],x=y.bones[m-1];if(m>0){var S=(y.bones.length-m)/y.bones.length*2,T=_.pos.x-n,E=_.pos.y-u,M=x.pos.x-n,b=x.pos.y-u;m>1&&i.push(T,E,M,b),(0,a.line2PolyCone)(T,E,M,b,s,.1*v*S,.25*v*S)}}}}return s.length>0&&(A.disable(A.BLEND),(0,r.default)(r.GLctx.Vertices,A),(0,a.drawColor)(s,A,0,0,0,1),(0,a.drawColor)(i,A,.18,.02,.02,1,A.LINES),A.enable(A.BLEND)),"space spiders"}}.apply(t,a),void 0===n||(e.exports=n)},7893:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(9262),r(5182),r(2261),r(7561),r(484),r(2093)],n=function(e,t,r,a,n,i,s,u,l,A,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderSquids=void 0,a=o(a);var d=new i.Vector(0,0),p=new i.Vector(0,0),f=new i.Vector(0,0),h=function(e,t,r,a){var n=e.pos.x,o=e.pos.y,i=e.angle+Math.PI;d.x=2.3*e.radius,d.y=0,(0,u.rotateVector)(d,i,d),p.x=.7*e.radius,p.y=0,(0,u.rotateVector)(p,i,p),f.x=1.05*e.radius,f.y=0,(0,u.rotateVector)(f,i+.5*Math.PI,f),t.push(d.x+n-r,d.y+o-a,p.x+n-r,p.y+o-a,f.x+n-r,f.y+o-a),f.x=1.05*e.radius,f.y=0,(0,u.rotateVector)(f,i+-.5*Math.PI,f),t.push(d.x+n-r,d.y+o-a,p.x+n-r,p.y+o-a,f.x+n-r,f.y+o-a)};t.renderSquids=function(e,t,a,n,o,A,c){new i.Vector(0,0);for(var v=0;v<o.length;v++){var g=o[v];if((0,s.onStage)(e,g,1e3)){var y=g.pos.x,m=g.pos.y;(0,r.blockCirclePoly)(14,g.radius,y,m,(0,u.normalizeRadianAngle)(g.angle-Math.PI),t,0,A,c,.6*g.radius,!1,0,4,9,14),h(g,t,A,c),d.x=.7*g.radius,d.y=0,(0,u.rotateVector)(d,g.angle+.93*Math.PI,d),(0,r.setTriangle)(g.pos.x+d.x-A,g.pos.y+d.y-c,a,5),d.x=.7*g.radius,d.y=0,(0,u.rotateVector)(d,g.angle+-.93*Math.PI,d),(0,r.setTriangle)(g.pos.x+d.x-A,g.pos.y+d.y-c,a,5);for(var _=g.tentacles,x=0;x<_.length;x++)for(var S=_[x],T=0;T<S.arm.length;T++){var E=S.arm[T],M=.5*E.leftMuscle.l+.5*E.rightMuscle.l;d.x=-.5*M,d.y=0,(0,u.rotateVector)(d,E.angle,d),p.x=.8*M,p.y=0,(0,u.rotateVector)(p,E.angle,p),(0,l.line2Poly)(d.x+E.centerX+y-A,d.y+E.centerY+m-c,p.x+E.centerX+y-A,p.y+E.centerY+m-c,t,E.width),d.x=-.4*M,d.y=0,(0,u.rotateVector)(d,E.angle,d),p.x=.7*M,p.y=0,(0,u.rotateVector)(p,E.angle,p),f.x=.8*E.width,f.y=0,(0,u.rotateVector)(f,E.angle+.5*Math.PI,f),(0,l.line2Poly)(d.x+E.centerX+y+f.x-A,d.y+E.centerY+m+f.y-c,p.x+E.centerX+y+f.x-A,p.y+E.centerY+m+f.y-c,n,.1*E.width),T===S.glowIndex&&(0,l.line2Poly)(d.x+E.centerX+y+f.x-A,d.y+E.centerY+m+f.y-c,p.x+E.centerX+y+f.x-A,p.y+E.centerY+m+f.y-c,n,.1*E.width)}}}};var v=[],g=[],y=[];t.default=function(e){var r=e.SW,o=e.SH,i=(e.frame,e.SX),s=e.SY,u=(e.WW,e.WH,e.game,e.gl);v=[],g=[],y=[];var d=(0,c.getQuadTreesObj)();if(d.All){var p=Math.max(r>o?r:o,2e3),f=(0,A.rect_pool_pop)(i-p,s-p,2*p,2*p),h=d.queryTreesRect([9],f);return(0,A.rect_pool_put)(f),(0,t.renderSquids)(e,v,g,y,h,i,s),v.length>0&&((0,a.default)(n.GLctx.Vertices,u),(0,l.drawColor)(y,u,.5,.1,.1,1),u.blendFunc(u.DST_COLOR,u.ZERO),(0,l.drawColor)(v,u,0,0,0,1),u.blendFunc(u.ONE,u.ONE),(0,l.drawColor)(g,u,.5,.1,.1,1)),"spacesquid"}}}.apply(t,a),void 0===n||(e.exports=n)},1039:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(9879),r(9879),r(2261),r(7899),r(2093),r(998),r(6265)],n=function(e,t,r,a,n,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r),t.default=function(e){var t=e.game,o=(e.SX,e.SY,e.SW,e.SH,e.gl,(0,s.getQuadTreesObj)());if(o.All){for(var A=t.screen.rect,c=o.queryTreesRect([45,50,2,23],A),d=c.length,p=0;p<d;p++){var f,h=c[p];23===h.type?h.life<.2*i.SPACEPORT_START_LIFE&&(f=(0,n.map)(h.life,0,.2*i.SPACEPORT_START_LIFE,.2,1,!0,!0))>.2&&(0,r.default)(e,h.pos,12*f,800*f):(f=(0,n.map)(h.life,0,i.PLAYER_LIFE_LOW_THRESHOLD,.2,1,!0,!0))>.2&&((0,r.default)(e,h.pos,5*f,150*f),Math.random()>.9&&(0,u.Glow)(h.pos,.02*Math.random(),[],e,1,1,1,Math.random()))}return(0,l.getForce2Tree)().queryInt(t.screen.rect).map((function(a){a.positive&&1===a.type&&t.screen.rect.intersectsPoint(a.pos)&&(0,r.default)(e,a.pos,3===a.radius?20:.1*a.radius,40+20*Math.random())})),(0,a.drawSparks)(e),"Sparks"}}}.apply(t,a),void 0===n||(e.exports=n)},6391:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(1706),r(7561)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i(r);var s=[],u=[],l=0,A=function(e,t,r,a,n,o,i){var s=.5*n;i.push(e-s,t,r,e-s,a,r,e+s,t,r,e+s,a,r,e-s,t,o,e-s,a,o,e+s,t,o,e+s,a,o,e-s,t,r,e-s,t,o,e+s,t,r,e+s,t,o,e-s,a,r,e-s,a,o,e+s,a,r,e+s,a,o,e-s,t,r,e+s,t,r,e-s,t,o,e+s,t,o,e-s,a,r,e+s,a,r,e-s,a,o,e+s,a,o)};t.default=function(e){e.stepMS;var t=e.game,i=e.SW,c=e.SH,d=e.gl;if(t.menuSettings.fps3dGrid||t.menuSettings.fps3dBars){s=[],t.resW;var p=o(o(o([0],t.performance.engine.map((function(e){return e.time})),!0),t.performance.gui.map((function(e){return e.time})),!0),[0],!1);l=p.length,u.push.apply(u,p),u.length>100*l&&(u=u.splice(l,100*l));for(var f=u.length,h=0,v=t.menuSettings.fps3dBars,g=0;g<f;g++){var y=g%l*40+0+.135*i,m=.72*c,_=2*Math.floor(g/l)*-.05-1;v?A(y,m,_,m-48*u[h],32,2*(Math.floor(g/l)-.8)*-.05-1,s):(s.push(y+60,m-48*u[h+1],_,y+20,m-48*u[h],_),g>=l&&s.push(y+20,m-48*u[h],_,y+20,m-48*u[h-l],2*(Math.floor(g/l)-1)*-.05-1)),h++}v||(y=40*l+0+.135*i,m=.72*c,s.push(y+20,m,-1,y+20,m,2*Math.floor(f/l)*-.05-1)),s.length>0&&((0,r.default)(a.GLctx.Vertices3d,d),(0,n.drawColor)(s,d,.8,.1,.1,1,d.LINES))}}}.apply(t,a),void 0===n||(e.exports=n)},3376:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2261),r(7561),r(1706),r(7967),r(1706),r(7899),r(7561),r(1128),r(7185),r(9014),r(5345),r(2093),r(1477),r(4412),r(2710)],n=function(e,t,r,a,n,u,l,A,c,d,p,f,h,v,g,y,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=s(n),u=s(u);var _=!0,x=!0,S=!1,T=!1,E="QUADTREES",M=50;window.onkeydown=function(e){if(!(0,m.GetConsoleOpen)())switch(e.keyCode){case 49:E="GUI",M=e.keyCode;break;case 50:E="QUADTREES",M=e.keyCode;break;case 51:E="SQRT OPERATORS",M=e.keyCode;break;case 52:E="SPACEDUST",M=e.keyCode;break;case 53:E="ITEMS",M=e.keyCode;break;case 55:_=!_;break;case 54:x=!x;break;case 57:S=!S,T=!0}};var b=[],I=[],L=[],P=[],w=[],R=[],O=[],C=[],D=[],G=[],N=[],B=[],F=[],V=[],k=[],X=[],H=[],U=[],Y=[],W=[],j=function(e,t,r,n,o,i,s,u){void 0===u&&(u=1);for(var l=r.length,A=0;A<l;A++){var c=10*r[A].time+1,d=n[A]||100,p=o[A]||100,f=c>d?c:d>1?.95*d:d,h=c>p?c:p>1?.97*p:p;n[A]=f,o[A]=h;var v=s*u+5*A*u;(0,a.line2Poly)(i*u,v,i*u+1+f*u,v,U,1*u),(0,a.line2Poly)(h*u,v,h*u-3,v,U,1*u)}},q={},z=function(e,t,r,a,n,o,i,s){if(void 0===o&&(o=30),void 0===i&&(i=!1),void 0===s&&(s=3),q[a]&&0!==q[a].i)q[a].i>o&&(q[a].i=-1);else{var u=r.sort((function(e,t){return e.time.high>t.time.high?-1:1}));q[a]={list:u,i:1}}q[a].i++,K(e,t,q[a].list,a,n,i,s)},K=function(e,t,r,a,o,s,c){var d=Math.min(r.length,c),p=0,f=0;r.forEach((function(e){p+=e.time.high,f+=e.time.avg}));var h=r[0];if(h){var v="w";switch(h.type){case"engine":v="y";break;case"engineClient":v="g";break;case"gui":v="w";break;case"shader":v="r"}u.default.addListGL(e.gl,(0,n.default)(l.GLctx.Texture,e.gl),i([u.default.create(h.type+":",A.TEXT_SIZE_SMALL,v)],u.default.createSplitted(f.toFixed(1)+" | "+p.toFixed(1),A.TEXT_SIZE_SMALL,v,""),!0),100,a,e)}for(var g=0;g<d;g++){var y=r[g],m=y.name,_=s?" ("+y.type+")":"",x=y.time.high>.1?" > "+y.time.avg.toFixed(1)+" | "+y.time.high.toFixed(1)+" ms ":"";if(s)switch(y.type){case"engine":o="y";break;case"engineClient":o="g";break;case"gui":o="w";break;case"shader":o="r"}var S=[u.default.create(m,A.TEXT_SIZE_SMALL,o)];s&&S.push(u.default.create(_,A.TEXT_SIZE_SMALL,o)),x.length>0&&S.push.apply(S,u.default.createSplitted(x,A.TEXT_SIZE_SMALL,o,"")),u.default.addListGL(e.gl,(0,n.default)(l.GLctx.Texture,e.gl),S,100,a+(g+1)*A.TEXT_SIZE_SMALL,e)}};u.default.createSplitted("|",22,"r",""),u.default.createSplitted("0123456789,.-",22,"r");var Z=!1;t.default=function(e){var t=e.stepMS,s=e.game,m=(e.frame,e.SW,e.gl),q=e.SX,K=e.SY;if(s.menuSettings.fps||s.menuSettings.fpsOnly){var Q=performance.now();Z||(Z=!0,I=[],L=[],R=[],O=[],C=[],D=[],G=[],N=[],B=[],F=[],V=[],k=[],X=[],H=[],P=[],w=[],b=[]);var J=s.performance,$=J.engine,ee=J.engineClient,te=J.gui,re=J.shaders,ae=J.totalEngine,ne=J.totalEngineClient,oe=J.totalGui;s.isPaused&&($=$.map((function(e){return o(o({},e),{time:0})})),ee=ee.map((function(e){return o(o({},e),{time:0})})),ae=0,ne=0);var ie=window.performance.memory.totalJSHeapSize/1e6,se=window.performance.memory.usedJSHeapSize/1e6,ue=(0,n.default)(l.GLctx.Texture,m);if(!s.menuSettings.fpsOnly){var le=u.default.createSplitted("MEM: "+(0,r.normalize)(ie,"max mem",30,0).avg+" / "+(0,r.normalize)(se,"curr mem",30,0).avg+" MB",A.TEXT_SIZE_SMALL,"w",""),Ae=u.default.createSplitted("AABB: "+(0,r.normalize)((0,v.getQuadTreesObj)().All.references.length,"n t. ov items",30,0).avg,A.TEXT_SIZE_SMALL,"w",""),ce=u.default.createSplitted("PARTICLES: "+(0,r.normalize)(s.spaceDust.length+s.particles.length+s.customParticles.length+s.asteroidParts.length+s.fragments.length+s.fragmentsBlack.length,"n t. ov particles",30,0).avg+" / "+(0,r.normalize)((0,h.GetSpaceDustTree)().references.length+(0,y.getParticleTree)().references.length+(0,y.getParticleTree)().references.length,"n t. ov screen particles",30,0).avg,A.TEXT_SIZE_SMALL,"w","");u.default.addListGL(m,ue,le,10,10,e,!1),u.default.addListGL(m,ue,Ae,10,24,e,!1),u.default.addListGL(m,ue,ce,10,38,e,!1)}Y=[],U=[],W=[];var de=(0,r.normalize)(1e3/t,"FPS_LIST"),pe=(0,r.normalize)(ae,"ENGINE_TIME"),fe=(0,r.normalize)(oe,"GUI_TIME"),he=[(0,r.normalize)(t,"FRAME_TIME"),fe,pe],ve=s.menuSettings.fpsOnly,ge=e.game.daylight.is_night,ye=u.default.createSplitted(de.avg+"|"+de.low,ve?17.6:22,ve?ge?"r":"g":"r",""),me=140,_e=130;if(_||(me=200),_){if(u.default.addListGL(m,(0,n.default)(l.GLctx.Texture,m),ye,ve?20:204,ve?230:100,e),ve)return;for(var xe=he.length,Se=0;Se<xe;Se++){var Te=he[Se];(0,a.line2Poly)(0,_e+3*Se*1,10*Te.avg*1,_e+3*Se*1,U,1)}(0,a.line2Poly)(200,_e,200,_e+3*he.length*1,U,1),b.push(1e3/t),b.length>100&&b.shift();for(var Ee=b.length,Me=0;Me<Ee;Me++){var be=.5*b[Me];(0,a.line2Poly)(2+2*Me*1,120,2+2*Me*1,1*(120-be),U,1)}(0,a.addToColorMap)(W,U,.9,0,0,1),j(0,0,[{time:16-(oe+ae),name:null,type:null}],X,H,0,me,1),(0,a.addToColorMap)(W,U,.9,0,0,1),me+=15}x&&(j(0,0,$,R,O,0,me,1),(0,a.addToColorMap)(W,U,.9,.9,0,1),z(e,1,$.map((function(e){return o(o({},e),{time:(0,r.normalize)(e.time,"norm-updater."+e.name+e.type,10,1)})})),me,"y"),me=me+5*$.length+20,j(0,0,ee,C,D,0,me,1),(0,a.addToColorMap)(W,U,0,.9,0,1),z(e,1,ee.map((function(e){return o(o({},e),{time:(0,r.normalize)(e.time,"norm-updater."+e.name+e.type,10,1)})})),me,"g"),me=me+5*ee.length+20,function(e,t,r,n,o,i,s,u,l,A,c){void 0===c&&(c=1);for(var d=r.length,p=0;p<d;p++){var f=10*r[p].time+1,h=o[p]||100,v=i[p]||100,g=f>h?f:h>1?.95*h:h,y=f>v?f:v>1?.97*v:v;o[p]=g,i[p]=y;var m=A*c+5*p*c,_=0*c+1+g*c;if(n.length>p){var x=10*n[p].time+1,S=s[p]||100,T=u[p]||100,E=x>S?x:S>1?.95*S:S,M=x>T?x:T>1?.97*T:T;s[p]=E,u[p]=M,(0,a.line2Poly)(_+0*c+2,m,_+0*c+1+E*c+2,m,Y,1*c),(0,a.line2Poly)(_+M*c+2,m,_+M*c-3+2,m,Y,1*c)}(0,a.line2Poly)(0*c,m,_,m,U,1*c)}}(0,0,te,re,I,L,P,w,0,me,1),(0,a.addToColorMap)(W,U,1,1,1,1),z(e,1,te.map((function(e){return o(o({},e),{time:(0,r.normalize)(e.time,"norm-updater."+e.name+e.type,10,1)})})),me,"w"),z(e,1,re.map((function(e){return o(o({},e),{time:(0,r.normalize)(e.time,"shader-norm-updater."+e.name+e.type,10,1)})})),me+80,"r",30,!1,5),me=me+5*te.length+5,j(0,0,[{time:ae,name:null,type:null}],G,N,0,me+=5,1),(0,a.addToColorMap)(W,U,.9,.9,0,1),j(0,0,[{time:ne,name:null,type:null}],B,F,0,me+=5,1),(0,a.addToColorMap)(W,U,.9,.9,.9,1),j(0,0,[{time:oe,name:null,type:null}],V,k,0,me+=5,1),(0,a.addToColorMap)(W,U,0,.9,0,1),me-=70,z(e,1,i(i(i([],$,!0),ee,!0),te,!0).map((function(e){return o(o({},e),{time:(0,r.normalize)(e.time,e.name+"__createMaxLoadTextthrottled",30)})})),me,null,60,!0)),(0,a.drawColorMapSingle)(W,U,m);var Ie=(0,r.normalize)(ae,"totalEngine",30,2),Le=(0,r.normalize)(ne,"totalEngineClient",30,2),Pe=(0,r.normalize)(oe,"totalGui",30,2),we=(0,r.normalize)(ae+ne+oe,"totalAll",30,2),Re=(0,r.normalize)(t,"step",30,2),Oe={};switch(M){case 49:var Ce=(0,c.readPerformance)(),De=(0,l.GLCTXreadPerformance)();Oe={"  program switching  ":(0,r.normalize)(De.switchedProgram,"program_switching",30).avg,"  program cache hit  ":(0,r.normalize)(De.switchedCacheHit,"program_cache_hit",30).avg,"  drawColor          ":(0,r.normalize)(Ce.drawColor,"drawColor",30).avg,"  addToColorMap      ":(0,r.normalize)(Ce.addToColorMap,"addToColorMap",30).avg,"  drawColorMap       ":(0,r.normalize)(Ce.drawColorMap,"drawColorMap",30).avg,"  drawColorMap calls ":Ce.drawColorMapCalls,"  drawColorMapSingle ":(0,r.normalize)(Ce.drawColorMapSingle,"drawColorMapSingle",30).avg,"  MapSingle Time     ":(0,r.normalize)(Ce.drawColorMapSingleTimings,"drawColorMapSingle time",30,2).avg,"Total: (avg)":"","  Engine    ":(0,r.pad_9)(Ie.avg),"  Engine cl ":(0,r.pad_9)(Le.avg),"  GUI       ":(0,r.pad_9)(Pe.avg),"  ALL       ":(0,r.pad_9)(we.avg),"  STEP      ":(0,r.pad_9)(Re.avg),"  SELF      ":null};break;case 50:var Ge=(0,f.getQuadTreesConstructionTimings)(),Ne=(0,v.getApiReqestData)();Oe={"  n items ":Ge.constructionItems,"  create  ":(0,r.normalize)(Ge.constructionTime,"QT CONST",30,2).high,"  collide ":(0,r.normalize)(Ge.collideTime,"QT collide",30,2).high,"  clean   ":(0,r.normalize)(Ge.cleanupTime,"QT clean",30,2).high,"  resolve ":(0,r.normalize)(Ge.resolveTime,"QT resolve",30,2).high,"  broadph ":Ge.broadphase,"  colls   ":Ge.calls,"  api hit ":(0,r.normalize)(Ne.cachehit,"api hit",30,0).high,"  api miss":(0,r.normalize)(Ne.cachemiss,"api miss",30,0).high,"  api Rect":(0,r.normalize)(Ne.queryTreesRectTime,"api rect",30,2).high,"  total   ":(0,r.normalize)(($.filter((function(e){return e.name.indexOf("QuadTree")>-1}))[0]||{time:-1}).time,"Qt Total timings 2",30,2).high};break;case 51:var Be=(0,d.getOperatorUsage)(),Fe=(0,p.getMathSqrtUsage)();Oe={"  96     ":(0,r.normalize)(Be.dist96,"dist96u",30,0).avg,"  97     ":(0,r.normalize)(Be.dist97,"dist97u",30,0).avg,"Math.sqrt":""," coarse  ":(0,r.normalize)(Fe.coarseUse," coarse",30,0).avg," coarseV ":(0,r.normalize)(Fe.coarseVectorUse," coarseV",30,0).avg," dbtw    ":(0,r.normalize)(Fe.distanceBetweenUse," dbtw",30,0).avg," dbtwV   ":(0,r.normalize)(Fe.distanceBetweenVectorsUse," dbtwV ",30,0).avg," dbtwXY  ":(0,r.normalize)(Fe.distanceBetweenXYXYUse," dbtwXY",30,0).avg," fine    ":(0,r.normalize)(Fe.fineUse," fine",30,0).avg};break;case 53:var Ve=(0,c.readPerformance)();Oe={"Particles ":s.particles.length,"Custom    ":s.customParticles.length,"Bullets   ":s.bullets.length,"Rockets   ":s.rockets.length,"Asteroids ":s.asteroids.length,"Dust      ":s.fragments.length,"Parts     ":s.asteroidParts.length,"Vertices  ":Ve.vertices};break;case 52:var ke=[];(0,h.GetSpaceDustTree)().visualize(ke,[],0,0,-q,-K,1),(0,n.default)(l.GLctx.Vertices,m),(0,c.drawColor)(ke,m,1,1,0,1,m.LINES);var Xe=(0,g.getQTFastP32data)(),He=(0,h.getSpaceDustTimings)();Oe={"num dust  ":He.numDust,"Quadrant n":He.quadrantSize,"on screen ":He.onscreen,"reset     ":(0,r.normalize)(He.reset,"dust reset",30,2).avg,"filtering ":(0,r.normalize)(He.filtering,"dust filtering",30,2).avg,insertions:(0,r.normalize)(He.insertions,"dust insertions",30,2).avg,collisions:(0,r.normalize)(He.collisions,"dust collisions",30,2).avg,"update    ":(0,r.normalize)(He.update,"dust update",30,2).avg,"total     ":(0,r.normalize)(He.totalTime,"dust total",30,2).avg,"tree type ":(0,h.GetSpaceDustTree)().getRangeType(),"nodes     ":Xe.nodesCreated,"pool      ":Xe.poolsize}}var Ue=0,Ye=0;for(var We in me+=A.TEXT_SIZE_SMALL,u.default.addGL(m,(0,n.default)(l.GLctx.Texture,m),u.default.create(E,A.TEXT_SIZE_SMALL,"w"),100,me+4*A.TEXT_SIZE_SMALL+Ue*A.TEXT_SIZE_SMALL,e),me+=A.TEXT_SIZE_SMALL,Oe)Ye="  SELF      "===We?(0,r.pad_9)((0,r.normalize)(performance.now()-Q,"statsGLself",100,2).avg):Oe[We],u.default.addListGL(m,(0,n.default)(l.GLctx.Texture,m),i([u.default.create(We,A.TEXT_SIZE_SMALL,"w")],u.default.addNumberCacheable(Ye,A.TEXT_SIZE_SMALL,"w"),!0),100,me+4*A.TEXT_SIZE_SMALL+Ue*A.TEXT_SIZE_SMALL,e),Ue++;(0,n.default)(l.GLctx.Vertices,m),(0,c.drawColor)(Y,m,1,0,0,1);var je=200;if(S){var qe={49:"gui",50:"quadtrees",51:"sqrt operators",52:"spacedust",53:"items",54:"big graphs",55:"fps graphs",57:"help"};for(var We in qe)u.default.addGL(m,(0,n.default)(l.GLctx.Texture,m),u.default.create("["+(parseInt(We,10)-48)+"] "+qe[We],A.TEXT_SIZE_SMALL,"w"),450,je,e),je+=A.TEXT_SIZE_SMALL}else!T&&s.clock<9e3&&u.default.addGL(m,(0,n.default)(l.GLctx.Texture,m),u.default.create("[HELP: 9]",A.TEXT_SIZE_SMALL,"w"),5,je+A.TEXT_SIZE_SMALL,e)}else Z=s.menuSettings.fps}}.apply(t,a),void 0===n||(e.exports=n)},5346:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(7967),r(1706),r(7899),r(1845),r(3080)],n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSubtitle=t.resetSubtitles=void 0,a=l(a),n=u(n);var A=null,c=[],d={},p=0,f=0;t.resetSubtitles=function(){d={},p=0},t.createSubtitle=function(e){if(!A){if(d[e.text.join("")]>0)return!1;d[e.text.join("")]=e.noShowAgainMS,A=e;for(var t=0,r=0;r<e.text.length;r++)t+=e.text[r].length,e.text[r];return f=p=Math.max(5e3,90*t),!0}return!1};var h=0,v=0;t.default=function(e){var t=e.game,u=e.gl,l=e.SH,g=(e.SX,e.SY,e.stepMS),y=e.step;if(e.SW,t.menuSettings.commanderHelp){if(t.currentLevel<=13)return p=0,void(A=null);for(var m in d)d[m]-=g;if((p-=g)<0&&(A=null,v=0),0!==t.player.length&&A){c=[];var _=A,x=l-80,S=o.TEXT_SIZE_SMALL;v<1&&p>.5*f?v+=.05:p<300&&(v-=.05)<0&&(v=0),v>.4&&(v=.4);for(var T=[],E=_.text.length-1;E>-1;E--){var M=a.default.create(_.text[E],S,"w");T.push(M),(0,r.fillPoly)(-1,16,x-4,M.w+8,S+8,c),x-=S+16}(0,s.showVideoFeed)(e,60,x-40,_.face);var b=function(e,t,r,a,n){void 0===n&&(n=1);var o=[],s=n<.5?80*(.5-n)*.5:0;o.push(r+s,a,r+s+10,a);for(var u=80-(s+10),l=s+10;l<u;l++)o.push(r+l,a+44*(0,i.PerlinNoise2d)(h+.22*l,5)*n);return o.push(r-s+80-10,a,210-s,a),h+=8.9*t,o}(0,y,130,x,v);(0,n.default)(n.GLctx.Vertices,u),(0,r.drawColor)(b,u,0,.5,0,1,u.LINE_STRIP),u.disable(u.BLEND),(0,r.drawColor)(c,u,.1,.1,.1,.66),u.enable(u.BLEND);var I=(0,n.default)(p<200||p>f-200?n.GLctx.TextureDist:n.GLctx.Texture,u);for(E=_.text.length-1;E>-1;E--)M=T[E],x+=S+16,a.default.addGL(u,I,M,20,x,e,!1);return"subtitles"}}}}.apply(t,a),void 0===n||(e.exports=n)},3631:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(737),r(7561),r(1706),r(1706),r(2261),r(9262),r(1330),r(7967),r(7185),r(7899)],n=function(e,t,r,a,n,i,s,u,l,A,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r),n=o(n),A=o(A);var p=[],f=[],h=0,v=0,g=new u.Vector(0,0),y=new u.Vector(0,0),m=function(e,t,r,n,o,i){var u=128;1===o&&(h+=.004*Math.PI,v+=.001*Math.PI,h>=2*Math.PI&&(h=0),v>=2*Math.PI&&(v=0));var l=Math.max(.8*n,60)*(0,s.map)(o,0,.25,0,1,!0);(0,a.blockCirclePoly)(u,l,t,r,Math.PI/12+h,e,0,0,0,4,!1,0,Math.floor(u/6*o),0,Math.floor(u/6*o)),(0,a.blockCirclePoly)(u,l,t,r,Math.PI+Math.PI/12+h,e,0,0,0,4,!1,0,Math.floor(u/6*o),0,Math.floor(u/6*o)),(0,a.blockCirclePoly)(u,l-8,t,r,.5*-Math.PI+v,e,0,0,0,2,!1,0,Math.floor(64*o),0,Math.floor(64*o)),g.setLength(l-12),y.setLength(l-24);for(var A=l-19,c=Math.min(.3*l,48),d=Math.ceil(c*o),p=0;p<d;p++){var f=p*(Math.PI/c)*.4;g.setAngle(f),y.setAngle(f),p/d>=i&&y.setLength(A),(0,a.line2Poly)(t+g.x,r+g.y,t+y.x,r+y.y,e,1)}};t.default=function(e){var t,o,u=e.game,h=e.gl,v=e.SX,g=e.SY;if(!(u.currentLevel<=13)){var y=(0,r.default)(e);if(y&&y.abilities.hash[4]&&!(null===(t=y.abilities.hash[1])||void 0===t?void 0:t.activated)){p=[],f=[];var _=.09,x=y.abilities.hash[4].data;if(x.timer>.5*x.timerT&&y.aimTarget){var S=y.aimTarget,T=(x.timer-.5*x.timerT)/(.5*x.timerT);if(y.targetLock||(0,s.map)(x.timer,.5*x.timerT,x.timerT,0,1,!0),x.timer>.75*x.timerT||Math.random()>.8){var E=(0,l.EnemyLike)(null===(o=x.target)||void 0===o?void 0:o.type)?p:f;m(E,S.pos.x-v,S.pos.y-g,S.radius,T,S.life/S.oLife),(0,a.line2Poly)(S.pos.x-S.radius-S.radius*_*T-v,S.pos.y-g,S.pos.x-S.radius+S.radius*_*T-v,S.pos.y-g,E,2),(0,a.line2Poly)(S.pos.x-v,S.pos.y-S.radius-S.radius*_*T-g,S.pos.x-v,S.pos.y-S.radius+S.radius*_*T-g,E,2),(0,a.line2Poly)(S.pos.x+S.radius-S.radius*_*T-v,S.pos.y-g,S.pos.x+S.radius+S.radius*_*T-v,S.pos.y-g,E,2),(0,a.line2Poly)(S.pos.x-v,S.pos.y+S.radius-S.radius*_*T-g,S.pos.x-v,S.pos.y+S.radius+S.radius*_*T-g,E,2)}}if(y.targetLock){S=y.targetLock;var M=(0,l.EnemyLike)(y.targetLock.type),b=(E=M?p:f,x.timer-.75*x.timerT),I=(0,s.map)(b,0,.25*x.timerT,0,1,!0,!0),L=x.timer>.75?I:1;if(x.dropLockTimer>x.dropLockTimerT-400&&(L=(0,s.map)(x.dropLockTimer,x.dropLockTimerT-400,x.dropLockTimerT,0,1,!0,!0)),m(E,S.pos.x-v,S.pos.y-g,S.radius,L,S.life/S.oLife),M&&(null==S?void 0:S.oLife)>0){var P=S.life/S.oLife*S.radius*.5,w=S.pos.x-v-.25*S.radius,R=S.pos.y-g;(0,a.line2Poly)(w,R,w+P*L,R,E,2),(0,a.line2Poly)(w-2,R-4,w+.5*S.radius+4,R-4,E,1),(0,a.line2Poly)(w-2,R+4,w+.5*S.radius+4,R+4,E,1),(0,a.line2Poly)(w-2,R-4,w-2,R+4,E,1),(0,a.line2Poly)(w+.5*S.radius+4,R-4,w+.5*S.radius+4,R+4,E,1)}(x.timer<.75*x.timerT||Math.random()>.8)&&((0,a.line2Poly)(S.pos.x-S.radius-S.radius*_-v,S.pos.y-g,S.pos.x-S.radius+S.radius*_-v,S.pos.y-g,E,2),(0,a.line2Poly)(S.pos.x-v,S.pos.y-S.radius-S.radius*_-g,S.pos.x-v,S.pos.y-S.radius+S.radius*_-g,E,2),(0,a.line2Poly)(S.pos.x+S.radius-S.radius*_-v,S.pos.y-g,S.pos.x+S.radius+S.radius*_-v,S.pos.y-g,E,2),(0,a.line2Poly)(S.pos.x-v,S.pos.y+S.radius-S.radius*_-g,S.pos.x-v,S.pos.y+S.radius+S.radius*_-g,E,2));var O=Math.floor(((0,c.distanceBetweenVectors)(y.pos,S.pos)-(S.radius+y.radius))*d.PX_TO_MEETERS_CONVERSION),C=A.default.create((O<5?"<5 ":O)+"M",d.TEXT_SIZE_SMALL,O<5?"r":"g");A.default.addGL(h,(0,n.default)(i.GLctx.Texture,h),C,S.pos.x-v-.5*C.w,S.pos.y-g-.5*C.h-(C.h+6),e,!0)}return(p.length>0||f.length>0)&&((0,n.default)(i.GLctx.Vertices,h),(0,a.drawColor)(p,h,1,0,0,1),(0,a.drawColor)(f,h,0,1,0,1)),"targetlock"}}}}.apply(t,a),void 0===n||(e.exports=n)},2660:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(1706),r(7561),r(9262),r(4077),r(7967),r(7185),r(737),r(7899),r(7561),r(2261)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a),u=o(u),A=o(A),(new Date).getTime(),new i.Vector(0,0),new i.Vector(0,.1,1),new i.Vector(0,.2,2),new i.Vector(0,.3,3),new i.Vector(0,.3),new i.Vector(0,0),new i.Vector(0,0),new i.Vector(0,0),new i.Vector(0,0),new i.Vector(0,0),new i.Vector(0,0),new i.Vector(0,0),new i.Vector(0,0),new i.Vector(0,0),new i.Vector(0,0),new i.Vector(0,0),new i.Vector(0,0),new i.Vector(0,0),t.default=function(e){e.SW,e.SH,e.SX,e.SY,e.step,e.gl,e.game}}.apply(t,a),void 0===n||(e.exports=n)},5852:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(1706),r(7561),r(484),r(737)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=o(r),s=o(s);var u=(0,i.rect_pool_pop)(0,0,0,0),l=(0,i.rect_pool_pop)(0,0,0,0);t.default=function(e){var t=e.gl,o=e.game,i=e.SX,A=e.SY,c=e.SW,d=e.SH,p=o.traceLine,f=p.length;u.x=i,u.y=A,u.width=c,u.height=d;for(var h=(0,s.default)(e),v=0;v<f;v++){for(var g=[],y=p[v],m=y.line,_=m.length-1,x=0;x<_;x++){var S=m[x],T=m[x+1];T&&(l.x=Math.min(S.x,T.x),l.y=Math.min(S.y,T.y),l.width=Math.max(S.x,T.x)-l.x,l.height=Math.max(S.y,T.y)-l.y,u.intersects(l)&&g.push(S.x-i,S.y-A,T.x-i,T.y-A))}if(h&&y.active){var E=y.line[y.line.length-1];E&&(g.push(E.x-i,E.y-A),g.push(h.pos.x-i,h.pos.y-A))}g.length>0&&((0,r.default)(a.GLctx.Vertices,t),(0,n.drawColor)(g,t,y.r,y.g,y.b,y.a,t.LINES))}return"TraceLineGL"}}.apply(t,a),void 0===n||(e.exports=n)},8083:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(7899),r(2093),r(5762),r(737),r(8547),r(7967),r(2261)],n=function(e,t,r,a,n,o,i,s,A,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawBackplatePolys=void 0,a=u(a),s=l(s),c=l(c);for(var p=[],f=[],h=[],v=0;v<5;v++)f[v]=0,h[v]=0;var g=0,y=0,m=0,_=0,x=void 0,S=0,T=[],E=[],M=!1,b=0;t.drawBackplatePolys=function(e,t){var n=e.gl;(0,a.default)(a.GLctx.Vertices,n),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),(0,r.drawColor)(t,n,0,0,0,.5),n.blendFunc(n.ONE,n.ONE),t.length=0};var I=[];t.default=function(e){var u,l,v,L,P=e.gl,w=e.SW,R=e.SH,O=e.game,C=e.step,D=e.stepMS;if(O.currentLevel<=13||O.skillTree.active)return"transition SP";var G=(0,s.default)(e);if(!G||(null===(u=G.abilities.hash[1])||void 0===u?void 0:u.activated))return g=0,y=0,S=0,"transition SP";p.length=0,I.length=0,T.length=0,E.length=0;var N=O.daylight.is_night?"r":"g",B=(0,o.getQuadTreesObj)().queryTreesRect([3],O.screen.rect).find((function(e){return e.weaponsActive}));if(g+=C*m,S>4e3?y+=C*_:B||(y+=C*_),B?(m=.02,y<0?y=0:y>1&&(y=1),(S+=D)>4e3?(m=-.03,_=.02):g<0?g=0:g>1&&(g=1)):(S=0,m=-.03,_=-.03,g>1?g=1:g<0&&(g=0),y>1?y=1:y<0&&(y=0)),g>0){for(var F=Math.min(Math.round(3*g*1.5),3),V=0;V<F;V++){var k=f[V];V===F-1?(g<.7&&(k+=C*m*10),k>1?k=1:k<0&&(k=0)):m>0&&(k=1),f[V]=k,g>.7&&(h[V]+=C*m*(.1*V+1)*8,h[V]>1?h[V]=1:h[V]<0&&(h[V]=0)),(0,A.drawBulletIcon)(.5*w+50-40*h[V],.2*R+34*V+3,p,.5*(2.6-k),!1,0)}if(g<1&&g>0){var X=1-g,H=.5*w*g,U=w-2*H,Y=.2*R*g,W=R*X;for(V=0;V<23;V++){var j=(100+120*Math.random())*X;(0,i.addDistBox)(H+U*Math.random()-.5*j,Y+Math.random()*W,j,(7+40*Math.random())*X,H+U*Math.random()-.5*j,Y+Math.random()*W,100*X,100,Math.random()>.5?50+30*Math.random():-30*Math.random()-50,0,0)}}if(g>.2){var q=c.default.create("SPACE",g<.7?n.TEXT_SIZE_HUGE:n.TEXT_SIZE_LARGE,N,!1),z=c.default.create("PORT",g<.7?n.TEXT_SIZE_HUGE:n.TEXT_SIZE_LARGE,N,!1);if((null==B?void 0:B.name)&&(null==(x=B)?void 0:x.cannons.length)<1)return void(x=null);if(!x)return;var K=c.default.create(x.name+" CLASS",n.TEXT_SIZE_LARGE,N),Z=c.default.create((x.name+" CLASS").substring(0,Math.ceil(g*(x.name+" CLASS").length)),n.TEXT_SIZE_LARGE,N);g>.8&&((0,r.cutoffRect)(.5*w-K.w,.2*R,Math.max(K.w,200)+160,1.8*n.TEXT_SIZE_LARGE,40*g,I,E),(0,t.drawBackplatePolys)(e,E)),g>.9&&I.push(.5*w,.2*R*g,.5*w,.2*R+1.8*n.TEXT_SIZE_LARGE+R*(1-g));var Q=c.default.create(((null==B?void 0:B.centerNoneCannon)?Math.round((null==B?void 0:B.centerNoneCannon.life)/(null==B?void 0:B.centerNoneCannon.oLife)*100):"N/A")+"%",n.TEXT_SIZE_MEDIUM,N),J=(0,a.default)(g<1?a.GLctx.TextureDist:a.GLctx.Texture,P);c.default.addGL(P,J,Q,.5*w-(q.w+z.w+Q.w+40),.2*R+.5*n.TEXT_SIZE_MEDIUM,e),c.default.addGL(P,J,q,.5*w-(q.w+z.w)+(Math.random()-.5)*(1-g)*70,.2*R+(Math.random()-.5)*(1-g)*160,e,!1),c.default.addGL(P,J,z,.5*w-z.w+(Math.random()-.5)*(1-g)*70,.2*R+(Math.random()-.5)*(1-g)*160,e,!1),c.default.addGL(P,J,Z,.5*w-K.w,.2*R+n.TEXT_SIZE_LARGE-10,e)}}if(y>0){(b+=D)>450&&(b=0,M=!M);var $=(x.centerNoneCannon&&x.centerNoneCannon.life>.1*n.SPACEPORT_START_LIFE||!(Math.random()>.99))&&x.weaponsActive,ee=c.default.create(((null==x?void 0:x.name)||"N/A")+" CLASS",n.TEXT_SIZE_MEDIUM,$?N:"r"),te=x.centerNoneCannon,re=te&&te.life<.2*n.SPACEPORT_START_LIFE,ae=.5*w,ne=R-100,oe=ae-.12*(null!==(v=null===(l=x.cannons[0])||void 0===l?void 0:l.oLife)&&void 0!==v?v:0)-10;(0,r.cutoffRect)(oe-200,R-111,330+Math.max(ee.w,330)+20,60,15,I,E),(0,t.drawBackplatePolys)(e,E),I.push(.5*w,R-110,.5*w,R-110+60),J=(0,a.default)(Math.random()>.98||re||y<1?a.GLctx.TextureDist:a.GLctx.Texture,P),c.default.addGL(P,J,ee,ae,ne+n.TEXT_SIZE_SMALL,e,!0);for(var ie=ne,se=0,ue=0;ue<O.npcs.length;ue++){var le=O.npcs[ue];le.miningRig&&le.miningRig.base&&le.miningRig.base.guid===x.guid&&se++}p=[],T=[];var Ae=R-52;for(V=0;V<Math.round(3*y);V++)(0,A.drawBulletIcon)(oe-185,R-107+18*V,p,.35,!1,0);var ce=[];for(V=0;V<Math.round(x.cannons.length*y);V++){var de=x.cannons[V];Ae-=de.isCannon?6:12,(0,r.line2Poly)(oe,Ae,oe+.12*de.life,Ae,p,de.isCannon?3:6),de.isCannon,de.life,de.isCannon&&ce.push(c.default.createSplitted(" "+(de.bullets>0?(0,d.pad0009)(de.bullets*y):M?"----":"0000"),n.TEXT_SIZE_SMALL,de.bullets<200&&de.bullets>0&&M?"black":N,""))}for(V=ce.length;V<6;V++)ce.push(c.default.createSplitted(" "+(M?"----":" >< "),n.TEXT_SIZE_SMALL,N,""));var pe=.12*(null===(L=x.centerNoneCannon)||void 0===L?void 0:L.oLife)+10;x.shields>0&&7===x.cannons.length?(0,r.line2Poly)(oe+pe+5,ie,oe+pe+5+x.shields*y,ie,T,6):((0,r.line2Poly)(oe+pe,ie+n.TEXT_SIZE_SMALL-3,oe+pe+.05*(100+x.shields)+10*(10+Math.max(x.shields,-10)),ie+n.TEXT_SIZE_SMALL-3,T,2),c.default.addGL(P,J,c.default.create(x.shields<-10?"shields down":"restarting shields",n.TEXT_SIZE_SMALL,x.shields<-10?"r":N),oe+pe,Ae-.5*n.TEXT_SIZE_SMALL-1,e)),c.default.addGL(P,J,c.default.create(">> workers: "+Math.round(se*y),n.TEXT_SIZE_SMALL,N),ae+(null==x?void 0:x.oshields)+90,Ae-.5*n.TEXT_SIZE_SMALL-1,e),ie+=n.TEXT_SIZE_MEDIUM;for(var fe=.25*-n.TEXT_SIZE_SMALL,he=0;he<ce.length;he+=2){var ve=ce[he],ge=ce[he+1],ye=[];ve&&ye.push.apply(ye,ve),ge&&ye.push.apply(ye,ge),ye.length>0&&c.default.addListGL(P,J,ye,.5*w-270,ne+fe,e,!0),he%2==0&&(fe+=n.TEXT_SIZE_SMALL)}}if(p.length>0){(0,a.default)(a.GLctx.Vertices,P),P.blendFunc(P.ONE,P.ONE);var me=O.daylight.is_night?1:0,_e=O.daylight.is_night?0:1;(0,r.drawColor)(p,P,me,_e,0,1),(0,r.drawColor)(I,P,me,_e,0,1,P.LINES),(0,r.drawColor)(T,P,.4,.4,1,1)}return"transition SP"}}.apply(t,a),void 0===n||(e.exports=n)},2005:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(2093)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a);var s=[];t.default=function(e){e.SW,e.SH;var t=e.SX,o=e.SY,u=e.gl,l=e.game;s=[];for(var A=l.screen.rect,c=(0,i.getQuadTreesObj)().queryTreesRect([45,1,50,8,10,9],A),d=c.length,p=0;p<d;p++){var f=c[p],h=f.radius;switch(f.type){case 10:h*=3;break;case 8:h*=2.5;break;case 9:h*=1.3;break;case 50:h*=2}for(var v=f.pos.x+h-t,g=f.pos.y-h-o,y=Math.min(3,0|f.level),m=0;m<y;m++){var _=v,x=g-1.5*m*4;(0,r.line2Poly)(_,x,_-6,x+5,s,1.5),(0,r.line2Poly)(_,x,_+6,x+5,s,1.5)}}return s.length>0&&((0,a.default)(n.GLctx.Vertices,u),(0,r.drawColor)(s,u,.6,.6,0,1)),"UnitLevelMarker"}}.apply(t,a),void 0===n||(e.exports=n)},3080:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(4157),r(2086),r(8684),r(1706),r(1706)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showVideoFeed=void 0,r=o(r),n=o(n),i=o(i);var u=[],l=!1,A=!1,c=function(e,t){l=!0;var a=document.createElement("canvas");a.height=90,a.width=100;var o=a.getContext("2d"),i=new Image;i.crossOrigin="Anonymous",i.setAttribute("crossOrigin",""),i.onload=function(){o.drawImage(i,0,0),o.lineWidth=1,o.beginPath();for(var s=0;s<a.height;s+=4)o.moveTo(0,s),o.lineTo(a.width,s);o.stroke(),u[t]||(u[t]=[]),u[t].push(r.default.create("texture1",a,!0,(0,n.default)().global_gl)),e.length>0?c(e,t):A=!0},i.src=e.pop()},d=0,p=0,f=0;t.showVideoFeed=function(e,t,a,n){e.game;var o=e.gl,l=(e.SH,e.SX,e.SY,e.stepMS);if(e.step,e.SW,(d+=l)>f&&(d=0,f=20+Math.random()*Math.random()*1088,p=Math.floor(u[n].length*Math.random())),Math.random(),A){var c=u[n][p];c&&r.default.addGL(o,(0,i.default)(Math.random()>.26?s.GLctx.TextureDist:s.GLctx.Texture,o),c,t+0,a+0,e,1.4,1.4)}},t.default=function(e){if(e.game,e.gl,e.SH,e.SX,e.SY,e.stepMS,e.step,e.SW,!l)for(var t=0;t<a.faces.length;t++)c(a.faces[t],t);return"videofeed"}}.apply(t,a),void 0===n||(e.exports=n)},6411:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(9262),r(2261),r(7561),r(1706),r(7967),r(7899),r(998)],n=function(e,t,r,a,n,o,i,s,A,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalogueInstrument=void 0,i=u(i),s=l(s);var d={},p=new a.Vector(0,0),f=new a.Vector(0,0),h=[],v=[],g=-1e3,y=0;t.AnalogueInstrument=function(e,t,u,l,m,_,x,S,T,E,M,b,I,L,P){void 0===I&&(I=!1),void 0===L&&(L=!0),void 0===P&&(P=!0);var w=T.gl,R=T.SX,O=T.SY,C=T.game,D=C.daylight.is_night;C.currentLevel<=13&&(y=0,(d[E]||{}).localPower=0);var G=e+.5*u,N=t+.5*l;d[E]||function(e){d[e]={currentValue:0,actualValue:0,actualOverhoot:0,localPower:0}}(E);var B=d[E],F=B.currentValue,V=B.actualValue,k=B.actualOverhoot,X=B.localPower;if(P&&(L?(y+=.01)>1&&(y=1):(y-=.01)<0&&(y=0,I=!1)),L?(X+=.01)>1&&(X=1):(X-=.01)<0&&(X=0,I=!1),!(X<=0)){I&&(e+=2*(Math.random()-.5),t+=2*(Math.random()-.5)),I||(V=_);var H=x?V:Math.min(m,V);y<1&&(H=0),I?(F--,x=!0):F+=.05*(H-F),(F>m||F<0)&&(x=!0),function(e,t,r,o,i,s){if(g!==s){v=[],h=[],g=s;for(var u=new a.Vector(0,0),l=0;l<7;l++){u.set(0,-o);var A=l/7*2.2-1;(0,n.rotateVector)(u,A,u),u.toVertices,h.push(u.toPoint()),u.set(0,-i),(0,n.rotateVector)(u,A,u),v.push(u.toPoint())}}}(0,0,0,.8*l,.7*l,C.zoomTX);var U=e+.5*u,Y=t+.8*l,W=-.1*l,j=W+-.4*l*(0,n.map)(X,.8,.95,0,1,!0);p.set(0,j),f.set(0,W);var q,z=e+.5*u,K=t+.5*l;q=x?F*(.9*Math.PI)/m-.45*Math.PI:(0,n.map)(F,0,m,0,.9*Math.PI)-.45*Math.PI,(0,n.rotateVector)(p,q,p),(0,n.rotateVector)(f,q,f);for(var Z=h.length*(0,n.map)(X,.8,1,0,1,!1),Q=0;Q<Z;Q++){var J=h[Q],$=v[Q];(0,r.line2Poly)(J.x+U,J.y+Y,$.x+U,$.y+Y,M,1)}(0,o.addToColorMap)(b,M,.2,.2,.2,1,!0);var ee=s.default.create(S,A.TEXT_SIZE_SMALL,D?"r":"g");(0,r.line2Poly)(z+f.x,K+f.y,z+p.x,K+p.y,M,1.5);var te=y<1?(0,n.map)(y,.8,1,0,1,!0):1,re=X<1?(0,n.map)(X,.8,1,0,1,!0):1;(0,o.addToColorMap)(b,M,D?.7*te:0,D?0:.7*te,0,1,!0);var ae=Math.random()>.999;X>.85&&s.default.addGL(w,(0,i.default)(X<1||ae?i.GLctx.TextureDist:i.GLctx.Texture,w),ee,e+.5*u-.5*ee.w,t+.5*l,T),(0,c.Glow)({x:G+R,y:N+O},(I?.05*Math.random()+.05:ae?.01:.1)*re,M,T,D?.4:0,D?0:.3,0,1),d[E]={currentValue:F,actualOverhoot:k,actualValue:V,localPower:X}}}}.apply(t,a),void 0===n||(e.exports=n)},3039:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(9262),r(3578),r(2261),r(2105),r(7899)],n=function(e,t,r,a,n,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetShipPartComplex=t.vectorsToVertices=void 0,u=i(u);var A=new a.Vector(0,0),c=new a.Vector(0,0);t.vectorsToVertices=function(e,t,r,a,n,o,i){void 0===o&&(o=0),void 0===i&&(i=-1);for(var u=e.length,l=[],d=0;d<u;d++){var p=t[e[d]];c.set(p.x,p.y),d===i&&c.mult(o);var f=(0,s.rotateVector)(c,n,A),h=f.x+r,v=f.y+a;l.push(h,v)}return l},t.default=function(e,a,o,i,A,c,d,p){void 0===p&&(p=0);var f=a.abilities.active.cloak>0,h=d||(f?{r:.01,b:.1,g:.1}:n.ShipColors[a.colorIndex]),v=a.life>l.PLAYER_LIFE_LOW_THRESHOLD?0:1-(0,s.map)(a.life,0,l.PLAYER_LIFE_LOW_THRESHOLD,0,1),g=(0,u.default)(p||a.scale,!1,v),y=g.leftWing,m=g.rightWing,_=g.hood,x=g.cockpitGlass,S=g.roof,T=g.baseWingIndexes,E=g.endWingIndexes,M=g.hoodIndexes,b=g.cockpitglassIndexes,I=g.roofIndexes,L=f?0:-.2,P=f?0:-.4,w=f?0:-.7,R=a.angle+.5*Math.PI,O=(a.pos.x-o)*e,C=(a.pos.y-i)*e,D=(0,t.vectorsToVertices)(T,m,O,C,R),G=(0,t.vectorsToVertices)(E,m,O,C,R),N=(0,t.vectorsToVertices)(T,y,O,C,R),B=(0,t.vectorsToVertices)(E,y,O,C,R),F=(0,t.vectorsToVertices)(M,_,O,C,R),V=(0,t.vectorsToVertices)(I,S,O,C,R),k=(0,t.vectorsToVertices)(b,x,O,C,R);return A.push.apply(A,k),(0,r.addToColorMap)(c,A,h.r+w,h.g+w,h.b+w,1),A.push.apply(A,F),(0,r.addToColorMap)(c,A,h.r+P,h.g+P,h.b+P,1),A.push.apply(A,V),(0,r.addToColorMap)(c,A,h.r,h.g,h.b,1),A.push.apply(A,D),A.push.apply(A,N),(0,r.addToColorMap)(c,A,h.r,h.g,h.b,1),A.push.apply(A,G),A.push.apply(A,B),(0,r.addToColorMap)(c,A,h.r+L,h.g+L,h.b+L,1),"ShipShape"},t.GetShipPartComplex=function(e,r,a,n,i,A){void 0===A&&(A=0);var c=r.life>l.PLAYER_LIFE_LOW_THRESHOLD?0:1-(0,s.map)(r.life,0,l.PLAYER_LIFE_LOW_THRESHOLD,0,1),d=(0,u.default)((A||(50===r.type?1:2))*e,!1,c),p=d.leftWing,f=d.rightWing,h=d.hood,v=d.cockpitGlass,g=d.roof,y=d.baseWingIndexes,m=(d.endWingIndexes,d.hoodIndexes),_=d.cockpitglassIndexes,x=d.roofIndexes,S=r.angle+.5*Math.PI,T=(r.pos.x-a)*e,E=(r.pos.y-n)*e;switch(i){case 1:return o([],(0,t.vectorsToVertices)(y,f,T,E,S),!0);case 0:return o([],(0,t.vectorsToVertices)(y,p,T,E,S),!0);case 2:return(0,t.vectorsToVertices)(m,h,T,E,S);case 4:return(0,t.vectorsToVertices)(x,g,T,E,S);case 3:return(0,t.vectorsToVertices)(_,v,T,E,S);case 5:return o(o(o(o(o([],(0,t.vectorsToVertices)(y,f,T,E,S),!0),(0,t.vectorsToVertices)(y,p,T,E,S),!0),(0,t.vectorsToVertices)(m,h,T,E,S),!0),(0,t.vectorsToVertices)(x,g,T,E,S),!0),(0,t.vectorsToVertices)(_,v,T,E,S),!0)}}}.apply(t,a),void 0===n||(e.exports=n)},2105:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};a=[r,t,r(9262)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.offsetVectorArray=void 0;var a={};t.offsetVectorArray=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0);for(var a=e.length,n=0;n<a;n++)e[n].x=e[n].x+t,e[n].y=e[n].y+r;return e};var n=function(e,t){for(var r=e.length,a=0;a<r;a++)e[a].mult(t);return e},i=function(e,t){for(var r=function(e){for(var t=e.length,r=[],a=0;a<t;a++)r.push(e[a].clone());return r}(e),a=r.length,n=0;n<a;n++){var o=r[n];"x"!==t&&"xy"!==t||(o.x=-1*o.x),"y"!==t&&"xy"!==t||(o.y=-1*o.y)}return r};t.default=function(e,s,u){void 0===e&&(e=2),void 0===s&&(s=!1),void 0===u&&(u=0);var l=function(e,t){return e+"_"+t}(e,u);if(!s&&a[l])return a[l];var A=new r.Vector(1,-13,0),c=new r.Vector(2,-12,1),d=new r.Vector(1,0,2),p=new r.Vector(4-2.5*u,2,3),f=new r.Vector(2,2,4),h=new r.Vector(2,4,5),v=new r.Vector(1,6,6),g=new r.Vector(6-2*u,6,7),y=new r.Vector(6-3*u,8,8),m=new r.Vector(4-2*u,8-1*u,9),_=new r.Vector(2,8.5-2*u,10),x=new r.Vector(2,0),S=new r.Vector(2,6);(0,t.offsetVectorArray)([x,S],0,3);var T=o(o(o(o(o(o([],[A.id,c.id,d.id],!1),[d.id,c.id,p.id],!1),[d.id,p.id,f.id],!1),[f.id,p.id,h.id],!1),[h.id,p.id,_.id],!1),[h.id,v.id,_.id],!1),E=o(o(o([],[p.id,_.id,g.id],!1),[_.id,g.id,m.id],!1),[g.id,y.id,m.id],!1),M=n((0,t.offsetVectorArray)([A,c,d,p,f,h,v,g,y,m,_],0,3),e),b=new r.Vector(A.x,A.y+2*e),I=o([b,d],i([b,d],"x"),!0),L=new r.Vector(v.x+.2*e,v.y),P=new r.Vector(d.x-.2*e,d.y+1.5*e),w=o([L,P],i([L,P],"x"),!0),R=n(o([x,S],i([x,S],"x"),!0),e),O=i(M,"x");O[0].x+=4*e*u,O[1].x+=4.5*e*u,M[0].x+=3*e*u,M[1].x+=2*e*u,M[1].y+=1*e*u,M[0].y+=2*e*u,M[8].x-=3*e*u,O[8].x-=1.3*e*u,I[0].x+=3*e*u,I[2].x+=4*e*u;var C={leftWing:O,rightWing:M,hood:I,cockpitGlass:R,roof:w,baseWingIndexes:T,endWingIndexes:E,hoodIndexes:[0,1,2,1,2,3],cockpitglassIndexes:[0,1,2,1,2,3],roofIndexes:[0,1,2,1,2,3]};return s||(a[l]=C),C}}.apply(t,a),void 0===n||(e.exports=n)},5654:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2105),r(9262),r(7185),r(2261),r(2105),r(5714)],n=function(e,t,r,a,n,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i(r);var A=function(e,t,r){var i=function(e,t){for(var r={},a=[],n=[],o=0;o<t.length;o++)void 0===r[t[o]]?(r[t[o]]=a.length,n.push(a.length),a.push(e[t[o]].clone())):n.push(r[t[o]]);return{vectors:a,indices:n}}(t,r),A=null;switch(e.type){case 45:A=34;break;case 1:default:A=46;break;case 50:A=48;break;case 2:A=47}var c=function(e){for(var t=e.length,r=[],a=[],n=0;n<t;n++)r.push(e[n].x),a.push(e[n].y);var o=Math.max.apply(Math,r),i=Math.min.apply(Math,r),s=Math.max.apply(Math,a),u=Math.min.apply(Math,a);return{offsetX:.5*(o-i)+i,offsetY:.5*(s-u)+u,radius:.5*Math.max(o-i,s-u)}}(i.vectors),d=new a.Vector(-c.offsetX,-c.offsetY);return(0,s.rotateVector)(d,e.angle,d),o(o({fromType:e.type,pos:new a.Vector(e.pos.x+d.x,e.pos.y+d.y),vel:new a.Vector(e.vel.x,e.vel.y),life:150,radius:c.radius,guid:(0,n.getGuid)(),type:A,collType:26,angle:e.angle,width:null,edgeA:null,edgeB:null,rotatedEdgeA:null,rotatedEdgeB:null,colorFade:255,complexPartIndices:i.indices,complexPartVectors:(0,u.offsetVectorArray)(i.vectors,-c.offsetX,-c.offsetY),angleVel:.01*Math.random()-.005},(0,l.setImovableDefaults)(null)),{armor:null})};t.default=function(e,t){for(var a,n=(0,r.default)(50===t.type?1:2,!0),o=n.leftWing,i=n.rightWing,s=n.hood,u=n.roof,l=n.baseWingIndexes,c=n.endWingIndexes,d=n.hoodIndexes,p=n.roofIndexes,f=t.vel.getAngle(),h=t.vel,v=[A(t,o,l),A(t,i,l),A(t,s,d),A(t,u,p),A(t,o,c),A(t,i,c)],g=0;g<v.length;g++){var y=Math.random()-.5,m=(Math.random(),v[g]);m.vel.set(h.x,h.y),m.vel.setAngle(f+.1*y),m.angleVel=.01*Math.random()-.005}(a=e.game.asteroidParts).push.apply(a,v)}}.apply(t,a),void 0===n||(e.exports=n)},1719:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(2093),r(484),r(7967),r(7899),r(731),r(1330),r(7344),r(199),r(9262),r(6250)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n),u=o(u),p=o(p);var v=[],g=[],y=[],m=!1,_=(0,f.vec_pool_pop)(0,0);t.default=function(e){var t=e.gl,o=e.game,f=e.SX,x=e.SY;if(!o.menuSettings.debugItems.aabb)return"debug aabb (disabled)";m||(window.addEventListener("click",(function(e){var t=(0,p.default)().engine;t.game.isPaused=!0,_.x=e.clientX+t.game.SX,_.y=e.clientY+t.game.SY;for(var r=(0,i.getQuadTreesObj)().All,a=r.queryVec(_,1,1),n={},o=function(e){var t=a[e],o=(0,c.TypesToString)(t.type);n[o]||(n[o]=[]),n[o].push({im:t,intersects:r.query(t).filter((function(e){return e.guid!==t.guid})).map((function(e){var r;return(r={})[(0,c.TypesToString)(e.type)]=e,r.handlers=function(e,t){var r,a,n=(0,h.getIntersectionData)(),o=n[e.collType],i=null;o&&(i=null===(r=o.find((function(e){return e.type===t.collType})))||void 0===r?void 0:r.handler);var s=null,u=n[t.collType];if(u&&(s=null===(a=u.find((function(t){return t.type===e.collType})))||void 0===a?void 0:a.handler),s||i){var l={};return s&&(l["reversed: "+(null==s?void 0:s.name)]=s,e.collType===t.collType&&(l.info="matches both reversed and normal. CollType is Eual")),i&&(l["normal: "+(null==i?void 0:i.name)]=i),l}return{"no handler":"N/A"}}(t,e),r}))})},s=0;s<a.length;s++)o(s);window.resultView=n,console.log(n)})),m=!0),v=[],g=[],y=[];for(var S=(0,n.default)(a.GLctx.Texture,t),T=(0,i.getQuadTreesObj)().All,E=T.getAABBdata_I_XYWH_S(o.screen.rect.x,o.screen.rect.y,o.screen.rect.width,o.screen.rect.height),M=E.aabb,b=[],I=[],L=M.length,P=M,w=0;w<L;w+=6){var R=P[w],O=P[w+1],C=P[w+2],D=P[w+3],G=P[w+4],N=P[w+5],B=T.references[R];if((0,c.PredatorLike)(B.type)){var F=B.life,V=B.oLife,k=B.fleeDangerMS,X="";if(36===B.type){var H=(0,d.getSpacesnakeFromSegment)(B.guid);F=H.life,V=H.oLife,k=H.fleeDangerMS,X=H.tryToMoveAwayAfterStationaryAttackMs>0?" M/A: "+H.tryToMoveAwayAfterStationaryAttackMs/100:""}var U=u.default.create(F.toFixed(0)+" , "+(F/V*100).toFixed(0)+" , "+(k>0?" FLEE: "+(.001*k).toFixed(0):"")+X,l.TEXT_SIZE_SMALL,"r");u.default.addGL(t,S,U,O-f+B.radius-.5*U.w,C-x,e,!0)}if(D>400){var Y=P[w],W=u.default.create((0,c.TypesToString)(T.references[Y].type),l.TEXT_SIZE_SMALL,1===N?"b":"g");u.default.addGL(t,S,W,O-f,C-x,e,!0),u.default.addGL(t,S,W,O+D-f-W.w,C-x,e,!0),u.default.addGL(t,S,W,O+D-f-W.w,C+G-x-l.TEXT_SIZE_SMALL,e,!0),u.default.addGL(t,S,W,O-f,C+G-x-l.TEXT_SIZE_SMALL,e,!0)}1===N?b.push(new s.Rectangle(O,C,D,G)):I.push(new s.Rectangle(O,C,D,G))}for(w=0;w<I.length;w++)(0,r.rectanglePolyRect)(I[w],f,x,g);for(w=0;w<b.length;w++)(0,r.rectanglePolyRect)(b[w],f,x,y);var j=E.nodes;if(o.currentLevel>=13)for(w=0;w<j.length;w+=9){O=j[w]+2,C=j[w+1]+2,D=j[w+2]-4,G=j[w+3]-4;var q=j[w+4],z=j[w+5]/A.FST32_NODE_LOOP_BASE_EXPORTED,K=j[w+6],Z=j[w+7],Q=j[w+8],J=new s.Rectangle(O,C,D,G);e.game.screen.rect.intersects(J)&&(u.default.addListGL(t,S,u.default.createSplitted(q+"/"+z+" ("+K+"/"+Z+")"+(Q?" SLEEP":""),l.TEXT_SIZE_SMALL,"w",""),O+10-f,C+10-x,e,!0),(0,r.rectanglePolyRect)(J,f,x,Q?y:v))}return(0,n.default)(a.GLctx.Vertices,t),(0,r.drawColor)(v,t,0,.8,0,1,t.LINES),(0,r.drawColor)(g,t,1,0,0,1,t.LINES),(0,r.drawColor)(y,t,0,1,1,1,t.LINES),"debug aabb"}}.apply(t,a),void 0===n||(e.exports=n)},4603:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(484),r(7967),r(7899),r(737),r(1330),r(2093),r(3058),r(7561)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n),s=o(s),l=o(l);var f=[],h=[],v=[],g=[],y=[],m=[],_=[],x=[],S=[],T=[],E=[],M=function(e,t,r,a,n){return(e-t)/r*r*a-.5*r*a+.5*r+n},b=(0,i.rect_pool_pop)(0,0,0,0),I=function(e,t,a,n,o,i,s,u,l,A){void 0===A&&(A=1);for(var c=0;c<e.length;c++){var d=e[c];b.x=M(d.x,t,n,i,s),b.y=M(d.y,a,o,i,u),b.width=d.width*i,b.height=d.height*i,(0,r.drawRectPoly)(b,0,0,l,A)}},L=new i.Rectangle(0,0,0,0),P=new i.Rectangle(0,0,0,0),w=function(e,t,a,n,o,i,s,u,l,A,c,d){if(void 0===l&&(l=0),void 0===A&&(A=0),void 0===c&&(c=-1),void 0===d&&(d=0),!(c>0&&d>=c))for(var p=0;p<e.length;p++){var f=e[p];if(1===u){if(P.x=n,P.y=o,P.width=i,P.height=s,!P.intersects(f.rect))continue;f.populated?(P.x=f.rect.x+2,P.y=f.rect.y+2,P.width=f.rect.width-4,P.height=f.rect.height-4):(P.x=f.rect.x,P.y=f.rect.y,P.width=f.rect.width,P.height=f.rect.height),(0,r.drawRectPoly)(P,n,o,f.populated?a:t,0===d?2:1)}else P.x=(f.rect.x-n)/i*i*u-.5*i*u+.5*i+l,P.y=(f.rect.y-o)/s*s*u-.5*s*u+.5*s+A,P.width=f.rect.width*u,P.height=f.rect.height*u,(0,r.drawRectPoly)(P,0,0,f.populated?a:t,0===d?2:1);w(f.children,t,a,n,o,i,s,u,l,A,c,d+1)}},R=function(e,t,r){for(var a=0;a<e.length;a++){var n=e[a];if(n.rect.intersects(t.game.screen.rect)){if(n.seed){var o=s.default.create(n.rect.x+" | "+n.rect.y,u.TEXT_SIZE_SMALL,"w");s.default.addGL(t.gl,r,o,n.rect.x-t.SX,n.rect.y-t.SY+u.TEXT_SIZE_SMALL,t,!0)}if(n.populated&&(o=s.default.create((0,A.TypesToString)(n.type),u.TEXT_SIZE_SMALL,"g"),s.default.addGL(t.gl,r,o,n.rect.x-t.SX,n.rect.y-t.SY,t,!0),n.item)){var i="ST:"+(n.item.remove?"removed":" in game ")+(n.item.inTree?"in tree ":" not in tree"),l=s.default.create(i,u.TEXT_SIZE_SMALL,"g");s.default.addGL(t.gl,r,l,n.rect.x-t.SX,n.rect.y-t.SY+u.TEXT_SIZE_SMALL,t,!0)}R(n.children,t,r)}}};t.default=function(e){var t=e.gl,o=e.game,i=e.SX,s=e.SY,u=e.SW,A=e.SH;if(!o.menuSettings.debugItems.chunks)return"debug chunks (disabled)";f=[],h=[],T=[],E=[],v=[],g=[],y=[],m=[],_=[],x=[],S=[];var b=o.procedural.chunks.size,P=o.procedural.chunks.stats.maxLoad,O=o.procedural.chunks.stats.geneated,C=o.procedural.chunks.stats.load,D=o.procedural.chunks.hash,G=[];for(var N in D){var B=D[N];G.push(B)}w(G,f,T,i,s,u,A,1);var F=100/b+0,V=.3*-u,k=.1*-A;w(G,h,T,i,s,u,A,F,V,k,64),o.procedural.treeBounds&&I([o.procedural.treeBounds],i,s,u,A,F,V,k,S,4);var X=(0,l.default)(e);if(X){var H=M(X.pos.x,i,u,F,V),U=M(X.pos.y,s,A,F,k);(0,r.line2Poly)(H-3,U-3,H+3,U+3,f,1),(0,r.line2Poly)(H+3,U-3,H-3,U+3,f,1)}I([o.screen.rect,o.procedural.boundsSS,o.procedural.chunks.pruneRect,(0,d.IntArrToRect)((0,c.getQuadTreesObj)().All.boundry)],i,s,u,A,F,V,k,f);for(var Y=[],W=0;W<o.anomalyPairs.length;W++){var j=o.anomalyPairs[W];Y.push(j.in,j.out)}!function(e,t,a,n,o,i,s,u){for(var l=0;l<e.length;l++)for(var A=e[l],c=0;c<A.length;c++){var d=A[c];null==d||d.pos;var f=M(d.pos.x,n,t,i,s),h=M(d.pos.y,o,a,i,u),S=d.radius*i;switch(L.x=f-S,L.y=h-S,L.width=2*S,L.height=2*S,d.type){case 12:case 14:(0,r.rectanglePolyRect)(L,0,0,m);break;case 13:(0,r.rectanglePolyRect)(L,0,0,y);break;case 17:(0,r.rectanglePolyRect)(L,0,0,m,!0);break;case 3:(0,r.rectanglePolyRect)(L,0,0,g);break;case 15:case 16:(0,r.rectanglePolyRect)(L,0,0,x);break;case 1:case 10:case 9:case 8:(0,p.crossHairLines)(f,h,v,Math.max(8,10*S));break;case 0:case 2:(0,p.crossHairLines)(f,h,_,Math.min(10,10*S));break;default:S>=4?(0,r.rectanglePolyRect)(L,0,0,_):(E.push(f,h),S>2.5&&(E.push(f+1,h),E.push(f+1,h+1),E.push(f,h+1),E.push(f,h-1)))}}}([o.asteroids,o.rockFormations,o.ancientBlocks,o.spaceMines,o.spacePorts.map((function(e){return e.centerNoneCannon})),o.spacePorts,o.anomlies,o.destroyers,o.npcs,o.enemies,o.spaceSpiders,o.spaceSquids,o.spaceSnake.filter((function(e){return e.segments.length>0})).map((function(e){return e.segments[0]})),Y,o.spaceFog.map((function(e){return{pos:{x:e.x,y:e.y},radius:e.radius,type:e.type}})),o.minefields],u,A,i,s,F,V,k);var q=(0,c.getQuadTreesObj)().queryTreesRect([4],o.screen.rect);for(W=0;W<q.length;W++){var z=q[W];(0,r.line2Poly)(z.pos.x-i,z.pos.y-s,z.opos.x-i,z.opos.y-s,S,1)}if((0,r.line2Poly)(20,20,20+5*O,20,h,4),(0,r.line2Poly)(20,30,20+5*C,30,h,4),(0,r.line2Poly)(10,10,10,40,h,4),(0,r.line2Poly)(20+5*P+10,10,20+5*P+10,40,h,4),f.length>0){(0,n.default)(a.GLctx.Vertices,t),(0,r.drawColor)(f,t,0,.3,.1,1),(0,r.drawColor)(S,t,1,0,0,1),(0,r.drawColor)(h,t,.1,0,0,1),(0,r.drawColor)(T,t,.1,.1,0,1),(0,r.drawColor)(E,t,1,1,1,1,t.POINTS),(0,r.drawColor)(_,t,1,1,1,1,t.LINES),(0,r.drawColor)(v,t,1,0,0,1,t.LINES),(0,r.drawColor)(y,t,1,1,0,1,t.LINES),(0,r.drawColor)(m,t,1,0,1,1,t.LINES),(0,r.drawColor)(g,t,0,1,0,1,t.LINES),(0,r.drawColor)(x,t,0,0,1,1,t.LINES);var K=(0,n.default)(a.GLctx.Texture,t);R(G,e,K)}return"debug/chunksGL"}}.apply(t,a),void 0===n||(e.exports=n)},7157:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(7899),r(7561),r(6265),r(484),r(7967)],n=function(e,t,r,a,n,i,s,u,l,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n),A=o(A);var c=[],d=[],p=[],f=[];t.default=function(e){var t=e.gl,o=e.game,h=e.SX,v=e.SY;if(!o.menuSettings.debugItems.forces)return"forces debug (disabled)";c=[],d=[],f=[],p=[];for(var g=(0,n.default)(a.GLctx.Texture,t),y=(0,u.getForce2Tree)().queryInt(o.screen.rect),m=0;m<y.length;m++){var _=y[m],x=u.debugForce2.getOrCreateCachedForceField(_);A.default.addGL(t,g,A.default.create(x.field.length+" x "+.5*x.field[0].length+" "+x.fx+"|"+x.fy+" s:"+_.sizeRoundedToOddRes+" i:"+Math.round(_.intensity),20,"w"),_.pos.x-_.radius-h,_.pos.y-_.radius-30-v,e),(0,s.drawRectPoly)(new l.Rectangle(_.pos.x-_.radius,_.pos.y-_.radius,2*_.radius,2*_.radius),h,v,p,1);for(var S=x.field,T=x.field.length,E=2*T,M=0;M<T;M++)for(var b=S[M],I=0;I<E;I+=2){var L=b[I],P=b[I+1],w=.5*I*i.FORCEFIELD_RESOLUTION_F2+.5*i.FORCEFIELD_RESOLUTION_F2-h+_.pos.x-_.radius,R=M*i.FORCEFIELD_RESOLUTION_F2+.5*i.FORCEFIELD_RESOLUTION_F2-v+_.pos.y-_.radius;Math.abs(L)>0||Math.abs(P)>0?(c.push(w,R,w+15e3*L,R+15e3*P),d.push(w,R)):f.push(w,R)}}return(0,n.default)(a.GLctx.Vertices,t),(0,r.drawColor)(f,t,1,0,0,1,t.POINTS),(0,r.drawColor)(d,t,0,1,1,1,t.POINTS),(0,r.drawColor)(c,t,0,1,1,1,t.LINES),(0,r.drawColor)(p,t,1,0,0,1),"forces debug"}}.apply(t,a),void 0===n||(e.exports=n)},1134:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(2093),r(7344),r(9262)],n=function(e,t,r,a,n,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n);var l=[],A=[],c=[];t.default=function(e){var t=e.gl,o=e.game,d=e.SX,p=e.SY;if(!o.menuSettings.debugItems.predatorTarget)return"debug predator target (disabled)";l=[],A=[],c=[];var f={};return(0,i.getQuadTreesObj)().queryTreesRect([36,9,10],o.screen.rectSS_1000).map((function(e){if(36===e.type){var t=(0,s.getSpacesnakeFromSegment)(e.guid);return f[t.guid]?null:(f[t.guid]=!0,t)}return e})).filter((function(e){return!!e})).map((function(e){if(e.restPos&&e.restPos.x&&(e.fleeDangerMS>0||e.prioritzeRestposMS>0)&&(0,r.line2Poly)(e.pos.x-d,e.pos.y-p,e.restPos.x-d,e.restPos.y-p,l,2),e.fleeDangerMS>0){var t=new u.Vector(7500,0);t.setAngle(e.fleeDirection),(0,r.line2Poly)(e.pos.x-d,e.pos.y-p,e.pos.x+t.x-d,e.pos.y+t.y-p,c,6)}e.preyPos&&e.preyPos.x&&(0,r.line2Poly)(e.pos.x-d,e.pos.y-p,e.preyPos.x-d,e.preyPos.y-p,A,2)})),(0,n.default)(a.GLctx.Vertices,t),(0,r.drawColor)(l,t,0,1,0,1),(0,r.drawColor)(A,t,1,0,0,1),(0,r.drawColor)(c,t,.2,.2,1,1),"debug debug predator target"}}.apply(t,a),void 0===n||(e.exports=n)},947:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(484),r(3431)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n);var u=[],l=[],A=[],c=[],d=function(e,t,r,a,n,o){var s=e.x-t,u=e.y-r,l=e.width*a,A=e.height*a;return s=s+.5*(e.width-l)+n,u=u+.5*(e.height-A)+o,new i.Rectangle(s,u,l,A)},p=function(e,t,r,a,n,o,s,u){var l=e.pos.x-t-e.radius,A=e.pos.y-r-e.radius,c=2*e.radius*a,d=2*e.radius*a;return l*=a,A*=a,l+=n+s,A+=o+u,new i.Rectangle(l,A,c,d)},f=function(e,t,r,a,n,o,i,s){for(var u=e.length,l=0;l<u;l++){var A=e[l];h(A,t,r,a,n,o,i,s)}},h=function(e,t,a,n,o,i,s,u){for(var l=e.length,A=0;A<l;A++){var c=e[A];(0,r.rectanglePolyRect)(p(c,n,o,i,a.x,a.y,s,u),0,0,t)}};t.default=function(e){var t=e.gl,o=e.game,p=e.SW,h=e.SH,v=e.SX,g=e.SY;if(!o.menuSettings.debugItems.proceduralCreation||!o.IS_PROCEDURAL)return"debug procedural creation (disabled)";u=[],l=[],A=[],c=[],o.procedural.boundsSS,o.proceduralBounds;var y=h/o.procedural.boundsSS.height*.5,m=.3*-p,_=.1*h,x=d(o.screen.rect,v,g,y,m,_);(0,r.rectanglePolyRect)(x,0,0,A),[o.screen.rectSS_200,o.screen.rectSS_800,o.screen.rectSS_1000,o.screen.rectSS_1500,o.screen.rectSS_2000,new i.Rectangle(v-4e3,g-4e3,8e3,8e3),new i.Rectangle(v-4e3,g-4e3,p+8e3,h+8e3)].map((function(e){d(e,v,g,y,m,_)}));var S=d(o.proceduralBounds,v,g,y,m,_);(0,r.rectanglePolyRect)(S,0,0,A);var T=d(o.procedural.boundsSS,v,g,y,m,_);return(0,r.rectanglePolyRect)(T,0,0,u),f([o.asteroids,o.rockFormations,o.ancientBlocks],u,x,v,g,y,0,0),f([o.spacePorts,(0,s.getAllAnomalies)(o),o.rockFormationSystemRadius,o.ancients],c,x,v,g,y,0,0),f([o.spaceSquids,o.destroyers,o.enemies,o.spaceSpiders],l,x,v,g,y,0,0),f([o.player],A,x,v,g,y,0,0),(0,n.default)(a.GLctx.Vertices,t),(0,r.drawColor)(u,t,1,1,1,1,t.LINES),(0,r.drawColor)(l,t,1,0,0,1,t.LINES),(0,r.drawColor)(A,t,0,1,1,1,t.LINES),(0,r.drawColor)(c,t,.2,1,.2,1,t.LINES),"debug procedural creation"}}.apply(t,a),void 0===n||(e.exports=n)},50:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(4157),r(9262),r(1706),r(1706),r(8927),r(7561)],n=function(e,t,r,a,n,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetFogSystems=void 0,r=o(r),n=o(n);var l={};t.resetFogSystems=function(){for(var e in l)l[e].list=[]};var A=function(e,t,r,n,o,i,s){var u=s,l=new a.Vector(0,o*Math.random());l.setAngle(Math.random()*Math.PI*2),l.addXY(r,n),e.push({txtBuf:t,vel:new a.Vector((Math.random()-.5)*u,(Math.random()-.5)*u),pos:l,scale:(.5+.5*Math.random())*i,remove:!1})},c=new a.Vector(0,0);t.default=function(e,t,a,o,d,p,f,h,v,g,y,m,_){void 0===y&&(y=256),void 0===m&&(m=10),void 0===_&&(_=-1);var x=e.gl,S=e.step,T=e.SX,E=e.SY,M=(e.SW,e.SH,e.game);if(e.stepMS,M.menuSettings.glowParticles){var b="".concat(p).concat(f).concat(h).concat(v).concat(y);if((0,u.onStage)(e,o,d,700+3*t)){var I=l[b];if(!I){var L=(0,s.createRadialGradientTexture)(p,f,h,v,y,g);I=l[b]={buffer:L,list:[]}}var P=I.buffer,w=I.list;if(S>0&&!M.isPaused){if(w.length<a)for(var R=_>0?Math.min(_,a):Math.round(3*Math.random()),O=0;O<R;O++)A(w,P,o,d,t,1,m);!function(e,t,r,a){for(var n=e.length,o=0;o<n;o++){var i=e[o];if(0===o&&i.scale>.5){for(var s=0;s<5;s++)A(e,i.txtBuf,i.pos.x,i.pos.y,t*i.scale,.2*i.scale,a);i.remove=!0,i.scale=0}i.vel.mult(.99),c.set(i.vel.x,i.vel.y),c.mult(1),i.pos.add(c),i.scale*=.99,i.scale<.2&&(i.scale*=.98,i.scale<.01&&(i.remove=!0))}}(w,y,0,m),I.list=function(e){for(var t=[],r=e.length,a=0;a<r;a++){var n=e[a];n.remove||t.push(n)}return t}(w)}var C=Math.min(2,M.zoomTXinverted);for(O=0;O<w.length;O++){var D=w[O];r.default.addGL(x,(0,n.default)(i.GLctx.Texture,x),P,D.pos.x-T,D.pos.y-E,e,D.scale*C,D.scale*C)}}}}}.apply(t,a),void 0===n||(e.exports=n)},6739:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7967),r(1706),r(2993),r(7899),r(2254),r(5010),r(737)],n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=l(r),a=u(a),s=l(s),A=l(A);var c=0;t.default=function(e){var t=e.game,u=e.SW,l=e.SH,d=e.gl,p=e.WW,f=e.WH,h=t.daylight.is_night;if(!t.menuSettings.keybindingHint||t.currentLevel<=13||t.levelEditor)c=0;else{var v=(0,A.default)(e);if(v&&!(v.life<1)){v.abilities.active.cloak>0&&(c=1);var g=u/t.resW,y=v.damageTaken||!t.IS_PROCEDURAL&&(0,s.default)(v,p,f),m=[];for(var _ in n.inGameKeyCodes.keys){var x=i.IN_GAME_KEY_BINDING_TRANSLATIONS[n.Keys[_]],S="";switch(_){case"PRIMARY_WEAPON":if(v.weapons.primary.types.length<1)continue;S=v.weapons.hash[v.weapons.primary.types[v.weapons.primary.index]].name;break;case"SECONDARY_WEAPON":if(v.weapons.secondary.types.length<1)continue;S=v.weapons.hash[v.weapons.secondary.types[v.weapons.secondary.index]].name;break;case"AUX_WEAPON":if(v.weapons.aux.types.length<1)continue;S=v.weapons.hash[v.weapons.aux.types[v.weapons.aux.index]].name;break;case"TOGGLE_PRIMARY_WEAPON":if(v.weapons.primary.types.length<2)continue;break;case"TOGGLE_SECONDARY_WEAPON":if(v.weapons.secondary.types.length<2)continue;break;case"TOGGLE_AUX_WEAPON":if(v.weapons.aux.types.length<2)continue;break;case"PRIMARY_ABILITY":if(v.abilities.primary.types.length<1)continue;S=v.abilities.hash[v.abilities.primary.types[v.abilities.primary.index]].name;break;case"SECONDARY_ABILITY":if(v.abilities.secondary.types.length<1)continue;S=v.abilities.hash[v.abilities.secondary.types[v.abilities.secondary.index]].name;break;case"AUX_ABILITY":if(v.abilities.aux.types.length<1)continue;S=v.abilities.hash[v.abilities.aux.types[v.abilities.aux.index]].name;break;case"TOGGLE_PRIMARY_ABILITY":if(v.abilities.primary.types.length<2)continue;break;case"TOGGLE_SECONDARY_ABILITY":if(v.abilities.secondary.types.length<2)continue;break;case"TOGGLE_AUX_ABILITY":if(v.abilities.aux.types.length<2)continue;break;case"STRAFELEFT":case"STRAFERIGHT":if(!v.abilities.hash[14])continue}var T=(0,i.createKeyBindingLabel)(v.abilities.active.cloak>0?"PRESS TO UNCLOAK":_,x);m.push(r.default.create(T.replace("_"," ")+(S?" "+S:""),o.TEXT_SIZE_SMALL,h?"r":"g"))}for(var E=(0,a.default)(y?a.GLctx.TextureDist:a.GLctx.Texture,d),M=m.length,b=Math.min(c,M),I=0;I<b;I++)I===Math.floor(c)&&(E=(0,a.default)(a.GLctx.TextureDist,d)),r.default.addGL(d,E,m[I],(y?5+10*Math.random():10)*g,.3*l+I*(1.2*o.TEXT_SIZE_SMALL)*g,e);return c<M+2?c+=.14:t.clock<6e4&&r.default.addGL(d,E,r.default.create("ESC/options/hud/keybinding hint",o.TEXT_SIZE_SMALL,h?"r":"g"),(y?5+10*Math.random():10)*g,.3*l+(b+1)*(1.2*o.TEXT_SIZE_SMALL)*g,e),"keybindings"}c=0}}}.apply(t,a),void 0===n||(e.exports=n)},8547:(e,t,r)=>{var a,n;a=[r,t,r(7561)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawBulletIcon=void 0;var a=[0,1,2,4,8];t.drawBulletIcon=function(e,t,n,o,i,s){void 0===o&&(o=1),void 0===i&&(i=!1),void 0===s&&(s=1);var u=2*o,l=40*u,A=10*u,c=3*u,d=2*u,p=Math.max(2,2.2*u),f=20*u,h=.4*u,v=e,g=t;switch(s){case 1:v=e-.5*(l+1.5*f),g=t-.5*A;break;case 0:v=e,g=t+5*u}(0,r.line2Poly)(v+.1*l,g,v+l,g,n,p),(0,r.line2Poly)(v+.1*l,g+A,v+l,g+A,n,p),(0,r.line2Poly)(v+u,g-p,v+u,g+A+p,n,1.3*p),(0,r.line2Poly)(v+u,g+.5*u,v+.15*l,g+.5*u,n,.5*p),(0,r.line2Poly)(v+u,g+A-.5*u,v+.15*l,g+A-.5*u,n,.5*p),(0,r.line2Poly)(v+.15*l,g+.8*A,v+.95*l,g+.8*A,n,Math.max(1,.1*p)),(0,r.line2Poly)(v+l-u+2,g,v+l+c,g+d,n,p),(0,r.line2Poly)(v+l-u+2,g+10*u,v+l+c,g+10*u-d,n,p),(0,r.line2Poly)(v+l+c,g+d,v+l+c,g+10*u-d,n,.3*p),(0,r.line2Poly)(v+l+c,g+d,v+l+c+f,g+d,n,p),(0,r.line2Poly)(v+l+c,g+10*u-d,v+l+c+f,g+10*u-d,n,p);for(var y=0;y<a.length-1;y++)(0,r.line2Poly)(v+l+c+f+3*y*u,g+10*u-d+a[y]*-h,v+l+c+f+3*(y+1)*u,g+10*u-d+a[y+1]*-h,n,p);for(y=0;y<a.length-1;y++)(0,r.line2Poly)(v+l+c+f+3*y*u,g+d+a[y]*h,v+l+c+f+3*(y+1)*u,g+d+a[y+1]*h,n,p);i&&((0,r.line2Poly)(v+2*l,g+.7*A,v+2*l+20*u,g+A,n,.5*p),(0,r.line2Poly)(v+2*l,g+.3*A,v+2*l+20*u,g,n,.5*p),(0,r.line2Poly)(v+2.2*l,g+.5*A,v+2*l+20*u,g+.6*A,n,.5*p),(0,r.line2Poly)(v+2.2*l,g+.5*A,v+2*l+20*u,g+.4*A,n,.5*p))}}.apply(t,a),void 0===n||(e.exports=n)},3946:(e,t,r)=>{var a,n;a=[r,t,r(7561),r(910),r(9262)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawChargeIcon=void 0;var o=(0,n.vec_pool_pop)(0,0),i=(0,n.vec_pool_pop)(0,0),s=[.9*Math.PI,Math.PI,1.1*Math.PI,Math.PI+.9*Math.PI,0,Math.PI+1.1*Math.PI];Math.PI,Math.PI,t.drawChargeIcon=function(e,t,n,u,l,A,c,d){void 0===c&&(c=1),void 0===d&&(d=1);var p=2*c,f=e,h=t;switch(d){case 1:f=e,h=t;break;case 0:f=e+38*p,h=t+38*p}var v=(0,a.hexBox)(20*p,{x:f,y:h},0,0);if(n.push.apply(n,v[0]),u.push.apply(u,v[1]),l.push.apply(l,v[2]),43===A){o.setLength(38*p),i.setLength(22*p);for(var g=0;g<s.length;g++){var y=s[g];o.setAngle(y),i.setAngle(y),(0,r.line2Poly)(f+o.x,h+o.y,f+i.x,h+i.y,1===g||4===g?n:l,2*p)}}42===A&&((0,r.blockCirclePoly)(80,26*p,f,h,0,n,0,0,0,3*p,!1,0,30,0,30),(0,r.blockCirclePoly)(80,32*p,f,h,0,u,0,0,0,2*p,!1,0,30,0,30),(0,r.blockCirclePoly)(80,38*p,f,h,0,l,0,0,0,p,!1,0,30,0,30)),25===A&&(0,r.blockCirclePoly)(80,29*p,f,h,0,u,0,0,0,3*p,!1,0,60,0,60)}}.apply(t,a),void 0===n||(e.exports=n)},8988:(e,t,r)=>{var a,n;a=[r,t,r(8547),r(3946),r(8702),r(4943),r(6088),r(9914),r(4853),r(7561)],n=function(e,t,r,a,n,o,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawWeaponIcon=void 0,t.drawWeaponIcon=function(e,t,A,c,d,p,f,h,v){switch(void 0===c&&(c=1),void 0===h&&(h=1),e){case 26:(0,r.drawBulletIcon)(t,A,d,c,!1,h);break;case 31:(0,o.drawRocketIcon)(t,A,d,c,!0,!1,h);break;case 33:(0,o.drawRocketIcon)(t,A,d,c,!1,!1,h);break;case 32:(0,o.drawRocketIcon)(t,A,d,c,!0,!0,h);break;case 25:case 42:case 43:(0,a.drawChargeIcon)(t,A,d,p,f,e,c,h);break;case 51:(0,n.drawElectroIcon)(t,A,d,c,h);break;case 44:(0,i.drawTurretIcon)(t,A,d,c,h);break;case 27:(0,u.drawFlameIcon)(t,A,d,p,f,c,h);break;case 28:(0,s.drawLazerIcon)(t,A,d,p,f,c,h)}v&&[d,p,f].filter((function(e){return e.length})).forEach((function(e,t){var r=1-.33*t;(0,l.drawColor)(e,v.gl,0,r,0,1-.2*t)}))}}.apply(t,a),void 0===n||(e.exports=n)},8702:(e,t,r)=>{var a,n;a=[r,t,r(7561)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawElectroIcon=void 0,t.drawElectroIcon=function(e,t,a,n,o){void 0===n&&(n=1),void 0===o&&(o=1);var i=2*n,s=30*i,u=2*i,l=e,A=t;switch(o){case 1:l=e-.5*s,A=t-s;break;case 0:l=e,A=t}(0,r.line2Poly)(l+.5*s-.5*i,A,l+s+.5*i,A,a,u),(0,r.line2Poly)(l+.5*s,A,l,A+s,a,u),(0,r.line2Poly)(l+s,A,l+.6*s,A+.7*s+.5*i,a,u),(0,r.line2Poly)(l+.6*s,A+.7*s,l+s+u,A+.7*s,a,u),(0,r.line2Poly)(l-.5*i,A+s,l+.5*s+i,A+s,a,u),(0,r.line2Poly)(l+.5*s,A+s,l+.2*s,A+2*s,a,u,2),(0,r.line2Poly)(l+s,A+.7*s,l+.2*s,A+2*s,a,u,2)}}.apply(t,a),void 0===n||(e.exports=n)},4853:(e,t,r)=>{var a,n;a=[r,t,r(7561)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawFlameIcon=void 0,t.drawFlameIcon=function(e,t,a,n,o,i,s){void 0===i&&(i=1),void 0===s&&(s=1);var u=5*i,l=30*u,A=30*u,c=e,d=t;switch(s){case 1:c=e-.5*l,d=t-.5*A;break;case 0:c=e,d=t}for(var p=1;p<5;p++){var f=c,h=d+.5*A,v=c+.97*l,g=d+.4*A+A*p*.05;(0,r.line2Poly)(f,h,v,g,a,.5*u)}(0,r.blockCirclePoly)(33,.4*A,c+.55*l,d+.5*A,5.4,o,0,0,0,u,!1,1,7,1,7),(0,r.blockCirclePoly)(33,.4*A,c+.5*l,d+.5*A,5.3,n,0,0,0,u,!1,2,6,2,6),(0,r.blockCirclePoly)(33,.4*A,c+.6*l,d+.5*A,5.7,n,0,0,0,u,!1,2,6,2,6),(0,r.blockCirclePoly)(33,.4*A,c+l,d+.5*A,3,n,0,0,0,u,!1,2,6,2,6),(0,r.blockCirclePoly)(33,.4*A,c+l,d+.5*A,1.5,a,0,0,0,u,!1,2,6,2,6),(0,r.blockCirclePoly)(33,.3*A,c+l,d+.5*A,3,o,0,0,0,u,!1,2,6,2,6),(0,r.blockCirclePoly)(33,.3*A,c+l,d+.5*A,1.5,o,0,0,0,u,!1,2,6,2,6)}}.apply(t,a),void 0===n||(e.exports=n)},9914:(e,t,r)=>{var a,n;a=[r,t,r(7561)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawLazerIcon=void 0,t.drawLazerIcon=function(e,t,a,n,o,i,s){void 0===i&&(i=1),void 0===s&&(s=1);var u=5*i,l=30*u,A=30*u,c=e,d=t;switch(s){case 1:c=e-.5*l,d=t-.5*A;break;case 0:c=e,d=t}(0,r.line2Poly)(c+.02*l,d+.5*A,c+.8*l,d+.5*A,a,1*u),(0,r.line2Poly)(c+.8*l,d+.2*A,c+.8*l,d+.8*A,a,3*u),(0,r.line2Poly)(c+.8*l,d+.5*A,c+.4*l,d+.2*l,a,u),(0,r.line2Poly)(c+.8*l,d+.5*A,c+.5*l,d+.15*l,o,.5*u),(0,r.line2Poly)(c+.8*l,d+.5*A,c+.5*l,d+.35*l,a,.5*u),(0,r.line2Poly)(c+.8*l,d+.5*A,c+.4*l,d+.8*l,a,u),(0,r.line2Poly)(c+.8*l,d+.5*A,c+.5*l,d+.85*l,a,.5*u),(0,r.line2Poly)(c+.8*l,d+.5*A,c+.5*l,d+.65*l,o,.5*u)}}.apply(t,a),void 0===n||(e.exports=n)},4943:(e,t,r)=>{var a,n;a=[r,t,r(7561)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawRocketIcon=void 0;var a=[0,1,2,6,10,11];t.drawRocketIcon=function(e,t,r,a,o,i,s){void 0===a&&(a=1),void 0===o&&(o=!1),void 0===i&&(i=!1),void 0===s&&(s=1);var u=2*a;i?(n(e-3*u,t-12*u*2,r,.6*u,o,s),n(e+60*u*.3,t,r,.6*u,o,s),n(e-3*u,t+12*u*2,r,.6*u,o,s)):n(e,t,r,u,o,s)};var n=function(e,t,n,o,i,s){void 0===o&&(o=1),void 0===i&&(i=!1),void 0===s&&(s=1);var u=Math.max(2,2.2*o),l=60*o,A=12*o,c=.5*o,d=5*o,p=1*o,f=e,h=t;switch(s){case 1:f=e-1.2*l*.5,h=t-A;break;case 0:f=e,h=t}(0,r.line2Poly)(f,h+d,f+l,h+d,n,u),i&&((0,r.line2Poly)(f+p,h+d+.5*A,f+p+4*d,h+d+.5*A,n,u),(0,r.line2Poly)(f+p,h+d,f+p,h,n,u),(0,r.line2Poly)(f+p+4*d,h+d,f+p,h,n,u),(0,r.line2Poly)(f+p,h+d+A,f+p,h+2*d+A,n,u),(0,r.line2Poly)(f+p+4*d,h+d+A,f+p,h+2*d+A,n,u)),(0,r.line2Poly)(f,h+d,f,h+d+A,n,u),(0,r.line2Poly)(f,h+d+A,f+l,h+d+A,n,u);for(var v=0;v<a.length-1;v++)(0,r.line2Poly)(f+l+3*v*o,h+d+A+a[v]*-c,f+l+3*(v+1)*o,h+d+A+a[v+1]*-c,n,u);for(v=0;v<a.length-1;v++)(0,r.line2Poly)(f+l+3*v*o,h+d+a[v]*c,f+l+3*(v+1)*o,h+d+a[v+1]*c,n,u)}}.apply(t,a),void 0===n||(e.exports=n)},6088:(e,t,r)=>{var a,n;a=[r,t,r(9262),r(5559)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawTurretIcon=void 0,(0,r.vec_pool_pop)(0,0),(0,r.vec_pool_pop)(0,0),Math.PI,Math.PI,Math.PI,Math.PI,Math.PI,Math.PI,Math.PI,Math.PI,Math.PI,t.drawTurretIcon=function(e,t,r,n,o){void 0===n&&(n=1),void 0===o&&(o=1);var i=e,s=t,u=5*n;switch(o){case 1:i=e,s=t;break;case 0:i=e+12*u,s=t+12*u}(0,a.drawTurret)(7*u,0,i,s,r,0,0,u)}}.apply(t,a),void 0===n||(e.exports=n)},9879:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t});a=[r,t,r(9262),r(1706),r(7561)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawSparks=void 0,a=u(a),t.drawSparks=function(e){var t=[],r=e.game,o=e.SX,i=e.SY,s=e.gl,u=r.sparks,l=u.length;if(l>0){for(var A=0;A<l;A++){var c=u[A];t.push(c.pos.x-o,c.pos.y-i,c.pos.x+c.vel.x-o,c.pos.y+c.vel.y-i)}(0,a.default)(a.GLctx.Vertices,s),(0,n.drawColor)(t,s,.4,.4,1,1,s.LINES)}},t.default=function(e,t,a,n){if(Math.random()>.8)for(var o=Math.ceil(a*Math.random()+1),i=0;i<o;i++){var s=new r.Vector(0,-5),u=Math.random();Math.random()>.9?s.setAngle((u-.5)*Math.PI*.7+.5*Math.PI):s.setAngle((u-.5)*Math.PI*.7-.5*Math.PI),s.mult(.5+Math.random());var l=new r.Vector(t.x,t.y),A={life:50+Math.random()*n,vel:s,pos:l};e.game.sparks.push(A)}}}.apply(t,a),void 0===n||(e.exports=n)},9102:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(9262),r(7561),r(1706),r(1706),r(2114)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionalGlow=void 0,n=o(n);var u=[];t.DirectionalGlow=function(e,t,o,l,A,c,d,p,f){u=[];var h=A.game,v=A.gl,g=A.SH,y=A.SW,m=A.SX,_=A.SY,x=(y>g?g*t:y*t)*(h.resW/y);if((0,s.onStage)(A,e.x,e.y,x)){u=[];var S=e.x-m,T=e.y-_,E=new r.Vector(e.x+Math.cos(o-.5*l)*x,e.y+Math.sin(o-.5*l)*x),M=new r.Vector(e.x+Math.cos(o+.5*l)*x,e.y+Math.sin(o+.5*l)*x);if((u=[S,T,E.x-m,E.y-_,M.x-m,M.y-_]).length>0){(0,n.default)(i.GLctx.VerticesGradient,v);var b=(0,i.GLUniformLocation)(v,"u_pos_x"),I=(0,i.GLUniformLocation)(v,"u_pos_y"),L=(0,i.GLUniformLocation)(v,"u_perimiter");v.uniform1f(b,S),v.uniform1f(I,T),v.uniform1f(L,x),(0,a.drawColor)(u,v,c,d,p,f)}}}}.apply(t,a),void 0===n||(e.exports=n)},1867:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(2114),r(7561)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Flare=void 0,a=o(a);var u=[],l=[],A=function(e,t,r,a,n){var o=.1*Math.random()+.95;e.push(t-a*n*o,r,t,r+.01*n*a,t,r+-.01*n*a,t+a*n*o,r,t,r+.01*n*a,t,r+-.01*n*a)};t.Flare=function(e,t,o){var c=o.game,d=o.gl,p=o.SH,f=o.SW,h=o.SX,v=o.SY,g=(f>p?p*t:f*t)*(c.resW/f);if((0,i.onStage)(o,e.x,e.y,.1*g)){u=[];var y=e.x-h,m=e.y-v;if(A(u,y,m,g,1),(0,r.addToColorMap)(l,u,.1,.1,.2,.1),A(u,y,m,g,.8),(0,r.addToColorMap)(l,u,.2,.2,.3,.2),A(u,y,m,g,.4),(0,r.addToColorMap)(l,u,.4,.4,.5,.4),A(u,y,m,g,.1),(0,r.addToColorMap)(l,u,.6,.6,.9,.6),A(u,y,m,g,.05),(0,r.addToColorMap)(l,u,.9,.9,1,1),u.length>0){var _=(0,a.default)(n.GLctx.Vertices,d);(0,s.drawColorMap)(l,u,_,d)}}}}.apply(t,a),void 0===n||(e.exports=n)},998:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(2114)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlowCustomLayout=t.Glow=void 0,a=o(a),t.Glow=function(e,t,o,s,u,l,A,c){var d=s.game,p=s.gl,f=(s.SH,s.SW),h=s.SX,v=s.SY,g=d.resW/f,y=t>4?t:1e3*t*g;if((0,i.onStage)(s,e.x,e.y,y)){o=[];var m=e.x-h,_=e.y-v;if((0,r.fillPolyForFan)(f,m,_,y,y,o,-.5*y,-.5*y),o.length>0){(0,a.default)(n.GLctx.VerticesGradient,p);var x=(0,n.GLUniformLocation)(p,"u_pos_x"),S=(0,n.GLUniformLocation)(p,"u_pos_y");p.uniform1f(x,m),p.uniform1f(S,_);var T=(0,n.GLUniformLocation)(p,"u_perimiter");p.uniform1f(T,y),(0,r.drawColor)(o,p,u,l,A,c)}}},t.GlowCustomLayout=function(e,t,o,s,u,l,A,c,d){void 0===d&&(d=s.gl.TRIANGLES);var p=s.game,f=s.gl,h=(s.SH,s.SW),v=s.SX,g=s.SY,y=p.resW/h,m=t>4?t:1e3*t*y;if((0,i.onStage)(s,e.x,e.y,m)){var _=e.x-v,x=e.y-g;(0,a.default)(n.GLctx.VerticesGradient,f);var S=(0,n.GLUniformLocation)(f,"u_pos_x"),T=(0,n.GLUniformLocation)(f,"u_pos_y");f.uniform1f(S,_),f.uniform1f(T,x);var E=(0,n.GLUniformLocation)(f,"u_perimiter");f.uniform1f(E,m),(0,r.drawColor)(o,f,u,l,A,c,d)}}}.apply(t,a),void 0===n||(e.exports=n)},6599:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t});a=[r,t,r(9262),r(1706),r(1706),r(2114),r(8617),r(7561),r(484),r(3872),r(8322)],n=function(e,t,r,a,n,o,i,s,l,A,c){"use strict";var d;Object.defineProperty(t,"__esModule",{value:!0}),t.RayCaster=void 0,a=u(a);var p=new l.Rectangle(0,0,0,0),f=[],h=(0,l.rect_pool_pop)(0,0,0,0);t.RayCaster=function(e,t,u,l,v,g,y,m,_,x,S,T,E){var M=u.game,b=u.gl,I=u.SH,L=u.SW,P=u.SX,w=u.SY;h.update(0,0,L,I),M.screen.rect;var R=M.resW/L,O=t>4?t:1e3*t*R;if((0,o.onStage)(u,e.x,e.y,O)){x||(p.x=e.x-.5*O,p.y=e.y-.5*O,p.width=O,p.height=O,x=p),S||(S=x),d=[],f.length=0,(0,A.RCGL_POLYS)(x,e,O,d,u),(0,c.RAGL_POLYS)(x,e,O,u,l,v,g,y,E);var C=e.x-P,D=e.y-w,G=x,N=G.x-P,B=G.x-P+G.width,F=G.y-w,V=G.y-w+G.height,k=[{a:{x:N,y:F},b:{x:B,y:F}},{a:{x:B,y:F},b:{x:B,y:V}},{a:{x:B,y:V},b:{x:N,y:V}},{a:{x:N,y:V},b:{x:N,y:F}}];if(void 0!==m&&void 0!==_){var X=new r.Vector(e.x+Math.cos(m-.5*_)*O,e.y+Math.sin(m-.5*_)*O),H=new r.Vector(e.x+Math.cos(m+.5*_)*O,e.y+Math.sin(m+.5*_)*O),U=new r.Vector(2*Math.cos(m),2*Math.sin(m)),Y={a:{x:C-U.x,y:D-U.y},b:{x:X.x-P,y:X.y-w}},W={a:{x:C-U.x,y:D-U.y},b:{x:H.x-P,y:H.y-w}};if(!(h.intersectsPoint(Y.a)||h.intersectsPoint(Y.b)||h.intersectsPoint(W.a)||h.intersectsPoint(W.b)))return;k.push(Y,W),f.push(C-U.x,D-U.y,X.x-P,X.y-w,C-U.x,D-U.y,H.x-P,H.y-w)}k.push.apply(k,(0,i.polysToPair)(d));var j=(0,i.getSightPolygon)(e.x-P,e.y-w,k);d=[],d=[e.x-P,e.y-w];var q=(0,i.pairToPolys)(j);if(d.push.apply(d,q),q.length>1&&d.push(q[0],q[1]),d.length>0){(0,a.default)(n.GLctx.VerticesGradient,b);var z=(0,a.GLUniformLocation)(b,"u_pos_x"),K=(0,a.GLUniformLocation)(b,"u_pos_y"),Z=(0,a.GLUniformLocation)(b,"u_perimiter");b.uniform1f(z,C),b.uniform1f(K,D),b.uniform1f(Z,O),(0,s.drawColor)(d,b,l,v,g,y,b.TRIANGLE_FAN),T&&((0,a.default)(n.GLctx.Vertices,b),(0,s.drawColor)(d,b,1,0,0,1,b.LINE_STRIP),(0,s.drawColor)(f,b,1,1,1,1,b.LINE_STRIP),d.length=0,(0,s.drawRectPoly)(x,P,w,d,2),(0,s.drawColor)(d,b,1,1,0,1))}}}}.apply(t,a),void 0===n||(e.exports=n)},839:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t});a=[r,t,r(3872),r(484),r(2104),r(8617),r(8617),r(1706),r(1638),r(7561)],n=function(e,t,r,a,n,o,i,s,l,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RayCasterLinear=void 0,s=u(s);var c=(0,a.rect_pool_pop)(0,0,0,0),d=function(e,t){for(var r=[t.x-5e3,t.y,t.x+t.width+1e4,t.y,t.x-5e3,t.y+t.height,t.x+t.width+1e4,t.y+t.height],a=[],n=r.length,o=0;o<n;o+=4){var i=r[o],s=r[o+1],u=r[o+2],A=r[o+3],c=(0,l.LineIntersectsToPoint)(e.a.x,e.a.y,e.b.x,e.b.y,i,s,u,A);c&&a.push(c)}if(2===a.length)return e.a=a[0],e.b=a[1],e;if(1===a.length){var d=t.intersectsPointVertical(e.a),p=t.intersectsPointVertical(e.b);return d?e.b=a[0]:p&&(e.a=a[0]),e}return null};t.RayCasterLinear=function(e,t,a,u,l,p,f,h,v){var g=u.SW,y=u.SH,m=u.SX,_=u.SY,x=u.gl,S=v?-2e3:g+2e3,T=[];(0,r.RCGL_POLYS)(a,e,t,T,u);var E=(0,n.polysToPair)(T),M=[];c.x=a.x-m,c.y=a.y-_,c.width=a.width,c.height=a.height;for(var b=0;b<E.length;b++){var I=E[b],L=c.intersectsPoint(I.a),P=c.intersectsPoint(I.b);if(L&&P)M.push(I);else{var w=d(I,c);w&&M.push(w)}}v?M.push({a:{x:a.x+a.width-m,y:a.y-_},b:{x:a.x+a.width-m,y:a.y+a.height-_}}):M.push({a:{x:a.x-m,y:a.y-_},b:{x:a.x-m,y:a.y+a.height-_}});for(var R=0;R<M.length;R++){var O=M[R];if(!O||!O.a||!O.b)throw console.log("pairsto kepp",M),"ERRRRRR"}for(var C=(0,i.getUnigquePointsFromPairs)(M),D=[],G=0;G<C.length;G++){var N=C[G],B={a:{x:S,y:N.y},b:{x:N.x,y:N.y-1}},F={a:{x:S,y:N.y},b:{x:N.x,y:N.y+1}};D.push(B,F)}for(var V=[],k=0;k<D.length;k++){for(var X=D[k],H=null,U=M.length,Y=0;Y<U;Y++){var W=(0,o.getPairIntersection)(X,M[Y]);W&&(!H||W.param<H.param)&&(H=W)}H&&V.push(H)}V.sort((function(e,t){return e.y-t.y}));for(var j=[],q=V.length-1,z=0;z<q;z++){var K=V[z],Z=V[z+1],Q=S,J=1|K.y,$=K.x,ee=1|K.y,te=S,re=0|Z.y,ae=S,ne=0|Z.y,oe=K.x,ie=1|K.y,se=Z.x,ue=0|Z.y;j.push(Q,J,$,ee,te,re,ae,ne,oe,ie,se,ue)}if(j.length>0){(0,s.default)(s.GLctx.VerticesGradient,x);var le=(0,s.GLUniformLocation)(x,"u_pos_x"),Ae=(0,s.GLUniformLocation)(x,"u_pos_y"),ce=(0,s.GLUniformLocation)(x,"u_perimiter");x.uniform1f(le,v?-300:g+300),x.uniform1f(Ae,.5*y),x.uniform1f(ce,2.3*g),(0,A.drawColor)(j,x,l,p,f,h,x.TRIANGLES)}}}.apply(t,a),void 0===n||(e.exports=n)},5318:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t});a=[r,t,r(9262),r(1706),r(1706),r(7561),r(2093),r(7561),r(1330),r(1638),r(2261),r(4077),r(7185)],n=function(e,t,r,a,n,o,i,s,l,A,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RayCasterLOS=void 0,a=u(a);var f=[],h=[],v=new r.Vector(0,0),g=new r.Vector(0,0),y=new r.Vector(0,0),m=new r.Vector(0,0),_=new r.Vector(0,0),x=new r.Vector(0,0),S=new r.Vector(0,0),T=new r.Vector(0,0),E=new r.Vector(0,0),M=new r.Vector(0,0),b=new r.Vector(0,0),I=new r.Vector(0,0),L=new r.Vector(0,0),P=new r.Vector(0,0),w=new r.Vector(0,0);new r.Vector(0,0),t.RayCasterLOS=function(e,t,r,u){var d=r.gl,R=r.SH,O=r.SW,C=r.SX,D=r.SY,G=(r.game,O>R?O:R);f=[],h=[];var N=(0,i.getQuadTreesObj)();if(N.All){for(var B=G,F=N.queryTreesVec([22],e,B,B),V=0;V<F.length;V++){var k=F[V],X=k.pos,H=Math.atan2(e.y-k.pos.y,e.x-k.pos.x);if(_.set(.8*k.radius,0),_.setAngle((0,c.normalizeRadianPositive)(H)),v.set(k.radius,0),v.setAngle((0,c.normalizeRadianPositive)(H)+.5*Math.PI),y.set(k.radius,0),y.setAngle((0,c.normalizeRadianPositive)(H)-.5*Math.PI),(0,l.ShipLike)(k.type)){var U=k.comp[0].vertex,Y=[];v.setLength(2*k.radius),y.setLength(2*k.radius);for(var W=0;W<3;W++){S.set(U[W].x-e.x,U[W].y-e.y),S.mult(2e6),S.add(e);var j=(0,A.LineIntersectsToPoint)(v.x+k.pos.x-C,v.y+k.pos.y-D,y.x+k.pos.x-C,y.y+k.pos.y-D,e.x-C,e.y-D,S.x-C,S.y-D);(0,o.line2Poly)(v.x+k.pos.x-C,v.y+k.pos.y-D,y.x+k.pos.x-C,y.y+k.pos.y-D,h,2),(0,o.line2Poly)(e.x-C,e.y-D,S.x-C,S.y-D,h,2),j&&Y.push(j)}if(3===Y.length){for(var q=[0,1,0,2,1,2],z=-1,K=-1,Z=-1,Q=0;Q<q.length;Q+=2){var J=(0,p.distanceBetweenVectors)(Y[q[Q]],Y[q[Q+1]]);J>z&&(z=J,K=q[Q],Z=q[Q+1])}var $=[Y[K],Y[Z]];(0,p.distanceBetweenVectors)(v,$[0])<(0,p.distanceBetweenVectors)(v,$[1])?(v.setFromVec($[0]),y.setFromVec($[1])):(v.setFromVec($[1]),y.setFromVec($[0])),v.subtract(X),v.addXY(C,D),y.subtract(X),y.addXY(C,D)}}if(22===k.type){var ee=k,te=[];(0,s.createBlockCirclePolySingleWall)(0,0,te,ee.sides,ee.angle,ee.radius),v.setLength(2*k.radius),y.setLength(2*k.radius),Y=[];for(var re=0;re<te.length&&(!(j=(0,A.LineIntersectsToPoint)(v.x,v.y,y.x,y.y,te[re],te[re+1],te[re+2],te[re+3]))||(Y.push(j),2!==Y.length));re+=4);2===Y.length&&((0,p.distBetweenVectorsRelative)(v,Y[0])<(0,p.distBetweenVectorsRelative)(v,Y[1])?(v.setFromVec(Y[0]),y.setFromVec(Y[1])):(v.setFromVec(Y[1]),y.setFromVec(Y[0])))}v.mult(1.2),y.mult(1.2);var ae=X.x+v.x-C,ne=X.y+v.y-D,oe=X.x+y.x-C,ie=X.y+y.y-D,se=Math.atan2(e.y-ne-D,e.x-ae-C)+Math.PI,ue=Math.atan2(e.y-ie-D,e.x-oe-C)+Math.PI;g.set(5e3,0),g.setAngle((0,c.normalizeRadianPositive)(se)),m.set(5e3,0),m.setAngle((0,c.normalizeRadianPositive)(ue)),x.setFromVec(_),x.mult(.1),L.set(X.x+v.x-C,X.y+v.y-D),I.set(X.x+y.x-C,X.y+y.y-D),P.set(X.x+g.x-C,X.y+g.y-D),w.set(X.x+m.x-C,X.y+m.y-D),T.setFromVec(I);var le=Math.atan2(I.y-w.y,I.x-w.x);E.set(Math.min(.4*k.radius,50),0),E.setAngle((0,c.normalizeRadianPositive)(le)+.5*Math.PI),E.add(T),M.setFromVec(L);var Ae=Math.atan2(L.y-P.y,L.x-P.x);b.set(Math.min(.4*k.radius,50),0),b.setAngle((0,c.normalizeRadianPositive)(Ae)-.5*Math.PI),b.add(M);var ce={lightPosX:k.pos.x-_.x-C,lightPosY:k.pos.y-_.y-D,radius:k.radius,itemPosX:k.pos.x-x.x-C,itemPosY:k.pos.y-x.y-D,edgeA_from:T.toPoint(),edgeA_to:E.toPoint(),edgeB_from:M.toPoint(),edgeB_to:b.toPoint(),edgeC_from:{x:k.pos.x-_.x-C,y:k.pos.y-_.y-D},edgeC_to:{x:k.pos.x-x.x-C,y:k.pos.y-x.y-D},polys:[X.x+v.x-C,X.y+v.y-D,X.x+y.x-C,X.y+y.y-D,X.x+g.x-C,X.y+g.y-D,X.x+m.x-C,X.y+m.y-D]};f.push(ce)}(0,a.default)(n.GLctx.EdgeGradient,d),d.blendFunc(d.DST_COLOR,d.ZERO);var de=f.length;for(V=0;V<de;V++){ce=f[V];var pe=(0,a.GLUniformLocation)(d,"toA"),fe=(0,a.GLUniformLocation)(d,"fromA"),he=(0,a.GLUniformLocation)(d,"toB"),ve=(0,a.GLUniformLocation)(d,"fromB"),ge=(0,a.GLUniformLocation)(d,"toC"),ye=(0,a.GLUniformLocation)(d,"fromC");d.uniform2f(pe,ce.edgeA_from.x,ce.edgeA_from.y),d.uniform2f(fe,ce.edgeA_to.x,ce.edgeA_to.y),d.uniform2f(he,ce.edgeB_from.x,ce.edgeB_from.y),d.uniform2f(ve,ce.edgeB_to.x,ce.edgeB_to.y),d.uniform2f(ye,ce.edgeC_from.x,ce.edgeC_from.y),d.uniform2f(ge,ce.edgeC_to.x,ce.edgeC_to.y);var me=1*r.game.daylight.darkness_multip;(0,o.drawColor)(ce.polys,d,me,me,me,1,d.TRIANGLE_STRIP)}return d.blendFunc(d.ONE,d.ONE),"los shadows"}}}.apply(t,a),void 0===n||(e.exports=n)},8617:(e,t,r)=>{var a,n;a=[r,t,r(1128)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSightPolygon=t.getUniqueAngles=t.getUnigquePointsFromPairs=t.getPairIntersection=t.pairToPolys=t.polysToPair=t.getRayCasterTimings=void 0,t.getRayCasterTimings=function(e){var t=[];return t.push(a.angles*e),t.push(a.angles2*e),function(){for(var e in a)a[e]=0}(),t};var a={total:0,polysToPair:0,pairToPolys:0,interSectionNew:0,interSection:0,raycasting:0,setup:0,filtering:0,uniqe:0,uniqe2:0,angles:0,angles2:0,sorting:0};t.polysToPair=function(e){for(var t=e.length,r=[],a=0;a<t;a+=4)r.push({a:{x:e[a],y:e[a+1]},b:{x:e[a+2],y:e[a+3]}});return r},t.pairToPolys=function(e){for(var t=e.length,r=[],a=0;a<t;a++){var n=e[a];r.push(n.x,n.y)}return r},t.getPairIntersection=function(e,t){var a=e.a.x,n=e.a.y,o=e.b.x-e.a.x,i=e.b.y-e.a.y,s=t.a.x,u=t.a.y,l=t.b.x-t.a.x,A=t.b.y-t.a.y,c=(0,r.OperatorApproxDist97)(o,i),d=(0,r.OperatorApproxDist97)(l,A);if(o/c==l/d&&i/c==A/d)return null;var p=(o*(u-n)+i*(a-s))/(l*i-A*o);if(p<0||p>1)return null;var f=(s+l*p-a)/o;return f<0?null:{x:a+o*f,y:n+i*f,param:f,guid:t.guid}},t.getUnigquePointsFromPairs=function(e){for(var t=performance.now(),r=[],n={},o=e.length,i=0;i<o;i++){var s=e[i],u=s.a.x/s.a.y;n[u]||(r.push(s.a),n[u]=!0);var l=s.b.x/s.b.y;n[l]||(r.push(s.b),n[l]=!0)}return a.uniqe+=performance.now()-t,r},t.getUniqueAngles=function(e,t,r){for(var n=performance.now(),o=[],i=e.length,s=0;s<i;s++){var u=e[s],l=Math.atan2(u.y-r,u.x-t);u.angle=l,o.push(l-1e-5,l+1e-5)}return a.angles+=performance.now()-n,o},t.getSightPolygon=function(e,r,n){var o=(0,t.getUnigquePointsFromPairs)(n),i=performance.now(),s=(0,t.getUniqueAngles)(o,e,r);i=performance.now();for(var u=[],l=s.length,A=0;A<l;A++){var c=s[A],d={a:{x:e,y:r},b:{x:e+Math.cos(c),y:r+Math.sin(c)},angle:c};u.push(d)}for(var p=[],f=1.01*r,h=.99*r,v=1.01*e,g=.99*e,y=[],m=[],_=[],x=[],S=performance.now(),T=0;T<n.length;T++){var E=n[T],M=E.a.y>f,b=E.b.y>f,I=E.a.y<h,L=E.b.y<h,P=E.a.x>v,w=E.b.x>v,R=E.a.x<g,O=E.b.x<g;M&&b&&R&&O?_.push(E):M&&b&&P&&w?x.push(E):I&&L&&R&&O?y.push(E):I&&L&&P&&w?m.push(E):M&&b?(_.push(E),x.push(E)):I&&L?(y.push(E),m.push(E)):P&&w?(x.push(E),m.push(E)):R&&O?(_.push(E),y.push(E)):(_.push(E),x.push(E),y.push(E),m.push(E))}a.sorting+=performance.now()-S;var C=[];for(A=0;A<l;A++){var D=null,G=(C=(c=(d=u[A]).angle)<-.5*Math.PI?y:c<0?m:c<.5*Math.PI?x:_).length;for(T=0;T<G;T++){var N=(0,t.getPairIntersection)(d,C[T]);N&&(!D||N.param<D.param)&&(D=N)}D&&(D.angle=c,p.push(D))}a.interSectionNew+=performance.now()-i,i=performance.now();for(var B=[],F=0;F<p.length;F++){for(var V=p[F],k=!0,X=F;X<p.length;X++){var H=p[X];if(F!=X&&Math.abs(V.x-H.x)<2&&Math.abs(V.y-H.y)<2){k=!1;break}}k&&B.push(V)}return p=B,a.filtering+=performance.now()-i,p.sort((function(e,t){return e.angle-t.angle}))}}.apply(t,a),void 0===n||(e.exports=n)},8322:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t});a=[r,t,r(7185),r(7561),r(2093),r(484),r(9262),r(8617),r(1706),r(998),r(2261),r(2144)],n=function(e,t,r,a,n,o,i,s,l,A,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RAGL_LIGHTS_FLUSH=t.RAGL_POLYS_LOS_FLUSH=t.RAGL_POLYS_FLUSH=t.RAGL_POLYS=t.ignoreRayAbsorberShape=void 0,l=u(l);var p=new i.Vector(0,0),f=new i.Vector(0,0),h=new i.Vector(0,0),v={},g={},y=[],m=[],_=function(e,t,a,n,o,i){var s=e.pos,u=e.radius,l=t.posx,A=t.posy,d=Math.atan2(s.y-A,s.x-l),v=t.radius,y=(0,r.distanceBetweenXYXY)(s.x,s.y,l,A)-e.radius;p.setLength(u),p.setAngle(d-.5*Math.PI),f.setLength(u),f.setAngle(d+.5*Math.PI),a.push(p.x+s.x-o,p.y+s.y-i,f.x+s.x-o,f.y+s.y-i);var m={a:{x:p.x+s.x-o,y:p.y+s.y-i},b:{x:f.x+s.x-o,y:f.y+s.y-i},guid:e.guid};n.push(m);var _=.8*v/(y||1),x=Math.min(2*e.radius,v),S=Math.max(2*e.radius,v);(0,c.map)(_,0,1,x,S),h.setLength(Math.max(y-e.radius,e.radius)),h.setAngle(d-Math.PI);var T=.5*v,E=Math.min(1,(y||1)/(T||1)),M=1-E,b=Math.min(2*e.radius,Math.max(.5*e.radius,v*E*1.2));Math.max(e.radius,b*(1.2*E)),h.setLength(e.radius+.5*b*E),h.setAngle(d-Math.PI),function(e,t){var r=g[e.guid];r?r.lights.push(t):r=g[e.guid]={item:e,lights:[t]}}(e,{r:Math.min(t.r*M*2,1),g:Math.min(t.g*M*2,1),b:Math.min(t.b*M*2,1),a:t.a,radius:b,posx:s.x+h.x,posy:s.y+h.y,originalX:l,originalY:A})};t.ignoreRayAbsorberShape=function(e,t){return(0,r.distanceBetweenXYXY)(e.pos.x,e.pos.y,t.x,t.y)<=.95*e.radius};var x=(0,o.rect_pool_pop)(0,0,0,0);t.RAGL_POLYS=function(e,r,a,o,i,u,l,A,c){var d=o.game,p=o.SX,f=o.SY,h=(o.SW,o.SH,(0,n.getQuadTreesObj)());if(h.All){x.update(e.x,e.y,e.width,e.height),c?(x.updateFromRect(d.screen.rectSS_400),a=x.height-400):(x.add(310),a+=300);for(var g=[],S=[],T=(r.x,r.y,h.queryTreesRect([4,11,22,23],x)),E=0;E<T.length;E++){var M=T[E];11!==M.type&&(0,t.ignoreRayAbsorberShape)(M,r)||_(M,{posx:r.x,posy:r.y,r:i,g:u,b:l,a:A,radius:a},g,S,p,f)}var b=x.x-p,I=x.x-p+x.width,L=x.y-f,P=x.y-f+x.height,w=[{a:{x:b,y:L},b:{x:I,y:L}},{a:{x:I,y:L},b:{x:I,y:P}},{a:{x:I,y:P},b:{x:b,y:P}},{a:{x:b,y:P},b:{x:b,y:L}}];w.push.apply(w,S);for(var R=(0,s.getSightPolygon)(r.x-p,r.y-f,w),O=v[r.x+"_"+r.y]={},C=0;C<R.length;C++)O[R[C].guid]=!0;var D=[r.x-p,r.y-f],G=(0,s.pairToPolys)(R);D.push.apply(D,G),D.push(G[0],G[1]),y.push(D),c&&(m.length=0,m.push.apply(m,D))}},t.RAGL_POLYS_FLUSH=function(e,t,r,n,o,i,s,u){if(void 0===t&&(t=!1),void 0===r&&(r=!1),void 0===n&&(n=1),void 0===o&&(o=1),void 0===i&&(i=1),void 0===s&&(s=1),void 0===u&&(u=e.gl.TRIANGLE_FAN),!t){var A=e.gl;(0,l.default)(l.GLctx.Vertices,A),A.disable(A.BLEND);for(var c=0;c<y.length;c++){var d=y[c];(0,a.drawColor)(d,A,n,o,i,s,u)}return A.enable(A.BLEND),r||(y.length=0),"RAGL_POLYS_FLUSH"}y.length=0},t.RAGL_POLYS_LOS_FLUSH=function(e,t,r,n,o,i){void 0===t&&(t=1),void 0===r&&(r=1),void 0===n&&(n=1),void 0===o&&(o=1),void 0===i&&(i=e.gl.TRIANGLE_FAN);var s=e.gl;return(0,l.default)(l.GLctx.Vertices,s),s.disable(s.BLEND),(0,a.drawColor)(m,s,t,r,n,o,i),s.enable(s.BLEND),"RAGL_POLYS_LOS_FLUSH"},t.RAGL_LIGHTS_FLUSH=function(e){e.gl;for(var t=e.game,r=e.SX,i=e.SY,s=(e.SW,e.SH),u=(0,n.getQuadTreesObj)().queryTreesRect([4,22],t.screen.rect),l=(new o.Rectangle(0,0,0,0),u.length),c=0;c<l;c++){var p=u[c];if(M=g[p.guid]){var f=[];(0,a.blockCirclePoly)(p.sides,p.radius,p.pos.x,p.pos.y,p.angle,f,s,r,i,Math.max(4,.1*p.radius));for(var h=(b=M.lights).length,y=0;y<h;y++){var m=b[y];v[m.originalX+"_"+m.originalY][p.guid]&&(0,A.GlowCustomLayout)({x:m.posx,y:m.posy},m.radius,f,e,m.r*p.specular,m.g*p.specular,m.b*p.specular,m.a)}}}var _=[],x=[],S=[],T=[],E=(0,n.getQuadTreesObj)().queryTreesRect([11],t.screen.rect);for(l=E.length,c=0;c<l;c++){var M,b,I=E[c];if(M=g[I.guid])for(_.length=0,x.length=0,S.length=0,T.length=0,(0,a.blockCirclePoly)(I.sides,I.radius,I.pos.x,I.pos.y,I.angle,_,s,r,i,I.radius),(0,d.drawRockformationCrystals)(I,r,i,I.radius,.46,S,x,T),h=(b=M.lights).length,y=0;y<h;y++)m=b[y],v[m.originalX+"_"+m.originalY][I.guid]&&((0,A.GlowCustomLayout)({x:m.posx,y:m.posy},m.radius,_,e,m.r*I.specular*.2,m.g*I.specular*.2,m.b*I.specular,m.a),(0,A.GlowCustomLayout)({x:m.posx,y:m.posy},m.radius,T,e,m.r*I.specular*2,m.g*I.specular*2,m.b*I.specular*2,m.a),(0,A.GlowCustomLayout)({x:m.posx,y:m.posy},m.radius,x,e,m.r*I.specular*.1,m.g*I.specular*.1,m.b*I.specular,m.a),(0,A.GlowCustomLayout)({x:m.posx,y:m.posy},m.radius,S,e,m.r*I.specular*.2,m.g*I.specular*.2,m.b*I.specular*.2,m.a))}return g={},v={},"RAGL_LIGHTS_FLUSH"}}.apply(t,a),void 0===n||(e.exports=n)},3872:(e,t,r)=>{var a,n;a=[r,t,r(7185),r(7899),r(7561),r(1128),r(2093),r(8379),r(9262)],n=function(e,t,r,a,n,o,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RCGL_POLYS=t.ignoreRayCasterShape=t.drawShipTriangleForRayCaster=t.blockCirclePolyForRayCaster2=void 0,new u.Vector(0,0),new u.Vector(0,0),new u.Vector(0,0),t.blockCirclePolyForRayCaster2=function(e,t,r,n,i,s,u,l,A,c,d){for(var p=e=t<10?3:e,f=r+Math.cos(a.doublePI*(p/e)+i)*t|0,h=n+Math.sin(a.doublePI*(p/e)+i)*t|0,v=[],g=[];p>-1;--p){var y=r+Math.cos(a.doublePI*(p/e)+i)*t|0,m=n+Math.sin(a.doublePI*(p/e)+i)*t|0;v.push(f-l,h-A,y-l,m-A),g.push({ax:f-l,ay:h-A,bx:y-l,by:m-A}),f=y,h=m}for(var _=g.length,x=0;x<_;x++){var S=g[x],T=(R=S.ax)-c,E=(O=S.ay)-d,M=(C=S.bx)-c,b=(D=S.by)-d,I=(0,o.OperatorApproxDist97)(T,E)+(0,o.OperatorApproxDist97)(M,b);g[x].dist=I}var L=g.sort((function(e,t){return e.dist-t.dist})),P=Math.ceil(.5*e)+1;for(x=0;x<P;x++){var w=L[x],R=w.ax,O=w.ay,C=w.bx,D=w.by;s.push(R,O,C,D)}},t.drawShipTriangleForRayCaster=function(e,t,r,a,n,o){t.x,t.y,o.push(e[0].x-a,e[0].y-n,e[1].x-a,e[1].y-n),o.push(e[0].x-a,e[0].y-n,e[2].x-a,e[2].y-n),o.push(e[1].x-a,e[1].y-n,e[2].x-a,e[2].y-n)},t.ignoreRayCasterShape=function(e,t){return(0,r.distanceBetweenXYXY)(e.pos.x,e.pos.y,t.x,t.y)<=.95*e.radius},t.RCGL_POLYS=function(e,r,a,o,u){var l=u.game,A=u.SX,c=u.SY,d=u.SW,p=u.SH,f=(0,i.getQuadTreesObj)();if(f.All){for(var h=r.x-A,v=r.y-c,g=f.queryTreesRect([4,23,11,22,44,43,42,25],e),y=0;y<g.length;y++){var m=g[y];(0,n.inPerimiter)(m.pos,r,a,a,m.radius)&&(11!==m.type&&(0,t.ignoreRayCasterShape)(m,r)||(0,t.blockCirclePolyForRayCaster2)(m.sides,m.radius>10?m.radius-2:m.radius,m.pos.x,m.pos.y,m.angle,o,p,A,c,h,v))}var _=f.queryTreesRect([0,2,1,50,45],e),x=_.length;for(y=0;y<x;y++){var S=_[y];(0,s.trianglePoint)(r,S.comp[0].vertex)||(0,t.drawShipTriangleForRayCaster)(S.comp[0].vertex,S.pos,d,A,c,o)}var T=l.spaceSnake,E=T.length;for(y=0;y<E;y++)for(var M=T[y].segments,b=0;b<M.length;b++){var I=M[b];e.intersectsIM(I)&&((0,t.ignoreRayCasterShape)(I,r)||(0,t.blockCirclePolyForRayCaster2)(10,1.2*I.radius,I.pos.x,I.pos.y,I.angle,o,p,A,c,h,v))}}}}.apply(t,a),void 0===n||(e.exports=n)},5712:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(5081),r(1706),r(1706),r(7967),r(2993),r(3700),r(9271),r(2289),r(7180),r(5102),r(789),r(8272),r(7561),r(7899),r(998)],n=function(e,t,r,a,n,s,u,l,A,c,d,p,f,h,v,g,y,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i(n),u=i(u);for(var _="w",x={children:o(o(o(o(o([],window.io?[]:d.singlePlayerItems,!0),window.io?p.multiplayerItems:[],!0),f.optionsItems,!0),v.shipItems,!0),h.debugItems,!0)},S=0;S<x.children.length;S++)u.default.create(x.children[S].label,70,_);var T=u.default.create(" ON",70,_),E=u.default.create(" OFF",70,_),M=[],b=-1,I=0,L=0,P=!1,w=!1,R=0,O=function(e,t){for(var r=[],a=0;a<t.length;a++){var n=t[a];n.condition&&!n.condition(e)||r.push(n)}return r},C=80,D=[],G=!1,N=function(e,t){for(var r=t||D.length,a=0;a<r;a++)D[a]=e};N(window.innerWidth,10);var B=!0,F=function(e,t,r){for(var a=!0,n=D.length,o=0;o<n;o++){var i=D[o];i=i+=1*(C*(e.step*t)+(1+o)/n*500*t),t>0?i<r?a=!1:i=r:i>r?a=!1:i=r,D[o]=i}return a},V=!1,k=!1,X=[],H=0,U=!1,Y=!1,W=5e4;t.default=function(e){var t,o,i=e.game,d=e.stepMS,p=e.gl,f=e.SW,h=(e.SH,e.SX),v=e.SY;if(C=f/1800*80,!i.loadscreen)if(13===i.currentLevel&&(H+=d)>=W&&(H=W,U||(k=!0,Y=!1,U=!0),V&&(V=!1)),(i.allKeyCodes.currentKeyCode===l.Keys.ESCAPE||-1!==i.allKeyCodes.currentKeyCode&&U)&&!i.skillTree.active&&0===i.skillTree.timer&&(i.state.menu.active?0===M.length&&H<W?H=W:(H=0,U=!1,V=!0,Y=!1):((0,A.StateMachine)(i.state).menuActivate(),H=0,U=!1,i.isPaused=!0)),U&&Y){var S=u.default.create("ESC TO SHOW MENU",y.TEXT_SIZE_SMALL,"w");u.default.addGL(p,(0,n.default)(s.GLctx.Texture,p),S,.5*i.resW-.5*S.w,10,e)}else if(i.state.menu.active||!Y){if(i.currentLevel>13&&P&&(i.isPaused=!0,P=!1),t=i.allKeyCodes.menu,((o=t.keys).UP?(L=-1,!0):o.DOWN?(L=1,!0):o.RETURN?(w=!0,G=!0,!0):!(!o.BACKSPACE&&!o.ESCAPE||0===M.length||(w=!1,0===M.length?(N(window.innerWidth),P=!P,V=!1,B=!0,G=!1,k=!1):k=!0,0)))&&(H=0,i.eventMap[a.GAME_EVENT.MENU_SELECT]={x:0,y:0}),!(i.currentLevel>13)||i.isPaused){X=[];var j,q=function(e){var t=function(e){for(var t=x.children,r=0;r<M.length;r++)t=(t=O(e,t))[M[r]].children;return t}(e),r=[];if(t)for(var a=0;a<t.length;a++){var n=t[a];n.condition&&!n.condition(e)||r.push(n)}var o=I+L;return I=o>=0&&o<r.length?o:o<0?r.length-1:0,L=0,b>-1&&(r[b]&&r[b].children&&(M.push(b),I=0),b=-1),I<R&&(R=I),I+1>5+R&&(R=I-5+1),r}(e),z=Math.min(q.length,5+R);w&&(q[I].action&&q[I].action(e).then((function(e){for(var t in e.root&&(M=[],I=0),e.resetToTop&&(I=0),e.pop&&(I=M.pop(),G=!1,B=!1,V=!1,k=!1),i.menuSettings)"boolean"==typeof i.menuSettings[t]&&(0,c.saveBool)(t,i.menuSettings[t]);for(var t in i.menuSettings.debugItems)"boolean"==typeof i.menuSettings.debugItems[t]&&(0,c.saveBool)(t,i.menuSettings.debugItems[t])})),w=!1),G?F(j=e,-1,-j.game.resW)&&(N(j.game.resW),G=!1,B=!0,b=I):B?function(e){F(e,-1,0)&&(N(0),B=!1)}(e):V?function(e){F(e,1,0)&&(N(0),V=!1)}(e):k?function(e){F(e,1,e.game.resW)&&(N(-e.game.resW),k=!1,V=!0,M.pop())}(e):Y=!0;for(var K=i.zoomTX,Z=[],Q=1-Math.abs(D[0]/f),J=(.22*i.resH-5)*K,$=(.25*i.resH+77*(z-R)+20)*K,ee=$-J,te=ee*Q,re=$-(ee-te),ae=J+(ee-te);ae<re;ae+=5)Z.push(0,ae,f,ae);(0,n.default)(s.GLctx.Vertices,p),(0,m.GlowCustomLayout)({x:.5*i.resW+h,y:.2*i.resH*2+v},.88*Q,Z,e,.61,.61,.61,1,p.LINES);var ne=0,oe=0,ie=0;for(ae=R;ae<z;ae++){var se=q[ae],ue=I===ae,le=u.default.create(se.label,70,_);oe=.25*i.resH+77*ie;var Ae=se.enabled?se.enabled(e)?[le,T]:[le,E]:se.value?[le,u.default.create(se.value(e),70,_)]:[le],ce=u.default.measureBuffers(Ae),de=.5*i.resW-.5*ce+D[ie+1];u.default.addListGL(p,(0,n.default)(ue?s.GLctx.TextureDist:s.GLctx.Texture,p),Ae,de,oe,e),le.w>ne&&(ne=le.w),ie++}ne=1.1*ne+100;var pe=.5*i.resW-.5*ne;return R>0&&X.push(pe-.5*D[0]-30+.5*ne,.2*i.resH,pe-.5*D[0]+30+.5*ne,.2*i.resH,pe-.5*D[0]+.5*ne,.2*i.resH-20),(0,r.line2Poly)((pe-D[0])*K,.22*i.resH*K,(pe+ne-D[0])*K,.22*i.resH*K,X,8*K),(0,r.line2Poly)((pe-D[Math.min(5,z)])*K,(oe+91)*K,(pe+ne-D[Math.min(5,z)])*K,(oe+91)*K,X,8*K),z<q.length&&X.push(pe-.5*D[Math.min(5,z)]-30+.5*ne,oe+91+20,pe-.5*D[Math.min(5,z)]+30+.5*ne,oe+91+20,pe-.5*D[Math.min(5,z)]+.5*ne,oe+91+40),(0,n.default)(s.GLctx.Vertices,p),(0,g.drawColor)(X,p,1,1,1,.5),"menu"}}else N(i.resW)}}.apply(t,a),void 0===n||(e.exports=n)},4307:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REVERSE_IN_GAME_KEY_BINDING_TRANSLATIONS=void 0,t.REVERSE_IN_GAME_KEY_BINDING_TRANSLATIONS={}}.apply(t,[r,t]),void 0===a||(e.exports=a)},4784:function(e,t,r){var a,n,o=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function i(e){try{u(a.next(e))}catch(e){o(e)}}function s(e){try{u(a.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((a=a.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,a,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(r=1,a&&(n=2&s[0]?a.return:s[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;switch(a=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};a=[r,t,r(2993),r(9733),r(7899)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUserItems=void 0;var s="ENTER NAME",u=!0;window.addEventListener("keydown",(function(e){if(u){var a=t.createUserItems[0].label;switch(e.keyCode){case r.Keys.BACKSPACE:case r.Keys.DELETE:if(a===s);else{var n=a.split("");n.pop(),a=n.join("")}return""==a&&(a=s),void(t.createUserItems[0].label=a);case r.Keys.RETURN:case r.Keys.LEFT:case r.Keys.RIGHT:case r.Keys.UP:case r.Keys.DOWN:return}if(e.keyCode>=65&&e.keyCode<=90||"space"===e.key){if("space"===e.key&&" "===a.split("").pop())return;a===s?a=e.key.toUpperCase():a+=e.key.toUpperCase()}t.createUserItems[0].label=a}})),t.createUserItems=[{label:s,action:function(e){return o(void 0,void 0,void 0,(function(){var r;return i(this,(function(o){switch(o.label){case 0:if(!((r=(0,a.getUser)()||t.createUserItems[0].label)!==s&&r&&r.length>3&&"  "!==r&&r.split(" ").join("").length>3))return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),u=!1,t.createUserItems[0].label="LOADING...",[4,(0,a.createUser)(e,r)];case 2:return o.sent(),[2,Promise.resolve({root:!0})];case 3:return o.sent(),e.game.notifications.push({life:n.NOTIFICATION_LIFE,type:71,message:"UNABLE TO CREATE USER..."}),(0,a.createOfflineUser)(r),[2,Promise.resolve({root:!0})];case 4:return[3,6];case 5:return e.game.notifications.push({life:n.NOTIFICATION_LIFE,type:71,message:"NAME SHOULD BE MORE THAN 3 LETTERS. A-Z"}),[2,Promise.resolve({})];case 6:return[2]}}))}))},condition:function(){return!(0,a.getUser)()}}]}.apply(t,a),void 0===n||(e.exports=n)},789:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};a=[r,t,r(3700),r(5006),r(9733)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugItems=void 0,t.debugItems=[{condition:function(){return!!(0,n.getUser)()},label:"DEV UI",children:o(o([{label:"GUI DEBUG",children:[{label:"AABBs",action:function(e){return e.game.menuSettings.debugItems.aabb=!e.game.menuSettings.debugItems.aabb,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.debugItems.aabb}},{label:"FORCES",action:function(e){return e.game.menuSettings.debugItems.forces=!e.game.menuSettings.debugItems.forces,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.debugItems.forces}},{label:"PROCEDURAL CREATION",action:function(e){return e.game.menuSettings.debugItems.proceduralCreation=!e.game.menuSettings.debugItems.proceduralCreation,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.debugItems.proceduralCreation}},{label:"PREDATOR TARGETS",action:function(e){return e.game.menuSettings.debugItems.predatorTarget=!e.game.menuSettings.debugItems.predatorTarget,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.debugItems.predatorTarget}},{label:"WORKER TARGETS",action:function(e){return e.game.menuSettings.debugItems.workerTarget=!e.game.menuSettings.debugItems.workerTarget,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.debugItems.workerTarget}},{label:"CHUNK RENDER",action:function(e){return e.game.menuSettings.debugItems.chunks=!e.game.menuSettings.debugItems.chunks,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.debugItems.chunks}}]},{label:"NETWORK LOCATIONS",action:function(e){return e.game.menuSettings.networkLocaations=!e.game.menuSettings.networkLocaations,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.networkLocaations}},{label:"EXTENSIVE UI",action:function(e){return e.game.menuSettings.extensiveUI=!e.game.menuSettings.extensiveUI,setTimeout((function(){e.game.debug=e.game.menuSettings.extensiveUI?{}:null}),0),Promise.resolve({})},enabled:function(e){return e.game.menuSettings.extensiveUI}},{label:"FPS",action:function(e){return e.game.menuSettings.fpsOnly=!e.game.menuSettings.fpsOnly,e.game.menuSettings.fps&&(e.game.menuSettings.fps=!1,e.game.menuSettings.keybindingHint=!1),Promise.resolve({})},enabled:function(e){return e.game.menuSettings.fpsOnly}},{label:"FPS MEETERS",action:function(e){return e.game.menuSettings.fps=!e.game.menuSettings.fps,e.game.menuSettings.fpsOnly&&(e.game.menuSettings.fpsOnly=!1,e.game.menuSettings.keybindingHint=!1),Promise.resolve({})},enabled:function(e){return e.game.menuSettings.fps}},{label:"HEAP",action:function(e){return e.game.menuSettings.heap=!e.game.menuSettings.heap,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.heap}},{label:"FPS 3D BARS",action:function(e){return e.game.menuSettings.fps3dBars=!e.game.menuSettings.fps3dBars,e.game.menuSettings.fps3dBars&&(e.game.menuSettings.fps3dGrid=!1),Promise.resolve({})},enabled:function(e){return e.game.menuSettings.fps3dBars}},{label:"FPS 3D GRID",action:function(e){return e.game.menuSettings.fps3dGrid=!e.game.menuSettings.fps3dGrid,e.game.menuSettings.fps3dGrid&&(e.game.menuSettings.fps3dBars=!1),Promise.resolve({})},enabled:function(e){return e.game.menuSettings.fps3dGrid}},{label:"ON SCREEN LOGGING",action:function(e){return e.game.menuSettings.onScreenLogging=!e.game.menuSettings.onScreenLogging,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.onScreenLogging}},{label:"LEVELS",children:[{label:"OLD SURVIVAL LEVEL",action:function(e){return e.game.targetLevel=20,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"THE CONVOY",action:function(e){return e.game.targetLevel=22,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"SURVIVAL",action:function(e){return e.game.targetLevel=20,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"BE THE SNAKE",action:function(e){return e.game.targetLevel=23,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}}]},{label:"LEVEL EDITOR",action:function(e){return e.game.targetLevel=19,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}}],a.testItems,!0),[{label:"WORKERS TEST",action:function(e){return e.game.targetLevel=14,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"MINEFIELD TEST",action:function(e){return e.game.targetLevel=15,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"FAST IMPACT TEST",action:function(e){return e.game.targetLevel=16,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"FROM DUSK TIL DAWN TEST",action:function(e){return e.game.targetLevel=17,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"FIRE SNAKE TEST",action:function(e){return e.game.targetLevel=18,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}}],!1)}]}.apply(t,a),void 0===n||(e.exports=n)},2254:(e,t,r)=>{var a,n;a=[r,t,r(2993),r(9271),r(4307)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keybindingItems=t.createKeyBindingLabel=t.keyCodetoStrHelper=t.IN_GAME_KEY_BINDING_TRANSLATIONS=void 0,t.IN_GAME_KEY_BINDING_TRANSLATIONS={};var o="in_game_keys_translation",i=!0,s=null,u=null;window.addEventListener("keydown",(function(e){if(i){switch(e.keyCode){case r.Keys.ESCAPE:return i=!1,void(s=null);case r.Keys.BACKSPACE:case r.Keys.DELETE:case r.Keys.RETURN:case r.Keys.TILDE:return}p(s,e.keyCode),u=e.keyCode}}));var l=[];t.keyCodetoStrHelper=function(e){switch(e){case r.Keys.LEFT:return"ARROW LEFT";case r.Keys.UP:return"ARROW UP";case r.Keys.RIGHT:return"ARROW RIGHT";case r.Keys.DOWN:return"ARROW DOWN";case r.Keys.PRIMARY_WEAPON:return"SPACE";default:return String.fromCharCode(e)}};var A=function(e){for(var t in e)delete e[t]},c=function(){for(var e in A(n.REVERSE_IN_GAME_KEY_BINDING_TRANSLATIONS),t.IN_GAME_KEY_BINDING_TRANSLATIONS)for(var a in r.Keys)if(parseInt(r.Keys[a],10)===parseInt(e,10)){if(n.REVERSE_IN_GAME_KEY_BINDING_TRANSLATIONS[t.IN_GAME_KEY_BINDING_TRANSLATIONS[e]])return console.error("duplicate key"),!0;n.REVERSE_IN_GAME_KEY_BINDING_TRANSLATIONS[t.IN_GAME_KEY_BINDING_TRANSLATIONS[e]]=r.Keys[a]}};t.createKeyBindingLabel=function(e,r){return e+" <"+(0,t.keyCodetoStrHelper)(r)+">"};var d=function(e,r){return"INPUT "+e+" <"+(0,t.keyCodetoStrHelper)(r)+">"},p=function(e,t){for(var r=0;r<l.length;r++){var a=l[r];a.id===e&&(a.children[0].label=d(e,t))}};setTimeout((function(){if(h(),(0,a.containsData)(o)){console.log("key bindings loaded");var e=(0,a.loadData)(o);A(t.IN_GAME_KEY_BINDING_TRANSLATIONS),function(e,t){for(var r in e)t[r]=e[r]}(e,t.IN_GAME_KEY_BINDING_TRANSLATIONS),f()}}),0);var f=function(){for(;l.length>0;)l.pop();(function(){var e=function(e){if(r.Keys[e]){var n=t.IN_GAME_KEY_BINDING_TRANSLATIONS[r.Keys[e]];l.push({id:e,label:(0,t.createKeyBindingLabel)(e,n),action:function(t){return i=!0,s=e,Promise.resolve({})},children:[{action:function(n){return i=!1,s=null,function(e,a){var n=!1,o=t.IN_GAME_KEY_BINDING_TRANSLATIONS[r.Keys[e]];t.IN_GAME_KEY_BINDING_TRANSLATIONS[r.Keys[e]]=a,c()&&(t.IN_GAME_KEY_BINDING_TRANSLATIONS[r.Keys[e]]=o,c(),n=!0);for(var i=0;i<l.length;i++){var s=l[i];s.id===e&&(n?(s.label=(0,t.createKeyBindingLabel)(s.id,o),s.children[0].label="ERROR <DUPLICATE KEY>"):s.label=(0,t.createKeyBindingLabel)(s.id,a))}if(n)return!0}(e,u)?Promise.resolve({}):((0,a.saveData)(o,t.IN_GAME_KEY_BINDING_TRANSLATIONS),Promise.resolve({pop:!0}))},label:d(e,n)}]})}};for(var n in r.inGameKeyCodes.keys)e(n);l.push({label:"RESET KEYS TO DEFAULT",action:function(e){return h(),(0,a.saveData)(o,t.IN_GAME_KEY_BINDING_TRANSLATIONS),Promise.resolve({})}})})(),c()},h=function(){!function(){for(var e in r.Keys)t.IN_GAME_KEY_BINDING_TRANSLATIONS[r.Keys[e]]=r.Keys[e]}(),f()};t.keybindingItems={label:"KEY BINDINGS",children:l}}.apply(t,a),void 0===n||(e.exports=n)},7180:(e,t,r)=>{var a,n;a=[r,t,r(3700),r(638),r(2993),r(9271)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiplayerItems=void 0;var i="ENTER_NAME_TO_JOIN",s="multiplayer_save_name_key",u=!0,l=null;window.addEventListener("keydown",(function(e){if(u){var r=t.multiplayerItems[0].label;switch(e.keyCode){case n.Keys.BACKSPACE:case n.Keys.DELETE:if(r===i);else{var a=r.split("");a.pop(),r=a.join("")}return""==r&&(r=i),void(t.multiplayerItems[0].label=r);case n.Keys.RETURN:case n.Keys.LEFT:case n.Keys.RIGHT:case n.Keys.UP:case n.Keys.DOWN:return}if(e.keyCode>=65&&e.keyCode<=90||"space"===e.key){if("space"===e.key&&" "===r.split("").pop())return;r===i?r=e.key.toUpperCase():r+=e.key.toUpperCase()}t.multiplayerItems[0].label=r}})),t.multiplayerItems=[{label:i,action:function(e){var n=l||t.multiplayerItems[0].label;if(n!==i&&n&&n.length>1&&"  "!==n&&n.split(" ").join("").length>1)return(0,a.clientCreateShip)(n,window.innerWidth,window.innerHeight),u=!1,(0,o.saveStr)(s,n),e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}}],setTimeout((function(){(0,o.containsStr)(s)&&(l=(0,o.loadStr)(s),t.multiplayerItems[0].label="JOIN GAME")}),0)}.apply(t,a),void 0===n||(e.exports=n)},5102:(e,t,r)=>{var a,n;a=[r,t,r(2254),r(9733)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optionsItems=void 0,t.optionsItems=[{condition:function(){return!!(0,a.getUser)()},label:"OPTIONS",children:[r.keybindingItems,{label:"GFX",children:[{label:"RAYCASTING",action:function(e){return e.game.menuSettings.raycasting=!e.game.menuSettings.raycasting,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.raycasting}},{label:"LOS SHADOWS",action:function(e){return e.game.menuSettings.losShadows=!e.game.menuSettings.losShadows,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.losShadows}},{label:"GLOW",action:function(e){return e.game.menuSettings.glow=!e.game.menuSettings.glow,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.glow}},{label:"GLOW PARTICLES",action:function(e){return e.game.menuSettings.glowParticles=!e.game.menuSettings.glowParticles,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.glowParticles}},{label:"REFLECTIONS",action:function(e){return e.game.menuSettings.reflections=!e.game.menuSettings.reflections,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.reflections}},{label:"ANTIALIASING (RELOAD REQUIRED)",action:function(e){return e.game.menuSettings.antialiasing=!e.game.menuSettings.antialiasing,setTimeout((function(){window.location.reload()}),500),Promise.resolve({})},enabled:function(e){return e.game.menuSettings.antialiasing}},{label:"TRANSFORM FEEDBACK",action:function(e){return e.game.menuSettings.transformFeedback=!e.game.menuSettings.transformFeedback,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.transformFeedback}},{label:"PARTICLES",action:function(e){var t=e.game.menuSettings;return t.particleSettingIndex<t.particleSettingsArr.length&&t.particleSettingIndex++,t.particleSettingIndex>=t.particleSettingsArr.length&&(t.particleSettingIndex=0),Promise.resolve({})},value:function(e){var t=e.game.menuSettings;return t.particleSettingsArrStr[t.particleSettingIndex]}}]},{label:"HUD",children:[{label:"MINIMAP",action:function(e){return e.game.menuSettings.minimap=!e.game.menuSettings.minimap,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.minimap}},{label:"FLIGHT INSTRUMENTS",action:function(e){return e.game.menuSettings.instruments=!e.game.menuSettings.instruments,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.instruments}},{label:"SHIP STATUS",action:function(e){return e.game.menuSettings.shipStatus=!e.game.menuSettings.shipStatus,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.shipStatus}},{label:"KEYBINDING HINT",action:function(e){return e.game.menuSettings.keybindingHint=!e.game.menuSettings.keybindingHint,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.keybindingHint}},{label:"GAME CLOCK",action:function(e){return e.game.menuSettings.gameClock=!e.game.menuSettings.gameClock,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.gameClock}},{label:"HELP FROM COMMANDER",action:function(e){return e.game.menuSettings.commanderHelp=!e.game.menuSettings.commanderHelp,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.commanderHelp}}]},{label:"AUDIO",children:[{label:"MUSIC",action:function(e){return e.game.menuSettings.music=!e.game.menuSettings.music,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.music}},{label:"SFX",action:function(e){return e.game.menuSettings.sfx=!e.game.menuSettings.sfx,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.sfx}}]}]}]}.apply(t,a),void 0===n||(e.exports=n)},8272:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(9271),r(3578),r(3578),r(737),r(9733)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shipItems=void 0,i=o(i);var u="storage_ship_color_index",l=function(){return"CHROME <"+n.ShipColorStrings[(0,n.getCurrentColorIndex)()]+">"};t.shipItems=[{condition:function(){return!!(0,s.getUser)()},label:"SHIP",children:[{label:l(),action:function(e){(0,n.increaseColorIndex)(),(0,r.saveInt)(u,(0,n.getCurrentColorIndex)()),t.shipItems[0].children[0].label=l();var a=(0,i.default)(e);return a&&(a.colorIndex=(0,n.getCurrentColorIndex)()),Promise.resolve({})}}]}],setTimeout((function(){var e=(0,r.loadInt)(u)||0;(0,a.setColorIndex)(e),t.shipItems[0].children[0].label=l()}),0)}.apply(t,a),void 0===n||(e.exports=n)},2289:function(e,t,r){var a,n,o=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function i(e){try{u(a.next(e))}catch(e){o(e)}}function s(e){try{u(a.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((a=a.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,a,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(r=1,a&&(n=2&s[0]?a.return:s[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;switch(a=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},s=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};a=[r,t,r(5081),r(3700),r(9271),r(6515),r(4784),r(7899),r(9733),r(6515)],n=function(e,t,r,a,n,u,l,A,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.singlePlayerItems=void 0;var p="LOAD/SAVE",f="LOAD GAME",h="DELETE SAVED GAME",v=function(){var e=(0,u.getGameSaves)(),n=t.singlePlayerItems.filter((function(e){return e.label===p}))[0].children.filter((function(e){return e.label===f}))[0];n.children=e.map((function(e){return{label:e,action:function(t){return(0,d.loadGame)(e,t),(0,a.StateMachine)(t.game.state).menuDisable(),t.game.eventMap[r.GAME_EVENT.START_GAME]={},t.game.isPaused=!1,Promise.resolve({root:!0})}}})),n.children.reverse(),n.children.unshift({label:(0,u.getStorageUsedKB)()+"/4000 KB USED"});var o=t.singlePlayerItems.filter((function(e){return e.label===p}))[0].children.filter((function(e){return e.label===h}))[0];o.children=e.map((function(e){return{label:e,action:function(t){return(0,d.deleteSavedGame)(t.game,e),v(),Promise.resolve({root:!0})}}})),o.children.reverse(),o.children.unshift({label:(0,u.getStorageUsedKB)()+"/4000 KB USED"})};setTimeout((function(){v()}),10),t.singlePlayerItems=s(s([],l.createUserItems,!0),[{label:"RESUME GAME",action:function(e){return(0,a.StateMachine)(e.game.state).menuDisable(),e.game.eventMap[r.GAME_EVENT.RESUME_GAME]={},e.game.isPaused=!1,Promise.resolve({root:!0})},condition:function(e){return e.game.isPaused&&!!(0,c.getUser)()}},{label:"CONTINUE",action:function(e){return e.game.targetLevel=21,(0,a.StateMachine)(e.game.state).menuDisable(),e.game.eventMap[r.GAME_EVENT.START_GAME]={},e.game.isPaused=!1,e.game.continueState=(0,n.loadData)("continue_stats"),Promise.resolve({root:!0})},condition:function(e){return!e.game.isPaused&&!!(0,n.loadData)("continue_stats")}},{label:"NEW GAME",action:function(e){return e.game.targetLevel=21,(0,a.StateMachine)(e.game.state).menuDisable(),e.game.eventMap[r.GAME_EVENT.START_GAME]={},e.game.isPaused=!1,e.game.continueState=null,Promise.resolve({root:!0})},condition:function(e){return!!(0,c.getUser)()}},{label:"LEADERBOARD",children:[{label:"LOADING..."}],action:function(e){return o(void 0,void 0,void 0,(function(){var r;return i(this,(function(a){switch(a.label){case 0:t.singlePlayerItems.filter((function(e){return"LEADERBOARD"===e.label}))[0].children=[{label:"LOADING..."}],a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,c.getLadder)()];case 2:return r=a.sent(),t.singlePlayerItems.filter((function(e){return"LEADERBOARD"===e.label}))[0].children=r.map((function(e){return{label:e}})),[3,4];case 3:return a.sent(),e.game.notifications.push({life:A.NOTIFICATION_LIFE,type:71,message:"unable to load leaderboard.."}),[2,Promise.resolve({root:!0})];case 4:return[2,Promise.resolve({})]}}))}))},condition:function(){return(0,c.getUserOnlineStatus)()}},{label:p,condition:function(e){return!!(0,c.getUser)()&&((0,n.loadData)("gameSaves")||[]).length>0||e.game.currentLevel>13},children:[{label:f,condition:function(){return(0,u.getGameSaves)().length>0},children:[]},{label:"SAVE GAME (CURRENTLY BROKEN)",action:function(e){return(0,d.saveGame)(e.game),v(),Promise.resolve({root:!0})},condition:function(e){return e.game.currentLevel>13}},{label:h,condition:function(){return(0,u.getGameSaves)().length>0},children:[]}]}],!1)}.apply(t,a),void 0===n||(e.exports=n)},5006:(e,t,r)=>{var a,n;a=[r,t,r(3700)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testItems=void 0;var a=function(e,t){return{label:e,action:function(e){return e.game.targetLevel=t,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}}};t.testItems=[{label:"TESTS",children:[{label:"DYNAMIC COLLISION",action:function(e){return e.game.targetLevel=1,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"STATIC COLLISSION",action:function(e){return e.game.targetLevel=0,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"SPACE SNAKES",action:function(e){return e.game.targetLevel=2,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"SPACE SQUIDS",action:function(e){return e.game.targetLevel=5,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"SPACE SNAKE <FOLLOW>",action:function(e){return e.game.targetLevel=3,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"SPACE BATS",action:function(e){return e.game.targetLevel=3,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"SPACE SPIDER",action:function(e){return e.game.targetLevel=6,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"ROCK FORMATIONS",action:function(e){return e.game.targetLevel=7,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"SPACEDUST PERF.",action:function(e){return e.game.targetLevel=24,e.game.isPaused=!1,(0,r.StateMachine)(e.game.state).menuDisable(),Promise.resolve({root:!0})}},a("PLAYGROUND",8),a("NEURAL NETWORK TRAINING",9),a("NEURAL NETWORK EVOLUTION",10)]}]}.apply(t,a),void 0===n||(e.exports=n)},910:(e,t,r)=>{var a,n;a=[r,t,r(9262)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hexBox=void 0;var a={};t.hexBox=function(e,t,r,o){var s=a[e];if(s)return n(s,t,r,o);var u=i(e);return a[e]=u,n(u,t,r,o)};var n=function(e,t,r,a){for(var n=!0,o=[],i=0;i<3;i++){for(var s=[],u=0;u<12;u++){var l=e[i][u];l+=n?t.x-r:t.y-a,s.push(l),n=!n}o.push(s)}return o},o=function(e,t){var a=new r.Vector(0,0);return a.setLength(e),a.setAngle(t),a},i=function(e){var t=-.5*Math.PI,r=.5*Math.PI,a=o(e,t),n=o(e,t-60*Math.PI/180),i=o(e,t-120*Math.PI/180),s=o(e,r),u=o(e,r-60*Math.PI/180),l=o(e,r-120*Math.PI/180);return[[0,0,n.x,n.y,a.x,a.y,0,0,l.x,l.y,a.x,a.y],[0,0,n.x,n.y,i.x,i.y,0,0,i.x,i.y,s.x,s.y],[0,0,l.x,l.y,u.x,u.y,0,0,u.x,u.y,s.x,s.y]]}}.apply(t,a),void 0===n||(e.exports=n)},987:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(2261),r(7899),r(7405),r(7967),r(2093),r(484)],n=function(e,t,r,a,n,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skillInfoGeneral=void 0,s=o(s);var A=(0,l.rect_pool_pop)(0,0,0,0);t.skillInfoGeneral=function(e,t,o,l,c,d,p,f,h){var v,g,y,m,_=20,x=0,S=s.default.create(e.name.substr(0,e.name.length*p)+(p<0?"#":""),n.TEXT_SIZE_MEDIUM,"g");A.update(t.pos.x,t.pos.y,t.radius,t.radius),x=S.w;for(var T=e.description.split(" "),E=[],M="",b=Math.round(T.length*p),I=0;I<b;I++){var L=T[I];M.length+L.length>76&&(E.push(M),M=""),M+=T[I]+" "}E.push(M),p>.3&&f.push({pos:{x:o+_,y:l+_},text:S}),(null===(v=null==e?void 0:e.installationData)||void 0===v?void 0:v.cost)&&p>.9&&f.push({pos:{x:o+_,y:l+n.TEXT_SIZE_LARGE},text:e.aquired?s.default.create("[INSTALLED]",n.TEXT_SIZE_SMALL,"g"):s.default.create("space credits: "+e.installationData.cost+"$",n.TEXT_SIZE_SMALL,t.credits>=e.installationData.cost?"g":"r")});var P=l+_+n.TEXT_SIZE_LARGE+_,w=Math.round(p*E.length);for(I=0;I<w;I++){var R=s.default.create(E[I],n.TEXT_SIZE_SMALL,"g");x=Math.max(R.w,x),f.push({pos:{x:o+_,y:P+n.TEXT_SIZE_SMALL*I},text:R})}var O=P+n.TEXT_SIZE_SMALL*E.length+40;if(11===e.type){var C=t.weapons.hash[e.weaponInformation.type];e.perks=C?[{value:"cost per unit: "+C.ammunitionCost+" $"},{value:"total cost: "+Math.min(Math.floor(t.credits/C.ammunitionCost)*C.ammunitionCost,C.ammunitionCost*(C.ammunition.max-C.ammunition.value))+" $"},{value:"units to be purchased: "+Math.min(Math.floor(t.credits/C.ammunitionCost),C.ammunition.max-C.ammunition.value)},{value:""},{value:"current supply: "+C.ammunition.value},{value:"max capacity: "+C.ammunition.max}]:[{value:"Requirements",headline:!0},{value:e.weaponInformation.name+" weapon must be installed"}]}if(19===e.type&&(e.perks=[{value:"Buy new drones?",headline:!0},{value:"800 space money for a brand new drone."}]),8===e.type||9===e.type||10===e.type){var D="",G=null,N="",B=t.abilities.hash[11],F=null==B?void 0:B.data,V=(0,u.getQuadTreesObj)().queryTreesRect([3],A)[0],k=0,X=0;switch(V.cannons.filter((function(e){return e.isCannon})).forEach((function(e){k+=e.bullets,X+=e.maxBullets})),e.type){case 8:D="iron",G=(0,i.IronExhangeRate)(t),N=(null===(g=null==F?void 0:F.iron)||void 0===g?void 0:g.value)>0&&X!==k?"Your current stock of iron would create "+Math.round(Math.min(X-k,.78*F.iron.value))+" bullets to the spaceport.":"";break;case 10:D="platinum",G=(0,i.PlatinumExhangeRate)(t),N=(null===(y=null==F?void 0:F.minerals)||void 0===y?void 0:y.value)>0&&X!==k?"The sweet platinum would yield "+Math.round(Math.min(X-k,1.43*F.minerals.value)):"";break;case 9:D="minerals",G=(0,i.MineralsExhangeRate)(t),N=(null===(m=null==F?void 0:F.minerals)||void 0===m?void 0:m.value)>0&&X!==k?"Rare minerals would create an additional "+Math.round(Math.min(X-k,3.76*F.minerals.value)):""}e.perks=[{value:"EchangeRate",headline:!0},{value:G.success?"rate: "+G.rate+" ":"you have no ".concat(D," to sell.")},{value:G.success?"".concat(G.resource," [").concat(D,"] = ").concat(G.credits," $ "):""},{value:""},{value:"If the rates are bad, try another spaceport."},{value:"Rates go down if the spaceport has an abundance of a resource."},{value:""},{value:"Spaceport tower bullet stock",headline:!0},{value:V.cannons.filter((function(e){return e.isCannon})).map((function(e){return e.bullets})).join(", ")},{value:""},{value:"total bullet stock: "+Math.round(k/X*100)+"%"},{value:""},{value:"Selling mined minerals to the spaceport will increase it's tower bullet stock."},{value:N}]}var H=Math.round(e.perks.length*(0,a.map)(p,.2,.95,0,1,!0));for(I=0;I<H;I++){var U=e.perks[I];if(U.value.length>0){var Y=s.default.create((U.headline?"- ":"")+e.perks[I].value,n.TEXT_SIZE_SMALL,"g");x=Math.max(Y.w,x),f.push({pos:{x:o+_,y:O+n.TEXT_SIZE_SMALL*I},text:Y})}}var W=O+n.TEXT_SIZE_SMALL*e.perks.length+40;if(1===e.type){var j=o+_;for(var q in e.weaponUpgrade){var z=e.weaponUpgrade[q];for(var K in z)if(W+=20,C=t.weapons.hash[e.installationData.type]){var Z=C[q][K],Q=z[K],J=C.original[q][K],$=C[q][K]-J,ee=e.aquired?0:Z*Q-C[q][K],te=Math.max(J,$,ee),re=250*(0,a.map)(p,0,.7,0,1,!0),ae=ee/te*re,ne=$/te*re+(e.aquired?5:0),oe=J/te*re,ie=(0,a.map)(p,.7,1,0,1,!0);if((0,r.fillPoly)(0,j,W,oe,10,h),oe>0){(0,r.line2Poly)(j+.5*oe,W,j+.5*oe,W-15*ie,h,1);var se="stock",ue=s.default.create(se.substr(0,se.length*ie),n.TEXT_SIZE_SMALL,"g");f.push({pos:{x:j+.5*oe-.5*ue.w,y:W-2.5*ue.h},text:ue})}var le=j+oe+5;(0,r.fillPoly)(0,le,W,ne,10,h),ne>0&&((0,r.line2Poly)(le+.5*ne,W,le+.5*ne,W+25*ie,h,1),se="current",ue=s.default.create(se.substr(0,ie*se.length),n.TEXT_SIZE_SMALL,"g"),f.push({pos:{x:le+.5*ne-.5*ue.w,y:W+2*ue.h},text:ue}));var Ae=j+oe+5+ne+(ne>0?5:0);(0,r.fillPoly)(0,Ae,W,ae,10,h),ae>0&&((0,r.line2Poly)(Ae+.5*ae,W,Ae+.5*ae,W-15*ie,h,1),se="upgrade",ue=s.default.create(se.substring(0,ie*se.length),n.TEXT_SIZE_SMALL,"g"),f.push({pos:{x:Ae+.5*ae-.5*ue.w,y:W-2.5*ue.h},text:ue}))}}}}}.apply(t,a),void 0===n||(e.exports=n)},1458:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(1706),r(7967)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a),n=o(n),t.default=function(e,t,o,i,s,u,l){void 0===l&&(l="");var A=e.gl;if(t>0){var c=(0,a.default)(r.GLctx.Texture,A),d=n.default.create(l+(o.focused?"> ":"")+o.name,u,"g");n.default.addGL(A,c,d,i,s,e,!1)}return"SKitem"}}.apply(t,a),void 0===n||(e.exports=n)},767:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7899),r(7967)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skillInfoShip=void 0,a=o(a);var n=function(e,t,n,o,i,s,u){var l=t;if(s)for(var A=0;A<s.length;A++){var c=s[A];if(c.types.length>0){l+=r.TEXT_SIZE_SMALL+8,n.push({pos:{x:e,y:l},text:a.default.create(c.name.toLocaleUpperCase(),r.TEXT_SIZE_SMALL,"g")}),l+=r.TEXT_SIZE_SMALL+16;for(var d=0;d<c.types.length;d++){var p=c.types[d],f=i[p].name,h=i[p].guiSoftSelected,v=i[p].guiHardSelected,g=i[p].guiSoftSelectedMoveTo,y=c.types[c.index]===p;n.push({pos:{x:e,y:l},text:a.default.create(f+(y?" [equipped]":"")+(h?" [MOVE?]":"")+(v?" [MOVING]":"")+(g?" [MOVE TO HERE?]":""),r.TEXT_SIZE_SMALL,"g")}),l+=r.TEXT_SIZE_SMALL+8}}}else for(var m in i){l+=r.TEXT_SIZE_SMALL+8;var _=i[m];n.push({pos:{x:e,y:l},text:a.default.create(_.name,r.TEXT_SIZE_SMALL,"g")})}};t.skillInfoShip=function(e,t,o,i,s,u,l,A,c){var d=20,p=a.default.create(e.name.substr(0,e.name.length*l)+(l<0?"#":""),r.TEXT_SIZE_MEDIUM,"g");l>.3&&A.push({pos:{x:o+d,y:i+d},text:p});var f=100;if(16!==e.type&&17!==e.type||(l>.4&&A.push({pos:{x:o+d,y:i+f},text:a.default.create("[Weapons]",r.TEXT_SIZE_SMALL,"g")}),l>.7&&n(o+d,i+f+d,A,0,t.weapons.hash,[t.weapons.primary,t.weapons.secondary,t.weapons.aux])),16===e.type||18===e.type){var h=18===e.type?d:.33*s;l>.5&&A.push({pos:{x:o+h,y:i+f},text:a.default.create("[Abilities]",r.TEXT_SIZE_SMALL,"g")}),l>.8&&n(o+h,i+f+d,A,0,t.abilities.hash,[t.abilities.primary,t.abilities.secondary,t.abilities.aux])}16===e.type&&(l>.6&&A.push({pos:{x:o+.66*s,y:i+f},text:a.default.create("[Passives]",r.TEXT_SIZE_SMALL,"g")}),l>.9&&n(o+.66*s,i+f+d,A,0,t.abilities.passive,null))}}.apply(t,a),void 0===n||(e.exports=n)},7136:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(1706),r(7561),r(4077),r(2261),r(3357)],n=function(e,t,r,a,n,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a),u=o(u);var l=[],A=[],c=.007,d=400;t.default=function(e){e.SW,e.SH,e.SX,e.SY;var t=e.gl,o=e.game,p=o.resW,f=o.resH;A=[],l=[];var h=o.skillTree.timer;if(o.skillTree.active?((h+=e.step*c)<.5&&(h+=e.step*c*4),h>1&&(h=1)):((h-=e.step*c)<.5&&(h-=e.step*c*4),h<0&&(h=0)),o.skillTree.timer=h,0!==h){(d+=2*e.step)>2.3*f&&(d=-60);for(var v=(0,s.map)(h,.7,.8,0,1,!0),g=(0,s.map)(h,.65,.7,0,1,!0),y=(0,s.map)(h,.8,1,0,1,!0),m=f/4,_=0;_<m;_++)A.push(.5*p*(1-g),v*_*4+(1-v)*f*.5,.5*p+g*p*.5,v*_*4+(1-v)*f*.5);(0,i.LOG_GL_FIXED)(v,"fade clamped"),(0,i.LOG_GL_FIXED)(h,"fade"),(0,n.fillPoly)(0,0,0,p,f,l),t.blendFunc(t.DST_COLOR,t.ZERO),(0,a.default)(r.GLctx.Vertices,t),(0,n.drawColor)(l,t,1-h,1-h,1-h,0),t.blendFunc(t.ONE,t.ONE),(0,a.default)(r.GLctx.VerticesGradient,t);var x=(0,r.GLUniformLocation)(t,"u_pos_x"),S=(0,r.GLUniformLocation)(t,"u_pos_y"),T=(0,r.GLUniformLocation)(t,"u_perimiter");t.uniform1f(x,.5*p),t.uniform1f(S,.5*f),t.uniform1f(T,p*(1+y)*(Math.random()>.99?.5*Math.random()+.5:1)),(0,n.drawColor)(A,t,0,.3+.6*(1-v)+(Math.random()>.99?.25*Math.random():.1),0,1,t.LINES),(0,u.default)(e,h),(0,a.default)(r.GLctx.VerticesGradientLinear,t);var E=(0,r.GLUniformLocation)(t,"u_pos_from_x"),M=(0,r.GLUniformLocation)(t,"u_pos_from_y"),b=(0,r.GLUniformLocation)(t,"u_pos_to_x"),I=(0,r.GLUniformLocation)(t,"u_pos_to_y");return t.uniform1f(E,0),t.uniform1f(M,d+30),t.uniform1f(b,0),t.uniform1f(I,d),A=[],(0,n.fillPoly)(0,0,d,p,30,A),(0,n.drawColor)(A,t,0,.13*(0,s.map)(h,.67,.8,0,1,!0),0,1),"SKcontainer"}}}.apply(t,a),void 0===n||(e.exports=n)},8013:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(1706),r(7967),r(2993),r(2254),r(7899),r(7561)],n=function(e,t,r,a,n,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a),n=o(n);var A=[],c=[];t.default=function(e,t,o){var d=e.gl,p=e.game.resW;for(var f in A=[],(c=[]).push({buf:n.default.create("exit: escape",u.TEXT_SIZE_SMALL,"g"),order:30}),i.inGameKeyCodes.keys){var h=s.IN_GAME_KEY_BINDING_TRANSLATIONS[i.Keys[f]],v="",g=0;switch(f){case"LEFT":v="BACK: ",g=3;break;case"UP":v="UP: ",g=0;break;case"RIGHT":v="ENTER: ",g=2;break;case"DOWN":v="DOWN: ",g=1;break;case"PRIMARY_WEAPON":v="SELECT: ",g=4;break;default:continue}c.push({buf:n.default.create(v.toLocaleLowerCase()+(0,s.keyCodetoStrHelper)(h).toLocaleLowerCase(),u.TEXT_SIZE_SMALL,"g"),order:g})}if(t>0){var y=(0,a.default)(r.GLctx.Texture,d);c=c.sort((function(e,t){return e.order-t.order}));for(var m=0,_=0;_<c.length;_++)m+=(S=c[_].buf).w+40;var x=.5*(p-m);for(_=0;_<c.length;_++){var S=c[_].buf;n.default.addGL(d,y,S,x,o,e,!1),(0,l.cutoffRect)(x-5,o-5,S.w+15,S.h+10,5,A),x+=S.w+40}(0,a.default)(r.GLctx.Vertices,d),(0,l.drawColor)(A,d,0,1,0,1,d.LINES)}return"SKhints"}}.apply(t,a),void 0===n||(e.exports=n)},129:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(1706),r(7561),r(7967),r(737),r(987),r(767)],n=function(e,t,r,a,n,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a),i=o(i),s=o(s);var A=[],c=[],d=[],p=0,f=0,h=0,v=0,g=0,y=0,m=0;t.default=function(e,t,o,_,x,S,T,E){e.SW,e.SH,e.SX,e.SY;var M=e.gl,b=e.game,I=e.stepMS,L=(b.resW,b.resH,(0,s.default)(e));(0,a.default)(r.GLctx.Vertices,M),c=[],A=[],d=[];var P,w=b.skillTree.focused;if(p!==w.node.x||f!==w.node.y){g===w.node.x&&y===w.node.y||(g=w.node.x,y=w.node.y,h=p,v=f,m=0);var R=(P=m)*(2-P);p=h+(h-w.node.x)*-R,f=v+(v-w.node.y)*-R,(m+=I/300)>=1&&(p=w.node.x,f=w.node.y,h=p,v=f,m=0)}!function(e,t,r,a,n,o,i,s,A){switch(e.type){case 16:case 18:case 17:(0,l.skillInfoShip)(e,t,r,a,n,o,i,s,A);break;default:(0,u.skillInfoGeneral)(e,t,r,a,n,o,i,s,A)}}(o,L,_,x,S,T,0===m?1:m,c,d),(0,n.drawColor)(A,M,0,1,0,1,M.LINES),(0,n.drawColor)(d,M,0,1,0,1);for(var O=(0,a.default)(r.GLctx.Texture,M),C=0;C<c.length;C++){var D=c[C];i.default.addGL(M,O,D.text,D.pos.x,D.pos.y,e,!1)}return"SKinfo"}}.apply(t,a),void 0===n||(e.exports=n)},3357:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(1706),r(7561),r(2261),r(7967),r(7899),r(1458),r(129),r(8013),r(3039),r(737),r(4259)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a),s=o(s),l=o(l),A=o(A),c=o(c),d=o(d),p=o(p);var h=[],v=-1,g=1,y=10,m=!1;t.default=function(e,t){e.SW,e.SH;var o,_,x=e.SX,S=e.SY,T=e.gl,E=e.game,M=E.resW,b=E.resH,I=8*u.SHIP_LENGTH_RADIUS;h=[];var L=E.skillTree.focused,P=L.parent.children,w=100*(0,i.map)(t,.7,.75,0,1,!0),R=w,O=w,C=10,D=b-2*w;(0,n.cutoffRect)(R,O,350,D,40,h),t>=.73&&(0,c.default)(e,t,.45*w),t>.95&&L.parent.name&&(0,l.default)(e,t,L.parent,R+C,O+C,18,"< ");var G=350+2*w,N=w,B=M-(350+3*w),F=b-2*w;t>.8&&(0,A.default)(e,t,L.node,G,N,B-2*I,F,20),(0,n.cutoffRect)(G,N,B,F,40,h),O+=56;for(var V=Math.min(P.length,Math.floor(P.length*(0,i.map)(t,.8,.9,0,1,!0))),k=O,X=0;X<V;X++){var H=P[X];if((0,l.default)(e,t,H,R+C,k,18),k+=28,H.focused)for(var U=0;U<H.children.length;U++)(0,l.default)(e,t,H.children[U],R+C,k,18,"- "),k+=28}if(t>.7){var Y=(0,p.default)(e);if(Y.angle+=.0013*e.step,Math.random()>.9995&&(Y.angle+=Math.PI*Math.random()),-1===v&&(v=Y.credits),v!==Y.credits&&!m){var W=Math.abs(v-Y.credits);g=Math.max(Math.round(W/40),1),y=3*g,m=!0}v<Y.credits?v+=g:v-=g,Math.abs(v-Y.credits)<y&&(v=Y.credits,m=!1);var j=s.default.createSplitted(Math.floor(v)+"$",u.TEXT_SIZE_MEDIUM,v<=0?"r":"g","");s.default.addListGL(T,(0,a.default)(r.GLctx.Texture,T),1===t?j:j.splice(0,Math.floor(j.length*(0,i.map)(t,.9,1,0,1,!0))),M-w-2*I+C,b-w-2*I-37,e),(0,f.SKwIcon)(e,null===(o=L.node.weaponInformation)||void 0===o?void 0:o.type,M-w-2*I,w,t,2*I,b-w-2*I-200);var q=null===(_=Y.abilities.hash[11])||void 0===_?void 0:_.data;[{v:(null==q?void 0:q.iron.value)||0,n:"Ir"},{v:(null==q?void 0:q.platinum.value)||0,n:"Pl"},{v:(null==q?void 0:q.minerals.value)||0,n:"Mi"}].map((function(n,o){var l=s.default.createSplitted(Math.floor(n.v)+" "+n.n,u.TEXT_SIZE_SMALL,"g","");s.default.addListGL(T,(0,a.default)(r.GLctx.Texture,T),1===t?l:l.splice(0,Math.floor(l.length*(0,i.map)(t,.9,1,0,1,!0))),M-w-2*I+C,b-w-2*I-37-u.TEXT_SIZE_SMALL*(o+1),e)}));var z=(0,a.default)(r.GLctx.Vertices,T);h.push(M-w-2*I,b-w-2*I,M-w,b-w-2*I),h.push(M-w-2*I,b-w-2*I-100,M-w,b-w-2*I-100),h.push(M-w-2*I,w,M-w-2*I,b-w),(0,n.drawColor)(h,T,0,1*(0,i.map)(t,.7,.8,0,1,!0),0,1,T.LINES);var K=Y.pos.x-x-(M-w-I),Z=Y.pos.y-S-(b-w-I);h=[];var Q=[];(0,d.default)(1,Y,x+K,S+Z,h,Q,{r:0,g:.4*(0,i.map)(t,.75,1,0,1,!0)+t>.9?Math.random()>.99?.25*Math.random():.4:.2*Math.random(),b:0},8+.1*Math.random()),(0,n.drawColorMap)(Q,h,z,T)}else v=-1,g=1,y=10,m=!1;return"SKitemManager"}}.apply(t,a),void 0===n||(e.exports=n)},4259:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t});a=[r,t,r(7561),r(2261),r(1706),r(8988)],n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SKwIcon=void 0,n=u(n);var i=-1,s=0,l=0,A=[],c=[],d=[],p=[A,c,d];t.SKwIcon=function(e,t,u,f,h,v,g){var y=e.gl;A.length=0,c.length=0,d.length=0,(s+=.5*e.step)>6&&(s=6),i!==t&&(l+=.5*e.step)>=6&&(l=0,s=0,i=t);var m=u+.5*v,_=f+.5*g,x=Math.random()>.99?.5+.6*Math.random():1;(0,o.drawWeaponIcon)(i,m,_,x,A,c,d),y.blendFunc(y.ONE,y.ONE),(0,n.default)(n.GLctx.Vertices,y),p.filter((function(e){return e.length})).forEach((function(t,n){var o=Math.min(1,1*(0,a.map)(h,.75,1,0,1,!0)+h>.9?Math.random()>.99?.25*Math.random():.9:.2*Math.random())-.33*n;(0,r.drawColor)(t,e.gl,0,o,0,1-.2*n)}))}}.apply(t,a),void 0===n||(e.exports=n)},5559:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(484),r(7561),r(2093),r(7967),r(7899),r(1706),r(1706),r(9879),r(7561),r(2261),r(9262)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawTurret=void 0,i=o(i),u=o(u),A=o(A);var f=[],h=[],v=[],g=0,y=new p.Vector(0,0),m=new p.Vector(0,0);t.drawTurret=function(e,t,r,n,o,i,s,u){void 0===u&&(u=1),y.set(2*e,0),y.setAngle(t),(0,a.line2Poly)(r-i,n-s,r+y.x-i,n+y.y-s,o,3*u);for(var l=0;l<4;l++)y.set(1.5*e,0),y.setAngle(t+.25*Math.PI+.5*Math.PI*l),m.set(.8*e,0),m.setAngle(t+.25*Math.PI+.5*Math.PI*l),(0,a.line2Poly)(r+y.x-i,n+y.y-s,r+m.x-i,n+m.y-s,o,1.5*u);(0,c.blockCirclePoly)(6,e,r,n,t+Math.PI/6,o,0,i,s,2*u,!1,0,4,0,4)},t.default=function(e){e.SW,e.SH;var o=e.SX,p=e.SY,y=e.gl,m=e.game,_=e.stepMS;f=[],h=[],v=[],(g+=_)>500&&(g=0);var x=(0,n.getQuadTreesObj)();if(x.All)for(var S=x.queryTreesRect([44],m.screen.rectSS_200),T=S.length,E=0;E<T;E++){var M=S[E];M.bullets>0&&v.push({heat:M.overheatVal,overheat:M.overHeatTimerMS>0,posx:M.pos.x,posy:M.pos.y,value:M.bullets}),M.life<30&&(0,A.default)(e,M.pos,(30-M.life)*Math.random()+5,70+50*Math.random());var b=M.pos.x,I=M.pos.y;(0,t.drawTurret)(M.radius,M.angle,b,I,f,o,p),(0,a.addToColorMap)(h,f,.1,.6,.1,.8)}if(f.length>0){var L=[];if(v.length>0){for(y.disable(y.BLEND),E=0;E<v.length;E++){var P=((O=v[E]).overheat||0===O.value)&&g>250?"   ":O.overheat?"OHT":(0,d.pad009)(O.value),w=i.default.create(P,s.TEXT_SIZE_SMALL,"y");L.push(w),(0,c.drawRectPoly)(new r.Rectangle(O.posx-.5*w.w*m.zoomTX,O.posy-40,w.w,s.TEXT_SIZE_SMALL),o,p,f,1),(0,c.drawTriangle)(O.posx-.5*w.w*m.zoomTX-4,O.posy-40+.5*s.TEXT_SIZE_SMALL,4,o,p,f),(0,a.line2Poly)(O.posx-w.w*m.zoomTX*.5-12-o,O.posy-40+s.TEXT_SIZE_SMALL-p,O.posx-w.w*m.zoomTX*.5-12-o,O.posy-40+s.TEXT_SIZE_SMALL-s.TEXT_SIZE_SMALL*O.heat*.01-p,f,2)}(0,a.addToColorMap)(h,f,1,1,0,1)}if((0,a.drawColorMapSingle)(h,f,y),y.enable(y.BLEND),L.length>0){var R=(0,u.default)(l.GLctx.Texture,y);for(E=0;E<L.length;E++){var O=v[E];w=L[E],i.default.addGL(y,R,w,O.posx-o-.5*w.w*m.zoomTX,O.posy-p-40,e)}}}return"spaceTurrets"}}.apply(t,a),void 0===n||(e.exports=n)},8927:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(4157),r(8684)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRadialGradientTexture=void 0,r=o(r),a=o(a);var n={};t.createRadialGradientTexture=function(e,t,o,i,s,u,l){void 0===l&&(l=!1);var A="".concat(e).concat(o).concat(t).concat(i).concat(s).concat(u);if(l){var c=n[A];if(c)return c}var d=document.createElement("canvas");d.height=s,d.width=s;var p=d.getContext("2d"),f=.5*s,h=p.createRadialGradient(f,f,0,f,f,f);h.addColorStop(0,"rgba(".concat(e,", ").concat(o,", ").concat(t,", ").concat(i,")")),h.addColorStop(1,"Enable"===u?"rgba(0, 0, 0, 1)":"rgba(0, 0, 0, 0)"),p.fillStyle=h,p.fillRect(0,0,s,s);var v=r.default.create("texture1",d,!0,(0,a.default)().global_gl);return l&&(n[A]=v),v}}.apply(t,a),void 0===n||(e.exports=n)},6702:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(1706),r(484)],n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n),new i.Rectangle(0,0,0,0),new i.Rectangle(0,0,0,0),t.default=function(e){e.gl,e.game,e.SX,e.SY,e.SW,e.SH}}.apply(t,a),void 0===n||(e.exports=n)},265:function(e,t,r){var a,n,o,i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},s=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&s(t,e,r[a]);return u(t,e),t}),A=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function i(e){try{u(a.next(e))}catch(e){o(e)}}function s(e){try{u(a.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((a=a.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var r,a,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(r=1,a&&(n=2&s[0]?a.return:s[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;switch(a=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(454),r(2965),r(840),r(7899),r(2993),r(6039),r(4663),r(3376),r(9894),r(6039),r(1706),r(2710),r(9752),r(2710),r(3700),r(2993),r(2512),r(9271),r(1257),r(6043),r(1598),r(737),r(7899),r(4077),r(6651),r(7757),r(199),r(1321),r(568),r(4077),r(2093),r(5345),r(6652),r(686),r(454),r(2965),r(840),r(2381),r(4252),r(3702),r(2122),r(1784),r(4964),r(7967),r(9733),r(5308),r(2608),r(556),r(3128),r(3781)],n=function(e,t,r,a,n,o,s,u,p,f,h,v,g,y,m,_,x,S,T,E,M,b,I,L,P,w,R,O,C,D,G,N,B,F,V,k,X,H,U,Y,W,j,q,z,K,Z,Q,J,$,ee,te,re){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=d(r),a=d(a),n=d(n),s=d(s),u=d(u),p=d(p),f=d(f),h=d(h),y=l(y),m=d(m),T=d(T),M=d(M),L=d(L),R=d(R),O=d(O),C=l(C),D=d(D),Y=d(Y),W=d(W),j=d(j),q=d(q),z=d(z),K=d(K),Z=d(Z);var ae=[];ae[13]=D.default,ae[20]=h.default,ae[21]=Y.default,ae[11]=O.default,ae[14]=W.default,ae[15]=j.default,ae[16]=q.default,ae[17]=z.default,ae[18]=K.default;var ne=window.innerWidth,oe=window.innerHeight,ie=10*ne,se=10*oe,ue=ne,le=oe,Ae=(0,M.default)(ne,oe),ce=null,de=null,pe=null,fe=null,he=null;window.onresize=function(){(0,C.default)().engine.game.loadscreen&&(window.location.href=window.location.href),setTimeout((function(){window.innerWidth===ue&&window.innerHeight===le?((0,w.LOG_GL_FIXED_FORCED)("RESOLUTION OK","MESSAGE"),setTimeout((function(){(0,w.LOG_GL_CLEAR_ALL)()}),2e3)):(0,w.LOG_GL_FIXED_FORCED)("RESOLUTION CHANGE NOT SUPPORTED","ERROR"),(0,C.default)().engine.game.resW=window.innerWidth,(0,C.default)().engine.game.resH=window.innerHeight,(0,C.default)().engine.game.currentResW=window.innerWidth,(0,C.default)().engine.game.currentResH=window.innerHeight,(0,C.default)().engine.game.SW=window.innerWidth,(0,C.default)().engine.game.SH=window.innerHeight,(0,C.default)().engine.SW=window.innerWidth,(0,C.default)().engine.SH=window.innerHeight,(0,C.default)().gui.SW=window.innerWidth,(0,C.default)().gui.SH=window.innerHeight,n.default.resize((0,C.default)().engine),a.default.resize((0,C.default)().engine);var e=(0,L.default)((0,C.default)().engine);e&&(e.SW=window.innerWidth,e.SH=window.innerHeight);var t=document.getElementById("stage");t.width=window.innerWidth,t.height=window.innerHeight,de.game.zoomTX=de.SW/de.game.resW,de.game.zoomTXinverted=de.game.resW/de.SW,(0,g.zoom)((0,C.default)().gui,!0)}),50)};var ve=!0,ge=!0;t.default=function(){return A(void 0,void 0,void 0,(function(){var e,t,a,n,o,s,l,A,d;return c(this,(function(c){switch(c.label){case 0:if(e=new URLSearchParams(window.location.search),t=parseInt(e.get("level"),10)-1,null!==e.get("console"))return"tree"===e.get("console")&&(0,re.treeTest)(),console.log("console only. only static inializers."),[2];for(a in null===e.get("devproject")&&null===e.get("hotdevproject")||((0,X.setDevProjectGui)(),(0,H.setDevProjectEngine)(),(0,U.setDevProjectEngineClient)()),Ae.menuSettings)"boolean"==typeof Ae.menuSettings[a]&&(0,E.containsBool)(a)&&(Ae.menuSettings[a]=(0,E.loadBool)(a));for(a in Ae.menuSettings.debugItems)(0,E.containsBool)(a)&&(Ae.menuSettings.debugItems[a]=(0,E.loadBool)(a)||!1);return null!=e.get("debug")?(Ae.debug={},Ae.menuSettings.extensiveUI=!0):Ae.menuSettings.extensiveUI=!1,e.get("dev")&&(Ae.debug={},Ae.menuSettings.fps=!0,ge=!0),ve=!e.get("soft"),ge=!!e.get("skip"),t<ae.length&&(Ae.currentLevel=t),ve||(ie=10*ne,se=10*oe),(0,y.Log)("SW:",ne,"SH:",oe),(0,y.Log)("WW:",ie,"WH:",se),(n=document.getElementById("stage")).width=ne,n.height=oe,ve?he=(0,b.createGL)(n,Ae.menuSettings.antialiasing):((pe=n.getContext("2d")).fillStyle="black",pe.fillRect(0,0,ne,oe),fe=pe.getImageData(0,0,ne,oe)),window.addEventListener("resize",(function(){var e=window.innerWidth/n.width;Ae.resW=Ae.SW=n.width*=e,Ae.resH=Ae.SH=n.height*=e,(0,y.Log)("resolution changed",Ae.resW,Ae.resH)})),window.game=Ae,window.trees=function(){return i(i({},(0,B.getQuadTreesObj)()),{spaceDust:(0,F.GetSpaceDustTree)(),bats:(0,V.getSpaceBatTree)(),parts:(0,k.GetPartsTree)()})},ce=(0,I.createDefaultGuiCTX)(Ae,ie,se,he,pe,fe,fe?fe.data:new Uint8ClampedArray(0)),de=(0,I.createDefaultEngineCTX)(Ae,ie,se,!1,!1),(0,C.setGlobalContexts)(de,ce),(0,u.default)(de,ce),(0,S.addKeyMapperEvents)(),(0,r.default)(ce),o=function(e){Z.default.createUnitializedTextBuffers((function(t,r,a){(0,N.LOG_GL_FIXED)(r?"DONE ("+a+")":Math.round(100*t),"TXT"),r&&e()}),he,!0)},null!==e.get("hot")?((0,J.setupFrameBuffer)(he),s=e.get("level"),l=function(){null!==s?(ye(parseInt(s,10)),setTimeout((function(){(0,x.StateMachine)((0,C.default)().engine.game.state).menuDisable()}),500)):(ye(13),setTimeout((function(){(0,x.StateMachine)((0,C.default)().engine.game.state).menuDisable()}),500))},null!==e.get("text")?o((function(){l()})):l(),[2]):null!==e.get("hotdevproject")?(ye(7),[2]):null!==e.get("hotrocks")?(ye(7),setTimeout((function(){(0,x.StateMachine)((0,C.default)().engine.game.state).menuDisable()}),500),[2]):null!==e.get("hotplayground")?(ye(8),setTimeout((function(){(0,x.StateMachine)((0,C.default)().engine.game.state).menuDisable()}),500),[2]):(de.game.loadscreen=!0,he.clear(he.COLOR_BUFFER_BIT|he.DEPTH_BUFFER_BIT),A=performance.now(),ge?[3,2]:[4,(0,ee.bootloaderPromise)(ce)]);case 1:c.sent(),(0,w.LOG_GL)("bootloader completed in "+((performance.now()-A)/1e3).toFixed(1)+" s"),c.label=2;case 2:return d=performance.now(),setTimeout((function(){Z.default.createUnitializedTextBuffers((function(e,t,r){if(performance.now()>d+(ge?100:25)&&(ge?(0,te.skipintro)(ce,e):(0,R.default)(ce,de,t?1:e),d=performance.now()),t){(0,w.LOG_GL)("boot completed in "+((performance.now()-A)/1e3).toFixed(1)+" s"),de.game.loadscreen=!1,(0,J.setupFrameBuffer)(he),(0,y.Log)("created: "+r+" char textures"),ye(13);var a=(0,E.loadStr)("version_info");a!==P.VERSION_STR&&((0,E.saveStr)("version_info",P.VERSION_STR),Ae.notifications.push({type:71,message:"new version: "+P.VERSION_STR,life:P.NOTIFICATION_LIFE}),(0,w.LOG_GL)("new version: "+P.VERSION_STR),(0,w.LOG_GL)("UPDATE: was on "+a),Ae.menuSettings.fps=!1,Ae.menuSettings.fps3dBars=!1,Ae.menuSettings.fps3dGrid=!1,Ae.debug=!1,Ae.menuSettings.debugItems.aabb=!1,Ae.menuSettings.debugItems.forces=!1,Ae.menuSettings.debugItems.predatorTarget=!1,Ae.menuSettings.debugItems.proceduralCreation=!1);var n=(0,Q.getUser)();n&&Ae.notifications.push({type:71,message:"Welcome back "+n,life:2*P.NOTIFICATION_LIFE}),(0,$.gamepadinit)()}}),he)}),0),[2]}}))}))};var ye=function(e){var t=ae[e];Ae.currentLevel=e,(0,u.default)(de,ce,t.mapSize),(0,y.Log)("mapsize set to",de.WW,de.WH),(0,y.Log)("changed to level",e),ge||!t.splash?(t.init(de),(0,v.postLeelReset)(de),Te()):(0,p.default)(t.splash,(function(){t.init(de),(0,v.postLeelReset)(de),Te()}),ce,pe,fe,ne,100),Ae.playerGuid=Ae.player[0].guid},me=0,_e=0,xe=0,Se=null,Te=function(){var e=!1,t=performance.now(),i=t,u=0,l=!1,A=function(c){var d;(0,g.zoom)(ce);var p=Ae.currentLevel,h=ae,v=h[p].assert;l=Ae.isPaused,t=i,i=performance.now(),u=i-t;var M=(0,L.default)(ce);if(M)Se=M;else{if(Se){var b=[];for(var I in Se.abilities.hash){var R=Se.abilities.hash[I];b.push(R.type)}var O=Se.weapons.all.map((function(e){return e.type})),C=Se.credits;(0,E.saveData)("continue_stats",{abilities:b,weapons:O,credits:C,pos:Se.pos.toPoint()})}if(Se&&(0,Q.getUserOnlineStatus)())if(21===Ae.currentLevel||20===Ae.currentLevel){var D=Se.score+(1e-4*Ae.clock|0);(0,w.LOG_GL)("score set for player "+D+" "+(0,Q.getUser)());try{(0,Q.setLadderValue)(de,D)}catch(e){}}else(0,w.LOG_GL)("ignore score, not correct level");Se=null}M&&(u=Math.min(u,100));var N=u*P.STEP_MULTIP;de.stepMS=u,de.step=N,de.stepREQframe=c,l||(de.stepMStotal+=u,de.frameCnt++),ce.stepMS=u,ce.step=N,ce.stepREQframe=c,l||(ce.stepMStotal+=u,ce.frameCnt++);var B=(0,s.default)(Ae.state);if(de.keyCodes=ce.keyCodes=B.game.keys,Ae.allKeyCodes=B,(0,$.gamepadUpdate)(ce),M&&(M.keyCodes=B.game.keys),e||(e=Ae.player.length>0&&v(de)),!e&&Ae.fromClock&&Ae.clock>Ae.fromClock&&(Ae.player=[]),void 0!==Ae.targetLevel)return ye(Ae.targetLevel),void(Ae.targetLevel=void 0);if(e||0===Ae.player.length){if((me+=u)>500&&Ae.SW>.15*Ae.resW){var F=.99;Ae.SX+=Ae.SW*(1-F)*.5*1,Ae.SY+=Ae.SH*(1-F)*.5*1,Ae.SW*=1*F,Ae.SH*=1*F,(0,g.zoom)(ce)}var V=(0,G.getRagDollPos)();if(V&&(Ae.SX=V.x-.5*Ae.SW,Ae.SY=V.y-.5*Ae.SH),e&&(Ae.level_completed=!0),me>o.LEVEL_COMPLETION_TIMEOUT)return me=0,e?((0,y.Log)("level asserted:",Ae.currentLevel),void ye(Ae.currentLevel+1)):((0,y.Log)("level failed:",Ae.currentLevel),ye(13),void(0,x.StateMachine)(Ae.state).menuActivate())}if(Ae.debug)l||(a.default.update(de),(X=h[p].camera)&&X(ce),n.default.update(de));else try{l||(a.default.update(de),(X=h[p].camera)&&X(ce),n.default.update(de))}catch(e){if(_e++,(0,w.LOG_GL_FIXED_FORCED)(_e,"engine/client error "+(null!==(d=null==e?void 0:e.message)&&void 0!==d?d:e)),(0,_.Err)(JSON.stringify(e.stack)),o.IS_DEV)throw e;(0,y.ForceOpen)(),Ae.performance.engine=[],console.error(e)}de.game.zoomTX=de.SW/de.game.resW,de.game.zoomTXinverted=de.game.resW/de.SW;var k=Ae.player[0];if(k?(ce.SX=de.SX=Ae.SX=k.SX,ce.SY=de.SY=Ae.SY=k.SY):(ce.SX=de.SX=Ae.SX,ce.SY=de.SY=Ae.SY),ce.SW=de.SW=Ae.SW,ce.SH=de.SH=Ae.SH,Ae.debug)(X=h[p].camera)&&X(ce),(0,r.default)(ce),(H=h[p].gui)&&H(ce);else try{var X,H;ve&&((X=h[p].camera)&&X(ce),(0,r.default)(ce),(H=h[p].gui)&&H(ce))}catch(e){xe++,(0,w.LOG_GL_FIXED_FORCED)(xe,"gui error "+e.message),(0,_.Err)(JSON.stringify(e.stack)),(0,y.ForceOpen)(),Ae.performance.gui=[],(0,w.LOG_GL_FIXED_FORCED)(_e,"engine/client error "+e.message),console.error(e)}ve&&((0,m.default)(y.default,ce,Ae.performance.gui,"gui"),(0,f.default)(ce)),(0,T.default)(Ae),Ae.eventMap={},(0,S.resetKeyCodes)(!1),requestAnimationFrame(A)};setTimeout((function(){return A(0)}),Ae.testMode?500:0)}}.apply(t,a),void 0===n||(e.exports=n)},2608:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7899),r(737),r(2993)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gamepadUpdate=function(e){var t=e.game;if(t.currentLevel>=13)for(var o in function(e){for(var t=navigator.getGamepads(),a=0,n=0;n<t.length;n++)t[n]&&t[n].index in i&&(i[t[n].index]=t[n],a++);s<a?e.notifications.push({life:3*r.NOTIFICATION_LIFE,type:71,message:"gamepad connected"}):s>a&&e.notifications.push({life:3*r.NOTIFICATION_LIFE,type:71,message:"gamepad disconnected"}),s=a}(t),i){var u=i[o],l=u.axes,h=t.allKeyCodes.game.keys,v=u.buttons,g=0,y=0,m=0,_=0,x=0,S=0,T=0,E=0,M=0,b=0,I=0,L=0,P=0,w=0,R=0,O=0,C=0;u.id.includes("STANDARD GAMEPAD")?(w=v[7].value,R=v[6].value,O=l[0]<-.1?-1*l[0]:0,C=l[0]>.1?l[0]:0,L=v[12].value,P=v[13].value,b=v[14].value,I=v[15].value,S=v[3].value,T=v[8].value,E=v[9].value,M=v[16].value,g=v[4].value,y=v[5].value,m=v[0].value,_=v[1].value,x=v[2].value):(w=.5*(l[4]+1),R=.5*(l[3]+1),O=l[0]<-.1?-1*l[0]:0,C=l[0]>.1?l[0]:0,g=v[6].pressed?1:0,y=v[7].pressed?1:0,m=v[0].pressed?1:0,_=v[1].pressed?1:0,x=v[3].pressed?1:0,S=v[4].pressed?1:0,T=v[10].pressed?1:0,E=v[11].pressed?1:0,M=v[12].pressed||v[12].touched?1:0,b=l[9]>.7&&l[9]<.8?1:0,I=l[9]<-.4&&l[9]>-.5?1:0,L=l[9]<-.9?1:0,P=l[9]>.1&&l[9]<.2?1:0);var D=0===c?b:0,G=0===d?I:0,N=0===p?L:0,B=0===f?P:0;if(c=b,d=I,p=L,f=P,t.state.menu.active)t.allKeyCodes.menu.keys.UP=N,t.allKeyCodes.menu.keys.DOWN=B,t.allKeyCodes.menu.keys.RETURN=m,t.allKeyCodes.menu.keys.ESCAPE=_;else{M&&(t.allKeyCodes.currentKeyCode=n.Keys.ESCAPE),h.STRAFELEFT=g,h.STRAFERIGHT=y,h.PRIMARY_WEAPON=m,h.SECONDARY_WEAPON=_,h.AUX_WEAPON=x,h.PRIMARY_ABILITY=S,h.SECONDARY_ABILITY=T,h.AUX_ABILITY=E;var F=(0,a.default)(e);if(F){var V=[];F.weapons.primary.types.length>1&&V.push("TOGGLE_PRIMARY_WEAPON"),F.weapons.secondary.types.length>1&&V.push("TOGGLE_SECONDARY_WEAPON"),F.weapons.aux.types.length>1&&V.push("TOGGLE_AUX_WEAPON"),F.abilities.primary.types.length>1&&V.push("TOGGLE_PRIMARY_ABILITY"),F.abilities.secondary.types.length>1&&V.push("TOGGLE_SECONDARY_ABILITY"),F.abilities.aux.types.length>1&&V.push("TOGGLE_AUX_ABILITY"),1===G?A++:1===D&&A--,A<0?A=V.length-1:A>V.length-1&&(A=0),h[V[A]]=D||G||N||B?1:0}h.UP=w,h.DOWN=R,h.LEFT=O,h.RIGHT=C}}},t.gamepadinit=function(){window.addEventListener("gamepadconnected",u),window.addEventListener("gamepaddisconnected",l)},a=o(a);var i={},s=0;function u(e){i[e.gamepad.index]=e.gamepad}function l(e){delete i[e.gamepad.index]}var A=0,c=0,d=0,p=0,f=0}.apply(t,a),void 0===n||(e.exports=n)},2993:(e,t,r)=>{var a,n;a=[r,t,r(8808),r(3700),r(4307)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addKeyMapperEvents=t.resetKeyCodes=t.inGameKeyCodes=t.Keys=void 0,t.Keys={LEFT:37,UP:38,RIGHT:39,DOWN:40,PRIMARY_WEAPON:32,SECONDARY_WEAPON:78,AUX_WEAPON:77,TOGGLE_PRIMARY_WEAPON:72,TOGGLE_SECONDARY_WEAPON:74,TOGGLE_AUX_WEAPON:75,PRIMARY_ABILITY:90,SECONDARY_ABILITY:88,AUX_ABILITY:67,TOGGLE_PRIMARY_ABILITY:65,TOGGLE_SECONDARY_ABILITY:83,TOGGLE_AUX_ABILITY:68,STRAFELEFT:81,STRAFERIGHT:87,BACKSPACE:8,TILDE:220,DELETE:46,RETURN:13,SHIFT:16,CAPSLOCK:20,ALT:18,HOME:35,END:36,ESCAPE:27,INTERACT:69};var o={};for(var i in t.Keys)o[t.Keys[i]]&&console.error("duplicate key",t.Keys[i],i),o[t.Keys[i]]=i;var s=function(e,t,a){var i=c.keys,s=c.mode===r.KeyTypeMode.PLAYING?n.REVERSE_IN_GAME_KEY_BINDING_TRANSLATIONS[t]:t,u=o[s],l=i[u];void 0!==l?(c.mode===r.KeyTypeMode.TYPEING&&(a?!0===l?i[u]=null:!1===l&&(i[u]=1):i[u]=0),c.mode===r.KeyTypeMode.PLAYING&&(i[u]=a)):c.charCodeString=a?e:null,A.currentKeyCode=1===a?s:-1,A.currentKeyString=1===a?e:null},u={keys:{TILDE:0,BACKSPACE:0,DELETE:0,RETURN:0,UP:0,DOWN:0,LEFT:0,RIGHT:0,HOME:0,END:0,ESCAPE:0,SHIFT:0,CAPSLOCK:0,ALT:0,ALTGR:0},ignores:[t.Keys.SHIFT,t.Keys.CAPSLOCK,t.Keys.ALT],charCodeString:null,mode:r.KeyTypeMode.TYPEING},l={keys:{LEFT:0,UP:0,RIGHT:0,DOWN:0,RETURN:0,ESCAPE:0,BACKSPACE:0},ignores:[],charCodeString:null,mode:r.KeyTypeMode.TYPEING};t.inGameKeyCodes={keys:{LEFT:0,UP:0,RIGHT:0,DOWN:0,PRIMARY_WEAPON:0,SECONDARY_WEAPON:0,AUX_WEAPON:0,TOGGLE_PRIMARY_WEAPON:0,TOGGLE_SECONDARY_WEAPON:0,TOGGLE_AUX_WEAPON:0,PRIMARY_ABILITY:0,AUX_ABILITY:0,SECONDARY_ABILITY:0,TOGGLE_PRIMARY_ABILITY:0,STRAFELEFT:0,STRAFERIGHT:0,TOGGLE_SECONDARY_ABILITY:0,TOGGLE_AUX_ABILITY:0,INTERACT:0},ignores:[],charCodeString:null,mode:r.KeyTypeMode.PLAYING};var A={game:t.inGameKeyCodes,menu:l,console:u,currentKeyCode:-1,currentKeyString:null},c=null;t.resetKeyCodes=function(e){return function(e,t){if(e&&e.mode===r.KeyTypeMode.TYPEING){for(var a in e.keys)e.keys[a]=t;e.charCodeString=null,A.currentKeyCode=-1,A.currentKeyString=null}}(c,e)},t.default=function(e){var r=null;switch(e.keyInput.target){case a.KeyInputType.CONSOLE:r=u;break;case a.KeyInputType.GAME:r=t.inGameKeyCodes;break;case a.KeyInputType.MENU:r=l}return r!==c&&(console.log("switched keyset to ",e.keyInput.target),c=r,s(null,A.currentKeyCode,1)),A},t.addKeyMapperEvents=function(){window.addEventListener("keydown",(function(e){s(e.key,e.keyCode,1)})),window.addEventListener("keyup",(function(e){s(e.key,e.keyCode,0)}))}}.apply(t,a),void 0===n||(e.exports=n)},6515:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(9271),r(9262),r(7350),r(3665),r(7899),r(3481),r(5587),r(6039),r(199)],n=function(e,t,r,a,n,u,l,A,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStorageUsedKB=t.getGameSaves=t.loadGame=t.deleteSavedGame=t.saveGame=void 0,d=s(d),p=s(p);var f="descriptor",h="saveSize",v="gameSaves",g=function(e,t){var r={life:l.NOTIFICATION_LIFE,type:71,message:t};e.notifications.unshift(r)},y=function(e){for(var t in e){var r=e[t];if(r)if(r.isVector)e[t]=new a.Vector(r.x,r.y,r.id);else if(r.isMuscleSegment){var o=r,i=new u.MuscleSegment(o.width,new n.Muscle(o.leftMuscle.minLength,o.leftMuscle.maxLength),new n.Muscle(o.rightMuscle.minLength,o.rightMuscle.maxLength),o.centerX,o.centerY,o.angle,o.desiredAngleVsTarget,o.ownerguid);e[t]=i}else"object"==typeof e[t]&&y(e[t])}};t.saveGame=function(e,t){try{var a=t||"LVL:"+e.currentLevel+" t:"+(0,A.msToTime)(e.clock),n=(0,r.loadData)(v)||[];if(n.filter((function(e){return e===a})).length>0)return void g(e,"ALREADY SAVED AT THIS LOCATION");n.push(a),e.allKeyCodes,e.notifications,e.performance,e.resH,e.resW,e.currentResH,e.currentResW,e.state,e.SW,e.SH,e.playerGuidHash;var o=i(e,["allKeyCodes","notifications","performance","resH","resW","currentResH","currentResW","state","SW","SH","playerGuidHash"]),s=(0,r.loadData)(f)||(0,c.getDescriptor)(),u=(0,c.pack)(o,s,!0),l=u.result,d=(0,r.saveData)(a,l),p=(0,r.saveData)(f,u.descriptor);console.log("Game save",d,f,p);var y=((0,r.loadInt)(h)||0)+d;console.log("save int",h,y),(0,r.saveInt)(h,y),(0,r.saveData)(v,n),g(e,"GAME SAVED")}catch(t){console.error(t),g(e,"UNABLE TO SAVE GAME")}},t.deleteSavedGame=function(e,t){var a=(0,r.loadData)(v)||[];a.push(t);var n=a.filter((function(e){return e!==t})),o=(0,r.loadData)(t);if(o){JSON.stringify(o).length;var i=(0,r.loadInt)(h);(0,r.saveInt)(h,i)}(0,r.saveData)(t,{deletedGame:!0}),(0,r.saveData)(v,n),g(e,"SAVE DELETED")},t.loadGame=function(e,t){var a=t.game,n=o({},a),i=(performance.now(),(0,r.loadData)(e)),s=(0,c.unpack)(i,(0,r.loadData)(f),(function(){}));for(var u in console.warn("hardcoded mapsize in loadgame"),(0,d.default)((0,p.default)().engine,t,(function(e){return{WW:16e3,WH:16e3}})),y(s),s)a[u]=s[u];a.SW=n.SW,a.SH=n.SH,a.resH=n.resH,a.resW=n.resW,performance.now(),g(a,"GAME LOADED")},t.getGameSaves=function(){return(0,r.loadData)(v)||[]},t.getStorageUsedKB=function(){return Math.ceil(((0,r.loadInt)(h)||0+JSON.stringify((0,r.loadData)(f)||{}).length)/1e3)}}.apply(t,a),void 0===n||(e.exports=n)},6651:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(7967),r(7899),r(454),r(7757),r(4227),r(3348),r(8443),r(1363),r(6306),r(7818),r(3101),r(2403),r(9458),r(5750),r(6052),r(1702),r(9642),r(3351),r(5936),r(2261),r(6039),r(2810),r(1029),r(7125),r(2036),r(4077)],n=function(e,t,r,a,n,o,i,s,A,c,d,p,f,h,v,g,y,m,_,x,S,T,E,M,b,I,L,P,w,R){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=u(a),n=l(n),i=l(i),s=l(s),A=l(A),c=l(c),d=l(d),p=l(p),f=l(f),h=l(h),v=l(v),g=l(g),y=l(y),m=l(m),_=l(_),x=l(x),S=l(S),T=l(T),E=l(E),b=l(b),I=l(I),L=l(L),P=l(P),w=l(w);var O=null,C=null,D=null,G=null,N=null,B=["DON'T FOLLOW US","DEATH IS NEAR","IT'S NOT WHAT YOU THINK IT IS","THIS IS NOT A DISTRESS CALL, IT'S A WARNING","THERE BE SPACE SNAKES","LET'S GET THE FUCK OUT OF HERE","SPACE WAS NEVER MEAN'T FOR US","LEAVE THIS PLACE","REST IN PIECES","STAY IN THE LIGHT"],F=[m.default,y.default,v.default,h.default,f.default,p.default,s.default,A.default,c.default,d.default,g.default,_.default,x.default,S.default,T.default,E.default,I.default,L.default,P.default,w.default],V=!1,k=!1,X=null,H=!0;t.default=function(e,t,s,u){void 0===u&&(u=!1);var l=e.SW,A=e.SH,c=e.gl;if(c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),!H){if(k||(e.step=t.step=1,e.stepMS=t.stepMS=1e3/60,e.SW=t.SW=window.innerWidth,e.SH=t.SH=window.innerHeight,k=!0),!X)return void(X=F[Math.round(Math.random()*F.length)]);if(e.game.currentLevel=12,!V)return X.init(t),V=!0,void(e.game.player[0]&&(e.SX=t.SX=e.game.player[0].pos.x-500,e.SY=t.SY=e.game.player[0].pos.y-300));1!==s?(X.camera&&X.camera(e),(0,i.default)(e),X.assert(t),X.gui(e)):((0,b.default)(t,e),(0,R.LOG_GL_CLEAR)())}u||(H=!1);var d=[],p=[];O||(O=n.default.create("FAR FROM GRACE".split("").join("  "),o.TEXT_SIZE_MEDIUM,"w",!1,!0),C=n.default.create("Klimtachakka @ gmail.com",26,"w",!1,!0),D=n.default.create("DORITO ENGINE |>",20,"w",!1,!0),G=n.default.create("VERSION "+o.VERSION_STR,16,"w",!1,!0),N=n.default.create(B[Math.floor(Math.random()*B.length)],32,"r",!1,!0));var f=.5*O.w,h=.5*l-.5*f,v=.9*A;(0,r.line2Poly)(h,v-4,h,v+4,d,1),(0,r.line2Poly)(h+f,v-4,h+f,v+4,d,1),(0,r.line2Poly)(h,v-4,h+f,v-4,d,1),(0,r.line2Poly)(h,v+4,h+f,v+4,d,1),(0,r.line2Poly)(h+2,v,h+f*s-2,v,d,2),(0,r.addToColorMap)(p,d,1,1,1,1),(0,r.drawColorMap)(p,d,(0,a.default)(a.GLctx.Vertices,c),c);var g=s>.95?(0,a.default)(a.GLctx.TextureDist,c):(0,a.default)(a.GLctx.Texture,c);n.default.addGL(c,g,C,.05*l,.95*A,e),n.default.addGL(c,g,D,.95*l-D.w,.95*A,e),n.default.addGL(c,g,G,.5*l-.5*G.w,.95*A,e),d=[],p=[],c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA),(0,r.fillPoly)(l,0,0,l,A,d);var y=s<.5?(0,M.map)(s,0,.1,0,1,!0,!0):(0,M.map)(s,.8,1,0,1,!0,!1);(0,r.addToColorMap)(p,d,0,0,0,y),(0,r.drawColorMap)(p,d,(0,a.default)(a.GLctx.Vertices,c),c),c.blendFunc(c.ONE,c.ONE),g=s>.9||s<.03?(0,a.default)(a.GLctx.TextureDist,c):(0,a.default)(a.GLctx.Texture,c);var m=s>.94;n.default.addGL(c,g,s>.94?N:O,.5*l-.5*(m?N.w:O.w),A*(m?.45:.06),e)}}.apply(t,a),void 0===n||(e.exports=n)},556:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7561),r(1706),r(7967),r(7899),r(5762),r(9733)],n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootloader=t.bootloaderPromise=void 0,a=u(a),n=l(n),i=u(i);var A=o.TEXT_SIZE_SMALL,c=[],d=[["/","-","\\","-","***","**","**","bootloader","***","**","*","initalizing","loading","system online"],["loading pilot..",(0,s.getUser)()?"pilot "+(0,s.getUser)().toLocaleLowerCase()+" detected.":"pilot not recognized..."],[(0,s.getUser)()?"status: greenhorn":"status: unknown"],["***","**","*","getting directives","directives established"],["***","**","*","verifying endpoints","secure connection found"],["connecting","/","-","\\","-","***","**","*","/","-","\\","-","connected"],["base systems clear","***","**","*","loading base system directives.....","base system loaded"],["loading weapons","***","**","*","weapons loaded"],["arming weapons","weapons armed"],["scanning world","searching for entry","no safe entry found"],["checking for hostilities","no safe path found","retrying...","no safe path found","ERROR"],["ERROR","route error"],["ERROR","retrying","retrying","route error"],["ERROR","retrying","retrying","retrying","route error"],["ERROR","route error","plan b ovveride"],["ERROR","ERROR","CRITICAL ERROR:: NO SAFE ENTRY FOUND"],["ERROR","ERROR","CRITICAL ERROR:: NO SAFE LANDING COORDINATES"],["ERROR","ERROR","CRITICAL ERROR:: HOSTILES IN ALL AREAS"],["ERROR","ERROR","CRITICAL ERROR:: THREAT LEVEL MAX"],["ERROR","ERROR","CRITICAL ERROR:: ESTIMATED MISSION SUCCESS RATE 0.0%"],["ERROR","ERROR","CRITICAL ERROR:: ALLIES IN AREA :: UNKNOWN"],["ERROR","ERROR","CRITICAL ERROR:: OVERRIDE"],["ERROR","ERROR","CRITICAL ERROR:: UNKNOWN ERROR"],["ERROR","ERROR","CRITICAL ERROR:: OVERRIDE ERROR"],["ERROR","ERROR","CRITICAL ERROR:: MISSION START"],["ERROR","ERROR","CRITICAL ERROR:: BREACHING"],["ERROR","INITIATING.........."]],p=d.map((function(e){return 0})),f=d.map((function(e){return 0}));t.bootloaderPromise=function(e){return new Promise((function(r){var a=setInterval((function(){(0,t.bootloader)(e)&&(clearInterval(a),r())}),25)}))};var h=0,v=!1,g=0,y=.2;t.bootloader=function(e){var t=e.gl,s=e.SW,u=e.SH;if(h++,c=[],h<8)return(0,r.fillPoly)(s,0,.5*(u-u*g),s,u*g,c),(0,a.default)(a.GLctx.Vertices,t),(0,r.drawColor)(c,t,0,y+.4*(1-g),0,0),g+=.1,7===h&&(g=1),!1;if(y-=.004,(0,r.fillPoly)(s,0,.5*(u-u*g),s,u*g,c),(0,a.default)(a.GLctx.Vertices,t),(0,r.drawColor)(c,t,.4*(1-g),y,0,0),t.blendFunc(t.ONE,t.ONE),v&&(function(e,t,r){void 0===r&&(r=148);var a=e.SW,n=e.SH;(0,i.setDistBoxColorOverride)({a:.9,b:.1,g:.1,r:.9});for(var o=0;o<r;o++){var s=150+120*Math.random(),u=a,l=n;(0,i.addDistBox)(0+u*Math.random()-.5*s,0+Math.random()*l,s,1*(17+60*Math.random()),0+u*Math.random()-.5*s,0+Math.random()*l,120,100,Math.random()>.5?30+30*Math.random():-30*Math.random()-30,0,0)}t&&(0,i.default)(e)}(e,g>.5),(g-=.03+.06*g)<0))return(0,i.setDistBoxColorOverride)(null),!0;if(!v)for(var l=0;l<d.length;l++){l===d.length-1&&(v=!0);var m=d[l],_=p[l],x=f[l],S=n.default.create(m[_].substring(0,x),o.TEXT_SIZE_SMALL,"ERROR"===m[0]?"r":"g",!1,!0);if(n.default.addGL(t,(0,a.default)(a.GLctx.Texture,t),S,A,A*(l+1),e),f[l]=f[l]+Math.max(1,Math.round(.4*l)),_<d[l].length-1){x>m[_].length&&_<d[l].length-1&&(_<d[l].length-1&&(f[l]=0),p[l]=_+1),l>9&&(d.shift(),p.shift(),f.shift());break}}return!1}}.apply(t,a),void 0===n||(e.exports=n)},3128:(e,t,r)=>{var a,n;a=[r,t,r(7899),r(7561)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skipintro=void 0,r.TEXT_SIZE_SMALL;var n=[];t.skipintro=function(e,t){var r=e.gl,o=e.SW,i=e.SH;r.blendFunc(r.ONE,r.ONE),(0,a.line2Poly)(0,.5*i,o*t,.5*i,n,20),(0,a.drawColor)(n,r,0,1,0,1)}}.apply(t,a),void 0===n||(e.exports=n)},7708:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(484),r(737),r(9262),r(2261),r(3578),r(2125),r(6990),r(6203),r(8260),r(4077),r(2093)],n=function(e,t,r,a,n,s,u,l,A,c,d,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectorSetup=t.resetDirector=void 0,a=i(a),l=i(l),A=i(A),c=i(c),d=i(d);var h=10,v=30,g=9,y=11,m=40,_=1e4,x=_,S=0,T=new r.Rectangle(0,0,0,0),E=0;t.resetDirector=function(){E=_},t.DirectorSetup=function(e){v=e.enemies,g=e.spacesnakes,y=e.spacesquids,h=e.spaceSpiders,m=e.npcs,_=e.campingTimeout,S=e.destroyers};var M=function(e,t,a){for(var n=a.SX,o=a.SY,i=a.SW,s=a.SH,u=new r.Rectangle(n-800,o-800,i+1600,s+1600),l=3e3,A=null,c=(0,f.getQuadTreesObj)();l<.5*a.WW;){for(var d=c.queryTreesVec([e],t,l,l),p=0;p<d.length;p++){var h=d[p];if(!u.intersectsPoint(h.pos)){A=h;break}}if(A)break;l+=3e3}return A};t.default=function(e){var t,r,i,f,b,I=e.SX,L=e.SY,P=e.SW,w=e.SH,R=e.WW,O=e.WH,C=e.game,D=e.stepMS;if(C.isPaused)return!1;var G=(0,a.default)(e);if(G){G.inSafeZone?x>100&&(x-=4):x=_,T.intersectsPoint(G.pos)?E+=D:(T.x=G.pos.x-.5*P,T.y=G.pos.y-.5*w,T.width=P,T.height=w,E=0);var N=Math.random()>.5?1.5*P:-1.5*P;if(E>x){var B;if(G.inSafeZone||Math.random()>.5)if(Math.random()>.8){if(C.spaceSnake.length>0){var F=Math.floor(Math.random()*C.spaceSnake.length),V=C.spaceSnake[F];V.restPos.setFromVec(G.pos),V.prioritzeRestposMS=3e4}}else Math.random()>.66?C.spaceSquids.length>0&&(B=M(9,G.pos,e))&&(B.restPos.setFromVec(G.pos),B.prioritzeRestposMS=3e4):C.spaceSpiders.length>0&&(B=M(10,G.pos,e))&&(B.restPos.setFromVec(G.pos),B.prioritzeRestposMS=3e4);if(C.enemies.length>0){var k=new n.Vector(N,N);k.add(G.pos);var X=C.enemies[Math.floor(Math.random()*C.enemies.length)];X.pos.setFromVec(k);var H=Math.atan2(G.pos.y-X.pos.y,G.pos.x-X.pos.x);X.angle=(0,s.normalizeRadianAngle)(H)}E=0}else for(var U=o(o(o([],C.spaceSquids,!0),C.spaceSnake,!0),C.spaceSpiders,!0),Y=0;Y<U.length;Y++){var W=U[Y];Y%2==0?W.restPos.set(0,Y*w):W.restPos.set(R,Y*w)}if(C.enemies.length<v){var j=(0,u.createEnemies)(e,5);(0,l.default)(j,I+N,L+N,300,300),(t=C.enemies).push.apply(t,j)}if(C.spaceSnake.length<g&&(r=C.spaceSnake).push.apply(r,(0,A.default)(e,1,I+N,L+2*N)),C.spaceSquids.length<y&&(i=C.spaceSquids).push.apply(i,(0,c.default)(e,1,I+N,L+N)),C.spaceSpiders.length<h&&(f=C.spaceSpiders).push.apply(f,(0,d.default)(e,1,I+N,L+N)),C.npcs.length<m&&((b=C.npcs).push.apply(b,(0,u.createNPCs)(e,1,{},-1)),(0,p.LOG_GL)("npc created @ "+(0|C.npcs[C.npcs.length-1].pos.x)+", "+(0|C.npcs[C.npcs.length-1].pos.y))),C.destroyers.length<S){var q=(0,u.createDestroyer)(e);C.anomalyPairs.length>0?q.pos.setFromVec(C.anomalyPairs[0].out.pos):q.pos.set(R-5,O-5),C.destroyers.push(q),(0,p.LOG_GL)("destroyer created @ "+(0|q.pos.x)+", "+(0|q.pos.y))}}return!1}}.apply(t,a),void 0===n||(e.exports=n)},8345:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfectionRate=void 0,t.InfectionRate=function(){return Math.random()>.96}}.apply(t,[r,t]),void 0===a||(e.exports=a)},7207:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(484),r(737),r(2261),r(3578),r(2125),r(6990),r(6203),r(8260),r(4077),r(2093),r(1330),r(7185),r(7899),r(6030),r(4077),r(9262)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f,h,v,g,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProceduralDirectorSetup=t.ProceduralResetDirector=t.getFleeDangerLifePercent=t.getFleeDangerTime=void 0,a=o(a),s=o(s),u=o(u),l=o(l),A=o(A);var m=10,_=30,x=9,S=11,T=15,E=1e4,M=E,b=0,I=(0,r.rect_pool_pop)(0,0,0,0),L=0,P=!0,w=!1,R=!1,O=!1,C=!1,D=0,G=0;t.getFleeDangerTime=function(){return 0|D},t.getFleeDangerLifePercent=function(){return G},t.ProceduralResetDirector=function(){L=E,w=!1,R=!1,O=!1,C=!1,D=2e4,G=.98},t.ProceduralDirectorSetup=function(e){_=e.enemies,x=e.spacesnakes,S=e.spacesquids,m=e.spaceSpiders,T=e.npcsPerPort,E=e.campingTimeout,b=e.destroyers};var N=function(e,t,r){if(t.length>0){var a=t[Math.floor(Math.random()*t.length)];!a.ownedByStructureGuid&&!a.ownedByStructureType&&a.fleeDangerMS<1&&((0,f.distanceBetweenVectors)(a.pos,a.restPos)>1500?(a.restPos.setFromVec(r),a.prioritzeRestposMS=2e4,(0,g.LOG_GL)((0,p.TypesToString)(a.type)+" hunts playerpos")):a.prioritzeRestposMS=0)}},B=function(e,t){var r=e.SX,a=e.SY,n=e.SW,o=e.SH,i=e.game.screen.rectSS_2000,s=o,u=0,l=0,A=Math.random(),c=4;if(t){var d=r+.5*n,p=a+.5*o;t.x>d?c=t.y>p?A>.6?3:2:A>.6?3:0:t.x<d&&(c=t.y>p?A>.6?1:2:A>.6?1:0)}else c=Math.floor(4*Math.random());switch(c){case 0:u=i.x+i.width*Math.random(),l=i.y-s;break;case 1:u=i.x-s,l=i.y+i.height*Math.random();break;case 2:u=i.x+i.width*Math.random(),l=i.y+i.height+s;break;case 3:u=i.x+i.width+s,l=i.y+i.height*Math.random()}return{x:u,y:l}},F=0,V=.1,k=0;t.default=function(e){e.SX,e.SY;var t,r,o,X,H=e.SW,U=e.SH,Y=e.game,W=e.stepMS;(0,c.LOG_GL_FIXED)(e.game.enemies.length+" / "+_,"enemies"),(0,c.LOG_GL_FIXED)(e.game.spaceSquids.length+" / "+S,"squids"),(0,c.LOG_GL_FIXED)(e.game.spaceSpiders.length+" / "+m,"spiders"),(0,c.LOG_GL_FIXED)(e.game.spaceSnake.length+" / "+x,"snakes"),(0,c.LOG_GL_FIXED)(e.game.npcs.length+" / "+T*Y.spacePorts.length+" rigs: "+Y.npcs.filter((function(e){return!!e.miningRig})).length,"npc"),(0,c.LOG_GL_FIXED)(e.game.drones.length,"drones"),(0,c.LOG_GL_FIXED)(e.game.spacePorts.length+" |cns "+e.game.spacePorts.map((function(e){return e.cannons.length})).reduce((function(e,t){return e+t}),0),"spaceports"),(0,c.LOG_GL_FIXED)(e.game.destroyers.length+" / "+b,"destroyers");var j=(0,a.default)(e),q=e.game.daylight;if(D=Math.max(D-e.stepMS/88,11e3),G=Math.max(G-15e-9*e.stepMS,.3),!q.is_night&&j)for(var z=[e.game.spaceSquids,e.game.spaceSpiders,e.game.spaceSnake],K=0;K<z.length;K++)for(var Z=z[K],Q=Z.length,J=0;J<Q;J++){var $=Z[J];if(6!==$.ownedByStructureType&&!($.fleeDangerMS>0)){var ee=(0,f.distanceBetweenVectors)($.pos,$.restPos);if(Y.screen.rectSS_2000.intersectsPoint($.restPos)){var te=j.pos,re=$.pos,ae=Math.atan2(te.y-re.y,te.x-re.x),ne=new y.Vector(4e3,0);ne.setAngle(ae+Math.PI),$.restPos=new y.Vector(ne.x,ne.y),(0,g.LOG_GL)("relocating restpos outside rect "+(0,p.TypesToString)($.type))}ee>1200&&($.prioritzeRestposMS=2e4)}}var oe=b-Y.destroyers.length;if(oe>0)for((0,g.LOG_GL)("creating "+oe+" destroyers"),K=0;K<oe;K++){var ie=B(e),se=(0,i.createDestroyer)(e,{pos:new y.Vector(ie.x,ie.y)});Y.destroyers.push(se)}(0,v.schedule)("create workers nearby",(function(){var t,r,a,n=T*Y.spacePorts.length-Y.npcs.length;if(j&&n>0){var o=null;if(j.inSafeZone){var s=(0,d.getQuadTreesObj)().query([3],j)[0];if(s){for(var u=0,l=0;l<Y.npcs.length;l++)(null===(r=null===(t=(A=Y.npcs[l]).miningRig)||void 0===t?void 0:t.base)||void 0===r?void 0:r.guid)===s.guid&&u++;u<.69*T&&(o=s)}}for((0,g.LOG_GL)("creating "+n+" workers"+(o?" near player":"")),l=0;l<n;l++){var A,c=j.inSafeZone?B(e,j.pos):B(e);(null===(a=null==(A=(0,i.createNPCs)(e,1,{pos:new y.Vector(c.x,c.y)},-1)[0])?void 0:A.miningRig)||void 0===a?void 0:a.base)&&(A.miningRig.base=o||Y.spacePorts[Math.floor(Math.random()*Y.spacePorts.length)]),Y.npcs.push(A)}}}),327),q.is_dawn&&!C&&Y.notifications.push({type:73,life:h.NOTIFICATION_LIFE,message:"Dawn is nearing, it will be daylight soon"}),R&&j&&(0,v.schedule)("worker job schedule",(function(){if((null==j?void 0:j.inSafeZone)&&Y.daylight.is_day){var e=(0,d.getQuadTreesObj)().query([3],j)[0];if(e){for(var t=0,r=[],a=0;a<Y.npcs.length;a++){var n=Y.npcs[a];n.miningRig&&n.miningRig.base&&n.miningRig.base.guid===e.guid&&(t++,r.push(n))}if(t>T+10&&Y.spacePorts.length>1)for(var o=Y.spacePorts.find((function(t){return t.guid!==e.guid})),i=T;i<r.length;i++){r[i].miningRig.base=o,(0,g.LOG_GL)("reassigning worker from players base to other");break}else if(t<T+6)for(a=0,i=0;i<Y.npcs.length;i++){var s=Y.npcs[i];if(s.miningRig&&s.miningRig.base&&s.miningRig.base.guid!==e.guid){s.miningRig.base=e,(0,g.LOG_GL)("reassigning worker from other base to players");break}}}}}),457),q.is_day&&!R&&Y.notifications.push({type:74,life:h.NOTIFICATION_LIFE,message:"Daylight is here."}),q.is_dusk&&!O&&Y.notifications.push({type:72,life:h.NOTIFICATION_LIFE,message:"It will be dark soon..."}),q.is_night&&!w&&Y.notifications.push({type:72,life:h.NOTIFICATION_LIFE,message:"The night is here..."}),w=q.is_night,C=q.is_dawn,R=q.is_day,O=q.is_dusk;var ue=(0,d.getQuadTreesObj)();if(O||w)if(Y.enemies.length<_){var le=B(e);if(0===ue.queryTreesVec([6],le,50,50).length){var Ae=(0,i.createEnemies)(e,Math.ceil(.5*(_-Y.enemies.length)));(0,s.default)(Ae,le.x,le.y,300,300),(t=Y.enemies).push.apply(t,Ae),(0,g.LOG_GL)("creating new enemy ship nearby")}}else Y.spaceSnake.length<x?(le=B(e),0===ue.queryTreesVec([6],le,50,50).length&&((0,g.LOG_GL)("creating new spacesnake nearby"),(r=Y.spaceSnake).push.apply(r,(0,u.default)(e,1,le.x,le.y)))):Y.spaceSquids.length<S?(le=B(e),0===ue.queryTreesVec([6],le,50,50).length&&((0,g.LOG_GL)("creating new spacesquid nearby"),(o=Y.spaceSquids).push.apply(o,(0,l.default)(e,1,le.x,le.y,60*Math.random()+140)))):Y.spaceSpiders.length<m&&(le=B(e),0===ue.queryTreesVec([6],le,50,50).length&&((0,g.LOG_GL)("creating new spacespider nearby"),(X=Y.spaceSpiders).push.apply(X,(0,A.default)(e,1,le.x,le.y))));if(Y.isPaused||Y.skillTree.active||Y.clock<36e4||Y.daylight.is_day)return P=!0,!1;if((F+=e.stepMS)>3e4&&(E>1e4&&(E*=.95),F=0,++k>8&&(V=1e-7*k)),P&&(Y.notifications.push({type:72,life:h.NOTIFICATION_LIFE,message:"Things will only get harder from now.."}),P=!1),j){var ce=ue.queryTreesVec([6],j.pos,j.radius,j.radius);for(K=0;K<ce.length;K++){var de=ce[K];if((0,f.distanceBetweenVectors)(de.pos,j.pos)<de.radius-900)return void(0,c.LOG_GL_FIXED)("DIRECTOR OFF","PLAYER IN ANCIENT");(0,c.LOG_GL_FIXED)("DIRECTOR ON","PLAYER IN ANCIENT")}j.inSafeZone?M>100&&(M-=4):M=E,I.intersectsPoint(j.pos)?L+=W:(I.x=j.pos.x-.5*H,I.y=j.pos.y-.5*U,I.width=H,I.height=U,L=0),(0,c.LOG_GL_FIXED)(100-Math.round(L/M*100),"Camping?"),(0,c.LOG_GL_FIXED)(M,"camp timeout T");var pe=Math.random()>.5?1.5*H:-1.5*H;if(L>M||j.inSafeZone&&L>.5*M||Math.random()<V){if(w&&(j.inSafeZone||Math.random()>.5)&&((0,g.LOG_GL)("-- camping setting targets:"),(0,d.getQuadTreesObj)(),k>2&&N(0,Y.spaceSpiders,j.pos),k>4&&N(0,Y.spaceSnake,j.pos),k>6&&N(0,Y.spaceSquids,j.pos),Y.enemies.length>0)){var fe=new y.Vector(pe,pe);fe.add(j.pos);var he=Y.enemies[Math.floor(Math.random()*Y.enemies.length)];he.pos.setFromVec(fe),ae=Math.atan2(j.pos.y-he.pos.y,j.pos.x-he.pos.x),he.angle=(0,n.normalizeRadianAngle)(ae)}L=0}}return!1}}.apply(t,a),void 0===n||(e.exports=n)},2125:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,a,n){for(var o=e.length,i=0;i<o;i++){var s=e[i];s.pos.x=Math.random()*a+t,s.pos.y=Math.random()*n+r}}}.apply(t,[r,t]),void 0===a||(e.exports=a)},9207:(e,t,r)=>{var a,n;a=[r,t,r(9262),r(6265)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createForceFromAnomaly=t.createAnomalyPair=t.createAnomaly=void 0,t.createAnomaly=function(e,t,n,o,i,s,u,l,A,c,d,p){void 0===i&&(i=1),void 0===s&&(s=510),void 0===u&&(u=!0),void 0===l&&(l=!0),void 0===A&&(A=-1),void 0===c&&(c=12),void 0===d&&(d=!0),l&&(0,a.addForce)(e.game,t,n,s,i,null,o,d,0,p?0:5e3,p?0:18e3);var f={effect:i,radius:s,pos:new r.Vector(t,n),positive:o,seedKey:A,spawnParticles:u,type:c,out:p};return(12===c||e.game.IS_PROCEDURAL)&&e.game.anomlies.push(f),f},t.createAnomalyPair=function(e,r,a,n,o,i){void 0===i&&(i=-1);var s={in:(0,t.createAnomaly)(e,r,a,!1,16,750,!0,!0,i,14,!0),out:(0,t.createAnomaly)(e,n,o,!0,16,750,!0,!0,i,13,!0)};return e.game.anomalyPairs.push(s),s},t.createForceFromAnomaly=function(e,t){(0,a.addForce)(e.game,t.pos.x,t.pos.y,t.radius,t.positive?.05*t.effect:t.effect,null,t.positive,!0,0)}}.apply(t,a),void 0===n||(e.exports=n)},6812:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(7185),r(9262),r(7899),r(5714),r(943),r(484)],n=function(e,t,r,a,n,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.test_createAsteroid=t.createAsteroidBelt=t.createSingleAsteroid=t.createDefaultResources=void 0,t.default=function(e,r,n,o,i,s){void 0===n&&(n=5),void 0===o&&(o=400),void 0===i&&(i={}),void 0===s&&(s=!1);for(var u=e.WW,l=e.WH,A=[],c=0;c<r;c++){var d=s?new a.Vector(0,0):new a.Vector(10*(Math.random()-.5),10*(Math.random()-.5));s||(d.setLength(1*Math.random()),d.setAngle((Math.random()-.5)*(2*Math.PI)));var p=Math.floor((o-n)*Math.random()*Math.random()*Math.random()+n),f=(0,t.createSingleAsteroid)(p,new a.Vector(u*Math.random(),l*Math.random()),d,i);A.push(f)}return A},t.createDefaultResources=function(e,t){var r=0,a=0,n=0;switch(t){case 4:r=Math.random()*e*2|0,n=0|(Math.random()>.91?Math.random()*e*.42:0),a=0|(Math.random()>.93?Math.random()*e*.31:0);break;case 11:r=Math.random()*e*2.6|0,n=0|(Math.random()>.21?Math.random()*e*2.19:0),a=0|(Math.random()>.3?Math.random()*e*2.16:0);break;case 3:r=Math.random()*e*5|0,n=Math.random()*e*.1|0,a=Math.random()*e*.02|0}return{iron:r,minerals:a,platinum:n}},t.createSingleAsteroid=function(e,u,l,A){void 0===A&&(A={});var c=A.pos||u,d=o(o(o({},(0,i.setImovableDefaults)((0,s.BallCreator)(c.x,c.y,e,Math.pow(e,3)))),{specular:.7,isLV426:!1,netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},type:4,subType:4,collType:2,guid:(0,r.getGuid)(),radius:e,vel:new a.Vector(l.x,l.y),sides:Math.max(7,Math.floor(e/20)),angle:0,angleVel:.01*(1-2*Math.random()),life:e*n.ASTEROID_RADIUS_LIFE_MULTIP,oLife:e*n.ASTEROID_RADIUS_LIFE_MULTIP,acc:new a.Vector(0,0),opos:{x:c.x,y:c.y},armor:{type:4,value:1},resources:(0,t.createDefaultResources)(A.radius||e,4)}),A);return d.opos.x,d};var l=new u.Rectangle(0,0,0,0);t.createAsteroidBelt=function(e,r,n,o,i,s,A,c,d,p,f){if(void 0===s&&(s=.05*Math.PI),void 0===A&&(A=40),void 0===c&&(c=280),void 0===d&&(d=180),void 0===p&&(p=1),p<1||p>2)throw"illeagal tightness @ createAsteroidBelt";var h=[],v=c-A,g=new a.Vector(0,0),y=new a.Vector(0,0),m=r,_=r,x=n,S=n,T=function(r,a,n,o,i,u,c,f,h){for(var v=[],E=0,M=0;M<i;M++){var b=M/i,I=(i-M)/i,L=A+e()*c*I;if(E+=L*p+1,g.setLength(E),g.setAngle(o+s*b*(M%2==0?1:-1)),n||g.mult(-1),g.addXY(r,a),g.x>_?_=g.x:g.x<m&&(m=g.x),g.y>S?S=g.y:g.y<x&&(x=g.y),h&&(l.x=g.x-L,l.y=g.y-L,l.width=2*L,l.height=2*L,!h.containsRect(l)))return[];if(v.push((0,t.createSingleAsteroid)(L,g,{x:.1,y:.1})),u&&e()>.8){y.set(L,0),y.setAngle(o+(e()>.5?-1:1)*Math.PI*.5+s*(e()-.5)),g.add(y);var P=e()>.5;v.push.apply(v,T(g.x,g.y,P,y.getAngle()+.2*Math.PI*(e()-.5),Math.floor(.1*d*e()+1),!1,.5*c,f,h))}}return v};return h.push.apply(h,T(r,n,!0,i,d/5,!0,v,o,f)),h.push.apply(h,T(r,n,!1,i,d/5,!0,v,o,f)),{belt:{x:r,y:n,rect:new u.Rectangle(m,x,_-m,S-x),radius:Math.max(_-m,S-x),seedkey:0,type:5},asteroids:h}},t.test_createAsteroid=function(e,u,l,A,c,d){var p=o(o({specular:.7,isLV426:Math.random()<.01,netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},type:4,collType:2,guid:(0,r.getGuid)(),pos:new a.Vector(u,l),radius:d,vel:new a.Vector(A,c),sides:Math.max(7,d/20),angle:0,angleVel:.01*(1-2*Math.random()),life:d*n.ASTEROID_RADIUS_LIFE_MULTIP},(0,i.setImovableDefaults)((0,s.BallCreator)(u,l,d,Math.pow(d,3)))),{armor:{type:4,value:1},resources:(0,t.createDefaultResources)(0,4)});e.push(p)}}.apply(t,a),void 0===n||(e.exports=n)},1598:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(2993)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDefaultEngineCTX=t.createDefaultGuiCTX=void 0,r=o(r),t.createDefaultGuiCTX=function(e,t,a,n,o,i,s,u){var l=(0,r.default)(e.state);return{IS_MULTIPLAYER:u,step:0,stepMS:0,stepREQframe:0,stepMStotal:0,frameCnt:0,ctx:o,frame:s,imageData:i,game:e,SW:e.SW,SH:e.SH,WW:t,WH:a,SX:5e3,SY:2e3,gl:n,keyCodes:l.game.keys}},t.createDefaultEngineCTX=function(e,t,a,n,o){var i=(0,r.default)(e.state);return{IS_MULTIPLAYER:n,IS_SERVER:o,SW:e.SW,SH:e.SH,WW:t,WH:a,SX:0,SY:0,game:e,step:0,stepMS:0,stepMStotal:0,frameCnt:0,stepREQframe:0,keyCodes:i.game.keys}}}.apply(t,a),void 0===n||(e.exports=n)},1257:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3700),r(2993),r(484),r(7899),r(7899)],n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a),t.default=function(e,t){return{weather:{wind:{x:0,y:0}},interactStartTimer:0,screen:{rectMinus_400:new n.Rectangle(0,0,0,0),rectMinus_200:new n.Rectangle(0,0,0,0),rect:new n.Rectangle(0,0,0,0),rectSS_200:new n.Rectangle(0,0,0,0),rectSS_400:new n.Rectangle(0,0,0,0),rectSS_600:new n.Rectangle(0,0,0,0),rectSS_800:new n.Rectangle(0,0,0,0),rectSS_1000:new n.Rectangle(0,0,0,0),rectSS_1500:new n.Rectangle(0,0,0,0),rectSS_2000:new n.Rectangle(0,0,0,0)},map:{hash:{},qeue:[],pos:{x:0,y:0},zoom:1},IS_PROCEDURAL:!1,procedural:{treeBounds:new n.Rectangle(0,0,0,0),map:{SX:1,SY:1,SX_END:1,SY_END:1,HEIGHT:1,WIDTH:1,WIDTH_RES:1,HEIGHT_RES:1,GEN_RES:100,GEN_RES_REVERSE_M:.01,GEN_SIZE_PIXELS:5e3,FULL_REFRESH:!1,MOVED_X:0,MOVED_X_RES:0,MOVED_Y:0,MOVED_Y_RES:0,MOVED_XY_ABS_DIST_CELLS:0},boundsSS:new n.Rectangle(0,0,1,1),chunks:{hash:{},qeue:[],size:s.P_CHUNKS_SIZE_RES,ss:s.P_CHUNKS_SIZE_RES/2,stats:{load:0,geneated:0,maxLoad:50},pruneRect:new n.Rectangle(0,0,0,0)}},proceduralBounds:null,proceduralRemovalData:[],proceduralDestroyedData:[],destroyers:[],rockFormationsArcs:[],rockFormationSystemRadius:[],loadscreen:!1,spaceSpiders:[],sparks:[],spacePorts:[],spaceDust:[],fragments:[],fragmentsBlack:[],scoreboard:[],playerGuidHash:{},rockets:[],proximityMines:[],spaceMines:[],spaceTurrets:[],charges:[],spaceBats:[],drones:[],bullets:[],flames:[],networkMessages:[],playerPositions:[],playerGuid:-1,spaceSquids:[],parasites:[],eventMap:{},wayPoints:[],npcs:[],anomlies:[],anomalyPairs:[],ancientBlocks:[],ancients:[],force2:[],skillTree:{active:!1,timer:0,node:null,focused:null,hasBeenActivated:!1},initGameTime:i.GAME_INTRO_TIMER,starMap:[],particles:[],customParticles:[],player:null,enemies:[],asteroids:[],asteroidBelts:[],minefields:[],rockFormations:[],spaceFog:[],SX:0,SY:0,SW:e,SH:t,resW:e,resH:t,currentResW:e,currentResH:t,asteroidParts:[],spaceSnake:[],notifications:[],settings_asteroid_spawns_new:!0,settings_minimap_asteroid_min_radius:100,settings_wormhole:!0,settings_be_the_snake_mode:!1,settings_no_darkness:!1,daylight:{time:s.DAYLIGHT_LEVEL_START_TIME,darkness_multip:0,is_dawn:!1,is_day:!1,is_dusk:!1,is_night:!0,fog:.8},level_completed:!1,performance:{engine:[],engineClient:[],gui:[],shaders:[],particles:0,asteroids:0,totalEngine:0,totalEngineClient:0,totalGui:0},testMode:!1,isPaused:!1,clock:0,fromClock:0,currentLevel:0,levelEditor:!1,menuSettings:{particleSettingIndex:2,particleSettingsArr:[.05,.3,.75,1],particleSettingsArrStr:["LOW","MEDIUM","HIGH","EXTREME"],heavyFog:!1,networkLocaations:!1,heap:!1,commanderHelp:!0,mouseControl:!1,objectData:!0,motionBlur:!1,onScreenLogging:!1,gameClock:!0,extensiveUI:!1,raycasting:!0,losShadows:!0,glowParticles:!0,glow:!0,reflections:!0,antialiasing:!1,fps:!1,fpsOnly:!1,fps3dBars:!1,fps3dGrid:!1,minimap:!0,instruments:!0,showCloseItems:!0,showSightLines:!1,music:!0,sfx:!1,shipStatus:!0,keybindingHint:!0,noise:!0,spacedust:!0,woodenPC:!1,transformFeedback:!0,particles:!0,debugItems:{chunks:!1,aabb:!1,forces:!1,proceduralCreation:!1,predatorTarget:!1,workerTarget:!1}},state:(0,r.defaultGameState)(),allKeyCodes:(0,a.default)((0,r.defaultGameState)()),removedAsteroids:[],removedShips:[],traceLine:[],zoomTX:1,zoomTXinverted:1,continueState:null}}}.apply(t,a),void 0===n||(e.exports=n)},6043:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(1706),r(9109),r(7154),r(6284),r(9124),r(6124),r(7693),r(8340),r(8684),r(6266),r(274),r(7561),r(5728),r(6238),r(6038),r(4437),r(9371),r(1927),r(7563),r(4881)],n=function(e,t,r,a,n,o,i,s,A,c,d,p,f,h,v,g,y,m,_,x,S,T){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGL=void 0,r=u(r),a=l(a),n=l(n),o=l(o),i=l(i),s=l(s),A=l(A),c=l(c),p=l(p),f=l(f),v=l(v),g=l(g),y=l(y),m=l(m),_=l(_),x=l(x),S=l(S),T=l(T),t.createGL=function(e,t){void 0===t&&(t=!1),window;var u=e.getContext("webgl2",{antialias:t});window.webglUtils,u||(console.error("unable to get GL CTX, trying one more time"),(u=e.getContext("webgl2",{antialias:t}))||setTimeout((function(){window.location&&(window.location=window.location)}),2e3)),(0,r.compileProgram)(r.GLctx.Vertices3d,u,a.default,e.width,e.height,!0),(0,r.compileProgram)(r.GLctx.VerticesMultiColor,u,p.default,e.width,e.height),(0,r.compileProgram)(r.GLctx.VerticesFastAlpha,u,f.default,e.width,e.height),(0,r.compileProgram)(r.GLctx.Vertices,u,n.default),(0,r.compileProgram)(r.GLctx.VerticesOverlay,u,n.default),(0,r.compileProgram)(r.GLctx.TextureDist,u,o.default),(0,r.compileProgram)(r.GLctx.TextureBlur,u,T.default),(0,r.compileProgram)(r.GLctx.Texture,u,i.default),(0,r.compileProgram)(r.GLctx.TextureCombineMultiply,u,S.default),(0,r.compileProgram)(r.GLctx.GameBufferDist,u,s.default),(0,r.compileProgram)(r.GLctx.GameBufferNoise,u,A.default),(0,r.compileProgram)(r.GLctx.VerticesGradient,u,c.default,e.width,e.height),(0,r.compileProgram)(r.GLctx.VerticesGradient2tone,u,m.default,e.width,e.height),(0,r.compileProgram)(r.GLctx.VerticesGradientBLACK,u,v.default,e.width,e.height),(0,r.compileProgram)(r.GLctx.VerticesGradientLinear,u,g.default,e.width,e.height),(0,r.compileProgram)(r.GLctx.EdgeGradient,u,y.default,e.width,e.height),(0,r.compileProgram)(r.GLctx.VerticesGradientDarkMultply,u,_.default,e.width,e.height),(0,r.compileProgram)(r.GLctx.PerlinNoiseFog,u,x.default);var l=(0,r.default)(r.GLctx.VerticesOverlay,u);u.useProgram(l),E(u,l,e);var M=(0,r.default)(r.GLctx.Vertices,u);return u.useProgram(M),E(u,M,e),u.enable(u.BLEND),u.blendFunc(u.ONE,u.ONE),(0,d.setGlobalGL)(u),(0,h.setupBuffers)(u),u};var E=function(e,t,r){var a=e.getAttribLocation(t,"a_position"),n=e.getUniformLocation(t,"u_resolution");e.getUniformLocation(t,"u_color"),e.uniform2f(n,r.width,r.height);var o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.enableVertexAttribArray(a),e.vertexAttribPointer(a,2,e.FLOAT,!1,0,0)}}.apply(t,a),void 0===n||(e.exports=n)},3605:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(9262),r(7185),r(5714)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createParasite=void 0,t.createParasite=function(e,t,i,s,u,l){for(var A=[],c=0;c<i;c++)A.push(o(o({angle:0,offsetFront:new r.Vector(0,-2),offsetRear:new r.Vector(0,2),pos:new r.Vector(e,t),type:39,collType:26,guid:(0,a.getGuid)(),vel:new r.Vector(0,0),life:2,radius:2},(0,n.setImovableDefaults)(null)),{armor:null}));return o(o({fleeDirection:0,prioritzeRestposMS:0,fleeDangerMS:0,level:0,infected:!1,netpos:{x:e,y:t},netvel:{x:0,y:0},netangle:0,angle:0,pos:new r.Vector(0,0),vel:new r.Vector(0,0),radius:i,guid:(0,a.getGuid)(),type:39,collType:26,target:null,tsValue:1,targetShift:40*Math.random(),restPos:new r.Vector(s,u),segments:A,life:l||400+100*Math.random()},(0,n.setImovableDefaults)(null)),{armor:{type:0,value:1}})}}.apply(t,a),void 0===n||(e.exports=n)},4590:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(9262),r(7185),r(7899),r(2261),r(5714),r(943),r(6812),r(484)],n=function(e,t,r,a,n,i,s,u,l,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRFsingle=void 0,t.createRFsingle=function(e,t){var i=new r.Vector(e.x,e.y);return o(o({},(0,s.setImovableDefaults)((0,u.BallCreator)(e.x,e.y,t,0))),{minerals:t,specular:1,isLV426:!1,netangle:0,netpos:{x:e.x,y:e.y},netvel:{x:0,y:0},type:11,collType:3,guid:(0,a.getGuid)(),sleepingAABB:!0,staticPos:i.toPoint(),radius:t,vel:new r.Vector(0,0),sides:Math.max(7,Math.floor(t/20)),angle:0,angleVel:0,life:t*n.ROCKFORMATION_RADIUS_LIFE_MULTIP,oLife:t*n.ROCKFORMATION_RADIUS_LIFE_MULTIP,armor:{type:5,value:2},resources:(0,l.createDefaultResources)(t,11)})};var c=(0,A.rect_pool_pop)(0,0,0,0),d=function(e,a,n,o,s,u,l,A,p){var f=new r.Vector(n,0);if(n>40||A&&n>4){if(p&&(c.x=a.x+-n,c.y=a.y+-n,c.width=2*n,c.height=2*n,!p.containsRect(c)))return;var h=(0,t.createRFsingle)(a,n);o.push(h);for(var v=l?4:e()>.9?2:1,g=0,y=0;y<v;y++){if(f.set(1.35*n,0),l)g=e()*Math.PI*2;else if(v>1){if(0===y)g=(0,i.normalizeRadianAngle)(u)-e()*Math.PI*.7;else if(g=(0,i.normalizeRadianAngle)(u)+e()*Math.PI*.7,!A&&e()>.6){var m=new r.Vector(n,0),_=g;e(),f.setAngle(_);var x={x:a.x+m.x,y:a.y+m.y},S={arc:[],attachedToGuid:h.guid,under:!0,pos:{x:a.x,y:a.y}};s.push(S),d(e,x,v>1?.6*n:.96*n,S.arc,s,_,!1,!0,p)}}else g=(0,i.normalizeRadianAngle)(u)+(e()-.5)*Math.PI*.75;f.setAngle(g);var T={x:a.x+f.x,y:a.y+f.y};d(e,T,A?v>1?.45*n:.92*n:v>1?.6*n:.96*n,o,s,g,!1,A,p)}}},p=function(e,t){for(var r=0,n=0;n<e.length;n++){var o=e[n],i=(0,a.distanceBetweenXYXY)(o.pos.x,o.pos.y,t.x,t.y)+o.radius;i>r&&(r=i)}return r};t.default=function(e,t,n,i,u){var l=[],A=[];return d(e,{x:t,y:n},i,l,A,0,!0,!1,u),{rockFormations:l,rockFormationArcs:A,rfSystem:o(o({},(0,s.setImovableDefaults)(null)),{type:7,collType:4,sleepingAABB:!0,guid:(0,a.getGuid)(),pos:new r.Vector(t,n),vel:new r.Vector(0,0),life:1,radius:u?Math.max(u.height,u.width):p(l,{x:t,y:n}),armor:null})}}}.apply(t,a),void 0===n||(e.exports=n)},3578:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(7185),r(7899),r(9262),r(5714),r(4077),r(1e3),r(6063),r(3473)],n=function(e,t,r,a,n,i,s,u,l,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShipColors=t.ShipColorStrings=t.increaseColorIndex=t.setColorIndex=t.getCurrentColorIndex=t.createNPCs=t.createDrones=t.createEnemies=t.createShip=t.createDestroyer=t.applyNetworkPropertiesToNewShip=t.shipRadius=void 0,t.shipRadius=1.02*new n.Vector(a.SHIP_LENGTH_RADIUS,a.SHIP_WIDTH_RADIUS).getLength(),t.applyNetworkPropertiesToNewShip=function(e,t){e.guid=t.guid,e.kills=t.kills,e.deaths=t.deaths,e.SW=t.SW,e.SH=t.SH,e.name=t.name},t.createDestroyer=function(e,a,s){void 0===a&&(a=null),void 0===s&&(s=15);var d=(0,r.getGuid)(),p=o(o(o(o({repairing:!1,repairingCloseAngle:void 0},(0,i.setImovableDefaults)((0,u.WedgeCreator)((null==a?void 0:a.pos.x)||3e3,(null==a?void 0:a.pos.y)||3e3,s,Math.pow(t.shipRadius*s*.5,3)))),{shape:1,opos:{x:0,y:0},acc:new n.Vector(0,0),mass:Math.pow(t.shipRadius*s*.5,3),thrust:new n.Vector(0,0),radarAngle:0,shields:0,level:0,vel:new n.Vector(0,0),angle:0,angleVel:0,angleAcc:0,radius:t.shipRadius*s,life:1e3,oLife:1e3,guid:d,shipSizeMultip:s,debugCircle:null,cannons:[],weapons:(0,l.createDefaultShipWeapons)(d,0),abilities:(0,A.createDefaultShipAbilitys)(),armor:{type:3,value:2}}),a),{type:0,collType:21});return p.cannons=c(p),p};var c=function(e){for(var t=[.2,.6],a=[],n=0;n<2;n++)for(var o=0;o<3;o++){var i={angle:0,baseAngle:0,min:0,baseMin:0,max:0,baseMax:0,pos:(0,r.midpoint)(e.pos,e.comp[0].vertex[o],t[n]),direction:1,fired:!1};a.push(i)}for(var s=[2,0,2,2,0,2],u=[1,1,0,1,1,0],l=0;l<a.length;l++){i=a[l];var A={min:Math.atan2(e.comp[0].vertex[u[l]].y-i.pos.y,e.comp[0].vertex[u[l]].x-i.pos.x),max:Math.atan2(e.comp[0].vertex[s[l]].y-i.pos.y,e.comp[0].vertex[s[l]].x-i.pos.x)};i.min=A.min,i.max=A.max,i.baseMin=A.min,i.baseMax=A.max,i.angle=i.min+.2,i.baseAngle=i.min+.2}return a};t.createShip=function(e,a,s){void 0===a&&(a={}),void 0===s&&(s=1);var c=(0,r.getGuid)();return o(o(o({scale:2*s},(0,i.setImovableDefaults)((0,u.WedgeCreator)(.9*e.game.resW,.9*e.game.resH,1*s,Math.pow(.88*t.shipRadius*s,3)))),{specular:.8,flameOutCnt:0,acc:new n.Vector(0,0),shape:1,netpos:new n.Vector(0,0),netvel:new n.Vector(0,0),netangle:0,netSX:0,netSY:0,inSafeZone:!1,isTracing:!1,unableToComply:!1,bulletsFired:0,ownerGuid:-1,killedByGuid:-1,kills:0,deaths:0,avoidance:null,turnAcc:0,SX:0,SY:0,SW:e.game.SW,SH:e.game.SH,keyCodes:{LEFT:0,UP:0,RIGHT:0,DOWN:0,PRIMARY_WEAPON:0,SECONDARY_WEAPON:0,AUX_WEAPON:0,TOGGLE_PRIMARY_WEAPON:0,TOGGLE_SECONDARY_WEAPON:0,TOGGLE_AUX_WEAPON:0,PRIMARY_ABILITY:0,SECONDARY_ABILITY:0,AUX_ABILITY:0,TOGGLE_PRIMARY_ABILITY:0,STRAFELEFT:0,STRAFERIGHT:0,TOGGLE_SECONDARY_ABILITY:0,TOGGLE_AUX_ABILITY:0,INTERACT:0},colorIndex:h,type:45,collType:6,guid:c,score:0,credits:2500,maxBullets:150,maxVel:10,life:100,oLife:100,radius:t.shipRadius*s,originalRadius:t.shipRadius*s,damageTaken:!1,angle:0,angleVel:0,angleAcc:0,thrust:new n.Vector(0,0),vel:new n.Vector(0,0),name:"",camera:{chaseX:0,chaseY:0,velChaseX:0,velChaseY:0,history:[]},level:0,miningRig:null,aimPoint:{x:0,y:0},aimTarget:null,weapons:(0,l.createDefaultShipWeapons)(c,45,[26]),abilities:(0,A.createDefaultShipAbilitys)(),armor:{type:3,value:1},coaxialMount:{angle:0,pos:new n.Vector(0,0),barrel:new n.Vector(0,0)}}),a)};var d=function(e,t,r){if(void 0===r&&(r=3),0===e.game.spacePorts.length||0===e.game.rockFormationSystemRadius.length||0===e.game.rockFormations.length)return(0,s.LOG_GL)("unable to create mining rig "),null;for(var o,i=[],u=0;u<r;u++)i.push({joint:new n.Vector(0,0),size:t-2*u,angle:Math.PI,minAngle:Math.PI,maxAngle:0===u?-.2*Math.PI:.2*Math.PI});var l=Number.MAX_VALUE,A=!1;for(u=0;u<e.game.spacePorts.length;u++){for(var c=e.game.spacePorts[u],d=0,p=0;p<c.cannons.length;p++)d+=c.cannons[p].life;d<l&&(o=c,l=d)}return l>7*a.SPACEPORT_START_LIFE&&(A=!0),(0,s.LOG_GL)("mining rig created OWNER:"+(A?"RAND":o.name)),{reverseForMS:0,armState:3,repairTargetTargetBullets:0,repairTargetTargetLife:0,base:A?e.game.spacePorts[Math.floor(e.game.spacePorts.length*Math.random())]:o,target:null,repairTarget:null,slowdownMultip:1,arm:i,minedMinerals:Math.random()>.5?Math.floor(200*Math.random()+50):0}};t.createEnemies=function(e,r,a){void 0===a&&(a={});for(var i=e.WW,s=e.WH,u=[],A=0;A<r;A++){var c=(0,t.createShip)(e,a),d=o(o(o({},c),{collType:5,pos:a.pos||new n.Vector(i*Math.random(),s*Math.random()),life:30,oLife:30,type:1,maxBullets:10,maxVel:3,name:"BANDIT",weapons:(0,l.createDefaultShipWeapons)(c.guid,1,[31,33,26])}),a);u.push(d)}return u},t.createDrones=function(e,r,a,o){for(var i=[],s=.55,u=0;u<a;u++){var l=(0,t.createShip)(e,{type:50,life:50,oLife:50,collType:11},s);l.ownerGuid=o,l.pos=r.clone();var A=new n.Vector(150,0);A.setAngle(360*Math.random()),l.pos.add(A),l.radius*=s,l.mass=Math.pow(.5*l.radius,3),l.originalRadius*=s,l.maxBullets=10,l.name="DRONE",i.push(l)}return i};var p,f=function(e,t){var r,a;return r=e.pos.x+(Math.random()>.5?-1e3:1e3),a=e.pos.y>.5*t.WH?t.WH-100:100,new n.Vector(r,a)};t.createNPCs=function(e,r,i,s){void 0===i&&(i={});for(var u=e.WW,l=e.WH,A=[],c=(0,t.createShip)(e,{},.66),p=0;p<r;p++){var h=d(e,1.8*a.SHIP_LENGTH_RADIUS),v=o(o(o(o({},c),{radius:.66*c.radius,originalRadius:.66*c.radius,pos:h?f(h.base,e):new n.Vector(u*Math.random(),l*Math.random()),life:80,oLife:80,type:2,maxBullets:0,angle:Math.random()*Math.PI*2,maxVel:3,currentWayPointIndex:s,miningRig:h}),i),{collType:8});A.push(v)}return A},function(e){e[e.CYAN=0]="CYAN",e[e.WHITE=1]="WHITE",e[e.BLUE=2]="BLUE",e[e.YELLOW=3]="YELLOW",e[e.PINK=4]="PINK",e[e.LIME=5]="LIME"}(p||(p={}));var h=1;t.getCurrentColorIndex=function(){return h},t.setColorIndex=function(e){e>t.ShipColorStrings.length&&(h=e)},t.increaseColorIndex=function(){h<t.ShipColors.length-1?h++:h=0},t.ShipColorStrings=[],t.ShipColorStrings[p.WHITE]="WHITE",t.ShipColorStrings[p.BLUE]="BLUE",t.ShipColorStrings[p.YELLOW]="YELLOW",t.ShipColorStrings[p.CYAN]="CYAN",t.ShipColorStrings[p.PINK]="PINK",t.ShipColorStrings[p.LIME]="LIME",t.ShipColors=[],t.ShipColors[p.WHITE]={r:.9,g:.9,b:.9},t.ShipColors[p.YELLOW]={r:.9,g:.9,b:.1},t.ShipColors[p.BLUE]={r:.3,g:.3,b:.98},t.ShipColors[p.PINK]={r:.9,g:.1,b:.9},t.ShipColors[p.CYAN]={r:.1,g:.9,b:.9},t.ShipColors[p.LIME]={r:.1,g:.9,b:.1}}.apply(t,a),void 0===n||(e.exports=n)},8180:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(9262),r(7185),r(5714)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var i=[],s=0;s<t;)for(var u=i.length,l=Math.round(40*Math.random()+20),A=.8*e.WW*Math.random()+.1*e.WW,c=.8*e.WH*Math.random()+.1*e.WH,d=(new r.Vector(5*(Math.random()-.5),5*(Math.random()-.5)),0);d<l;d++){var p=o(o({target:null,gettingBackToGroup:!1,groupLeader:0===d,leaderIndex:u,pos:new r.Vector(A+Math.random()*e.SW*.01,c+Math.random()*e.SH*.01),vel:new r.Vector(5*(Math.random()-.5),5*(Math.random()-.5)),guid:(0,a.getGuid)(),maxSpeed:8,radius:30,type:81,collType:27,life:100,attackMode:!1,attackTimer:0,abortedAttackTimer:0,inAttackSwarm:!1},(0,n.setImovableDefaults)(null)),{armor:{type:0,value:1}});if(i.push(p),++s>t)break}return i}}.apply(t,a),void 0===n||(e.exports=n)},611:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(7185),r(9262),r(2261),r(7899),r(5714),r(943),r(6812)],n=function(e,t,r,a,n,i,s,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,A,c,d,p,f){e.WW,e.WH;var h="ABCDEFGHIJK".split(""),v=(0,n.createBlockcircleArray)(6,0,.8*t,A).map((function(e,n){var l=p&&p[n]?p[n]:null,d=l?new a.Vector(l.staticPos.x,l.staticPos.y):e;return o(o({},(0,s.setImovableDefaults)((0,u.BallCreator)(d.x,d.y,t/6,1e3*t))),{idleSweepTargetAngle:Math.atan2(d.y-A.y,d.x-A.x),bullets:Math.round(t+2*Math.random()*t),maxBullets:t+2*t,specular:.1,opos:{x:d.x,y:d.y},procedurallyCreated:null==f?void 0:f.procedurallyCreated,mass:1e3*t,sleepingAABB:!0,lightsOn:!1,isLV426:!1,netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},isOnline:!1,ownerName:c,name:h.pop(),damages:[],weaponsActiveTimerMS:0,staticPos:d.clone(),vel:new a.Vector(0,0),type:23,collType:16,guid:l?l.guid:(0,r.getGuid)(),radius:t/6,sides:6,angle:Math.atan2(d.y-A.y,d.x-A.x),angleVel:0,life:l?l.life:.25*i.SPACEPORT_START_LIFE*Math.random()+.75*i.SPACEPORT_START_LIFE,oLife:i.SPACEPORT_START_LIFE,busy:!1,isCannon:!0,fireing:!1,aggressionForGuidsHash:{},armor:{type:3,value:1},resources:null,wallThickness:40})}));v.pop();var g=p?p.filter((function(e){return!e.isCannon}))[0]:null,y=o(o({},(0,s.setImovableDefaults)((0,u.BallCreator)(A.x,A.y,t/6,1e3*t))),{idleSweepTargetAngle:0,bullets:1e8,maxBullets:1e8,specular:.1,lightsOn:!1,opos:{x:A.x,y:A.y},procedurallyCreated:null==f?void 0:f.procedurallyCreated,mass:1e3*t,isLV426:!1,sleepingAABB:!0,netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},isOnline:!1,ownerName:c,name:h.pop(),fireing:!1,damages:[],weaponsActiveTimerMS:0,aggressionForGuidsHash:{},staticPos:A.clone(),vel:new a.Vector(0,0),type:23,collType:16,guid:g?g.guid:(0,r.getGuid)(),radius:t/6,sides:6,angle:0,angleVel:0,life:g?g.life:i.SPACEPORT_START_LIFE,oLife:i.SPACEPORT_START_LIFE,busy:!0,isCannon:!1,armor:{type:3,value:1},wallThickness:40,resources:null});return v.push(y),o(o(o({},(0,s.setImovableDefaults)((0,u.BallCreator)(A.x,A.y,t,t))),{specular:0,isEnemyForMS:0,isLV426:!1,netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},shields:.2*t,oshields:.2*t,shieldImpacts:[],reparations:d||{life:100},weaponsActive:!1,angle:0,angleVel:0,centerNoneCannon:y,guid:(0,r.getGuid)(),life:1e4,name:(c||"").toUpperCase(),pos:A,vel:new a.Vector(0,0),staticPos:A.clone(),radius:t,sides:6,wallThickness:40,type:3,collType:15,sleepingAABB:!0,cannons:v,shipChargeHash:{},chargeParticles:[],armor:{type:1,value:1},resources:(0,l.createDefaultResources)(t,3)}),f)}}.apply(t,a),void 0===n||(e.exports=n)},6990:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(7344),r(9262),r(7185),r(8345),r(5714),r(943)],n=function(e,t,r,a,n,i,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,l,A,c,d,p){var f,h;void 0===c&&(c=-1);for(var v=e.WW,g=e.WH,y=[],m=0;m<t;m++){for(var _=[],x=l&&A?new a.Vector(l,A):new a.Vector(v*Math.random(),g*Math.random()),S=8,T=c>0?c:Math.round(6+26*Math.random()),E=0,M=0,b={inTree:!0,fleeDirection:0,tryToMoveAwayAfterStationaryAttackMs:0,moveAwayLocation:new a.Vector(0,0),shadowTarget:(0,a.vec_pool_pop)(0,0),hasTarget:!1,pos:x.clone(),remove:!1,removeProcedural:!1,prioritzeRestposMS:0,fleeDangerMS:0,type:8,level:0,infected:(0,i.InfectionRate)(),size:T,guid:(0,n.getGuid)(),segments:_,attackMode:!1,life:null!==(f=null==p?void 0:p.life)&&void 0!==f?f:57*T,oLife:null!==(h=null==p?void 0:p.life)&&void 0!==h?h:57*T,armor:{type:0,value:1},restPos:new a.Vector(l||(d?d.x:.8*v*Math.random()+.1*v),A||(d?d.y:.8*g*Math.random()+.1*g))},I=0;I<T;I++){var L=x.clone();L.x+=E,L.y+=M,E+=.8*S,M+=.2*S+2*I;var P=o(o(o({sides:16,angle:0,offsetFront:new a.Vector(0,-S),offsetRear:new a.Vector(0,S),radius:S,type:36,collType:7,guid:(0,n.getGuid)(),vel:new a.Vector(1.6,1.6),life:20*T,legAngle:.12*I,legAngleDirectionForward:!1},(0,s.setImovableDefaults)((0,u.BallCreator)(L.x,L.y,S,Math.pow(S,3*T*.02)))),{armor:{type:0,value:1}}),p);p&&((null==p?void 0:p.pos)&&(P.pos=p.pos.clone()),(null==p?void 0:p.vel)&&(P.vel=p.vel.clone())),_.push(P),S++}(0,r.populateSpaceSnakeSegmentHash)(b),y.push(b)}return y}}.apply(t,a),void 0===n||(e.exports=n)},8260:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(9262),r(7185),r(2261),r(4022),r(8345),r(5714),r(4022),r(943)],n=function(e,t,r,a,n,i,s,u,l,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e,t,a,o,i){var s=new r.Vector(.5*t,0);s.setAngle(a+Math.PI),new r.Vector(.5*t,0),s.setAngle(a-Math.PI);var u=new r.Vector(.5*t,0);return u.setAngle(a),u.subtractXY(e.x,e.y),{pos:u,staticPos:u.clone(),angle:(0,n.normalizeRadianAngle)(a),staticAngle:(0,n.normalizeRadianAngle)(a),length:t,minRange:(0,n.normalizeRadianAngle)(o),maxRange:(0,n.normalizeRadianAngle)(i)}},d=function(e,t,a,o,i,s){var u=[];o=i?(0,n.normalizeRadianAngle)(.6*o+.7*Math.PI):(0,n.normalizeRadianAngle)(.6*o-.7*Math.PI+Math.PI);for(var l=0;l<t;l++){var A=i?-1:1;s&&(A*=-1);var d=1.8*Math.PI*A,p=.05*Math.PI*A,f=d/(t-1);if(1===l||l===t-2?f-=.25*A:(f+=.25*A,p+=.1*A),0===l)u.push(c(e,a,o,.1*p,.1*f));else{var h=u[u.length-1],v=new r.Vector(.5*h.length,0);v.setAngle(h.angle+Math.PI),u.push(c({x:h.pos.x+v.x,y:h.pos.y+v.y},a,(0,n.normalizeRadianAngle)(o),(0,n.normalizeRadianAngle)(p),(0,n.normalizeRadianAngle)(f))),o+=f}}return{bones:u}},p=function(e,t,a,o,i){for(var s=[],u=new r.Vector(i,0),l=0;l<t;l++){var A=2*Math.PI/t*l;u.setAngle(A);var c=A,p=d({x:e.x+u.x,y:e.y+u.y},a,(0,n.eqNumberInArr)([1,2,5,6],l)?o:.8*o,c,l>=t/2,!(0,n.eqNumberInArr)([2,3,4,5],l));s.push(p)}return s};t.default=function(e,t,n,c,d,f,h){for(var v=e.WW,g=e.WH,y=(e.SW,e.SH,e.game,[]),m=d||12+4*Math.random(),_=0;_<t;_++){var x=new r.Vector(n||v*Math.random(),c||g*Math.random()),S=new r.Vector(0,0),T=o(o(o({fleeDirection:0,prioritzeRestposMS:0,fleeDangerMS:0,level:0,infected:(0,s.InfectionRate)(),netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},angle:0,legs:p(x,8,5,2*m,m),vel:S,guid:(0,a.getGuid)(),life:18*m,oLife:18*m,restPos:f?new r.Vector(f.x,f.y):x.clone(),radius:m,type:10,collType:17,swimPosInR:!0,swimPosInL:!0,swimPosL:.5,swimPosR:.5},(0,u.setImovableDefaults)((0,A.BallCreator)(x.x,x.y,m,Math.pow(m,3)))),{armor:{type:0,value:1}}),h);T.legs.forEach((function(e){return(0,l.minRotateSpiderLeg)(e)})),T.legs.forEach((function(e){return(0,i.updateSpiderLeg)(e)})),y.push(T)}return y}}.apply(t,a),void 0===n||(e.exports=n)},6203:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};a=[r,t,r(9262),r(3665),r(7350),r(7185),r(8345),r(5714),r(943)],n=function(e,t,r,a,n,s,u,l,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e,t,o,i,s){for(var u={arm:[],target:new r.Vector(200*(Math.random()-.5),200*(Math.random()-.5)),searchTime:0,searchTimeMax:800,reach:0,angle:o,swimIn:!1,swimAngle:0,glowIndex:0},l=e,A=0;A<i;A++){var c=1.25*i-A,d=1.15*i-.5*A;u.reach+=d;var p=Math.max(0,Math.min(.1*Math.PI,.4*Math.sin(.2*A-.5))),f=.7-.02*A;u.arm.push(new a.MuscleSegment(c,new n.Muscle(d*f,d),new n.Muscle(d*f,d),l,t,o,p,s)),l+=d}return u},d=function(e,t,a){void 0===t&&(t=6);var n=[],o=[.5,.6,.85,1,.98,.87,.56,.52],i=(Math.PI,[1.2,-1.2,1,1.2,-1.2,1,1.2,-1.2]),s=[.7,1,1,1,1,1,1,.7],u=new r.Vector(-e,0);t=8;for(var l=0;l<t;l++){var A=i[l];u.x=.8*e*.75*A*s[l],u.y=0,l<.5*t?u.setAngle(-1.2+Math.PI+.1*(A-1.1)):u.setAngle(1.2+Math.PI+.1*(A+1));var d=u.x,p=u.y;n.push(c(d,p,Math.PI*i[l],Math.ceil(o[l]*e*.25),a))}return n};t.default=function(e,t,a,n,c,p,f){for(var h=e.WW,v=e.WH,g=[],y=0;y<t;y++){var m=(0,s.getGuid)(),_=Math.PI,x=c||40*Math.random()+120,S=o(o(o({},(0,l.setImovableDefaults)((0,A.BallCreator)(a||h*Math.random(),n||v*Math.random(),x,Math.pow(x,3)))),{mass:Math.pow(x,3),prioritzeRestposMS:0,fleeDirection:0,fleeDangerMS:0,debugX:0,debugY:0,level:0,infected:(0,u.InfectionRate)(),netpos:{x:0,y:0},netvel:{x:0,y:0},netangle:0,restPos:new r.Vector(p?p.x:.8*h*Math.random()+.1*h,p?p.y:.8*v*Math.random()+.1*v),tentacles:i([],d(x,6,m),!0),vel:new r.Vector(0,0),radius:x,life:1e3,oLife:1e3,type:9,collType:9,guid:m,angle:_,mode:0,armor:{type:0,value:1}}),f);g.push(S)}return g}}.apply(t,a),void 0===n||(e.exports=n)},1399:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e.spaceFog.filter((function(e){return!e.fire}));if(t)for(var a=Math.min(r.length,e.spaceSquids.length),n=0;n<a;n++){var o=r[n];e.spaceSquids[0].pos.set(o.x,o.y),e.spaceSquids[0].restPos.set(o.x,o.y)}else r.length>0&&e.spaceSquids.length>0&&(o=r[Math.floor(r.length*Math.random())],e.spaceSquids[0].pos.set(o.x,o.y+2e3),e.spaceSquids[0].restPos.set(o.x,o.y))}}.apply(t,[r,t]),void 0===a||(e.exports=a)},2583:(e,t,r)=>{var a,n;a=[r,t,r(484)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n,o,i){for(var s=(0,r.rect_pool_pop)(t,a,n,o),u=0;u<e.length;u++)for(var l=e[u],A=0;A<l.length;A++){var c=l[A];if(s.intersectsPoint(c.pos)){var d=2.2;Math.random()>.5?(c.pos.x=s.x+s.width*d+s.width*Math.random(),c.pos.y=s.y+s.height*d+s.height*Math.random()):(c.pos.x=s.x-s.width*d-s.width*Math.random(),c.pos.y=s.y-s.height*d-s.height*Math.random())}}(0,r.rect_pool_put)(s)}}.apply(t,a),void 0===n||(e.exports=n)},6039:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7899),r(9262),r(1706),r(5308),r(50),r(7185),r(5346),r(7344),r(2065),r(2889),r(7708),r(3731),r(5182),r(2093),r(5158),r(7207),r(8840),r(8787),r(633),r(7899),r(2093),r(2965),r(840),r(1401)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f,h,v,g,y,m,_,x,S,T,E,M,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postLeelReset=void 0,E=o(E),M=o(M),t.postLeelReset=function(e){for(var t=e.game,r=0;r<t.player.length;r++)e.SX=t.player[r].pos.x-e.SW*Math.random(),e.SY=t.player[r].pos.y-e.SH*Math.random()},t.default=function(e,t,o){var I,L;for(var P in e.keyCodes)e.keyCodes[P]=!1;(0,T.resetApiCache)(),e.frameCnt=0,e.stepMStotal=0,t.frameCnt=0,t.stepMStotal=0,e.game.SW=e.game.resW,e.game.SH=e.game.resH;var w=o?o(e):{WW:16e3,WH:12e3};t&&(t.gl&&(t.game.SW=t.game.resW,t.game.SH=t.game.resH,e.game.zoomTX=1,e.game.zoomTXinverted=1,(0,n.zoom)(t,!0),(0,i.setTargetToCanvas)(t.gl)),t.WW=w.WW,t.WH=w.WH),e.WW=w.WW,e.WH=w.WH;var R=e.game,O=e.WW,C=e.WH;(0,v.SetupQuadTreeRangeType)(0),(0,s.resetFogSystems)(),(0,l.resetSubtitles)(),(0,A.resetSpaceSnakeSegmentHash)(),(0,c.resetGuidHashNetwork)(),(0,d.resetTargetBehaviourHashes)(),(0,p.resetDirector)(),(0,y.ProceduralResetDirector)(),(0,f.ResetRadar)(),(0,h.disableMapShift)(!1),(0,g.resetProceduralWorld)(),(0,m.resetSkillTree)(),(0,_.resetWeaponData)(),(0,x.resetAbilityData)(),(0,b.resetRigDistributionHash)(),E.default.reset(e),M.default.reset(e);var D=[{type:12,pos:new a.Vector(.8*O,.5*C),positive:!1,effect:90,radius:4,spawnParticles:!1,seedKey:0}];(I=R.anomlies).push.apply(I,D);var G=[{in:{type:14,pos:new a.Vector(.2*O,.2*C),radius:750,positive:!1,effect:16,spawnParticles:!0,seedKey:0},out:{type:13,pos:new a.Vector(.8*O,.5*C),positive:!0,effect:4,spawnParticles:!1,seedKey:0,radius:250}}];(L=R.anomalyPairs).push.apply(L,G),R.spaceFog=[{radius:450,x:.08*O,y:.09*C,fire:!1,guid:(0,u.getGuid)(),seedKey:0,type:16},{radius:650,x:.5*O,y:.5*C,fire:!1,guid:(0,u.getGuid)(),seedKey:0,type:16},{radius:500,x:.2*O,y:.69*C,fire:!1,guid:(0,u.getGuid)(),seedKey:0,type:16},{radius:256,x:.6*O,y:.92*C,fire:!0,guid:(0,u.getGuid)(),seedKey:0,type:15}],R.interactStartTimer=0,R.initGameTime=S.GAME_INTRO_TIMER,R.spacePorts=[],R.rockets=[],R.drones=[],R.bullets=[],R.flames=[],R.charges=[],R.parasites=[],R.minefields=[],R.weather.wind.x=0,R.weather.wind.y=0,R.rockFormations=[],R.rockFormationSystemRadius=[],R.rockFormationsArcs=[],R.sparks=[],R.spaceBats=[],R.spaceSpiders=[],R.proximityMines=[],R.spaceMines=[],R.spaceTurrets=[],R.playerGuid=-1,R.spaceSquids=[],R.wayPoints=[],R.npcs=[],R.particles=[],R.customParticles=[],R.player=[],R.enemies=[],R.asteroids=[],R.asteroidBelts=[],R.SX=0,R.SY=0,R.SW=R.resW,R.SH=R.resH,R.asteroidParts=[],R.spaceSnake=[],R.destroyers=[],R.notifications=[],R.fragments=[],R.settings_asteroid_spawns_new=!0,R.settings_be_the_snake_mode=!1,R.settings_no_darkness=!1,R.settings_minimap_asteroid_min_radius=100,R.levelEditor=!1,R.level_completed=!1,R.settings_wormhole=!0,R.clock=0,R.fromClock=0,R.proceduralRemovalData=[],R.IS_PROCEDURAL=!1,R.proceduralBounds=null,R.proceduralDestroyedData=[],R.daylight={darkness_multip:0,is_dawn:!1,is_day:!1,is_dusk:!1,is_night:!0,time:r.DAYLIGHT_LEVEL_START_TIME,fog:.01},R.ancientBlocks=[],R.ancients=[],R.traceLine=[],R.force2=[],R.skillTree={active:!1,hasBeenActivated:!1,timer:0,node:(0,m.getSkillTree)(),focused:null},R.procedural.chunks.hash={},R.procedural.chunks.qeue=[],R.map.hash={},R.map.qeue=[]}}.apply(t,a),void 0===n||(e.exports=n)},6334:(e,t,r)=>{var a,n;a=[r,t,r(4077)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setLV426=void 0,t.setLV426=function(e){var t=e.sort((function(e,t){return e.radius-t.radius}))[0];t.isLV426=!0,t.guid=426,t.life*=6,(0,r.LOG_GL)("LV 426 turned ON")}}.apply(t,a),void 0===n||(e.exports=n)},9894:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},A=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(6812),r(3578),r(6990),r(6203),r(9262),r(611),r(1399),r(8180),r(7708),r(8260),r(2583),r(4590),r(2201),r(484),r(6334),r(3578)],n=function(e,t,r,a,n,o,i,s,c,d,p,f,h,v,g,y,m,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=A(r),n=A(n),o=A(o),s=A(s),c=A(c),d=A(d),p=u(p),f=A(f),h=A(h),v=A(v),new y.Rectangle(0,0,0,0),t.default={splash:null,gui:function(e){},assert:function(e){return e.IS_MULTIPLAYER||(0,p.default)(e),(0,g.pool_log)(),!1},init:function(e){var t=e.game,u=e.WW,A=e.WH,g=e.SW,y=e.SH;(0,p.DirectorSetup)({enemies:25,spacesquids:18,spacesnakes:4,spaceSpiders:10,npcs:30,campingTimeout:2e4,destroyers:1});var x=(0,a.createShip)(e);e.IS_SERVER||(x.pos.x=.1*u,x.pos.y=.6*A,t.player[0]=x,t.drones=(0,a.createDrones)(e,x.pos,2,x.guid)),t.spaceSpiders=(0,f.default)(e,12);var S=(0,s.default)(e,400,new i.Vector(.27*e.WW,.1*e.WH),"AURIGA",{life:100}),T=(0,s.default)(e,380,new i.Vector(.7*e.WW,.1*e.WH),"GENESIS",{life:100}),E=(0,s.default)(e,440,new i.Vector(.2*e.WW,.85*e.WH),"NEW HORIZON",{life:100});t.spacePorts=[S,T,E],t.asteroids=(0,r.default)(e,300,120,300),(0,m.setLV426)(t.asteroids);var M=(0,v.default)(Math.random,.6*u,.5*A,250);t.rockFormations=M.rockFormations,t.rockFormationSystemRadius=[M.rfSystem],e.IS_SERVER||(t.spaceBats=(0,d.default)(e,500),t.npcs=l([],(0,a.createNPCs)(e,48,{},0),!0));var b=(0,_.createDestroyer)(e);t.destroyers=[b],b.pos.setFromVec(S.pos),b.pos.x+=S.radius+b.radius,b.pos.y-=300,b.angle+=.6*Math.PI,x.pos.setFromVec(S.pos),x.pos.addXY(100,50),t.enemies=(0,a.createEnemies)(e,30),t.spaceSnake=(0,n.default)(e,4,void 0,void 0,15*Math.random()+10),t.spaceSquids=(0,o.default)(e,14),(0,h.default)([t.spaceSpiders,t.enemies,t.spaceSquids,t.spaceBats],x.pos.x-3*g,x.pos.y-3*y,6*g,6*y,e),(0,c.default)(t,!1)},mapSize:function(e){return{WW:2e4,WH:2e4}}}}.apply(t,a),void 0===n||(e.exports=n)},2381:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(5182),r(2093),r(6039),r(199),r(9262),r(4077),r(7207),r(8465),r(6063),r(3473),r(737),r(7899),r(4391)],n=function(e,t,r,a,n,o,i,s,A,c,d,p,f,h,v,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=l(o),i=l(i),c=u(c),h=l(h);var y=new URLSearchParams(window.location.search).get("frank");t.default={splash:null,gui:function(e){},assert:function(e){try{(0,c.default)(e);var t=(0,h.default)(e);if(t){if(y){var r=t.weapons.all.find((function(e){return 27===e.type}));r&&(r.ammunition.value=2e3);var a=t.weapons.all.find((function(e){return 32===e.type}));a&&(a.ammunition.value=2e3);var n=t.weapons.all.find((function(e){return 26===e.type}));if(n&&(n.ammunition.value=2e3),t.abilities.values.energy<1e3){t.abilities.values.energy+=35;var o=t.abilities.passive.find((function(e){return 6===e.type}));o&&(o.value.n=o.value.max)}}e.game.spaceDust.length}}catch(e){(0,A.LOG_GL_FIXED_FORCED)("level9 something went wrong","engine/client error "+e.message)}return!1},init:function(e){var t,u;(0,o.default)(e,(0,i.default)().gui),e.game.IS_PROCEDURAL=!0,(0,n.SetupQuadTreeRangeType)(1),(0,c.ProceduralDirectorSetup)({enemies:28,spacesquids:12,spacesnakes:9,spaceSpiders:16,npcsPerPort:10,campingTimeout:6e4,destroyers:2}),e.game.spaceFog=[],e.game.anomlies=[],e.game.anomalyPairs=[],(0,a.disableMapShift)(!0);var l=(0,r.createShip)(e);y&&(e.game.notifications.push({message:"FRANK MODE enabled",life:v.NOTIFICATION_LIFE,type:74}),"t"===y&&(e.game.clock=47e4,e.game.notifications.push({message:"FRANK MODE: ahead of time ",life:v.NOTIFICATION_LIFE,type:74})),(0,g.setupShipForTests)(l)),l.pos.x=4800,l.pos.y=-13200,l.angle=2*Math.PI*Math.random();var A=new URLSearchParams(window.location.search);l.pos.x=parseInt(A.get("x"),10)*d.COORD_GUI_HUD_INV||l.pos.x,l.pos.y=parseInt(A.get("y"),10)*d.COORD_GUI_HUD_INV||l.pos.y,null!==A.get("hot")&&(l.weapons=(0,p.createDefaultShipWeapons)(l.guid,l.type,[27,31,32,33,51]),l.abilities=(0,f.createDefaultShipAbilitys)([6,10,4,11,2,9])),e.game.continueState&&(l.credits=e.game.continueState.credits,l.pos.x=e.game.continueState.pos.x,l.pos.y=e.game.continueState.pos.y,l.abilities=(0,f.createDefaultShipAbilitys)(e.game.continueState.abilities),l.weapons=(0,p.createDefaultShipWeapons)(l.guid,l.type,e.game.continueState.weapons)),e.game.player.push(l),(t=e.game.drones).push.apply(t,(0,r.createDrones)(e,l.pos.clone().addXY(100,0),2,l.guid));var h=(0,r.createNPCs)(e,1,{pos:new s.Vector(-4100,100)},-1);(u=e.game.npcs).push.apply(u,h)},mapSize:function(){return{WW:2e4,WH:2e4}}}}.apply(t,a),void 0===n||(e.exports=n)},1321:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(9262),r(3239),r(2093),r(5482),r(5182),r(6063),r(2261),r(3473),r(7207)],n=function(e,t,r,a,n,o,i,s,A,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.menuGamePlayerAI=void 0,n=l(n),p=u(p);var f=new a.Vector(0,0),h=0,v=60;t.menuGamePlayerAI=function(e){var t=e.SW,r=e.SH,a=e.game,i=a.player[0];for(var s in i.keyCodes)i.keyCodes[s]=!1;for(var s in i.keyCodes)"STRAFELEFT"!==s&&"STRAFERIGHT"!==s&&"LEFT"!==s&&"RIGHT"!==s&&"TIMEFREEZE"!==s&&"CLOAKED"!==s&&"BOOST"!==s&&"CHARGE"!==s&&"MISSILE"!==s&&"FIRE"!==s&&"FLAMETHROWER"!==s&&"PROXIMITYMINE"!==s&&"SPACEMINE"!==s&&"SPACETURRET"!==s&&"TRACELINE"!==s&&Math.random()>.99&&(i.keyCodes[s]=!0);if(i.damageTaken?(h++,i.keyCodes.AUX_ABILITY=1,Math.random()>.99&&(Math.random()>.5?i.keyCodes.TOGGLE_SECONDARY_WEAPON=1:i.keyCodes.TOGGLE_AUX_WEAPON=1)):h=0,i.coaxialMount&&i.coaxialMount.locked&&(i.keyCodes.PRIMARY_WEAPON=1),(h>20||v<60)&&(v>0?(v--,i.keyCodes.TOGGLE_PRIMARY_ABILITY=1):v=60),Math.random(),i.keyCodes.AUX_ABILITY=0,i.keyCodes.DOWN=0,i.weapons.all.map((function(e){return e.ammunition.value=2e3})),i.vel.getLength()<2&&(i.stunned||i.damageTaken)){i.keyCodes.TOGGLE_PRIMARY_WEAPON=1,i.keyCodes.TOGGLE_AUX_ABILITY=1;var u=Math.random();u>.66?a.proximityMines.length<50&&(i.keyCodes.TOGGLE_SECONDARY_WEAPON=1):u>.33?a.spaceMines.length<100&&(i.keyCodes.TOGGLE_AUX_WEAPON=1):a.spaceTurrets.length<60&&(i.keyCodes.PRIMARY_ABILITY=1)}var l=(0,o.getQuadTreesObj)();if(l.All){f.set(i.pos.x,i.pos.y);for(var A=l.queryTreesVec([4,2,3,7,0,17],f,.5*t,.5*r),d=[],p=0;p<A.length;p++){var g=A[p];4!==g.type&&2!==g.type&&3!==g.type&&7!==g.type&&17!==g.type&&0!==g.type&&22!==g.type||d.push(g)}var y=(0,n.default)(i,i.angle,d);i.keyCodes.STRAFELEFT=0,i.keyCodes.STRAFERIGHT=0,i.avoidance=y,i.keyCodes.LEFT=0,i.keyCodes.RIGHT=0;var m=(0,c.wrapRadianAngle)(i.angle)-((0,c.wrapRadianAngle)(y.avoidanceAngle)+Math.PI);y.data&&(m>.02?(m>.8&&(i.keyCodes.LEFT=1),i.keyCodes.STRAFELEFT=1):m<-.02&&(m<-.8&&(i.keyCodes.RIGHT=1),i.keyCodes.STRAFERIGHT=1))}i.damageTaken,i.keyCodes.UP=1,i.keyCodes.TOGGLE_PRIMARY_ABILITY},new a.Vector(0,0),t.default={gui:null,camera:function(e){},splash:null,assert:function(e){return(0,t.menuGamePlayerAI)(e),(0,p.default)(e),!1},init:function(e){var t;(0,p.ProceduralDirectorSetup)({enemies:25,spacesquids:18,spacesnakes:16,spaceSpiders:10,npcsPerPort:30,campingTimeout:2e4,destroyers:1}),e.game.IS_PROCEDURAL=!0,(0,o.SetupQuadTreeRangeType)(1),e.game.spaceFog=[],e.game.anomlies=[],e.game.anomalyPairs=[],(0,s.disableMapShift)(!0);var a=(0,r.createShip)(e,{life:400});a.colorIndex=Math.floor(Math.random()*r.ShipColorStrings.length);for(var n=[27,51,25,28,32],i=0;i<3;i++)(0,A.addWeaponToShip)(a,(0,A.createWeapon)(n.splice(Math.floor(n.length*Math.random()),1)[0],a.guid,a.type));(0,d.addAbilityToShip)(a,(0,d.createAbility)(14)),(0,d.addAbilityToShip)(a,(0,d.createAbility)(0)),(0,d.addAbilityToShip)(a,(0,d.createAbility)(10)),(0,d.addAbilityToShip)(a,(0,d.createAbility)(4)),(0,d.addAbilityToShip)(a,(0,d.createAbility)(15)),a.angle=2*Math.PI*Math.random(),a.pos.x=1e8*(Math.random()-.5),a.pos.y=1e8*(Math.random()-.5),a.SX=a.pos.x+.5*e.game.SW,a.SY=a.pos.y+.5*e.game.SH,e.SX=e.game.SX=a.SX,e.SY=e.game.SY=a.SY,e.game.player.push(a),(t=e.game.drones).push.apply(t,(0,r.createDrones)(e,a.pos.clone().addXY(100*Math.random(),100*Math.random()),4,a.guid))},mapSize:function(){return{WW:32e3,WH:32e3}}}}.apply(t,a),void 0===n||(e.exports=n)},7125:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(7967),r(7899),r(1706),r(6812),r(2965),r(9262),r(5443)],n=function(e,t,r,a,n,o,i,s,A,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),o=u(o),i=l(i),s=l(s),t.default={camera:function(){},splash:null,assert:function(){return!1},init:function(e){e.SX,e.SY,e.SW,e.SH;var t,a,n=(0,r.createShip)(e);e.game.player[0]=n,n.angle=.3,n.keyCodes.UP=1;var o=(0,c.CreateAncient)(Math.random,12,0,n.pos.x,n.pos.y,0);e.game.ancients.push(o.ancient),(t=e.game.ancientBlocks).push.apply(t,o.blocks),n.pos.x+=2100;var u=(0,i.default)(e,4,10,14,{pos:new A.Vector(n.pos.x+300+100*Math.random(),n.pos.y+50+50*Math.random()),life:3e3});(a=e.game.asteroids).push.apply(a,u),e.game.anomalyPairs=[],e.game.anomlies=[],e.game.spaceFog=[];for(var l=0;l<30;l++)s.default.update(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=e.SH,i=1.3*n.TEXT_SIZE_MEDIUM,s=a.default.create("THE ANCIENTS OF OUTER SPACE CAN BOTH ",i,"w"),u=a.default.create("GIVE",i,"g"),l=a.default.create("AND TAKE",i,"r"),A=(0,o.default)(o.GLctx.Texture,t);a.default.addListGL(t,A,[s,u],100,r-400,e),a.default.addGL(t,A,l,100,r-400+i,e)}}}.apply(t,a),void 0===n||(e.exports=n)},2036:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(7967),r(7899),r(1706),r(2965),r(5443)],n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),o=u(o),i=l(i),t.default={camera:function(){},splash:null,assert:function(){return!1},init:function(e){e.SX,e.SY,e.SW,e.SH;var t,a=(0,r.createShip)(e);e.game.player[0]=a,a.angle=.3,a.pos.x=2001,a.pos.y=2e3;var n=(0,s.CreateAncient)(Math.random,12,0,a.pos.x,a.pos.y+300,0);e.game.ancients.push(n.ancient),(t=e.game.ancientBlocks).push.apply(t,n.blocks),a.pos.x,e.game.anomalyPairs=[],e.game.anomlies=[],e.game.spaceFog=[];for(var o=0;o<30;o++)i.default.update(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=e.SH,i=1.3*n.TEXT_SIZE_MEDIUM,s=a.default.create("CHOOSE YOUR PATH ",i,"w"),u=a.default.create("CAREFULLY",i,"g"),l=(0,o.default)(o.GLctx.Texture,t);a.default.addListGL(t,l,[s,u],100,r-400+i,e)}}}.apply(t,a),void 0===n||(e.exports=n)},2810:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(7967),r(7899),r(1706),r(199),r(6812),r(2965),r(840),r(454)],n=function(e,t,r,a,n,o,i,s,A,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),o=u(o),i=l(i),A=l(A),c=l(c),d=l(d),t.default={camera:function(e){var t=e.SW,r=e.SH,a=(0,i.default)().engine;a.SX=e.SX=e.game.player[0].pos.x-.5*t,a.SY=e.SY=e.game.player[0].pos.y-.5*r},splash:null,assert:function(e){return!1},init:function(e){var t,a=e.game,n=e.SW,o=e.SH,u=(e.WW,e.WH,(0,r.createShip)(e,{life:2e3}));u.angle=1.1*Math.PI,a.player.push(u),u.pos.x=6e3,u.pos.y=6e3,a.asteroids=[],(t=a.asteroids).push.apply(t,(0,s.createAsteroidBelt)(Math.random,6e3,6250,3e3,.1*Math.PI,.01*Math.PI,10,90,216).asteroids),(0,i.default)().gui.SX=e.SX=e.game.player[0].pos.x-.8*n,(0,i.default)().gui.SY=e.SY=e.game.player[0].pos.y-.8*o,(0,i.default)().gui.step=1;for(var l=0;l<165;l++)A.default.update(e),c.default.update(e);(0,d.default)((0,i.default)().gui),(0,i.default)().gui.step=0},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),i=(e.game,1.3*n.TEXT_SIZE_MEDIUM),s=a.default.create("A CHARGE ",i,"g"),u=a.default.create("IS A GOOD WAY TO",i,"w"),l=a.default.create("GET OUT OF ",i,"w"),A=a.default.create("ASTEROID BELTS ",i,"r"),c=(0,o.default)(o.GLctx.Texture,t);a.default.addListGL(t,c,[s,u],100,r-400,e),a.default.addListGL(t,c,[l,A],100,r-400+i,e)}}}.apply(t,a),void 0===n||(e.exports=n)},7818:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(2125),r(7967),r(7899),r(1706),r(199),r(6812),r(2965),r(840),r(454),r(9191),r(337),r(6063)],n=function(e,t,r,a,n,o,i,s,A,c,d,p,f,h,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),n=l(n),i=u(i),s=l(s),A=l(A),c=l(c),d=l(d),p=l(p),t.default={camera:function(e){var t=e.SW,r=e.SH,a=(0,s.default)().engine;a.SX=e.SX=e.game.player[0].pos.x-.5*t,a.SY=e.SY=e.game.player[0].pos.y-.5*r},splash:null,assert:function(e){return!1},init:function(e){var t=e.game,n=e.SW,o=e.SH,i=(e.WW,e.WH,(0,r.createShip)(e,{life:2e3}));i.angle=1.1*Math.PI,t.player.push(i),i.pos.x=6e3,i.pos.y=6e3;var u=(0,v.createWeapon)(42,i.guid,i.type);(0,h.createProximityMineFromShip)(i,e,u),t.asteroids=(0,A.default)(e,30,100,150),(0,a.default)(t.asteroids,i.pos.x-1e3,i.pos.y-1e3,2e3,2e3),t.asteroids.forEach((function(t){return Math.random()>.5&&(0,f.removeAsteroid)(t,e)})),(0,s.default)().gui.SX=e.SX=e.game.player[0].pos.x-.5*n,(0,s.default)().gui.SY=e.SY=e.game.player[0].pos.y-.5*o,(0,s.default)().gui.step=1;for(var l=0;l<165;l++)i.keyCodes.DOWN=l%2==0?1:0,c.default.update(e),d.default.update(e);(0,p.default)((0,s.default)().gui),i.keyCodes.UP=1,(0,s.default)().gui.step=0},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),a=(e.game,1.3*o.TEXT_SIZE_MEDIUM),s=n.default.create("BLOW UP ASTEROIDS TO GET ",a,"w"),u=n.default.create("POWERUPS",a,"g"),l=n.default.create("BUT BEWARE OF THE ",a,"w"),A=n.default.create("SPACE PARASITES ",a,"r"),c=(0,i.default)(i.GLctx.Texture,t);n.default.addListGL(t,c,[s,u],100,r-400,e),n.default.addListGL(t,c,[l,A],100,r-400+a,e)}}}.apply(t,a),void 0===n||(e.exports=n)},5936:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(7967),r(6203),r(7899),r(1706),r(2965),r(840),r(199),r(3578),r(337),r(6812),r(9262),r(6063)],n=function(e,t,r,a,n,o,i,s,A,c,d,p,f,h,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),n=l(n),i=u(i),s=l(s),A=l(A),c=l(c),f=l(f),t.default={camera:function(e){e.SW,e.SH},splash:null,assert:function(e){return e.game,!1},init:function(e){var t=e.game,a=(e.SW,e.SH,e.WW,e.WH,(0,r.createShip)(e,{life:2e3}));t.player.push(a),a.angle+=.2*Math.PI,a.pos.set(5400,5e3),e.SX=a.pos.x,e.SY=a.pos.y;var o=(0,d.createDestroyer)(e);t.destroyers.push(o),o.angle-=.33*Math.PI,t.anomlies=[{type:12,pos:new h.Vector(7e3,6e3),positive:!1,effect:8,radius:510,spawnParticles:!1,seedKey:0}],o.pos.set(5400,5430),o.radarAngle=Math.random()*Math.PI;var i=(0,f.default)(e,1,null,null,{type:62})[0];i.radius=30,i.pos.setFromVec(o.pos),i.pos.x-=210,i.pos.y-=180,e.game.asteroids.push(i);var u=(0,n.default)(e,1,6300,5300,140)[0];u.restPos.setFromVec(a.pos.clone()),t.spaceSquids.push(u);for(var l=(0,v.createWeapon)(42,a.guid,a.type),g=0;g<92;g++)s.default.update(e),A.default.update(e),a.keyCodes.DOWN=22===g?1:0,g>89&&((0,p.createProximityMineFromShip)(a,e,l),t.proximityMines[t.proximityMines.length-1].pos.x+=400*(Math.random()-.5),t.proximityMines[t.proximityMines.length-1].pos.y+=400*(Math.random()-.5)),u&&u.pos.set(6600,5300);a.keyCodes.UP=1,(0,c.default)().gui.step=0},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),n=(e.game,1.3*o.TEXT_SIZE_MEDIUM),s=a.default.create("DESTROYERS ",n,"g"),u=a.default.create("HUNT ",n,"w"),l=a.default.create("",n,"r"),A=a.default.create("SPACEBEASTS",n,"r"),c=(0,i.default)(i.GLctx.Texture,t);a.default.addListGL(t,c,[s,u,l],100,r-400,e),a.default.addGL(t,c,A,100,r-400+n,e)}}}.apply(t,a),void 0===n||(e.exports=n)},1029:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(7967),r(7899),r(1706),r(199),r(2965),r(840),r(454),r(6812),r(6063)],n=function(e,t,r,a,n,o,i,s,A,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),o=u(o),i=l(i),s=l(s),A=l(A),c=l(c);var f=function(e){var t=e.SW,r=e.SH,a=(0,i.default)().engine;a.SX=e.SX=e.game.player[0].pos.x-.5*t,a.SY=e.SY=e.game.player[0].pos.y-.5*r};t.default={camera:f,splash:null,assert:function(e){return!1},init:function(e){var t=e.game,a=e.SW,n=e.SH,o=(e.WW,e.WH,(0,r.createShip)(e,{life:2e3}));o.weapons=(0,p.createDefaultShipWeapons)(o.guid,o.type,[27]),o.angle=1.1*Math.PI,t.player.push(o),o.pos.x=6e3,o.pos.y=6e3,t.asteroids.push((0,d.createSingleAsteroid)(240,{x:o.pos.x-600,y:o.pos.y-500},{x:0,y:0},{life:4e3})),(0,i.default)().gui.SX=e.SX=e.game.player[0].pos.x-.5*a,(0,i.default)().gui.SY=e.SY=e.game.player[0].pos.y-.5*n,(0,i.default)().gui.step=1;for(var u=0;u<65;u++)o.keyCodes.PRIMARY_WEAPON=1,s.default.update(e),A.default.update(e);(0,c.default)((0,i.default)().gui),(0,i.default)().gui.step=0,f((0,i.default)().gui),s.default.update(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),i=(e.game,1.3*n.TEXT_SIZE_MEDIUM),s=a.default.create("THE FLAMETHROWER ",i,"g"),u=a.default.create("CAN BE HANDY WHEN ",i,"w"),l=a.default.create("IT'S ",i,"w"),A=a.default.create("DARK ",i,"r"),c=(0,o.default)(o.GLctx.Texture,t);a.default.addListGL(t,c,[s,u],100,r-400,e),a.default.addListGL(t,c,[l,A],100,r-400+i,e)}}}.apply(t,a),void 0===n||(e.exports=n)},5750:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(7967),r(7899),r(1706),r(199),r(6812),r(2125),r(454),r(2965),r(611),r(9262),r(8260),r(6270)],n=function(e,t,r,a,n,o,i,s,A,c,d,p,f,h,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),o=u(o),i=l(i),s=l(s),A=l(A),c=l(c),d=l(d),p=l(p),h=l(h),t.default={camera:function(){},splash:null,assert:function(){return!1},init:function(e){e.SX,e.SY;var t=e.SW,a=e.SH,n=(0,r.createShip)(e,{life:1});e.game.player[0]=n,n.angle=-.17*Math.PI,e.game.anomalyPairs=[],e.game.spaceFog=[],e.game.anomlies=[],n.pos.x=.55*e.SW+1e3,n.pos.y=.45*e.SH+1e3,n.keyCodes.UP=1,e.game.asteroids=(0,s.default)(e,40,8,20),(0,A.default)(e.game.asteroids,1e3,1e3,t,a),e.game.spaceSpiders=(0,h.default)(e,1,n.pos.x+200,n.pos.y+500);var o=(0,p.default)(e,400,new f.Vector(n.pos.x+.8*t,n.pos.y+200),"AURIGA",{life:100});e.game.spacePorts=[o];var u=(0,i.default)().gui;n.SX=e.SX=u.SX=1e3,n.SY=e.SY=u.SY=1e3;for(var l=0;l<10;l++)(0,v.__LifeFixedValueSet)(n,13),d.default.update(e),(0,v.__LifeFixedValueSet)(n,7),n.remove=!1;(0,c.default)(u),e.step=u.step=0},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=e.SH,i=1.3*n.TEXT_SIZE_MEDIUM,s=a.default.create("IF YOUR SHIP POWER IS ",i,"w"),u=a.default.create("LOW",i,"r"),l=a.default.create("FIND A SPACEPORT TO REPAIR YOUR SHIP",i,"w"),A=(0,o.default)(o.GLctx.Texture,t);a.default.addListGL(t,A,[s,u],100,r-400,e),a.default.addGL(t,A,l,100,r-400+i,e)}}}.apply(t,a),void 0===n||(e.exports=n)},3351:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(7967),r(6203),r(7899),r(1706),r(199),r(2965),r(840),r(454)],n=function(e,t,r,a,n,o,i,s,A,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),n=l(n),i=u(i),s=l(s),A=l(A),c=l(c),d=l(d);var p=function(e){var t=e.SW,r=e.SH,a=(0,s.default)().engine;a.SX=e.SX=e.game.player[0].pos.x-.3*t,a.SY=e.SY=e.game.player[0].pos.y-.3*r};t.default={camera:p,splash:null,assert:function(){return!1},init:function(e){var t=e.game,a=(0,r.createShip)(e,{life:2e3});a.angle=Math.PI,t.player.push(a),a.pos.x=6e3,a.pos.y=6e3,a.angle+=Math.PI;var o=(0,n.default)(e,1,6500,6e3,390,{x:6e3,y:6e3},{life:1,infected:!0})[0];t.spaceSquids=[o],(0,s.default)().gui.step=1,(0,s.default)().engine.step=1;for(var i=0;i<60;i++)Math.random()>.9?a.keyCodes.AUX_WEAPON=1:a.keyCodes.AUX_WEAPON=0,A.default.update(e),c.default.update(e);(0,d.default)((0,s.default)().gui),(0,s.default)().gui.step=0,p((0,s.default)().gui),A.default.update(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=e.SH,n=1.3*o.TEXT_SIZE_MEDIUM,s=a.default.create("WATCH OUT FOR",n,"w"),u=a.default.create("SPACE PARASITES",n,"r"),l=a.default.create("THEY MIGHT HIDE IN ",n,"w"),A=a.default.create("SPACE BEASTS",n,"r"),c=(0,i.default)(i.GLctx.Texture,t);a.default.addListGL(t,c,[s,u],100,r-400,e),a.default.addListGL(t,c,[l,A],100,r-400+n,e)}}}.apply(t,a),void 0===n||(e.exports=n)},2403:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7967),r(7899),r(1706),r(199),r(454),r(4138),r(568),r(50),r(998)],n=function(e,t,r,a,n,o,i,s,A,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=l(r),n=u(n),o=l(o),i=l(i),c=l(c);var p=null,f=function(e){for(var t=e.SX+.4*e.SW,r=e.SY+.3*e.SH,a=0;a<26;a+=2)(0,c.default)(e,8*a,700-a,t+a*a*.8+20,r+.5*a+50,1,.1,.1,1-.01*a,"Enable",16+4*a,0,300)};t.default={camera:function(){},splash:null,assert:function(){return!1},init:function(e){var t=e.SW,r=e.SH,a=(0,o.default)().gui;e.SX=a.SX=1e3,e.SY=a.SY=1e3,e.game.spaceFog=[],p=(0,s.createRagdoll)(e.SX+.4*t,e.SY+.5*r,6);var n=e.SX+.4*t,u=e.SY+.3*r;(0,i.default)(a);for(var l=0;l<50;l++){var A=p.links.filter((function(e){return 0===e.type}))[0];A.p0.x=n,A.p0.y=u,A.p1.x=n+10,A.p1.y=u+100,p.anim(1)}f(a),e.step=a.step=0},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,o=e.SH;f(e);var i=p.links.filter((function(e){return 0===e.type}))[0];(0,d.Glow)(i.p0,.3,[],e,.1,0,0,1),(0,A.drawRagdoll)(e,p,36,1,.15,.15,.15);var s=1.3*a.TEXT_SIZE_MEDIUM,u=r.default.create("SPACE CAN BE A CRUEL ",s,"w"),l=r.default.create("MISTRESS",s,"r"),c=r.default.create("LIVE TO FIGHT ANOTHER DAY",s,"w"),h=(0,n.default)(n.GLctx.Texture,t);r.default.addListGL(t,h,[u,l],100,o-400,e),r.default.addGL(t,h,c,100,o-400+s,e)}}}.apply(t,a),void 0===n||(e.exports=n)},1702:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(2125),r(7967),r(7899),r(1706),r(9262),r(3578),r(199),r(6812),r(2965),r(840),r(454),r(337),r(6063)],n=function(e,t,r,a,n,o,i,s,A,c,d,p,f,h,v,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),n=l(n),i=u(i),c=l(c),d=l(d),p=l(p),f=l(f),h=l(h);var y=function(e){var t=e.SW,r=e.SH,a=(0,c.default)().engine;a.SX=e.SX=e.game.player[0].pos.x-.3*t,a.SY=e.SY=e.game.player[0].pos.y-.3*r};t.default={camera:y,splash:null,assert:function(){return!1},init:function(e){var t,n=e.game,o=(0,r.createShip)(e,{life:2e3});o.angle=Math.PI,n.player.push(o),o.pos.x=6e3,o.pos.y=6e3,e.game.asteroids=(0,d.default)(e,30),(0,a.default)(e.game.asteroids,4e3,4e3,4e3,4e3);for(var i=(0,g.createWeapon)(42,o.guid,o.type),u=new s.Vector(200,0),l=new s.Vector(450,0),m=0;m<8;m++)u.setAngle(1.3*-Math.PI+.3*m),l.setAngle(1.3*-Math.PI+.3*m),o.angle=Math.PI+.3*m,o.pos.x=6e3-u.x,o.pos.y=6e3-u.y,l.addXY(6e3,6e3),(0,v.createProximityMineFromShip)(o,e,i);for(m=0;m<12;m++)(t=n.enemies).push.apply(t,(0,A.createEnemies)(e,1,{pos:new s.Vector(7500-100*m,5400+100*m)}));for(o.pos.x=6100,o.pos.y=6100,o.angle=.4*Math.PI,(0,c.default)().gui.step=1,m=0;m<50;m++)p.default.update(e),f.default.update(e);(0,h.default)((0,c.default)().gui),(0,c.default)().gui.step=0,y((0,c.default)().gui),p.default.update(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=e.SH,a=1.3*o.TEXT_SIZE_MEDIUM,s=n.default.create("PROXIMITYMINES WILL ENGAGE WHEN IN ",a,"w"),u=n.default.create("RANGE",a,"g"),l=n.default.create("THE BLAST WILL DAMAGE ANYTHING ",a,"w"),A=n.default.create("IN CLOSE PROXIMITY ",a,"r"),c=(0,i.default)(i.GLctx.Texture,t);n.default.addListGL(t,c,[s,u],100,r-400,e),n.default.addListGL(t,c,[l,A],100,r-400+a,e)}}}.apply(t,a),void 0===n||(e.exports=n)},3101:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(7967),r(7899),r(1706),r(199),r(3039),r(7561),r(4200)],n=function(e,t,r,a,n,o,i,s,A,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),o=u(o),i=l(i),s=l(s);var d=null;t.default={camera:function(){},splash:null,assert:function(){return!1},init:function(e){(d=(0,r.createShip)(e)).angle=-.17*Math.PI,d.pos.x=.7*e.SW+1e3,d.pos.y=.5*e.SH+1e3,d.keyCodes.TOGGLE_PRIMARY_ABILITY=1;var t=(0,i.default)().gui;e.step=t.step=0,e.SX=t.SX=1e3,e.SY=t.SY=1e3},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=e.SH,i=[],u=[];d.keyCodes.TOGGLE_PRIMARY_ABILITY=1,d.keyCodes.UP=1,(0,c.drawPlayerShipThrust)(d,e,14),(0,s.default)(e.game.zoomTXinverted,d,e.SX,e.SY,i,u,null,14),(0,A.drawColorMap)(u,i,(0,o.default)(o.GLctx.Vertices,t),t);var l=1.3*n.TEXT_SIZE_MEDIUM,p=a.default.create("TAKE CARE OF YOUR ",l,"w"),f=a.default.create("SHIP",l,"g"),h=a.default.create("AND IT WILL TAKE CARE OF YOU",l,"w"),v=(0,o.default)(o.GLctx.Texture,t);a.default.addListGL(t,v,[p,f],100,r-400,e),a.default.addGL(t,v,h,100,r-400+l,e)}}}.apply(t,a),void 0===n||(e.exports=n)},8443:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(2125),r(7967),r(7899),r(1706),r(737),r(8180),r(199),r(6812),r(2965),r(840)],n=function(e,t,r,a,n,o,i,s,A,c,d,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),n=l(n),i=u(i),s=l(s),A=l(A),c=l(c),d=l(d),p=l(p),f=l(f);var h=function(e){var t=e.SW,r=e.SH,a=(0,c.default)().engine;a.SX=e.SX=e.game.player[0].pos.x-.5*t,a.SY=e.SY=e.game.player[0].pos.y-.5*r};t.default={camera:h,splash:null,assert:function(e){return!1},init:function(e){var t=e.game,n=e.SW,o=e.SH,i=e.WW,u=e.WH,l=(0,r.createShip)(e,{life:2e3});t.player.push(l),l.angle+=.9*Math.PI,l.pos.x=.7*i,l.pos.y=.7*u,t.asteroids=(0,d.default)(e,12,10,20),(0,a.default)(t.asteroids,l.pos.x-1e3,l.pos.y-1e3,2e3,2e3),t.spaceBats=(0,A.default)(e,400),(0,a.default)(t.spaceBats,l.pos.x-500,l.pos.y-500,500,500),(0,c.default)().gui.SX=e.SX=e.game.player[0].pos.x-.5*n,(0,c.default)().gui.SY=e.SY=e.game.player[0].pos.y-.5*o;for(var v=0;v<220;v++){p.default.update(e),f.default.update(e);var g=(0,s.default)(e);g.keyCodes.PRIMARY_WEAPON=150===v?1:0,g&&(t.clock>5e3?g.keyCodes.UP=Math.random()>.4?1:0:t.clock>3e3?g.keyCodes.UP=Math.random()>.85?1:0:g.keyCodes.UP=Math.random()>.8?1:0)}l.keyCodes.UP=1,(0,c.default)().gui.step=0,h((0,c.default)().gui),p.default.update(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),a=(e.game,1.3*o.TEXT_SIZE_MEDIUM),s=n.default.create("IF YOU GET CAUGHT BY ",a,"w"),u=n.default.create("SPACEBATS",a,"r"),l=n.default.create("GET THE FUCK OUT OF THERE",a,"w"),A=(0,i.default)(i.GLctx.Texture,t);n.default.addListGL(t,A,[s,u],100,r-400,e),n.default.addGL(t,A,l,100,r-400+a,e)}}}.apply(t,a),void 0===n||(e.exports=n)},1363:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(7967),r(7899),r(1706),r(199),r(2965),r(840),r(454)],n=function(e,t,r,a,n,o,i,s,A,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),o=u(o),i=l(i),s=l(s),A=l(A),c=l(c);var d=function(e){var t=e.SW,r=e.SH,a=(0,i.default)().engine;a.SX=e.SX=e.game.player[0].pos.x-.5*t,a.SY=e.SY=e.game.player[0].pos.y-.5*r};t.default={camera:d,splash:null,assert:function(e){return!1},init:function(e){var t=e.game,a=e.SW,n=e.SH,o=(e.WW,e.WH,(0,r.createShip)(e,{life:2e3}));o.angle=1.1*Math.PI,t.player.push(o);var u=t.spaceFog.filter((function(e){return!e.fire}))[0];o.pos.x=u.x+500,o.pos.y=u.y,(0,i.default)().gui.SX=e.SX=e.game.player[0].pos.x-.5*a,(0,i.default)().gui.SY=e.SY=e.game.player[0].pos.y-.5*n,(0,i.default)().gui.step=1;for(var l=0;l<35;l++)l>30&&(s.default.update(e),A.default.update(e)),(0,c.default)((0,i.default)().gui);o.keyCodes.UP=1,(0,i.default)().gui.step=0,d((0,i.default)().gui),s.default.update(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),i=(e.game,1.3*n.TEXT_SIZE_MEDIUM),s=a.default.create("THE DARK ",i,"w"),u=a.default.create("SPACEFOG",i,"r"),l=a.default.create("IS NOT DANGEREOUS, BUT ENEMIES MIGHT HIDE",i,"w"),A=(0,o.default)(o.GLctx.Texture,t);a.default.addListGL(t,A,[s,u],100,r-400,e),a.default.addGL(t,A,l,100,r-400+i,e)}}}.apply(t,a),void 0===n||(e.exports=n)},6306:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(7967),r(7899),r(1706),r(199),r(2965),r(840),r(454)],n=function(e,t,r,a,n,o,i,s,A,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),o=u(o),i=l(i),s=l(s),A=l(A),c=l(c);var d=function(e){var t=e.SW,r=e.SH,a=(0,i.default)().engine;a.SX=e.SX=e.game.player[0].pos.x-.5*t,a.SY=e.SY=e.game.player[0].pos.y-.5*r};t.default={camera:d,splash:null,assert:function(e){return!1},init:function(e){var t=e.game,a=e.SW,n=e.SH,o=(e.WW,e.WH,(0,r.createShip)(e,{life:2e3}));o.angle=.1*Math.PI,t.player.push(o);var u=t.spaceFog.filter((function(e){return e.fire}))[0];o.pos.x=u.x-400,o.pos.y=u.y-200,(0,i.default)().gui.SX=e.SX=e.game.player[0].pos.x-.5*a,(0,i.default)().gui.SY=e.SY=e.game.player[0].pos.y-.5*n,(0,i.default)().gui.step=1;for(var l=0;l<35;l++)l>30&&(s.default.update(e),A.default.update(e)),(0,c.default)((0,i.default)().gui);o.keyCodes.UP=1,(0,i.default)().gui.step=0,d((0,i.default)().gui),s.default.update(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),i=(e.game,1.3*n.TEXT_SIZE_MEDIUM),s=a.default.create("THE ",i,"w"),u=a.default.create("SPACE FIRE",i,"b"),l=a.default.create("WILL DAMAGE YOUR SHIP",i,"w"),A=(0,o.default)(o.GLctx.Texture,t);a.default.addListGL(t,A,[s,u],100,r-400,e),a.default.addGL(t,A,l,100,r-400+i,e)}}}.apply(t,a),void 0===n||(e.exports=n)},3348:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(2125),r(7967),r(6203),r(7899),r(1706),r(6990),r(611),r(3578),r(737),r(2965),r(840),r(199),r(8260),r(6270),r(6063),r(3473)],n=function(e,t,r,a,n,o,i,s,A,c,d,p,f,h,v,g,y,m,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),n=l(n),o=l(o),s=u(s),A=l(A),c=l(c),p=l(p),f=l(f),h=l(h),v=l(v),g=l(g);var x=function(e){var t=e.SW,r=e.SH;e.SX=e.game.player[0].pos.x-.5*t,e.SY=e.game.player[0].pos.y-.7*r};t.default={camera:x,splash:null,assert:function(e){var t,r=e.game;if(r.clock>100&&(e.step=0),r.enemies.length<8){var n=(0,p.default)(e);if(n){var o=(0,d.createEnemies)(e,1);(0,a.default)(o,n.pos.x-900,n.pos.y-900,1800,1800),(t=r.enemies).push.apply(t,o)}}return!1},init:function(e){var t=e.game,n=(e.SW,e.SH,e.WW),i=e.WH,s=(0,r.createShip)(e,{life:2e3});s.weapons=(0,m.createDefaultShipWeapons)(s.guid,s.type,[31,51]),(0,_.addAbilityToShip)(s,(0,_.createAbility)(10)),(0,_.addAbilityToShip)(s,(0,_.createAbility)(4)),t.player.push(s),s.angle+=.9*Math.PI,s.pos.x=.7*n,s.pos.y=.7*i;var u=(0,c.default)(e,380,s.pos.clone(),"GENESIS",{life:0});u.cannons.forEach((function(e){return(0,y.__LifeFixedValueSet)(e,150+150*Math.random())})),(0,y.__LifeFixedValueSet)(u.centerNoneCannon,320),t.spacePorts.push(u),t.enemies=(0,d.createEnemies)(e,8),t.spaceSnake=(0,A.default)(e,1,s.pos.x+700,s.pos.y+200),t.spaceSpiders=(0,g.default)(e,1),(0,a.default)(t.spaceSpiders,s.pos.x-900,s.pos.y-900,1800,1800),t.spaceSquids=(0,o.default)(e,2),t.spaceSquids[0].pos.x=s.pos.x-800,t.spaceSquids[1].pos.x=s.pos.x+800,t.spaceSquids[0].pos.y=s.pos.y-600,t.spaceSquids[1].pos.y=s.pos.y+600,(0,a.default)(t.enemies,s.pos.x-900,s.pos.y-900,1800,1800);for(var l=0;l<120;l++)f.default.update(e),h.default.update(e),s.keyCodes.PRIMARY_WEAPON=10===l||90===l?0:1,l>80&&(Math.random()>.8?s.keyCodes.SECONDARY_WEAPON=1:s.keyCodes.SECONDARY_WEAPON=0);s.keyCodes.STRAFELEFT=1,(0,v.default)().gui.step=0,x((0,v.default)().gui),f.default.update(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),a=(e.game,1.3*i.TEXT_SIZE_MEDIUM),o=n.default.create("SPACEPORTS ",a,"g"),u=n.default.create("CAN BE A SAFE HAVEN",a,"w"),l=n.default.create("BUT DONT STAY TOO LONG",a,"w"),A=(0,s.default)(s.GLctx.Texture,t);n.default.addListGL(t,A,[o,u],100,r-400,e),n.default.addGL(t,A,l,100,r-400+a,e)}}}.apply(t,a),void 0===n||(e.exports=n)},4227:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(2125),r(7967),r(7899),r(1706),r(6990),r(7185),r(2965),r(840),r(199)],n=function(e,t,r,a,n,o,i,s,A,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),n=l(n),i=u(i),s=l(s),c=l(c),d=l(d),p=l(p);var f=function(e){var t=e.SW,r=e.SH;e.SX=e.game.player[0].pos.x-.66*t,e.SY=e.game.player[0].pos.y-.5*r};t.default={camera:f,splash:null,assert:function(e){var t=e.game;return t.player[0]&&t.spaceSnake[0]&&(0,A.distanceBetween)(t.player[0],t.spaceSnake[0].segments[t.spaceSnake[0].segments.length-1])<400&&(t.player[0].keyCodes.AUX_ABILITY=1),!1},init:function(e){var t=e.game,n=e.SW,o=e.SH,i=(0,r.createShip)(e,{life:2e3});t.player.push(i),i.angle+=.9*Math.PI,(0,a.default)(t.player,n+250,o,.3*n,.3*o),t.spaceSnake=(0,s.default)(e,1,i.pos.x+.4*n,i.pos.y+200,Math.round(14+6*Math.random())),t.spaceSnake[0].restPos=i.pos.clone();for(var u=0;u<220;u++)c.default.update(e),d.default.update(e),i.keyCodes.DOWN=10===u?1:0,t.player[0]&&t.spaceSnake[0]&&(0,A.distanceBetween)(t.player[0],t.spaceSnake[0].segments[t.spaceSnake[0].segments.length-1])<400&&(t.player[0].keyCodes.AUX_ABILITY=1);i.keyCodes.UP=1,(0,p.default)().gui.step=0,f((0,p.default)().gui),c.default.update(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),a=(e.game,1.3*o.TEXT_SIZE_MEDIUM),s=n.default.create("USE ",a,"w"),u=n.default.create("ELECTROBASTARD RAY ",a,"r"),l=n.default.create("TO STUN",a,"w"),A=n.default.create("BIOLOGIAL ENEMIES [SPACE SNAKES]",a,"w"),c=(0,i.default)(i.GLctx.Texture,t);n.default.addListGL(t,c,[s,u,l],100,r-400,e),n.default.addGL(t,c,A,100,r-400+a,e)}}}.apply(t,a),void 0===n||(e.exports=n)},9458:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(2125),r(7967),r(7899),r(1706),r(7185),r(2965),r(840),r(199),r(8260),r(6270),r(6063),r(3473)],n=function(e,t,r,a,n,o,i,s,A,c,d,p,f,h,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),n=l(n),i=u(i),A=l(A),c=l(c),d=l(d),p=l(p);var g=function(e){var t=e.SW,r=e.SH;e.SX=e.game.player[0].pos.x-.66*t,e.SY=e.game.player[0].pos.y-.5*r};t.default={camera:g,splash:null,assert:function(e){var t=e.game;return t.player[0]&&t.spaceSpiders[0]&&(0,s.distanceBetween)(t.player[0],t.spaceSpiders[0])<800&&(t.player[0].targetLock=t.spaceSpiders[0],t.player[0].keyCodes.PRIMARY_WEAPON=1),!1},init:function(e){var t=e.game,n=e.SW,o=e.SH,i=(0,r.createShip)(e,{life:2e3});i.abilities=(0,v.createDefaultShipAbilitys)([10,4]),i.weapons=(0,h.createDefaultShipWeapons)(i.guid,i.type,[51]),t.player.push(i),(0,a.default)(t.player,n+250,o,.3*n,.3*o),e.SX=t.player[0].pos.x,e.SY=t.player[0].pos.y,t.spaceSpiders=(0,p.default)(e,1,i.pos.x-.3*n,i.pos.y-20,null,null,{life:50}),i.angle=Math.PI,t.spaceSpiders[0].restPos=i.pos.clone();for(var u=0;u<22;u++){if(i.targetLock=t.spaceSpiders[0],i.abilities.values.energy<1e3){i.abilities.values.energy+=35;var l=i.abilities.passive.find((function(e){return 6===e.type}));l&&(l.value.n=l.value.max)}e.game.player[0]&&(e.SX=e.game.player[0].pos.x-.66*n,e.SY=e.game.player[0].pos.y-.5*o),A.default.update(e),c.default.update(e),t.player[0]&&t.spaceSpiders[0]&&((0,f.__LifeFixedValueSet)(t.spaceSpiders[0],250),(0,s.distanceBetween)(t.player[0],t.spaceSpiders[0])<800&&(i.targetLock=t.spaceSpiders[0],t.player[0].keyCodes.PRIMARY_WEAPON=1))}i.keyCodes.UP=1,(0,d.default)().gui.step=0,g((0,d.default)().gui),A.default.update(e),i.targetLock=t.spaceSpiders[0],t.player[0].keyCodes.PRIMARY_WEAPON=1,t.player[0].keyCodes.SECONDARY_WEAPON=1,t.player[0].keyCodes.AUX_WEAPON=1},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),a=(e.game,1.3*o.TEXT_SIZE_MEDIUM),s=n.default.create("USE ",a,"w"),u=n.default.create("ELECTROBASTARD RAY ",a,"r"),l=n.default.create("TO STUN",a,"w"),A=n.default.create("BIOLOGIAL ENEMIES [SPACE SPIDERS]",a,"w"),c=(0,i.default)(i.GLctx.Texture,t);n.default.addListGL(t,c,[s,u,l],100,r-400,e),n.default.addGL(t,c,A,100,r-400+a,e)}}}.apply(t,a),void 0===n||(e.exports=n)},7757:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(2125),r(7967),r(6203),r(7899),r(1706),r(7185),r(2965),r(840),r(199)],n=function(e,t,r,a,n,o,i,s,A,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),n=l(n),o=l(o),s=u(s),c=l(c),d=l(d),p=l(p);var f=function(e){var t=e.SW,r=e.SH;e.SX=e.game.player[0].pos.x-.5*t,e.SY=e.game.player[0].pos.y-.5*r};t.default={camera:f,splash:null,assert:function(e){var t=e.game;return t.player[0]&&t.spaceSquids[0]&&(0,A.distanceBetween)(t.player[0],t.spaceSquids[0])<700&&(t.player[0].keyCodes.AUX_ABILITY=1),!1},init:function(e){var t=e.game,n=e.SW,i=e.SH,s=(0,r.createShip)(e,{life:2e3});t.player.push(s),s.angle+=.9*Math.PI,(0,a.default)(t.player,n,i,.3*n,.3*i),t.spaceSquids=(0,o.default)(e,1,s.pos.x+.5*n,s.pos.y+200,null,null,{life:5e6});for(var u=0;u<220;u++)c.default.update(e),d.default.update(e),t.player[0]&&t.spaceSquids[0]&&(0,A.distanceBetween)(t.player[0],t.spaceSquids[0])<555&&(t.player[0].keyCodes.AUX_ABILITY=1);s.keyCodes.UP=1,(0,p.default)().gui.step=0,f((0,p.default)().gui),c.default.update(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),a=(e.game,1.3*i.TEXT_SIZE_MEDIUM),o=n.default.create("USE ",a,"w"),u=n.default.create("ELECTROBASTARD RAY ",a,"r"),l=n.default.create("TO STUN",a,"w"),A=n.default.create("BIOLOGIAL ENEMIES [SPACE SQUIDS]",a,"w"),c=(0,s.default)(s.GLctx.Texture,t);n.default.addListGL(t,c,[o,u,l],100,r-400,e),n.default.addGL(t,c,A,100,r-400+a,e)}}}.apply(t,a),void 0===n||(e.exports=n)},6052:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(3578),r(7967),r(7899),r(1706),r(9262),r(3578),r(199),r(2965),r(840),r(454),r(8380),r(6063)],n=function(e,t,r,a,n,o,i,s,A,c,d,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=l(a),o=u(o),A=l(A),c=l(c),d=l(d),p=l(p);var v=function(e){var t=e.SW,r=e.SH,a=(0,A.default)().engine;a.SX=e.SX=e.game.player[0].pos.x-.3*t,a.SY=e.SY=e.game.player[0].pos.y-.3*r};t.default={camera:v,splash:null,assert:function(e){return!1},init:function(e){var t,a=e.game,n=(e.SW,e.SH,e.WW,e.WH,(0,r.createShip)(e,{life:2e3}));n.angle=Math.PI,a.player.push(n),n.pos.x=6e3,n.pos.y=6e3;for(var o=new i.Vector(200,0),u=new i.Vector(450,0),l=0;l<8;l++)o.setAngle(1.3*-Math.PI+.3*l),u.setAngle(1.3*-Math.PI+.3*l),n.angle=Math.PI+.3*l,n.pos.x=6e3-o.x,n.pos.y=6e3-o.y,u.addXY(6e3,6e3),(0,f.createSpaceTurret)(n,e,(0,h.createWeapon)(44,n.guid)),a.spaceTurrets[a.spaceTurrets.length-1].bullets-=Math.ceil(100*Math.random()+l);for(l=0;l<12;l++)(t=a.enemies).push.apply(t,(0,s.createEnemies)(e,1,{pos:new i.Vector(7200-100*l,5400+100*l)}));for(n.pos.x=6100,n.pos.y=6100,n.angle=.4*Math.PI,(0,A.default)().gui.step=1,l=0;l<110;l++)c.default.update(e),d.default.update(e);(0,p.default)((0,A.default)().gui),(0,A.default)().gui.step=0,v((0,A.default)().gui),c.default.update(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),i=(e.game,1.3*n.TEXT_SIZE_MEDIUM),s=a.default.create("SET UP SPACE TURRETS TO ",i,"w"),u=a.default.create("DEFEND",i,"g"),l=a.default.create("PARTS OF ",i,"w"),A=a.default.create("SPACE",i,"r"),c=(0,o.default)(o.GLctx.Texture,t);a.default.addListGL(t,c,[s,u],100,r-400,e),a.default.addListGL(t,c,[l,A],100,r-400+i,e)}}}.apply(t,a),void 0===n||(e.exports=n)},9642:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))},A=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7967),r(7899),r(1706),r(611),r(9262),r(3578),r(199),r(2965),r(840),r(454),r(4590)],n=function(e,t,r,a,n,o,i,s,c,d,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=A(r),n=u(n),o=A(o),c=A(c),d=A(d),p=A(p),f=A(f),h=A(h);var v=function(e){var t=e.SW,r=e.SH,a=(0,c.default)().engine;a.SX=e.SX=e.game.npcs[0].pos.x-.3*t,a.SY=e.SY=e.game.npcs[0].pos.y-.3*r};t.default={camera:v,splash:null,assert:function(){return!1},init:function(e){var t=e.game,r=e.WW,a=e.WH,n=(0,o.default)(e,380,new i.Vector(.7*e.WW,.1*e.WH),"GENESIS",{life:100});t.spacePorts=[n];var u=(0,h.default)(Math.random,.6*r,.5*a,250);t.rockFormations=u.rockFormations,t.rockFormationSystemRadius=[u.rfSystem],t.npcs=l([],(0,s.createNPCs)(e,1,{},0),!0),t.npcs.map((function(e){return e.miningRig.target=t.rockFormations[t.rockFormations.length-1]})),t.npcs.map((function(e){return e.pos.setFromVec(e.miningRig.target.pos)}));var A=0;for((0,c.default)().gui.step=1;4!==t.npcs[0].miningRig.armState&&A<500;)A++,d.default.update(e),p.default.update(e);t.npcs[0].miningRig.armState=4,(0,f.default)((0,c.default)().gui),(0,c.default)().gui.step=0,v((0,c.default)().gui),d.default.update(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,o=e.SH,i=1.3*a.TEXT_SIZE_MEDIUM,s=r.default.create("PROTECT THE ",i,"w"),u=r.default.create("WORKERS.",i,"g"),l=r.default.create("AND THEY WILL PROTECT THE ",i,"w"),A=r.default.create("SPACEPORTS.",i,"g"),c=(0,n.default)(n.GLctx.Texture,t);r.default.addListGL(t,c,[s,u],100,o-400,e),r.default.addListGL(t,c,[l,A],100,o-400+i,e)}}}.apply(t,a),void 0===n||(e.exports=n)},4391:(e,t,r)=>{var a,n;a=[r,t,r(3473),r(6063)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupShipForTests=void 0,t.setupShipForTests=function(e){e.weapons=(0,a.createDefaultShipWeapons)(e.guid,e.type,[27,28,51,32,44,43,33,26,42]),e.abilities=(0,r.createDefaultShipAbilitys)([6,10,4,15,11,2,9,1,5,8,3,12,13,14])}}.apply(t,a),void 0===n||(e.exports=n)},2122:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(5182),r(199),r(2093),r(737),r(4077),r(3578),r(6039),r(6063),r(3473),r(6812),r(2826),r(9262),r(7207),r(8854),r(2800)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f,h,v,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a),i=o(i),l=o(l);var y=1;t.default={splash:null,gui:function(e){},assert:function(e){var t=(0,i.default)(e);t&&(t.life=2e4),e.game.spaceSpiders=[],e.game.spaceSnake=[],e.game.spaceSquids=[],e.game.enemies=[],e.game.npcs=[],e.game.spacePorts=[],(0,s.LOG_GL_FIXED_FORCED)(y,"BULLET_SPEED"),(0,s.LOG_GL_FIXED_FORCED)(e.game.bullets.length,"bullets"),(0,s.LOG_GL_FIXED_FORCED)(e.game.rockets.length,"rockets");var r=e.game.asteroids[0];return r&&(r.life=5e11,(0,s.LOG_GL_FIXED_FORCED)(r.vel.x,"ast v x"),(0,s.LOG_GL_FIXED_FORCED)(r.forceX,"ast F x"),(0,s.LOG_GL_FIXED_FORCED)(r.vel.y,"ast v y"),(0,s.LOG_GL_FIXED_FORCED)(r.forceY,"ast F y")),function(e,t){if(e){var r=(0,p.createBullet)(26),a=(0,f.vec_pool_pop)(0,0);a.setLength(1800),a.setAngle(2*Math.PI*Math.random()),r.pos=e.pos.clone(),r.pos.add(a),a.setLength(y),a.setAngle(a.getAngle()+Math.PI),r.vel.set(a.x,a.y),t.game.bullets.push(r),(0,f.vec_pool_put)(a),y<200&&(y+=.01)}}(r,e),Math.random()>.982&&function(e,t,r){if(e){var a=t.pos.x,n=t.pos.y,o=t.angle,i=(0,f.vec_pool_pop)(0,0);i.setLength(1800),i.setAngle(2*Math.PI*Math.random()),t.pos=e.pos.clone(),t.pos.add(i),t.angle=i.getAngle()+Math.PI,(0,f.vec_pool_put)(i);var s=(0,v.createRocket)(t,t.weapons.hash[31],e);t.pos.x=a,t.pos.y=n,t.angle=o,r.game.rockets.push(s)}}(r,t,e),r&&(r.remove=!1,(0,g.drawExternal)({polys:[r.pos.x,r.pos.y,r.opos.x,r.opos.y],autoSXSY:!0,mode:(0,a.default)().gui.gl.LINES,a:1,b:1,g:1,r:0})),!1},init:function(e){(0,l.default)(e,(0,a.default)().gui),e.game.IS_PROCEDURAL=!1,(0,n.SetupQuadTreeRangeType)(1),(0,h.ProceduralDirectorSetup)({destroyers:0,enemies:0,npcsPerPort:0,spacesnakes:0,spaceSpiders:0,spacesquids:0,campingTimeout:1e11}),e.game.spaceFog=[],e.game.anomlies=[],e.game.anomalyPairs=[],(0,r.disableMapShift)(!0);var t=(0,u.createShip)(e);t.weapons=(0,A.createDefaultShipWeapons)(t.guid,t.type,[27,28,32,44,43,33,31,26,25]),t.abilities=(0,c.createDefaultShipAbilitys)([6,10,4,15,11,2,9,1,5,8]),t.pos.x=.2*e.WW,t.pos.y=.2*e.WH,t.angle=0,t.pos.x,t.pos.y,e.game.player.push(t);for(var o=t.pos.x-200,i=t.pos.y-350,s=[140,20,30,80,30,50,20,30,80,30,50,20,30,80,30,50,20,30,80,30,50],p=0;p<s.length;p++)e.game.asteroids.push((0,d.createSingleAsteroid)(s[p],{x:o,y:i},{x:0,y:0},0===p?{life:43534534534}:{vel:new f.Vector(.1,.1)}))},mapSize:function(){return{WW:2e4,WH:2e4}}}}.apply(t,a),void 0===n||(e.exports=n)},4964:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(5182),r(199),r(2093),r(737),r(4077),r(3578),r(6039),r(6270),r(6990),r(6812),r(6763),r(4391)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a),i=o(i),l=o(l),c=o(c),t.default={splash:null,gui:function(e){},assert:function(e){var t,r=(0,i.default)(e);if(r&&(0,A.__LifeFixedValueSet)(r,200),(0,s.LOG_GL_FIXED_FORCED)(e.game.spaceSnake.length,"snakes"),0===e.game.spaceSnake.length)(t=e.game.spaceSnake).push.apply(t,(0,c.default)(e,1,r.pos.x+400,r.pos.y+100));else{var a=e.game.spaceSnake[0];a&&((0,s.LOG_GL_FIXED_FORCED)(a.infected+"","infected"),(0,s.LOG_GL_FIXED_FORCED)(a.attackMode+"","attackmode"),(0,s.LOG_GL_FIXED_FORCED)(!!a.spasm+"","spasm"),(0,s.LOG_GL_FIXED_FORCED)(a.life+"","life"),(0,s.LOG_GL_FIXED_FORCED)(a.tryToMoveAwayAfterStationaryAttackMs," M/A a.st.att"),(0,s.LOG_GL_FIXED_FORCED)(a.fleeDangerMS," flee"))}return!1},init:function(e){var t,o;(0,l.default)(e,(0,a.default)().gui),e.game.IS_PROCEDURAL=!1,(0,n.SetupQuadTreeRangeType)(1),e.game.spaceFog=[],e.game.anomlies=[],e.game.anomalyPairs=[],(0,r.disableMapShift)(!0);var i=(0,u.createShip)(e);e.game.player.push(i),i.pos.x=.6*e.WW,i.pos.y=.6*e.WH,(0,f.setupShipForTests)(i),(t=e.game.spaceSnake).push.apply(t,(0,c.default)(e,1,i.pos.x+700,i.pos.y+100));var s=(0,p.mulberry32)(7676),A=(0,d.createAsteroidBelt)(s,.2*e.WW,.5*e.WH,300,2.1,2,30,150,120,1);e.game.asteroidBelts.push(A.belt),(o=e.game.asteroids).push.apply(o,A.asteroids)},mapSize:function(){return{WW:2e4,WH:2e4}}}}.apply(t,a),void 0===n||(e.exports=n)},1784:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(5182),r(9262),r(199),r(2093),r(737),r(3578),r(6039),r(6812),r(6763)],n=function(e,t,r,a,n,i,s,u,l,A,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o(n),s=o(s),l=o(l),t.default={splash:null,gui:function(e){},assert:function(e){return(0,s.default)(e),!1},init:function(e){var t;(0,l.default)(e,(0,n.default)().gui),e.game.IS_PROCEDURAL=!1,(0,i.SetupQuadTreeRangeType)(1),e.game.spaceFog=[],e.game.anomlies=[],e.game.anomalyPairs=[],(0,r.disableMapShift)(!0);var o=(0,u.createShip)(e);e.game.player.push(o),o.pos.x=.6*e.WW,o.pos.y=.6*e.WH;for(var s=0;s<3;s++)e.game.asteroids.push((0,A.createSingleAsteroid)(30+30*s,new a.Vector(o.pos.x+200*Math.random(),o.pos.y+-150+70*s*2),new a.Vector(0,0)));var d=(0,c.mulberry32)(7676),p=(0,A.createAsteroidBelt)(d,o.pos.x-1200,o.pos.y,300,2.1,2,30,150,120,1);e.game.asteroids.push((0,A.createSingleAsteroid)(300,{x:o.pos.x+400,y:o.pos.y},{x:0,y:0})),e.game.asteroidBelts.push(p.belt),(t=e.game.asteroids).push.apply(t,p.asteroids)},mapSize:function(){return{WW:2e4,WH:2e4}}}}.apply(t,a),void 0===n||(e.exports=n)},3702:function(e,t,r){var a,n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(5182),r(199),r(2093),r(737),r(4077),r(3578),r(6039),r(9801),r(7496),r(6063),r(3473),r(6812),r(9207),r(3605)],n=function(e,t,r,a,n,i,s,u,l,A,c,d,p,f,h,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=o(a),i=o(i),l=o(l);var g=0,y=0;t.default={splash:null,gui:function(e){},assert:function(e){var t,r,a,n;(0,i.default)(e),(0,s.LOG_GL_FIXED_FORCED)(e.game.minefields.length,"minefields"),(0,s.LOG_GL_FIXED_FORCED)(e.game.spaceMines.length,"mines"),(0,s.LOG_GL_FIXED_FORCED)(e.game.asteroids.length,"asteroids");for(var o=0,u=0;u<e.game.asteroids.length;u++)o+=e.game.asteroids[u].life;(0,s.LOG_GL_FIXED_FORCED)(o.toFixed(1),"asteroid jt. life");var l=e.game.force2[0];(null==l?void 0:l.changing)&&((0,s.LOG_GL_FIXED_FORCED)(((null===(t=l.changing)||void 0===t?void 0:t.currentPositiveMS)/(null===(r=l.changing)||void 0===r?void 0:r.positiveMS)).toFixed(2),"Positive"),(0,s.LOG_GL_FIXED_FORCED)(((null===(a=l.changing)||void 0===a?void 0:a.currentNegativeMS)/(null===(n=l.changing)||void 0===n?void 0:n.negativeMS)).toFixed(2),"Negative"),(0,s.LOG_GL_FIXED_FORCED)(l.intensity.toFixed(2),"intensity"),(0,s.LOG_GL_FIXED_FORCED)(l.radius,"f2 RADIUS"));var A=e.game.minefields[0];if(A?(0,s.LOG_GL_FIXED_FORCED)(A.mines.length,"minefield mines"):(0,s.LOG_GL_FIXED_FORCED)("N/A","minefield mines"),300===e.frameCnt)for(var c=0;c<30;c++)e.game.parasites.push((0,v.createParasite)(g-200+400*Math.random(),y-200+400*Math.random(),30+10*Math.random(),g,y+2e3));return!1},init:function(e){(0,l.default)(e,(0,a.default)().gui),e.game.IS_PROCEDURAL=!1,(0,n.SetupQuadTreeRangeType)(1),e.game.spaceFog=[],e.game.anomlies=[],e.game.anomalyPairs=[],(0,r.disableMapShift)(!0);var t=(0,u.createShip)(e);t.weapons=(0,d.createDefaultShipWeapons)(t.guid,t.type,[27,28,32,44,43,33,26,25]),t.abilities=(0,p.createDefaultShipAbilitys)([6,10,4,15,11,2,9,1,5,8]),t.pos.x=.2*e.WW,t.pos.y=.2*e.WH,t.angle=0,g=t.pos.x,y=t.pos.y,e.game.player.push(t),e.game.spaceMines.push((0,c.createSpaceMineWoShip)(t.pos.x-100,t.pos.y-1e3));for(var o=t.pos.x-500,i=t.pos.y-1500,s=0;s<20;s++)for(var v=0;v<20;v++)(s<8||v<8||s>12||v>12)&&e.game.asteroids.push((0,f.createSingleAsteroid)(8,{x:o+50*s,y:i+50*v},{x:0,y:0}));(0,h.createAnomaly)(e,t.pos.x,t.pos.y+1e3,!1,4);var m=t.pos.x,_=t.pos.y+1e3;for(s=0;s<20;s+=2)for(v=0;v<20;v+=2)(s<8||v<8||s>12||v>12)&&e.game.asteroids.push((0,f.createSingleAsteroid)(8+30*Math.random(),{x:m+50*s,y:_+50*v},{x:0,y:0}));(0,A.createMineField)(e,t.pos.x+2400,t.pos.y,1e3,700,Math.random,2.1)},mapSize:function(){return{WW:2e4,WH:2e4}}}}.apply(t,a),void 0===n||(e.exports=n)},4252:function(e,t,r){var a,n,o,i=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,n)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=o(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return s(t,e),t}),l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(5182),r(9262),r(199),r(2093),r(8402),r(737),r(4077),r(4590),r(3578),r(611),r(6039),r(7561),r(2800),r(6270),r(7185),r(1401)],n=function(e,t,r,a,n,o,i,s,A,c,d,p,f,h,v,g,y,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=l(n),s=l(s),c=u(c),p=l(p),f=l(f),t.default={splash:null,gui:function(e){},assert:function(e){var t=(0,s.default)(e),r=(e.game.npcs[0].miningRig,e.game.destroyers[0]),a=e.game.spacePorts[0];if(r||e.game.destroyers.push((0,d.createDestroyer)(e)),r&&a){var n=[];r.life>100&&(0,y.distanceBetweenVectors)(r.pos,a.pos)>3e3&&(r.life=550),a.pos.clone().add({x:-1500,y:1500}),(0,A.LOG_GL_FIXED_FORCED)((0,y.distanceBetweenVectors)(r.pos,t.pos).toFixed(1),"destroyer dist"),(0,A.LOG_GL_FIXED_FORCED)(r.life.toFixed(1),"destroyer LIFE"),(0,A.LOG_GL_FIXED_FORCED)(r.repairing+"","destroyer repairing"),(0,m.printRigDistributionHash)(),(0,h.line2Poly)(a.pos.x,a.pos.y,r.pos.x,r.pos.y,n,2),(0,v.drawExternal)({polys:n,autoSXSY:!0}),n=[];try{(0,h.line2Poly)(a.pos.x,a.pos.y,e.game.spaceSnake[0].segments[0].pos.x,e.game.spaceSnake[0].segments[0].pos.y,n,2),(0,h.line2Poly)(a.pos.x,a.pos.y,e.game.spaceSquids[0].pos.x,e.game.spaceSquids[0].pos.y,n,2),(0,v.drawExternal)({polys:n,r:1,g:0,b:0,autoSXSY:!0})}catch(e){}}return!1},init:function(e){var t,s,u;(0,f.default)(e,(0,n.default)().gui),e.game.IS_PROCEDURAL=!1,(0,o.SetupQuadTreeRangeType)(1),e.game.spaceFog=[],e.game.anomlies=[],e.game.anomalyPairs=[],(0,r.disableMapShift)(!0);var l=(0,d.createShip)(e);l.pos.x=.6*e.WW,l.pos.y=.6*e.WH;var A=(0,p.default)(e,500,new a.Vector(l.pos.x,l.pos.y),"ZOEGAS");e.game.spacePorts.push(A),A.cannons[1].life=30,l.angle=2*Math.PI*Math.random(),e.game.player.push(l);var h=(0,i.randWithWhiteHole)(98374).rng,v=(0,c.default)(h,l.pos.x+3e3,l.pos.y,200);e.game.rockFormationSystemRadius.push(v.rfSystem),(t=e.game.rockFormations).push.apply(t,v.rockFormations),(s=e.game.rockFormationsArcs).push.apply(s,v.rockFormationArcs);var y=(0,d.createDestroyer)(e,{pos:new a.Vector(.3*e.WW,.3*e.WH)});(0,g.DamgeItemFixedValue)(y,.9*y.life),e.game.destroyers.push(y);for(var m=(0,a.vec_pool_pop)(0,0),_=0;_<160;_++)m.setLength(1300),m.setAngle(Math.PI*Math.random()*2),m.add(A.pos),e.game.rockFormations.push((0,c.createRFsingle)(m,40));for(_=0;_<8;_++){var x=(0,d.createNPCs)(e,1,{pos:new a.Vector(l.pos.x+250*Math.random(),l.pos.y+250*Math.random())},-1);(u=e.game.npcs).push.apply(u,x)}},mapSize:function(){return{WW:2e4,WH:2e4}}}}.apply(t,a),void 0===n||(e.exports=n)},3473:function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};a=[r,t,r(633),r(4077)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reOrderAbilitys=t.createDefaultShipAbilitys=t.addAbilityToShip=t.createAbility=void 0;var n=function(){return r.abilityDatas.ultrabright},i=function(){return r.abilityDatas.energy},s=function(){return r.abilityDatas.armorplates},u=function(){return r.abilityDatas.regen},l=function(){return r.abilityDatas.cloak},A=function(){return r.abilityDatas.ultraboost},c=function(){return r.abilityDatas.shield},d=function(){return r.abilityDatas.targetlock},p=function(){return r.abilityDatas.slowmotion},f=function(){return r.abilityDatas.lazerSight},h=function(){return r.abilityDatas.miningRig},v=function(){return r.abilityDatas.miningRigPlatinum},g=function(){return r.abilityDatas.miningRigRareMinerals},y=function(){return r.abilityDatas.traceline},m=function(){return r.abilityDatas.strafeEngines},_=function(){return r.abilityDatas.coaxialMount},x=function(e){var t=(0,r.cloneAbility)(e()),a=(0,r.cloneAbility)(e());return t.original=a,t};t.createAbility=function(e){switch(e){case 0:return x(u);case 1:return x(l);case 3:return x(c);case 2:return x(A);case 4:return x(d);case 5:return x(p);case 6:return x(i);case 7:return x(s);case 8:return x(n);case 10:return x(f);case 11:return x(h);case 12:return x(v);case 13:return x(g);case 9:return x(y);case 14:return x(m);case 15:return x(_);default:(0,a.LOG_GL_FIXED_FORCED)(e,"ERR CREATING ABILITY:")}},t.addAbilityToShip=function(e,t,r){15===t.type&&(e.coaxialMount.barrel.x=.7*e.radius,e.coaxialMount.pos.y=.2*e.radius),e.abilities.hash[t.type]=t,0===t.activationType?e.abilities.passive.push(t):(e.abilities.all.push(t),r?r.types.push(t.type):e.abilities.primary.types.length<=e.abilities.secondary.types.length?e.abilities.aux.types.length<e.abilities.primary.types.length?e.abilities.aux.types.push(t.type):e.abilities.primary.types.push(t.type):e.abilities.aux.types.length<e.abilities.secondary.types.length?e.abilities.aux.types.push(t.type):e.abilities.secondary.types.push(t.type),S(e.abilities))},t.createDefaultShipAbilitys=function(e){for(var r=null!=e?e:[6],a=[],n=0;n<r.length;n++)a.push((0,t.createAbility)(r[n]));for(var i=a.filter((function(e){return 1===e.activationType})),s=a.filter((function(e){return 0===e.activationType})),u=o([],i,!0),l={types:[],index:0,canSelect:!0,arrayType:0,name:"primary",toggle_cooldown:0,subtype:"ability"},A={types:[],index:0,canSelect:!0,arrayType:1,name:"secondary",toggle_cooldown:0,subtype:"ability"},c={types:[],index:0,canSelect:!0,arrayType:2,name:"aux",toggle_cooldown:0,subtype:"ability"},d={all:i,primary:l,secondary:A,aux:c,byArrayType:[l,A,c],passive:s,active:{cloak:0,shield:0},values:{energy:0},hash:{}};u.length>0;)u.length>0&&d.primary.types.push(u.shift().type),u.length>0&&d.secondary.types.push(u.shift().type),u.length>0&&d.aux.types.push(u.shift().type);return S(d),d},t.reOrderAbilitys=function(e,t,r,a,n){t.types.splice(n,0,e.types.splice(e.types.indexOf(r),1)[0]),S(a)};var S=function(e){var t=e.all,r={};r[0]=e.primary.types,r[1]=e.secondary.types,r[2]=e.aux.types;for(var a=0;a<t.length;a++){var n=t[a];if(1===n.activationType){for(var o=0;o<e.primary.types.length;o++)if(n.type===e.primary.types[o]){n.arrayType=e.primary.arrayType;break}for(o=0;o<e.secondary.types.length;o++)if(n.type===e.secondary.types[o]){n.arrayType=e.secondary.arrayType;break}for(o=0;o<e.aux.types.length;o++)if(n.type===e.aux.types[o]){n.arrayType=e.aux.arrayType;break}}}}}.apply(t,a),void 0===n||(e.exports=n)},6270:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};a=[r,t,r(7344),r(1330),r(34),r(1330),r(737),r(7899),r(770),r(2273),r(7207)],n=function(e,t,r,a,n,s,u,l,A,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.__LifeFixedValueSet=t.LifeMaxValue=t.LifeIncreaseFixedValue=t.DamgeItemFixedValue=t.DamageImpact=t.DamageByForce=t.DamageItem2=void 0,u=i(u);var p=function(e,t){if(e.life<e.oLife*(0,d.getFleeDangerLifePercent)()){var r=Math.max((0,d.getFleeDangerTime)(),6e3);e.fleeDangerMS<r&&(e.fleeDangerMS+=666,e.fleeDirection=t.getAngle())}};t.DamageItem2=function(e,i,u){if(!i.remove&&!u.remove){if(19===i.type){var l=(0,c.getSpaceSquidFromGuid)(i.ownerGuid),A=o(o({},u),{damage:o(o({},u.damage),{value:.1*u.damage.value})});(0,t.DamageItem2)(e,l,A)}else if(36===i.type){var d=(0,r.getSpacesnakeFromSegment)(i.guid);if(d.life<1||d.remove)return;d.tryToMoveAwayAfterStationaryAttackMs||d.guid===u.ownerGuid||p(d,u.vel);var h=1;d.guid===u.ownerGuid&&(h=.001);var v=n.damageArmorMap[u.damage.type][i.armor.type]*h;u.damage.value>0&&(i.life-=u.damage.value*v,51===u.type&&(d.life-=u.damage.value*v)),u.damage.valuePercent>0&&(i.life-=i.life*u.damage.valuePercent*v),d.life<1&&(d.segments.forEach((function(e){return e.remove=!0})),d.remove=!0,f(e,u.ownerGuid,d.type))}else{if(!i.armor||!u.damage){var g=(0,s.TypesToString)(i.type)+" <-> "+(0,s.TypesToString)(u.type),y="unknown damage/armor: ";throw console.error(y,g),y+g}if(v=n.damageArmorMap[u.damage.type][i.armor.type],u.damage.value>0&&(i.life-=u.damage.value*v),u.damage.valuePercent>0&&(i.life-=i.life*u.damage.valuePercent*v),u.damage.pushPercentM>0){var m=u.vel.x,_=u.vel.y;i.vel.x+=m*u.damage.pushPercentM*i.inv_m*v*10,i.vel.y+=_*u.damage.pushPercentM*i.inv_m*v*10}u.damage.slowPercentM>0&&(i.vel.x*=1-u.damage.slowPercentM*v*i.inv_m*.3,i.vel.y*=1-u.damage.slowPercentM*v*i.inv_m*.3),u.damage.stunMS,45===i.type&&(i.damageTaken=!0),(i.life<1||i.remove)&&(i.remove=!0,f(e,u.ownerGuid,i.type))}void 0!==u.remove&&(u.remove=!0),(0,a.PredatorLike)(i.type)&&p(i,u.vel)}};var f=function(e,t,r){if(t){var a=(0,u.default)(e);if(a&&a.guid===t){var n=0;switch(r){case 8:n=300;break;case 9:n=560;break;case 10:n=220;break;case 1:n=80;break;case 2:n=-100;break;case 0:n=-2300;break;case 23:n=-2e3;for(var o=e.game.spacePorts,i=48e4,c=0;c<o.length;c++){var d=o[c];d.weaponsActive=!0,d.isEnemyForMS=i;for(var p=d.cannons,f=0;f<p.length;f++){var h=p[f];h.aggressionForGuidsHash[a.guid]=5e3,h.weaponsActiveTimerMS=i}}e.game.notifications.push({life:l.NOTIFICATION_LIFE,type:72,onlyForGuid:a.guid,message:"Consider yourself an enemy to the spaceports in this sector."})}0!==n&&((0,A.updateShipCredits)(a,n),n>0?e.game.notifications.push({life:2*l.NOTIFICATION_LIFE,type:73,onlyForGuid:a.guid,message:(0,s.TypesToString)(r).toLocaleLowerCase()+" bounty "+n+" $"}):e.game.notifications.push({life:5*l.NOTIFICATION_LIFE,type:72,onlyForGuid:a.guid,message:"you have been fined "+Math.abs(n)+" $ for destroying a "+(0,s.TypesToString)(r).toLocaleLowerCase()}))}}};t.DamageByForce=function(e,r,a,o){if(a){45===r.type&&(r.damageTaken=!0);var i=(a.value>0?a.value:a.valuePercent*r.life)*o;if(!Number.isNaN(i)&&0!==i){if(r.armor){var s=n.damageArmorMap[a.type][r.armor.type];(0,t.DamgeItemFixedValue)(r,i*s)}else(0,t.DamgeItemFixedValue)(r,i);r.remove&&f(e,a.ownerGuid,r.type)}}},t.DamageImpact=function(e,t){},t.DamgeItemFixedValue=function(e,t){e.life-=t,45===e.type&&(e.damageTaken=!0),e.life<=0&&(e.remove=!0)},t.LifeIncreaseFixedValue=function(e,t){e.life+=t},t.LifeMaxValue=function(e,t){e.life>t&&(e.life=t)},t.__LifeFixedValueSet=function(e,t){return e.life=t}}.apply(t,a),void 0===n||(e.exports=n)},5081:(e,t,r)=>{var a;a=function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.GAME_EVENT=void 0,function(e){e[e.EXPLOSION=0]="EXPLOSION",e[e.SPACE_BULLET=1]="SPACE_BULLET",e[e.SPACE_BULLET_IMPACT=2]="SPACE_BULLET_IMPACT",e[e.MENU_SELECT=3]="MENU_SELECT",e[e.START_GAME=4]="START_GAME",e[e.RESUME_GAME=5]="RESUME_GAME",e[e.PAUSE_GAME=6]="PAUSE_GAME",e[e.NPC_FRIENDLY_FIRE=7]="NPC_FRIENDLY_FIRE",e[e.PLAYER_DAMAGE=8]="PLAYER_DAMAGE",e[e.PLAYER_DAMAGE_LEVEL_CRITICAL=9]="PLAYER_DAMAGE_LEVEL_CRITICAL",e[e.PLAYER_DAMAGE_LEVEL_OK=10]="PLAYER_DAMAGE_LEVEL_OK",e[e.PLAYER_DEAD=11]="PLAYER_DEAD",e[e.ENEMIES_NEARBY=12]="ENEMIES_NEARBY",e[e.TIME_SCALE_CHANGED=13]="TIME_SCALE_CHANGED"}(r||(t.GAME_EVENT=r={}))}.apply(t,[r,t]),void 0===a||(e.exports=a)},3700:(e,t,r)=>{var a;a=function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StateMachine=t.defaultGameState=t.KeyInputType=void 0,function(e){e[e.GAME=0]="GAME",e[e.MENU=1]="MENU",e[e.CONSOLE=2]="CONSOLE"}(r||(t.KeyInputType=r={})),t.defaultGameState=function(){return{console:{active:!1},menu:{active:!0},keyInput:{target:r.MENU}}},t.StateMachine=function(e){return{consoleActivate:function(){e.console.active=!0,e.keyInput.target=r.CONSOLE},consoleDisable:function(){e.console.active=!1,e.menu.active?e.keyInput.target=r.MENU:e.keyInput.target=r.GAME},menuActivate:function(){console.log("state m menu activate"),e.console.active||(e.menu.active=!0,e.keyInput.target=r.MENU)},menuDisable:function(){console.log("state m menu disable"),e.console.active||(e.menu.active=!1,e.keyInput.target=r.GAME)}}}}.apply(t,[r,t]),void 0===a||(e.exports=a)},8808:(e,t,r)=>{var a;a=function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyTypeMode=void 0,function(e){e[e.TYPEING=0]="TYPEING",e[e.PLAYING=1]="PLAYING"}(r||(t.KeyTypeMode=r={}))}.apply(t,[r,t]),void 0===a||(e.exports=a)},1330:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WEAPON_TYPES=t.PUSHING_TYPES=t.EnemyLike=t.PredatorLike=t.ShipLike=t.isProjectile=t.projectileTypes=t.TypesToString=void 0,t.TypesToString=function(e){switch(e){case 45:return"SHIP";case 26:return"BULLET";case 33:return"MISSILE";case 31:return"ROCKET";case 49:return"ENEMY BULLET";case 29:return"SPACEPORT BULLET";case 21:return"PARTICLE";case 9:return"SPACE SQUID";case 36:return"SNAKE SEGMENT";case 8:return"SNAKE";case 10:return"SPIDER";case 4:return"ASTEROID";case 11:return"ROCKFORMATION";case 3:return"SPACEPORT";case 23:return"SPACEPORT CANNON";case 1:return"ENEMY SHIP";case 50:return"DRONE";case 2:return"NEUTRAL SHIP";case 42:return"PROXIMITY MINE";case 43:return"SPACE MINE";case 44:return"SPACE TURRET";case 7:return"RF SYS RADIUS";case 25:return"CHARGE";case 0:return"DESTROYER";case 12:return"ANOMALY";case 14:return"BLACK HOLE";case 13:return"WHITE HOLE";case 15:return"SPACEFOG FIRE";case 16:return"SPACEFOG REG.";case 22:return"ANCIENT BLOCK";case 6:return"ANCIENT";case 5:return"ASTEROID BELT";case 88:return"TYPE NONE";case 35:return"ONE WAY COLL";case 89:return"( ALL )";case 17:return"MINEFIELD";case 27:return"FLAME";case 32:return"BARRAGE";case 28:return"LAZER";case 51:return"ELECTROBASTARDRAY";case 19:return"SQUIDARMSEG";default:return void 0===e?"NO TYPE: UNDEFINED":"UNKNOWN:"+e}},t.projectileTypes=[26,49,29,31,33,27],t.isProjectile=function(e){switch(e){case 26:case 49:case 29:case 31:case 33:case 27:return!0}return!1},t.ShipLike=function(e){switch(e){case 45:case 1:case 50:case 2:case 0:return!0}return!1},t.PredatorLike=function(e){switch(e){case 9:case 10:case 8:case 36:return!0}return!1},t.EnemyLike=function(e){switch(e){case 1:case 9:case 10:case 8:case 36:return!0}return!1},t.PUSHING_TYPES=[50,2,1,45,31,4,23,10,11,0,22],t.WEAPON_TYPES=[26,31,33,32,25,42,43,51,44,28,27]}.apply(t,[r,t]),void 0===a||(e.exports=a)},6063:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};a=[r,t,r(8787),r(4077)],n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reOrderWeapons=t.createDefaultShipWeapons=t.addWeaponToShip=t.createWeapon=void 0;var n=function(e,t){return void 0===t&&(t=45),o(o({},r.weaponDatas.bullet),{ownerGuid:e,ownerType:t,original:null})},s=function(e,t){return void 0===t&&(t=45),o(o({},r.weaponDatas.missile),{ownerGuid:e,ownerType:t,original:null})},u=function(e,t){return void 0===t&&(t=45),o(o({},r.weaponDatas.rocket),{ownerGuid:e,ownerType:t,original:null})},l=function(e,t){return void 0===t&&(t=45),o(o({},r.weaponDatas.clusterRocket),{ownerGuid:e,ownerType:t,original:null})},A=function(e,t){return void 0===t&&(t=45),o(o({},r.weaponDatas.energyRay),{ownerGuid:e,ownerType:t,original:null})},c=function(e,t){return void 0===t&&(t=45),o(o({},r.weaponDatas.lazer),{ownerGuid:e,ownerType:t,original:null})},d=function(e,t){return void 0===t&&(t=45),o(o({},r.weaponDatas.charge),{ownerGuid:e,ownerType:t,original:null})},p=function(e,t){return void 0===t&&(t=45),o(o({},r.weaponDatas.turret),{ownerGuid:e,ownerType:t,original:null})},f=function(e,t){return void 0===t&&(t=45),o(o({},r.weaponDatas.mine),{ownerGuid:e,ownerType:t,original:null})},h=function(e,t){return void 0===t&&(t=45),o(o({},r.weaponDatas.proximityMine),{ownerGuid:e,ownerType:t,original:null})},v=function(e,t){return void 0===t&&(t=45),o(o({},r.weaponDatas.flameThrower),{ownerGuid:e,ownerType:t,original:null})},g=function(e,t,a){var n=(0,r.cloneWeapon)(e(t,a)),o=(0,r.cloneWeapon)(e(t,a));return n.damage.ownerGuid=t,o.damage.ownerGuid=t,n.original=o,n};t.createWeapon=function(e,t,r){switch(void 0===r&&(r=45),e){case 26:return g(n,t,r);case 31:return g(u,t,r);case 32:return g(l,t,r);case 33:return g(s,t,r);case 51:return g(A,t,r);case 25:return g(d,t,r);case 44:return g(p,t,r);case 43:return g(f,t,r);case 42:return g(h,t,r);case 27:return g(v,t,r);case 28:return g(c,t,r);default:(0,a.LOG_GL_FIXED_FORCED)(e,"ERR CREATING WEAPON")}},t.addWeaponToShip=function(e,t,r){e.weapons.all.push(t),e.weapons.hash[t.type]=t,r?r.types.push(t.type):e.weapons.primary.types.length<=e.weapons.secondary.types.length?e.weapons.aux.types.length<e.weapons.primary.types.length?e.weapons.aux.types.push(t.type):e.weapons.primary.types.push(t.type):e.weapons.aux.types.length<e.weapons.secondary.types.length?e.weapons.aux.types.push(t.type):e.weapons.secondary.types.push(t.type),y(e.weapons)},t.createDefaultShipWeapons=function(e,r,a){a=a||[26];for(var n=[],o=0;o<a.length;o++)n.push((0,t.createWeapon)(a[o],e,r));var s=i([],n,!0),u={};for(o=0;o<s.length;o++){var l=s[o];u[l.type]=l}for(var A={arrayType:0,index:0,types:[],canSelect:!0,name:"primary",toggle_cooldown:0,subtype:"weapon"},c={arrayType:1,index:0,types:[],canSelect:!0,name:"secondary",toggle_cooldown:0,subtype:"weapon"},d={arrayType:2,index:0,types:[],canSelect:!0,name:"aux",toggle_cooldown:0,subtype:"weapon"},p={all:n,primary:A,secondary:c,aux:d,byArrayType:[A,c,d],hash:u};s.length>0;)s.length>0&&p.primary.types.push(s.shift().type),s.length>0&&p.secondary.types.push(s.shift().type),s.length>0&&p.aux.types.push(s.shift().type);return y(p),p},t.reOrderWeapons=function(e,t,r,a,n){t.types.splice(n,0,e.types.splice(e.types.indexOf(r),1)[0]),y(a)};var y=function(e){var t=e.all,r={};r[0]=e.primary.types,r[1]=e.secondary.types,r[2]=e.aux.types;for(var a=0;a<t.length;a++){for(var n=t[a],o=0;o<e.primary.types.length;o++)if(n.type===e.primary.types[o]){n.arrayType=e.primary.arrayType;break}for(o=0;o<e.secondary.types.length;o++)if(n.type===e.secondary.types[o]){n.arrayType=e.secondary.arrayType;break}for(o=0;o<e.aux.types.length;o++)if(n.type===e.aux.types[o]){n.arrayType=e.aux.arrayType;break}}}}.apply(t,a),void 0===n||(e.exports=n)},34:(e,t,r)=>{var a,n;a=[r,t,r(4077)],n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.upgradeWeapon=t.upgradeAbility=t.damageArmorMap=t.ArmorTypeToString=t.DamageTypeToString=void 0,t.DamageTypeToString=function(e){switch(e){case 2:return"Chaos";case 0:return"Fire";case 5:return"Melee";case 1:return"Piercing";case 3:case 4:return"Stun"}},t.ArmorTypeToString=function(e){switch(e){case 0:return"Biological";case 1:return"Forcefield";case 3:return"Massive";case 3:return"Mechanical";case 4:return"Rock";case 5:return"Ice";case 6:return"Adamant"}},t.damageArmorMap=[],function(){for(var e=0;e<6;e++)t.damageArmorMap.push([]);t.damageArmorMap[0][0]=1,t.damageArmorMap[0][1]=.1,t.damageArmorMap[0][2]=.8,t.damageArmorMap[0][3]=.2,t.damageArmorMap[0][4]=.1,t.damageArmorMap[0][5]=1.2,t.damageArmorMap[0][6]=0,t.damageArmorMap[1][0]=.8,t.damageArmorMap[1][1]=.2,t.damageArmorMap[1][2]=.4,t.damageArmorMap[1][3]=.3,t.damageArmorMap[1][4]=1,t.damageArmorMap[1][5]=1.2,t.damageArmorMap[1][6]=0,t.damageArmorMap[2][0]=1,t.damageArmorMap[2][1]=1,t.damageArmorMap[2][2]=1,t.damageArmorMap[2][3]=1,t.damageArmorMap[2][4]=2.2,t.damageArmorMap[2][5]=2.2,t.damageArmorMap[2][6]=0,t.damageArmorMap[3][0]=1,t.damageArmorMap[3][1]=.1,t.damageArmorMap[3][2]=.5,t.damageArmorMap[3][3]=.2,t.damageArmorMap[3][4]=0,t.damageArmorMap[3][5]=0,t.damageArmorMap[3][6]=0,t.damageArmorMap[5][0]=1,t.damageArmorMap[5][1]=.7,t.damageArmorMap[5][2]=.9,t.damageArmorMap[5][3]=.8,t.damageArmorMap[5][4]=0,t.damageArmorMap[5][5]=0,t.damageArmorMap[5][6]=0,t.damageArmorMap[4][0]=1.8,t.damageArmorMap[4][1]=.1,t.damageArmorMap[4][2]=.7,t.damageArmorMap[4][3]=.4,t.damageArmorMap[4][4]=.3,t.damageArmorMap[4][5]=.7,t.damageArmorMap[4][6]=0}(),t.upgradeAbility=function(e,t){t.range&&(e.range.value*=t.range),t.time&&(e.time.value*=t.time),t.value&&(e.value.n*=t.value)},t.upgradeWeapon=function(e,t){for(var a in t){var n=t[a];for(var o in n){var i=e[a][o],s=i*n[o];e[a][o]=s,(0,r.LOG_GL)(e.name+": "+a+"/"+o+" from "+Math.round(10*i)/10+" to "+Math.round(10*s)/10)}}}}.apply(t,a),void 0===n||(e.exports=n)},633:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetAbilityData=t.cloneAbility=t.abilityDatas=void 0;var r={type:10,arrayType:3,canChangeState:!1,activated:!0,stateChangeType:1,activationType:0,drainType:1,minDrainStartValue:.05,drainValue:.02,regenValue:0,level:1,name:"lazersight",description:"Easier targeting with lazersight. Can be upgraded to a mining lazer.",time:null,armor:null,range:null,value:null,original:null,displayAsInstrument:!1,cost:100,data:{}},a={type:4,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:1,activationType:0,drainType:1,minDrainStartValue:8e-4,drainValue:3e-4,regenValue:0,level:1,name:"targetlock",description:"Some of the weapons that can be aquired requires a targetlock to be able to fire.",time:{value:1,curr:0},armor:null,range:{value:500},value:null,original:null,displayAsInstrument:!1,cost:500,data:{currentTargetGuid:0,target:null,timer:0,timerT:2e3,dropLockTimer:0,dropLockTimerT:2e3},requirements:{type:10,name:r.name}},n={type:11,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:0,activationType:1,drainType:1,minDrainStartValue:40,drainValue:0,regenValue:0,level:1,name:"mining rig",description:"Mine asteroids for iron than can be sold at spaceports",time:{value:0,curr:0},armor:null,range:null,value:null,original:null,displayAsInstrument:!1,cost:260,data:{iron:{value:0,max:3e3},platinum:{value:0,max:1e3},minerals:{value:0,max:200}},requirements:{type:4,name:a.name}},o={type:12,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:0,activationType:0,drainType:1,minDrainStartValue:0,drainValue:0,regenValue:0,level:1,name:"mining rig platinum upgrade",description:"Enhanced mining lazer to mine platinum",time:{value:0,curr:0},armor:null,range:null,value:null,original:null,displayAsInstrument:!1,cost:488,data:null,requirements:{type:11,name:n.name}},i={type:13,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:0,activationType:0,drainType:1,minDrainStartValue:0,drainValue:0,regenValue:0,level:1,name:"mining rig rare minerals upgrade",description:"Enhanced mining lazer to mine rare minerals",time:{value:0,curr:0},armor:null,range:null,value:null,original:null,displayAsInstrument:!1,cost:788,data:null,requirements:{type:12,name:o.name}},s={type:15,arrayType:3,canChangeState:!1,activated:!1,stateChangeType:1,activationType:0,drainType:0,minDrainStartValue:0,drainValue:.01,regenValue:0,level:0,name:"Co-axial gun mount",description:"Lock's ship standard space gun to target lock, or nearest enemeny depending on lock state.",time:{value:0,curr:0},armor:null,range:null,value:null,original:null,displayAsInstrument:!1,cost:748,data:null,requirements:{type:4,name:a.name}};t.abilityDatas={lazerSight:r,targetlock:a,coaxialMount:s,regen:{type:0,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:1,activationType:0,drainType:0,drainValue:.06,minDrainStartValue:3,regenValue:.04,level:1,name:"regeneration",description:"Regeneration will restore your ships integrity over time",time:null,armor:null,range:null,value:{n:.01,max:50},original:null,displayAsInstrument:!1,cost:500,data:{}},miningRig:n,miningRigPlatinum:o,miningRigRareMinerals:i,armorplates:{type:7,arrayType:3,canChangeState:!0,activated:!0,stateChangeType:1,activationType:0,drainType:1,drainValue:0,minDrainStartValue:0,regenValue:0,level:1,name:"armorplates",description:" Armor plates will make your ship more resillient to attacks.",time:null,armor:null,range:null,value:{n:1,max:1},original:null,displayAsInstrument:!1,cost:500,data:{}},ultrabright:{type:8,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:0,activationType:1,drainType:0,drainValue:.22,minDrainStartValue:5,regenValue:0,level:1,name:"ultrabright",description:"If you feel that space is too dark, Ultrabright is for you. Your halo will be supercharged by the energy created by your ship's reactor",time:null,armor:null,range:null,value:{n:200,max:200},original:null,displayAsInstrument:!0,cost:500,data:{}},cloak:{type:1,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:0,activationType:1,drainType:0,minDrainStartValue:1,drainValue:.1,regenValue:0,level:1,name:"cloak",description:"When cloaked, you will be almost invisible to the world outside the comfort of your ship.",time:{value:3e3,curr:3e3},armor:null,range:{value:400},value:null,original:null,displayAsInstrument:!1,cost:500,data:{}},ultraboost:{type:2,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:1,activationType:1,drainType:0,minDrainStartValue:20,drainValue:1,regenValue:0,level:1,name:"ultraboost",description:"Ultraboost will supercharge your thrusters when you have energy too spare.",time:{value:0,curr:20},armor:null,range:null,value:{n:1.3,max:-1},original:null,displayAsInstrument:!1,cost:500,data:{}},shield:{type:3,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:0,activationType:1,drainType:0,minDrainStartValue:35,drainValue:.2,regenValue:0,level:1,name:"shield",description:"Shields will protect from most projectiles heading your way.",time:null,armor:{type:1},range:{value:2},value:{n:1,max:-1},original:null,displayAsInstrument:!1,cost:500,data:{}},slowmotion:{type:5,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:0,activationType:1,drainType:0,minDrainStartValue:40,drainValue:2,regenValue:0,level:1,name:"slowmotion",description:"With this baby you can bend time and space as you wish, as long as you have energy to spare.",time:{value:3e3,curr:0},armor:null,range:null,value:null,original:null,displayAsInstrument:!1,cost:500,data:{}},traceline:{type:9,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:1,activationType:1,drainType:1,minDrainStartValue:0,drainValue:0,regenValue:0,level:1,name:"traceline",description:"Do you ever get lost? This might help.",time:{value:0,curr:0},armor:null,range:null,value:null,original:null,displayAsInstrument:!1,cost:288,data:null},strafeEngines:{type:14,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:1,activationType:0,drainType:1,minDrainStartValue:0,drainValue:0,regenValue:0,level:0,name:"strafe engines",description:"Upgrade turn thrusters to enabe lateral movement",time:{value:0,curr:0},armor:null,range:null,value:null,original:null,displayAsInstrument:!1,cost:489,data:null},energy:{type:6,arrayType:3,canChangeState:!1,activated:!0,stateChangeType:1,activationType:0,drainType:1,drainValue:0,minDrainStartValue:0,regenValue:.104,level:1,name:"energy",description:"Energy is used to power most of the abilities available. Some weapons does also require energy.",time:null,armor:null,range:null,value:{n:.01,max:200},original:null,displayAsInstrument:!0,cost:500,data:{}}},t.cloneAbility=function(e){return JSON.parse(JSON.stringify(e))},t.resetAbilityData=function(){for(var e in t.abilityDatas)t.abilityDatas[e]=(0,t.cloneAbility)(t.abilityDatas[e])}}.apply(t,[r,t]),void 0===a||(e.exports=a)},1287:(e,t,r)=>{var a;a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeType=void 0,t.changeType=function(e,t){e.type=t}}.apply(t,[r,t]),void 0===a||(e.exports=a)},5173:function(e,t,r){var a,n,o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};a=[r,t,r(9262),r(5714),r(1330)],n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.struct=void 0;var i=o(o({},(0,a.setImovableDefaults)(null)),{pos:new r.Vector(0,0),vel:new r.Vector(0,0),radius:1,life:0,guid:-1,type:0,collType:0,stunned:!1,shape:3,sleepingAABB:!1,remove:!1,targetFlagged:!1,forceX:0,forceY:0,armor:null}),s=o({},i),u=o(o({ownerGuid:0,owenerType:0,target:null,homing:!1},{damage:{stunMS:0,type:0,value:0,valuePercent:0,pushPercentM:0,slowPercentM:0}}),s);t.struct=function(e){switch(e){case 49:case 26:case 29:var t=o({},u);return t.pos=new r.Vector(0,0),t.vel=new r.Vector(0,0),t;case 21:var a=o({},s);return a.pos=new r.Vector(0,0),a.vel=new r.Vector(0,0),a;default:throw"no struct found for: "+(0,n.TypesToString)(e)}}}.apply(t,a),void 0===n||(e.exports=n)},8787:(e,t,r)=>{var a;a=function(e,t){"use strict";function r(e){return JSON.parse(JSON.stringify(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.resetWeaponData=t.weaponDatas=t.flameoutDamageData=t.proximityMineWDT=t.mineWDT=t.chargeWDT=void 0,t.cloneWeapon=r,t.chargeWDT={active:!1,type:25,arrayType:3,projectile:{life:20,speed:0},ammunition:{perShot:190,max:0,value:0,type:0},requiresTargetLock:!1,requiresLazerSight:!1,cooldown:{incrementM:0,max:2e3,value:0,type:0},damage:{type:4,value:180,valuePercent:0,stunMS:600,slowPercentM:0,pushPercentM:0},name:"charge",description:"A charge powerful enough to move even the largest of asteroids.",cost:500,ammunitionCost:0},t.mineWDT={active:!1,type:43,arrayType:3,projectile:{life:20,speed:0},ammunition:{perShot:120,max:0,value:0,type:0},requiresTargetLock:!1,requiresLazerSight:!1,cooldown:{incrementM:0,max:2e3,value:0,type:0},damage:{type:4,value:180,valuePercent:.2,stunMS:250,pushPercentM:0,slowPercentM:0},name:"mine",description:"A small mine. Explodes upon contact.",cost:500,ammunitionCost:0},t.proximityMineWDT={active:!1,type:42,arrayType:3,projectile:{life:20,speed:0},ammunition:{perShot:160,max:0,value:0,type:0},requiresTargetLock:!1,requiresLazerSight:!1,cooldown:{incrementM:0,max:2e3,value:0,type:0},damage:{type:4,value:190,valuePercent:.4,stunMS:200,pushPercentM:0,slowPercentM:0},name:"proximitymine",description:"A more advanced mine. When deployed it will scan it's surroundings searching for a target. When a target is found, it will move closer and explode upon contact.",cost:500,ammunitionCost:0},t.flameoutDamageData={type:0,value:0,valuePercent:0,stunMS:0,pushPercentM:0,slowPercentM:0},t.weaponDatas={bullet:{active:!1,type:26,arrayType:3,projectile:{life:400,speed:30},ammunition:{perShot:1,max:3e3,value:1500,type:1},requiresTargetLock:!1,requiresLazerSight:!1,cooldown:{incrementM:3,max:300,value:0,type:1},damage:{type:1,value:4,stunMS:1,valuePercent:0,slowPercentM:.01,pushPercentM:.05},name:"bullets",description:"Space bullets is the most basic weapon used. It does have some potential if upgraded.",cost:500,ammunitionCost:.1},missile:{active:!1,type:33,arrayType:3,projectile:{life:9e3,speed:1},ammunition:{perShot:1,max:8,value:5,type:1},requiresTargetLock:!1,requiresLazerSight:!1,cooldown:{incrementM:1,max:500,value:0,type:0},damage:{type:2,value:250,valuePercent:.2,stunMS:100,slowPercentM:.8,pushPercentM:.5},name:"missile",description:"Missiles are high impact single target weapon. Does great damage.",cost:500,ammunitionCost:60},rocket:{active:!1,type:31,arrayType:3,projectile:{life:8e3,speed:1},ammunition:{perShot:1,max:8,value:2,type:1},requiresTargetLock:!0,requiresLazerSight:!0,cooldown:{incrementM:1,max:700,value:0,type:0},damage:{type:2,value:220,valuePercent:.25,stunMS:125,slowPercentM:.8,pushPercentM:.8},name:"rocket",description:"Rockets behave much like missiles, but they do require target lock. Target lock can be aquired from abilites.",cost:500,ammunitionCost:80},clusterRocket:{active:!1,type:32,arrayType:3,projectile:{life:8e3,speed:1},ammunition:{perShot:8,max:40,value:3,type:1},requiresTargetLock:!0,requiresLazerSight:!0,cooldown:{incrementM:1,max:700,value:0,type:0},damage:{type:2,value:70,valuePercent:.05,stunMS:85,slowPercentM:.2,pushPercentM:.1},name:"barrage",description:"A whole barrage of smaller rockets",cost:800,ammunitionCost:80},energyRay:{active:!1,type:51,arrayType:3,projectile:{life:0,speed:0},ammunition:{perShot:.62,max:0,value:0,type:0},requiresTargetLock:!0,requiresLazerSight:!0,cooldown:{incrementM:0,max:0,value:0,type:2},damage:{type:3,value:2,valuePercent:0,stunMS:100,slowPercentM:.05,pushPercentM:0},name:"Energy Ray",description:"Let loose the overflow energy created by your ships reactor.",cost:500,ammunitionCost:0},charge:t.chargeWDT,mine:t.mineWDT,proximityMine:t.proximityMineWDT,turret:{active:!1,type:44,arrayType:3,projectile:{life:20,speed:0},ammunition:{perShot:190,max:0,value:0,type:0},requiresTargetLock:!1,requiresLazerSight:!1,cooldown:{incrementM:0,max:2e3,value:0,type:0},damage:{type:1,value:11,valuePercent:0,stunMS:1,pushPercentM:.005,slowPercentM:.01},name:"turret",description:"A small turret that will aid you in the fight against the dark forgotten creatures of outer space.",cost:500,ammunitionCost:0},flameThrower:{active:!1,type:27,arrayType:3,projectile:{life:20,speed:0},ammunition:{perShot:1,max:1e3,value:600,type:1},requiresTargetLock:!1,requiresLazerSight:!1,cooldown:{incrementM:2.5,max:500,value:0,type:1},damage:{type:0,value:2.5,valuePercent:0,stunMS:1,pushPercentM:0,slowPercentM:0},name:"flamethrower",description:"Who said space can't burn? With it's dual igniters and built in oxygen injectors this baby can set fire to almost anything. As a bonus the flamethrower is also the only weapon known to kill parasites. Other weapons can't seem to hit them.",cost:500,ammunitionCost:2},lazer:{active:!1,type:28,arrayType:3,projectile:{life:0,speed:0},ammunition:{perShot:2.2,max:0,value:0,type:0},requiresTargetLock:!1,requiresLazerSight:!0,cooldown:{incrementM:0,max:0,value:0,type:2},damage:{type:0,value:14,valuePercent:0,stunMS:30,slowPercentM:.05,pushPercentM:0},name:"Lazer",description:"Lazerzz",cost:800,ammunitionCost:0}},t.resetWeaponData=function(){for(var e in t.weaponDatas)t.weaponDatas[e]=r(t.weaponDatas[e])}}.apply(t,[r,t]),void 0===a||(e.exports=a)}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}var __webpack_exports__=__webpack_require__(8414)})();