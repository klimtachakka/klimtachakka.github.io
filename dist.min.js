!function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=172)}([function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(6)],void 0===(n=function(e,t,r){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentProgramGLctx=t.GLBufferCached=t.GLCTXreadPerformance=t.GLAttribLocations=t.GLAttribBatchSwitch=t.GLAttribNameLookup=t.GLUniformLocation=t.compileProgram=t.zoom=t.debugGetProgram=t.programToString=t.GLctx=void 0,function(e){e[e.Vertices=0]="Vertices",e[e.VerticesOverlay=1]="VerticesOverlay",e[e.VerticesMultiColor=2]="VerticesMultiColor",e[e.VerticesFastAlpha=3]="VerticesFastAlpha",e[e.Vertices3d=4]="Vertices3d",e[e.Texture=5]="Texture",e[e.TextureCombineMultiply=6]="TextureCombineMultiply",e[e.TextureDist=7]="TextureDist",e[e.TextureBlur=8]="TextureBlur",e[e.GameBufferDist=9]="GameBufferDist",e[e.GameBufferNoise=10]="GameBufferNoise",e[e.VerticesGradient=11]="VerticesGradient",e[e.VerticesGradient2tone=12]="VerticesGradient2tone",e[e.VerticesGradientBLACK=13]="VerticesGradientBLACK",e[e.particleUpdate=14]="particleUpdate",e[e.particleRender=15]="particleRender",e[e.VerticesGradientLinear=16]="VerticesGradientLinear",e[e.EdgeGradient=17]="EdgeGradient",e[e.PerlinNoiseFog=18]="PerlinNoiseFog"}(a=t.GLctx||(t.GLctx={}));t.programToString=function(e){switch(e){case a.Vertices:return"vertices";case a.VerticesOverlay:return"vertices overlay";case a.VerticesMultiColor:return"vertices multicolor";case a.VerticesFastAlpha:return"vertices fastalpha";case a.Vertices3d:return"vertices 3d";case a.Texture:return"texture";case a.TextureCombineMultiply:return"texture combineMultiply";case a.TextureDist:return"texture dist";case a.GameBufferDist:return"GB dist";case a.GameBufferNoise:return"GB noise";case a.VerticesGradient:return"vertices gradient";case a.VerticesGradient2tone:return"vertices gradient 2tone";case a.VerticesGradientBLACK:return"vertices gradientBLACK";case a.particleUpdate:return"particle update";case a.particleRender:return"particle render";case a.VerticesGradientLinear:return"vertices gradient linear";case a.EdgeGradient:return"edge gradient";case a.PerlinNoiseFog:return"perlin noise FOG";case a.TextureBlur:return"texture blur";default:return"unknwon: "+e}};var n=a.Vertices,i={},s=new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),A=new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]);t.debugGetProgram=function(e){return i[e]};t.zoom=function(e,n){void 0===n&&(n=!1);var o=e.game,i=e.gl;(o.SW!==o.currentResW||o.SH!==o.currentResH||n)&&[a.Vertices,a.Texture,a.TextureDist,a.VerticesGradient,a.VerticesGradientBLACK,a.VerticesGradientLinear,a.EdgeGradient].map(function(n){p(n,i);var s=t.GLUniformLocation(i,"u_resolution"),A=t.GLUniformLocation(i,"u_pointSize"),u=e;u.game.zoomTXinverted&&i.uniform1f(A,r.map(u.game.zoomTXinverted,1,4,1,2,!0)),i.uniform2f(s,o.SW,o.SH),o.currentResW=o.SW,o.currentResH=o.SH,p(a.VerticesGradient,i);var l=t.GLUniformLocation(i,"u_resolution");i.uniform2f(l,o.SW,o.SH),o.currentResW=o.SW,o.currentResH=o.SH})};t.compileProgram=function(e,t,r,a,n,o,s){var A=window.webglUtils.createProgramFromSources(t,[r.vertex,r.fragment]);if(i[e]=A,t.useProgram(A),null!=s&&t.transformFeedbackVaryings(A,s,t.INTERLEAVED_ATTRIBS),t.linkProgram(A),a&&n){var u=t.getAttribLocation(A,"a_position"),l=t.getUniformLocation(A,"u_resolution");t.getUniformLocation(A,"u_color"),t.uniform2f(l,a,n);var c=t.createBuffer();if(t.bindBuffer(t.ARRAY_BUFFER,c),t.enableVertexAttribArray(u),o){var d=window.m4,p=45*Math.PI/180,f=a/n,h=d.perspective(p,f,.1,100),v=t.getUniformLocation(A,"uProjectionMatrix");t.uniformMatrix4fv(v,!1,h),t.vertexAttribPointer(u,3,t.FLOAT,!1,0,0)}else t.vertexAttribPointer(u,2,t.FLOAT,!1,0,0);t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)}return A};var u={},l={};t.GLUniformLocation=function(e,t){var r=u[n];if(r){var a=r[t];if(a)return a}else u[n]={};var o=i[n],s=e.getUniformLocation(o,t);if(-1===s)throw" unable to get uniform "+t+" @ "+n;return u[n][t]=s,s};t.GLAttribNameLookup=function(e,t){void 0===t&&(t=n);var r=l[t];if(r)for(var a in r)if(r[a]===e)return a};t.GLAttribBatchSwitch=function(e,t,r){void 0===r&&(r=!1),console.log("Attrib switch: enable?"+r,"program:* "+t);var a=l[t];if(a)for(var n in a)r?(console.log("SHADER*:"+t+" enables: "+n),e.enableVertexAttribArray(a[n])):(console.log("SHADER*:"+t+" disables: "+n),e.disableVertexAttribArray(a[n]))};t.GLAttribLocations=function(e,t){var r=l[n];if(r){var a=r[t];if(a)return a}else l[n]={};var o=i[n],s=e.getAttribLocation(o,t);if(-1===s)throw" unable to get attrib "+t+" @ program type:"+n;return l[n][t]=s,s};var c={switchedProgram:0,switchedCacheHit:0};t.GLCTXreadPerformance=function(e){void 0===e&&(e=!0);var t=o({},c);return c.switchedCacheHit=0,c.switchedProgram=0,t};var d={};t.GLBufferCached=function(e,t){var r=d[t];return r||(d[t]=e.createBuffer(),d[t])};t.getCurrentProgramGLctx=function(){return n};var p=function(e,r){if(n===e)return c.switchedCacheHit++,i[e];var o=i[e];r.useProgram(o),n=e,c.switchedProgram++;var u=r.getAttribLocation(o,"a_position");switch(e){case a.VerticesFastAlpha:case a.Vertices3d:case a.VerticesOverlay:r.enableVertexAttribArray(u),r.vertexAttribPointer(u,3,r.FLOAT,!1,0,0);break;case a.EdgeGradient:var d=t.GLBufferCached(r,"GLCTX_edgeGradient");r.bindBuffer(r.ARRAY_BUFFER,d),r.enableVertexAttribArray(u),r.vertexAttribPointer(u,2,r.FLOAT,!1,0,0);break;case a.VerticesGradient:var p=t.GLBufferCached(r,"GLCTX_vertexGradient");r.bindBuffer(r.ARRAY_BUFFER,p),r.enableVertexAttribArray(u),r.vertexAttribPointer(u,2,r.FLOAT,!1,0,0);break;case a.VerticesGradientBLACK:var f=t.GLBufferCached(r,"GLCTX_vertexGradientBlack");r.bindBuffer(r.ARRAY_BUFFER,f),r.enableVertexAttribArray(u),r.vertexAttribPointer(u,2,r.FLOAT,!1,0,0);break;case a.VerticesGradientLinear:var h=t.GLBufferCached(r,"GLCTX_vertexGradientLinear");r.bindBuffer(r.ARRAY_BUFFER,h),r.enableVertexAttribArray(u),r.vertexAttribPointer(u,2,r.FLOAT,!1,0,0);break;case a.VerticesMultiColor:case a.Vertices:var v=t.GLBufferCached(r,"GLCTX_vertex");r.bindBuffer(r.ARRAY_BUFFER,v),r.enableVertexAttribArray(u),r.vertexAttribPointer(u,2,r.FLOAT,!1,0,0);break;case a.particleUpdate:break;case a.GameBufferDist:case a.GameBufferNoise:var g=t.GLBufferCached(r,"GLCTX_frambuffer");r.bindBuffer(r.ARRAY_BUFFER,g),r.enableVertexAttribArray(u),r.vertexAttribPointer(u,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,A,r.STATIC_DRAW);break;case a.Texture:case a.TextureDist:case a.TextureCombineMultiply:case a.TextureBlur:var y=t.GLBufferCached(r,"GLCTX_texture");r.bindBuffer(r.ARRAY_BUFFER,y),r.enableVertexAttribArray(u),r.vertexAttribPointer(u,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,s,r.STATIC_DRAW);break;case a.PerlinNoiseFog:break;default:throw"unhandled program switch:"+t.programToString(e)}return window.lah=function(){return console.log(l)},o};t.default=p}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=t.SubtractVector=t.vec_pool_put=t.vec_pool_pop=t.getRects=t.getVecs=void 0;var r=0;t.getVecs=function(){return r};var a=[];t.getRects=function(){return"0 / "+a.length};t.vec_pool_pop=function(e,t){if(a.length>0){var r=a.pop();return r.set(e,t),0,r}return new n(e,t)};t.vec_pool_put=function(e){0,a.push(e)};t.SubtractVector=function(e,t,r){return void 0===r&&(r=new n(0,0)),r.x=e.x-t.x,r.y=e.y-t.y,r};var n=function(){function e(e,t,a){this.x=0,this.y=0,this.id=0,this.x=e,this.y=t,this.id=a,r++}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},e.prototype.addXY=function(e,t){return this.x+=e,this.y+=t,this},e.prototype.set=function(e,t){return this.x=e,this.y=t,this},e.prototype.setFromVec=function(e){return this.x=e.x,this.y=e.y,this},e.prototype.clampTop=function(e){this.getLength()>e&&this.setLength(e)},e.prototype.mult=function(e){return this.x*=e,this.y*=e,this},e.prototype.dot=function(e){return this.x*e.x+this.y*e.y},e.prototype.normalize=function(){var e=this.norm();this.x=this.x/e||0,this.y=this.y/e||0},e.prototype.subtractXY=function(t,r){return new e(this.x-t,this.y-r)},e.prototype.subTractXYmodify=function(e,t){this.x-=e,this.y-=t},e.prototype.subtract=function(e){return this.x-=e.x,this.y-=e.y,this},e.prototype.norm=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.setLength=function(e){var t=this.getAngle();this.x=Math.cos(t)*e,this.y=Math.sin(t)*e},e.prototype.getAngle=function(){return Math.atan2(this.y,this.x)},e.prototype.setAngle=function(e){var t=this.getLength();this.x=Math.cos(e)*t,this.y=Math.sin(e)*t},e.prototype.rotate=function(e,t){t=t*Math.PI/180;var r=e.x,a=e.y,n=this.x,o=this.y;return{x:Math.cos(t)*(n-r)-Math.sin(t)*(o-a)+r,y:Math.sin(t)*(n-r)+Math.cos(t)*(o-a)+a}},e.prototype.div=function(e){return this.x/=e,this.y/=e,this},e.prototype.magSq=function(){var e=this.x,t=this.y;return e*e+t*t},e.prototype.limit=function(e){var t=this.magSq();t>e*e&&(this.div(Math.sqrt(t)),this.mult(e))},e.prototype.subtr=function(e){this.x-=e.x,this.y-=e.y},e.prototype.mag=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.unit=function(){var e=this.mag();0===e?(this.x=0,this.y=0):(this.x/=e,this.y/=e)},e.prototype.normal=function(){var e=this.x;this.x=-this.y,this.y=e,this.unit()},e.dot=function(e,t){return e.x*t.x+e.y*t.y},e.cross=function(e,t){return e.x*t.y-e.y*t.x},e.prototype.toVertices=function(){return[this.x,this.y]},e.prototype.toPoint=function(){return{x:this.x,y:this.y}},e.prototype.toPointINT=function(){return{x:0|this.x,y:0|this.y}},e.prototype.toVertArray=function(e,t){return[this.x-e,this.y-t]},e}();t.Vector=n}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(1),r(0),r(0),r(15),r(4),r(8),r(3)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawDebug=t.toClipSpaceY=t.toClipSpaceX=t.drawColor=t.drawColorMapSingle=t.drawColorMap=t.setupBuffers=t.unitePolyColorMaps=t.getColorMapColorKey=t.crossHair45degLines=t.crossHair45deg=t.crossHairLinesTech=t.crossHairLines=t.crossHair=t.addToColorMap=t.inPerimiter=t.onStage=t.blockCirclePoly=t.createBlockCirclePolySingleWall=t.drawRectPoly=t.drawTriangle=t.lineVerticalRGBADash=t.lineHorizontalRGBADash=t.line2PolyHalf=t.line2PolyMiteredAuto=t.MiterType=t.line2PolyTriangleRotateableFilled=t.line2PolyTriangleRotateable=t.line2PolyTriangle=t.line2PolyCone=t.line2PolyLabeled=t.line2Poly=t.LineThicknessWeight=t.fillPoly=t.fillPolyForFan=t.setTriangle=t.rectangleBorderPoly=t.rectangleRotated45Poly=t.rectanglePolyRect=t.rectanglePoly=t.readPerformance=t.cutoffRectBGTris=t.cutoffRect=t.setPoly=void 0;var u=2*Math.PI;t.setPoly=function(e,t,r,a){var n=t,o=r,i=n+1,s=o+1;return a.push(n,o,i,o,n,s,n,s,i,o,i,s),6};t.cutoffRect=function(e,r,a,n,o,i,s){i.push(e,r,e+a,r),i.push(e,r+n,e+a-o,r+n),i.push(e,r,e,r+n),i.push(e+a,r,e+a,r+n-o),i.push(e+a-o,r+n,e+a,r+n-o),s&&t.cutoffRectBGTris(e,r,a,n,o,s)};t.cutoffRectBGTris=function(e,t,r,a,n,o){o.push(e,t,e+r,t,e,t+a),o.push(e,t+a,e+r-n,t+a,e+r,t),o.push(e+r-n,t+a,e+r,t+a-n,e+r,t)};var l={addToColorMap:0,drawColorMap:0,drawColor:0,drawColorMapSingle:0,drawColorMapCalls:0,drawColorMapSingleTimings:0,vertices:0},c={addToColorMap:0,drawColorMap:0,drawColor:0,drawColorMapSingle:0,drawColorMapCalls:0,drawColorMapSingleTimings:0,vertices:0};t.readPerformance=function(e){return void 0===e&&(e=!0),c.drawColor=l.drawColor,c.drawColorMap=l.drawColorMap,c.drawColorMapCalls=l.drawColorMapCalls,c.drawColorMapSingle=l.drawColorMapSingle,c.addToColorMap=l.addToColorMap,c.vertices=l.vertices,c.drawColorMapSingleTimings=l.drawColorMapSingleTimings,e&&(l.drawColor=0,l.drawColorMap=0,l.drawColorMapCalls=0,l.drawColorMapSingle=0,l.addToColorMap=0,l.drawColorMapSingleTimings=0,l.vertices=0),c};t.rectanglePoly=function(e,t,r,a,n){n.push(e,t,e+r,t,e,t+a,e+r,t,e+r,t+a,e,t+a)};t.rectanglePolyRect=function(e,t,r,a,n){void 0===n&&(n=!1);var o=e.x-t,i=e.y-r,s=e.width,A=e.height;a.push(o,i,o+s,i,o,i+A,o+s,i+A,o,i,o,i+A,o+s,i,o+s,i+A),n&&a.push(o,i,o+s,i+A,o,i+A,o+s,i)};t.rectangleRotated45Poly=function(e,t,r,a){a.push(e-r,t,e,t-r,e+r,t,e-r,t,e,t+r,e+r,t)};t.rectangleBorderPoly=function(e,r,a,n,o,i){var s=o[0];t.line2Poly(e,r+.5*s,e+a,r+.5*s,i,s),s=o[1],t.line2Poly(e,r+n-.5*s,e+a,r+n-.5*s,i,s),s=o[2],t.line2Poly(e+.5*s,r,e+.5*s,r+n,i,s),s=o[3],t.line2Poly(e+a-.5*s,r,e+a-.5*s,r+n,i,s)};t.setTriangle=function(e,t,r,a){void 0===a&&(a=1),r.push(e-a,t-a,e+a,t-a,e,t)};t.fillPolyForFan=function(e,t,r,a,n,o,i,s){void 0===i&&(i=0),void 0===s&&(s=0);var A=t+i,u=r+s,l=A+a,c=u+n;o.push(A,u,l,u,A,c,A,c,l,u,l,c)};t.fillPoly=function(e,t,r,a,n,o,i,s){void 0===i&&(i=0),void 0===s&&(s=0);var A=t+i,u=r+s,l=A+a,c=u+n;return o.push(A,u,l,u,A,c,A,c,l,u,l,c),6};var d;!function(e){e[e.Center=0]="Center",e[e.Left=1]="Left",e[e.Right=2]="Right"}(d=t.LineThicknessWeight||(t.LineThicknessWeight={}));var p=new r.Vector(0,0),f=.5*Math.PI;t.line2Poly=function(e,t,r,a,n,o,i){void 0===o&&(o=2),void 0===i&&(i=d.Center);var s=Math.atan2(t-a,e-r);i!==d.Center&&(o*=2),p.x=.5*o,p.y=.5*o,p.setAngle(s+(i===d.Left?-f:f));var A=e+p.x,u=t+p.y,l=r+p.x,c=a+p.y;return i===d.Center&&(e-=p.x,t-=p.y,r-=p.x,a-=p.y),n.push(e,t,r,a,A,u,r,a,A,u,l,c),6};t.line2PolyLabeled=function(e,t,r,u,l,c,h,v){void 0===h&&(h=2),void 0===v&&(v=d.Center);var g=Math.atan2(t-u,e-r);v!==d.Center&&(h*=2),p.x=.5*h,p.y=.5*h,p.setAngle(g+(v===d.Left?-f:f));var y=e+p.x,m=t+p.y,x=r+p.x,S=u+p.y;v===d.Center&&(e-=p.x,t-=p.y,r-=p.x,u-=p.y),l.push(e,t,r,u,y,m,r,u,y,m,x,S);var _=i.midpointN(e,r),T=i.midpointN(t,u);return s.default.addGL(o.default().gui.gl,n.default(a.GLctx.Texture,o.default().gui.gl),s.default.create(c,A.TEXT_SIZE_SMALL,"w"),_,T,o.default().gui),6};t.line2PolyCone=function(e,t,r,a,n,o,i){var s=Math.atan2(t-a,e-r);p.x=.5*o,p.y=.5*o,p.setAngle(s+f);var A=e+p.x,u=t+p.y;e-=p.x,t-=p.y,p.x=.5*i,p.y=.5*i,p.setAngle(s+f);var l=r+p.x,c=a+p.y;return r-=p.x,a-=p.y,n.push(e,t,r,a,A,u,r,a,A,u,l,c),6};t.line2PolyTriangle=function(e,t,r,a,n,o){void 0===o&&(o=2);var i=Math.atan2(t-a,e-r);p.x=.5*o,p.y=.5*o,p.setAngle(i+f);var s=e+p.x,A=t+p.y;return n.push(e,t,r,a,s,A),6};var h=new r.Vector(0,0),v=new r.Vector(0,0),g=new r.Vector(0,0);t.line2PolyTriangleRotateable=function(e,r,a,n,o,i){void 0===i&&(i=2),h.set(a,0),h.setAngle(o),h.addXY(e,r),v.set(a,0),v.setAngle(o-.75*Math.PI),v.addXY(e,r),g.set(a,0),g.setAngle(o+.75*Math.PI),g.addXY(e,r),t.line2Poly(h.x,h.y,v.x,v.y,n,i),t.line2Poly(h.x,h.y,g.x,g.y,n,i),t.line2Poly(v.x,v.y,g.x,g.y,n,i)};t.line2PolyTriangleRotateableFilled=function(e,t,r,a,n){h.set(r,0),h.setAngle(n),h.addXY(e,t),v.set(r,0),v.setAngle(n-.75*Math.PI),v.addXY(e,t),g.set(r,0),g.setAngle(n+.75*Math.PI),g.addXY(e,t),a.push(h.x,h.y,v.x,v.y,g.x,g.y)},function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight"}(t.MiterType||(t.MiterType={}));var y=.25*Math.PI,m=new r.Vector(0,0);t.line2PolyMiteredAuto=function(e,t,r,a,n,o){var i=Math.atan2(t-a,e-r);p.x=.5*o,p.y=.5*o,m.x=.5*o,m.y=.5*o,p.setAngle(i+f),m.setAngle(i+y);var s=e+m.x,A=t+m.y;m.setAngle(i+y+f);var u=r+m.x,l=a+m.y;return e-=p.x,t-=p.y,r-=p.x,a-=p.y,n.push(e,t,r,a,s,A,r,a,s,A,u,l),6};t.line2PolyHalf=function(e,t,r,a,n,o){void 0===o&&(o=2);var i=Math.atan2(t-a,e-r);p.x=.5*o,p.y=.5*o,p.setAngle(i+f);var s=e+p.x,A=t+p.y;return e-=p.x,t-=p.y,r-=p.x,a-=p.y,n.push(e,t,r,a,s,A),6};t.lineHorizontalRGBADash=function(e,r,a,n,o,i,s,A,u){void 0===i&&(i=1),void 0===s&&(s=0),void 0===A&&(A=0),void 0===u&&(u=0);for(var l=0,c=r-s;c<n-u;c++)++l<=s?c+u>r&&t.line2Poly(c+u,a,c+u,a+i,o):l>s+A&&(l=0)};t.lineVerticalRGBADash=function(e,r,a,n,o,i,s,A,u){void 0===i&&(i=1),void 0===s&&(s=0),void 0===A&&(A=0),void 0===u&&(u=0);for(var l=0,c=a-s;c<n-u;c++)++l<s?c+u>a&&t.line2Poly(r,c+u,r+i,c+u,o):l>s+A&&(l=0)};t.drawTriangle=function(e,t,r,a,n,o){o.push(e-r-a,t-r-n,e-r-a,t+r-n,e+r-a,t-n)};t.drawRectPoly=function(e,r,a,n,o){t.line2Poly(e.x-r,e.y-a,e.x+e.width-r,e.y-a,n,o),t.line2Poly(e.x-r,e.y-a,e.x-r,e.y+e.height-a,n,o),t.line2Poly(e.x+e.width-r,e.y-a,e.x+e.width-r,e.y+e.height-a,n,o),t.line2Poly(e.x+e.width-r,e.y+e.height-a,e.x-r,e.y+e.height-a,n,o)};t.createBlockCirclePolySingleWall=function(e,t,r,a,n,o,i){for(var s=a,A=e+Math.cos(u*(s/a)+n)*o>>0,l=t+Math.sin(u*(s/a)+n)*o>>0;s>-1;--s){var c=e+Math.cos(u*(s/a)+n)*o>>0,d=t+Math.sin(u*(s/a)+n)*o>>0;r.push(A,l,c,d),i&&r.push(e,t),A=c,l=d}};t.blockCirclePoly=function(e,t,r,a,n,o,i,s,A,l,c,d,p,f,h){var v,g,y,m,x,S,_,T;void 0===i&&(i=0),void 0===s&&(s=0),void 0===A&&(A=0),void 0===l&&(l=1),void 0===d&&(d=0),void 0===p&&(p=e),void 0===f&&(f=0),void 0===h&&(h=e);var E=e;v=r+Math.cos(u*(E/e)+n)*t>>0,g=a+Math.sin(u*(E/e)+n)*t>>0,x=r+Math.cos(u*(E/e)+n)*(t-l)>>0,S=a+Math.sin(u*(E/e)+n)*(t-l)>>0,y=0,m=0;for(;E>-1;--E){if(y=r+Math.cos(u*(E/e)+n)*t>>0,m=a+Math.sin(u*(E/e)+n)*t>>0,_=r+Math.cos(u*(E/e)+n)*(t-l)>>0,T=a+Math.sin(u*(E/e)+n)*(t-l)>>0,(!c||E%2==1)&&(E>=d&&E<=p||E>=f&&E<=h)){var M=v-s,I=g-A,L=y-s,w=m-A,b=_-s,P=T-A,R=x-s,O=S-A;o.push(M,I,L,w,b,P,M,I,b,P,R,O)}v=y,g=m,x=_,S=T}return 0};t.onStage=function(e,t,r,a){void 0===a&&(a=0);var n=e.SX,o=e.SY,i=e.SW,s=e.SH;return t>n-a&&t<n+i+a&&r>o-a&&r<o+s+a};t.inPerimiter=function(e,t,r,a,n){void 0===n&&(n=0);var o=t.x-.5*r,i=t.x+.5*r,s=t.y-.5*a,A=t.y+.5*a;return e.x+n>o&&e.x-n<i&&e.y+n>s&&e.y-n<A};t.addToColorMap=function(e,t,r,a,n,o,i){void 0===i&&(i=!1);var s=e.length,A=0===s?s:e[s-1].stop+e[s-1].start,u=t.length-A;(u>0||i)&&(l.addToColorMap++,e.push({start:A,stop:u,r:r,g:a,b:n,a:o}))};t.crossHair=function(e,r,a,n,o,i,s){void 0===n&&(n=6),void 0===o&&(o=1),void 0===i&&(i=0),void 0===s&&(s=0);var A=.5*n;t.line2Poly(e-A-i,r-s,e+A-i,r-s,a,o),t.line2Poly(e-i,r-A-s,e-i,r+A-s,a,o)};t.crossHairLines=function(e,t,r,a,n,o){void 0===a&&(a=6),void 0===n&&(n=0),void 0===o&&(o=0);var i=.5*a;r.push(e-i-n,t-o,e+i-n,t-o),r.push(e-n,t-i-o,e-n,t+i-o)};t.crossHairLinesTech=function(e,t,r,a,n,o){void 0===a&&(a=6),void 0===n&&(n=0),void 0===o&&(o=0);var i=.5*a;r.push(e-i-n,t-o,e+i-n,t-o),r.push(e-n,t-i-o,e-n,t+i-o)};t.crossHair45deg=function(e,r,a,n,o,i,s){void 0===n&&(n=6),void 0===o&&(o=1),void 0===i&&(i=0),void 0===s&&(s=0);var A=.5*n;t.line2Poly(e-A-i,r-A-s,e+A-i,r+A-s,a,o),t.line2Poly(e+A-i,r+A-s,e-A-i,r-A-s,a,o)};t.crossHair45degLines=function(e,t,r,a,n,o,i){void 0===a&&(a=6),void 0===n&&(n=1),void 0===o&&(o=0),void 0===i&&(i=0);var s=.5*a;r.push(e-s-o,t-s-i,e+s-o,t+s-i),r.push(e+s-o,t+s-i,e-s-o,t-s-i)};t.getColorMapColorKey=function(e,t,r,a){return e+"_"+t+"_"+r+"_"+a};t.unitePolyColorMaps=function(e,r){for(var a=e.length,n=[],o=[],i=e[0].length,s=0;s<i;s++){for(var A=0;A<a;A++){var u=e[A][s],l=r[A].slice(u.start,u.start+u.stop);o.push.apply(o,l)}var c=e[0][s];t.addToColorMap(n,o,c.r,c.g,c.b,c.a)}return{colorMap:n,polys:o}};var x=null,S=null;t.setupBuffers=function(e){x=e.createBuffer(),S=e.createBuffer()};t.drawColorMap=function(e,t,r,n,o){if(void 0===o&&(o=n.TRIANGLES),0!==t.length){l.drawColorMap++,l.vertices+=t.length;var i=a.GLUniformLocation(n,"u_color");n.bufferData(n.ARRAY_BUFFER,T(t),n.STREAM_DRAW);for(var s=e.length,A=0;A<s;A++){var u=e[A];u.stop>0&&(l.drawColorMapCalls++,n.uniform4f(i,u.r,u.g,u.b,u.a),n.drawArrays(o,.5*u.start,.5*u.stop))}}};t.drawColorMapSingle=function(e,t,r,o){if(void 0===o&&(o=r.TRIANGLES),0!==t.length){var i=performance.now();l.vertices+=t.length,l.drawColorMapSingle++;for(var s=T(t,.5*t.length*4),A=0,u=e.length,c=0;c<u;c++){var d=e[c];if(d.stop>0)for(var p=.5*d.stop,f=0;f<p;f++)s[A]=d.r,s[A+1]=d.g,s[A+2]=d.b,s[A+3]=d.a,A+=4}n.default(a.GLctx.VerticesMultiColor,r);var h=a.GLAttribLocations(r,"a_color");r.bindBuffer(r.ARRAY_BUFFER,x),r.bufferData(r.ARRAY_BUFFER,s,r.STREAM_DRAW),r.enableVertexAttribArray(h),r.vertexAttribPointer(h,4,r.FLOAT,!1,0,0);var v=a.GLAttribLocations(r,"a_position");if(r.bindBuffer(r.ARRAY_BUFFER,S),r.bufferData(r.ARRAY_BUFFER,T(t),r.STREAM_DRAW),r.enableVertexAttribArray(v),r.vertexAttribPointer(v,2,r.FLOAT,!1,0,0),r.drawArrays(o,0,.5*t.length),t.length%2!=0)throw"Err uneven count";var g=performance.now()-i;l.drawColorMapSingleTimings+=g}};t.drawColor=function(e,t,r,n,o,i,s){if(void 0===s&&(s=t.TRIANGLES),e.length>0){l.drawColor++,l.vertices+=e.length;var A=a.GLUniformLocation(t,"u_color"),u=T(e);if(t.bufferData(t.ARRAY_BUFFER,u,t.STREAM_DRAW),t.uniform4f(A,r,n,o,i),t.drawArrays(s,0,e.length/2),e.length%2!=0)throw"Err uneven count"}};var _={};!function(e){for(var t=10;t<e;t+=10)_[t]=new Float32Array(t)}(4e3);var T=function(e,t){void 0===t&&(t=e.length);var r=10*Math.ceil(.1*t),a=_[r];if(a)return a.set(e),a;var n=new Float32Array(r);return r<1e3&&(_[r]=n),n.set(e),n};t.toClipSpaceX=function(e,t){return e/t*2-1};t.toClipSpaceY=function(e,t){return-1*(e/t*2-1)};t.drawDebug=function(e){e(o.default().gui)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLAYER_SCORE_PLAYER_COLLIDED_WITH_ASTEROID=t.PLAYER_SCORE_REMOVED_ASTEROID=t.P_CHUNKS_SIZE_RES=t.PLAYER_SCORE_BULLET_HIT_ASTEROID=t.PLAYER_SCORE_KILLED_OTHER_SHIP=t.PLAYER_SCORE_BULLET_HIT_OTHER_SHIP=t.PLAYER_SCORE_STRUCK_BY_BULLET=t.PLAYER_SCORE_PLAYER_COLLIDED_WITH_SHIP=t.SHIP_MAX_MINES=t.SHIP_MAX_FLAMES=t.SHIP_MAX_ULTRABRIGHT=t.SHIP_MAX_HOMING_BULLETS=t.SHIP_MAX_SHIELD=t.SHIP_MAX_ELECTROBASTARDRAYS=t.SHIP_MAX_PROXIMITYMINES=t.SHIP_MAX_LIFE=t.SHIP_MAX_MISSILES=t.SHIP_MAX_BULLETS=t.SHIP_MAX_ROCKETS=t.SHIP_MAX_BOOST=t.SHIP_MAX_VEL=t.SPACEPORT_START_LIFE=t.ROCKET_START_LIFE=t.TEXT_SIZE_HUGE=t.TEXT_SIZE_SMALL=t.LEVEL_COMPLETION_TIMEOUT=t.BULLET_OWNER_IMMUNE_THRESHOLD=t.BULLET_START_LIFE=t.VERSION_STR=t.CHANGELOG=t.VELOCITY_THRESHOLD_COLLISION_SUBSTEP=t.PX_TO_MEETERS_CONVERSION=t.DAYLIGHT_LEVEL_START_TIME=t.DAYLIGHT_NIGHT_TIME=t.DAYLIGHT_TOTAL_DUSK_TIME=t.DAYLIGHT_TOTAL_DAWN_TIME=t.DAYLIGHT_DUSK_BEGIN_TIME=t.DAYLIGHT_DAWN_BEGIN_TIME=t.DAYLIGHT_TOTAL_TIME=t.STEP_MULTIP=t.NOTIFICATION_LIFE=t.TEXT_SIZE_LARGE=t.TEXT_SIZE_MEDIUM=t.ROCKFORMATION_RADIUS_LIFE_MULTIP=t.ASTEROID_RADIUS_LIFE_MULTIP=t.GAME_INTRO_TIMER=t.FORCE_FIELD_RESOLUTION=t.explosionsSizeList=t.FORCEFIELD_RESOLUTION_REVERSED_F2=t.FORCEFIELD_RESOLUTION_F2=t.WHITE_HOLE_Y=t.WHITE_HOLE_X=t.WORM_HOLE_OUT_Y=t.WORM_HOLE_OUT_X=t.WORM_HOLE_IN_Y=t.WORM_HOLE_IN_X=t.MAX_RADIUS_ENTITY=t.MAX_NUM_ASTEROIDS=t.MAP_SAFETY_ZONE=t.SHIP_WIDTH_RADIUS=t.SHIP_LENGTH_RADIUS=t.doublePI=t.PARTICLE_SPEED_TO_COLOR=t.PARTICLE_MAX_SPEED=t.PLAYER_LIFE_LOW_THRESHOLD=void 0,t.PLAYER_LIFE_LOW_THRESHOLD=30,t.PARTICLE_MAX_SPEED=30,t.PARTICLE_SPEED_TO_COLOR=255/t.PARTICLE_MAX_SPEED,t.doublePI=2*Math.PI,t.SHIP_LENGTH_RADIUS=20,t.SHIP_WIDTH_RADIUS=13,t.MAP_SAFETY_ZONE=400,t.MAX_NUM_ASTEROIDS=1800,t.MAX_RADIUS_ENTITY=400,t.WORM_HOLE_IN_X=.3,t.WORM_HOLE_IN_Y=.15,t.WORM_HOLE_OUT_X=.5,t.WORM_HOLE_OUT_Y=.5,t.WHITE_HOLE_X=.8,t.WHITE_HOLE_Y=.8,t.FORCEFIELD_RESOLUTION_F2=10,t.FORCEFIELD_RESOLUTION_REVERSED_F2=1/t.FORCEFIELD_RESOLUTION_F2,t.explosionsSizeList=[3,30,70,90,250,510,750,1010],t.FORCE_FIELD_RESOLUTION=.01,t.GAME_INTRO_TIMER=300,t.ASTEROID_RADIUS_LIFE_MULTIP=5,t.ROCKFORMATION_RADIUS_LIFE_MULTIP=22,t.TEXT_SIZE_MEDIUM=30,t.TEXT_SIZE_LARGE=60,t.NOTIFICATION_LIFE=220,t.STEP_MULTIP=.065,t.DAYLIGHT_TOTAL_TIME=3e5,t.DAYLIGHT_DAWN_BEGIN_TIME=0*t.DAYLIGHT_TOTAL_TIME,t.DAYLIGHT_DUSK_BEGIN_TIME=.7*t.DAYLIGHT_TOTAL_TIME,t.DAYLIGHT_TOTAL_DAWN_TIME=.04*t.DAYLIGHT_TOTAL_TIME,t.DAYLIGHT_TOTAL_DUSK_TIME=.04*t.DAYLIGHT_TOTAL_TIME,t.DAYLIGHT_NIGHT_TIME=t.DAYLIGHT_DUSK_BEGIN_TIME+1.2*t.DAYLIGHT_TOTAL_DUSK_TIME,t.DAYLIGHT_LEVEL_START_TIME=.9*t.DAYLIGHT_TOTAL_TIME,t.PX_TO_MEETERS_CONVERSION=.25,t.VELOCITY_THRESHOLD_COLLISION_SUBSTEP=5;t.CHANGELOG=["0.47.2 RAGL Illumination and fire snakes","0.46 Raycasted spacefog","0.45.5.1 Parasite: trial by fire","0.45 force damage","0.44 Minefields","0.43.5.1 One tree to rule them all (pooling)","0.41 From dusk til dawn","0.40.2 AMD shadows working(!)","0.40 Destroyers repaired by spaceport workers","0.39 the space snakes are back","0.38.1.1 coaxial gun mount","0.38 destruction","0.37.0.1 cluster rockets","0.36.2.1 persistant chunks","0.36 Chunks > scanline (alpha)","0.35.5 The iron economy","0.35 tech tree","0.34 highscore ladder","0.33.6.1 Dynamic layered forcemaps","0.32.1 High velocity impact resolver","0.31.2 ancient structures","0.30.2 procedural world","0.29 SAT collisions resolution","0.28.9.5 LOS shadows linear gradient","0.28.9.5 LOS shadows linear gradient","0.28.9.4 LOS shadows improved","0.28.9.1 LOS line of sight","0.28.9 shadow targets","0.28.8 back to crappy physics","0.28.7 destroyers","0.28.6 Fixed menu bugs."],t.VERSION_STR=t.CHANGELOG[0]+" 17/10/2024",t.BULLET_START_LIFE=400,t.BULLET_OWNER_IMMUNE_THRESHOLD=t.BULLET_START_LIFE-100,t.LEVEL_COMPLETION_TIMEOUT=16e3,t.TEXT_SIZE_SMALL=16,t.TEXT_SIZE_HUGE=110,t.ROCKET_START_LIFE=20,t.SPACEPORT_START_LIFE=1e3,t.SHIP_MAX_VEL=10,t.SHIP_MAX_BOOST=400,t.SHIP_MAX_ROCKETS=20,t.SHIP_MAX_BULLETS=5e3,t.SHIP_MAX_MISSILES=30,t.SHIP_MAX_LIFE=200,t.SHIP_MAX_PROXIMITYMINES=40,t.SHIP_MAX_ELECTROBASTARDRAYS=300,t.SHIP_MAX_SHIELD=1600,t.SHIP_MAX_HOMING_BULLETS=380,t.SHIP_MAX_ULTRABRIGHT=3800,t.SHIP_MAX_FLAMES=1200,t.SHIP_MAX_MINES=30,t.PLAYER_SCORE_PLAYER_COLLIDED_WITH_SHIP=1,t.PLAYER_SCORE_STRUCK_BY_BULLET=2,t.PLAYER_SCORE_BULLET_HIT_OTHER_SHIP=6,t.PLAYER_SCORE_KILLED_OTHER_SHIP=180,t.PLAYER_SCORE_BULLET_HIT_ASTEROID=2,t.P_CHUNKS_SIZE_RES=8e3;t.PLAYER_SCORE_REMOVED_ASTEROID=function(e){return e<40?10:50+Math.round(.25*e)};t.PLAYER_SCORE_PLAYER_COLLIDED_WITH_ASTEROID=function(e){return e<40?0:Math.round(2+.01*e)}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(1),r(3),r(6),r(175),r(176)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.circleCircleResolverQuick=t.resolve=t.angleDifference=t.fastPointCircleColl=t.fastCircleColl=t.distBetweenVectorsRelative=t.distanceBetweenVectors2Arrow=t.distanceBetweenVectors2=t.distanceBetweenVectors=t.distanceBetweenXYXY=t.distanceBetweenXYXYRelative=t.radiusIntersectPoint=t.radiusIntersectXYXY=t.radiusIntersect=t.midpointN=t.midpoint=t.distanceBetween=t.coarseVecotr=t.coarse=t.fine=t.getGuid=t.SetGuidToNegative=t.getMathSqrtUsage=void 0;var s=500,A=0,u=0,l=0,c=0,d=0,p=0;t.getMathSqrtUsage=function(){var e={distanceBetweenXYXYUse:p,fineUse:A,coarseUse:u,coarseVectorUse:l,distanceBetweenUse:c,distanceBetweenVectorsUse:d};return A=0,u=0,l=0,c=0,d=0,p=0,e};var f=1;t.SetGuidToNegative=function(){f=-1};t.getGuid=function(){return s+=f};t.fine=function(e,t,r){A++;var a,n=0,o=0;for(n=0,o=e-1;n<e;o=n++)t[n].y>r.y!=t[o].y>r.y&&r.x<(t[o].x-t[n].x)*(r.y-t[n].y)/(t[o].y-t[n].y)+t[n].x&&(a=!a);return a};t.coarse=function(e,t){u++;var r=e.radius+t.radius,a=e.pos.x-t.pos.x,n=e.pos.y-t.pos.y;return r>Math.sqrt(a*a+n*n)};t.coarseVecotr=function(e,t,r,a){l++;var n=t+a,o=e.x-r.x,i=e.y-r.y;return n>Math.sqrt(o*o+i*i)};t.distanceBetween=function(e,t){c++;var r=e.pos.x-t.pos.x,a=e.pos.y-t.pos.y;return Math.sqrt(r*r+a*a)};t.midpoint=function(e,t,a,n){return void 0===a&&(a=.5),void 0===n&&(n=new r.Vector(0,0)),n.set(e.x+(t.x-e.x)*a,e.y+(t.y-e.y)*a),n};t.midpointN=function(e,t,r){return void 0===r&&(r=.5),e+(t-e)*r};t.radiusIntersect=function(e,t){return(e.pos.x-t.pos.x)*(e.pos.x-t.pos.x)+(e.pos.y-t.pos.y)*(e.pos.y-t.pos.y)<(e.radius+t.radius)*(e.radius+t.radius)};t.radiusIntersectXYXY=function(e,t,r,a,n,o){return(e-a)*(e-a)+(t-n)*(t-n)<(r+o)*(r+o)};t.radiusIntersectPoint=function(e,t,r,a,n){return(e-a)*(e-a)+(t-n)*(t-n)<r*r};t.distanceBetweenXYXYRelative=function(e,t,r,a){var n=e-r,o=t-a;return n*n+o*o};t.distanceBetweenXYXY=function(e,t,r,a){p++;var n=e-r,o=t-a;return Math.sqrt(n*n+o*o)};t.distanceBetweenVectors=function(e,t){d++;var r=e.x-t.x,a=e.y-t.y;return Math.sqrt(r*r+a*a)},t.distanceBetweenVectors2=function(e,t){d++;var r=e.x-t.x,a=e.y-t.y;return Math.sqrt(r*r+a*a)};t.distanceBetweenVectors2Arrow=function(e,t){var r=e.x-t.x,a=e.y-t.y;return Math.sqrt(r*r+a*a)};t.distBetweenVectorsRelative=function(e,t){var r=e.x-t.x,a=e.y-t.y;return r*r+a*a};t.fastCircleColl=function(e,t){var r=e.radius+t.radius,a=e.pos.x-t.pos.x,n=e.pos.y-t.pos.y;return r*r>a*a+n*n};t.fastPointCircleColl=function(e,t){var r=t.radius,a=e.x-t.pos.x,n=e.y-t.pos.y;return r*r>a*a+n*n};t.angleDifference=function(e,t){var r=(e-t)%a.doublePI,n=(e-t)%a.doublePI;return r<n?-r:n};var h=new r.Vector(0,0),v=new r.Vector(0,0);t.resolve=function(e,r,n){if(6===r.shape||6===n.shape||3===r.shape||3===n.shape)return t.circleCircleResolverQuick(e,r,n);var s=r.vel.getLength(),A=n.vel.getLength();if(s>a.VELOCITY_THRESHOLD_COLLISION_SUBSTEP||A>a.VELOCITY_THRESHOLD_COLLISION_SUBSTEP){h.setFromVec(r.vel).mult(e),v.setFromVec(n.vel).mult(e),r.pos.subtract(h),n.pos.subtract(v);var u=Math.max(s,A),l=Math.ceil(u/a.VELOCITY_THRESHOLD_COLLISION_SUBSTEP),c=1/l;h.mult(c),v.mult(c);for(var d=!1,p=0;p<l;p++)if(r.pos.add(h),n.pos.add(v),t.fastCircleColl(r,n)&&null!==(f=o.SAT_collider(r,n)).pen){(g=new i.CollData(r,n,f.axis,f.pen,f.vertex)).penRes(),g.collRes(),d=!0;break}if(d)return!0}else{var f,g;if(null!==(f=o.SAT_collider(r,n)).pen)return(g=new i.CollData(r,n,f.axis,f.pen,f.vertex)).penRes(),g.collRes(),!0}return!1};t.circleCircleResolverQuick=function(e,t,r,a,o,i,s,A){void 0===a&&(a=t.radius),void 0===o&&(o=r.radius),void 0===i&&(i=t.radius),void 0===s&&(s=r.radius),void 0===A&&(A=1);var u=r.pos.x-t.pos.x,l=r.pos.y-t.pos.y,c=Math.sqrt(u*u+l*l);if(0===c)return t.pos.x+=o,t.pos.y+=o,!0;if(a+o>=c){var d=u/c,p=l/c,f=c*(a/(a+o))*A,h=t.pos.x+d*f,v=t.pos.y+p*f;if(t.pos.x=h-d*a,t.pos.y=v-p*a,r.pos.x=h+d*o,r.pos.y=v+p*o,a+o>=c){var g=u/c,y=l/c;r.pos.x=t.pos.x+g*(a+o),r.pos.y=t.pos.y+y*(a+o)}return function(e,t,r,a,o,i,s,A,u){var l=A-u,c=A+u,d=r*Math.sin(o-s),p=Math.cos(s),f=Math.sin(s),h=r*Math.cos(o-s),v=a*Math.cos(i-s),g=Math.cos(s+Math.PI/2),y=Math.sin(s+Math.PI/2),m=(h*l+2*u*v)/c,x=m*p+d*g,S=m*f+d*y,_=e.vel.getAngle();e.vel.x=x,e.vel.y=S;var T=e.vel.getAngle(),E=n.angleDelta(_,T);s+=Math.PI;var M=a*Math.sin(i-s);h=r*Math.cos(o-s);var I=(m=((v=a*Math.cos(i-s))*-l+2*A*h)/c)*-p+M*-g,L=m*-f+M*-y,w=t.vel.getAngle();t.vel.x=I,t.vel.y=L;var b=t.vel.getAngle(),P=n.angleDelta(w,b);e.vel.mult(.98-n.map(Math.abs(E),0,Math.PI,0,.08)),t.vel.mult(.98-n.map(Math.abs(P),0,Math.PI,0,.08))}(t,r,Math.sqrt(t.vel.x*t.vel.x+t.vel.y*t.vel.y),Math.sqrt(r.vel.x*r.vel.x+r.vel.y*r.vel.y),Math.atan2(t.vel.y,t.vel.x),Math.atan2(r.vel.y,r.vel.x),Math.atan2(p,d),t.mass,r.mass),t.pos.x+=t.vel.x,t.pos.y+=t.vel.y,r.pos.x+=r.vel.x,r.pos.y+=r.vel.y,!0}return!1}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(7),r(57)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQuadTreesObj=t.getApiReqestData=t.staleWhileRevalidateApiCache=t.resetApiCache=t.___getQtreeList=t.SetupQuadTreeRangeType=void 0;var n=[];t.SetupQuadTreeRangeType=function(e){n.map(function(e){return e.destroy()});for(var t=[],o=0;o<2;o++)t.push(new a.QuadTreeFastRect32(new r.Rectangle(0,0,0,0),0,0));n=t,m()};t.___getQtreeList=function(){return n};var o={},i=[];t.resetApiCache=function(){o={},i.length=0};t.staleWhileRevalidateApiCache=function(){for(var e=i.splice(0,Math.min(i.length,Math.max(Math.floor(.75*i.length),20))),t=e.length,r=0;r<t;r++)delete o[e[r]]};var s=0,A=0,u=0;t.getApiReqestData=function(){var e={cachehit:s,cachemiss:A,queryTreesRectTime:u};return s=0,A=0,u=0,e};var l=function(e,t,r,a,o){return void 0===o&&(o=!1),x(n[0].queryVec(t,r,a),e)[3002]},c=function(e,t,r,a,o){for(var i=n[0].queryVec(t,r,a),s=[],A=i.length,u=0;u<A;u++){var l=i[u];l.guid!==o&&s.push(l)}return x(s,[e])[3002]},d=function(e,t,r){void 0===r&&(r=!1);var a=performance.now(),l=function(e){return 10*(.1*e.x|0)+"_"+10*(.1*e.y|0)+"_"+10*(.1*e.width|0)+"_"+10*(.1*e.height|0)}(t),c=o[l];if(c){for(var d=[],p=e.length,f=0;f<p;f++){var h=e[f];d.push.apply(d,c[h])}return s++,u+=performance.now()-a,d}var v=n[0],g=.5*t.width,y=.5*t.height,m={x:t.x+g,y:t.y+y},S=x(v.queryVec(m,g,y),e);return function(e,t){o[e]=t,i.push(e)}(l,S),A++,u+=performance.now()-a,S[3002]},p=function(e,t,r){return x(n[0].queryCircle(t,r),e)[3002]},f=function(e,t){return x(n[0].queryShape(t),e)[3002]},h=function(e,t,r){return x(n[0].queryRay(t,r),e)[3002]},v=function(e,t){for(var r=n[0].query(t),a=r.length,o=[],i=0;i<a;i++){var s=r[i];s.guid!==t.guid&&o.push(s)}return x(o,e)[3002]},g=function(e,t){for(var r=e.length,a=0;a<r;a++)t(n[e[a]])},y={All:n[0],query:v,queryTreesVec:l,queryTreeVecIgnoreGuid:c,queryTreesRect:d,queryShapeFirstHit:f,queryRay:h,queryCircle:p,customOperator:g},m=function(){y={All:n[0],query:v,queryTreesVec:l,queryTreeVecIgnoreGuid:c,queryTreesRect:d,queryShapeFirstHit:f,queryRay:h,queryCircle:p,customOperator:g}};function x(e,t){for(var r=e.length,a={},n=0;n<r;n++){var o=e[n],i=o.type;(u=a[i])||(u=a[i]=[]),u.push(o)}a[3001]=e;var s=[],A=t.length;for(n=0;n<A;n++){var u;if(u=a[t[n]])for(var l=u.length,c=0;c<l;c++)s.push(u[c])}return a[3002]=s,a}t.getQuadTreesObj=function(){return y}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(3)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBlockcircleArray=t.normalize=t.pad_9=t.pad009=t.pad09=t.rotateVector=t.RandomStepBased=t.angleDelta=t.normalizeRadianAngle=t.normalizeRadianNew=t.diffRadianPositive=t.normalizeRadianPositive=t.wrapRadianAngle=t.eqNumberInArr=t.wrapTargetPos=t.map=t.MAX_INT_RANGES=void 0;t.MAX_INT_RANGES={MAX_INT_32:2147483647,MAX_INT_32_SS_5000:2147478647,MAX_INT_32_HALF:Math.round(1073741823.5),MAX_INT_32_QUART:Math.round(536870911.75)};t.map=function(e,t,r,a,n,o,i){void 0===o&&(o=!0),void 0===i&&(i=!1);var s=(e-t)*(n-a)/(r-t)+a;return i&&(s=n-s),o?Math.max(a,Math.min(n,s)):s};var n=new r.Vector(0,0);t.wrapTargetPos=function(e,t,r,a,o){var i=Math.abs(r.x-a.x),s=Math.abs(r.y-a.y),A=r.x-a.x,u=r.y-a.y,l=a.x,c=a.y;return i>.5*e&&(l+=A>0?A+e:A-e),s>.5*t&&(c+=u>0?u+t:u-t),(o=o||n).x=l,o.y=c,o};t.eqNumberInArr=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1};t.wrapRadianAngle=function(e){return e<0&&(e+=a.doublePI),e%=a.doublePI};t.normalizeRadianPositive=function(e){var t=2*Math.PI;return e<0?e=e%t+t:e>t&&(e%=t),e};t.diffRadianPositive=function(e,t){var r=Math.abs(e-t)>Math.PI,a=e>Math.PI,n=t>Math.PI,o=2*Math.PI;return a?n?t-e:r?o-e+t:t-e:n&&r?-(o-t+e):t-e};t.normalizeRadianNew=function(e){return(e=(360+(e%=360))%360)>180&&(e-=360),e};t.normalizeRadianAngle=function(e){return e-a.doublePI*Math.floor((e+Math.PI)/a.doublePI)};t.angleDelta=function(e,t){return Math.abs(t-e)<Math.PI?t-e:t>e?t-e-a.doublePI:t-e+a.doublePI};var o={};t.RandomStepBased=function(e,t){if(0===e){var r=o[t];return r||(o[t]=Math.random())}return Math.random()};t.rotateVector=function(e,t,a){void 0===a&&(a=new r.Vector(0,0));var n=e.x*Math.cos(t)-e.y*Math.sin(t),o=e.y*Math.cos(t)+e.x*Math.sin(t);return a.set(n,o),a};t.pad09=function(e){return e<10?"0"+e:e};t.pad009=function(e){return e<100?e<10?"00"+e:"0"+e:e+""};t.pad_9=function(e){return e<10?" "+e:e+""};var i={},s={};t.normalize=function(e,t,r,a,n){void 0===r&&(r=100),void 0===a&&(a=0),void 0===n&&(n="");var o=0,A=Number.MIN_VALUE,u=Number.MAX_VALUE,l=i[t]=i[t]||[];l.push(e);var c=s[t]=s[t]||[];n&&c.push(n);var d=l.length;d>r&&(l.shift(),d--);for(var p=0;p<d;p++){var f=l[p];o+=f,f<u&&(u=f),f>A&&(A=f)}return a>0?{avg:parseFloat((o/d).toFixed(a)),high:parseFloat(A.toFixed(a)),low:parseFloat(u.toFixed(a)),name:n}:{avg:Math.round(o/d),high:Math.round(A),low:Math.round(u),name:n}};t.createBlockcircleArray=function(e,t,n,o){for(var i=o.x,s=o.y,A=0,u=0,l=e,c=[];l>-1;--l)A=i+Math.cos(a.doublePI*(l/e)+t)*n>>0,u=s+Math.sin(a.doublePI*(l/e)+t)*n>>0,c.push(new r.Vector(A,u));return c}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Rectangle=t.rect_pool_put=t.rect_pool_pop=t.getRects=void 0;var r=[],a=0;t.getRects=function(){return a+" / "+r.length};t.rect_pool_pop=function(e,t,a,o){if(r.length>0){var i=r.pop();return i.update(e,t,a,o),0,i}return new n(e,t,a,o)};t.rect_pool_put=function(e){0,r.push(e)};var n=function(){function e(e,t,r,n){this.x=e,this.y=t,this.height=n,this.width=r,a++}return e.prototype.update=function(e,t,r,a){this.x=e,this.y=t,this.height=a,this.width=r},e.prototype.updateFromRect=function(e){this.x=e.x,this.y=e.y,this.height=e.height,this.width=e.width},e.prototype.intersects=function(e){return!(e.x>this.x+this.width||e.x+e.width<this.x||e.y>this.y+this.height||e.y+e.height<this.y)},e.prototype.intersectsIM=function(e){return!(e.pos.x>this.x+this.width||e.pos.x+e.radius<this.x||e.pos.y>this.y+this.height||e.pos.y+e.radius<this.y)},e.prototype.containsIM=function(e){return e.pos.x-e.radius>this.x&&e.pos.y-e.radius>this.y&&e.pos.x+2*e.radius<this.x+this.width&&e.pos.y+2*e.radius<this.y+this.height},e.prototype.updateFromIM=function(e){this.x=e.pos.x-e.radius,this.x=e.pos.x-e.radius,this.width=2*e.radius,this.height=2*e.radius},e.prototype.containsRect=function(e){return e.x>this.x&&e.y>this.y&&e.x+e.width<this.x+this.width&&e.y+e.height<this.y+this.height},e.prototype.intersectsPoint=function(e){return e.x>this.x&&e.y>this.y&&e.x<this.x+this.width&&e.y<this.y+this.height},e.prototype.intersectsPointVertical=function(e){return e.y>this.y&&e.y<this.y+this.height},e.prototype.intersectsXY=function(e,t){return e>this.x&&t>this.y&&e<this.x+this.width&&t<this.y+this.height},e.prototype.scale=function(e){var t=e*this.width,r=e*this.height,a=this.x-.5*(t-this.width),n=this.y-.5*(r-this.height);this.x=a,this.y=n,this.width=t,this.height=r},e.prototype.add=function(e){var t=this.width+2*e,r=this.height+2*e,a=this.x-e,n=this.y-e;this.x=a,this.y=n,this.width=t,this.height=r},e.prototype.toPointArray=function(){return[{x:this.x,y:this.y},{x:this.x,y:this.y+this.height},{x:this.x+this.width,y:this.y},{x:this.x+this.width,y:this.y+this.height}]},e.prototype.toLines=function(e,t){return[this.x-e,this.y-t,this.x+this.width-e,this.y-t,this.x-e,this.y+this.height-t,this.x+this.width-e,this.y+this.height-t,this.x-e,this.y-t,this.x-e,this.y+this.height-t,this.x+this.width-e,this.y-t,this.x+this.width-e,this.y+this.height-t]},e.prototype.toString=function(e){return e?"x:"+(0|this.x)+", y:"+(0|this.y)+", w:"+(0|this.width)+", h:"+(0|this.height):"x:"+this.x+", y:"+this.y+", w:"+this.width+", h:"+this.height},e}();t.Rectangle=n}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(61),r(0),r(3)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.createUnitializedTextBuffers=function(e,t,r){void 0===r&&(r=!1),window.textBuffers=this.buffer,this.INITIALIZATION=!1;var a=[];for(var n in this.initializationBuffer)a.push(n);this.initalizer(a,a.length,e,t,r)},e.initalizer=function(e,t,r,a,n){var o=this;void 0===n&&(n=!1);var i=function(){var i=e.pop(),s=i.split(o.CACHE_SPLIT_KEY),A=o.create(s[0],parseInt(s[1],10),s[2],1===parseInt(s[3],10),!1,a),u=o.buffer[i];u.frame=A.frame,u.rgbIndex=A.rgbIndex,u.w=A.w,u.h=A.h,u.length=A.length,u.texture=A.texture,e.length>0?(r(Math.abs(e.length/t-1),!1,e.length),o.initalizer(e,t,r,a)):n?(o.IGNORE_CACHE=!1,r(1,!0,t)):setTimeout(function(){o.IGNORE_CACHE=!1,r(1,!0,t)},2)};n?i():setTimeout(function(){setTimeout(i,0)},0)},e.createSplitted=function(e,t,r,a,n,o,i){void 0===a&&(a="_"),void 0===n&&(n=!1),void 0===o&&(o=!1);var s=[],A=e.split("");a&&A.push(a);for(var u=0;u<A.length;u++)s.push(this.create(A[u],t,r,n,o,i));return s},e.create=function(e,t,a,o,i,s,A){if(void 0===o&&(o=!1),void 0===i&&(i=!1),void 0===A&&(A=!1),e.indexOf(this.CACHE_SPLIT_KEY)>-1)throw new Error("illeagal charS "+this.CACHE_SPLIT_KEY+" at text create");var u=e+this.CACHE_SPLIT_KEY+t+this.CACHE_SPLIT_KEY+a+this.CACHE_SPLIT_KEY+(o?"1":"0");if(this.INITIALIZATION&&!i){this.initializationBuffer[u]=u;var l={frame:null,rgbIndex:0,w:0,h:0,length:0,imageData:null,texture:{width:0,height:0,texture:null,index:0},str:e};return this.buffer[u]?this.buffer[u]:(console.log("CREATING:"+u),A||(this.buffer[u]=l),l)}var c=this.buffer[u];if(c&&!this.IGNORE_CACHE)return c;this.INITIALIZATION||this.IGNORE_CACHE||i||this.NumErrTypeWarns<this.MaxErrTypeWarns&&(console.warn("text created runtime:",'"'+e+'"',"size: "+t),this.NumErrTypeWarns++,this.NumErrTypeWarns===this.MaxErrTypeWarns&&console.warn("max text errors reported. Ignoring rest"));var d,p=0,f=0,h=0;switch(a){case"r":p=255,d=0;break;case"g":f=255,d=1;break;case"b":h=255,d=2;break;case"z":d=0;break;case"w":p=255,f=255,h=255,d=0;break;case"y":p=255,f=255,h=0,d=0}var v=document.createElement("canvas");v.height=t;var g=v.getContext("2d"),y=t<n.TEXT_SIZE_MEDIUM?"monospace":"dorito",m="rgba("+p+","+f+","+h+",255)";g.font="100 "+t+"px "+y,g.fillStyle=m;var x=g.measureText(e);v.width=x.width+.3*t,g=v.getContext("2d"),o&&(g.fillStyle=m,g.fillRect(0,0,v.width,v.height),g.fillStyle="black",g.fillRect(2,2,v.width-4,v.height-4)),g.font="100 "+t+"px "+y,g.fillStyle=m,g.fillText(e,5,.8*t);var S=g.getImageData(0,0,v.width,v.height),_=r.default().global_gl,T={imageData:S,frame:S.data,rgbIndex:d,w:v.width,h:v.height,length:S.data.length,texture:_?this.imageDataToTexture(_,S):null,str:e};return this.IGNORE_CACHE&&!i||A||(this.buffer[u]=T),T},e.addList=function(t,r,a,n,o,i,s,A){void 0===i&&(i=!1),void 0===s&&(s=1),void 0===A&&(A=.8);var u=a.length,l=n;if(i)for(var c=0;c<u;c++){var d=a[c];e.addDistorted(t,r,d,l,o,s,A),l+=d.w}else for(c=0;c<u;c++){d=a[c];e.add(t,r,d,l,o),l+=d.w}},e.addListGL=function(t,r,a,n,o,i,s){void 0===s&&(s=!1);for(var A=a.length,u=n,l=0;l<A;l++){var c=a[l];e.addGL(t,r,c,u,o,i,s),u+=c.w}},e.printListGL=function(e,t,r,a,n,o,i,s,A,u){void 0===A&&(A=!1),void 0===u&&(u=1);for(var l=Math.min(o,r.length-1),c=[],d=0;d<l;d++)c.push(r[d]);i&&c.push(r[r.length-1]),this.addListGL(e,t,c,a,n,s)},e.printList=function(e,t,r,a,n,o,i,s,A){void 0===s&&(s=!1),void 0===A&&(A=1);for(var u=Math.min(o,r.length-1),l=[],c=0;c<u;c++)l.push(r[c]);i&&l.push(r[r.length-1]),this.addList(e,t,l,a,n,s,A)},e.measureBuffers=function(e){for(var t=e.length,r=0,a=0;a<t;a++){var n=e[a];!n||n.w,r+=n.w}return r},e.addDistorted=function(t,r,a,n,o,i,s){void 0===i&&(i=1),void 0===s&&(s=.8),e.add(t,r,a,n+Math.random()*i*6,o+Math.random()*i*6,Math.random()>s?Math.floor(a.w*(.5*Math.random()+.5)):Math.random()>s?Math.floor(a.w*(.0025*Math.random()+.9975)):a.w,Math.random()>s?Math.floor(a.length*Math.random()):a.length,Math.random()>s?Math.floor(a.length*Math.random()*.4):0)},e.add=function(e,t,r,a,n,o,i,s){void 0===o&&(o=r.w),void 0===i&&(i=r.length),void 0===s&&(s=0);for(var A=r.frame,u=r.rgbIndex,l=o,c=0,d=0,p=s;p<i;p+=4){var f=Math.floor(a+d);if(f<e&&f>0){var h=Math.floor(n+c)*e*4+4*f,v=A[p+u];v&&(t[h+u]=v)}d>=l&&(c++,d=0),d++}},e.getTextsBatched=function(){return null},e.addGLBatched=function(e,t,r,a,n){void 0===n&&(n=1),this.textBatch[e]||(this.textBatch[e]=[]),this.textBatch[e].push({program:e,buffer:t,dstX:r,dstY:a,tx:n})},e.addGL=function(e,t,r,n,o,i,s){void 0===s&&(s=!1);var A=r.texture.texture,u=r.texture.width,l=r.texture.height;e.bindTexture(e.TEXTURE_2D,A);var c=a.GLAttribLocations(e,"a_texcoord"),d=a.GLUniformLocation(e,"u_matrix"),p=a.GLUniformLocation(e,"u_texture"),f=a.GLUniformLocation(e,"distortionStart"),h=a.GLUniformLocation(e,"distortionEnd");e.uniform1f(f,Math.random()),e.uniform1f(h,Math.random());var v=window.m4;e.enableVertexAttribArray(c),e.vertexAttribPointer(c,2,e.FLOAT,!1,0,0);var g=v.orthographic(0,s?i.SW:e.canvas.width,s?i.SH:e.canvas.height,0,-1,1);g=v.translate(g,n,o,0),g=v.scale(g,u,l,1),e.uniformMatrix4fv(d,!1,g),e.uniform1i(p,0),e.drawArrays(e.TRIANGLES,0,6)},e.imageDataToTexture=function(e,t){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);var a={width:t.width,height:t.height,texture:r,index:this.textureIndex};return this.textureIndex++,e.bindTexture(e.TEXTURE_2D,a.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),a},e.textBatch={},e.textureIndex=0,e.MaxErrTypeWarns=4,e.NumErrTypeWarns=0,e.positionBuffer=null,e.positions=new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),e.texcoords=new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),e.INITIALIZATION=!0,e.IGNORE_CACHE=!0,e.initializationBuffer={},e.buffer={},e.CACHE_SPLIT_KEY="[-_-]",e.addNumberCacheable=function(t,r,a){for(var n=(t+"").split(""),o=n.length,i=[],s=0;s<o;s++)i.push(e.create(n[s],r,a));return i},e}();t.default=o}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOtherShipsForThisGuid=t.getOtherShips=void 0,t.default=function(e){var t=e.game.player,r=t.length;if(e.game.playerGuid<0)return t[0];for(var a=e.game.playerGuid,n=0;n<r;n++){var o=t[n];if(o.guid===a)return o}};t.getOtherShips=function(e,t){for(var r=e.game.player,a=[],n=r.length,o=t||e.game.playerGuid,i=0;i<n;i++){var s=r[i];s.guid!==o&&a.push(s)}return a};t.getOtherShipsForThisGuid=function(e,t){for(var r=e.game.player,a=[],n=r.length,o=0;o<n;o++){var i=r[o];i.guid!==t&&a.push(i)}return a}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(8),r(0),r(2)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_GL_FIXED_ARRAY=t.LOG_GL_FIXED=t.LOG_GL_FIXED_FORCED=t.LOG_GL=t.LOG_GL_CLEAR=t.LOG_GL_CLEAR_ALL=void 0;var i=[],s={},A={},u=!1,l=!0;t.LOG_GL_CLEAR_ALL=function(){for(;i.length>0;)i.pop();for(var e in s)delete s[e];for(var e in A)delete A[e]};t.LOG_GL_CLEAR=function(){for(;i.length>0;)i.pop()};t.LOG_GL=function(e){if(l)if(i[0]&&0===i[0].indexOf(e+"")){var t=i[0],r=t.length;if(")"===t[r-1]){for(var a=0,n=0;n<6;n++)if("("===t[r-(3+n)]){a=n+3;break}var o=t.substr(r-a+1,a-2),s=parseInt(o,10);0===s&&(s=1);var A=t.substr(0,r-a)+"("+(s+1)+")";i[0]=A}else i[0]=e+" (1)"}else i.unshift(e+""),i.length>32&&i.pop()};t.LOG_GL_FIXED_FORCED=function(e,t){u=!0,A[t]={key:t,val:e+""}};t.LOG_GL_FIXED=function(e,t){s[t]={key:t,val:e+""}};t.LOG_GL_FIXED_ARRAY=function(e,t){s[t]={key:t,val:e.join(",")}},t.default=function(e){var t=e.gl,c=e.game,d=c.resW,p=0;if(l=c.menuSettings.onScreenLogging,!u&&!l)return"log";var f=a.default(a.GLctx.Texture,t),h=0;for(var v in A){h++;var g=r.default.create(A[v].key+":",18,"r"),y=r.default.createSplitted(A[v].val,18,"r","");r.default.addListGL(t,f,o([g],y),d-1280,150+20*p,e),p++}if(h>0){var m=d-880,x=[];a.default(a.GLctx.Vertices,t),n.fillPoly(0,m,100,100,20,x,0,0),n.drawColor(x,t,1,0,0,1)}if(!c.menuSettings.onScreenLogging)return"log";for(var S=a.default(a.GLctx.Texture,t),_=(c.zoomTX,0);_<i.length;_++){var T=r.default.create(i[_],18,"w",!1,!1,null,!1);r.default.addGL(t,S,T,d-480,150+20*_+20*h,e)}for(var v in s){g=r.default.create(s[v].key,18,"y",!1,!1,null),y=r.default.createSplitted(s[v].val,18,"y","",!1,!1,null);r.default.addListGL(t,S,o([g],y),d-880,150+20*p,e),p++}return"Log"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(4),r(3),r(1),r(16),r(118),r(28),r(43)],void 0===(n=function(e,t,r,a,n,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShipColors=t.ShipColorStrings=t.increaseColorIndex=t.setColorIndex=t.getCurrentColorIndex=t.createNPCs=t.createDrones=t.createEnemies=t.createShip=t.createDestroyer=t.applyNetworkPropertiesToNewShip=t.shipRadius=void 0,t.shipRadius=1.02*new n.Vector(a.SHIP_LENGTH_RADIUS,a.SHIP_WIDTH_RADIUS).getLength();t.applyNetworkPropertiesToNewShip=function(e,t){e.guid=t.guid,e.kills=t.kills,e.deaths=t.deaths,e.SW=t.SW,e.SH=t.SH,e.name=t.name};t.createDestroyer=function(e,a,c){void 0===a&&(a=null),void 0===c&&(c=15);var d=r.getGuid(),p=o(o(o(o({repairing:!1,repairingCloseAngle:void 0},i.setImovableDefaults(s.WedgeCreator((null==a?void 0:a.pos.x)||3e3,(null==a?void 0:a.pos.y)||3e3,c,Math.pow(t.shipRadius*c*.5,3)))),{shape:1,opos:{x:0,y:0},acc:new n.Vector(0,0),mass:Math.pow(t.shipRadius*c*.5,3),thrust:new n.Vector(0,0),radarAngle:0,shields:0,level:0,vel:new n.Vector(0,0),angle:0,angleVel:0,angleAcc:0,radius:t.shipRadius*c,life:1e3,oLife:1e3,guid:d,shipSizeMultip:c,debugCircle:null,cannons:[],weapons:A.createDefaultShipWeapons(d,0),abilities:u.createDefaultShipAbilitys(),armor:{type:3,value:2}}),a),{type:0,collType:20});return p.cannons=l(p),p};var l=function(e){for(var t=[.2,.6],a=[],n=0;n<2;n++)for(var o=0;o<3;o++){var i={angle:0,baseAngle:0,min:0,baseMin:0,max:0,baseMax:0,pos:r.midpoint(e.pos,e.comp[0].vertex[o],t[n]),direction:1,fired:!1};a.push(i)}for(var s=[2,0,2,2,0,2],A=[1,1,0,1,1,0],u=0;u<a.length;u++){i=a[u];var l={min:Math.atan2(e.comp[0].vertex[A[u]].y-i.pos.y,e.comp[0].vertex[A[u]].x-i.pos.x),max:Math.atan2(e.comp[0].vertex[s[u]].y-i.pos.y,e.comp[0].vertex[s[u]].x-i.pos.x)};i.min=l.min,i.max=l.max,i.baseMin=l.min,i.baseMax=l.max,i.angle=i.min+.2,i.baseAngle=i.min+.2}return a};t.createShip=function(e,a,l){void 0===a&&(a={}),void 0===l&&(l=1);var c=r.getGuid();return o(o(o({},i.setImovableDefaults(s.WedgeCreator(.9*e.game.resW,.9*e.game.resH,1*l,Math.pow(.88*t.shipRadius,3)))),{specular:.8,flameOutCnt:0,acc:new n.Vector(0,0),shape:1,netpos:new n.Vector(0,0),netvel:new n.Vector(0,0),netangle:0,netSX:0,netSY:0,inSafeZone:!1,isTracing:!1,unableToComply:!1,bulletsFired:0,ownerGuid:-1,killedByGuid:-1,kills:0,deaths:0,avoidance:null,turnAcc:0,SX:0,SY:0,SW:e.game.SW,SH:e.game.SH,keyCodes:{LEFT:!1,UP:!1,RIGHT:!1,DOWN:!1,PRIMARY_WEAPON:!1,SECONDARY_WEAPON:!1,AUX_WEAPON:!1,TOGGLE_PRIMARY_WEAPON:!1,TOGGLE_SECONDARY_WEAPON:!1,TOGGLE_AUX_WEAPON:!1,PRIMARY_ABILITY:!1,SECONDARY_ABILITY:!1,AUX_ABILITY:!1,TOGGLE_PRIMARY_ABILITY:!1,STRAFELEFT:!1,STRAFERIGHT:!1,TOGGLE_SECONDARY_ABILITY:!1,TOGGLE_AUX_ABILITY:!1,INTERACT:!1},colorIndex:f,type:44,collType:6,guid:c,score:0,credits:2500,maxBullets:150,maxVel:10,life:100,oLife:100,radius:t.shipRadius,originalRadius:t.shipRadius,damageTaken:!1,angle:0,angleVel:0,angleAcc:0,thrust:new n.Vector(0,0),vel:new n.Vector(0,0),name:"",camera:{chaseX:0,chaseY:0,velChaseX:0,velChaseY:0,history:[]},level:0,miningRig:null,aimPoint:{x:0,y:0},aimTarget:null,weapons:A.createDefaultShipWeapons(c,44,[25]),abilities:u.createDefaultShipAbilitys(),armor:{type:3,value:1},coaxialMount:{angle:0,pos:new n.Vector(0,0),barrel:new n.Vector(0,0)}}),a)};var c=function(e,t,r){if(void 0===r&&(r=3),0===e.game.spacePorts.length||0===e.game.rockFormationSystemRadius.length||0===e.game.rockFormations.length)return null;for(var o,i=[],s=0;s<r;s++)i.push({joint:new n.Vector(0,0),size:t-2*s,angle:Math.PI,minAngle:Math.PI,maxAngle:0===s?-.2*Math.PI:.2*Math.PI});var A=Number.MAX_VALUE,u=!1;for(s=0;s<e.game.spacePorts.length;s++){for(var l=e.game.spacePorts[s],c=0,d=0;d<l.cannons.length;d++){c+=l.cannons[d].life}c<A&&(o=l,A=c)}return A===7*a.SPACEPORT_START_LIFE&&(u=!0),{armState:3,base:u?e.game.spacePorts[Math.floor(e.game.spacePorts.length*Math.random())]:o,target:null,repairTarget:null,slowdownMultip:1,arm:i,minedMinerals:Math.random()>.5?Math.floor(200*Math.random()+50):0}};t.createEnemies=function(e,r,a){void 0===a&&(a={});for(var i=e.WW,s=e.WH,u=[],l=0;l<r;l++){var c=t.createShip(e,a),d=o(o(o({},c),{collType:5,pos:a.pos||new n.Vector(i*Math.random(),s*Math.random()),life:30,oLife:30,type:1,maxBullets:10,maxVel:3,name:"BANDIT",weapons:A.createDefaultShipWeapons(c.guid,1,[30,32,25])}),a);u.push(d)}return u};t.createDrones=function(e,r,a,o){for(var i=[],s=0;s<a;s++){var A=t.createShip(e,{type:49,life:50,oLife:50,collType:10},.55);A.ownerGuid=o,A.pos=r.clone();var u=new n.Vector(150,0);u.setAngle(360*Math.random()),A.pos.add(u),A.radius*=.55,A.mass=Math.pow(.5*A.radius,3),A.originalRadius*=.55,A.maxBullets=10,A.name="DRONE",i.push(A)}return i};var d,p=function(e,t){var r,a=0;return r=e.pos.x+(Math.random()>.5?-1e3:1e3),a=e.pos.y>.5*t.WH?t.WH-100:100,new n.Vector(r,a)};t.createNPCs=function(e,r,i,s){void 0===i&&(i={});for(var A=e.WW,u=e.WH,l=[],d=0;d<r;d++){var f=c(e,1.8*a.SHIP_LENGTH_RADIUS),h=o(o(o(o({},t.createShip(e)),{pos:f?p(f.base,e):new n.Vector(A*Math.random(),u*Math.random()),life:80,oLife:80,type:2,maxBullets:0,angle:Math.random()*Math.PI*2,maxVel:3,currentWayPointIndex:s,miningRig:f}),i),{collType:8});l.push(h)}return l},function(e){e[e.CYAN=0]="CYAN",e[e.WHITE=1]="WHITE",e[e.BLUE=2]="BLUE",e[e.YELLOW=3]="YELLOW",e[e.PINK=4]="PINK",e[e.LIME=5]="LIME"}(d||(d={}));var f=1;t.getCurrentColorIndex=function(){return f};t.setColorIndex=function(e){(function(e){return 0})&&(f=e)};t.increaseColorIndex=function(){f<t.ShipColors.length-1?f++:f=0},t.ShipColorStrings=[],t.ShipColorStrings[d.WHITE]="WHITE",t.ShipColorStrings[d.BLUE]="BLUE",t.ShipColorStrings[d.YELLOW]="YELLOW",t.ShipColorStrings[d.CYAN]="CYAN",t.ShipColorStrings[d.PINK]="PINK",t.ShipColorStrings[d.LIME]="LIME";t.ShipColors=[],t.ShipColors[d.WHITE]={r:.9,g:.9,b:.9},t.ShipColors[d.YELLOW]={r:.9,g:.9,b:.1},t.ShipColors[d.BLUE]={r:.1,g:.1,b:.9},t.ShipColors[d.PINK]={r:.9,g:.1,b:.9},t.ShipColors[d.CYAN]={r:.1,g:.9,b:.9},t.ShipColors[d.LIME]={r:.1,g:.9,b:.1}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onStageXY=t.onStage=t.check=t.contain=t.bounce=t.shift=t.disableMapShift=void 0;var r=!1;t.disableMapShift=function(e){void 0===e&&(e=!0),r=e};t.shift=function(e,t,a,n,o){return void 0===n&&(n=1),void 0===o&&(o=1),!r&&(e.pos.x>=t?(e.pos.x=n,!0):e.pos.x<=n?(e.pos.x=t-o-1,!0):e.pos.y>=a?(e.pos.y=o,!0):e.pos.y<=o&&(e.pos.y=a-o-1,!0))};t.bounce=function(e,t,r,a,n){void 0===a&&(a=0),void 0===n&&(n=0);var o=e.radius+1,i=!1;return e.pos.x+o>=t?(e.pos.x=t-o,e.vel.x*=-.5,i=!0):e.pos.x-o<=a&&(e.pos.x=o,e.vel.x*=-.5,i=!0),e.pos.y+o+0>=r?(e.pos.y=r-(o+0),e.vel.y*=-.5,e.vel.x*=.5,i=!0):e.pos.y-o<=n&&(e.pos.y=o,e.vel.y*=-.5,i=!0),i};t.contain=function(e,t,r,a){void 0===a&&(a=100);var n=e.radius+1+a;e.pos.x+n>=t?(e.pos.x=t-n,e.vel.x=0):e.pos.x-n<=0&&(e.pos.x=n,e.vel.x=0),e.pos.y+n>=r?(e.pos.y=r-n,e.vel.y=0):e.pos.y-n<=0&&(e.pos.y=n,e.vel.y=0)};t.check=function(e,t,r,a,n){return void 0===a&&(a=1),void 0===n&&(n=1),e.pos.x>=t||e.pos.x<=a||e.pos.y>=r||e.pos.y<=n};t.onStage=function(e,t,r){void 0===r&&(r=0);var a=t.pos.x,n=t.pos.y,o=e.SX,i=e.SY,s=e.SW,A=e.SH;return a>o-r&&a<o+s+r&&n>i-r&&n<i+A+r};t.onStageXY=function(e,t,r,a){void 0===a&&(a=0);var n=e.SX,o=e.SY,i=e.SW,s=e.SH;return t>n-a&&t<n+i+a&&r>o-a&&r<o+s+a}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(45),r(72),r(17),r(9),r(3),r(96)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.__LifeFixedValueSet=t.LifeMaxValue=t.LifeIncreaseFixedValue=t.DamgeItemFixedValue=t.DamageImpact=t.DamageByForce=t.DamageItem2=void 0;t.DamageItem2=function(e,t,o){if(35===t.type){var i=r.getSpacesnakeFromSegment(t.guid),s=a.damageArmorMap[o.damage.type][t.armor.type];o.damage.value>0&&(t.life-=o.damage.value*s),o.damage.valuePercent>0&&(t.life-=t.life*o.damage.valuePercent*s),i.life<1&&(i.segments.forEach(function(e){return e.remove=!0}),A(e,o.ownerGuid,i.type)),o.damage.stunMS}else{if(!t.armor||!o.damage)throw console.error(n.TypesToString(t.type),n.TypesToString(o.type))," unknown damage / armor";if(s=a.damageArmorMap[o.damage.type][t.armor.type],o.damage.value>0&&(t.life-=o.damage.value*s),o.damage.valuePercent>0&&(t.life-=t.life*o.damage.valuePercent*s),o.damage.pushPercentM>0){var u=o.vel.x,l=o.vel.y;t.vel.x+=u*o.damage.pushPercentM*t.inv_m*s*.1,t.vel.y+=l*o.damage.pushPercentM*t.inv_m*s*.1}o.damage.slowPercentM>0&&(t.vel.x*=1-o.damage.slowPercentM*s*t.inv_m*.1,t.vel.y*=1-o.damage.slowPercentM*s*t.inv_m*.1),o.damage.stunMS>0&&(t.stunned=!0),44===t.type&&(t.damageTaken=!0),(t.life<1||t.remove)&&(t.remove=!0,A(e,o.ownerGuid,t.type))}};var A=function(e,t,r){if(t){var a=o.default(e);if(a&&a.guid===t){var A=0;switch(r){case 8:A=300;break;case 9:A=560;break;case 10:A=220;break;case 1:A=80;break;case 2:A=-100;break;case 0:A=-2300;break;case 22:A=-2e3;for(var u=e.game.spacePorts,l=0;l<u.length;l++){var c=u[l];c.isEnemyForMS=48e4;for(var d=c.cannons,p=0;p<d.length;p++){var f=d[p];f.aggressionForGuidsHash[a.guid]=5e3,f.weaponsActiveTimerMS=48e4}}e.game.notifications.push({life:i.NOTIFICATION_LIFE,type:71,onlyForGuid:a.guid,message:"Consider yourself an enemy to the spaceports in this sector."})}0!==A&&(s.updateShipCredits(a,A),A>0?e.game.notifications.push({life:2*i.NOTIFICATION_LIFE,type:72,onlyForGuid:a.guid,message:n.TypesToString(r).toLocaleLowerCase()+" bounty "+A+" $"}):e.game.notifications.push({life:5*i.NOTIFICATION_LIFE,type:71,onlyForGuid:a.guid,message:"you have been fined "+Math.abs(A)+" $ for destroying a "+n.TypesToString(r).toLocaleLowerCase()}))}}};t.DamageByForce=function(e,r,n,o){if(n){r.stunned=!0,44===r.type&&(r.damageTaken=!0);var i=(n.value>0?n.value:n.valuePercent*r.life)*o;if(!Number.isNaN(i)&&0!==i){if(r.armor){var s=a.damageArmorMap[n.type][r.armor.type];t.DamgeItemFixedValue(r,i*s)}else t.DamgeItemFixedValue(r,i);r.remove&&A(e,n.ownerGuid,r.type)}}};t.DamageImpact=function(e,t){};t.DamgeItemFixedValue=function(e,t){e.life-=t,44===e.type&&(e.damageTaken=!0),e.life<=0&&(e.remove=!0)};t.LifeIncreaseFixedValue=function(e,t){e.life+=t};t.LifeMaxValue=function(e,t){e.life>t&&(e.life=t)};t.__LifeFixedValueSet=function(e,t){return e.life=t}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(1),r(5),r(121),r(7),r(3),r(10),r(3),r(4),r(31),r(13)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugForce2=t.addForce=t.addForceExplosion=t.FastForce2Cached=t.FastForce2CachedReversed=t.getForce2Tree=void 0;var p=new n.QuadTreeInt32Base(i.rect_pool_pop(0,0,0,0),5,-200,2);t.getForce2Tree=function(){return p},t.default=function(e){var t=e.game,r=e.WW,a=e.WH,n=e.step,A=e.stepMS,u=t.IS_PROCEDURAL?t.proceduralBounds:new i.Rectangle(0,0,r,a);p.reset(),p.setup(u,5,-200,2);for(var l=t.force2,c=l.length,d=0;d<c;d++){var f=l[d];if(1===f.type&&(f.life-=n,f.positive&&(f.radius+=.13*f.originalRadius*n,f.radius>f.originalRadius&&(f.radius=f.originalRadius),f.sizeRoundedToOddRes=T(f.radius),f.intensity*=.9)),f.changing){var h=f.changing;if(f.positive)h.currentPositiveMS<h.positiveMS?h.currentPositiveMS+=A:(h.currentPositiveMS=0,f.positive=!1,f.intensity=f.oIntensity);else if(h.currentNegativeMS<h.negativeMS)if(h.currentNegativeMS+=A,h.currentNegativeMS<.3*h.negativeMS){var g=s.explosionsSizeList[s.explosionsSizeList.length-1],y=T(g);f.sizeRoundedToOddRes=y,f.radius=g}else f.radius=f.originalRadius,f.sizeRoundedToOddRes=T(f.radius);else h.currentNegativeMS=0,f.positive=!0,f.intensity=1}f.life>0&&p.insert(f)}return t.force2=o([],p.references),v(e,t.force2),"Force2"};var f=[4,24,0,1,26,41,30,32,25,26,42,10,43,49,2,44,9],h=o(o([],f),[11,22]),v=function(e,t){for(var r=t.length,n=0;n<r;n++){var o=t[n];if(o.radius>30&&o.intensity>0&&(x(a.getQuadTreesObj().queryTreesVec(f,o.pos,.5*o.sizeRoundedToOddRes,.5*o.sizeRoundedToOddRes),o),o.damage)){for(var i=a.getQuadTreesObj().queryTreesVec(h,o.pos,o.originalRadius,o.originalRadius),s=0;s<i.length;s++)m(e,i[s],o);o.damage=null}}},g=new r.Vector(0,0),y=new r.Vector(0,0),m=function(e,t,r){if(!t.remove&&t.life>0){var a=r.originalRadius,n=l.distanceBetweenVectors(t.pos,r.pos)-t.radius,o=(a-n)/a,i=n<.8*r.originalRadius?Math.min(o,.98):.02;d.DamageByForce(e,t,r.damage,i)}},x=function(e,t){for(var r=E(t),a=r.field,n=t.intensity,o=t.pos.x-.5*r.size,i=t.pos.y-.5*r.size,u=e.length,d=0;d<u;d++){var p=e[d],f=p.pos.x,h=p.pos.y;if(4===p.type&&p.radius>20&&l.distanceBetweenVectors(p.pos,t.pos)>.9*t.radius){var v=c.LineInterceptCircleToPositions(t.pos,p.pos,p.pos,p.radius);1===v.length?(f=v[0].x,h=v[0].y):l.distBetweenVectorsRelative(v[0],t.pos)>l.distBetweenVectorsRelative(v[1],t.pos)?(f=v[1].x,h=v[1].y):(f=v[0].x,h=v[0].y)}var g=(f-o)*s.FORCEFIELD_RESOLUTION_REVERSED_F2|0,y=a[(h-i)*s.FORCEFIELD_RESOLUTION_REVERSED_F2|0];if(y){var m=y[2*g],x=y[2*g+1];if(m&&x){var S=n*p.inv_m*1e4*(p.radius*p.radius)*.1,_=m*S,T=x*S;if(isNaN(_)||isNaN(T)){A.LOG_GL_FIXED_FORCED("NaN error","Force2");continue}p.vel.x+=_,p.vel.y+=T,p.forceX=_,p.forceY=T}}}};t.FastForce2CachedReversed=function(e,r,a){void 0===a&&(a=1);for(var n=p.queryInt(r),o=n.length,i=0;i<o;i++){var s=n[i],A=e.queryVec(s.pos,s.radius,s.radius);t.FastForce2Cached(A,s,a)}};t.FastForce2Cached=function(e,t,r){void 0===r&&(r=1);for(var a=E(t),n=a.field,o=t.intensity*r,i=t.pos.x-.5*a.size,A=t.pos.y-.5*a.size,u=e.length,l=0;l<u;l++){var c=e[l],d=(c.pos.x-i)*s.FORCEFIELD_RESOLUTION_REVERSED_F2|0,p=n[(c.pos.y-A)*s.FORCEFIELD_RESOLUTION_REVERSED_F2|0];if(p){var f=p[2*d],h=p[2*d+1];c.vel.x+=f*o*40,c.vel.y+=h*o*40}}};t.addForceExplosion=function(e,r,a,n,o,i,s,A,u){void 0===s&&(s=!0),void 0===A&&(A=!1),void 0===u&&(u=1),t.addForce(e,r,a,n,o,i,s,A,u)};t.addForce=function(e,t,a,n,o,i,s,u,l,c,d){void 0===s&&(s=!0),void 0===u&&(u=!1),void 0===l&&(l=1),void 0===c&&(c=0),void 0===d&&(d=0),n<3&&A.LOG_GL_FIXED_FORCED("err radius to small","Force 2"),n>1010&&A.LOG_GL_FIXED_FORCED("err radius to large","Force 2");var p=n,f=s&&1===l?30:p,h=S(n),v={pos:new r.Vector(t,a),radius:f,sizeRoundedToOddRes:T(f),originalRadius:p,damage:i,intensity:o,oIntensity:o,life:h,olife:h,positive:s,rotating:u,type:l};c>0&&d>0&&(v.changing={negativeMS:d,positiveMS:c,currentNegativeMS:0,currentPositiveMS:0}),e.force2.push(v)};var S=function(e){switch(e){case 30:return 12;case 70:return 18;case 90:return 20;case 250:return 22;case 510:return 24;case 750:return 26;case 1010:return 28;default:return 10}},_={};window.forceCache=_;var T=function(e){var t=Math.round(Math.round((e+e)*s.FORCEFIELD_RESOLUTION_REVERSED_F2)),r=t%2==0;return t*=u.FORCEFIELD_RESOLUTION_F2,r&&(t+=u.FORCEFIELD_RESOLUTION_F2),t},E=function(e,t){void 0===t&&(t=!0);var r=[e.sizeRoundedToOddRes,e.positive,e.rotating].join("_"),a=_[r];if(a&&a.size>=e.sizeRoundedToOddRes)return _[r];var n=performance.now(),o=I(e),i={size:e.sizeRoundedToOddRes,field:o.field,fx:o.fx,fy:o.fy};_[r]=i;var s=performance.now()-n;return t&&console.log("-cache miss F2- r:"+e.sizeRoundedToOddRes+" "+Math.round(s)+" ms"),i},M=new r.Vector(0,0),I=function(e){for(var t=e.sizeRoundedToOddRes,r=.5*t,a=Math.floor(.5*t*s.FORCEFIELD_RESOLUTION_REVERSED_F2),n=Math.floor(.5*t*s.FORCEFIELD_RESOLUTION_REVERSED_F2),o=[],i=r*s.FORCEFIELD_RESOLUTION_REVERSED_F2*r*s.FORCEFIELD_RESOLUTION_REVERSED_F2,A=Math.ceil(t*s.FORCEFIELD_RESOLUTION_REVERSED_F2),u=0;u<A;u++){for(var l=[],c=0;c<A;c++){var d=(c-a)*(c-a)+(u-n)*(u-n);if(i>d){M.x=0,M.y=0;var p=.003*(Math.abs(d-i)/i),f=Math.atan2(n-u,a-c);g.x=p,g.y=0,e.positive?g.setAngle(f+Math.PI):(g.setAngle(f),e.rotating&&(g.mult(.2),y.x=.05*p,y.y=0,y.setAngle(f+.7*Math.PI),M.add(y))),M.add(g),l.push(M.x,M.y)}else l.push(0,0)}o.push(l)}return{field:o,fx:a,fy:n}};!function(){for(var e=performance.now(),t=3;t<100;t++){var a=10*t,n=T(a),o={intensity:1,oIntensity:1,life:1,olife:1,originalRadius:a,pos:new r.Vector(0,0),positive:!0,radius:a,sizeRoundedToOddRes:n,rotating:!1,type:1,damage:null};E(o,!1)}var i=[510,750,1010];[!0,!1].map(function(e){i.map(function(t){var a=t,n=T(a),o={intensity:1,oIntensity:1,life:1,olife:1,originalRadius:a,pos:new r.Vector(0,0),positive:!0,radius:a,sizeRoundedToOddRes:n,rotating:e,type:0,damage:null};E(o,!1)})});var s=performance.now()-e;console.log("force cache warmup took "+Math.round(s)+" ms")}(),t.debugForce2={getOrCreateCachedForceField:E,createForceField:I}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobalContexts=void 0;var r={engine:null,gui:null};t.default=function(){return r};t.setGlobalContexts=function(e,t){r.engine=e,r.gui=t}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setImovableDefaults=void 0;t.setImovableDefaults=function(e){return n({inTree:!0,remove:!1,stunned:!1,targetFlagged:!1,forceX:0,forceY:0,procedurallyCreated:!1,sleepingAABB:!1,hasSlept:!1,removeProcedural:!1,shape:6,acc:null,opos:null,mass:1,inv_m:1,simTimeRemain:0,debug:{}},e||{})}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WEAPON_TYPES=t.PUSHING_TYPES=t.EnemyLike=t.PredatorLike=t.ShipLike=t.isProjectile=t.TypesToString=void 0;t.TypesToString=function(e){switch(e){case 44:return"SHIP";case 25:return"BULLET";case 32:return"MISSILE";case 30:return"ROCKET";case 48:return"ENEMY BULLET";case 28:return"SPACEPORT BULLET";case 20:return"PARTICLE";case 9:return"SPACE SQUID";case 35:return"SNAKE SEGMENT";case 8:return"SNAKE";case 10:return"SPIDER";case 4:return"ASTEROID";case 11:return"ROCKFORMATION";case 3:return"SPACEPORT";case 22:return"SPACEPORT CANNON";case 1:return"ENEMY SHIP";case 49:return"DRONE";case 2:return"NEUTRAL SHIP";case 41:return"PROXIMITY MINE";case 42:return"SPACE MINE";case 43:return"SPACE TURRET";case 7:return"RF SYS RADIUS";case 24:return"CHARGE";case 0:return"DESTROYER";case 12:return"ANOMALY";case 14:return"BLACK HOLE";case 13:return"WHITE HOLE";case 15:return"SPACEFOG FIRE";case 16:return"SPACEFOG REG.";case 21:return"ANCIENT BLOCK";case 6:return"ANCIENT";case 5:return"ASTEROID BELT";case 87:return"TYPE NONE";case 34:return"ONE WAY COLL";case 88:return"( ALL )";case 17:return"MINEFIELD";case 26:return"FLAME";case 31:return"BARRAGE";case 27:return"LAZER";case 50:return"ELECTROBASTARDRAY";default:return void 0===e?"NO TYPE: UNDEFINED":"UNKNOWN:"+e}};t.isProjectile=function(e){switch(e){case 25:case 48:case 28:case 30:case 32:return!0}return!1};t.ShipLike=function(e){switch(e){case 44:case 1:case 49:case 2:case 0:return!0}return!1};t.PredatorLike=function(e){switch(e){case 9:case 10:case 8:case 35:return!0}return!1};t.EnemyLike=function(e){switch(e){case 1:case 9:case 10:case 8:case 35:return!0}return!1},t.PUSHING_TYPES=[49,2,1,44,30,4,22,10,11,0,21],t.WEAPON_TYPES=[25,30,32,31,24,41,42,50,43,27,26]}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(1),r(27),r(118)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PositionUpdaterAutoSleep=t.PositionUpdaterPoint=t.ParticleUpdater=t.ShipPositionUpdater=void 0;var o=new r.Vector(0,0);t.default=function(e,t){switch(e.shape){case 3:case 6:o.set(e.vel.x,e.vel.y),o.mult(t),e.pos.add(o);break;case 0:a.ballUpdater(e,t);break;case 1:n.wedgeUpdater(e,t)}};t.ShipPositionUpdater=function(e,t,r){void 0===r&&(r=!0),n.wedgeUpdater(e,t)};t.ParticleUpdater=function(e,t){o.set(e.vel.x,e.vel.y),o.mult(t),e.pos.x+=o.x,e.pos.y+=o.y};t.PositionUpdaterPoint=function(e,t){o.set(e.vel.x,e.vel.y),o.mult(t),e.pos.x+=o.x,e.pos.y+=o.y};t.PositionUpdaterAutoSleep=function(e,t){var r=e.vel;0===e.shape?(a.ballUpdater(e,t),0===r.x&&0===r.y?(e.sleepingAABB=!0,e.hasSlept||(e.opos=e.pos.toPointINT()),e.hasSlept=!0):e.sleepingAABB=!1):(o.set(r.x,r.y),o.mult(t),e.pos.add(o),0===r.x&&0===r.y?(e.sleepingAABB=!0,e.hasSlept||(e.opos=e.pos.toPointINT()),e.hasSlept=!0):e.sleepingAABB=!1)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(4),r(1),r(3),r(16),r(27),r(7)],void 0===(n=function(e,t,r,a,n,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.test_createAsteroid=t.createAsteroidBelt=t.createSingleAsteroid=t.createDefaultResources=void 0,t.default=function(e,r,n,o,i,s){void 0===n&&(n=5),void 0===o&&(o=400),void 0===i&&(i={}),void 0===s&&(s=!1);for(var A=e.WW,u=e.WH,l=[],c=0;c<r;c++){var d=s?new a.Vector(0,0):new a.Vector(10*(Math.random()-.5),10*(Math.random()-.5));s||(d.setLength(1*Math.random()),d.setAngle((Math.random()-.5)*(2*Math.PI)));var p=Math.floor((o-n)*Math.random()*Math.random()*Math.random()+n),f=t.createSingleAsteroid(p,new a.Vector(A*Math.random(),u*Math.random()),d,i);l.push(f)}return l};t.createDefaultResources=function(e,t){var r=0,a=0,n=0;switch(t){case 4:r=Math.random()*e*2|0,n=0|(Math.random()>.91?Math.random()*e*.42:0),a=0|(Math.random()>.93?Math.random()*e*.31:0);break;case 11:r=Math.random()*e*2.6|0,n=0|(Math.random()>.21?Math.random()*e*2.19:0),a=0|(Math.random()>.3?Math.random()*e*2.16:0);break;case 3:r=Math.random()*e*5|0,n=Math.random()*e*.1|0,a=Math.random()*e*.02|0}return{iron:r,minerals:a,platinum:n}};t.createSingleAsteroid=function(e,A,u,l){void 0===l&&(l={});var c=l.pos||A,d=o(o(o({},i.setImovableDefaults(s.BallCreator(c.x,c.y,e,Math.pow(e,3)))),{specular:.7,isLV426:!1,netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},type:4,subType:4,collType:2,guid:r.getGuid(),radius:e,vel:new a.Vector(u.x,u.y),sides:Math.max(7,Math.floor(e/20)),angle:0,angleVel:.01*(1-2*Math.random()),life:e*n.ASTEROID_RADIUS_LIFE_MULTIP,oLife:e*n.ASTEROID_RADIUS_LIFE_MULTIP,acc:new a.Vector(0,0),opos:{x:c.x,y:c.y},armor:{type:4,value:1},resources:t.createDefaultResources(l.radius||e,4)}),l);return d.opos.x,d};var u=new A.Rectangle(0,0,0,0);t.createAsteroidBelt=function(e,r,n,o,i,s,l,c,d,p,f){if(void 0===s&&(s=.05*Math.PI),void 0===l&&(l=40),void 0===c&&(c=280),void 0===d&&(d=180),void 0===p&&(p=1),p<1||p>2)throw"illeagal tightness @ createAsteroidBelt";var h=[],v=c-l,g=new a.Vector(0,0),y=new a.Vector(0,0),m=r,x=r,S=n,_=n,T=function(r,a,n,o,i,A,c,f,h){for(var v=[],E=0,M=0;M<i;M++){var I=M/i,L=(i-M)/i,w=l+e()*c*L;if(E+=w*p+1,g.setLength(E),g.setAngle(o+s*I*(M%2==0?1:-1)),n||g.mult(-1),g.addXY(r,a),g.x>x?x=g.x:g.x<m&&(m=g.x),g.y>_?_=g.y:g.y<S&&(S=g.y),h&&(u.x=g.x-w,u.y=g.y-w,u.width=2*w,u.height=2*w,!h.containsRect(u)))return[];if(v.push(t.createSingleAsteroid(w,g,{x:.1,y:.1})),A&&e()>.8){y.set(w,0),y.setAngle(o+(e()>.5?-1:1)*Math.PI*.5+s*(e()-.5)),g.add(y);var b=e()>.5;v.push.apply(v,T(g.x,g.y,b,y.getAngle()+.2*Math.PI*(e()-.5),Math.floor(.1*d*e()+1),!1,.5*c,f,h))}}return v};return h.push.apply(h,T(r,n,!0,i,d/5,!0,v,o,f)),h.push.apply(h,T(r,n,!1,i,d/5,!0,v,o,f)),{belt:{x:r,y:n,rect:new A.Rectangle(m,S,x-m,_-S),radius:Math.max(x-m,_-S),seedkey:0,type:5},asteroids:h}};t.test_createAsteroid=function(e,A,u,l,c,d){var p=o(o({specular:.7,isLV426:Math.random()<.01,netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},type:4,collType:2,guid:r.getGuid(),pos:new a.Vector(A,u),radius:d,vel:new a.Vector(l,c),sides:Math.max(7,d/20),angle:0,angleVel:.01*(1-2*Math.random()),life:d*n.ASTEROID_RADIUS_LIFE_MULTIP},i.setImovableDefaults(s.BallCreator(A,u,d,Math.pow(d,3)))),{armor:{type:4,value:1},resources:t.createDefaultResources(0,4)});e.push(p)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(293),r(294),r(295),r(80),r(302),r(44),r(45),r(303),r(157),r(152),r(305),r(44),r(68),r(158),r(307),r(69),r(82),r(308),r(77),r(159),r(112),r(54),r(85),r(111),r(141),r(5),r(164),r(58),r(145),r(348),r(38),r(14),r(349),r(66),r(88),r(354)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f,h,v,g,y,m,x,S,_,T,E,M,I,L,w,b,P,R,O,C,G,D,N,B){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProceduralEngineType=t.setDevProjectEngine=t.resize=t.init=void 0;t.init=function(e){r.init(e)};t.resize=function(e){r.resize(e)};var F=!1;t.setDevProjectEngine=function(){F=!0};t.getProceduralEngineType=function(){return 1},t.default=function(e){var t=e.game;if(!F&&!t.skillTree.active){e.frameCnt%5==0&&L.staleWhileRevalidateApiCache();var P=e.game.performance.engine=[];t.performance.totalEngine=p.MeasureTimeFn(function(){s.default(R.default,e,P,"engine"),s.default(f.default,e,P,"engine"),s.default(c.default,e,P,"engine"),s.default(D.runScheduler,e,P,"engine"),s.default(G.default,e,P,"engine"),s.default(C.default,e,P,"engine"),s.default(n.default,e,P,"engine"),s.default(v.default,e,P,"engine"),s.default(b.default,e,P,"engine"),s.default(h.default,e,P,"engine"),s.default(T.default,e,P,"engine"),s.default(E.default,e,P,"engine"),s.default(M.default,e,P,"engine"),s.default(r.default,e,P,"engine"),s.default(a.default,e,P,"engine"),s.default(I.default,e,P,"engine"),s.default(i.default,e,P,"engine"),s.default(o.default,e,P,"engine"),s.default(N.default,e,P,"engine"),s.default(y.default,e,P,"engine"),s.default(g.default,e,P,"engine"),s.default(x.SpaceSpiders,e,P,"engine"),s.default(A.default,e,P,"engine"),s.default(u.default,e,P,"engine"),s.default(l.default,e,P,"engine"),s.default(B.default,e,P,"engine"),s.default(_.default,e,P,"engine"),s.default(S.default,e,P,"engine"),s.default(O.default,e,P,"engine"),s.default(m.default,e,P,"engine"),s.default(d.default,e,P,"engine"),w.default(e),t.performance.asteroids=t.asteroids.length,t.performance.particles=0,t.clock+=e.stepMS,window.trees=L.getQuadTreesObj()})}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wormhole=t.getAllAnomalies=void 0;t.getAllAnomalies=function(e){for(var t=n([],e.anomlies),r=e.anomalyPairs.length,a=0;a<r;a++)t.push(e.anomalyPairs[a].in),t.push(e.anomalyPairs[a].out);return t};t.wormhole=function(e,t,r){void 0===r&&(r=!1);t.WW,t.WH;var a=t.game;if(a.IS_PROCEDURAL)return function(e,t,r){void 0===r&&(r=!1),t.WW,t.WH;for(var a=t.game,n=a.anomlies.length,o=0;o<n;o++){var i=a.anomlies[o];if(i.out){var s=i.pos.x,A=i.pos.y,u=i.out.x,l=i.out.y,c=s,d=A;if(r||e.pos.x<c+200&&e.pos.x>c-200&&e.pos.y<d+200&&e.pos.y>d-200)return e.vel.setAngle(Math.random()-.5),e.pos.x=u+200*(Math.random()-.5),e.pos.y=l+200*(Math.random()-.5),!0}}}(e,t,r);for(var n=a.anomalyPairs.length,o=0;o<n;o++){var i=a.anomalyPairs[o],s=i.in.pos.x,A=i.in.pos.y,u=i.out.pos.x,l=i.out.pos.y,c=s,d=A;if(r||e.pos.x<c+200&&e.pos.x>c-200&&e.pos.y<d+200&&e.pos.y>d-200)return e.vel.setAngle(Math.random()-.5),e.pos.x=u+200*(Math.random()-.5),e.pos.y=l+200*(Math.random()-.5),!0}return!1}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(64)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlowCustomLayout=t.Glow=void 0;t.Glow=function(e,t,i,s,A,u,l,c){var d=s.game,p=s.gl,f=(s.SH,s.SW),h=s.SX,v=s.SY,g=d.resW/f,y=t>4?t:1e3*t*g;if(o.onStage(s,e.x,e.y,y)){i=[];var m=e.x-h,x=e.y-v;if(r.fillPolyForFan(f,m,x,y,y,i,-.5*y,-.5*y),i.length>0){a.default(n.GLctx.VerticesGradient,p);var S=n.GLUniformLocation(p,"u_pos_x"),_=n.GLUniformLocation(p,"u_pos_y");p.uniform1f(S,m),p.uniform1f(_,x);var T=n.GLUniformLocation(p,"u_perimiter");p.uniform1f(T,y),r.drawColor(i,p,A,u,l,c)}}};t.GlowCustomLayout=function(e,t,i,s,A,u,l,c,d){void 0===d&&(d=s.gl.TRIANGLES);var p=s.game,f=s.gl,h=(s.SH,s.SW),v=s.SX,g=s.SY,y=p.resW/h,m=t>4?t:1e3*t*y;if(o.onStage(s,e.x,e.y,m)){var x=e.x-v,S=e.y-g;a.default(n.GLctx.VerticesGradient,f);var _=n.GLUniformLocation(f,"u_pos_x"),T=n.GLUniformLocation(f,"u_pos_y");f.uniform1f(_,x),f.uniform1f(T,S);var E=n.GLUniformLocation(f,"u_perimiter");f.uniform1f(E,m),r.drawColor(i,f,A,u,l,c,d)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(45),r(10),r(17)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForcelifeImpact=void 0;new r.Vector(0,0),new r.Vector(0,0);t.ForcelifeImpact=function(e,t){var r=Math.abs(t.x),a=Math.abs(t.y);(r>5||a>5)&&(Math.max(r,a),e.stunned=!0)};t.default=function(e,t,r,a,n){void 0===a&&(a=1),void 0===n&&(n=1)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(4),r(7),r(5),r(10),r(97),r(14),r(47)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDust=t.GetSpaceDustTree=t.getSpaceDustTimings=void 0;new r.Vector(0,0),new r.Vector(0,0);var l=n.rect_pool_pop(0,0,0,0),c=new r.Vector(0,0),d=!1,p=new u.QuadTreeFastPoint32(n.rect_pool_pop(0,0,10,10),5,40);window.addEventListener("keydown",function(e){"t"===e.key&&(p=new u.QuadTreeFastPoint32(n.rect_pool_pop(0,0,10,10),5,40),i.LOG_GL_FIXED_FORCED(p.getRangeType(),"dust tree type")),"r"===e.key&&(p=new s.QuadTreeInt32Point(n.rect_pool_pop(0,0,10,10),5,40),i.LOG_GL_FIXED_FORCED(p.getRangeType(),"dust tree type"))});var f=0,h=0,v=0,g=0,y=0,m=0,x={filtering:0,insertions:0,collisions:0,reset:0,update:0,numDust:0,onscreen:0,quadrantSize:0,totalTime:0};t.getSpaceDustTimings=function(){return x.reset=g,x.update=y,x.collisions=v,x.insertions=h,x.filtering=f,x.totalTime=m,x};t.GetSpaceDustTree=function(){return p};new r.Vector(0,0);t.default=function(e){var r=e.game,n=e.step,i=(e.SW,e.SH,e.SX,e.SY,e.WW,e.WH,performance.now());d=!d;var s=o.getQuadTreesObj();if(r.menuSettings.spacedust&&s&&s.All){var u=r.screen.rectSS_800,S=r.screen.rectSS_600,_=S.x,T=S.y,E=S.width,M=S.height,I=r.spaceDust;x.numDust=I.length;for(var L=A.getForce2Tree().queryInt(u),w=0;w<L.length;w++){var b=L[w];if(0!==b.type)for(var P=b.radius,R=Math.ceil(.01*P),O=0;O<R;O++)c.x=0,c.y=0,c.setLength(P*Math.random()),c.setAngle(9*Math.random()),t.createDust({x:b.pos.x+c.x,y:b.pos.y+c.y},1,1,e,Math.random()-.5,Math.random()-.5)}var C,G=I.length,D=[],N=performance.now(),B=_+E,F=T+M;for(w=0;w<G;w++){var V=(J=I[w]).pos.x,k=J.pos.y;V>_&&k>T&&V<B&&k<F&&D.push(J)}C=D.length,f=performance.now()-N;var X=performance.now();p.reset();x.quadrantSize=40,p.setup(u,40,40,3),g=performance.now()-X;var H=performance.now();for(w=0;w<C;w++)p.insertUnsafe(D[w]);x.onscreen=C,h=performance.now()-H;var U=D,W=U.length,Y=performance.now(),q=s.queryTreesRect([49,2,1,44,30,4,22,10,11,0,21],S),z=(performance.now(),q.length);for(w=0;w<z;w++){var j=q[w],K=j.radius;if(44===j.type&&(K=2*j.originalRadius),l.x=j.pos.x-K,l.y=j.pos.y-K,l.width=2*K,l.height=2*K,0===j.type||44===j.type){var Z=(ee=p.queryVec(j.pos,j.radius,j.radius)).length,Q=0===j.type?3:.6;for(O=0;O<Z;O+=2){var J=ee[O];if(a.fine(3,j.comp[0].vertex,J.pos)){var $=Math.atan2(j.pos.y-J.pos.y,j.pos.x-J.pos.x);J.vel.setAngle($+Math.PI),J.vel.setLength(Q+Math.random())}}}else{var ee;for(Z=(ee=p.queryCircle(j.pos,j.radius)).length,O=0;O<Z;O+=2){J=ee[O],$=Math.atan2(j.pos.y-J.pos.y,j.pos.x-J.pos.x);J.vel.setAngle($+Math.PI),J.vel.setLength(1+Math.random())}}}v=performance.now()-Y;var te=performance.now();A.FastForce2CachedReversed(p,S);for(w=0;w<W;w++){var re=(J=U[w]).vel,ae=re.x*n,ne=re.y*n;J.pos.x+=ae,J.pos.y+=ne,re.x*=.98,re.y*=.98}return y=performance.now()-te,m=performance.now()-i,"spacedust"}};var S=0;t.createDust=function(e,t,a,n,o,i){void 0===o&&(o=0),void 0===i&&(i=0);for(var s=n.game.spaceDust,A=s.length>64e3?S:-1,u=0;u<t;u++){c.set(.5*a,0),c.setAngle(Math.random()*Math.PI*2);var l=c.x,d=c.y;if(A>=0){var p=s[A];p.pos.x=e.x+l,p.pos.y=e.y+d,p.vel.x=o,p.vel.y=i}else{var f={pos:new r.Vector(e.x+l,e.y+d),vel:new r.Vector(o,i),remove:!1};s.push(f)}A>=0&&++A>63999&&(A=0)}A>=0&&(S=A)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(355),r(93),r(44),r(44),r(356),r(117),r(360),r(361),r(68),r(45),r(24),r(362),r(82),r(110),r(15),r(363),r(364),r(112),r(157),r(80),r(77),r(159),r(69),r(365),r(9),r(138),r(158),r(367),r(368),r(370),r(95),r(65),r(371)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f,h,v,g,y,m,x,S,_,T,E,M,I,L,w,b,P,R,O,C,G){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDevProjectEngineClient=t.resize=void 0;t.resize=function(e){r.resize(e)};var D=!1;t.setDevProjectEngineClient=function(){D=!0},t.default=function(e){var t=e.game;if(!D){var v=I.default(e),N=e.game.performance.engineClient=[];t.performance.totalEngineClient=o.MeasureTimeFn(function(){n.default(l.default,e,N,"engineClient"),e.IS_MULTIPLAYER&&(n.default(u.default,e,N,"engineClient"),n.default(S.default,e,N,"engineClient"),n.default(c.default,e,N,"engineClient"),n.default(x.default,e,N,"engineClient"),n.default(_.SpaceSpiders,e,N,"engineClient"),n.default(E.default,e,N,"engineClient"),n.default(f.default,e,N,"engineClient"),n.default(T.default,e,N,"engineClient"),n.default(w.default,e,N,"engineClient"),n.default(function(e){return L.default(e),"proximitydetection"},e,N,"engineClient"),v&&M.default(e,v)),n.default(i.default,e,N,"engineClient"),n.default(G.default,e,N,"engineClient"),n.default(A.default,e,N,"engineClient"),n.default(r.default,e,N,"engineClient"),n.default(a.default,e,N,"engineClient"),n.default(d.default,e,N,"engineClient"),n.default(O.default,e,N,"engineClient"),n.default(C.default,e,N,"engineClient"),n.default(s.default,e,N,"engineClient"),n.default(p.default,e,N,"engineClient"),n.default(h.default,e,N,"engineClient"),n.default(g.default,e,N,"engineClient"),n.default(y.default,e,N,"engineClient"),n.default(b.default,e,N,"engineClient"),n.default(P.default,e,N,"engineClient"),n.default(R.default,e,N,"engineClient"),e.IS_MULTIPLAYER&&(n.default(m.default,e,N,"engineClient"),t.clock+=e.stepMS)})}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(174),r(44),r(92),r(178),r(182),r(122),r(183),r(184),r(185),r(123),r(124),r(124),r(186),r(193),r(132),r(133),r(198),r(199),r(148),r(232),r(44),r(233),r(10),r(234),r(235),r(236),r(237),r(144),r(238),r(240),r(241),r(242),r(244),r(245),r(246),r(74),r(247),r(103),r(139),r(248),r(2),r(10),r(249),r(250),r(251),r(127),r(252),r(253),r(254),r(255),r(256),r(258),r(259),r(60),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(267),r(268),r(269),r(270),r(278),r(279),r(282),r(283),r(284),r(285),r(286),r(287),r(288),r(99),r(150),r(289),r(290),r(151),r(151),r(291),r(129),r(0),r(292)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f,h,v,g,y,m,x,S,_,T,E,M,I,L,w,b,P,R,O,C,G,D,N,B,F,V,k,X,H,U,W,Y,q,z,j,K,Z,Q,J,$,ee,te,re,ae,ne,oe,ie,se,Ae,ue,le,ce,de,pe,fe,he,ve,ge,ye,me,xe,Se,_e,Te,Ee,Me,Ie,Le,we,be,Pe,Re){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDevProjectGui=void 0;var Oe=[function(e){return d.default(e,{noise:!0,distortion:!0})},ve.default,ae.default,y.default,M.default,s.default,function(e){return p.distortionBracketEnd(e,{distortion:!0,noise:!0})},K.default,g.default,function(e){return Ie.default(e,0)},h.default,D.default,re.default,v.default,q.default,Se.default,j.default,R.default,fe.default,function(e){return Ie.default(e,1,.2*e.game.resW,.2*e.game.resH)},we.default,function(e){var t=e.gl;return Ie.renderTextureToBufferMultiGL(e,2,1),Pe.default(Pe.GLctx.Vertices,t),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE),"upscale"},xe.default,A.default,me.default,Z.default,r.default,L.default,o.default,Y.default,W.default,z.default,function(e){return Le.renderFrameBufferCombineGL(e,0,2)},Le.disableFrameBufferGL,w.default,N.default,i.default,F.default,ne.default,C.default,O.default,function(e){return Ie.default(e,3)},function(e){return be.RAGL_POLYS_FLUSH(e)},function(e){return Ie.default(e,4)},be.RAGL_LIGHTS_FLUSH,function(e){return Le.renderFrameBufferCombineGL(e,3,4)},Le.disableFrameBufferGL,B.default,x.default,J.default,function(e){return $.default(e),V.default(e),k.default(e),P.default(e),f.default(e),I.default(e),n.default(e),Ee.default(e),ce.default(e),T.default(e),pe.default(e),le.default(e),b.default(e),"player hud"},function(e){return l.default(e),u.default(e),G.default(e),c.default(e),ye.default(e),m.default(e),ue.default(e),Te.default(e),ge.default(e),de.default(e),"generic UI"},function(e){return E.default(e),X.default(e),Q.default(e),ee.default(e),_e.default(e),oe.default(e),ie.default(e),se.default(e),Ae.default(e),he.default(e),te.default(e),"debugs"}];t.setDevProjectGui=function(){Oe=[Me.default,te.default,E.default]};t.default=function(e){var t=e.game,r=t.performance.gui=[];[];t.performance.totalGui=_.MeasureTimeFn(function(){for(var t=function(t){a.default(function(r){return Re.ShaderInstrument(e,t,Oe[t])},e,r,"gui")},n=0;n<Oe.length;n++)t(n)}),S.default(e),t.performance.shaders=Re.readShaderPerformanceList().map(function(e){return{name:e.name,type:"shader",time:e.time}})}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(89),r(179)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ballUpdater=t.BallCreator=void 0;t.BallCreator=function(e,t,n,i){return o({},r.RigidBodyCreatorBase(0,i,[a.CircleCreator(e,t,n)],e,t))};t.ballUpdater=function(e,t){r.bodyUpdater(e),e.pos.set(e.pos.x+e.vel.x*t,e.pos.y+e.vel.y*t),e.comp[0].pos=e.pos}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},i=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(42),r(10)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reOrderWeapons=t.createDefaultShipWeapons=t.addWeaponToShip=t.createWeapon=void 0;var n=function(e,t){return void 0===t&&(t=44),o(o({},r.weaponDatas.bullet),{ownerGuid:e,ownerType:t,original:null})},s=function(e,t){return void 0===t&&(t=44),o(o({},r.weaponDatas.missile),{ownerGuid:e,ownerType:t,original:null})},A=function(e,t){return void 0===t&&(t=44),o(o({},r.weaponDatas.rocket),{ownerGuid:e,ownerType:t,original:null})},u=function(e,t){return void 0===t&&(t=44),o(o({},r.weaponDatas.clusterRocket),{ownerGuid:e,ownerType:t,original:null})},l=function(e,t){return void 0===t&&(t=44),o(o({},r.weaponDatas.energyRay),{ownerGuid:e,ownerType:t,original:null})},c=function(e,t){return void 0===t&&(t=44),o(o({},r.weaponDatas.lazer),{ownerGuid:e,ownerType:t,original:null})},d=function(e,t){return void 0===t&&(t=44),o(o({},r.weaponDatas.charge),{ownerGuid:e,ownerType:t,original:null})},p=function(e,t){return void 0===t&&(t=44),o(o({},r.weaponDatas.turret),{ownerGuid:e,ownerType:t,original:null})},f=function(e,t){return void 0===t&&(t=44),o(o({},r.weaponDatas.mine),{ownerGuid:e,ownerType:t,original:null})},h=function(e,t){return void 0===t&&(t=44),o(o({},r.weaponDatas.proximityMine),{ownerGuid:e,ownerType:t,original:null})},v=function(e,t){return void 0===t&&(t=44),o(o({},r.weaponDatas.flameThrower),{ownerGuid:e,ownerType:t,original:null})},g=function(e,t,a){var n=r.cloneWeapon(e(t,a)),o=r.cloneWeapon(e(t,a));return n.damage.ownerGuid=t,o.damage.ownerGuid=t,n.original=o,n};t.createWeapon=function(e,t,r){switch(void 0===r&&(r=44),e){case 25:return g(n,t,r);case 30:return g(A,t,r);case 31:return g(u,t,r);case 32:return g(s,t,r);case 50:return g(l,t,r);case 24:return g(d,t,r);case 43:return g(p,t,r);case 42:return g(f,t,r);case 41:return g(h,t,r);case 26:return g(v,t,r);case 27:return g(c,t,r);default:a.LOG_GL_FIXED_FORCED(e,"ERR CREATING WEAPON")}};t.addWeaponToShip=function(e,t,r){e.weapons.all.push(t),e.weapons.hash[t.type]=t,r?r.types.push(t.type):e.weapons.primary.types.length<=e.weapons.secondary.types.length?e.weapons.aux.types.length<e.weapons.primary.types.length?e.weapons.aux.types.push(t.type):e.weapons.primary.types.push(t.type):e.weapons.aux.types.length<e.weapons.secondary.types.length?e.weapons.aux.types.push(t.type):e.weapons.secondary.types.push(t.type),y(e.weapons)};t.createDefaultShipWeapons=function(e,r,a){a=a||[25];for(var n=[],o=0;o<a.length;o++)n.push(t.createWeapon(a[o],e,r));var s=i([],n),A={};for(o=0;o<s.length;o++){var u=s[o];A[u.type]=u}for(var l={arrayType:0,index:0,types:[],canSelect:!0,name:"primary"},c={arrayType:1,index:0,types:[],canSelect:!0,name:"secondary"},d={arrayType:2,index:0,types:[],canSelect:!0,name:"aux"},p={all:n,primary:l,secondary:c,aux:d,byArrayType:[l,c,d],hash:A};s.length>0;)s.length>0&&p.primary.types.push(s.shift().type),s.length>0&&p.secondary.types.push(s.shift().type),s.length>0&&p.aux.types.push(s.shift().type);return y(p),p};t.reOrderWeapons=function(e,t,r,a,n){t.types.splice(n,0,e.types.splice(e.types.indexOf(r),1)[0]),y(a)};var y=function(e){var t=e.all,r={};r[0]=e.primary.types,r[1]=e.secondary.types,r[2]=e.aux.types;for(var a=0;a<t.length;a++){for(var n=t[a],o=0;o<e.primary.types.length;o++)if(n.type===e.primary.types[o]){n.arrayType=e.primary.arrayType;break}for(o=0;o<e.secondary.types.length;o++)if(n.type===e.secondary.types[o]){n.arrayType=e.secondary.arrayType;break}for(o=0;o<e.aux.types.length;o++)if(n.type===e.aux.types[o]){n.arrayType=e.aux.arrayType;break}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(200),r(39),r(134)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addKeyMapperEvents=t.resetKeyCodes=t.inGameKeyCodes=t.Keys=void 0,t.Keys={LEFT:37,UP:38,RIGHT:39,DOWN:40,PRIMARY_WEAPON:32,SECONDARY_WEAPON:78,AUX_WEAPON:77,TOGGLE_PRIMARY_WEAPON:72,TOGGLE_SECONDARY_WEAPON:74,TOGGLE_AUX_WEAPON:75,PRIMARY_ABILITY:90,SECONDARY_ABILITY:88,AUX_ABILITY:67,TOGGLE_PRIMARY_ABILITY:65,TOGGLE_SECONDARY_ABILITY:83,TOGGLE_AUX_ABILITY:68,STRAFELEFT:81,STRAFERIGHT:87,BACKSPACE:8,TILDE:220,DELETE:46,RETURN:13,SHIFT:16,CAPSLOCK:20,ALT:18,HOME:35,END:36,ESCAPE:27,INTERACT:69};var o={};for(var i in t.Keys)o[t.Keys[i]]&&console.error("duplicate key",t.Keys[i],i),o[t.Keys[i]]=i;var s=function(e,t,a){var i=c.keys,s=c.mode===r.KeyTypeMode.PLAYING?n.REVERSE_IN_GAME_KEY_BINDING_TRANSLATIONS[t]:t,A=o[s],u=i[A];void 0!==u?(c.mode===r.KeyTypeMode.TYPEING&&(a?!0===u?i[A]=null:!1===u&&(i[A]=!0):i[A]=!1),c.mode===r.KeyTypeMode.PLAYING&&(i[A]=a)):c.charCodeString=a?e:null,l.currentKeyCode=a?s:-1,l.currentKeyString=a?e:null},A={keys:{TILDE:!1,BACKSPACE:!1,DELETE:!1,RETURN:!1,UP:!1,DOWN:!1,LEFT:!1,RIGHT:!1,HOME:!1,END:!1,ESCAPE:!1,SHIFT:!1,CAPSLOCK:!1,ALT:!1,ALTGR:!1},ignores:[t.Keys.SHIFT,t.Keys.CAPSLOCK,t.Keys.ALT],charCodeString:null,mode:r.KeyTypeMode.TYPEING},u={keys:{LEFT:!1,UP:!1,RIGHT:!1,DOWN:!1,RETURN:!1,ESCAPE:!1,BACKSPACE:!1},ignores:[],charCodeString:null,mode:r.KeyTypeMode.TYPEING};t.inGameKeyCodes={keys:{LEFT:!1,UP:!1,RIGHT:!1,DOWN:!1,PRIMARY_WEAPON:!1,SECONDARY_WEAPON:!1,AUX_WEAPON:!1,TOGGLE_PRIMARY_WEAPON:!1,TOGGLE_SECONDARY_WEAPON:!1,TOGGLE_AUX_WEAPON:!1,PRIMARY_ABILITY:!1,AUX_ABILITY:!1,SECONDARY_ABILITY:!1,TOGGLE_PRIMARY_ABILITY:!1,STRAFELEFT:!1,STRAFERIGHT:!1,TOGGLE_SECONDARY_ABILITY:!1,TOGGLE_AUX_ABILITY:!1,INTERACT:!1},ignores:[],charCodeString:null,mode:r.KeyTypeMode.PLAYING};var l={game:t.inGameKeyCodes,menu:u,console:A,currentKeyCode:-1,currentKeyString:null},c=null;t.resetKeyCodes=function(e){return function(e,t,a){if(e&&(e.mode===r.KeyTypeMode.TYPEING||a)){for(var n in e.keys)e.keys[n]=t;e.charCodeString=null,l.currentKeyCode=-1,l.currentKeyString=null}}(c,e)},t.default=function(e){var r=null;switch(e.keyInput.target){case a.KeyInputType.CONSOLE:r=A;break;case a.KeyInputType.GAME:r=t.inGameKeyCodes;break;case a.KeyInputType.MENU:r=u}return r!==c&&(console.log("switched keyset to ",e.keyInput.target),c=r,s(null,l.currentKeyCode,!0)),l};t.addKeyMapperEvents=function(){window.addEventListener("keydown",function(e){s(e.key,e.keyCode,!0)}),window.addEventListener("keyup",function(e){s(e.key,e.keyCode,!1)})}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(1),r(4),r(6),r(12),r(5),r(7)],void 0===(n=function(e,t,r,a,n,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGenericAvoidance=void 0;function u(e,t){var r,a,n,o,i,s,A,u=[],l={x:0,y:0},c={x:0,y:0};return l.x=t.p2.x-t.p1.x,l.y=t.p2.y-t.p1.y,c.x=t.p1.x-e.pos.x,c.y=t.p1.y-e.pos.y,r=l.x*c.x+l.y*c.y,a=2*(l.x*l.x+l.y*l.y),r*=-2,n=Math.sqrt(r*r-2*a*(c.x*c.x+c.y*c.y-e.radius*e.radius)),isNaN(n)?u:(i=(r+n)/a,s={},A={},(o=(r-n)/a)<=1&&o>=0&&(s.x=t.p1.x+l.x*o,s.y=t.p1.y+l.y*o,u[0]=s),i<=1&&i>=0&&(A.x=t.p1.x+l.x*i,A.y=t.p1.y+l.y*i,u[u.length]=A),u)}var l=function(e,t,r){for(var n=null,o=0,i=0,s=Number.MAX_VALUE,A=0;A<t.length;A++){var l=t[A],c=u(l,{p1:e.pos,p2:r});if(c.length)if(c.length>1){var d=a.distanceBetweenXYXY(e.pos.x,e.pos.y,c[0].x,c[0].y),p=a.distanceBetweenXYXY(e.pos.x,e.pos.y,c[1].x,c[1].y);d<s&&(s=d,n=l,o=c[0].x,i=c[0].y),p<s&&(s=p,n=l,o=c[0].x,i=c[0].y)}else{var f=a.distanceBetweenXYXY(e.pos.x,e.pos.y,c[0].x,c[0].y);f<s&&(s=f,n=l,o=c[0].x,i=c[0].y)}}return{item:n,x:o,y:i}},c=[{angle:0,dist:1},{angle:.01,dist:.7},{angle:-.01,dist:.7},{angle:.15,dist:.5},{angle:-.15,dist:.5}],d=new r.Vector(0,0),p=new r.Vector(0,0),f=new r.Vector(0,0);t.getGenericAvoidance=function(e,t,r,a){if(i.onStage(t,e,3*e.radius)){var n=s.getQuadTreesObj();if(!n.All)return[];var u=A.rect_pool_pop(e.pos.x-400,e.pos.y-400,800,800),l=n.queryTreesRect(o(o([],r),[4,17]),u);return A.rect_pool_put(u),l.push.apply(l,a),l}return[]},t.default=function(e,t,r,o){if(void 0===o&&(o=1),d.x=0,d.y=0,0===r.length||e.vel.getLength()<o)return{avoidance:d,avoidanceAngle:0};p.x=0,p.y=0;for(var i=null,s=-1,A=0,u=0;u<c.length;u++){p.x=0,p.y=0,p.setLength(500*c[u].dist),n.rotateVector(p,t+Math.PI*c[u].angle,p),p.add(e.pos);var h=l(e,r,p);if(i){s<0&&(s=a.distanceBetweenXYXY(e.pos.x,e.pos.y,i.x,i.y)/c[u].dist);var v=a.distanceBetweenXYXY(e.pos.x,e.pos.y,h.x,h.y)/c[u].dist;v<s&&(s=v,i=h,A=c[u].angle)}else i=h,A=c[u].angle}var g=i.item,y=i.x,m=i.y;if(f.x=0,f.y=0,null==g)return{avoidance:d,avoidanceAngle:0};var x=Math.atan2(g.pos.y-e.pos.y,g.pos.x-e.pos.x),S=Math.atan2(m-e.pos.y,y-e.pos.x);f.setLength(g.radius+1.5*e.radius);var _=0;return A<0||0===A&&x<S?_=S+.5*Math.PI-Math.PI*A:(_=S-.5*Math.PI-Math.PI*A,1),(f=n.rotateVector(f,_)).add(g.pos),d.setLength(.1),(d=n.rotateVector(d,_)).getLength()>2&&d.setLength(2),{avoidance:d,avoidanceAngle:A,data:{force:{x:e.pos.x+50*d.x,y:e.pos.y+50*d.y},radius:{x:f.x,y:f.y},threat:g,closest:{x:y,y:m}}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineInterceptCircleToPositions=t.LineInterceptCircle=t.LineIntersectsToPoint=t.LineIntersects=void 0;t.LineIntersects=function(e,t,r,a,n,o,i,s){var A,u,l;return 0!=(A=(r-e)*(s-o)-(i-n)*(a-t))&&(u=((t-a)*(i-e)+(r-e)*(s-t))/A,0<(l=((s-o)*(i-e)+(n-i)*(s-t))/A)&&l<1&&0<u&&u<1)};t.LineIntersectsToPoint=function(e,t,r,a,n,o,i,s){var A;if(e===r&&t===a||n===i&&o===s)return null;if(0==(A=(s-o)*(r-e)-(i-n)*(a-t)))return null;var u=((i-n)*(t-o)-(s-o)*(e-n))/A,l=((r-e)*(t-o)-(a-t)*(e-n))/A;return u<0||u>1||l<0||l>1?null:{x:e+u*(r-e),y:t+u*(a-t)}};t.LineInterceptCircle=function(e,t,r,a){var n=t.x-e.x,o=t.y-e.y,i=((r.x-e.x)*n+(r.y-e.y)*o)/(o*o+n*n);return(i>=0&&i<=1?Math.pow(e.x+n*i-r.x,2)+Math.pow(e.y+o*i-r.y,2):i<0?Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2):Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))<a*a};var a=function(e){return e<0?-1:1};t.LineInterceptCircleToPositions=function(e,t,n,o){var i=e.clone().subtract(n),s=t.clone().subtract(n),A=s.clone().subtract(i),u=A.mag(),l=i.x*s.y-s.x*i.y,c=o*o*u*u-l*l;if(c<0)return[];var d=Math.sqrt(c),p=[];return p.push(new r.Vector(l*A.y+a(A.y)*A.x*d,-l*A.x+Math.abs(A.y)*d).div(u*u).add(n)),c>0&&p.push(new r.Vector(l*A.y-a(A.y)*A.x*d,-l*A.x-Math.abs(A.y)*d).div(u*u).add(n)),p}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(59),r(3),r(42)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createParticle=t.createBullet=void 0;t.createBullet=function(e,t){var i=a.pool_get(e);return i.type=e,i.collType=11,i.guid=r.getGuid(),t&&(i.ownerGuid=t.guid,i.owenerType=t.type,i.pos.x=t.pos.x+Math.cos(t.angle)*t.radius,i.pos.y=t.pos.y+Math.sin(t.angle)*t.radius,i.vel.x=0,i.vel.y=0,i.vel.setLength(t.vel.getLength()+20),i.vel.setAngle(t.angle+.02*(Math.random()-.5))),i.damage=o.weaponDatas.bullet.damage,i.shape=3,i.life=n.BULLET_START_LIFE,i.homing=!1,i.remove=!1,i.forceX=null,i.forceY=null,i.stunned=!1,i.target=null,i.targetFlagged=!1,i};t.createParticle=function(e,t,r,n,o){var i=a.pool_get(20);return i.collType=25,i.pos.x=e,i.pos.y=t,i.vel.x=r,i.vel.y=n,i.life=o,i.type=20,i}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GAME_EVENT=void 0,function(e){e[e.EXPLOSION=0]="EXPLOSION",e[e.SPACE_BULLET=1]="SPACE_BULLET",e[e.SPACE_BULLET_IMPACT=2]="SPACE_BULLET_IMPACT",e[e.MENU_SELECT=3]="MENU_SELECT",e[e.START_GAME=4]="START_GAME",e[e.RESUME_GAME=5]="RESUME_GAME",e[e.PAUSE_GAME=6]="PAUSE_GAME",e[e.NPC_FRIENDLY_FIRE=7]="NPC_FRIENDLY_FIRE",e[e.PLAYER_DAMAGE=8]="PLAYER_DAMAGE",e[e.PLAYER_DAMAGE_LEVEL_CRITICAL=9]="PLAYER_DAMAGE_LEVEL_CRITICAL",e[e.PLAYER_DAMAGE_LEVEL_OK=10]="PLAYER_DAMAGE_LEVEL_OK",e[e.PLAYER_DEAD=11]="PLAYER_DEAD",e[e.ENEMIES_NEARBY=12]="ENEMIES_NEARBY",e[e.TIME_SCALE_CHANGED=13]="TIME_SCALE_CHANGED"}(t.GAME_EVENT||(t.GAME_EVENT={}))}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},i=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(1),r(137),r(136),r(4),r(106),r(16),r(27)],void 0===(n=function(e,t,r,a,n,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e,t,o,i){for(var s={arm:[],target:new r.Vector(200*(Math.random()-.5),200*(Math.random()-.5)),searchTime:0,searchTimeMax:800,reach:0,angle:o,swimIn:!1,swimAngle:0,glowIndex:0},A=e,u=0;u<i;u++){var l=1.25*i-u,c=1.15*i-.5*u;s.reach+=c;var d=Math.max(0,Math.min(.1*Math.PI,.4*Math.sin(.2*u-.5))),p=.7-.02*u;s.arm.push(new a.MuscleSegment(l,new n.Muscle(c*p,c),new n.Muscle(c*p,c),A,t,o,d)),A+=c}return s},d=function(e,t,a){void 0===t&&(t=6),void 0===a&&(a=0);var n=[],o=[.5,.6,.85,1,.98,.87,.56,.52],i=(Math.PI,[1.2,-1.2,1,1.2,-1.2,1,1.2,-1.2]),s=[.7,1,1,1,1,1,1,.7],A=new r.Vector(-e,0);t=8;for(var u=0;u<t;u++){var l=i[u];A.x=.8*e*.75*l*s[u],A.y=0,u<.5*t?A.setAngle(-1.2+Math.PI+.1*(l-1.1)):A.setAngle(1.2+Math.PI+.1*(l+1));var d=A.x,p=A.y;n.push(c(d,p,Math.PI*i[u],Math.ceil(o[u]*e*.25)))}return n};t.default=function(e,t,a,n,c,p,f){for(var h=e.WW,v=e.WH,g=[],y=0;y<t;y++){var m=Math.PI,x=c||40*Math.random()+120,S=o(o(o({},u.setImovableDefaults(l.BallCreator(a||h*Math.random(),n||v*Math.random(),x,Math.pow(x,3)))),{mass:Math.pow(x,3),prioritzeRestpos:!1,debugX:0,debugY:0,level:0,infected:A.InfectionRate(),netpos:{x:0,y:0},netvel:{x:0,y:0},netangle:0,restPos:new r.Vector(p?p.x:.8*h*Math.random()+.1*h,p?p.y:.8*v*Math.random()+.1*v),tentacles:i([],d(x,6,Math.PI)),vel:new r.Vector(0,0),radius:x,life:1e3,oLife:1e3,type:9,collType:9,guid:s.getGuid(),angle:m,mode:0,armor:{type:0,value:1}}),f);g.push(S)}return g}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(1),r(10),r(206),r(207),r(208),r(209),r(210),r(211),r(212),r(213),r(217),r(7)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d,p,f){"use strict";var h;Object.defineProperty(t,"__esModule",{value:!0}),t.resetGuidHashNetwork=t.writeGH=t.readFromGH=t.GUIDHASH=void 0,t.GUIDHASH=((h={})[4]={},h[9]={},h[8]={},h[10]={},h[3]={},h[11]={},h[38]={},h[30]={},h[32]={},h[44]={},h[1]={},h[49]={},h[22]={},h);var v={};for(var g in t.GUIDHASH)v[g]={};t.readFromGH=function(e,r){return v[e][r]=100,t.GUIDHASH[e][r]};t.writeGH=function(e,r,a){v[e][r]=100,t.GUIDHASH[e][r]=a};t.resetGuidHashNetwork=function(){for(var e in t.GUIDHASH)t.GUIDHASH[e]={}};t.default=function(e,t,h,v){t.WW=h.WW=e.WW,t.WH=h.WH=e.WH,h.game.asteroids=s.clientCreateAsteroids(e),h.game.parasites=A.clientCreateParasites(e),h.game.spaceSnake=u.clientCreateSnakes(e,t),h.game.rockFormations=l.clientCreateRocks(e),h.game.spaceSquids=c.clientCreateSquids(e,t),h.game.spacePorts=d.clientCreateSpaceports(e,t),h.game.spaceSpiders=i.clientCreateSpiders(e,t);!function(e,t){for(var r=0;r<e.length;r++){var a=e[r];if(a.guid===t)return a}}(h.game.player,h.game.playerGuid);h.game.player=p.clientCreateShips(e,t,44),a.LOG_GL_FIXED(h.game.player.length,"NTGC len"),h.game.enemies=p.clientCreateShips(e,t,1),h.game.drones=p.clientCreateShips(e,t,49),h.game.bullets=e.game.bullets,h.game.rockets=o([],n.clientCreateRockets(e)),h.game.anomlies=e.game.anomalies,h.game.playerPositions=e.game.playerPositions,h.game.charges=e.game.charges,function(e){for(var t=0;t<e.length;t++){var a=e[t];a.pos=new r.Vector(a.pos.x,a.pos.y),a.vel=new r.Vector(a.vel.x,a.vel.y)}}(h.game.charges),h.game.networkDebugRect=new f.Rectangle(e.game.rd_x,e.game.rd_y,e.game.rd_w,e.game.rd_h),a.LOG_GL_FIXED((0|e.game.rd_x)+","+(0|e.game.rd_y)+","+(0|e.game.rd_w)+","+(0|e.game.rd_h),"RDB"),a.LOG_GL_FIXED((0|e.SX)+", "+(0|e.SY),"RDSXSY")}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(1),r(4),r(6),r(77),r(106),r(16),r(77),r(27)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e,t,a,o,i){var s=new r.Vector(.5*t,0);s.setAngle(a+Math.PI);new r.Vector(.5*t,0);s.setAngle(a-Math.PI);var A=new r.Vector(.5*t,0);return A.setAngle(a),A.subtractXY(e.x,e.y),{pos:A,staticPos:A.clone(),angle:n.normalizeRadianAngle(a),staticAngle:n.normalizeRadianAngle(a),length:t,minRange:n.normalizeRadianAngle(o),maxRange:n.normalizeRadianAngle(i)}},d=function(e,t,a,o,i,s){var A=[];o=i?n.normalizeRadianAngle(.6*o+.7*Math.PI):n.normalizeRadianAngle(.6*o-.7*Math.PI+Math.PI);for(var u=0;u<t;u++){var l=i?-1:1;s&&(l*=-1);var d=1.8*Math.PI*l,p=.05*Math.PI*l,f=d/(t-1);if(1===u||u===t-2?f-=.25*l:(f+=.25*l,p+=.1*l),0===u)A.push(c(e,a,o,.1*p,.1*f));else{var h=A[A.length-1],v=new r.Vector(.5*h.length,0);v.setAngle(h.angle+Math.PI),A.push(c({x:h.pos.x+v.x,y:h.pos.y+v.y},a,n.normalizeRadianAngle(o),n.normalizeRadianAngle(p),n.normalizeRadianAngle(f))),o+=f}}return{bones:A}},p=function(e,t,a,o,i){for(var s=[],A=new r.Vector(i,0),u=0;u<t;u++){var l=2*Math.PI/t*u;A.setAngle(l);var c=l,p=d({x:e.x+A.x,y:e.y+A.y},a,n.eqNumberInArr([1,2,5,6],u)?o:.8*o,c,u>=t/2,!n.eqNumberInArr([2,3,4,5],u));s.push(p)}return s};t.default=function(e,t,n,c,d,f,h){for(var v=e.WW,g=e.WH,y=(e.SW,e.SH,e.game,[]),m=d||12+4*Math.random(),x=0;x<t;x++){var S=new r.Vector(n||v*Math.random(),c||g*Math.random()),_=new r.Vector(0,0),T=o(o(o({prioritzeRestpos:!1,level:0,infected:s.InfectionRate(),netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},angle:0,legs:p(S,8,5,2*m,m),vel:_,guid:a.getGuid(),life:18*m,oLife:18*m,restPos:f?new r.Vector(f.x,f.y):S.clone(),radius:m,type:10,collType:16,swimPosInR:!0,swimPosInL:!0,swimPosL:.5,swimPosR:.5},A.setImovableDefaults(l.BallCreator(S.x,S.y,m,Math.pow(m,3)))),{armor:{type:0,value:1}}),h);T.legs.forEach(function(e){return u.minRotateSpiderLeg(e)}),T.legs.forEach(function(e){return i.updateSpiderLeg(e)}),y.push(T)}return y}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,a,n){for(var o=e.length,i=0;i<o;i++){var s=e[i];s.pos.x=Math.random()*a+t,s.pos.y=Math.random()*n+r}}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(5),r(4)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rectInAncient=t.posInAncient=void 0,t.default=function(e){for(var t=e.game.ancientBlocks,r=t.length,a=0;a<r;a++){var n=t[a];n.pos.x=n.staticPos.x,n.pos.y=n.staticPos.y}return"Ancient"};t.posInAncient=function(e,t){void 0===t&&(t=!1);var n=r.getQuadTreesObj().queryTreesVec([6],e,30,30);if(t&&n.length>0)return!0;for(var o=0;o<n.length;o++){var i=n[o];if(a.distanceBetweenVectors(e,i.pos)<i.radius)return!0}return!1};t.rectInAncient=function(e){return r.getQuadTreesObj().queryTreesRect([6],e).length>0}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StateMachine=t.defaultGameState=t.KeyInputType=void 0,function(e){e[e.GAME=0]="GAME",e[e.MENU=1]="MENU",e[e.CONSOLE=2]="CONSOLE"}(r=t.KeyInputType||(t.KeyInputType={}));t.defaultGameState=function(){return{console:{active:!1},menu:{active:!0},keyInput:{target:r.MENU}}};t.StateMachine=function(e){return{consoleActivate:function(){e.console.active=!0,e.keyInput.target=r.CONSOLE},consoleDisable:function(){e.console.active=!1,e.menu.active?e.keyInput.target=r.MENU:e.keyInput.target=r.GAME},menuActivate:function(){console.log("state m menu activate"),e.console.active||(e.menu.active=!0,e.keyInput.target=r.MENU)},menuDisable:function(){console.log("state m menu disable"),e.console.active||(e.menu.active=!1,e.keyInput.target=r.GAME)}}}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(3),r(1),r(0),r(100),r(138),r(75),r(4),r(103),r(45),r(35),r(46),r(143),r(144),r(12),r(5),r(145),r(108),r(224),r(42),r(90),r(66),r(3),r(5)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f,h,v,g,y,m,x,S,_,T,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postLeelReset=void 0;t.postLeelReset=function(e){for(var t=e.game,r=0;r<t.player.length;r++)e.SX=t.player[r].pos.x-e.SW*Math.random(),e.SY=t.player[r].pos.y-e.SH*Math.random()},t.default=function(e,t,M){var I,L;for(var w in e.keyCodes)e.keyCodes[w]=!1;E.resetApiCache(),e.frameCnt=0,e.stepMStotal=0,t.frameCnt=0,t.stepMStotal=0,e.game.SW=e.game.resW,e.game.SH=e.game.resH;var b=M?M(e):{WW:16e3,WH:12e3};t&&(t.gl&&(t.game.SW=t.game.resW,t.game.SH=t.game.resH,e.game.zoomTX=1,e.game.zoomTXinverted=1,n.zoom(t,!0),o.setTargetToCanvas(t.gl)),t.WW=b.WW,t.WH=b.WH),e.WW=b.WW,e.WH=b.WH;var P=e.game,R=e.WW,O=e.WH;v.SetupQuadTreeRangeType(0),i.resetProximityDetection(),s.resetFogSystems(),u.resetSubtitles(),l.resetSpaceSnakeSegmentHash(),c.resetGuidHashNetwork(),d.resetTargetBehaviourHashes(),p.resetDirector(),y.ProceduralResetDirector(),f.ResetRadar(),h.disableMapShift(!1),g.resetProceduralWorld(),m.resetSkillTree(),x.resetWeaponData(),S.resetAbilityData(),_.resetScheduler();var C=[{type:12,pos:new a.Vector(.8*R,.5*O),positive:!1,effect:90,radius:4,spawnParticles:!1,seedKey:0}];(I=P.anomlies).push.apply(I,C);var G=[{in:{type:14,pos:new a.Vector(.2*R,.2*O),radius:750,positive:!1,effect:16,spawnParticles:!0,seedKey:0},out:{type:13,pos:new a.Vector(.8*R,.5*O),positive:!0,effect:4,spawnParticles:!1,seedKey:0,radius:250}}];(L=P.anomalyPairs).push.apply(L,G),P.spaceFog=[{radius:450,x:.08*R,y:.09*O,fire:!1,guid:A.getGuid(),seedKey:0,type:16},{radius:650,x:.5*R,y:.5*O,fire:!1,guid:A.getGuid(),seedKey:0,type:16},{radius:500,x:.2*R,y:.69*O,fire:!1,guid:A.getGuid(),seedKey:0,type:16},{radius:256,x:.6*R,y:.92*O,fire:!0,guid:A.getGuid(),seedKey:0,type:15}],P.interactStartTimer=0,P.initGameTime=T.GAME_INTRO_TIMER,P.spacePorts=[],P.rockets=[],P.drones=[],P.bullets=[],P.flames=[],P.charges=[],P.parasites=[],P.minefields=[],P.rockFormations=[],P.rockFormationSystemRadius=[],P.rockFormationsArcs=[],P.sparks=[],P.spaceBats=[],P.spaceSpiders=[],P.proximityMines=[],P.spaceMines=[],P.spaceTurrets=[],P.playerGuid=-1,P.spaceSquids=[],P.wayPoints=[],P.npcs=[],P.particles=[],P.customParticles=[],P.player=[],P.enemies=[],P.asteroids=[],P.asteroidBelts=[],P.SX=0,P.SY=0,P.SW=P.resW,P.SH=P.resH,P.asteroidParts=[],P.spaceSnake=[],P.destroyers=[],P.notifications=[],P.fragments=[],P.settings_asteroid_spawns_new=!0,P.settings_be_the_snake_mode=!1,P.settings_no_darkness=!1,P.settings_minimap_asteroid_min_radius=100,P.levelEditor=!1,P.level_completed=!1,P.settings_wormhole=!0,P.clock=0,P.fromClock=0,P.proceduralRemovalData=[],P.IS_PROCEDURAL=!1,P.proceduralBounds=null,P.proceduralDestroyedData=[],P.daylight={darkness_multip:0,is_dawn:!1,is_day:!1,is_dusk:!1,is_night:!0,time:r.DAYLIGHT_LEVEL_START_TIME,fog:.01},P.ancientBlocks=[],P.ancients=[],P.traceLine=[],P.force2=[],P.skillTree={active:!1,hasBeenActivated:!1,timer:0,node:m.getSkillTree(),focused:null},P.procedural.chunks.hash={},P.procedural.chunks.qeue=[],P.map.hash={},P.map.qeue=[]}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(45),r(1),r(4),r(106),r(16),r(27)],void 0===(n=function(e,t,r,a,n,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,u,l,c,d,p){var f,h;void 0===c&&(c=-1);for(var v=e.WW,g=e.WH,y=[],m=0;m<t;m++){for(var x=[],S=u&&l?new a.Vector(u,l):new a.Vector(v*Math.random(),g*Math.random()),_=8,T=c>0?c:Math.round(6+26*Math.random()),E=0,M=0,I={pos:S.clone(),remove:!1,removeProcedural:!1,prioritzeRestpos:!1,type:8,level:0,infected:i.InfectionRate(),size:T,guid:n.getGuid(),segments:x,attackMode:!1,life:null!==(f=null==p?void 0:p.life)&&void 0!==f?f:20*T,oLife:null!==(h=null==p?void 0:p.life)&&void 0!==h?h:20*T,armor:{type:0,value:1},restPos:new a.Vector(u||(d?d.x:.8*v*Math.random()+.1*v),l||(d?d.y:.8*g*Math.random()+.1*g))},L=0;L<T;L++){var w=S.clone();w.x+=E,w.y+=M,E+=.8*_,M+=.2*_+2*L;var b=o(o(o({sides:16,angle:0,offsetFront:new a.Vector(0,-_),offsetRear:new a.Vector(0,_),radius:_,type:35,collType:7,guid:n.getGuid(),vel:new a.Vector(1.6,1.6),life:20*T,legAngle:.12*L,legAngleDirectionForward:!1},s.setImovableDefaults(A.BallCreator(w.x,w.y,_,Math.pow(_,3)))),{armor:{type:0,value:1}}),p);p&&((null==p?void 0:p.pos)&&(b.pos=p.pos.clone()),(null==p?void 0:p.vel)&&(b.vel=p.vel.clone())),x.push(b),_++}r.populateSpaceSnakeSegmentHash(I),y.push(I)}return y}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetWeaponData=t.cloneWeapon=t.weaponDatas=t.flameoutDamageData=t.proximityMineWDT=t.mineWDT=t.chargeWDT=void 0;t.chargeWDT={active:!1,type:24,arrayType:3,projectile:{life:20,speed:0},ammunition:{perShot:190,max:0,value:0,type:0},requiresTargetLock:!1,requiresLazerSight:!1,cooldown:{incrementM:0,max:2e3,value:0,type:0},damage:{type:4,value:180,valuePercent:0,stunMS:600,slowPercentM:0,pushPercentM:0},name:"charge",description:"A charge powerful enough to move even the largest of asteroids.",cost:500,ammunitionCost:0};t.mineWDT={active:!1,type:42,arrayType:3,projectile:{life:20,speed:0},ammunition:{perShot:120,max:0,value:0,type:0},requiresTargetLock:!1,requiresLazerSight:!1,cooldown:{incrementM:0,max:2e3,value:0,type:0},damage:{type:4,value:180,valuePercent:.2,stunMS:250,pushPercentM:0,slowPercentM:0},name:"mine",description:"A small mine. Explodes upon contact.",cost:500,ammunitionCost:0},t.proximityMineWDT={active:!1,type:41,arrayType:3,projectile:{life:20,speed:0},ammunition:{perShot:160,max:0,value:0,type:0},requiresTargetLock:!1,requiresLazerSight:!1,cooldown:{incrementM:0,max:2e3,value:0,type:0},damage:{type:4,value:190,valuePercent:.4,stunMS:200,pushPercentM:0,slowPercentM:0},name:"proximitymine",description:"A more advanced mine. When deployed it will scan it's surroundings searching for a target. When a target is found, it will move closer and explode upon contact.",cost:500,ammunitionCost:0};t.flameoutDamageData={type:0,value:0,valuePercent:0,stunMS:0,pushPercentM:0,slowPercentM:0};function r(e){return JSON.parse(JSON.stringify(e))}t.weaponDatas={bullet:{active:!1,type:25,arrayType:3,projectile:{life:400,speed:30},ammunition:{perShot:1,max:3e3,value:1500,type:1},requiresTargetLock:!1,requiresLazerSight:!1,cooldown:{incrementM:3,max:300,value:0,type:1},damage:{type:1,value:4,stunMS:1,valuePercent:0,slowPercentM:.01,pushPercentM:.05},name:"bullets",description:"Space bullets is the most basic weapon used. It does have some potential if upgraded.",cost:500,ammunitionCost:.1},missile:{active:!1,type:32,arrayType:3,projectile:{life:9e3,speed:1},ammunition:{perShot:1,max:8,value:5,type:1},requiresTargetLock:!1,requiresLazerSight:!1,cooldown:{incrementM:1,max:500,value:0,type:0},damage:{type:2,value:250,valuePercent:.2,stunMS:100,slowPercentM:.8,pushPercentM:.5},name:"missile",description:"Missiles are high impact single target weapon. Does great damage.",cost:500,ammunitionCost:60},rocket:{active:!1,type:30,arrayType:3,projectile:{life:8e3,speed:1},ammunition:{perShot:1,max:8,value:2,type:1},requiresTargetLock:!0,requiresLazerSight:!0,cooldown:{incrementM:1,max:700,value:0,type:0},damage:{type:2,value:220,valuePercent:.25,stunMS:125,slowPercentM:.8,pushPercentM:.5},name:"rocket",description:"Rockets behave much like missiles, but they do require target lock. Target lock can be aquired from abilites.",cost:500,ammunitionCost:80},clusterRocket:{active:!1,type:31,arrayType:3,projectile:{life:8e3,speed:1},ammunition:{perShot:8,max:40,value:3,type:1},requiresTargetLock:!0,requiresLazerSight:!0,cooldown:{incrementM:1,max:700,value:0,type:0},damage:{type:2,value:70,valuePercent:.05,stunMS:85,slowPercentM:.2,pushPercentM:.1},name:"barrage",description:"A whole barrage of smaller rockets",cost:800,ammunitionCost:80},energyRay:{active:!1,type:50,arrayType:3,projectile:{life:0,speed:0},ammunition:{perShot:.62,max:0,value:0,type:0},requiresTargetLock:!0,requiresLazerSight:!0,cooldown:{incrementM:0,max:0,value:0,type:2},damage:{type:3,value:2,valuePercent:0,stunMS:100,slowPercentM:.05,pushPercentM:0},name:"Energy Ray",description:"Let loose the overflow energy created by your ships reactor.",cost:500,ammunitionCost:0},charge:t.chargeWDT,mine:t.mineWDT,proximityMine:t.proximityMineWDT,turret:{active:!1,type:43,arrayType:3,projectile:{life:20,speed:0},ammunition:{perShot:190,max:0,value:0,type:0},requiresTargetLock:!1,requiresLazerSight:!1,cooldown:{incrementM:0,max:2e3,value:0,type:0},damage:{type:1,value:20,valuePercent:0,stunMS:1,pushPercentM:.005,slowPercentM:.01},name:"turret",description:"A small turret that will aid you in the fight against the dark forgotten creatures of outer space.",cost:500,ammunitionCost:0},flameThrower:{active:!1,type:26,arrayType:3,projectile:{life:20,speed:0},ammunition:{perShot:1,max:1e3,value:600,type:1},requiresTargetLock:!1,requiresLazerSight:!1,cooldown:{incrementM:2.5,max:500,value:0,type:1},damage:{type:0,value:30,valuePercent:0,stunMS:1,pushPercentM:0,slowPercentM:0},name:"flamethrower",description:"Who said space can't burn? With it's dual igniters and built in oxygen injectors this baby can set fire to almost anything. As a bonus the flamethrower is also the only weapon known to kill parasites. Other weapons can't seem to hit them.",cost:500,ammunitionCost:2},lazer:{active:!1,type:27,arrayType:3,projectile:{life:0,speed:0},ammunition:{perShot:2.2,max:0,value:0,type:0},requiresTargetLock:!1,requiresLazerSight:!0,cooldown:{incrementM:0,max:0,value:0,type:2},damage:{type:0,value:14,valuePercent:0,stunMS:30,slowPercentM:.05,pushPercentM:0},name:"Lazer",description:"Lazerzz",cost:800,ammunitionCost:0}},t.cloneWeapon=r;t.resetWeaponData=function(){for(var e in t.weaponDatas)t.weaponDatas[e]=r(t.weaponDatas[e])}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(90),r(10)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reOrderAbilitys=t.createDefaultShipAbilitys=t.addAbilityToShip=t.createAbility=void 0;var n=function(){return r.abilityDatas.ultrabright},i=function(){return r.abilityDatas.energy},s=function(){return r.abilityDatas.armorplates},A=function(){return r.abilityDatas.regen},u=function(){return r.abilityDatas.cloak},l=function(){return r.abilityDatas.ultraboost},c=function(){return r.abilityDatas.shield},d=function(){return r.abilityDatas.targetlock},p=function(){return r.abilityDatas.slowmotion},f=function(){return r.abilityDatas.lazerSight},h=function(){return r.abilityDatas.miningRig},v=function(){return r.abilityDatas.miningRigPlatinum},g=function(){return r.abilityDatas.miningRigRareMinerals},y=function(){return r.abilityDatas.traceline},m=function(){return r.abilityDatas.strafeEngines},x=function(){return r.abilityDatas.coaxialMount},S=function(e){var t=r.cloneAbility(e()),a=r.cloneAbility(e());return t.original=a,t};t.createAbility=function(e){switch(e){case 0:return S(A);case 1:return S(u);case 3:return S(c);case 2:return S(l);case 4:return S(d);case 5:return S(p);case 6:return S(i);case 7:return S(s);case 8:return S(n);case 10:return S(f);case 11:return S(h);case 12:return S(v);case 13:return S(g);case 9:return S(y);case 14:return S(m);case 15:return S(x);default:a.LOG_GL_FIXED_FORCED(e,"ERR CREATING ABILITY:")}};t.addAbilityToShip=function(e,t,r){15===t.type&&(e.coaxialMount.barrel.x=.7*e.radius,e.coaxialMount.pos.y=.2*e.radius),e.abilities.hash[t.type]=t,0===t.activationType?e.abilities.passive.push(t):(e.abilities.all.push(t),r?r.types.push(t.type):e.abilities.primary.types.length<=e.abilities.secondary.types.length?e.abilities.aux.types.length<e.abilities.primary.types.length?e.abilities.aux.types.push(t.type):e.abilities.primary.types.push(t.type):e.abilities.aux.types.length<e.abilities.secondary.types.length?e.abilities.aux.types.push(t.type):e.abilities.secondary.types.push(t.type),_(e.abilities))};t.createDefaultShipAbilitys=function(e){for(var r=null!=e?e:[6],a=[],n=0;n<r.length;n++)a.push(t.createAbility(r[n]));for(var i=a.filter(function(e){return 1===e.activationType}),s=a.filter(function(e){return 0===e.activationType}),A=o([],i),u={types:[],index:0,canSelect:!0,arrayType:0,name:"primary"},l={types:[],index:0,canSelect:!0,arrayType:1,name:"secondary"},c={types:[],index:0,canSelect:!0,arrayType:2,name:"aux"},d={all:i,primary:u,secondary:l,aux:c,byArrayType:[u,l,c],passive:s,active:{cloak:0,shield:0},values:{energy:0},hash:{}};A.length>0;)A.length>0&&d.primary.types.push(A.shift().type),A.length>0&&d.secondary.types.push(A.shift().type),A.length>0&&d.aux.types.push(A.shift().type);return _(d),d};t.reOrderAbilitys=function(e,t,r,a,n){t.types.splice(n,0,e.types.splice(e.types.indexOf(r),1)[0]),_(a)};var _=function(e){var t=e.all,r={};r[0]=e.primary.types,r[1]=e.secondary.types,r[2]=e.aux.types;for(var a=0;a<t.length;a++){var n=t[a];if(1===n.activationType){for(var o=0;o<e.primary.types.length;o++)if(n.type===e.primary.types[o]){n.arrayType=e.primary.arrayType;break}for(o=0;o<e.secondary.types.length;o++)if(n.type===e.secondary.types[o]){n.arrayType=e.secondary.arrayType;break}for(o=0;o<e.aux.types.length;o++)if(n.type===e.aux.types[o]){n.arrayType=e.aux.arrayType;break}}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeasureTimeSingle=t.MeasureTimeFn=void 0,t.default=function(e,t,r,a,n){void 0===n&&(n=1);var o=performance.now(),i=e(t)||"unknown (yup we fucked up)",s=(performance.now()-o)*n;return r.push({name:i,time:s,type:a}),{time:s,name:i}};t.MeasureTimeFn=function(e,t){var r=performance.now();e();var a=performance.now()-r;return t&&t.push(a),a};t.MeasureTimeSingle=function(e){var t=performance.now();return e(),performance.now()-t}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},i=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(1),r(4),r(6),r(23),r(12),r(18),r(21),r(46),r(4),r(71),r(46),r(5),r(16),r(24),r(13),r(65),r(58),r(42)],void 0===(n=function(e,t,r,a,n,s,A,u,l,c,d,p,f,h,v,g,y,m,x,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPartsFromSpaceSnake=t.snakeIK=t.populateSpaceSnakeSegmentHash=t.resetSpaceSnakeSegmentHash=t.getSpacesnakeFromSegment=void 0;var _=0,T=new r.Vector(.04,.04),E={};t.getSpacesnakeFromSegment=function(e){return E[e]};t.resetSpaceSnakeSegmentHash=function(){E={}};t.populateSpaceSnakeSegmentHash=function(e){for(var t=0;t<e.segments.length;t++){var r=e.segments[t];E[r.guid]=e}},t.default=function(e){var o=e.game,A=e.WW,d=e.WH,p=(e.SW,e.SH,e.SX,e.SY,e.step),v=e.stepMS;if(h.getQuadTreesObj().All&&!o.settings_be_the_snake_mode){for(var g,m=f.getBaseTargetArrays(e),E=e.game.spaceSnake,I=E.length,L=function(f){var h=E[f];if(0===h.segments.length||h.remove)return h.remove=!0,h.segments.forEach(function(e){return e.remove=!0}),"continue";var I=h.segments[Math.floor(.5*h.segments.length)];I&&(h.pos.x=I.pos.x,h.pos.y=I.pos.y);var L=a.distanceBetweenVectors(h.restPos,h.segments[0].pos);h.guid%2==0&&h.segments.find(function(e){var t=e.life<.33*h.life;return h.prioritzeRestpos&&e.life<.77*h.life&&y.LifeIncreaseFixedValue(e,.05),t})&&L>1500&&(h.prioritzeRestpos=!0),L<1e3&&h.prioritzeRestpos&&h.segments.forEach(function(e){y.LifeIncreaseFixedValue(e,1),h.life>e.life&&(h.life=e.life)});for(var w=h.segments[h.attackMode?0:h.segments.length-1],b=!1,P=0;P<h.segments.length;P++){var R=h.segments[P];R.stunned&&(b=!0,R.stunned=!1)}if(b||h.spasm){var O=Math.floor(.5*h.segments.length),C=h.segments.length-1,G=h.segments[O],D=h.segments[0],N=h.segments[C];if(!h.spasm){D.vel.set(0,0),N.vel.set(0,0);var B=new r.Vector(0,G.radius*O);B.setAngle(D.angle+.83*Math.PI),B.add(D.pos);var F=new r.Vector(0,G.radius*O);F.setAngle(N.angle+.83*Math.PI),F.add(N.pos),h.spasm={firstPos:B,lastPos:F,firstDone:!1,lastDone:!1,firstMS:0,lastMS:0};var V=Math.atan2(h.spasm.lastPos.y-D.pos.y,h.spasm.lastPos.x-D.pos.x);D.vel.addXY(25,25),D.vel.setAngle(V)}var k=new r.Vector(.5,.5);if(h.spasm.firstDone){h.spasm.lastMS+=v;H=Math.atan2(h.spasm.firstPos.y-N.pos.y,h.spasm.firstPos.x-N.pos.x);k.setAngle(H),N.vel.subtract(k),N.vel.getLength()<3&&N.vel.setLength(3),N.angle=H,t.snakeIK(h.segments,p,!0,0),u.default(N,p),h.spasm.lastMS>100&&(h.spasm=null)}else{h.spasm.firstMS+=v;V=Math.atan2(h.spasm.lastPos.y-D.pos.y,h.spasm.lastPos.x-D.pos.x);k.setAngle(V),D.vel.subtract(k),D.vel.getLength()<3&&D.vel.setLength(3);var X=i([],h.segments).reverse();if(t.snakeIK(X,p,!0,0),u.default(D,p),h.spasm.firstMS>100){h.spasm.firstDone=!0;var H=Math.atan2(h.spasm.firstPos.y-N.pos.y,h.spasm.firstPos.x-N.pos.x);N.vel.set(25,25),N.vel.setAngle(H)}}return"continue"}var U=h.segments[h.segments.length-1],W=c.default(h,U.pos,U.radius,Math.max(130*h.segments.length,2200),m),Y=W.targetPos,q=(W.targetPos.toPointINT(),a.distanceBetweenVectors(w.pos,W.targetPos));if(g=Math.atan2(W.targetPos.y-w.pos.y,W.targetPos.x-w.pos.x),q>20){var z=W.targetPos.clone(),j=new r.Vector(Math.min(2*q,250),0),K=n.rotateVector(j,g+_);K.setLength(.3*q),_+=.007,z.add(K),Y=z;var Z=h.segments[h.segments.length-1];g=Math.atan2(Y.y-Z.pos.y,Y.x-Z.pos.x),w.angle=g,Z.offsetFront.setAngle(g),Z.offsetRear.setAngle(g-Math.PI);var Q=Z.vel.getLength();if(W.targetIsIM)q<400+W.target.radius&&e.game.flames.push(x.createFlame(Z,S.weaponDatas.flameThrower));t.snakeIK(h.segments,p,b,Q<1?.03:.4),s.default(o,Z,!0),l.wormhole(Z,e),Z.vel.add(T),Z.vel.setAngle(g),h.attackMode?(Z.vel.mult(1.3),Z.vel.getLength()>18&&Z.vel.setLength(18)):(Z.vel.mult(1.05),Q>4&&Z.vel.setLength(4)),u.default(Z,h.infected?.1*p:p),M(h,A,d)}},w=0;w<I;w++)L(w);return"spacesnakes"}};var M=function(e,t,r){for(var a=e.segments,n=a.length,o=0;o<n;o++){var i=a[o];if(A.shift(i,t,r,50,50)){I(i.pos,a);break}}},I=function(e,t){for(var r=t.length,a=0;a<r;a++){var n=t[a];n.pos.x=e.x,n.pos.y=e.y}};function L(e,t){var r=2*e.radius,a=e.pos.x-t.pos.x,n=e.pos.y-t.pos.y,o=Math.atan2(n,a),i=t.pos.x+Math.cos(o)*r,s=t.pos.y+Math.sin(o)*r;e.vel.x=i-e.pos.x,e.vel.y=s-e.pos.y,e.pos.x=i,e.pos.y=s,e.angle=o,e.offsetFront.setAngle(o),e.offsetRear.setAngle(o-Math.PI)}t.snakeIK=function(e,t,r,a){for(var n=e.length-1;n>0;n--){var o=e[n];r?o.legAngle=0:o.legAngleDirectionForward?(o.legAngle+=.13*t*a,o.legAngle>.6&&(o.legAngleDirectionForward=!1)):(o.legAngle-=.26*t*a,o.legAngle<-.6&&(o.legAngleDirectionForward=!0)),L(e[n-1],o)}};t.createPartsFromSpaceSnake=function(e,t){for(var a=t.segments,n=a.length,i=0;i<n;i++){var s=a[i];if(p.default(s,e,0),i>0){var A=a[i-1],u=s.vel.clone();u.getLength()>1&&u.setLength(1);var l=d.midpoint(s.pos,A.pos,.5),c=s.pos.clone(),f=A.pos.clone();c.subtract(l),f.subtract(l);var h=o(o({},v.setImovableDefaults(null)),{fromType:s.type,edgeA:c,edgeB:f,rotatedEdgeA:new r.Vector(0,0),rotatedEdgeB:new r.Vector(0,0),colorFade:255,complexPartIndices:null,complexPartVectors:null,pos:l,angle:0,angleVel:.005*Math.random(),vel:u.clone(),guid:d.getGuid(),type:36,collType:25,life:100+50*Math.random(),radius:.28*s.radius,width:.18*s.radius,armor:null}),y=o(o({},v.setImovableDefaults(null)),{fromType:s.type,edgeA:c.clone(),edgeB:new r.Vector(0,0),rotatedEdgeA:new r.Vector(0,0),rotatedEdgeB:new r.Vector(0,0),colorFade:255,complexPartIndices:null,complexPartVectors:null,pos:l.clone(),angle:.5*Math.PI+.1*s.legAngle,angleVel:.005*Math.random(),vel:u.clone(),guid:d.getGuid(),type:36,collType:25,life:100+50*Math.random(),radius:.18*s.radius,width:.18*s.radius,armor:null}),x=o(o({},v.setImovableDefaults(null)),{fromType:s.type,edgeA:c.clone(),edgeB:new r.Vector(0,0),rotatedEdgeA:new r.Vector(0,0),rotatedEdgeB:new r.Vector(0,0),colorFade:255,complexPartIndices:null,complexPartVectors:null,pos:l.clone(),angle:-.5*Math.PI+.1*s.legAngle,angleVel:.005*Math.random(),vel:u.clone(),guid:d.getGuid(),type:36,collType:25,life:100+50*Math.random(),radius:.18*s.radius,width:.18*s.radius,armor:null});g.createDust(l,15,5,e,u.x,u.y),g.createDust(h.pos,14,4,e,u.x,u.y),g.createDust(y.pos,16,6,e,u.x,u.y),g.createDust(x.pos,16,6,e,u.x,u.y);for(var S=0;S<16;S++)m.createFragmentBlack(s.pos.clone().addXY(Math.random()*s.radius-.5*s.radius,Math.random()*s.radius-.5*s.radius),e,[new r.Vector(0,0),new r.Vector(6+6*Math.random(),0),new r.Vector(0,6+6*Math.random())],u.x+Math.random()-.5,u.y+Math.random()-.5,Math.random());e.game.asteroidParts.push(h),e.game.asteroidParts.push(y),e.game.asteroidParts.push(x)}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(7),r(4),r(9),r(5),r(38),r(94)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetTargetBehaviourHashes=t.getBaseTargetArrays=void 0;t.getBaseTargetArrays=function(e){if(!o.getQuadTreesObj().All)return[];var t=n.default(e);return t&&t.inSafeZone?[0,22,44,49,2]:[0,22,44,49,1,43,2]};var A={},u={};t.resetTargetBehaviourHashes=function(){A={},u={}};var l=r.rect_pool_pop(0,0,0,0);t.default=function(e,t,n,c,d){void 0===c&&(c=2500),void 0===d&&(d=[]);var p=o.getQuadTreesObj(),f=null,h=A[e.guid],v=u[e.guid];if(l.update(t.x-200,t.y-200,400,400),e.prioritzeRestpos&&(0===d.length||e.life<.3*e.oLife||0===p.queryTreesRect(d,l).length))return a.distanceBetweenVectors(t,e.restPos)<1e3&&(e.prioritzeRestpos=!1),e.preyPos=e.restPos.toPoint(),{target:null,targetIsIM:!1,targetPos:e.restPos};if(p.All){var g=r.rect_pool_pop(t.x-.5*c,t.y-.5*c,c,c);0===d.length&&d.push(44);var y=p.queryTreesRect(d,g).slice(0,10);r.rect_pool_put(g);for(var m=Math.min(8,y.length),x=2*c,S=0;S<m;S++){var _=y[S];if(44===_.type||i.posInAncient(t)){if(44===_.type){if(_.inSafeZone)continue;if(_.abilities.active.cloak&&a.distanceBetweenVectors(_.pos,t)>_.radius+n+100)continue}if(!s.getLineOfSight(t,_)){if(h){if(a.distanceBetweenVectors(h,t)<1.3*n){h=A[e.guid]=null;break}}else v&&(h=A[e.guid]=v.clone());continue}h&&(h=A[e.guid]=null)}if(22===_.type){var T=_,E=r.rect_pool_pop(T.pos.x-1e3,T.pos.y-1e3,2e3,2e3),M=p.queryTreesRect([44],E).length;if(r.rect_pool_put(E),0===M)continue}else if(22===_.type&&m>1&&!_.isCannon&&m>1)continue;if(_.life>0){var I=a.distanceBetweenVectors(_.pos,t);I<x&&(x=I,f=_)}}}var L=e.restPos,w=h||(f?f.pos.clone():L.clone());u[e.guid]=f&&f.pos.clone(),e.infected&&Math.random()>.98&&w.addXY(500*(Math.random()-.5),500*(Math.random()-.5));var b={targetPos:w,target:h?null:f,targetIsIM:!h&&!!f};return e.preyPos=w.toPoint(),b}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuadTreeFastPoint32=t.getQTFastP32data=void 0;var r=function(e,t,r,a,n,o){return!(e>n||e+r<n||t>o||t+a<o)},a=[],n=function(e){a.push(e)},o=0,i=function(e,t,r,n,i,A,u){var l=null;return a.length>0?(l=a.pop()).set(e,t,r,n,i,A,u):(l=new s(e,t,r,n,i,A,u),o++),l};t.getQTFastP32data=function(){return{nodesCreated:o,poolsize:a.length}};var s=function(){function e(e,t,r,a,n,o,i){this.indexes_I_XY=[],this.set(e,t,r,a,n,o,i)}return e.prototype.set=function(e,t,r,a,n,o,i){this.x=e,this.y=t,this.width=r,this.height=a,this.cap=n,this.indexes_I_XY.length=0,this.maxDepth=i,this.depth=o},e.prototype.reset=function(){this.ne&&(n(this.ne),n(this.nw),n(this.se),n(this.sw),this.ne.reset(),this.nw.reset(),this.se.reset(),this.sw.reset(),this.ne=void 0,this.nw=void 0,this.se=void 0,this.sw=void 0),this.indexes_I_XY.length=0},e.prototype.query=function(e,t,a,n,o){if(function(e,t,r,a,n,o,i,s){return!(e>n+i||e+r<n||t>o+s||t+a<o)}(e,t,a,n,this.x,this.y,this.width,this.height))if(this.ne)this.ne.query(e,t,a,n,o),this.nw.query(e,t,a,n,o),this.se.query(e,t,a,n,o),this.sw.query(e,t,a,n,o);else for(var i=this.indexes_I_XY.length,s=this.indexes_I_XY,A=0;A<i;A+=3){var u=s[A+1],l=s[A+2];r(e,t,a,n,u,l)&&o.push(s[A])}},e.prototype.insert=function(e,t,r){if(this.nw){var a=e>this.x+.5*this.width,n=t<this.y+.5*this.height;a?n?this.ne.insert(e,t,r):this.se.insert(e,t,r):n?this.nw.insert(e,t,r):this.sw.insert(e,t,r)}else{var o=this.indexes_I_XY,i=o.length;if(
//!this.ne &&
i<this.cap||this.depth>=this.maxDepth)o.push(r,e,t);else{this.subdivide();for(var s=0;s<i;s+=3){var A=o[s+1],u=o[s+2];this.insert(A,u,o[s])}this.insert(e,t,r),this.indexes_I_XY.length=0}}},e.prototype.subdivide=function(){var e=this.x,t=this.y,r=this.width,a=this.height,n=this.cap,o=this.depth+1,s=this.maxDepth;this.nw=i(e,t,.5*r,.5*a,n,o,s),this.ne=i(e+.5*r,t,.5*r,.5*a,n,o,s),this.sw=i(e,t+.5*a,.5*r,.5*a,n,o,s),this.se=i(e+.5*r,t+.5*a,.5*r,.5*a,n,o,s)},e}(),A=function(){function e(e,t,r,a){void 0===a&&(a=3),this.rootRect=e,this.REFERENCE_INDEX=0,this.root=new s(e.x,e.y,e.width,e.height,3*t,1,a),this.itemType=r,this.references=[]}return e.prototype.insertUnsafe=function(e){this.REFERENCE_INDEX=this.references.push(e)-1,this.root.insert(e.pos.x,e.pos.y,this.REFERENCE_INDEX)},e.prototype.insert=function(e){var t=this.rootRect;return!!r(t.x,t.y,t.width,t.height,e.pos.x,e.pos.y)&&(this.REFERENCE_INDEX=this.references.push(e),this.root.insert(e.pos.x,e.pos.y,this.REFERENCE_INDEX-1),!0)},e.prototype.query=function(e){var t=e.radius;return this.___query(e.pos.x-t,e.pos.y-t,2*t,t)},e.prototype.___query=function(e,t,r,a){var n=[],o=[];this.root.query(e,t,r,a,o);for(var i=o.length,s=0;s<i;s++)n.push(this.references[o[s]]);return n},e.prototype.queryCircle=function(e,t){var a=this.___query(e.x-t,e.y-t,2*t,2*t);if(0===a.length)return a;for(var n=.7*t,o=e.x-n,i=e.y-n,s=2*n,A=a.length,u=[],l=0;l<A;l++){var c=a[l];r(o,i,s,s,c.pos.x,c.pos.y)?u.push(c):(e.x-c.pos.x)*(e.x-c.pos.x)+(e.y-c.pos.y)*(e.y-c.pos.y)<t*t&&u.push(c)}return u},e.prototype.queryInt=function(e){return this.___query(e.x,e.y,e.width,e.height)},e.prototype.queryVec=function(e,t,r){return this.___query(e.x-t,e.y-r,2*t,2*r)},e.prototype.reset=function(){this.references=[],this.REFERENCE_INDEX=0,this.root.reset(),this.root.x=this.rootRect.x,this.root.y=this.rootRect.y,this.root.width=this.rootRect.width,this.root.height=this.rootRect.height,this.root.cap=3*this.cap,this.root.maxDepth=this.maxDepth},e.prototype.setup=function(e,t,r,a){this.rootRect=e,this.cap=t,this.itemType=r,a&&(this.maxDepth=a),this.reset()},e.prototype.getRangeType=function(){return"INT32 (P:FST)"},e.prototype.visualize=function(e,t,r,a,n,o,i){},e}();t.QuadTreeFastPoint32=A}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mulberry32=void 0,t.mulberry32=function(e){return function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296}}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadData=t.loadStr=t.loadBool=t.loadInt=t.saveData=t.saveStr=t.saveBool=t.saveInt=t.containsData=t.containsStr=t.containsBool=t.containsInt=void 0;var r=null;try{r=window.localStorage}catch(e){r={setItem:function(){return null},getItem:function(){return null}}}var a=function(e){return!(null===r.getItem(e))};t.containsInt=function(e){return a(e+"_int")};t.containsBool=function(e){return a(e+"_bool")};t.containsStr=function(e){return a(e+"_str")};t.containsData=function(e){return a(e+"_data")};t.saveInt=function(e,t){r.setItem(e+"_int",t+"")};t.saveBool=function(e,t){r.setItem(e+"_bool",(t?1:0)+"")};t.saveStr=function(e,t){r.setItem(e+"_str",t)};t.saveData=function(e,t){var a=JSON.stringify(t);return r.setItem(e+"_data",a),a.length};t.loadInt=function(e){return parseInt(r.getItem(e+"_int"),10)};t.loadBool=function(e){var t=r.getItem(e+"_bool");return 1===parseInt(t)||0!==parseInt(t)&&void 0};t.loadStr=function(e){return r.getItem(e+"_str")};t.loadData=function(e){var t=r.getItem(e+"_data");if(t)return JSON.parse(t)}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(4),r(1),r(6),r(3),r(16),r(27),r(19)],void 0===(n=function(e,t,r,a,n,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,l,c,d,p,f){e.WW,e.WH;var h="ABCDEFGHIJK".split(""),v=n.createBlockcircleArray(6,0,.8*t,l).map(function(e,n){var u=p&&p[n]?p[n]:null,d=u?new a.Vector(u.staticPos.x,u.staticPos.y):e;return o(o({},s.setImovableDefaults(A.BallCreator(d.x,d.y,t/6,1e3*t))),{specular:.1,opos:{x:d.x,y:d.y},procedurallyCreated:null==f?void 0:f.procedurallyCreated,mass:1e3*t,sleepingAABB:!0,lightsOn:!1,isLV426:!1,netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},isOnline:!1,ownerName:c,name:h.pop(),damages:[],weaponsActiveTimerMS:0,staticPos:d.clone(),vel:new a.Vector(0,0),type:22,collType:15,guid:u?u.guid:r.getGuid(),radius:t/6,sides:6,angle:Math.atan2(d.y-l.y,d.x-l.x),angleVel:0,life:u?u.life:i.SPACEPORT_START_LIFE,oLife:i.SPACEPORT_START_LIFE,busy:!1,isCannon:!0,fireing:!1,aggressionForGuidsHash:{},armor:{type:3,value:1},resources:null,wallThickness:40})});v.pop();var g=p?p.filter(function(e){return!e.isCannon})[0]:null,y=o(o({},s.setImovableDefaults(A.BallCreator(l.x,l.y,t/6,1e3*t))),{specular:.1,lightsOn:!1,opos:{x:l.x,y:l.y},procedurallyCreated:null==f?void 0:f.procedurallyCreated,mass:1e3*t,isLV426:!1,sleepingAABB:!0,netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},isOnline:!1,ownerName:c,name:h.pop(),fireing:!1,damages:[],weaponsActiveTimerMS:0,aggressionForGuidsHash:{},staticPos:l.clone(),vel:new a.Vector(0,0),type:22,collType:15,guid:g?g.guid:r.getGuid(),radius:t/6,sides:6,angle:0,angleVel:0,life:g?g.life:i.SPACEPORT_START_LIFE,oLife:i.SPACEPORT_START_LIFE,busy:!0,isCannon:!1,armor:{type:3,value:1},wallThickness:40,resources:null});return v.push(y),o(o(o({},s.setImovableDefaults(A.BallCreator(l.x,l.y,t,t))),{specular:0,isEnemyForMS:0,isLV426:!1,netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},shields:.2*t,oshields:.2*t,shieldImpacts:[],reparations:d||{life:100},weaponsActive:!1,angle:0,angleVel:0,centerNoneCannon:y,guid:r.getGuid(),life:1e4,name:(c||"").toUpperCase(),pos:l,vel:new a.Vector(0,0),staticPos:l.clone(),radius:t,sides:6,wallThickness:40,type:3,collType:14,sleepingAABB:!0,cannons:v,shipChargeHash:{},chargeParticles:[],armor:{type:1,value:1},resources:u.createDefaultResources(t,3)}),f)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(332),r(160),r(334),r(335),r(336),r(337),r(338),r(10),r(339),r(10),r(340),r(341)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestLogger=t.startupTests=void 0;t.startupTests=function(){l.seedGenTests(),s.bulletCircleTests(),r.verifier(a.getIntersectionData()),n.velocityAABBtest(),i.rectIntersectionTests(),o.quadTreePointTest(),A.collisiontests(),d.intersectionOverlapTest(),p.sleepingAABBStest(),f||u.LOG_GL_CLEAR()};var f=!1;t.TestLogger=function(e,t){t?c.LOG_GL(e+" : success"):(f=!0,c.LOG_GL_FIXED_FORCED("failed",e),console.error("failed",e))}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(1),r(4),r(3),r(6),r(16),r(27),r(19),r(7)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRFsingle=void 0;t.createRFsingle=function(e,t){var i=new r.Vector(e.x,e.y);return o(o({},s.setImovableDefaults(A.BallCreator(e.x,e.y,t,0))),{minerals:t,specular:1,isLV426:!1,netangle:0,netpos:{x:e.x,y:e.y},netvel:{x:0,y:0},type:11,collType:3,guid:a.getGuid(),sleepingAABB:!0,staticPos:i.toPoint(),radius:t,vel:new r.Vector(0,0),sides:Math.max(7,Math.floor(t/20)),angle:0,angleVel:0,life:t*n.ROCKFORMATION_RADIUS_LIFE_MULTIP,oLife:t*n.ROCKFORMATION_RADIUS_LIFE_MULTIP,armor:{type:5,value:2},resources:u.createDefaultResources(t,11)})};var c=l.rect_pool_pop(0,0,0,0),d=function(e,a,n,o,s,A,u,l,p){var f=new r.Vector(n,0);if(n>40||l&&n>4){if(p&&(c.x=a.x+-n,c.y=a.y+-n,c.width=2*n,c.height=2*n,!p.containsRect(c)))return;var h=t.createRFsingle(a,n);o.push(h);for(var v=u?4:e()>.9?2:1,g=0,y=0;y<v;y++){if(f.set(1.35*n,0),u)g=e()*Math.PI*2;else if(v>1){if(0===y)g=i.normalizeRadianAngle(A)-e()*Math.PI*.7;else if(g=i.normalizeRadianAngle(A)+e()*Math.PI*.7,!l&&e()>.6){var m=new r.Vector(n,0),x=g;e(),f.setAngle(x);var S={x:a.x+m.x,y:a.y+m.y},_={arc:[],attachedToGuid:h.guid,under:!0,pos:{x:a.x,y:a.y}};s.push(_),d(e,S,v>1?.6*n:.96*n,_.arc,s,x,!1,!0,p)}}else g=i.normalizeRadianAngle(A)+(e()-.5)*Math.PI*.75;f.setAngle(g);var T={x:a.x+f.x,y:a.y+f.y};d(e,T,l?v>1?.45*n:.92*n:v>1?.6*n:.96*n,o,s,g,!1,l,p)}}},p=function(e,t){for(var r=0,n=0;n<e.length;n++){var o=e[n],i=a.distanceBetweenXYXY(o.pos.x,o.pos.y,t.x,t.y)+o.radius;i>r&&(r=i)}return r};t.default=function(e,t,n,i,A){var u=[],l=[];return d(e,{x:t,y:n},i,u,l,0,!0,!1,A),{rockFormations:u,rockFormationArcs:l,rfSystem:o(o({},s.setImovableDefaults(null)),{type:7,collType:4,sleepingAABB:!0,guid:a.getGuid(),pos:new r.Vector(t,n),vel:new r.Vector(0,0),life:1,radius:A?Math.max(A.height,A.width):p(u,{x:t,y:n}),armor:null})}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))(function(n,o){function i(e){try{A(a.next(e))}catch(e){o(e)}}function s(e){try{A(a.throw(e))}catch(e){o(e)}}function A(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,s)}A((a=a.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,a,n,o,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){i.label=o[1];break}if(6===o[0]&&i.label<n[1]){i.label=n[1],n=o;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(o);break}n[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};a=[r,t,r(49),r(3)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLadder=t.setLadderValue=t.createUser=t.createOfflineUser=t.getUserOnlineStatus=t.getUser=t.getRequestsInFlight=void 0;var n="https://api.globalstats.io/",s="",A="",u="";u=r.loadStr("local_user_name_FFG"),A=r.loadStr("local_user_score_id_FFG");var l=0;t.getRequestsInFlight=function(){return l};var c=function(e,t){return o(void 0,void 0,void 0,function(){var r;return i(this,function(a){switch(a.label){case 0:return l++,[4,o(void 0,void 0,void 0,function(){return i(this,function(e){return[2,new Promise(function(e,t){setTimeout(function(){e()},20)})]})})];case 1:return a.sent(),(r=fetch(e,t)).then(function(){l--}).catch(function(){l--}),[2,r]}})})},d=function(){return o(void 0,void 0,void 0,function(){var e,t;return i(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,c(n+"oauth/access_token",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=client_credentials&scope=endpoint_client&client_id=c9bcr0PNSyDu2zpnNJCmF88LN3IxmY2y7eLzfAm7&client_secret=ZCbz1ynLaJriRc6VVEhTHQ1VBAabWikWUvwW4THf"})];case 1:return 200!==(e=r.sent()).status?[2,Promise.reject()]:[4,e.json()];case 2:return t=r.sent(),s=t.access_token,setTimeout(function(){s=null},3e6),[2,Promise.resolve()];case 3:return r.sent(),!0,[2,Promise.reject()];case 4:return[2]}})})},p=function(e){return o(void 0,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,c(n+"v1/statistics/"+A,{method:"PUT",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},body:JSON.stringify({name:u,values:{score:e}})})];case 1:return 200!==(t=r.sent()).status?[2,Promise.reject()]:[4,t.json()];case 2:return r.sent(),[2,Promise.resolve()];case 3:return r.sent(),[2,Promise.reject()];case 4:return[2]}})})};t.getUser=function(){return u};t.getUserOnlineStatus=function(){return!(!u||!A)};t.createOfflineUser=function(e){u=e};t.createUser=function(e,t){return o(void 0,void 0,void 0,function(){return i(this,function(l){switch(l.label){case 0:return l.trys.push([0,4,,5]),s?[3,2]:[4,d()];case 1:l.sent(),l.label=2;case 2:return[4,(p=t,o(void 0,void 0,void 0,function(){var e,t;return i(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,c(n+"v1/statistics",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},body:JSON.stringify({name:p,values:{score:0}})})];case 1:return 200!==(e=a.sent()).status?[2,Promise.reject()]:[4,e.json()];case 2:return t=a.sent(),A=t._id,u=p,r.saveStr("local_user_score_id_FFG",A),r.saveStr("local_user_name_FFG",u),[2,Promise.resolve()];case 3:return a.sent(),[2,Promise.reject()];case 4:return[2]}})})).then(function(){e.game.notifications.push({life:a.NOTIFICATION_LIFE,type:70,message:"user '"+t+"' created successfully."})}).catch(function(){e.game.notifications.push({life:a.NOTIFICATION_LIFE,type:71,message:"unable to create user."})})];case 3:return l.sent(),[2,Promise.resolve()];case 4:return l.sent(),[3,5];case 5:return[2,Promise.reject()]}var p})})};t.setLadderValue=function(e,t){return o(void 0,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),s?[3,2]:[4,d()];case 1:r.sent(),r.label=2;case 2:return[4,p(t)];case 3:return r.sent(),e.game.notifications.push({life:a.NOTIFICATION_LIFE,type:72,message:"score saved: "+t}),[2,Promise.resolve()];case 4:return r.sent(),e.game.notifications.push({life:a.NOTIFICATION_LIFE,type:72,message:"unable to save score... was:"+t}),[3,5];case 5:return[2,Promise.resolve()]}})})};t.getLadder=function(){return o(void 0,void 0,void 0,function(){var e,t;return i(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),s?[3,2]:[4,d()];case 1:r.sent(),r.label=2;case 2:return[4,o(void 0,void 0,void 0,function(){var e,t;return i(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,c(n+"v1/statistics/"+A+"/section/score",{method:"GET",cache:"no-cache",headers:{Authorization:"Bearer "+s}})];case 1:return[4,(e=r.sent()).json()];case 2:return t=r.sent(),200!==e.status?[2,Promise.reject()]:[2,Promise.resolve(t)];case 3:return r.sent(),[2,Promise.reject()];case 4:return[2]}})})];case 3:return e=r.sent(),t=[],e.better_ranks.data.map(function(e){return t.push(e.rank+" "+e.name+" "+e.value)}),t.push("> "+e.user_rank.rank+" "+e.user_rank.name+" "+e.user_rank.value),e.worse_ranks.data.map(function(e){return t.push(e.rank+" "+e.name+" "+e.value)}),[2,Promise.resolve(t)];case 4:return r.sent(),[2,Promise.reject()];case 5:return[2]}})})}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(1),r(18),r(23),r(4),r(6),r(5),r(31),r(101),r(4),r(16),r(27)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProximityMine=t.createProximityMineFromShip=t.rayIntersections=t.PROXIMITY_MINE_RAY_LENGTH=void 0,t.PROXIMITY_MINE_RAY_LENGTH=2700;var f=new r.Vector(t.PROXIMITY_MINE_RAY_LENGTH,0),h=new r.Vector(1.5,0),v=new r.Vector(0,0);t.rayIntersections=function(e,r,a,n){var o=A.getQuadTreesObj(),i=t.PROXIMITY_MINE_RAY_LENGTH;v.set(r.x,r.y);var s=S(o.queryRay([4,11,21,22],e,r),e,r,i);i=s.closestDist;var u=m(o.queryRay([10,9,35,42,43],e,r),e,r,i,a);i=u.closestDist;var l=x(o.queryRay([44,49,1,2,0],e,r),e,r,i,n);i=l.closestDist;var c=_(o.queryRay([41],e,r),e,r,i,n);return i=c.closestDist,c.target?c:l.target?l:u.target?u:s};new r.Vector(0,0);var g=new r.Vector(0,0),y=new r.Vector(0,0),m=function(e,t,r,a,n){for(var o=e.length,i=r.x,s=r.y,A=!1,l=null,d=0;d<o;d++){var p=e[d];if(u.LineInterceptCircle(t,r,p.pos,p.radius)){var h=c.distanceBetweenVectors(t,p.pos)-p.radius;if(h<a){g.set(t.x,t.y),y.set(r.x,r.y);var v=u.LineInterceptCircleToPositions(g,y,p.pos,p.radius);v.length>0&&(i=v[0].x,s=v[0].y,A=!0,a=h,l=p)}}}return{pos:A?{x:i,y:s}:f,target:l,closestDist:a}},x=function(e,t,r,a,n){for(var o=e.length,s=r.x,A=r.y,l=null,c=!1,d=0;d<o;d++){var p=e[d];if(p.guid!==n)for(var h=p.comp[0].vertex,v=[h[0].x,h[0].y,h[1].x,h[1].y,h[0].x,h[0].y,h[2].x,h[2].y,h[1].x,h[1].y,h[2].x,h[2].y],g=v.length,y=0;y<g;y+=4){var m=u.LineIntersectsToPoint(t.x,t.y,r.x,r.y,v[y],v[y+1],v[y+2],v[y+3]);if(m){var x=i.distanceBetweenXYXY(m.x,m.y,t.x,t.y);x<a&&(a=x,s=m.x,A=m.y,c=!0,l=p)}}}return{pos:c?{x:s,y:A}:f,target:l,closestDist:a}},S=function(e,t,r,a){for(var n=e.length,o=Number.MAX_VALUE,s=Number.MAX_VALUE,A=null,c=!1,d=0;d<n;d++){var p=e[d];if(4===p.type||11===p.type||22===p.type||21===p.type){var h=[];l.blockCirclePolyForRayCaster2(p.sides,p.radius,p.pos.x,p.pos.y,p.angle,h,-1,0,0,t.x,t.y);for(var v=h.length,g=0;g<v;g+=4){var y=u.LineIntersectsToPoint(t.x,t.y,r.x,r.y,h[g],h[g+1],h[g+2],h[g+3]);if(y){var m=i.distanceBetweenXYXY(y.x,y.y,t.x,t.y);m<a&&(a=m,o=y.x,s=y.y,c=!0,A=p)}}}}return{pos:c?{x:o,y:s}:f,target:A,closestDist:a}},_=function(e,t,r,a,n){for(var o=e.length,s=Number.MAX_VALUE,A=Number.MAX_VALUE,c=null,d=!1,p=0;p<o;p++){var h=e[p];if(h.guid!==n){var v=[];l.blockCirclePolyForRayCaster2(6,h.radius,h.pos.x,h.pos.y,0,v,-1,0,0,t.x,t.y);for(var g=v.length,y=0;y<g;y+=4){var m=u.LineIntersectsToPoint(t.x,t.y,r.x,r.y,v[y],v[y+1],v[y+2],v[y+3]);if(m){var x=i.distanceBetweenXYXY(m.x,m.y,t.x,t.y);x<a&&(a=x,s=m.x,A=m.y,d=!0,c=h)}}}}return{pos:d?{x:s,y:A}:f,target:c,closestDist:a}},T=new r.Vector(0,0),E=new r.Vector(0,0),M=!1,I={};t.default=function(e){var r=e.game,o=(e.WW,e.WH,e.step),A=e.stepMS;I={};var u=r.proximityMines.length,l=0,d=!1;if(M){var p=0;for(var v in I)I[v]>p&&(p=I[v],l=parseInt(v,10))}for(var g=0;g<u;g++){var y=r.proximityMines[g];u>80&&!d&&(M&&y.guid===l&&(y.remove=!0,d=!0),I[y.guid]?I[y.guid]++:I[y.guid]=1,M=!0,0===g&&(y.remove=!0)),y.vel.mult(.97),y.vel.getLength()>6&&y.vel.setLength(6),y.target=null,y.intersectAaquired=!1,y.intersectBaquired=!1;var m=y.pos;f.set(t.PROXIMITY_MINE_RAY_LENGTH,0),f.setAngle(y.rayAngleA),f.add(m);var x=t.rayIntersections(m,f,y.rayAngleA,y.guid);y.intersectA.x=x.pos.x,y.intersectA.y=x.pos.y,x.target&&(y.target=x.target,y.intersectAaquired=!0),f.set(t.PROXIMITY_MINE_RAY_LENGTH,0),f.setAngle(y.rayAngleB),f.add(m);var S=t.rayIntersections(m,f,y.rayAngleB,y.guid);if(y.intersectB.x=S.pos.x,y.intersectB.y=S.pos.y,S.target&&(y.intersectBaquired=!0),!y.target&&S.target&&(y.target=S.target),y.target){var _=y.target.type;if(y.target.guid===y.ownerGuid||2===_||4===_||11===_||22===_||42===_||43===_||0===_||21===_||y.target.ownerGuid===y.ownerGuid)y.aquireMode=2,y.rayAngleA+=o*Math.PI*5e-4,y.rayAngleB+=o*Math.PI*5e-4;else{T.set(y.target.pos.x,y.target.pos.y),T.subtract(y.pos);var L=T.getAngle(),w=i.angleDifference(y.rayAngleA,L);y.rayAngleA-=.13*w,Math.abs(w)<.08&&(y.aquireTimer+=A,E.set(y.target.radius*(Math.random()-.5),0),E.setAngle(L+.5*Math.PI),E.add(T),y.rayAngleA=E.getAngle(),y.aquireMode=1);var b=i.angleDifference(y.rayAngleB,L);y.rayAngleB-=.13*b,Math.abs(b)<.08&&(y.aquireTimer+=A,E.set(y.target.radius*(Math.random()-.5),0),E.setAngle(L+.5*Math.PI),E.add(T),y.rayAngleB=E.getAngle(),y.aquireMode=1);var P=y.target;if(P&&!P.remove&&P.life>0){var R=Math.atan2(P.pos.y-y.pos.y,P.pos.x-y.pos.x),O=y.vel.getAngle();O=s.normalizeRadianAngle(O),O+=.5*s.angleDelta(O,R)*o,h.set(.4,0),h.setAngle(O),y.vel.add(h)}else y.aquireTimer=0;y.target&&y.aquireTimer>y.timerT&&c.distanceBetweenVectors(y.pos,y.target.pos)<y.target.radius+150&&(y.aquireTimer=y.timerT+1,y.remove=!0)}}else{y.aquireMode=0,y.aquireTimer=0;var C=i.angleDifference(y.rayAngleA,y.rayAngleB);Math.abs(C)<.9*Math.PI?(y.rayAngleA+=o*Math.PI*.009,y.rayAngleB+=o*Math.PI*.002):(y.rayAngleA+=o*Math.PI*.0033,y.rayAngleB=y.rayAngleA+Math.PI)}y.rayAngleA=s.normalizeRadianAngle(y.rayAngleA),y.rayAngleB=s.normalizeRadianAngle(y.rayAngleB),n.default(r,y,!0),a.default(y,o)}return"proximitymines"};t.createProximityMineFromShip=function(e,a,n){var o=e.vel.clone();o.mult(.85);var i=new r.Vector(e.pos.x+Math.cos(e.angle+Math.PI)*(e.radius+10),e.pos.y+Math.sin(e.angle+Math.PI)*(e.radius+10)),s=2*Math.PI*Math.random();a.game.proximityMines.push(t.createProximityMine(i,o,n,s))};t.createProximityMine=function(e,t,r,a,n){return o(o(o({damage:r.damage,pos:e,vel:t,guid:i.getGuid(),life:100,radius:7,rayAngleA:a,rayAngleB:Math.PI+a,ownerGuid:r.ownerGuid,ownerType:r.ownerType,type:41,collType:17},d.setImovableDefaults(p.BallCreator(e.x,e.y,7,7))),{target:null,aquireMode:0,aquireTimer:0,timerT:1200,intersectA:e.toPoint(),intersectB:e.toPoint(),intersectAaquired:!1,intersectBaquired:!1,origin:e.clone(),armor:{type:3,value:1}}),n)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(0),r(2)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawSparks=void 0;t.drawSparks=function(e){var t=[],r=e.game,o=e.SX,i=e.SY,s=e.gl,A=r.sparks,u=A.length;if(u>0){for(var l=0;l<u;l++){var c=A[l];t.push(c.pos.x-o,c.pos.y-i,c.pos.x+c.vel.x-o,c.pos.y+c.vel.y-i)}a.default(a.GLctx.Vertices,s),n.drawColor(t,s,.4,.4,1,1,s.LINES)}},t.default=function(e,t,a,n){if(Math.random()>.8)for(var o=Math.ceil(a*Math.random()+1),i=0;i<o;i++){var s=new r.Vector(0,-5),A=Math.random();Math.random()>.9?s.setAngle((A-.5)*Math.PI*.7+.5*Math.PI):s.setAngle((A-.5)*Math.PI*.7-.5*Math.PI),s.mult(.5+Math.random());var u=new r.Vector(t.x,t.y),l={life:50+Math.random()*n,vel:s,pos:u};e.game.sparks.push(l)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(3)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a){var n=1.5*r.MAP_SAFETY_ZONE,o=e&&e.pos;return e&&(o.x>t-n||o.x<n||o.y>a-n||o.y<n)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(7),r(31)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuadTreeFastRect32=t.QuadTreeFastRect32Node=t.FST32_NODE_LOOP_BASE=void 0;var n=function(e,t,r,a,n,o,i,s){return!(e>n+i||e+r<n||t>o+s||t+a<o)},i=[],s=function(e){i.push(e)},A=function(e,t,r,a,n,o,s){var A=null,l=i.length;return l>0?((A=i.pop()).set(e,t,r,a,n,o,s),l):(A=new u(e,t,r,a,n,o,s),0),A};t.FST32_NODE_LOOP_BASE=6;var u=function(){function e(e,t,r,a,n,o,i){this.indexes_I_XYWH_S=[],this.set(e,t,r,a,n,o,i)}return e.prototype.set=function(e,t,r,a,n,o,i){this.x=e,this.y=t,this.width=r,this.height=a,this.cap=n,this.indexes_I_XYWH_S.length=0,this.maxDepth=i,this.depth=o},e.prototype.pop=function(){this.ne&&(this.ne.ne||this.nw.ne||this.se.ne||this.sw.ne?(this.ne.pop(),this.nw.pop(),this.se.pop(),this.sw.pop()):(s(this.ne),s(this.nw),s(this.se),s(this.sw),this.ne=void 0,this.nw=void 0,this.se=void 0,this.sw=void 0,this.indexes_I_XYWH_S.length=0))},e.prototype.reset=function(){this.ne&&(this.ne.reset(),this.nw.reset(),this.se.reset(),this.sw.reset(),s(this.ne),s(this.nw),s(this.se),s(this.sw),this.ne=void 0,this.nw=void 0,this.se=void 0,this.sw=void 0),this.indexes_I_XYWH_S.length=0},e.prototype.query=function(e,r,a,o,i,s,A,u,l,c,d){if(n(e,r,a,o,this.x,this.y,this.width,this.height))if(this.nw)this.ne.query(e,r,a,o,i,s,A,u,l,c,d),this.nw.query(e,r,a,o,i,s,A,u,l,c,d),this.se.query(e,r,a,o,i,s,A,u,l,c,d),this.sw.query(e,r,a,o,i,s,A,u,l,c,d);else for(var p=this.indexes_I_XYWH_S,f=p.length,h=0;h<f;h+=t.FST32_NODE_LOOP_BASE){var v=p[h],g=p[h+5];if(!(v===s||A[v]||d[v]||1===g&&1===l)){var y=p[h+1],m=p[h+2],x=p[h+3],S=p[h+4];n(e,r,a,o,y,m,x,S)&&(i.push(v),u&&(A[v]=!0))}}},e.prototype.queryTree=function(e,r,a,n){if(this.nw)this.ne.queryTree(e,r,a,n),this.nw.queryTree(e,r,a,n),this.se.queryTree(e,r,a,n),this.sw.queryTree(e,r,a,n);else for(var i=this.indexes_I_XYWH_S,s=i.length,A=0;A<s;A+=t.FST32_NODE_LOOP_BASE){var u=i[A],l=this.indexes_I_XYWH_S[A+5];if(!n[u]&&1!==l){n[u]=!0;var c=i[A+1],d=i[A+2],p=i[A+3],f=i[A+4],h=[];e.root.query(c,d,p,f,h,a?u:-1,{},!0,l,u,a?n:{}),h.length>0&&r.push(o([u],h))}}},e.prototype.insert=function(e,r,a,o,i,s){if(this.nw)for(var A=[this.ne,this.nw,this.se,this.sw],u=0;u<4;u++){var l=A[u];if(y=l.x,m=l.y,x=l.width,S=l.height,T=r,E=a,M=o,(_=e)>y&&T>m&&_+E<y+x&&T+M<m+S){l.insert(e,r,a,o,i,s);break}n(l.x,l.y,l.width,l.height,e,r,a,o)&&l.insert(e,r,a,o,i,s)}else{var c=this.indexes_I_XYWH_S,d=c.length;if(d<this.cap||this.depth>=this.maxDepth)c.push(i,e,r,a,o,s);else{this.subdivide();for(u=0;u<d;u+=t.FST32_NODE_LOOP_BASE){var p=c[u+1],f=c[u+2],h=c[u+3],v=c[u+4],g=c[u+5];this.insert(p,f,h,v,c[u],g)}this.insert(e,r,a,o,i,s),this.indexes_I_XYWH_S.length=0}}var y,m,x,S,_,T,E,M},e.prototype.subdivide=function(){var e=this.x,t=this.y,r=this.width,a=this.height,n=this.cap,o=this.depth+1,i=this.maxDepth;if(this.ne)return this.nw.x=e,this.nw.y=t,this.nw.width=.5*r,this.nw.height=.5*a,this.nw.cap=n,this.nw.depth=o,this.nw.maxDepth=i,this.nw.indexes_I_XYWH_S.length=0,this.ne.x=this.x+.5*r,this.ne.y=t,this.ne.width=.5*r,this.ne.height=.5*a,this.ne.cap=n,this.ne.depth=o,this.ne.maxDepth=i,this.ne.indexes_I_XYWH_S.length=0,this.sw.x=e,this.sw.y=t+.5*a,this.sw.width=.5*r,this.sw.height=.5*a,this.sw.cap=n,this.sw.depth=o,this.sw.maxDepth=i,this.sw.indexes_I_XYWH_S.length=0,this.se.x=e+.5*r,this.se.y=t+.5*a,this.se.width=.5*r,this.se.height=.5*a,this.se.cap=n,this.se.depth=o,this.se.maxDepth=i,void(this.se.indexes_I_XYWH_S.length=0);this.nw=A(e,t,.5*r,.5*a,n,o,i),this.ne=A(this.x+.5*r,t,.5*r,.5*a,n,o,i),this.sw=A(e,t+.5*a,.5*r,.5*a,n,o,i),this.se=A(e+.5*r,t+.5*a,.5*r,.5*a,n,o,i)},e.prototype.getAABBdata=function(e,r,a,o,i,s,A){if(n(this.x,this.y,this.width,this.height,e,r,a,o))if(this.nw)this.ne.getAABBdata(e,r,a,o,i,s,A),this.nw.getAABBdata(e,r,a,o,i,s,A),this.se.getAABBdata(e,r,a,o,i,s,A),this.sw.getAABBdata(e,r,a,o,i,s,A);else{A.push(this.x,this.y,this.width,this.height,this.indexes_I_XYWH_S.length/t.FST32_NODE_LOOP_BASE,this.cap,this.depth,this.maxDepth);for(var u=this.indexes_I_XYWH_S,l=u.length,c=0;c<l;c+=t.FST32_NODE_LOOP_BASE){var d=u[c];if(!i[d]){i[d]=!0;var p=u[c+1],f=u[c+2],h=u[c+3],v=u[c+4],g=u[c+5];s.push(d,p,f,h,v,g)}}}},e}();t.QuadTreeFastRect32Node=u;var l=function(){function e(e,t,r,a,n){void 0===a&&(a=8),void 0===n&&(n=!0),this.setup(e,t,r,a,n)}return e.prototype.queryShape=function(e){for(var t=Number.MAX_VALUE,a=Number.MIN_VALUE,n=Number.MAX_VALUE,o=Number.MIN_VALUE,i=e.length,s=0;s<i;s++){var A=e[s];A.x>a&&(a=A.x),A.x<t&&(t=A.x),A.y>o&&(o=A.y),A.y<n&&(n=A.y)}for(var u=new r.Rectangle(t,n,a-t,o-n),l=this.queryInt(u),c=l.length,d=0;d<c;d++)for(var p=l[d],f=new r.Rectangle(p.pos.x-p.radius,p.pos.y-p.radius,2*p.radius,2*p.radius).toPointArray(),h=0;h<4;h++){var v=f[h],g=(s=0,0),y=void 0;for(s=0,g=i-1;s<i;g=s++)e[s].y>v.y!=e[g].y>v.y&&v.x<(e[g].x-e[s].x)*(v.y-e[s].y)/(e[g].y-e[s].y)+e[s].x&&(y=!y);if(y)return[p]}return[]},e.prototype.queryRay=function(e,t){for(var r,n,o,i,s,A,u=Math.min(e.x,t.x),l=Math.min(e.y,t.y),c=Math.max(e.x,t.x)-u,d=Math.max(e.y,t.y)-l,p=this.___query(u,l,c,d),f=e.x,h=e.y,v=t.x,g=t.y,y=[],m=p.length,x=0;x<m;x++){var S=p[x],_=S.pos.x,T=S.pos.y,E=S.radius;a.LineIntersects(f,h,v,g,_-E,T-E,_+E,T-E)?y.push(S):a.LineIntersects(f,h,v,g,_+E,T-E,_+E,T+E)?y.push(S):a.LineIntersects(f,h,v,g,_-E,T+E,_+E,T+E)?y.push(S):a.LineIntersects(f,h,v,g,_-E,T-E,_-E,T+E)?y.push(S):(n=T,o=E,i=E,A=h,(r=_)>(s=f)||r+o<s||n>A||n+i<A||y.push(S))}return y},e.prototype.intersectTree=function(e){var t=[],r=this.itemType===e.itemType;return this.root.queryTree(e,t,r,{}),t},e.prototype.insertUnsafe=function(e,t){var r=e.radius,a=e.pos.x,n=e.pos.y,o=2*r,i=2*r;if(this.AABB_VEL){var s=e.vel.x*-t,A=e.vel.y*-t;s>0?o+=s:(a+=s,o-=s),A>0?i+=A:(n+=A,i-=A)}var u=a-r,l=n-r;this.REFERENCE_INDEX=this.references.push(e),this.root.insert(u,l,o,i,this.REFERENCE_INDEX-1,e.sleepingAABB?1:0)},e.prototype.insert=function(e,t){var r=this.rootRect,a=e.radius,o=e.pos.x,i=e.pos.y,s=2*a,A=2*a;if(this.AABB_VEL){var u=e.vel.x*-t,l=e.vel.y*-t;u>0?s+=u:(o+=u,s-=u),l>0?A+=l:(i+=l,A-=l)}var c=o-a,d=i-a;return!!n(r.x,r.y,r.width,r.height,c,d,s,A)&&(this.REFERENCE_INDEX=this.references.push(e),this.root.insert(c,d,s,A,this.REFERENCE_INDEX-1,e.sleepingAABB?1:0),!0)},e.prototype.query=function(e){var t=e.radius;return this.___query(e.pos.x-t,e.pos.y-t,2*t,t)},e.prototype.___query=function(e,t,r,a){var n=[],o=[];this.root.query(e,t,r,a,o,-1,{},!0,-1,-1,{});for(var i=o.length,s=0;s<i;s++)n.push(this.references[o[s]]);return n},e.prototype.___queryIndexes=function(e,t,r,a,n,o){var i=[];return this.root.query(e,t,r,a,i,n,o,!1,-1,-1,{}),i},e.prototype.queryCircle=function(e,t){var r=this.___query(e.x-t,e.y-t,2*t,2*t);if(0===r.length)return r;for(var a=.7*t,o=e.x-a,i=e.y-a,s=2*a,A=r.length,u=[],l=0;l<A;l++){var c=r[l];n(o,i,s,s,c.pos.x-c.radius,c.pos.y-c.radius,2*c.radius,2*c.radius)?u.push(c):(e.x-c.pos.x)*(e.x-c.pos.x)+(e.y-c.pos.y)*(e.y-c.pos.y)<t*t&&u.push(c)}return u},e.prototype.queryInt=function(e){return this.___query(e.x,e.y,e.width,e.height)},e.prototype.queryVec=function(e,t,r){return this.___query(e.x-t,e.y-r,2*t,2*r)},e.prototype.destroy=function(){this.reset(),this.root=void 0,this.references.length=0,this.references=void 0},e.prototype.reset=function(){!function(){if(i.length>3e3)for(var e=0;e<100;e++)i.pop()}(),this.references=[],this.REFERENCE_INDEX=0,this.root?(this.root.nw&&this.root.reset(),this.root.x=this.rootRect.x,this.root.y=this.rootRect.y,this.root.width=this.rootRect.width,this.root.height=this.rootRect.height,this.root.cap=this.cap*t.FST32_NODE_LOOP_BASE,this.root.maxDepth=this.maxDepth,this.root.depth=1,this.root.indexes_I_XYWH_S.length=0):this.root=new u(this.rootRect.x,this.rootRect.y,this.rootRect.width,this.rootRect.height,this.cap*t.FST32_NODE_LOOP_BASE,1,this.maxDepth)},e.prototype.setup=function(e,t,r,a,n){void 0===n&&(n=!1),this.rootRect=e,this.cap=t,this.itemType=r,a&&(this.maxDepth=a),this.AABB_VEL=n,this.reset(),this.boundry=new Int32Array([e.x,e.y,e.width,e.height])},e.prototype.getRangeType=function(){return"INT32 (FST)"},e.prototype.visualize=function(e,t,r,a,n,o,i){},e.prototype.getAABBdata_I_XYWH_S=function(e,t,r,a){var n=[],o=[];return this.root.getAABBdata(e,t,r,a,{},n,o),{aabb:n,nodes:o}},e}();t.QuadTreeFastRect32=l,n(0,0,10,10,5,5,10,10),n(5,5,10,10,0,0,10,10),n(11,11,5,5,0,0,10,10),n(0,0,10,10,11,11,5,5)}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(18),r(12),r(23),r(1),r(16),r(4),r(13),r(42)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFlameoutFlame=t.createFlame=t.createRamp=t.rampSize=void 0,t.rampSize=[];t.createRamp=function(e,t,r,a,n){for(var o=Math.abs(r-a),i=a>r,s=Math.min(r,a),A=1/t,u=0;u<t;u++){var l=s+o*A*u+(Math.random()-.5)*n;i||(l=1-l),l=Math.min(Math.max(r,a),l),l=Math.max(Math.min(r,a),l),e.push(l)}},t.createRamp(t.rampSize,25,.05,.1,.01),t.createRamp(t.rampSize,25,.1,.3,.04),t.createRamp(t.rampSize,25,.3,1,.08),t.createRamp(t.rampSize,25,1,0,.02),t.default=function(e){for(var t=e.game,o=e.WW,i=e.WH,s=e.step,A=t.flames.length,l=0;l<A;l++){var c=t.flames[l],d=s+2*Math.random();c.colorRamp+=s+2*Math.random(),u.DamgeItemFixedValue(c,d+s),c.colorRamp>=99?c.remove=!0:(c.vel.mult(c.friction),n.default(t,c,!1),r.default(c,s),a.shift(c,o,i))}return"flames"};t.createFlame=function(e,t,r){void 0===r&&(r=0);var a=new i.Vector(0,0);a.setLength(e.vel.getLength()+24+4*Math.random()),a.setAngle(e.angle+r+(Math.random()-.5)*Math.PI*.02);var n=A.getGuid();return o(o({},s.setImovableDefaults(null)),{pos:new i.Vector(e.pos.x+Math.cos(e.angle+r)*e.radius,e.pos.y+Math.sin(e.angle+r)*e.radius),mass:1,inv_m:.0010187862353965493,vel:a,guid:n,ownerGuid:e.guid,ownerType:e.type,colorRamp:0,radius:10,life:100,large:n%10==0,type:26,collType:21,friction:.95,collided:!1,armor:null,damage:t.damage})};t.createFlameoutFlame=function(e,t,r,a,n,u,c){var d=new i.Vector(0,0);d.setLength(n.getLength()+2+3*Math.random()),d.setAngle(a+(Math.random()-.5)*Math.PI*.02);var p=new i.Vector(t,r),f=A.getGuid();return o(o({},s.setImovableDefaults(null)),{pos:p,vel:d,guid:f,mass:1,inv_m:.0010187862353965493,ownerGuid:u,ownerType:c,colorRamp:0,radius:10,life:100,large:f%10==0,type:26,collType:21,friction:.95,collided:!1,armor:null,damage:l.flameoutDamageData})}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(10),r(181),r(17)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pool_log=t.pool_get=t.pool_put=void 0;var o={},i={};i[25]=10,i[48]=10,i[20]=10,i[28]=10,o[25]=[],o[48]=[],o[20]=[],o[28]=[];var s=0;t.pool_put=function(e,t){o[e],o[e].push(t)};t.pool_get=function(e){var t=o[e];return t.length>0?t.pop():(function(e){s=e;for(var t=i[e],r=0;r<t;r++)o[e].push(a.struct(e));i[e]=t+10}(e),t.pop())};t.pool_log=function(){for(var e in o)r.LOG_GL_FIXED_FORCED("F/R: "+i[e]+" | "+o[e].length,n.TypesToString(parseInt(e,10)));r.LOG_GL_FIXED_FORCED(n.TypesToString(s),"LAST FILLED")}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(15)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawExternal=void 0;var i=[];t.drawExternal=function(e){var t,r,a,n;if(e.autoSXSY)for(var s=o.default().engine,A=s.SX,u=s.SY,l=0;l<e.polys.length;l+=2)e.polys[l]-=A,e.polys[l+1]-=u;e.r=null!==(t=e.r)&&void 0!==t?t:1,e.g=null!==(r=e.g)&&void 0!==r?r:1,e.b=null!==(a=e.b)&&void 0!==a?a:1,e.a=null!==(n=e.a)&&void 0!==n?n:1,i.push(e)},t.default=function(e){var t=e.gl,o=i.length;if(o>0){n.default(a.GLctx.Vertices,t);for(var s=0;s<o;s++){var A=i[s];if(r.drawColor(A.polys,t,A.r,A.g,A.b,A.a,A.mode),A.halt)throw"halting @ draw external"}i=[]}return"DrawExternalGL"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setGlobalGL=void 0;var r={global_gl:null};t.default=function(){return r};t.setGlobalGL=function(e){r.global_gl=e}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(1)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hexBox=void 0;var a={};t.hexBox=function(e,t,r,o){var s=a[e];if(s)return n(s,t,r,o);var A=i(e);return a[e]=A,n(A,t,r,o)};var n=function(e,t,r,a){for(var n=!0,o=[],i=0;i<3;i++){for(var s=[],A=0;A<12;A++){var u=e[i][A];u+=n?t.x-r:t.y-a,s.push(u),n=!n}o.push(s)}return o},o=function(e,t){var a=new r.Vector(0,0);return a.setLength(e),a.setAngle(t),a},i=function(e){var t=-.5*Math.PI,r=.5*Math.PI,a=o(e,t),n=o(e,t-60*Math.PI/180),i=o(e,t-120*Math.PI/180),s=o(e,r),A=o(e,r-60*Math.PI/180),u=o(e,r-120*Math.PI/180);return[[0,0,n.x,n.y,a.x,a.y,0,0,u.x,u.y,a.x,a.y],[0,0,n.x,n.y,i.x,i.y,0,0,i.x,i.y,s.x,s.y],[0,0,u.x,u.y,A.x,A.y,0,0,A.x,A.y,s.x,s.y]]}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(2),r(1),r(11),r(6),r(91),r(3)],void 0===(n=function(e,t,r,a,n,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetShipPartComplex=t.vectorsToVertices=void 0;var u=new a.Vector(0,0),l=new a.Vector(0,0);t.vectorsToVertices=function(e,t,r,a,n,o,s){void 0===o&&(o=0),void 0===s&&(s=-1);for(var A=e.length,c=[],d=0;d<A;d++){var p=t[e[d]];l.set(p.x,p.y),d===s&&l.mult(o);var f=i.rotateVector(l,n,u),h=f.x+r,v=f.y+a;c.push(h,v)}return c};t.default=function(e,a,o,u,l,c,d,p){void 0===p&&(p=0);var f=a.abilities.active.cloak>0,h=d||(f?{r:.01,b:.1,g:.1}:n.ShipColors[a.colorIndex]),v=a.life>A.PLAYER_LIFE_LOW_THRESHOLD?0:1-i.map(a.life,0,A.PLAYER_LIFE_LOW_THRESHOLD,0,1),g=s.default((p||(49===a.type?1:2))*e,!1,v),y=g.leftWing,m=g.rightWing,x=g.hood,S=g.cockpitGlass,_=g.roof,T=g.baseWingIndexes,E=g.endWingIndexes,M=g.hoodIndexes,I=g.cockpitglassIndexes,L=g.roofIndexes,w=f?0:-.2,b=f?0:-.4,P=f?0:-.7,R=a.angle+.5*Math.PI,O=(a.pos.x-o)*e,C=(a.pos.y-u)*e,G=t.vectorsToVertices(T,m,O,C,R),D=t.vectorsToVertices(E,m,O,C,R),N=t.vectorsToVertices(T,y,O,C,R),B=t.vectorsToVertices(E,y,O,C,R),F=t.vectorsToVertices(M,x,O,C,R),V=t.vectorsToVertices(L,_,O,C,R),k=t.vectorsToVertices(I,S,O,C,R);return l.push.apply(l,k),r.addToColorMap(c,l,h.r+P,h.g+P,h.b+P,1),l.push.apply(l,F),r.addToColorMap(c,l,h.r+b,h.g+b,h.b+b,1),l.push.apply(l,V),r.addToColorMap(c,l,h.r,h.g,h.b,1),l.push.apply(l,G),l.push.apply(l,N),r.addToColorMap(c,l,h.r,h.g,h.b,1),l.push.apply(l,D),l.push.apply(l,B),r.addToColorMap(c,l,h.r+w,h.g+w,h.b+w,1),"ShipShape"};t.GetShipPartComplex=function(e,r,a,n,u,l){void 0===l&&(l=0);var c=r.life>A.PLAYER_LIFE_LOW_THRESHOLD?0:1-i.map(r.life,0,A.PLAYER_LIFE_LOW_THRESHOLD,0,1),d=s.default((l||(49===r.type?1:2))*e,!1,c),p=d.leftWing,f=d.rightWing,h=d.hood,v=d.cockpitGlass,g=d.roof,y=d.baseWingIndexes,m=(d.endWingIndexes,d.hoodIndexes),x=d.cockpitglassIndexes,S=d.roofIndexes,_=r.angle+.5*Math.PI,T=(r.pos.x-a)*e,E=(r.pos.y-n)*e;switch(u){case 1:return o([],t.vectorsToVertices(y,f,T,E,_));case 0:return o([],t.vectorsToVertices(y,p,T,E,_));case 2:return t.vectorsToVertices(m,h,T,E,_);case 4:return t.vectorsToVertices(S,g,T,E,_);case 3:return t.vectorsToVertices(x,v,T,E,_);case 5:return o(o(o(o(o([],t.vectorsToVertices(y,f,T,E,_)),t.vectorsToVertices(y,p,T,E,_)),t.vectorsToVertices(m,h,T,E,_)),t.vectorsToVertices(S,g,T,E,_)),t.vectorsToVertices(x,v,T,E,_))}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onStage=t.blockCircleRGBA=t.lineVerticalRGBADash=t.lineHorizontalRGBADash=t.line2=t.fillRGBA=t.distort=t.setRGBA=void 0;var r=2*Math.PI;t.setRGBA=function(e,t,r,a,n,o,i,s){if(!(t>e||t<0)){var A=Math.floor(r)*e*4+4*Math.floor(t);s[A]=a,s[A+1]=n,s[A+2]=o,s[A+3]=i}};t.distort=function(e,t,r,a){for(var n=Math.floor(r),o=Math.floor(t),i=n-o,s=[],A=0;A<i;A++)s.push(4*Math.round(-4*A*A*Math.random()*.001)+4);for(var u=0,l=o;l<n;l+=2){var c=s[u];u++;var d=Math.floor(l)*e*4+400,p=Math.floor(l)*e*4+4*Math.floor(e-400);for(A=d;A<p;A+=8)a[A+c]=a[A],a[A+1+c]=a[A+1],a[A+2+c]=a[A+2],a[A+3+c]=a[A+3],Math.random()>.9&&(a[A+e]=a[A],a[A+1+e]=a[A+1],a[A+2+e]=a[A+2],a[A+3+e]=a[A+3])}};t.fillRGBA=function(e,r,a,n,o,i,s,A,u,l,c,d){void 0===c&&(c=0),void 0===d&&(d=0);for(var p=0;p<n;p++)for(var f=0;f<o;f++)t.setRGBA(e,r+p+c,a+f+d,i,s,A,u,l)};t.line2=function(e,r,a,n,o,i,s,A,u,l,c){void 0===c&&(c=1),function(r,a,n,o){for(var d=Math.abs(n-r),p=Math.abs(o-a),f=r<n?1:-1,h=a<o?1:-1,v=d-p;;){if(c>1){t.setRGBA(e,r,a,i,s,A,u,l);for(var g=0;g<c;g++)t.setRGBA(e,r+g,a,i,s,A,u,l),t.setRGBA(e,r,a+g,i,s,A,u,l)}else t.setRGBA(e,r,a,i,s,A,u,l);if(r==n&&a==o)break;var y=2*v;y>-p&&(v-=p,r+=f),y<d&&(v+=d,a+=h)}}(Math.floor(r),Math.floor(a),Math.floor(n),Math.floor(o))};t.lineHorizontalRGBADash=function(e,r,a,n,o,i,s,A,u,l,c,d,p){void 0===l&&(l=1),void 0===c&&(c=0),void 0===d&&(d=0),void 0===p&&(p=0);for(var f=0,h=r-c;h<n-p;h++)if(++f<=c){if(h+p>r)for(var v=0;v<l;v++)t.setRGBA(e,h+p,a+v,o,i,s,A,u)}else f>c+d&&(f=0)};t.lineVerticalRGBADash=function(e,r,a,n,o,i,s,A,u,l,c,d,p){void 0===l&&(l=1),void 0===c&&(c=0),void 0===d&&(d=0),void 0===p&&(p=0);for(var f=0,h=a-c;h<n-p;h++)if(++f<c){if(h+p>a)for(var v=0;v<l;v++)t.setRGBA(e,r+v,h+p,o,i,s,A,u)}else f>c+d&&(f=0)};t.blockCircleRGBA=function(e,a,n,o,i,s,A,u,l,c,d,p,f,h,v,g,y,m,x,S){var _,T,E,M;void 0===p&&(p=0),void 0===f&&(f=0),void 0===h&&(h=0),void 0===y&&(y=0),void 0===m&&(m=e),void 0===x&&(x=0),void 0===S&&(S=e);var I=e;for(_=n+Math.cos(r*(I/e)+i)*a>>0,T=o+Math.sin(r*(I/e)+i)*a>>0,E=0,M=0;I>-1;--I)E=n+Math.cos(r*(I/e)+i)*a>>0,M=o+Math.sin(r*(I/e)+i)*a>>0,g&&I%2!=1||!(I>=y&&I<=m||I>=x&&I<=S)||t.line2(d,_-f,T-h,E-f,M-h,A,u,l,c,s,v||(a>40?6:2)),_=E,T=M};t.onStage=function(e,t,r,a){void 0===a&&(a=0);var n=e.SX,o=e.SY,i=e.SW,s=e.SH;return t>n-a&&t<n+i+a&&r>o-a&&r<o+s+a}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(1),r(4),r(7),r(5),r(14),r(6),r(24),r(66),r(17),r(47)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFragmentBlack=t.getFragmentBlackTree=void 0;new r.Vector(0,0);var d=n.rect_pool_pop(0,0,0,0),p=new c.QuadTreeFastPoint32(n.rect_pool_pop(0,0,10,10),5,39);t.getFragmentBlackTree=function(){return p},t.default=function(e){var t=e.game,r=e.step;e.SW,e.SH,e.SX,e.SY;u.schedule("fragmentsBlack",function(e){for(var t=e.game.fragmentsBlack,r=t.length,a=[],n=0;n<r;n++){var o=t[n];o.remove||a.push(o)}e.game.fragmentsBlack=a},30);for(var n,c=o.getQuadTreesObj(),f=t.screen.rectSS_800,h=t.screen.rectSS_600,v=h.x,g=h.y,y=h.width,m=h.height,x=t.fragmentsBlack,S=x.length,_=[],T=v+y,E=g+m,M=0;M<S;M++){var I=(B=x[M]).pos.x,L=B.pos.y;!B.remove&&I>v&&L>g&&I<T&&L<E&&_.push(B)}n=_.length,p.reset();p.setup(f,50,39,2);for(M=0;M<n;M++)p.insertUnsafe(_[M]);var w=_,b=w.length,P=c.queryTreesRect(l.PUSHING_TYPES,h),R=P.length;for(M=0;M<R;M++){var O=P[M];if(!O.remove){var C=O.radius;if(44===O.type&&(C=2*O.originalRadius),d.x=O.pos.x-C,d.y=O.pos.y-C,d.width=2*C,d.height=2*C,0===O.type||44===O.type)for(var G=(k=p.queryVec(O.pos,O.radius,O.radius)).length,D=0===O.type?3:.6,N=0;N<G;N+=2){var B=k[N];if(a.fine(3,O.comp[0].vertex,B.pos)){var F=Math.atan2(O.pos.y-B.pos.y,O.pos.x-B.pos.x);if(Math.random()>.2)B.remove=!0,A.createDust(B.pos,12*Math.random()+8,6*Math.random()+3,e,B.vel.x,B.vel.y);else{B.vel.setAngle(F+Math.PI),B.vel.setLength(D+Math.random());var V=.3*Math.random();B.rot=N%2==0?V:-V}}}else{var k;for(G=(k=p.queryCircle(O.pos,O.radius)).length,N=0;N<G;N+=2){B=k[N];if(Math.random()>.5)B.remove=!0,A.createDust(B.pos,12*Math.random()+8,6*Math.random()+3,e,B.vel.x,B.vel.y);else{F=Math.atan2(O.pos.y-B.pos.y,O.pos.x-B.pos.x);B.vel.setAngle(F+Math.PI),B.vel.setLength(1+Math.random())}}}}}i.FastForce2CachedReversed(p,h);for(M=0;M<b;M++){var X=(B=w[M]).vel,H=X.x*r,U=X.y*r;if(B.pos.x+=H,B.pos.y+=U,X.x*=.98,X.y*=.98,B.rot*=.95,0!==B.rot)for(N=0;N<3;N++)s.rotateVector(B.triangle[N],B.rot,B.triangle[N]);else Math.abs(B.rot)<.002&&(B.rot=0)}return"fragments-black"};var f=0;t.createFragmentBlack=function(e,t,a,n,o,i){void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0);var A=t.game.fragmentsBlack,u=A.length>5e3?f:-1;if(0!==i){for(var l=0;l<3;l++)s.rotateVector(a[l],i,a[l]);i=0}if(u>=0){var c=A[u];c.pos.x=e.x,c.pos.y=e.y,c.vel.x=n,c.vel.y=o,c.rot=i,c.triangle=a}else{var d={pos:new r.Vector(e.x,e.y),vel:new r.Vector(n,o),remove:!1,triangle:a,rot:i};A.push(d)}u>=0&&++u>4999&&(u=0),u>=0&&(f=u)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleOnce=t.schedule=t.resetScheduler=t.runScheduler=void 0;var r={},a={};t.runScheduler=function(e){for(var t in r){var n=r[t];e.frameCnt%n.frame==0&&n.fn(e)}var o=performance.now();for(var t in a){var i=a[t];o>=i.time&&(i.fn(e),delete a[t])}return"run-scheduler"};t.resetScheduler=function(){for(var e in r)delete r[e];for(var e in a)delete a[e]};t.schedule=function(e,t,a){r[e]||(r[e]={frame:a,fn:t})};t.scheduleOnce=function(e,t,r){a[e]||(a[e]={time:performance.now()+r,fn:t})}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.operatorAtan2=t.OperatorSqrt99=t.OperatorApproxDist96=t.OperatorApproxDist97=t.getOperatorUsage=void 0;var r=0,a=0;t.getOperatorUsage=function(){var e={dist97:r,dist96:a};return r=0,a=0,e};t.OperatorApproxDist97=function(e,t){var a,n,o;return r++,e<0&&(e=-e),t<0&&(t=-t),e<t?(a=e,n=t):(a=t,n=e),o=1007*n+441*a,n<a<<4&&(o-=40*n),o+512>>10};t.OperatorApproxDist96=function(e,t){var r,n;return a++,e<0&&(e=-e),t<0&&(t=-t),e<t?(r=e,n=t):(r=t,n=e),(n<<8)+(n<<3)-(n<<4)-(n<<1)+(r<<7)-(r<<5)+(r<<3)-(r<<1)>>8};var n=new ArrayBuffer(Float32Array.BYTES_PER_ELEMENT),o=new Float32Array(n),i=new Uint32Array(n);t.OperatorSqrt99=function(e){var t=.5*e;o[0]=e,i[0]=1597463007-(i[0]>>1);var r=o[0];return r*=1.5-t*r*r};t.operatorAtan2=function(e,t){var r=(1-(e<0)|0)<<1,a=e*r+2.220446049250313e-16,n=(t<0|0)<<1,o=1-n;return(.7853981634*(n+1)+(.1821*(a=(t-o*a)/(o*t+a))*a-.9675)*a)*r*.25}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetPlayerByGuidOrNull=t.GetPlayerByGuidOrEmptyArray=void 0;t.GetPlayerByGuidOrEmptyArray=function(e,t){var r=t.game.playerGuidHash[e];return r?[r]:[]};t.GetPlayerByGuidOrNull=function(e,t){return t.game.playerGuidHash[e]};t.default=function(e){var t=e.game.player,r=t.length,a=e.game;a.playerGuidHash={};for(var n=0;n<r;n++){var o=t[n];a.playerGuidHash[o.guid]=o}return"playerGuidHash"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(1),r(12),r(18),r(46),r(4),r(3),r(5),r(7),r(47),r(24),r(13)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParasiteTree=t.getShipLayoutIDX=void 0;var p=new r.Vector(0,0);t.getShipLayoutIDX=function(){var e=Math.random();return e>.66?[0,1]:e>.33?[1,2]:[0,2]};var f=new l.QuadTreeFastPoint32(u.rect_pool_pop(0,0,0,0),5,38);t.getParasiteTree=function(){return f},t.default=function(e){var r=e.game,l=e.WW,v=e.WH,g=e.step,y=A.getQuadTreesObj();if(y.All&&!r.settings_be_the_snake_mode){var m=e.game.parasites,x=m.length;f.reset(),r.IS_PROCEDURAL?f.setup(r.proceduralBounds,5,38):f.setup(new u.Rectangle(0,0,l,v),5,38);for(var S=[],_=0;_<x;_++){(T=m[_]).segments.length>1&&!T.remove&&S.push(T)}e.game.parasites=m=S,x=S.length;for(_=0;_<x;_++){var T,E=(T=m[_]).segments[T.segments.length-1];E||(console.log("PARASITE ERROR"),console.log(JSON.stringify(T)),console.log(T));var M=E.pos;if(T.pos.setFromVec(M),f.insert(T),d.DamgeItemFixedValue(T,g),T.life<100){if(T.target&&T.target.ship.guid===e.game.playerGuid&&(!e.IS_MULTIPLAYER||e.IS_SERVER)){var I={life:s.NOTIFICATION_LIFE,type:72,message:"PARASITE DETACHED FROM SHIP"};r.notifications.unshift(I)}T.target=null}T.life<-500&&T.segments.pop();var L=o.default(T,M,50,600,[1,44,49]);if(T.life>100&&!T.target&&L.targetIsIM&&i.distanceBetweenVectors(L.targetPos,E.pos)<20){var w=t.getShipLayoutIDX();if(d.LifeIncreaseFixedValue(T,500+500*Math.random()),T.target={ship:L.target,valueBetween:Math.random(),idxA:w[0],idxB:w[1]},L.target.guid===e.game.playerGuid&&(!e.IS_MULTIPLAYER||e.IS_SERVER)){I={life:s.NOTIFICATION_LIFE,type:71,message:"PARASITE ATTACHED TO SHIP"};r.notifications.unshift(I)}}if(T.target){var b=T.target.ship;if(b.life<1){T.target=null;continue}b.life>5?d.DamgeItemFixedValue(b,.05*g):L.targetPos=T.restPos,b.vel.x*=.98,b.vel.y*=.98,b.turnAcc*=.9;var P=b.comp[0].vertex,R=T.target.idxA,O=T.target.idxB,C=i.midpoint(P[R],P[O],T.target.valueBetween);E.pos.set(C.x,C.y)}else{T.life<100&&(L.targetPos=T.restPos),T.targetShift>100?T.tsValue=-g:T.targetShift<-100&&(T.tsValue=g),T.targetShift+=T.tsValue*g*12;var G=Math.atan2(L.targetPos.y-E.pos.y,L.targetPos.x-E.pos.x);p.set(T.targetShift,0),p.setAngle((T.targetShift>0?.5*Math.PI:-.5*Math.PI)+G);var D=Math.atan2(L.targetPos.y+p.y-E.pos.y,L.targetPos.x+p.x-E.pos.x);E.vel.addXY(.1,.1),E.vel.setAngle(L.targetIsIM?D:G),L.targetIsIM||(p.mult(.05),E.vel.add(p)),T.life<90?E.vel.getLength()>7&&E.vel.setLength(7):E.vel.getLength()>3&&E.vel.setLength(3),E.offsetFront.setAngle(G),E.offsetRear.setAngle(G-Math.PI),n.default(E,g)}if(y.queryTreesVec([26],T.pos,10,10,!0).length>0){T.remove=!0;for(var N=0;N<T.segments.length;N++){var B=T.segments[N];c.createDust(B.pos,1,0,e,0,0)}}h(T.segments),a.shift(E,l,v)}return"parasite"}};var h=function(e){for(var t=e.length-1;t>0;t--){var r=e[t];v(e[t-1],r)}};function v(e,t){var r=2*e.radius,a=e.pos.x-t.pos.x,n=e.pos.y-t.pos.y,o=Math.atan2(n,a);e.pos.x=t.pos.x+Math.cos(o)*r,e.pos.y=t.pos.y+Math.sin(o)*r,e.angle=o,e.offsetFront.setAngle(o),e.offsetRear.setAngle(o-Math.PI)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupFrameBufferMulti=t.setTargetToCanvasMulti=t.renderFrameBufferMultiCombine=t.renderFrameBufferMulti=t.renderTextureToBufferMulti=t.setTargetToFrameBufferMulti=t.GetTextureFromFBMulti=void 0;var n=[],o=[],i=0,s=0,A={},u=function(e,t){var r=A[e+"_"+t];if(r)return r;var a=window.m4,n=a.orthographic(0,e,t,0,-1,1);return n=a.translate(n,0,t,0),n=a.scale(n,e,-t,1),A[e+"_"+t]=n,n};t.GetTextureFromFBMulti=function(e){return n[e]};t.setTargetToFrameBufferMulti=function(e,t,r,a){var n=e.gl;e.game;n.bindFramebuffer(n.FRAMEBUFFER,o[t]),n.viewport(0,0,r,a),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),i=r,s=a};t.renderTextureToBufferMulti=function(e,t,A,l,c,d,p,f){void 0===l&&(l=r.GLctx.Texture),void 0===c&&(c=0),void 0===d&&(d=0),void 0===p&&(p=e.canvas.width),void 0===f&&(f=e.canvas.height);var h=r.default(l,e);switch(e.bindFramebuffer(e.FRAMEBUFFER,o[t]),e.viewport(c,d,p,f),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),i=p,s=f,e.useProgram(h),l){case r.GLctx.TextureBlur:var v=a.GLUniformLocation(e,"u_textureSize");e.uniform2f(v,1,1)}e.activeTexture(e.TEXTURE0+A),e.bindTexture(e.TEXTURE_2D,n[A]);var g=a.GLAttribLocations(e,"a_texcoord"),y=a.GLUniformLocation(e,"u_matrix"),m=a.GLUniformLocation(e,"u_texture");e.enableVertexAttribArray(g),e.vertexAttribPointer(g,2,e.FLOAT,!1,0,0);var x=u(i,s);e.uniformMatrix4fv(y,!1,x),e.uniform1i(m,A),e.drawArrays(e.TRIANGLES,0,6)};t.renderFrameBufferMulti=function(e,t,o,A,l,c,d){void 0===A&&(A=0),void 0===l&&(l=0),void 0===c&&(c=e.canvas.width),void 0===d&&(d=e.canvas.height);var p=r.default(t,e);switch(e.bindFramebuffer(e.FRAMEBUFFER,null),e.useProgram(p),t){case r.GLctx.TextureBlur:var f=a.GLUniformLocation(e,"u_textureSize");e.uniform2f(f,1,1)}e.activeTexture(e.TEXTURE0+o),e.bindTexture(e.TEXTURE_2D,n[o]),e.viewport(A,l,c,d);var h=a.GLAttribLocations(e,"a_texcoord"),v=a.GLUniformLocation(e,"u_matrix"),g=a.GLUniformLocation(e,"u_texture");window.m4;e.enableVertexAttribArray(h),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0);var y=u(i,s);e.uniformMatrix4fv(v,!1,y),e.uniform1i(g,o),e.drawArrays(e.TRIANGLES,0,6)};t.renderFrameBufferMultiCombine=function(e,t,r,o,A,l,c,d){void 0===A&&(A=0),void 0===l&&(l=0),void 0===c&&(c=e.canvas.width),void 0===d&&(d=e.canvas.height),e.bindFramebuffer(e.FRAMEBUFFER,null),e.useProgram(t),e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,n[r]),e.activeTexture(e.TEXTURE0+o),e.bindTexture(e.TEXTURE_2D,n[o]),e.viewport(A,l,c,d);var p=a.GLAttribLocations(e,"a_texcoord"),f=a.GLUniformLocation(e,"u_matrix"),h=a.GLUniformLocation(e,"u_texture"),v=a.GLUniformLocation(e,"u_texture_b");window.m4;e.enableVertexAttribArray(p),e.vertexAttribPointer(p,2,e.FLOAT,!1,0,0);var g=u(i,s);e.uniformMatrix4fv(f,!1,g),e.uniform1i(h,r),e.uniform1i(v,o),e.drawArrays(e.TRIANGLES,0,6)};t.setTargetToCanvasMulti=function(e){e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,e.canvas.width,e.canvas.height)};t.setupFrameBufferMulti=function(e,t,r,a){i=r,s=a;var A=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,A);var u=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,u);var l=n[t]||e.createTexture();n[t]=l,e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,l);var c=e.RGBA,d=e.RGBA,p=e.UNSIGNED_BYTE;e.texImage2D(e.TEXTURE_2D,0,c,r,a,0,d,p,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);var f=o[t]||e.createFramebuffer();o[t]=f,e.bindFramebuffer(e.FRAMEBUFFER,f);var h=e.COLOR_ATTACHMENT0;e.framebufferTexture2D(e.FRAMEBUFFER,h,e.TEXTURE_2D,l,0)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(3),r(1),r(4),r(16),r(2),r(120)],void 0===(n=function(e,t,r,a,n,i,s,A){"use strict";var u;Object.defineProperty(t,"__esModule",{value:!0});var l=((u={})[4]=23,u[35]=36,u[9]=37,u);t.default=function(e,t,u){void 0===u&&(u=1);var c=e,d=c.sides,p=l[e.type],f=c.radius;if(4===e.type&&f>20){var h=[],v=c;s.blockCirclePoly(v.sides,v.radius*(v.radius>100?.5:.6),v.pos.x,v.pos.y,v.angle,h,0,0,0,Math.max(4,.22*v.radius));for(var g=new a.Vector(5,0),y=0;y<h.length;y+=6){var m=h[y],x=h[y+1],S=Math.atan2(x-v.pos.y,m-v.pos.x);g.setAngle(S),A.createFragmentsFromTriangle(t,[{x:h[y],y:h[y+1]},{x:h[y+2],y:h[y+3]},{x:h[y+4],y:h[y+5]}],Math.min(Math.ceil(v.radius/80),2),v,g)}}else{var _=c.angle,T=d;d=f<20?3:d;for(var E=Math.cos(r.doublePI*(d/T)+_)*f>>0,M=Math.sin(r.doublePI*(d/T)+_)*f>>0,I=0,L=0,w=new a.Vector(0,0),b=25+25*Math.random();d>-1;--d){I=Math.cos(r.doublePI*(d/T)+_)*f>>0,L=Math.sin(r.doublePI*(d/T)+_)*f>>0;var P=new a.Vector(I+c.pos.x,L+c.pos.y),R=new a.Vector(E+c.pos.x,M+c.pos.y),O=n.distanceBetweenVectors(P,R),C=Math.atan2(P.y-R.y,P.x-R.x),G=Math.atan2(c.pos.y-R.y,c.pos.x-R.x);w.set(0,0),w.setLength(O),w.setAngle(C);var D=O>b?Math.ceil(O/b):1,N=O/D*.5;for(y=0;y<D;y++){var B=y/D,F=new a.Vector(0,0);F.setLength(B+N),F.setAngle(C),F.add(P);var V=new a.Vector(0,0);V.setAngle(C),V.setLength(N);var k=new a.Vector(0,0);k.setAngle(C-Math.PI),k.setLength(N);var X=new a.Vector(I*Math.random()-.5*u,L*Math.random()-.5*u),H=o(o({fromType:e.type,edgeA:V,edgeB:k,rotatedEdgeA:new a.Vector(0,0),rotatedEdgeB:new a.Vector(0,0),colorFade:255,complexPartIndices:null,complexPartVectors:null,pos:F,angle:G,angleVel:.01*Math.random()-.005,vel:X.clone(),guid:n.getGuid(),type:p,collType:25,life:100+50*Math.random(),radius:.05*c.radius,width:12*Math.min(30,Math.max(.01*c.radius),4)},i.setImovableDefaults(null)),{armor:null});t.game.asteroidParts.push(H)}E=I,M=L}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(10)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.upgradeWeapon=t.upgradeAbility=t.damageArmorMap=t.ArmorTypeToString=t.DamageTypeToString=void 0;t.DamageTypeToString=function(e){switch(e){case 2:return"Chaos";case 0:return"Fire";case 5:return"Melee";case 1:return"Piercing";case 3:case 4:return"Stun"}};t.ArmorTypeToString=function(e){switch(e){case 0:return"Biological";case 1:return"Forcefield";case 3:return"Massive";case 3:return"Mechanical";case 4:return"Rock";case 5:return"Ice";case 6:return"Adamant"}},t.damageArmorMap=[];!function(){for(var e=0;e<6;e++)t.damageArmorMap.push([]);t.damageArmorMap[0][0]=1,t.damageArmorMap[0][1]=.1,t.damageArmorMap[0][2]=.8,t.damageArmorMap[0][3]=.2,t.damageArmorMap[0][4]=.1,t.damageArmorMap[0][5]=3,t.damageArmorMap[0][6]=0,t.damageArmorMap[1][0]=.8,t.damageArmorMap[1][1]=.2,t.damageArmorMap[1][2]=.4,t.damageArmorMap[1][3]=.3,t.damageArmorMap[1][4]=1,t.damageArmorMap[1][5]=1.2,t.damageArmorMap[1][6]=0,t.damageArmorMap[2][0]=1,t.damageArmorMap[2][1]=1,t.damageArmorMap[2][2]=1,t.damageArmorMap[2][3]=1,t.damageArmorMap[2][4]=2.2,t.damageArmorMap[2][5]=2.2,t.damageArmorMap[2][6]=0,t.damageArmorMap[3][0]=1,t.damageArmorMap[3][1]=.1,t.damageArmorMap[3][2]=.5,t.damageArmorMap[3][3]=.2,t.damageArmorMap[3][4]=0,t.damageArmorMap[3][5]=0,t.damageArmorMap[3][6]=0,t.damageArmorMap[5][0]=1,t.damageArmorMap[5][1]=.7,t.damageArmorMap[5][2]=.9,t.damageArmorMap[5][3]=.8,t.damageArmorMap[5][4]=0,t.damageArmorMap[5][5]=0,t.damageArmorMap[5][6]=0,t.damageArmorMap[4][0]=1.5,t.damageArmorMap[4][1]=.1,t.damageArmorMap[4][2]=.7,t.damageArmorMap[4][3]=.4,t.damageArmorMap[4][4]=.3,t.damageArmorMap[4][5]=.4,t.damageArmorMap[4][6]=0}();t.upgradeAbility=function(e,t){t.range&&(e.range.value*=t.range),t.time&&(e.time.value*=t.time),t.value&&(e.value.n*=t.value)};t.upgradeWeapon=function(e,t){for(var a in t){var n=t[a];for(var o in n){var i=e[a][o],s=i*n[o];e[a][o]=s,r.LOG_GL(e.name+": "+a+"/"+o+" from "+Math.round(10*i)/10+" to "+Math.round(10*s)/10)}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(67)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSightPolygon=t.getUniqueAngles=t.getUnigquePointsFromPairs=t.getPairIntersection=t.pairToPolys=t.polysToPair=t.getRayCasterTimings=void 0;t.getRayCasterTimings=function(e){var t=[];return t.push(a.angles*e),t.push(a.angles2*e),function(){for(var e in a)a[e]=0}(),t};var a={total:0,polysToPair:0,pairToPolys:0,interSectionNew:0,interSection:0,raycasting:0,setup:0,filtering:0,uniqe:0,uniqe2:0,angles:0,angles2:0,sorting:0};t.polysToPair=function(e){for(var t=e.length,r=[],a=0;a<t;a+=4)r.push({a:{x:e[a],y:e[a+1]},b:{x:e[a+2],y:e[a+3]}});return r};t.pairToPolys=function(e){for(var t=e.length,r=[],a=0;a<t;a++){var n=e[a];r.push(n.x,n.y)}return r};t.getPairIntersection=function(e,t){var a=e.a.x,n=e.a.y,o=e.b.x-e.a.x,i=e.b.y-e.a.y,s=t.a.x,A=t.a.y,u=t.b.x-t.a.x,l=t.b.y-t.a.y,c=r.OperatorApproxDist97(o,i),d=r.OperatorApproxDist97(u,l);if(o/c==u/d&&i/c==l/d)return null;var p=(o*(A-n)+i*(a-s))/(u*i-l*o);if(p<0||p>1)return null;var f=(s+u*p-a)/o;return f<0?null:{x:a+o*f,y:n+i*f,param:f,guid:t.guid}};t.getUnigquePointsFromPairs=function(e){for(var t=performance.now(),r=[],n={},o=e.length,i=0;i<o;i++){var s=e[i],A=s.a.x/s.a.y;n[A]||(r.push(s.a),n[A]=!0);var u=s.b.x/s.b.y;n[u]||(r.push(s.b),n[u]=!0)}return a.uniqe+=performance.now()-t,r};t.getUniqueAngles=function(e,t,r){for(var n=performance.now(),o=[],i=e.length,s=0;s<i;s++){var A=e[s],u=Math.atan2(A.y-r,A.x-t);A.angle=u,o.push(u-1e-5,u+1e-5)}return a.angles+=performance.now()-n,o};t.getSightPolygon=function(e,r,n){var o=t.getUnigquePointsFromPairs(n),i=performance.now(),s=t.getUniqueAngles(o,e,r);i=performance.now();for(var A=[],u=s.length,l=0;l<u;l++){var c=s[l],d={a:{x:e,y:r},b:{x:e+Math.cos(c),y:r+Math.sin(c)},angle:c};A.push(d)}for(var p=[],f=1.01*r,h=.99*r,v=1.01*e,g=.99*e,y=[],m=[],x=[],S=[],_=performance.now(),T=0;T<n.length;T++){var E=n[T],M=E.a.y>f,I=E.b.y>f,L=E.a.y<h,w=E.b.y<h,b=E.a.x>v,P=E.b.x>v,R=E.a.x<g,O=E.b.x<g;M&&I&&R&&O?x.push(E):M&&I&&b&&P?S.push(E):L&&w&&R&&O?y.push(E):L&&w&&b&&P?m.push(E):M&&I?(x.push(E),S.push(E)):L&&w?(y.push(E),m.push(E)):b&&P?(S.push(E),m.push(E)):R&&O?(x.push(E),y.push(E)):(x.push(E),S.push(E),y.push(E),m.push(E))}a.sorting+=performance.now()-_;var C=[];for(l=0;l<u;l++){var G=null,D=(C=(c=(d=A[l]).angle)<-.5*Math.PI?y:c<0?m:c<.5*Math.PI?S:x).length;for(T=0;T<D;T++){var N=t.getPairIntersection(d,C[T]);N&&(!G||N.param<G.param)&&(G=N)}G&&(G.angle=c,p.push(G))}a.interSectionNew+=performance.now()-i,i=performance.now();for(var B=[],F=0;F<p.length;F++){for(var V=p[F],k=!0,X=F;X<p.length;X++){var H=p[X];if(F!=X&&Math.abs(V.x-H.x)<2&&Math.abs(V.y-H.y)<2){k=!1;break}}k&&B.push(V)}return p=B,a.filtering+=performance.now()-i,p=p.sort(function(e,t){return e.angle-t.angle})}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(0),r(130),r(2),r(1),r(4),r(9),r(75),r(2),r(23),r(22),r(5),r(16),r(27)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawRagdoll=t.getRagDollPos=void 0;var v=null,g=null,y=o(o({},f.setImovableDefaults(h.BallCreator(0,0,2,1))),{shape:0,pos:new i.Vector(0,0),vel:new i.Vector(0,0),guid:s.getGuid(),radius:2,life:2,type:84,collType:25,remove:!1,stunned:!1,targetFlagged:!1,forceX:0,forceY:0,sleepingAABB:!1,armor:null});t.getRagDollPos=function(){return g};var m={x:0,y:0},x={x:0,y:0},S=[],_=[],T=[],E=new i.Vector(0,0),M=0,I=1,L={},w={a:[.33,.35,.32,.3,.2,.1,.05],b:[.1,.11,.12,.12,.11,.1,.05],curves:[0,.2,.3,.4,.6,.8,1]},b={a:[.05,.11,.12,.11,.08,.075,.05],b:[.05,.1,.1,.1,.1,.1,.05],curves:[0,.2,.3,.4,.6,.8,1]},P={a:[.05,.11,.12,.11,.08,.075,.05],b:[.05,.1,.1,.1,.1,.1,.05],curves:[0,.2,.3,.4,.6,.8,1]},R={a:[.1,.13,.14,.15,.15,.15,.15,.14,.125,.11,.1].map(function(e){return 2*e}),b:[.1,.13,.15,.16,.17,.16,.13,.1,.1,.1,.1].map(function(e){return 2*e}),curves:[0,.18,.22,.25,.3,.33,.37,.4,.6,.8,1]},O={a:[.1,.1,.14,.22,0,0,.16,.1,.05,0].map(function(e){return 2*e}),b:[.1,.1,.22,.22,.22,.2,.16,.1,.05,0],curves:[0,.1,.11,.4,.7,.75,.8,.85,.9,.92]};new i.Vector(0,0);t.default=function(e){e.SW,e.gl;var r=e.game,n=(e.SX,e.SY,e.stepMS);if(S=[],T=[],_=[],!r.isPaused){var o=A.default(e);o?(v=null,g=null,M=null,I=1,m.x=o.pos.x,m.y=o.pos.y,x.x=o.vel.x,x.y=o.vel.y):(v||(v=a.createRagdoll(m.x,m.y,.66),y.vel.set(x.x,x.y)),(M+=n)>3e3&&I>0&&(I*=.97),v.anim(I))}if(v){var i=v.links.filter(function(e){return 0===e.type})[0];d.Glow(i.p0,.03,[],e,.1,0,0,1),t.drawRagdoll(e,v,3.96,1,.3,.3,.3),v.links.forEach(function(e){if(0===e.type){g={x:e.p0.x,y:e.p0.y};var t=v.getRect(),a=p.getQuadTreesObj();if(a.All)for(var n=a.queryTreesRect([4,11,49,1,2,30,25,22,35,10,9],t),o=0;o<n.length;o++)v.collideIM(n[o]);y.pos.x=e.p0.x,y.pos.y=e.p0.y,c.default(r,y,!1,5),y.vel.mult(.005),e.p0.x+=y.vel.x,e.p0.y+=y.vel.y}})}return"Ragdoll"};t.drawRagdoll=function(e,t,a,o,i,A,c){var d=e.gl,p=e.SX,f=e.SY;t.links.forEach(function(e){L[e.type]=e}),t.links.forEach(function(t){var r=2;switch(t.type){case 2:case 1:case 6:case 5:r=1.2}var d=t.draw(),h=null,v=null,g=null;switch(t.type){case 5:case 7:h=L[0],v=w,g=R;break;case 1:case 3:h=L[0],v=b,g=R;break;case 8:h=L[7],v=b,g=w;break;case 6:h=L[5],v=b,g=w;break;case 4:h=L[3],v=b,g=b;break;case 2:h=L[1],v=b,g=b;break;default:v=null}if(v){var y=h.draw();!function(e,t,r,a,n,o,i,s,A,u,c,d,p,f,h,v){for(var g=[e.a[e.a.length-1],t.a[0]],y=[e.b[e.b.length-1],t.b[0]],m=1,x=1/A,S=0;S<A;S++){var _=g[0]*m,T=g[1]*m,M=y[0]*m,I=y[1]*m;E.set(s,0),E.mult(_),E.setAngle(o+.5*Math.PI),E.add(a);var L=E.toPoint();E.set(s,0),E.mult(T),E.setAngle(i+.5*Math.PI),E.add(a);var w=E.toPoint();d.push(L.x-u,L.y-c,w.x-u,w.y-c),E.set(s,0),E.mult(M),E.setAngle(o-.5*Math.PI),E.add(a);var b=E.toPoint();E.set(s,0),E.mult(I),E.setAngle(i-.5*Math.PI),E.add(a);var P=E.toPoint();d.push(b.x-u,b.y-c,P.x-u,P.y-c);var R=A>1?1-m:1,O=.7*f*R+.01,C=.7*h*R+.01,G=.7*v*R+.01;l.addToColorMap(p,d,O,C,G,1),m-=x}}(g,v,0,d.a,y.end,y.angle,d.angle,a,o,p,f,S,_,i*r,A*r,c*r)}var m=t.draw();0===t.type&&u.default(e,1,600,m.a.x,m.a.y,1,.1,.1,1,"Enable",8,0,20);var x=null;switch(t.type){case 7:case 5:x=w;break;case 8:case 6:x=P;break;case 3:case 4:case 1:case 2:x=b;break;case 0:x=R;break;case 9:x=O}x&&function(e,t,r,a,n,o,i,A,u,c,d,p,f,h){for(var v=null,g=null,y=e.curves,m=e.a,x=e.b,S=1,_=1/i,T=0;T<i;T++){for(var M=0;M<y.length;M++){y.length;var I=y[M],L=m[M],w=x[M];L*=S,w*=S;var b=s.midpoint(t,r,I);E.set(o,0),E.mult(L),E.setAngle(a+.5*Math.PI),E.add(b),v&&A.push(v.x-c,v.y-d,E.x-c,E.y-d),v=E.toPoint(),E.set(o,0),E.mult(w),E.setAngle(n-.5*Math.PI),E.add(b),g&&A.push(g.x-c,g.y-d,E.x-c,E.y-d),g=E.toPoint()}var P=i>1?1-S:1,R=.7*p*P+.01,O=.7*f*P+.01,C=.7*h*P+.01;l.addToColorMap(u,A,R,O,C,1),S-=_}}(x,t.p0,t.p1,m.angle,m.angle,a,o,S,_,p,f,i*r,A*r,c*r),n.line2Poly(m.a.x-p,m.a.y-f,m.a.x+1.1*m.b.x-p,m.a.y+1.1*m.b.y-f,T,1.1)});var h=r.default(r.GLctx.Vertices,d);d.disable(d.BLEND),o>2?l.drawColorMap(_,S,h,d,d.LINES):l.drawColorMap(_,S,h,d,d.TRIANGLE_STRIP),d.enable(d.BLEND)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(76),r(1),r(0),r(0),r(131),r(2)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetFogSystems=void 0;var A={};t.resetFogSystems=function(){for(var e in A)A[e].list=[]};var u=function(e,t,r,n,o,i,s){var A=s,u=new a.Vector(0,o*Math.random());u.setAngle(Math.random()*Math.PI*2),u.addXY(r,n),e.push({txtBuf:t,vel:new a.Vector((Math.random()-.5)*A,(Math.random()-.5)*A),pos:u,scale:(.5+.5*Math.random())*i,remove:!1})},l=new a.Vector(0,0);t.default=function(e,t,a,c,d,p,f,h,v,g,y,m,x){void 0===y&&(y=256),void 0===m&&(m=10),void 0===x&&(x=-1);var S=e.gl,_=e.step,T=e.SX,E=e.SY,M=(e.SW,e.SH,e.game);e.stepMS;if(M.menuSettings.glowParticles){var I=""+p+f+h+v+y;if(s.onStage(e,c,d,700+3*t)){var L=A[I];if(!L){var w=i.createRadialGradientTexture(p,f,h,v,y,g);L=A[I]={buffer:w,list:[]}}var b=L.buffer,P=L.list;if(_>0&&!M.isPaused){if(P.length<a)for(var R=x>0?Math.min(x,a):Math.round(3*Math.random()),O=0;O<R;O++)u(P,b,c,d,t,1,m);!function(e,t,r,a){for(var n=e.length,o=0;o<n;o++){var i=e[o];if(0===o&&i.scale>.5){for(var s=0;s<5;s++)u(e,i.txtBuf,i.pos.x,i.pos.y,t*i.scale,.2*i.scale,a);i.remove=!0,i.scale=0}i.vel.mult(.99),l.set(i.vel.x,i.vel.y),l.mult(r),i.pos.add(l),r>0&&(i.scale*=.99),i.scale<.2&&(i.scale*=.98,i.scale<.01&&(i.remove=!0))}}(P,y,1,m),L.list=function(e){for(var t=[],r=e.length,a=0;a<r;a++){var n=e[a];n.remove||t.push(n)}return t}(P)}var C=Math.min(2,M.zoomTXinverted);for(O=0;O<P.length;O++){var G=P[O];r.default.addGL(S,n.default(o.GLctx.Texture,S),b,G.pos.x-T,G.pos.y-E,e,G.scale*C,G.scale*C)}}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(61),r(0)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.create=function(e,t,a,n){void 0===a&&(a=!1);var o=t.getContext("2d").getImageData(0,0,t.width,t.height),i=r.default().global_gl,s={imageData:o,w:t.width,h:t.height,length:o.data.length,texture:this.imageDataToTexture(i,o),str:e};return this.IGNORE_CACHE&&!a||(this.buffer[e]=s),s},e.addGL=function(e,t,r,n,o,i,s,A){void 0===s&&(s=1),void 0===A&&(A=1);var u=r.texture.texture,l=r.texture.width,c=r.texture.height;e.bindTexture(e.TEXTURE_2D,u);var d=a.GLAttribLocations(e,"a_texcoord"),p=a.GLUniformLocation(e,"u_matrix"),f=a.GLUniformLocation(e,"u_texture"),h=a.GLUniformLocation(e,"distortionStart"),v=a.GLUniformLocation(e,"distortionEnd");e.uniform1f(h,Math.random()),e.uniform1f(v,Math.random());var g=window.m4;e.enableVertexAttribArray(d),e.vertexAttribPointer(d,2,e.FLOAT,!1,0,0);var y=g.orthographic(0,i.SW,i.SH,0,-1,1);y=g.translate(y,n-r.texture.width*s*.5,o-r.texture.height*A*.5,0),y=g.scale(y,l*s,c*A,1),e.uniformMatrix4fv(p,!1,y),e.uniform1i(f,0),e.drawArrays(e.TRIANGLES,0,6)},e.imageDataToTexture=function(e,t){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);var a={width:t.width,height:t.height,texture:r,index:this.textureIndex};return this.textureIndex++,e.bindTexture(e.TEXTURE_2D,a.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),a},e.textBatch={},e.textureIndex=0,e.MaxErrTypeWarns=4,e.NumErrTypeWarns=0,e.positionBuffer=null,e.positions=new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),e.texcoords=new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),e.INITIALIZATION=!0,e.IGNORE_CACHE=!0,e.initializationBuffer={},e.buffer={},e.CACHE_SPLIT_KEY="[-_-]",e}();t.default=n}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(6),r(1),r(18),r(12),r(46),r(46),r(21),r(30),r(30),r(5),r(105),r(13)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maxRotateSpiderLeg=t.minRotateSpiderLeg=t.updateSpiderLeg=t.SpaceSpiders=void 0;var h=new n.Vector(0,0);t.SpaceSpiders=function(e){var n=e.game,v=e.WW,m=e.WH,x=e.step;if(d.getQuadTreesObj().All){for(var S=A.getBaseTargetArrays(e),_=0;_<n.spaceSpiders.length;_++){var T=n.spaceSpiders[_],E=r.distanceBetweenVectors(T.restPos,T.pos);T.guid%2==0&&T.life<.5*T.oLife&&E>1500&&(T.prioritzeRestpos=!0),E<1e3&&T.prioritzeRestpos&&T.life<.9*T.oLife&&f.LifeIncreaseFixedValue(T,1);var M=T.life<60;M&&f.DamgeItemFixedValue(T,.75);var I=s.default(T,T.pos,T.radius,2e3,S),L=Math.atan2(I.targetPos.y-T.pos.y,I.targetPos.x-T.pos.x)+Math.PI;T.angle=a.normalizeRadianAngle(T.angle);var w=.07*a.angleDelta(T.angle,L)*x;if(M||(T.angle+=w),o.default(T,x),g(T),i.shift(T,v,m),u.wormhole(T,e),!T.stunned||M){var b=r.distanceBetweenVectors(I.targetPos,T.pos)-2*T.radius;I.target&&b<I.target.radius+1.2*T.radius&&(I.target.vel.mult(.9),f.DamgeItemFixedValue(I.target,.5+.2*T.level),p.PredatorLevelUpgrade(T,I.target));var P=.0033*Math.min(b,300);if(h.set((T.infected?.04:.1)*P,0),h.setAngle(T.angle+Math.PI),M||T.vel.add(h),T.vel.getLength()>4&&T.vel.setLength(4),T.vel.mult(.99),!M){var R=l.default(T,T.angle,c.getGenericAvoidance(T,e,[],[]));T.vel.add(R.avoidance)}if(e.IS_MULTIPLAYER){if(e.IS_SERVER)continue}else if(!i.onStage(e,T,15*T.radius))continue;for(B=0;B<T.legs.length;B++)if(F=T.legs[B],M)t.updateSpiderLeg(F),B>=2&&B<=5?t.maxRotateSpiderLeg(F,-1.5,T.angle):t.maxRotateSpiderLeg(F,1.5,T.angle);else if(n.screen.rectSS_600.intersectsIM(T))if(B>=2&&B<=5){var O=F.bones[F.bones.length-1];O.pos.x-=.1*(O.pos.x-I.targetPos.x),O.pos.y-=.1*(O.pos.y-I.targetPos.y);for(var C=F.bones.length-1;C>0;C--)y(F.bones[C-1],F.bones[C],!1);var G=F.bones[0];for(G.pos.x=T.pos.x,G.pos.y=T.pos.y,C=1;C<F.bones.length;C++)y(F.bones[C],F.bones[C-1],!0)}else{t.updateSpiderLeg(F);var D=.6*T.vel.getLength();T.swimPosInL?T.swimPosL+=w>.01?T.swimPosL*(1.089-1)*D*x:w<-.01?T.swimPosL*(1.019-1)*D*x:T.swimPosL*(1.089-1)*D*x:T.swimPosL+=w>.01?T.swimPosL*(.89-1)*D*x:w<-.01?T.swimPosL*(.969-1)*D*x:T.swimPosL*(.89-1)*D*x,T.swimPosInR?T.swimPosR+=w>.01?T.swimPosR*(1.019-1)*D*x:T.swimPosR*(1.089-1)*D*x:T.swimPosR+=w>.01?T.swimPosR*(.969-1)*D*x:T.swimPosR*(.89-1)*D*x,B<4?t.maxRotateSpiderLeg(F,T.swimPosL,T.angle):B>3&&t.maxRotateSpiderLeg(F,T.swimPosR,T.angle),T.swimPosL>=1?(T.swimPosL=.99,T.swimPosInL=!1):T.swimPosL<=.01&&(T.swimPosL=.01,T.swimPosInL=!0),T.swimPosR>=1?(T.swimPosR=.99,T.swimPosInR=!1):T.swimPosR<=.01&&(T.swimPosR=.01,T.swimPosInR=!0)}}else{T.stunned=!1;for(var N=T.legs.length,B=0;B<N;B++){var F=T.legs[B];t.updateSpiderLeg(F),t.maxRotateSpiderLeg(F,(B%2==0?(N-B)/N:B/N)+.2*Math.random(),T.angle)}}}return"Space spiders"}};var v=new n.Vector(0,0),g=function(e){for(var t=0;t<e.legs.length;t++){var r=e.legs[t].bones[0];r.angle=r.staticAngle+e.angle,v.set(.7*e.radius,0),v.setAngle(r.angle),r.pos.set(v.x+e.pos.x,v.y+e.pos.y)}};t.updateSpiderLeg=function(e){for(var t=e.bones,r=t.length,a=1;a<r;a++){var n=t[a-1],o=t[a];v.set(o.length,0),v.setAngle(n.angle),o.pos.x=n.pos.x+v.x,o.pos.y=n.pos.y+v.y}};t.minRotateSpiderLeg=function(e){var t=e.bones,r=t.length;t[0].angle=a.normalizeRadianAngle(t[0].staticAngle+t[0].minRange);for(var n=1;n<r;n++){var o=t[n-1],i=t[n];i.angle=a.normalizeRadianAngle(i.minRange+o.angle)}};function y(e,t,n){var o,i=e.length,s=e.pos.x-t.pos.x,A=e.pos.y-t.pos.y,u=Math.atan2(A,s),l=a.normalizeRadianAngle(t.angle);n&&(u=t.maxRange<0?(o=a.normalizeRadianAngle(-r.angleDifference(l,u)))>t.minRange?a.normalizeRadianAngle(l+t.minRange):o<t.maxRange?a.normalizeRadianAngle(l+t.maxRange):a.normalizeRadianAngle(l+o):(o=a.normalizeRadianAngle(-r.angleDifference(l,u)))<t.minRange?a.normalizeRadianAngle(l+t.minRange):o>t.maxRange?a.normalizeRadianAngle(l+t.maxRange):a.normalizeRadianAngle(l+o));e.pos.x=t.pos.x+Math.cos(u)*i,e.pos.y=t.pos.y+Math.sin(u)*i,n&&(e.angle=a.normalizeRadianAngle(u))}t.maxRotateSpiderLeg=function(e,t,r){void 0===t&&(t=1);var n=e.bones,o=n.length,i=n[0];i.angle=a.normalizeRadianAngle(i.maxRange*t-i.minRange+r);for(var s=1;s<o;s++){var A=n[s-1],u=n[s];u.angle=a.normalizeRadianAngle(u.maxRange*t-u.minRange+A.angle)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findEnemyShipWithGuid=t.findDroneWithGuid=t.findShipLikeWithGuid=t.findPlayerWithGuid=void 0,t.default=function(e,t){for(var r=e.game.player,a=r.length,n=0;n<a;n++){var o=r[n];if(t.ownerGuid===o.guid)return o}return null};t.findPlayerWithGuid=function(e,t){for(var r=e.game.player,a=r.length,n=0;n<a;n++){var o=r[n];if(t===o.guid)return o}return null};t.findShipLikeWithGuid=function(e,t,r){var a;switch(r){case 1:a=e.game.enemies;break;case 49:a=e.game.drones;break;case 44:a=e.game.player;break;case 2:a=e.game.npcs;break;default:return null}for(var n=a.length,o=0;o<n;o++){var i=a[o];if(t===i.guid)return i}return null};t.findDroneWithGuid=function(e,t){for(var r=e.game.drones,a=r.length,n=0;n<a;n++){var o=r[n];if(t===o.guid)return o}return null};t.findEnemyShipWithGuid=function(e,t){for(var r=e.game.enemies,a=r.length,n=0;n<a;n++){var o=r[n];if(t===o.guid)return o}return null}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(1),r(4),r(16)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createParasite=void 0;t.createParasite=function(e,t,i,s,A,u){for(var l=[],c=0;c<i;c++)l.push(o(o({angle:0,offsetFront:new r.Vector(0,-2),offsetRear:new r.Vector(0,2),pos:new r.Vector(e,t),type:38,collType:25,guid:a.getGuid(),vel:new r.Vector(0,0),life:2,radius:2},n.setImovableDefaults(null)),{armor:null}));return o(o({prioritzeRestpos:!1,level:0,infected:!1,netpos:{x:e,y:t},netvel:{x:0,y:0},netangle:0,angle:0,pos:new r.Vector(0,0),vel:new r.Vector(0,0),radius:i,guid:a.getGuid(),type:38,collType:25,target:null,tsValue:1,targetShift:40*Math.random(),restPos:new r.Vector(s,A),segments:l,life:u||400+100*Math.random()},n.setImovableDefaults(null)),{armor:{type:0,value:1}})}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(12),r(1),r(107),r(21),r(79),r(18),r(19),r(14),r(71)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeAsteroid=void 0;t.removeAsteroid=function(e,t,r){e.remove=!0;var o=0,s=0;if(e.radius>300?(o=750,s=4):e.radius>200?(o=510,s=2):e.radius>150?(o=250,s=2):e.radius>100?(o=250,s=2):e.radius>50?(o=250,s=2):(o=90,s=1),l.default(e,t,0),u.addForceExplosion(t.game,e.pos.x,e.pos.y,o,s,null),e.radius>40&&t.game.settings_asteroid_spawns_new&&(!t.IS_MULTIPLAYER||t.IS_SERVER)&&11!==e.type)for(var c=0;c<5;c++){var d=new a.Vector(5*Math.random(),5*Math.random());d.setLength(2*Math.random()+.1);var p=n.getRandBonusType();if((!t.IS_MULTIPLAYER||t.IS_SERVER)&&e.radius>30&&Math.random()>.96)for(var f=1+Math.random()*e.radius*.033,h=0;h<f;h++){var v=32*Math.random()+8,g=i.createParasite(e.pos.x+(Math.random()-.5)*e.radius,e.pos.y+(Math.random()-.5)*e.radius,v,t.WW*Math.random(),t.WH*Math.random());t.game.parasites.push(g)}var y=4!==p?30:.2*e.radius,m=e.pos.x+(Math.random()-.5)*e.radius,x=e.pos.y+(Math.random()-.5)*e.radius,S=A.createSingleAsteroid(y,{x:m,y:x},d,{type:4,subType:p,angleVel:.01*(1-2*Math.random())});t.game.asteroids.push(S)}},t.default=function(e){for(var t=e.game,a=e.WW,n=e.WH,i=e.step,A=t.asteroids,u=A.length,l=0;l<u;l++){var c=A[l];if(s.PositionUpdaterAutoSleep(c,i),0!==c.vel.x||0!==c.vel.y){var d=c.vel.getLength();d<.01?c.vel.set(0,0):d>.2?c.vel.mult(.9999):c.angleVel*=.999}r.shift(c,a,n),o.wormhole(c,e)}return"Asteroid"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},i=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(2),r(4),r(1),r(3),r(219),r(16),r(34),r(36),r(41)],void 0===(n=function(e,t,r,a,n,s,A,u,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.populateAncientRooms=t.CreateAncient=void 0;var p=function(e,t,r,a,n,o){void 0===o&&(o=1);for(var A=r,u=e+Math.cos(s.doublePI*(A/r)+a)*n>>0,l=t+Math.sin(s.doublePI*(A/r)+a)*n>>0,c=[],d=[];A>-1;--A){var p=A%o==0,f=e+Math.cos(s.doublePI*(A/r)+a)*n>>0,h=t+Math.sin(s.doublePI*(A/r)+a)*n>>0;p?(c.push(i([],d)),d=[]):d.push(u,l,f,h),u=f,l=h}return c},f=new n.Vector(0,0),h=new n.Vector(0,0),v=new n.Vector(0,0),g=function(e,t,r,n,o,i,s){f.set(t,r),h.set(n,o);for(var u=a.distanceBetweenVectors(f,h),l=function(e,t,r,a){for(var n=[],o=0,i=a-r;o<t;){var s=e()*i+r;if(o+s>t&&(s=t-o)<r){var A=n.length-1,u=n[A];if(u<a&&a-u>s){(o+=l=a-u)>t&&(l-=o-t,o=t),n[A]=u+l;continue}if(u>r){var l;o-=l=u-r,n[A]=r;continue}}n.push(s),o+=s}return n}(e,u,i,s),c=l.length,d=0,p=[],g=0;g<c;g++){var y=l[g],m=.5*y,x=d+m;a.midpoint(f,h,x/u,v),p.push(A.createAncientBlockSingle(1.2*m,v,8,.1*g)),d+=y}return p};t.CreateAncient=function(e,t,s,l,c,d){for(var f=[],h=p(l,c,32,-.2+s,300*t,8),v=p(l,c,64,0+s,200*t,16),m=p(l,c,16,0+s,100*t,2),x=p(l,c,8,.86+s,145*t,2),S=0;S<x.length;S++){var _=x[S];f.push.apply(f,_)}for(S=0;S<m.length;S++)_=m[S],f.push.apply(f,_);var T=[],E=0,M=1;for(S=0;S<h.length;S++){var I=h[S],L=v[S],w=m[E],b=m[M];E+=2,(M+=2)>m.length-1&&(M=1);var P=I.length,R=L.length,O=b.length;T.push(I[0],I[1]),T.push(L[0],L[1]),T.push(L[0],L[1]),T.push(w[0],w[1]),T.push(I[P-2],I[P-1]),T.push(L[R-2],L[R-1]),T.push(L[R-2],L[R-1]),T.push(b[O-2],b[O-1]),f.push.apply(f,i(i([],I),L))}for(var C=[],G=[],D=0;D<f.length;D+=4){var N=f[0+D],B=f[1+D],F=f[2+D],V=f[3+D];C.push({start:{x:N,y:B},end:{x:F,y:V}}),G.push.apply(G,g(e,N,B,F,V,8*t,13*t))}for(D=0;D<T.length;D+=4)N=T[0+D],B=T[1+D],F=T[2+D],V=T[3+D],C.push({start:{x:N,y:B},end:{x:F,y:V}}),G.push.apply(G,g(e,N,B,F,V,2*t,5*t));var k=[],X=p(l,c,8,1.2+s,175*t,2);for(S=0;S<X.length;S++){var H=X[S];if(H.length>0){var U=.5*H.length;k.push({pos:{x:H[U],y:H[U+1]},inhabitantType:y(e),numInhabitants:3+Math.round(6*e())})}}var W=[];r.createBlockCirclePolySingleWall(l,c,W,6,s,40*t,!1);var Y=W.length-2;for(S=2;S<Y;S+=4)G.push(A.createAncientBlockSingle(10*t,{x:W[S],y:W[S+1]},8,.1*S,!0));return G.push(A.createAncientBlockSingle(8*t,{x:l,y:c},12,0,!0)),{blocks:G,ancient:o(o({},u.setImovableDefaults(null)),{radius:300*t,pos:new n.Vector(l,c),vel:new n.Vector(0,0),type:6,collType:22,sleepingAABB:!0,rooms:k,seedKey:d,life:999999,angle:0,opos:{x:l,y:c},mass:9999999999,guid:a.getGuid(),oLife:9999999,acc:new n.Vector(0,0),walls:C,armor:{type:6,value:1}})}};var y=function(e){switch(Math.floor(3*e())){case 0:return 9;case 1:return 8;case 2:return 10;default:return-1}};t.populateAncientRooms=function(e,t){for(var r,a,n,o=t.rooms,i={ownedByStructureGuid:t.guid,ownedByStructureType:t.type},s=0;s<o.length;s++){var A=o[s];switch(A.inhabitantType){case 9:var u=l.default(e,A.numInhabitants,A.pos.x,A.pos.y,null,A.pos,i);(r=e.game.spaceSquids).push.apply(r,u);break;case 9:var p=c.default(e,A.numInhabitants,A.pos.x,A.pos.y,null,A.pos,i);(a=e.game.spaceSpiders).push.apply(a,p);break;case 8:var f=d.default(e,A.numInhabitants,A.pos.x,A.pos.y,null,A.pos,i);(n=e.game.spaceSnake).push.apply(n,f)}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(7),r(3),r(1),r(4),r(23),r(18),r(6),r(5),r(142),r(32)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpacePortClassType=t.getSpaceportCannonHash=t.prePopulateSpaceportCannonHash=void 0;var d=0,p={};t.prePopulateSpaceportCannonHash=function(e){for(var t=0;t<e.length;t++)for(var r=e[t],a=0;a<r.cannons.length;a++){var n=r.cannons[a];p[n.guid]=r}};t.getSpaceportCannonHash=function(){return p};var f=[{name:"AURIGA",size:500},{name:"HORIZON",size:450},{name:"GENESIS",size:400},{name:"CHALLENGER",size:420},{name:"RYBERG",size:480}];t.getSpacePortClassType=function(e){var t=Math.floor(e()*f.length);return t>f.length-1&&(t=f.length-1),f[t]},t.default=function(e){var t=e.game,p=e.step,f=e.stepMS,h=u.getQuadTreesObj();if(h&&h.All){d++;for(var v=t.spacePorts,g=[],y=0;y<v.length;y++){var m=v[y];if(m.shieldImpacts=[],m.centerNoneCannon.life>.3*a.SPACEPORT_START_LIFE&&m.shields<m.oshields&&7===m.cannons.length){var x=m.shields<0;m.shields<0&&m.shields>-10?m.shields+=35e-5*m.radius*p*.2:m.shields+=35e-5*m.radius*p,x&&m.shields>=0&&(m.shields=.69*m.oshields),m.shields<-100&&(m.shields=-100),m.shields>m.oshields&&(m.shields=m.oshields)}m.pos=m.staticPos.clone(),m.vel.x=0,m.vel.y=0;var S=3.25*m.radius,_=r.rect_pool_pop(m.pos.x-S,m.pos.y-S,2*S,2*S),T=r.rect_pool_pop(m.pos.x-m.radius,m.pos.y-m.radius,2*m.radius,2*m.radius),E=m.isEnemyForMS>0?[]:h.queryTreesRect([44],T);m.weaponsActive=E.length>0,g.push.apply(g,E),m.isEnemyForMS-=f,m.isEnemyForMS<0&&(m.isEnemyForMS=0);var M=[],I=m.cannons,L=I.length;if(m.weaponsActive)M=I;else for(var w=0;w<L;w++){var b=I[w];b.weaponsActiveTimerMS>0&&(M.push(b),b.weaponsActiveTimerMS-=f)}for(var P=0;P<m.cannons.length;P++){var R=m.cannons[P];if(R.busy=!1,R.fireing=!1,R.pos.x>R.staticPos.x+1?R.pos.x--:R.pos.x<R.staticPos.x-1&&R.pos.x++,R.pos.y>R.staticPos.y+1?R.pos.y--:R.pos.y<R.staticPos.y-1&&R.pos.y++,i.default(t,R,!0,5,.5),R.vel.getLength()>20&&R.vel.setLength(20),R.vel.mult(.7),s.default(R,p),M.length>0){var O=h.queryTreesRect([35,9,1,10],_);O.length<2&&O.push.apply(O,h.queryTreesRect([44],_));for(var C=O.length,G=0;G<C;G++){var D=O[G],N=44===D.type;if(d>3)for(var B=0;B<L;B++){var F=I[B],V=F.aggressionForGuidsHash[D.guid]||0;if(!F.busy&&F.isCannon&&!(N&&V<20)){var k=Math.atan2(D.pos.y-F.pos.y,D.pos.x-F.pos.x),X=Math.atan2(F.pos.y-m.pos.y,F.pos.x-m.pos.x);if(F.angle=A.normalizeRadianAngle(F.angle),N){if(V<40&&Math.random()>.05)continue;if(V<60&&Math.random()>.2)continue}if(!(Math.abs(k-X)>.59*Math.PI)){var H=n.vec_pool_pop(l.SPACE_PORT_BULLET_VEL_LEN,0);H.setAngle(k);var U=o.angleDifference(F.angle,k);if(F.angle-=.1*U*p,Math.abs(U)<.05*Math.PI){var W=c.createBullet(28);W.vel.x=H.x,W.vel.y=H.y,W.pos.x=F.pos.x,W.pos.y=F.pos.y,W.damage=l.SPACE_PORT_BULLET_DAMAGE,W.ownerGuid=F.guid,W.owenerType=F.type,t.bullets.push(W),F.fireing=!0}n.vec_pool_put(H),F.busy=!0}}}}}}r.rect_pool_put(T),r.rect_pool_put(_)}if(d>10){d=0;var Y={},q=g.length;for(y=0;y<q;y++){Y[g[y].guid]=!0}if(!e.IS_MULTIPLAYER||e.IS_SERVER){var z=t.player,j=z.length;for(y=0;y<j;y++){var K=z[y];if(!Y[K.guid]&&K.inSafeZone){K.inSafeZone=!1;var Z={life:a.NOTIFICATION_LIFE,type:74,onlyForGuid:K.guid};e.game.notifications.unshift(Z)}}}}return"spaceports"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(14)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createForceFromAnomaly=t.createAnomalyPair=t.createAnomaly=void 0;t.createAnomaly=function(e,t,n,o,i,s,A,u,l,c,d,p){void 0===i&&(i=1),void 0===s&&(s=510),void 0===A&&(A=!0),void 0===u&&(u=!0),void 0===l&&(l=-1),void 0===c&&(c=12),void 0===d&&(d=!0),u&&a.addForce(e.game,t,n,s,i,null,o,d,0,p?0:5e3,p?0:18e3);var f={effect:i,radius:s,pos:new r.Vector(t,n),positive:o,seedKey:l,spawnParticles:A,type:c,out:p};return(12===c||e.game.IS_PROCEDURAL)&&e.game.anomlies.push(f),f};t.createAnomalyPair=function(e,r,a,n,o,i){void 0===i&&(i=-1);var s={in:t.createAnomaly(e,r,a,!1,16,750,!0,!0,i,14,!0),out:t.createAnomaly(e,n,o,!0,16,750,!0,!0,i,13,!0)};return e.game.anomalyPairs.push(s),s};t.createForceFromAnomaly=function(e,t){a.addForce(e.game,t.pos.x,t.pos.y,t.radius,t.positive?.05*t.effect:t.effect,null,t.positive,!0,0)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(4),r(7),r(31),r(17)],void 0===(n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuadTreeInt32=t.QuadTreeInt32QtBranch=t.intersectsXYWH_XYWH=void 0;var s={},A=function(e){return new a.Rectangle(e[0],e[1],e[2],e[3])},u=function(e,t){return!(e[0]>t[0]+t[2]||e[0]+e[2]<t[0]||e[1]>t[1]+t[3]||e[1]+e[3]<t[1])},l=function(e,t){return!(e[0]>t[0]+t[2]||e[0]+e[2]<t[0]||e[1]>t[1]+t[3]||e[1]+e[3]<t[1])},c=function(e,t,r,a,n){return!(e[0]>t+a||e[0]+e[2]<t||e[1]>r+n||e[1]+e[3]<r)};t.intersectsXYWH_XYWH=function(e,t,r,a,n,o,i,s){return!(e>n+i||e+r<n||t>o+s||t+a<o)};var d=function(e,t){return t[0]>e[0]&&t[1]>e[1]&&t[0]+t[2]<e[0]+e[2]&&t[1]+t[3]<e[1]+e[3]},p=8,f=function(){function e(e,t,r,a){var n=this;this.divide=!1,this.debugBounds=function(e,t){var r=new Int32Array([e.x,e.y,e.width,e.height]);return u(r,n.boundry)&&t.push(A(n.boundry)),n.divide&&(n.northeast.debugBounds(e,t),n.northwest.debugBounds(e,t),n.southeast.debugBounds(e,t),n.southwest.debugBounds(e,t)),t},this.debugAABBs=function(e,t){var r=new Int32Array([e.x,e.y,e.width,e.height]);if(u(r,n.boundry)){for(var a=0;a<4*n.index;a+=4)t.push(A(n.itemsXYWH.slice(a,a+4)));n.divide&&(n.northeast.debugAABBs(e,t),n.northwest.debugAABBs(e,t),n.southeast.debugAABBs(e,t),n.southwest.debugAABBs(e,t))}return t},this.boundry=new Int32Array(e),this.capacity=r>=a?t*p:t,this.items=new Int32Array(this.capacity),this.itemsSleepState=new Uint8Array(this.capacity),this.itemsXYWH=new Int32Array(4*this.capacity),this.index=0,this.currentDepth=r,this.maxDepth=a,this.deleteBranchMarker=0}return e.prototype.update=function(e,t,r,a,n,o,i){this.boundry[0]=e,this.boundry[1]=t,this.boundry[2]=r,this.boundry[3]=a,this.capacity=n,this.currentDepth=o,this.maxDepth=i,this.index=0},e.prototype.subDivide=function(){var t=this.boundry[0],r=this.boundry[1],a=this.boundry[2],n=this.boundry[3],o=this.currentDepth+1,i=this.maxDepth,A=o>=i?this.capacity*p:this.capacity;if(this.northeast)this.northeast.update(t+.5*a,r,.5*a,.5*n,A,o,i),this.northwest.update(t,r,.5*a,.5*n,A,o,i),this.southeast.update(t+.5*a,r+.5*n,.5*a,.5*n,A,o,i),this.southwest.update(t,r+.5*n,.5*a,.5*n,A,o,i);else{var u=s[A];if(u&&u.length>4)return this.northeast=u.pop(),this.northwest=u.pop(),this.southeast=u.pop(),this.southwest=u.pop(),void this.subDivide();this.northeast=new e([t+.5*a,r,.5*a,.5*n],A,o,i),this.northwest=new e([t,r,.5*a,.5*n],A,o,i),this.southeast=new e([t+.5*a,r+.5*n,.5*a,.5*n],A,o,i),this.southwest=new e([t,r+.5*n,.5*a,.5*n],A,o,i)}this.divide=!0},e.prototype.___query=function(e,r,a,n,o,i,s){void 0===s&&(s=-1);var A=this.items,u=this.index,l=this.itemsXYWH;if(c(this.boundry,e,r,a,n)){for(var d=0;d<u;d++){var p=A[d];if(!i[p]&&p!==s){var f=4*d;t.intersectsXYWH_XYWH(e,r,a,n,l[f],l[f+1],l[f+2],l[f+3])&&(i[p]=!0,o.push(p))}}this.divide&&(this.northeast.___query(e,r,a,n,o,i,s),this.northwest.___query(e,r,a,n,o,i,s),this.southeast.___query(e,r,a,n,o,i,s),this.southwest.___query(e,r,a,n,o,i,s))}return o},e.prototype.insert=function(e,t,r){if(!l(this.boundry,t))return!1;if(!(this.index<this.capacity))return this.divide||this.subDivide(),!!this.northeast.insert(e,t,r)||(!!this.northwest.insert(e,t,r)||(!!this.southeast.insert(e,t,r)||!!this.southwest.insert(e,t,r)));this.items[this.index]=e,this.itemsSleepState[this.index]=r;var a=4*this.index;return this.itemsXYWH[a]=t[0],this.itemsXYWH[a+1]=t[1],this.itemsXYWH[a+2]=t[2],this.itemsXYWH[a+3]=t[3],this.index++,!!d(this.boundry,t)||void 0},e.prototype.reset=function(){this.index=0;var e=!this.northwest;if(this.northwest){var t=this.northeast.reset(),r=this.northwest.reset(),a=this.southeast.reset(),n=this.southwest.reset();if(t&&r&&a&&n&&(this.deleteBranchMarker++,this.deleteBranchMarker>30)){var o=s[this.northeast.capacity];o||(o=s[this.northeast.capacity]=[]),o.push(this.northeast,this.northwest,this.southeast,this.southwest),this.northeast=null,this.northwest=null,this.southeast=null,this.southwest=null,this.deleteBranchMarker=0}this.divide=!1}return e},e}();t.QuadTreeInt32QtBranch=f;var h=function(){function e(e,t,r,a,n){var o=this;void 0===a&&(a=8),void 0===n&&(n=!1),this.divide=!1,this.findIndex=function(e,t){if(void 0===t&&(t=null),t){if((r=t.items.indexOf(e))>-1)return r;t.divide&&(o.findIndex(e,t.northeast),o.findIndex(e,t.northwest),o.findIndex(e,t.southeast),o.findIndex(e,t.southwest))}else{var r;if((r=o.items.indexOf(e))>-1)return r;o.divide&&(o.findIndex(e,o.northeast),o.findIndex(e,o.northwest),o.findIndex(e,o.southeast),o.findIndex(e,o.southwest))}},this.debugAABBs=function(e,t){var r=new Int32Array([e.x,e.y,e.width,e.height]);if(u(r,o.boundry)){for(var a=0;a<4*o.index;a+=4)t.push(A(o.itemsXYWH.slice(a,a+4)));o.divide&&(o.northeast.debugAABBs(e,t),o.northwest.debugAABBs(e,t),o.southeast.debugAABBs(e,t),o.southwest.debugAABBs(e,t))}return t},this.debugBounds=function(e){var t=[],r=[e.x,e.y,e.width,e.height];return l(o.boundry,r)&&t.push(A(o.boundry)),o.divide&&(o.northeast.debugBounds(e,t),o.northwest.debugBounds(e,t),o.southeast.debugBounds(e,t),o.southwest.debugBounds(e,t)),t},this.setup(e,t,r,a,n)}return e.prototype.shrink=function(){this.boundry[0]=0|Math.max(this.minX+1,0),this.boundry[1]=0|Math.max(this.minY+1,0),this.boundry[2]=Math.ceil(this.maxW-this.minX),this.boundry[3]=Math.ceil(this.maxH-this.minY)},e.prototype.intersectTree=function(e){var t=[],r=this.itemType===e.itemType,a=this.index;if(a>0){for(var n={},i=this.items,s=this.itemsSleepState,A=this.itemsXYWH,u=0;u<a;u++){if(0!==s[u]){var l=i[u];if(!n[l]){var c=4*u,d=A[c],p=A[c+1],f=A[c+2],h=A[c+3];n[l]=!0;var v=e.___queryXYWH(d,p,f,h,[],[],r?l:-1);v.length>0&&t.push(o([l],v))}}}this.divide&&(this.___iterateBranchAgainstTree(this.northeast,e,t,n),this.___iterateBranchAgainstTree(this.northwest,e,t,n),this.___iterateBranchAgainstTree(this.southeast,e,t,n),this.___iterateBranchAgainstTree(this.southwest,e,t,n))}return t},e.prototype.___iterateBranchAgainstTree=function(e,t,r,a){var n=e.index,i=this.itemType===t.itemType;if(n>0){for(var s=e.items,A=e.itemsSleepState,u=e.itemsXYWH,l=0;l<n;l++){if(0!==A[l]){var c=s[l];if(!a[c]){var d=4*l,p=u[d],f=u[d+1],h=u[d+2],v=u[d+3];a[c]=!0;var g=t.___queryXYWH(p,f,h,v,[],[],i?c:-1);g.length>0&&r.push(o([c],g))}}}e.divide&&(this.___iterateBranchAgainstTree(e.northeast,t,r,a),this.___iterateBranchAgainstTree(e.northwest,t,r,a),this.___iterateBranchAgainstTree(e.southeast,t,r,a),this.___iterateBranchAgainstTree(e.southwest,t,r,a))}},e.prototype.___queryXYWH=function(e,r,a,n,o,i,s){void 0===s&&(s=-1);var A=this.items,u=this.itemsXYWH;if(c(this.boundry,e,r,a,n)){for(var l=0;l<this.index;l++){var d=A[l];if(!i[d]&&d!==s){var p=4*l;t.intersectsXYWH_XYWH(e,r,a,n,u[p],u[p+1],u[p+2],u[p+3])&&(i[d]=1,o.push(d))}}this.divide&&(this.northeast.___query(e,r,a,n,o,i,s),this.northwest.___query(e,r,a,n,o,i,s),this.southeast.___query(e,r,a,n,o,i,s),this.southwest.___query(e,r,a,n,o,i,s))}return o},e.prototype.insert=function(e,t){var r=e.radius,a=e.pos.x,n=e.pos.y,o=2*r,i=2*r,s=e.sleepingAABB?0:1;if(this.AABB_VEL){var A=e.vel.x*-t,u=e.vel.y*-t;A>0?o+=A:(a+=A,o-=A),u>0?i+=u:(n+=u,i-=u)}var c=a-r,p=n-r,f=[c,p,o,i];if(!l(this.boundry,f))return!1;if(this.references[this.totalItems]=e,this.totalItems++,!(this.index<this.capacity))return this.divide||this.subDivide(),this.northeast.insert(this.REFERENCE_INDEX,f,s)?(this.REFERENCE_INDEX++,!0):this.northwest.insert(this.REFERENCE_INDEX,f,s)?(this.REFERENCE_INDEX++,!0):this.southeast.insert(this.REFERENCE_INDEX,f,s)?(this.REFERENCE_INDEX++,!0):this.southwest.insert(this.REFERENCE_INDEX,f,s)?(this.REFERENCE_INDEX++,!0):void this.REFERENCE_INDEX++;this.items[this.index]=this.REFERENCE_INDEX,this.itemsSleepState[this.index]=s;var h=4*this.index;return this.itemsXYWH[h]=c,this.itemsXYWH[h+1]=p,this.itemsXYWH[h+2]=o,this.itemsXYWH[h+3]=i,this.index++,this.REFERENCE_INDEX++,!!d(this.boundry,f)||void 0},e.prototype.subDivide=function(){var e=this.boundry[0],t=this.boundry[1],r=this.boundry[2],a=this.boundry[3],n=this.maxDepth,o=this.capacity;this.northeast?(this.northeast.update(e+.5*r,t,.5*r,.5*a,o,0,n),this.northwest.update(e,t,.5*r,.5*a,o,0,n),this.southeast.update(e+.5*r,t+.5*a,.5*r,.5*a,o,0,n),this.southwest.update(e,t+.5*a,.5*r,.5*a,o,0,n)):(this.northeast=new f([e+.5*r,t,.5*r,.5*a],o,0,n),this.northwest=new f([e,t,.5*r,.5*a],o,0,n),this.southeast=new f([e+.5*r,t+.5*a,.5*r,.5*a],o,0,n),this.southwest=new f([e,t+.5*a,.5*r,.5*a],o,0,n)),this.divide=!0},e.prototype.___query=function(e,r,a,n){var o=[],i=[],s=this.items,A=this.itemsXYWH;if(c(this.boundry,e,r,a,n)){for(var u=0;u<this.index;u++){var l=s[u];if(!o[l]){var d=4*u;t.intersectsXYWH_XYWH(e,r,a,n,A[d],A[d+1],A[d+2],A[d+3])&&(o[l]=1,i.push(l))}}this.divide&&(this.northeast.___query(e,r,a,n,i,o),this.northwest.___query(e,r,a,n,i,o),this.southeast.___query(e,r,a,n,i,o),this.southwest.___query(e,r,a,n,i,o))}var p=i.length;if(0===p)return[];var f=new Array(p);for(u=0;u<p;u++)f[u]=this.references[i[u]];return f},e.prototype.query=function(e){var t=e.radius;return this.___query(e.pos.x-t,e.pos.y-t,2*t,2*t)},e.prototype.queryShape=function(e){for(var t=Number.MAX_VALUE,r=Number.MIN_VALUE,n=Number.MAX_VALUE,o=Number.MIN_VALUE,i=e.length,s=0;s<i;s++){var A=e[s];A.x>r&&(r=A.x),A.x<t&&(t=A.x),A.y>o&&(o=A.y),A.y<n&&(n=A.y)}for(var u=new a.Rectangle(t,n,r-t,o-n),l=this.queryInt(u),c=l.length,d=0;d<c;d++)for(var p=l[d],f=new a.Rectangle(p.pos.x-p.radius,p.pos.y-p.radius,2*p.radius,2*p.radius).toPointArray(),h=0;h<4;h++){var v=f[h],g=(s=0,0),y=void 0;for(s=0,g=i-1;s<i;g=s++)e[s].y>v.y!=e[g].y>v.y&&v.x<(e[g].x-e[s].x)*(v.y-e[s].y)/(e[g].y-e[s].y)+e[s].x&&(y=!y);if(y)return[p]}return[]},e.prototype.queryRay=function(e,t){for(var r,a,o,i,s,A,u=Math.min(e.x,t.x),l=Math.min(e.y,t.y),c=Math.max(e.x,t.x)-u,d=Math.max(e.y,t.y)-l,p=this.___query(u,l,c,d),f=e.x,h=e.y,v=t.x,g=t.y,y=[],m=p.length,x=0;x<m;x++){var S=p[x],_=S.pos.x,T=S.pos.y,E=S.radius;n.LineIntersects(f,h,v,g,_-E,T-E,_+E,T-E)?y.push(S):n.LineIntersects(f,h,v,g,_+E,T-E,_+E,T+E)?y.push(S):n.LineIntersects(f,h,v,g,_-E,T+E,_+E,T+E)?y.push(S):n.LineIntersects(f,h,v,g,_-E,T-E,_-E,T+E)?y.push(S):(a=T,o=E,i=E,A=h,(r=_)>(s=f)||r+o<s||a>A||a+i<A||y.push(S))}return y},e.prototype.queryCircle=function(e,t){var a=this.___query(e.x-t,e.y-t,2*t,2*t);if(0===a.length)return a;for(var n,o,i,s,A,u=.7*t,l=[e.x-u,e.y-u,2*u,2*u],c=a.length,d=[],p=0;p<c;p++){var f=a[p];n=l,o=f.pos.x-f.radius,i=f.pos.y-f.radius,s=2*f.radius,A=2*f.radius,n[0]>o+s||n[0]+n[2]<o||n[1]>i+A||n[1]+n[3]<i?r.radiusIntersectXYXY(e.x,e.y,t,f.pos.x,f.pos.y,f.radius)&&d.push(f):d.push(f)}return d},e.prototype.queryInt=function(e){return this.___query(e.x,e.y,e.width,e.height)},e.prototype.queryVec=function(e,t,r){return this.___query(e.x-t,e.y-r,2*t,2*r)},e.prototype.destroy=function(){this.northeast=null,this.northwest=null,this.southeast=null,this.southwest=null},e.prototype.reset=function(){this.index=0,this.totalItems=0,this.REFERENCE_INDEX=0,this.references=[],this.divide&&(this.northeast.reset(),this.northwest.reset(),this.southeast.reset(),this.southwest.reset()),this.divide=!1},e.prototype.getRangeType=function(){return"INT32"},e.prototype.setup=function(e,t,r,a,n){void 0===a&&(a=8),void 0===n&&(n=!1);var o=e.x,s=e.y,A=e.width,u=e.height;this.boundry=new Int32Array([o,s,A,u]),(o>2147483647||s>2147483647||A>2147483647||u>2147483647||o<-2147483648||s<-2147483648)&&console.log("Out of range @ Quadtree constructor "+this.boundry.join(",")+" "+i.TypesToString(this.itemType)),this.AABB_VEL=n,this.items=new Int32Array(t),this.itemsSleepState=new Uint8Array(t),this.itemsXYWH=new Int32Array(4*t),this.capacity=t,this.itemType=r,this.references=[],this.REFERENCE_INDEX=0,this.index=0,this.totalItems=0,this.minX=65535,this.minY=65535,this.maxW=0,this.maxH=0,this.maxDepth=a},e.prototype.visualize=function(e,t,r,a){if(this.divide){var n=600/this.boundry[2],o=10;this.__visualize(n,o,e,t,r,a,r-300,a+40,this.northwest),this.__visualize(n,o,e,t,r,a,r-100,a+40,this.northeast),this.__visualize(n,o,e,t,r,a,r+100,a+40,this.southwest),this.__visualize(n,o,e,t,r,a,r+300,a+40,this.southeast)}},e.prototype.__visualize=function(e,t,r,a,n,o,i,s,A){r.push(n,o,i,s);var u=A.boundry;r.push(u[0]*e+100,u[1]*e+240,(u[0]+u[2])*e+100,u[1]*e+240,(u[0]+u[2])*e+100,u[1]*e+240,(u[0]+u[2])*e+100,(u[1]+u[3])*e+240,u[0]*e+100,u[1]*e+240,u[0]*e+100,(u[1]+u[3])*e+240,u[0]*e+100,(u[1]+u[3])*e+240,(u[0]+u[2])*e+100,(u[1]+u[3])*e+240),t*=.25,A.divide?(this.__visualize(e,t,r,a,i,s,i-30*t,s+40,A.northwest),this.__visualize(e,t,r,a,i,s,i-10*t,s+40,A.northeast),this.__visualize(e,t,r,a,i,s,i+10*t,s+40,A.southwest),this.__visualize(e,t,r,a,i,s,i+30*t,s+40,A.southeast)):A.southwest&&(this.__visualize(e,t,a,a,i,s,i-30*t,s+40,A.northwest),this.__visualize(e,t,a,a,i,s,i-10*t,s+40,A.northeast),this.__visualize(e,t,a,a,i,s,i+10*t,s+40,A.southwest),this.__visualize(e,t,a,a,i,s,i+30*t,s+40,A.southeast))},e}();t.QuadTreeInt32=h}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(23),r(18),r(21),r(12),r(1),r(4),r(16),r(27),r(42)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSpaceMine=t.createSpaceMineWoShip=void 0,t.default=function(e){for(var t=e.game,o=e.WW,s=e.WH,A=e.step,u=e.stepMS,l=t.spaceMines.length,c=0;c<l;c++){var d=t.spaceMines[c];d.activationTimer>0?d.activationTimer-=u:d.lightIntensity<1?d.lightIntensity+=.03*A:d.lightIntensity=0;var p=d.vel.getLength();p>3&&d.vel.setLength(3),p>.2&&d.vel.mult(.97),a.default(d,A),i.shift(d,o,s),r.default(t,d,!0),n.wormhole(d,e)}return"SpaceMines"};var d=c.mineWDT;t.createSpaceMineWoShip=function(e,t){var r=new s.Vector(e,t);return o(o({ownerGuid:-1,damage:d.damage,pos:r,vel:new s.Vector(0,0),guid:A.getGuid(),life:100,radius:7,collType:18,type:42},u.setImovableDefaults(l.BallCreator(r.x,r.y,7,7))),{activationTimer:1100,lightIntensity:Math.random(),armor:{type:3,value:1}})};t.createSpaceMine=function(e,t,r){var a=e.vel.clone();a.mult(.65);var n=new s.Vector(e.pos.x+Math.cos(e.angle+Math.PI)*(e.radius+10),e.pos.y+Math.sin(e.angle+Math.PI)*(e.radius+10));t.game.spaceMines.push(o(o({ownerGuid:e.guid,damage:r.damage,pos:n,vel:a,guid:A.getGuid(),life:100,radius:7,collType:18,type:42},u.setImovableDefaults(l.BallCreator(n.x,n.y,7,7))),{activationTimer:1100,lightIntensity:Math.random(),armor:{type:3,value:1}}))}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(31),r(161)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.circleLineColl=void 0;var o=new r.Vector(0,0);t.circleLineColl=function(e,t,r){o.set(e.pos.x+e.vel.x,e.pos.y+e.vel.y);var i=a.LineInterceptCircle(e.pos,o,t.pos,r||t.radius);if(i){var s=a.LineInterceptCircleToPositions(e.pos,o,t.pos,t.radius);return{collided:i,cp:n.getCorrectCollisionPoint(s,e)}}return{collided:i}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(7),r(350)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createChunkRec=t.processChunkQeue=t.removeChildrenFromQeue=t.populateChunk=void 0;var n=[[0,0],[.5,0],[0,.5],[.5,.5]];t.populateChunk=function(e,t,r,n,o,i){var s=a.createItemForChunk(t,r,n,o,i);void 0!==s&&(e.typeHash[s.type]=s.type,t.populated=!0,t.itemData=s,t.type=s.type)};t.removeChildrenFromQeue=function(e,t){var r=t[e.seed];if(r)for(var a=0;a<r.length;a++){var n=r[a];n.child=null,n.chunk=null}t[e.seed]=[],delete t[e.seed]};t.processChunkQeue=function(e,t,r){void 0===r&&(r=.2);for(var a=performance.now();performance.now()<a+r;){var n=!1;for(var i in t)(l=t[i]).length>0&&l[0].chunk.rect.intersects(e.game.screen.rect)&&(o(e,t,l),n=!0);var s=!1;if(!n)for(var i in t)(l=t[i]).length>0&&(o(e,t,l),s=!0);if(!s&&!n)break}var A=0,u=[];for(var i in t){var l,c=(l=t[i]).length;0===c&&u.push(i),A+=c}for(var d=0;d<u.length;d++)delete t[u[d]];return A};var o=function(e,r,a){var n=a.shift();if(n){if(n.chunk.remove)return;n.child.rect,t.createChunkRec(e,n.chunk,n.child,n.rand,n.child.rect.x,n.child.rect.y,n.res,n.threshold,n.thresholdIncrease,n.depth,n.maxDepth,r,n.addToGame)}};t.createChunkRec=function(e,a,o,i,s,A,u,l,c,d,p,f,h){for(var v=0;v<4;v++)if(i()>l){var g=n[v],y=.5*u,m={rect:r.rect_pool_pop(s+u*g[0],A+u*g[1],y,y),children:[],populated:!1,type:void 0};t.populateChunk(a,m,e,i,h),o.children.push(m)}if(d<p)for(v=0;v<o.children.length;v++){var x=o.children[v];!x.populated&&d<6&&i()>.4&&(S=f,T=void 0,T=(_={chunk:a,child:x,depth:d+1,rand:i,res:.5*u,threshold:l+c,thresholdIncrease:c,maxDepth:p,addToGame:h}).chunk.seed,(S[T]=S[T]||[]).push(_))}var S,_,T}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(1),r(85),r(16),r(4),r(10)],void 0===(n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMineField=void 0;var A=0;t.default=function(e){var t=e.game.minefields;if(t.length>0){var r=t[A];if(r){for(var a=r.mines,n=a.length,o=[],i=0;i<n;i++){var u=a[i];u.remove||o.push(u)}r.mines=o,o.length<5&&(t.splice(A,1),s.LOG_GL("minefield removed"))}}return++A>t.length-1&&(A=0),"minefields"};var u=new r.Vector(0,0),l=new r.Vector(0,0),c=function(e,t){return Math.floor(e*(1/180))+"_"+Math.floor(t*(1/180))},d=function(e){var t=180*Math.floor(e*(1/180));return t+22.5>e?t+22.5:e>t+180-22.5?t+180-22.5:e};t.createMineField=function(e,t,s,A,p,f,h){var v,g={},y=[],m=t+.5*A,x=s+.5*p,S=.5*Math.min(A,p);u.setLength(.5*A),u.setAngle(h);for(var _=Math.round(S*S*Math.PI*15e-5),T=0;T<_;T++){l.setLength(50+(S-50)*f()),l.setAngle(2*Math.PI*f());var E=d(m+l.x),M=d(x+l.y);g[C=c(E,M)]||(y.push(a.createSpaceMineWoShip(E,M)),g[C]=!0)}for(var I=-1;I<2;I+=2)for(var L=.7*S,w=L,b=0;b<3;b++){w+=1.2*L,u.setLength(w);var P=m+u.x*I,R=x+u.y*I,O=Math.round(L*L*Math.PI*15e-5);for(T=0;T<O;T++){var C;l.setLength(50+(L-50)*f()),l.setAngle(2*Math.PI*f()),E=d(P+l.x),M=d(R+l.y),g[C=c(E,M)]||(y.push(a.createSpaceMineWoShip(E,M)),g[C]=!0)}L*=.7}var G=.5*Math.max(A,p);e.game.minefields.push(o(o({mines:y,radius:G,type:17},n.setImovableDefaults(null)),{pos:new r.Vector(t+G,s+G),vel:new r.Vector(0,0),collType:24,sleepingAABB:!0,life:9999999,angle:0,opos:{x:t,y:s},mass:9999999999,guid:i.getGuid(),oLife:9999999,acc:new r.Vector(0,0),armor:{type:6,value:1}})),(v=e.game.spaceMines).push.apply(v,y)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyUpdater=t.RigidBodyCreatorBase=void 0;t.RigidBodyCreatorBase=function(e,t,a,n,o){return{shape:e,comp:a,pos:new r.Vector(n,o),opos:{x:n,y:o},m:t,inv_m:0===t?0:1/t,inertia:0,inv_inertia:0,elasticity:.99,friction:.01,angFriction:.1,maxSpeed:0,vel:new r.Vector(0,0),acc:new r.Vector(0,0),keyForce:1,angKeyForce:.1,angle:0,angVel:0}};t.bodyUpdater=function(e){e.acc.unit(),e.acc.mult(e.keyForce),e.vel.add(e.acc),e.vel.mult(1-e.friction),0!==e.maxSpeed&&e.vel.mag()>e.maxSpeed&&(e.vel.unit(),e.vel.mult(e.maxSpeed)),e.angVel*=1-e.angFriction}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetAbilityData=t.cloneAbility=t.abilityDatas=void 0;var r={type:10,arrayType:3,canChangeState:!1,activated:!0,stateChangeType:1,activationType:0,drainType:1,minDrainStartValue:.05,drainValue:.02,regenValue:0,level:1,name:"lazersight",description:"Easier targeting with lazersight. Can be upgraded to a mining lazer.",time:null,armor:null,range:null,value:null,original:null,displayAsInstrument:!1,cost:100,data:{}},a={type:4,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:1,activationType:0,drainType:1,minDrainStartValue:8e-4,drainValue:3e-4,regenValue:0,level:1,name:"targetlock",description:"Some of the weapons that can be aquired requires a targetlock to be able to fire.",time:{value:1,curr:0},armor:null,range:{value:500},value:null,original:null,displayAsInstrument:!1,cost:500,data:{currentTargetGuid:0,target:null,timer:0,timerT:2e3,dropLockTimer:0,dropLockTimerT:2e3},requirements:{type:10,name:r.name}},n={type:11,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:0,activationType:1,drainType:1,minDrainStartValue:40,drainValue:0,regenValue:0,level:1,name:"mining rig",description:"Mine asteroids for iron than can be sold at spaceports",time:{value:0,curr:0},armor:null,range:null,value:null,original:null,displayAsInstrument:!1,cost:260,data:{iron:{value:0,max:3e3},platinum:{value:0,max:1e3},minerals:{value:0,max:200}},requirements:{type:4,name:a.name}},o={type:12,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:0,activationType:0,drainType:1,minDrainStartValue:0,drainValue:0,regenValue:0,level:1,name:"mining rig platinum upgrade",description:"Enhanced mining lazer to mine platinum",time:{value:0,curr:0},armor:null,range:null,value:null,original:null,displayAsInstrument:!1,cost:488,data:null,requirements:{type:11,name:n.name}},i={type:13,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:0,activationType:0,drainType:1,minDrainStartValue:0,drainValue:0,regenValue:0,level:1,name:"mining rig rare minerals upgrade",description:"Enhanced mining lazer to mine rare minerals",time:{value:0,curr:0},armor:null,range:null,value:null,original:null,displayAsInstrument:!1,cost:788,data:null,requirements:{type:12,name:o.name}},s={type:15,arrayType:3,canChangeState:!1,activated:!1,stateChangeType:1,activationType:0,drainType:0,minDrainStartValue:0,drainValue:.01,regenValue:0,level:0,name:"Co-axial gun mount",description:"Lock's ship standard space gun to target lock, or nearest enemeny depending on lock state.",time:{value:0,curr:0},armor:null,range:null,value:null,original:null,displayAsInstrument:!1,cost:748,data:null,requirements:{type:4,name:a.name}};t.abilityDatas={lazerSight:r,targetlock:a,coaxialMount:s,regen:{type:0,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:1,activationType:0,drainType:0,drainValue:.06,minDrainStartValue:3,regenValue:.04,level:1,name:"regeneration",description:"Regeneration will restore your ships integrity over time",time:null,armor:null,range:null,value:{n:.01,max:50},original:null,displayAsInstrument:!1,cost:500,data:{}},miningRig:n,miningRigPlatinum:o,miningRigRareMinerals:i,armorplates:{type:7,arrayType:3,canChangeState:!0,activated:!0,stateChangeType:1,activationType:0,drainType:1,drainValue:0,minDrainStartValue:0,regenValue:0,level:1,name:"armorplates",description:" Armor plates will make your ship more resillient to attacks.",time:null,armor:null,range:null,value:{n:1,max:1},original:null,displayAsInstrument:!1,cost:500,data:{}},ultrabright:{type:8,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:0,activationType:1,drainType:0,drainValue:.22,minDrainStartValue:5,regenValue:0,level:1,name:"ultrabright",description:"If you feel that space is too dark, Ultrabright is for you. Your halo will be supercharged by the energy created by your ship's reactor",time:null,armor:null,range:null,value:{n:200,max:200},original:null,displayAsInstrument:!0,cost:500,data:{}},cloak:{type:1,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:0,activationType:1,drainType:0,minDrainStartValue:1,drainValue:.1,regenValue:0,level:1,name:"cloak",description:"When cloaked, you will be almost invisible to the world outside the comfort of your ship.",time:{value:3e3,curr:3e3},armor:null,range:{value:400},value:null,original:null,displayAsInstrument:!1,cost:500,data:{}},ultraboost:{type:2,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:1,activationType:1,drainType:0,minDrainStartValue:20,drainValue:1,regenValue:0,level:1,name:"ultraboost",description:"Ultraboost will supercharge your thrusters when you have energy too spare.",time:{value:0,curr:20},armor:null,range:null,value:{n:1.3,max:-1},original:null,displayAsInstrument:!1,cost:500,data:{}},shield:{type:3,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:0,activationType:1,drainType:0,minDrainStartValue:35,drainValue:.2,regenValue:0,level:1,name:"shield",description:"Shields will protect from most projectiles heading your way.",time:null,armor:{type:1},range:{value:2},value:{n:1,max:-1},original:null,displayAsInstrument:!1,cost:500,data:{}},slowmotion:{type:5,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:0,activationType:1,drainType:0,minDrainStartValue:40,drainValue:2,regenValue:0,level:1,name:"slowmotion",description:"With this baby you can bend time and space as you wish, as long as you have energy to spare.",time:{value:3e3,curr:0},armor:null,range:null,value:null,original:null,displayAsInstrument:!1,cost:500,data:{}},traceline:{type:9,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:1,activationType:1,drainType:1,minDrainStartValue:0,drainValue:0,regenValue:0,level:1,name:"traceline",description:"Do you ever get lost? This might help.",time:{value:0,curr:0},armor:null,range:null,value:null,original:null,displayAsInstrument:!1,cost:288,data:null},strafeEngines:{type:14,arrayType:3,canChangeState:!0,activated:!1,stateChangeType:1,activationType:0,drainType:1,minDrainStartValue:0,drainValue:0,regenValue:0,level:0,name:"strafe engines",description:"Upgrade turn thrusters to enabe lateral movement",time:{value:0,curr:0},armor:null,range:null,value:null,original:null,displayAsInstrument:!1,cost:489,data:null},energy:{type:6,arrayType:3,canChangeState:!1,activated:!0,stateChangeType:1,activationType:0,drainType:1,drainValue:0,minDrainStartValue:0,regenValue:.104,level:1,name:"energy",description:"Energy is used to power most of the abilities available. Some weapons does also require energy.",time:null,armor:null,range:null,value:{n:.01,max:200},original:null,displayAsInstrument:!0,cost:500,data:{}}};t.cloneAbility=function(e){return JSON.parse(JSON.stringify(e))};t.resetAbilityData=function(){for(var e in t.abilityDatas)t.abilityDatas[e]=t.cloneAbility(t.abilityDatas[e])}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(1)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.offsetVectorArray=void 0;var a={};t.offsetVectorArray=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0);for(var a=e.length,n=0;n<a;n++)e[n].x=e[n].x+t,e[n].y=e[n].y+r;return e};var n=function(e,t){for(var r=e.length,a=0;a<r;a++)e[a].mult(t);return e},i=function(e,t){for(var r=function(e){for(var t=e.length,r=[],a=0;a<t;a++)r.push(e[a].clone());return r}(e),a=r.length,n=0;n<a;n++){var o=r[n];"x"!==t&&"xy"!==t||(o.x=-1*o.x),"y"!==t&&"xy"!==t||(o.y=-1*o.y)}return r};t.default=function(e,s,A){void 0===e&&(e=2),void 0===s&&(s=!1),void 0===A&&(A=0);var u=function(e,t){return e+"_"+t}(e,A);if(!s&&a[u])return a[u];var l=new r.Vector(1,-13,0),c=new r.Vector(2,-12,1),d=new r.Vector(1,0,2),p=new r.Vector(4-2.5*A,2,3),f=new r.Vector(2,2,4),h=new r.Vector(2,4,5),v=new r.Vector(1,6,6),g=new r.Vector(6-2*A,6,7),y=new r.Vector(6-3*A,8,8),m=new r.Vector(4-2*A,8-1*A,9),x=new r.Vector(2,8.5-2*A,10),S=new r.Vector(2,0),_=new r.Vector(2,6);t.offsetVectorArray([S,_],0,3);var T=o(o(o(o(o(o([],[l.id,c.id,d.id]),[d.id,c.id,p.id]),[d.id,p.id,f.id]),[f.id,p.id,h.id]),[h.id,p.id,x.id]),[h.id,v.id,x.id]),E=o(o(o([],[p.id,x.id,g.id]),[x.id,g.id,m.id]),[g.id,y.id,m.id]),M=n(t.offsetVectorArray([l,c,d,p,f,h,v,g,y,m,x],0,3),e),I=new r.Vector(l.x,l.y+2*e),L=o([I,d],i([I,d],"x")),w=new r.Vector(v.x+.2*e,v.y),b=new r.Vector(d.x-.2*e,d.y+1.5*e),P=o([w,b],i([w,b],"x")),R=n(o([S,_],i([S,_],"x")),e),O=i(M,"x");O[0].x+=4*e*A,O[1].x+=4.5*e*A,M[0].x+=3*e*A,M[1].x+=2*e*A,M[1].y+=1*e*A,M[0].y+=2*e*A,M[8].x-=3*e*A,O[8].x-=1.3*e*A,L[0].x+=3*e*A,L[2].x+=4*e*A;var C={leftWing:O,rightWing:M,hood:L,cockpitGlass:R,roof:P,baseWingIndexes:T,endWingIndexes:E,hoodIndexes:[0,1,2,1,2,3],cockpitglassIndexes:[0,1,2,1,2,3],roofIndexes:[0,1,2,1,2,3]};return s||(a[u]=C),C}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(2),r(0),r(9),r(56),r(8),r(3),r(22)],void 0===(n=function(e,t,r,a,n,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COORD_GUI_HUD_INV=t.COORD_GUI_HUD_M=void 0;var l=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},c=[],d=[],p=0,f=0,h=1;t.COORD_GUI_HUD_M=.005,t.COORD_GUI_HUD_INV=1/t.COORD_GUI_HUD_M,t.default=function(e){var v=e.WW,g=e.WH,y=e.SX,m=e.SY,x=e.gl,S=e.game,_=e.step,T=S.daylight.is_night,E=S.currentResW,M=S.currentResH,I=n.default(e);if(I&&!(S.currentLevel<=13)&&S.menuSettings.instruments&&!S.levelEditor){if(I.abilities.active.cloak||S.skillTree.active){if(!(p<.5))return;p+=.01*_}else p>.2&&(p-=.005*_);var L=I.damageTaken||!S.IS_PROCEDURAL&&i.default(I,v,g)||0!==I.forceX||0!==I.forceY;L?f<3*v&&(f+=h,h*=1.01):f>10?f*=.7:(h=1,f=0),d=[],c=[];for(var w=M*p,b=E*p,P=10+(L?5*Math.random():0),R=1/(4*p),O=m;O<m+M;O+=50){var C=O,G=(O-O%50)%200==0?25:18;r.line2Poly(E-P-1*R,C-m-m%50,E-G*R,C-m-m%50,c,2*R)}for(var D=y;D<y+E;D+=50){var N=D,B=(D-D%50)%200==0?25:18;r.line2Poly(N-y-y%50,M-P-1*R,N-y-y%50,M-B*R,d,2*R)}r.line2Poly(E-P,w,E-P,M-w,c,2),r.line2Poly(b,M-P,E-b,M-P,d,2),u.GlowCustomLayout({x:.5*E+y,y:M+m},1,d,e,T?1:0,T?0:1,0,1),u.GlowCustomLayout({x:E+y,y:.5*M+m},M/E,c,e,T?1:0,T?0:1,0,1);for(var F=l(Math.round(t.COORD_GUI_HUD_M*(.5*E+y)+f))+"'",V=l(Math.round(t.COORD_GUI_HUD_M*(.5*M+m)+-.5*f))+"'",k=[],X=o(o(o([],F.split("")),[""]),V.split("")),H=X.length,U=0;U<H;U++)k.push(s.default.create(X[U],A.TEXT_SIZE_SMALL,T?"r":"g"));return s.default.addListGL(x,a.default(f>5?a.GLctx.TextureDist:a.GLctx.Texture,x),k,10,M-2*A.TEXT_SIZE_SMALL*1,e),"instruments"}p=.5}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(12),r(23),r(18),r(21),r(180),r(7),r(59),r(14),r(1),r(32),r(6),r(47)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParticleTree=void 0;var f=new p.QuadTreeFastPoint32(s.rect_pool_pop(0,0,10,10),5,20);t.getParticleTree=function(){return f};var h=new l.Vector(0,0);t.default=function(e){var t=e.game,s=e.step,l=e.WW,p=e.WH,v=(e.SX,e.SY,e.SW,e.SH,performance.now());if(t.menuSettings.particles&&!t.levelEditor){for(var g=t.particles,y=[],m=e.game.screen.rectSS_400,x=u.getForce2Tree().queryInt(m),S=0;S<x.length;S++){var _=x[S];1===_.type&&_.intensity>0&&i.particleForExplosion(Math.min(.03*_.radius,450),_.pos.x,_.pos.y,t.particles)}var T=o.getAllAnomalies(e.game);for(S=0;S<T.length;S++){var E=T[S];if(e.game.screen.rectSS_2000.intersectsPoint(E.pos))for(var M=0;M<40;M++){E.positive?h.set(.1*E.radius,0):h.set(.9*E.radius+Math.random()*E.radius*.09,0),h.setAngle(Math.random()*Math.PI*2),h.add(E.pos);var I=c.createParticle(h.x,h.y,1*(Math.random()-.5),1*(Math.random()-.5),450+300*Math.random());g.push(I)}}var L,w=g.length;f.reset(),f.setup(m,5,20,4);for(S=0;S<w;S++)L=g[S],m.intersectsPoint(L.pos)&&f.insert(L);u.FastForce2CachedReversed(f,m,13);var b=f.references;w=b.length,y=[];for(S=0;S<w;S++){var P=(L=b[S]).vel.getLength();if(L.life<0&&P<.01||Math.random()>.98)A.pool_put(L.type,L);else{L.life-=s;var R=L.vel;P>20&&R.setLength(20);var O=R.x*s,C=R.y*s;L.pos.x+=O,L.pos.y+=C,R.x*=.98,R.y*=.98,L.vel.mult(.99),o.wormhole(L,e),y.push(L)}}t.particles=y;var G=t.customParticles;w=G.length;for(S=0;S<w;S++){var D=G[S];D.life-=s,n.default(D,s),D.vel.mult(.99),r.check(D,l,p)||D.life<0&&D.vel.getLength()<1||Math.random()>.98?(G.splice(S,1),S--,w--,D.remove=!0):(a.default(t,D,!1),o.wormhole(D,e))}var N=performance.now()-v;d.normalize(N,"ship/client/timing",60);return"particles"}t.particles=[]}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(5)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLineOfSight=void 0;t.getLineOfSight=function(e,t){return 0===r.getQuadTreesObj().queryRay([4,11,21,22],e,t.pos).filter(function(e){return 21===e.type||e.radius>t.radius}).length}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(17),r(1),r(4),r(7),r(5),r(14),r(6),r(47)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFragment=t.getFragmentTree=void 0;new a.Vector(0,0);var l=o.rect_pool_pop(0,0,0,0),c=new u.QuadTreeFastPoint32(o.rect_pool_pop(0,0,10,10),5,39);t.getFragmentTree=function(){return c},t.default=function(e){for(var t,a=e.game,o=e.step,u=(e.SW,e.SH,e.SX,e.SY,i.getQuadTreesObj()),d=a.fragments,p=d.length,f=[],h=a.screen.rectSS_800,v=a.screen.rectSS_600,g=v.x,y=v.y,m=g+v.width,x=y+v.height,S=0;S<p;S++){var _=(C=d[S]).pos.x,T=C.pos.y;_>g&&T>y&&_<m&&T<x&&f.push(C)}t=f.length,c.reset();c.setup(h,50,39,2);for(S=0;S<t;S++)c.insertUnsafe(f[S]);var E=f,M=E.length,I=u.queryTreesRect(r.PUSHING_TYPES,v),L=I.length;for(S=0;S<L;S++){var w=I[S];if(!w.remove){var b=w.radius;if(44===w.type&&(b=2*w.originalRadius),l.x=w.pos.x-b,l.y=w.pos.y-b,l.width=2*b,l.height=2*b,0===w.type||44===w.type)for(var P=(N=c.queryVec(w.pos,w.radius,w.radius)).length,R=0===w.type?3:.6,O=0;O<P;O+=2){var C=N[O];if(n.fine(3,w.comp[0].vertex,C.pos)){var G=Math.atan2(w.pos.y-C.pos.y,w.pos.x-C.pos.x);C.vel.setAngle(G+Math.PI),C.vel.setLength(R+Math.random());var D=.6*Math.random();C.rot=O%2==0?D:-D}}else{var N;for(P=(N=c.queryCircle(w.pos,w.radius)).length,O=0;O<P;O+=2){C=N[O],G=Math.atan2(w.pos.y-C.pos.y,w.pos.x-C.pos.x);C.vel.setAngle(G+Math.PI),C.vel.setLength(1+Math.random())}}}}s.FastForce2CachedReversed(c,v);for(S=0;S<M;S++){var B=(C=E[S]).vel,F=B.x*o,V=B.y*o;if(C.pos.x+=F,C.pos.y+=V,B.x*=.98,B.y*=.98,C.rot*=.95,0!==C.rot)for(O=0;O<3;O++)A.rotateVector(C.triangle[O],C.rot,C.triangle[O]);else Math.abs(C.rot)<.002&&(C.rot=0)}return"fragments"};var d=0;t.createFragment=function(e,t,r,n,o,i){void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0);var s=t.game.fragments,A=s.length>24e3?d:-1;if(A>=0){var u=s[A];u.pos.x=e.x,u.pos.y=e.y,u.vel.x=n,u.vel.y=o,u.rot=i,u.triangle=r}else{var l={pos:new a.Vector(e.x,e.y),vel:new a.Vector(n,o),remove:!1,triangle:r,rot:i};s.push(l)}A>=0&&++A>23999&&(A=0),A>=0&&(d=A)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateShipCredits=void 0;t.updateShipCredits=function(e,t){t>0&&(e.score+=3*t),e.credits+=t}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(17),r(98)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuadTreeInt32Point=t.intersectsInt32Arr_XYWH=t.intersectsInt32ArrXY=void 0;var n={};t.intersectsInt32ArrXY=function(e,t,r){return!(e[0]>t||e[0]+e[2]<t||e[1]>r||e[1]+e[3]<r)};t.intersectsInt32Arr_XYWH=function(e,t,r,a,n){return!(e[0]>t+a||e[0]+e[2]<t||e[1]>r+n||e[1]+e[3]<r)};var o=8,i=function(){function e(e,t,r,a){this.divide=!1,this.boundry=new Int32Array(e),this.capacity=r>=a?t*o:t,this.items=new Int32Array(this.capacity),this.itemsXY=new Int32Array(2*this.capacity),this.index=0,this.currentDepth=r,this.maxDepth=a,this.deleteBranchMarker=0}return e.prototype.update=function(e,t,r,a,n,o,i){this.boundry[0]=e,this.boundry[1]=t,this.boundry[2]=r,this.boundry[3]=a,this.capacity=n,this.currentDepth=o,this.maxDepth=i,this.index=0},e.prototype.subDivide=function(){var t=this.boundry[0],r=this.boundry[1],a=this.boundry[2],i=this.boundry[3],s=this.currentDepth+1,A=this.maxDepth,u=s>=A?this.capacity*o:this.capacity;if(this.northeast)this.northeast.update(t+Math.ceil(.5*a),r,Math.ceil(.5*a),Math.ceil(.5*i),u,s,A),this.northwest.update(t,r,Math.ceil(.5*a),Math.ceil(.5*i),u,s,A),this.southeast.update(t+Math.ceil(.5*a),r+Math.ceil(.5*i),Math.ceil(.5*a),Math.ceil(.5*i),u,s,A),this.southwest.update(t,r+Math.ceil(.5*i),Math.ceil(.5*a),Math.ceil(.5*i),u,s,A);else{var l=n[u];if(l&&l.length>4)return this.northeast=l.pop(),this.northwest=l.pop(),this.southeast=l.pop(),this.southwest=l.pop(),void this.subDivide();this.northeast=new e([t+Math.ceil(.5*a),r,Math.ceil(.5*a),Math.ceil(.5*i)],u,s,A),this.northwest=new e([t,r,Math.ceil(.5*a),Math.ceil(.5*i)],u,s,A),this.southeast=new e([t+Math.ceil(.5*a),r+Math.ceil(.5*i),Math.ceil(.5*a),Math.ceil(.5*i)],u,s,A),this.southwest=new e([t,r+Math.ceil(.5*i),Math.ceil(.5*a),Math.ceil(.5*i)],u,s,A)}this.divide=!0},e.prototype.___query=function(e,r,n,o,i,s,A){void 0===A&&(A=-1);var u=this.items,l=this.index,c=this.itemsXY;if(t.intersectsInt32Arr_XYWH(this.boundry,e,r,n,o)){for(var d=0;d<l;d++){var p=u[d];if(!s[p]&&p!==A){var f=2*d;a.intersectsXYWH_XY(e,r,n,o,c[f],c[f+1])&&(s[p]=!0,i.push(p))}}this.divide&&(this.northeast.___query(e,r,n,o,i,s,A),this.northwest.___query(e,r,n,o,i,s,A),this.southeast.___query(e,r,n,o,i,s,A),this.southwest.___query(e,r,n,o,i,s,A))}return i},e.prototype.insert=function(e,t,r){if(this.index<this.capacity){this.items[this.index]=e;var a=2*this.index;return this.itemsXY[a]=t,this.itemsXY[a+1]=r,this.index++,!0}this.divide||this.subDivide();var n=this.boundry[0]+.5*this.boundry[2],o=this.boundry[1]+.5*this.boundry[3];return t<n?r<o?this.northwest.insert(e,t,r):this.southwest.insert(e,t,r):r<o?this.northeast.insert(e,t,r):this.southeast.insert(e,t,r),!0},e.prototype.reset=function(){this.index=0;var e=!this.northwest;if(this.northwest){var t=this.northeast.reset(),r=this.northwest.reset(),a=this.southeast.reset(),o=this.southwest.reset();if(t&&r&&a&&o&&(this.deleteBranchMarker++,this.deleteBranchMarker>3)){var i=n[this.northeast.capacity];i||(i=n[this.northeast.capacity]=[]),i.push(this.northeast,this.northwest,this.southeast,this.southwest),this.northeast=null,this.northwest=null,this.southeast=null,this.southwest=null,this.deleteBranchMarker=0}this.divide=!1}return e},e.prototype.getDepth=function(e){return this.divide?Math.max(this.northeast.getDepth(e+1),this.northwest.getDepth(e+1),this.southeast.getDepth(e+1),this.southwest.getDepth(e+1)):e},e}(),s=function(){function e(e,t,r,a){void 0===a&&(a=8),this.divide=!1,this.setup(e,t,r,a)}return e.prototype.___queryXYWH=function(e,r,n,o,i,s,A){void 0===A&&(A=-1);var u=this.items,l=this.itemsXY;if(t.intersectsInt32Arr_XYWH(this.boundry,e,r,n,o)){for(var c=0;c<this.index;c++){var d=u[c];if(!s[d]&&d!==A){var p=2*c;a.intersectsXYWH_XY(e,r,n,o,l[p],l[p+1])&&(s[d]=1,i.push(d))}}this.divide&&(this.northeast.___query(e,r,n,o,i,s,A),this.northwest.___query(e,r,n,o,i,s,A),this.southeast.___query(e,r,n,o,i,s,A),this.southwest.___query(e,r,n,o,i,s,A))}return i},e.prototype.insertUnsafe=function(e){var t=e.pos.x,r=e.pos.y;if(this.references[this.totalItems]=e,this.totalItems++,this.index<this.capacity){this.items[this.index]=this.REFERENCE_INDEX;var a=2*this.index;this.itemsXY[a]=t,this.itemsXY[a+1]=r,this.index++}else{this.divide||this.subDivide();var n=this.boundry[0]+.5*this.boundry[2],o=this.boundry[1]+.5*this.boundry[3];t<n?r<o?this.northwest.insert(this.REFERENCE_INDEX,t,r):this.southwest.insert(this.REFERENCE_INDEX,t,r):r<o?this.northeast.insert(this.REFERENCE_INDEX,t,r):this.southeast.insert(this.REFERENCE_INDEX,t,r)}this.REFERENCE_INDEX++},e.prototype.insert=function(e){var r=e.pos.x,a=e.pos.y;if(!t.intersectsInt32ArrXY(this.boundry,r,a))return!1;if(this.references[this.totalItems]=e,this.totalItems++,this.index<this.capacity){this.items[this.index]=this.REFERENCE_INDEX;var n=2*this.index;return this.itemsXY[n]=r,this.itemsXY[n+1]=a,this.index++,this.REFERENCE_INDEX++,!0}return this.divide||this.subDivide(),this.northeast.insert(this.REFERENCE_INDEX,r,a)?(this.REFERENCE_INDEX++,!0):this.northwest.insert(this.REFERENCE_INDEX,r,a)?(this.REFERENCE_INDEX++,!0):this.southeast.insert(this.REFERENCE_INDEX,r,a)?(this.REFERENCE_INDEX++,!0):this.southwest.insert(this.REFERENCE_INDEX,r,a)?(this.REFERENCE_INDEX++,!0):(this.REFERENCE_INDEX++,!1)},e.prototype.subDivide=function(){var e=this.boundry[0],t=this.boundry[1],r=this.boundry[2],a=this.boundry[3],n=this.maxDepth,o=this.capacity;this.northeast?(this.northeast.update(e+Math.ceil(.5*r),t,Math.ceil(.5*r),Math.ceil(.5*a),o,0,n),this.northwest.update(e,t,Math.ceil(.5*r),Math.ceil(.5*a),o,0,n),this.southeast.update(e+Math.ceil(.5*r),t+Math.ceil(.5*a),Math.ceil(.5*r),Math.ceil(.5*a),o,0,n),this.southwest.update(e,t+Math.ceil(.5*a),Math.ceil(.5*r),Math.ceil(.5*a),o,0,n)):(this.northeast=new i([e+Math.ceil(.5*r),t,Math.ceil(.5*r),Math.ceil(.5*a)],o,0,n),this.northwest=new i([e,t,Math.ceil(.5*r),Math.ceil(.5*a)],o,0,n),this.southeast=new i([e+Math.ceil(.5*r),t+Math.ceil(.5*a),Math.ceil(.5*r),Math.ceil(.5*a)],o,0,n),this.southwest=new i([e,t+Math.ceil(.5*a),Math.ceil(.5*r),Math.ceil(.5*a)],o,0,n)),this.divide=!0},e.prototype.___query=function(e,r,n,o){var i=[],s=[],A=this.items,u=this.itemsXY;if(t.intersectsInt32Arr_XYWH(this.boundry,e,r,n,o)){for(var l=0;l<this.index;l++){var c=A[l];if(!i[c]){var d=2*l;a.intersectsXYWH_XY(e,r,n,o,u[d],u[d+1])&&(i[c]=1,s.push(c))}}this.divide&&(this.northeast.___query(e,r,n,o,s,i),this.northwest.___query(e,r,n,o,s,i),this.southeast.___query(e,r,n,o,s,i),this.southwest.___query(e,r,n,o,s,i))}var p=s.length;if(0===p)return[];var f=new Array(p);for(l=0;l<p;l++)f[l]=this.references[s[l]];return f},e.prototype.query=function(e){var t=e.radius;return this.___query(e.pos.x-t,e.pos.y-t,2*t,t)},e.prototype.queryCircle=function(e,t){var r=this.___query(e.x-t,e.y-t,2*t,2*t);if(0===r.length)return r;for(var n=.7*t,o=[e.x-n,e.y-n,2*n,2*n],i=r.length,s=[],A=0;A<i;A++){var u=r[A];a.intersectsArr_XY(o,u.pos.x,u.pos.y)?s.push(u):(e.x-u.pos.x)*(e.x-u.pos.x)+(e.y-u.pos.y)*(e.y-u.pos.y)<t*t&&s.push(u)}return s},e.prototype.queryInt=function(e){return this.___query(e.x,e.y,e.width,e.height)},e.prototype.queryVec=function(e,t,r){return this.___query(e.x-t,e.y-r,2*t,2*r)},e.prototype.destroy=function(){},e.prototype.reset=function(){this.index=0,this.totalItems=0,this.REFERENCE_INDEX=0,this.references=[],this.divide&&(this.northeast.reset(),this.northwest.reset(),this.southeast.reset(),this.southwest.reset()),this.divide=!1},e.prototype.setup=function(e,t,a,n){void 0===n&&(n=8);var o=e.x,i=e.y,s=e.width,A=e.height;this.boundry=new Int32Array([o,i,s,A]),(o>2147483647||i>2147483647||s>2147483647||A>2147483647||o<-2147483648||i<-2147483648)&&console.log("Out of range @ Quadtree [Int32 point] constructor "+this.boundry.join(",")+" "+r.TypesToString(this.itemType)),this.items=new Int32Array(t),this.itemsXY=new Int32Array(2*t),this.capacity=t,this.itemType=a,this.references=[],this.REFERENCE_INDEX=0,this.index=0,this.totalItems=0,this.minX=65535,this.minY=65535,this.maxW=0,this.maxH=0,this.maxDepth=n},e.prototype.getRangeType=function(){return"INT32 (P)"},e.prototype.getDepth=function(){return this.divide?Math.max(this.northeast.getDepth(1),this.northwest.getDepth(1),this.southeast.getDepth(1),this.southwest.getDepth(1)):0},e.prototype.visualize=function(e,t,r,a,n,o,i){if(void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=.3),this.divide){var s=i,A=10;this.__visualize(s,A,e,t,r,a,r-300,a+40,this.northwest,n,o),this.__visualize(s,A,e,t,r,a,r-100,a+40,this.northeast,n,o),this.__visualize(s,A,e,t,r,a,r+100,a+40,this.southwest,n,o),this.__visualize(s,A,e,t,r,a,r+300,a+40,this.southeast,n,o)}},e.prototype.__visualize=function(e,t,r,a,n,o,i,s,A,u,l){var c=A.boundry;r.push((u+c[0])*e,(l+c[1])*e,(u+(c[0]+c[2]))*e,(l+c[1])*e,(u+(c[0]+c[2]))*e,(l+c[1])*e,(u+(c[0]+c[2]))*e,(l+(c[1]+c[3]))*e,(u+c[0])*e,(l+c[1])*e,(u+c[0])*e,(l+(c[1]+c[3]))*e,(u+c[0])*e,(l+(c[1]+c[3]))*e,(u+(c[0]+c[2]))*e,(l+(c[1]+c[3]))*e),t*=.25,A.divide?(this.__visualize(e,t,r,a,i,s,i-30*t,s+40,A.northwest,u,l),this.__visualize(e,t,r,a,i,s,i-10*t,s+40,A.northeast,u,l),this.__visualize(e,t,r,a,i,s,i+10*t,s+40,A.southwest,u,l),this.__visualize(e,t,r,a,i,s,i+30*t,s+40,A.southeast,u,l)):A.southwest&&(this.__visualize(e,t,a,a,i,s,i-30*t,s+40,A.northwest,u,l),this.__visualize(e,t,a,a,i,s,i-10*t,s+40,A.northeast,u,l),this.__visualize(e,t,a,a,i,s,i+10*t,s+40,A.southwest,u,l),this.__visualize(e,t,a,a,i,s,i+30*t,s+40,A.southeast,u,l))},e}();t.QuadTreeInt32Point=s}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(7)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntArrToRect=t.intersectsXYWH_XY=t.intersectsArr_XY=void 0;t.intersectsArr_XY=function(e,t,r){return!(e[0]>t||e[0]+e[2]<t||e[1]>r||e[1]+e[3]<r)};t.intersectsXYWH_XY=function(e,t,r,a,n,o){return!(e>n||e+r<n||t>o||t+a<o)};t.IntArrToRect=function(e){return new r.Rectangle(e[0],e[1],e[2],e[3])}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(2),r(0)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addDistBox=void 0;var o=[],i=[];t.addDistBox=function(e,t,a,n,s,A,u,l,c,d,p){var f=o.pop();if(f)f.pos.x=e,f.pos.y=t,f.width=a,f.height=n,f.destination.x=s,f.destination.y=A,f.toWidth=u,f.toHeight=l,f.remove=!1,f.freeze=0,i.push(f);else{var h={pos:new r.Vector(e,t),destination:new r.Vector(s,A),vel:new r.Vector(c,d),glitch:p,width:a,height:n,toWidth:u,toHeight:l,remove:!1,polyIndex:Math.floor(4.99*Math.random()),freeze:0};i.push(h)}};var s=[],A=[],u=[],l=[],c=[],d=[s,A,u,l,c];Number.MAX_SAFE_INTEGER;t.default=function(e){var t=e.gl,r=(e.SX,e.SY,e.SW,e.SH,e.game);e.step;s.length=0,A.length=0,u.length=0,l.length=0,c.length=0;for(var p=0;p<i.length;p++){(h=i[p]).freeze>0?h.freeze--:(h.pos.x+=h.vel.x,h.pos.y+=h.vel.y,(h.pos.x-h.width>h.destination.x||h.pos.x+h.width<h.destination.x)&&(h.remove=!0),h.freeze=Math.random()>.92?Math.round(10*Math.random()):0)}var f=[];for(p=0;p<i.length;p++){var h;(h=i[p]).remove?o.push(h):f.push(h),d[h.polyIndex].push(h.pos.x,h.pos.y,h.pos.x+h.width,h.pos.y,h.pos.x,h.pos.y+h.height,h.pos.x,h.pos.y+h.height,h.pos.x+h.width,h.pos.y+h.height,h.pos.x+h.width,h.pos.y)}return i=f,(s.length||A.length||u.length||l.length||c.length)&&(n.default(n.GLctx.Vertices,t),t.blendFunc(t.DST_COLOR,t.ZERO),a.drawColor(c,t,0,0,0,1),t.blendFunc(t.ONE,t.ONE),r.daylight.is_night?(a.drawColor(s,t,.6,.3,.3,.9),a.drawColor(A,t,.6,.1,.1,.9),a.drawColor(u,t,.6,.3,.1,.9),a.drawColor(l,t,.6,.1,.3,.9)):(a.drawColor(s,t,.3,.3,.3,.9),a.drawColor(A,t,.3,.1,.1,.9),a.drawColor(u,t,.1,.3,.1,.9),a.drawColor(l,t,.1,.1,.3,.9))),"distbox"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0),r(2)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupFrameBuffer=t.setTargetToCanvas=t.renderFrameBuffer=t.setTargetToFrameBuffer=t.resetFrameBuffer=void 0;var o=null,i=null;t.resetFrameBuffer=function(e){var t=e.gl;e.game;t.bindFramebuffer(t.FRAMEBUFFER,i),t.viewport(0,0,t.canvas.width,t.canvas.height)};t.setTargetToFrameBuffer=function(e){var t=e.gl,a=e.game;if(t.bindFramebuffer(t.FRAMEBUFFER,i),t.viewport(0,0,t.canvas.width,t.canvas.height),a.menuSettings.motionBlur){t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),r.default(r.GLctx.Vertices,t);var o=[];n.fillPoly(0,0,0,t.canvas.width,t.canvas.height,o),n.drawColor(o,t,0,0,0,.3),t.blendFunc(t.ONE,t.ONE)}else t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)};t.renderFrameBuffer=function(e,t,r){e.bindFramebuffer(e.FRAMEBUFFER,null),e.useProgram(t),e.bindTexture(e.TEXTURE_2D,r?o:null),e.viewport(0,0,e.canvas.width,e.canvas.height);var n=a.GLAttribLocations(e,"a_texcoord"),i=a.GLUniformLocation(e,"u_matrix"),s=a.GLUniformLocation(e,"u_texture"),A=a.GLUniformLocation(e,"distortionStart"),u=a.GLUniformLocation(e,"distortionEnd");e.uniform1f(A,Math.random()),e.uniform1f(u,Math.random());var l=window.m4;e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0);var c=l.orthographic(0,e.canvas.width,e.canvas.height,0,-1,1);c=l.translate(c,0,e.canvas.height,0),c=l.scale(c,e.canvas.width,-e.canvas.height,1),e.uniformMatrix4fv(i,!1,c),e.uniform1i(s,0),e.drawArrays(e.TRIANGLES,0,6)};t.setTargetToCanvas=function(e){e.bindFramebuffer(e.FRAMEBUFFER,null)};t.setupFrameBuffer=function(e){var t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t);var r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),o=e.createTexture(),e.bindTexture(e.TEXTURE_2D,o);var a=e.RGBA,n=e.RGBA,s=e.UNSIGNED_BYTE;e.texImage2D(e.TEXTURE_2D,0,a,e.canvas.width,e.canvas.height,0,n,s,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),i=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,i);var A=e.COLOR_ATTACHMENT0;e.framebufferTexture2D(e.FRAMEBUFFER,A,e.TEXTURE_2D,o,0)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(3),r(2),r(67),r(5),r(194),r(1)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RCGL_POLYS=t.ignoreRayCasterShape=t.drawShipTriangleForRayCaster=t.blockCirclePolyForRayCaster2=void 0;new A.Vector(0,0),new A.Vector(0,0),new A.Vector(0,0);t.blockCirclePolyForRayCaster2=function(e,t,r,n,i,s,A,u,l,c,d){for(var p=e=t<10?3:e,f=r+Math.cos(a.doublePI*(p/e)+i)*t>>0,h=n+Math.sin(a.doublePI*(p/e)+i)*t>>0,v=[],g=[];p>-1;--p){var y=r+Math.cos(a.doublePI*(p/e)+i)*t>>0,m=n+Math.sin(a.doublePI*(p/e)+i)*t>>0;v.push(f-u,h-l,y-u,m-l),g.push({ax:f-u,ay:h-l,bx:y-u,by:m-l}),f=y,h=m}for(var x=g.length,S=0;S<x;S++){var _=g[S],T=(R=_.ax)-c,E=(O=_.ay)-d,M=(C=_.bx)-c,I=(G=_.by)-d,L=o.OperatorApproxDist97(T,E)+o.OperatorApproxDist97(M,I);g[S].dist=L}var w=g.sort(function(e,t){return e.dist-t.dist}),b=Math.ceil(.5*e)+1;for(S=0;S<b;S++){var P=w[S],R=P.ax,O=P.ay,C=P.bx,G=P.by;s.push(R,O,C,G)}};t.drawShipTriangleForRayCaster=function(e,t,r,a,n,o){t.x,t.y;o.push(e[0].x-a,e[0].y-n,e[1].x-a,e[1].y-n),o.push(e[0].x-a,e[0].y-n,e[2].x-a,e[2].y-n),o.push(e[1].x-a,e[1].y-n,e[2].x-a,e[2].y-n)};t.ignoreRayCasterShape=function(e,t){return r.distanceBetweenXYXY(e.pos.x,e.pos.y,t.x,t.y)<=.95*e.radius};t.RCGL_POLYS=function(e,r,a,o,A){var u=A.game,l=A.SX,c=A.SY,d=A.SW,p=A.SH,f=i.getQuadTreesObj();if(f.All){for(var h=r.x-l,v=r.y-c,g=f.queryTreesRect([4,22,11,21,43,42,41,24],e),y=0;y<g.length;y++){var m=g[y];n.inPerimiter(m.pos,r,a,a,m.radius)&&(11!==m.type&&t.ignoreRayCasterShape(m,r)||t.blockCirclePolyForRayCaster2(m.sides,m.radius>10?m.radius-2:m.radius,m.pos.x,m.pos.y,m.angle,o,p,l,c,h,v))}var x=f.queryTreesRect([0,2,1,49,44],e),S=x.length;for(y=0;y<S;y++){var _=x[y];s.trianglePoint(r,_.comp[0].vertex)||t.drawShipTriangleForRayCaster(_.comp[0].vertex,_.pos,d,l,c,o)}var T=u.spaceSnake,E=T.length;for(y=0;y<E;y++)for(var M=T[y].segments,I=0;I<M.length;I++){var L=M[I];e.intersectsIM(L)&&(t.ignoreRayCasterShape(L,r)||t.blockCirclePolyForRayCaster2(10,1.2*L.radius,L.pos.x,L.pos.y,L.angle,o,p,l,c,h,v))}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSectorSize=t.gridPosToWorld=t.getPoistionXYinGrid=t.getPoistionVecXYinGrid=t.getSectorsVecWrapped=t.getSectorsVec=t.getSectors=t.getSectorsAsFlatList=t.getSectorsAsFlatListWrapped=t.getSectorIndexesAsFlatListsWrapped=t.updateGrid3d=t.updateGrid3dRadiusBased=t.addNewToGrid3d=t.RESOLUTION=void 0,t.RESOLUTION=.005;t.addNewToGrid3d=function(e,r,a){void 0===a&&(a=!1);for(var n=r.length-1;n>-1;--n){var o=r[n];if(a){var i=Math.floor(o.pos.x*t.RESOLUTION);e[Math.floor(o.pos.y*t.RESOLUTION)][i].push(o)}}};t.updateGrid3dRadiusBased=function(e,r,a){for(var n=a?2:1,o=r.length-1;o>-1;--o){var i=r[o];if(a||!i.remove)for(var s=Math.floor(i.pos.x*t.RESOLUTION),A=Math.floor(i.pos.y*t.RESOLUTION),u=Math.floor(i.radius*t.RESOLUTION)+n,l=t.getSectorIndexesAsFlatListsWrapped(e,s,A,u),c=l[0],d=l[1],p=c.length,f=0;f<p;f++)for(var h=0;h<p;h++){var v=c[f],g=e[d[h]][v];if(a)for(var y=g.length,m=0;m<y;m++)g.pop();else g.push(i)}}};t.updateGrid3d=function(e){for(var r=e.length,a=e[0].length,n=0;n<r;n++)for(var o=0;o<a;o++)for(var i=e[n][o],s=i.length,A=0;A<s;A++){var u=i[A];if(u.remove)i.splice(A,1),A--,s--;else{var l=Math.floor(u.pos.x*t.RESOLUTION),c=Math.floor(u.pos.y*t.RESOLUTION);l===o&&c===n||(i.splice(A,1),A--,s--,e[c][l].push(u))}}};t.getSectorIndexesAsFlatListsWrapped=function(e,t,r,a){void 0===a&&(a=1);for(var n=Math.floor(t),o=Math.floor(r),i=e[0].length-1,s=e.length-1,A=[],u=[],l=[],c=a+a+1,d=0;d<c;d++){l.push(d-a);var p=n-(d-a),f=o-(d-a),h=p<0?i+1+p:p>i?p-i:p,v=f<0?s+1+f:f>s?f-s:f;A.push(h),u.push(v)}return[A,u]};t.getSectorsAsFlatListWrapped=function(e,t,r,a){void 0===a&&(a=1);for(var n=Math.floor(t),o=Math.floor(r),i=[],s=e[0].length-1,A=e.length-1,u=[],l=[],c=[],d=a+a+1,p=0;p<d;p++){c.push(p-a);var f=n-(p-a),h=o-(p-a),v=f<0?s+1+f:f>s?f-s:f,g=h<0?A+1+h:h>A?h-A:h;u.push(v),l.push(g)}for(var y=0;y<d;y++)for(var m=0;m<d;m++){var x=u[m],S=l[y];if(!(a>1&&S===o&&x===n)){var _=e[S][x],T=_.length;for(p=0;p<T;p++)i.push(_[p])}}return i};t.getSectorsAsFlatList=function(e,t,r,a){void 0===a&&(a=1);for(var n=[],o=e[0].length,i=e.length,s=Math.max(t-a,0),A=Math.max(r-a,0),u=Math.min(t+a+1,o),l=Math.min(r+a+1,i),c=A;c<l;c++)for(var d=s;d<u;d++)for(var p=e[c][d],f=p.length,h=0;h<f;h++)n.push(p[h]);return n},t.default=function(e,r,a){for(var n=function(e,t){for(var r=[],a=0;a<t;a++){for(var n=[],o=0;o<e;o++)n.push([]);r.push(n)}return r}(Math.ceil(r*t.RESOLUTION),Math.ceil(a*t.RESOLUTION)),o=e.length,i=0;i<o;i++){var s=e[i],A=Math.floor(s.pos.x*t.RESOLUTION);n[Math.floor(s.pos.y*t.RESOLUTION)][A].push(s)}return n};t.getSectors=function(e,r,a,n){void 0===n&&(n=1);var o=Math.floor(r*t.RESOLUTION),i=Math.floor(a*t.RESOLUTION),s=Math.floor(n*t.RESOLUTION);return t.getSectorsAsFlatList(e,o,i,s)};t.getSectorsVec=function(e,r,a){void 0===a&&(a=1);var n=Math.floor(r.x*t.RESOLUTION),o=Math.floor(r.y*t.RESOLUTION),i=Math.floor(a*t.RESOLUTION);return t.getSectorsAsFlatList(e,n,o,i)};t.getSectorsVecWrapped=function(e,r,a){void 0===a&&(a=1);var n=Math.floor(r.x*t.RESOLUTION),o=Math.floor(r.y*t.RESOLUTION),i=Math.floor(a*t.RESOLUTION);return t.getSectorsAsFlatListWrapped(e,n,o,i)};t.getPoistionVecXYinGrid=function(e){return{x:Math.floor(e.x*t.RESOLUTION),y:Math.floor(e.y*t.RESOLUTION)}};t.getPoistionXYinGrid=function(e,r){return{x:Math.floor(e*t.RESOLUTION),y:Math.floor(r*t.RESOLUTION)}};t.gridPosToWorld=function(e,r,a,n){var o=e/t.RESOLUTION,i=r/t.RESOLUTION;if(n){var s=t.getSectorSize(a,n);o+=.5*s.w,i+=.5*s.h}return{x:o,y:i}};t.getSectorSize=function(e,r){return{w:e/(e*t.RESOLUTION),h:r/(r*t.RESOLUTION)}}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(2),r(8),r(0),r(3),r(204),r(139)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSubtitle=t.resetSubtitles=void 0;var A=null,u=[],l={},c=0,d=0;t.resetSubtitles=function(){l={},c=0};t.createSubtitle=function(e){if(!A){if(l[e.text.join("")]>0)return!1;l[e.text.join("")]=e.noShowAgainMS,A=e;for(var t=0,r=0;r<e.text.length;r++)t+=e.text[r].length,e.text[r];return d=c=Math.max(5e3,90*t),!0}return!1};var p=0,f=0;t.default=function(e){var t=e.game,h=e.gl,v=e.SH,g=(e.SX,e.SY,e.stepMS),y=e.step;e.SW;if(t.menuSettings.commanderHelp){if(t.currentLevel<=13)return c=0,void(A=null);for(var m in l)l[m]-=g;if((c-=g)<0&&(A=null,f=0),0!==t.player.length&&A){u=[];var x=A,S=v-80,_=o.TEXT_SIZE_SMALL;f<1&&c>.5*d?f+=.05:c<300&&(f-=.05)<0&&(f=0),f>.4&&(f=.4);for(var T=[],E=x.text.length-1;E>-1;E--){var M=a.default.create(x.text[E],_,"w");T.push(M),r.fillPoly(-1,16,S-4,M.w+8,_+8,u),S-=_+16}s.showVideoFeed(e,60,S-40,x.face);var I=function(e,t,r,a,n){void 0===n&&(n=1);var o=[],s=n<.5?(.5-n)*e*.5:0;o.push(r+s,a,r+s+10,a);for(var A=e-(s+10),u=s+10;u<A;u++)o.push(r+u,a+44*i.PerlinNoise2d(p+.22*u,5)*n);return o.push(r-s+e-10,a,r+e-s,a),p+=8.9*t,o}(80,y,130,S,f);n.default(n.GLctx.Vertices,h),r.drawColor(I,h,0,.5,0,1,h.LINE_STRIP),h.disable(h.BLEND),r.drawColor(u,h,.1,.1,.1,.66),h.enable(h.BLEND);var L=n.default(c<200||c>d-200?n.GLctx.TextureDist:n.GLctx.Texture,h);for(E=x.text.length-1;E>-1;E--){M=T[E];S+=_+16,a.default.addGL(h,L,M,20,S,e,!1)}return"subtitles"}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(1),r(4),r(3),r(16)],void 0===(n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRocket=t.createRocketClient=void 0;t.createRocketClient=function(e){return console.error("damage not present in creatorData"),o(o({damage:{type:0,value:0,valuePercent:0,stunMS:0,pushPercentM:0,slowPercentM:0},ownerType:e.ownerType,ownerGuid:e.ownerGuid,target:e.target,type:e.target?30:32,collType:12,guid:a.getGuid(),pos:new r.Vector(e.pos.x,e.pos.y),vel:new r.Vector(e.vel.x,e.vel.y),life:e.life,radius:5,angle:e.angle,thrust:new r.Vector(0,0),tailLayout:new r.Vector(30,0),netpos:new r.Vector(0,0),netvel:new r.Vector(0,0),netangle:0},i.setImovableDefaults(null)),{mass:40,inv_m:.025,armor:null,subType:0})};t.createRocket=function(e,t,s,A,u){void 0===A&&(A=0),void 0===u&&(u={});var l=new r.Vector(0,0);return l.setLength(e.vel.getLength()+1),l.setAngle(e.angle+.005*(Math.random()-.5)+A),o(o(o({damage:t.damage,ownerType:e.type,ownerGuid:e.guid,target:s,collType:12,type:s?30:32,guid:a.getGuid(),pos:new r.Vector(e.pos.x+Math.cos(e.angle)*n.SHIP_LENGTH_RADIUS,e.pos.y+Math.sin(e.angle)*n.SHIP_LENGTH_RADIUS),vel:l,life:n.ROCKET_START_LIFE,radius:5,angle:e.angle+A,thrust:new r.Vector(0,0),tailLayout:new r.Vector(1===u.subType?6:30,0),netpos:new r.Vector(0,0),netvel:new r.Vector(0,0),netangle:0},i.setImovableDefaults(null)),{mass:240,inv_m:1/240,armor:null,subType:0}),u)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(17),r(78),r(10),r(17)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PredatorLevelUpgrade=t.getUpgradeLevel=void 0;t.getUpgradeLevel=function(e){return 0|e.level};var i=function(e,t){if(r.ShipLike(t.type)||o.PredatorLike(t.type)||22===t.type){var a=r.ShipLike(e.type),n=o.PredatorLike(e.type),i=n?.3:1;a||n?(e.level<1?e.level+=1*i:e.level>2?e.level+=.2*i:e.level+=.4*i,e.life=Math.max(10,Math.min(1.1*e.life,60))*i):(e.life+=2,e.level+=.1),e.level>3&&(e.level=3)}},s=function(e,t,r){var n;switch(e.type){case 32:case 30:var o=e;n=a.findShipLikeWithGuid(t,o.ownerGuid,o.ownerType);break;case 25:o=e;n=a.findShipLikeWithGuid(t,o.ownerGuid,o.owenerType)}n&&i(n,r)};t.PredatorLevelUpgrade=function(e,t){(t.remove||t.life<1)&&i(e,t)};t.default=function(e,t,a){e.remove&&t.remove&&(void 0!==e.level?r.isProjectile(t.type)&&s(t,a,e):void 0!==t.level&&r.isProjectile(e.type)&&s(e,a,t))}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfectionRate=void 0;t.InfectionRate=function(){return Math.random()>.96}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(10),r(3)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandBonusType=void 0;t.default=function(e,t,a){e.subType;r.LOG_GL_FIXED_FORCED("BONUSES NOT IMPLEMENTED","ERR")};t.getRandBonusType=function(e){if(void 0===e&&(e=.05),Math.random()<e)switch(Math.floor(16*Math.random())){case 0:return 51;case 1:return 52;case 2:case 3:case 4:return 54;case 5:return 58;case 6:return 59;case 7:case 8:return 52;case 9:return 60;case 10:return 61;case 11:return 57;case 12:return 63;case 13:return 64;case 14:return 53;case 15:return 65}return 4}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(7),r(9),r(6),r(11),r(37),r(41),r(34),r(36),r(10),r(5),r(17),r(4),r(3),r(10),r(1)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f,h,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProceduralDirectorSetup=t.ProceduralResetDirector=void 0;var g=10,y=30,m=9,x=11,S=1e4,_=S,T=r.rect_pool_pop(0,0,0,0),E=0,M=!0,I=!1,L=!1,w=!1,b=!1;t.ProceduralResetDirector=function(){_=_,E=S,I=!1,L=!1,w=!1,b=!1};t.ProceduralDirectorSetup=function(e){y=e.enemies,m=e.spacesnakes,x=e.spacesquids,g=e.spaceSpiders,e.npcs,S=e.campingTimeout,e.destroyers};var P=function(e,t,r){if(t.length>0){var a=t[Math.floor(Math.random()*t.length)];a.ownedByStructureGuid||a.ownedByStructureType||(a.restPos.setFromVec(r),a.prioritzeRestpos=!0)}},R=function(e,t){var r=e.SX,a=e.SY,n=e.SW,o=e.SH,i=e.game.screen.rectSS_2000,s=o,A=0,u=0,l=Math.random(),c=4;if(t){var d=r+.5*n,p=a+.5*o;t.x>d?c=t.y>p?l>.6?3:2:l>.6?3:0:t.x<d&&(c=t.y>p?l>.6?1:2:l>.6?1:0)}else c=Math.floor(4*Math.random());switch(c){case 0:A=i.x+i.width*Math.random(),u=i.y-s;break;case 1:A=i.x-s,u=i.y+i.height*Math.random();break;case 2:A=i.x+i.width*Math.random(),u=i.y+i.height+s;break;case 3:A=i.x+i.width+s,u=i.y+i.height*Math.random()}return{x:A,y:u}},O=0,C=0,G=0;t.default=function(e){e.SX,e.SY;var t,r,D,N,B=e.SW,F=e.SH,V=e.game,k=e.stepMS,X=a.default(e),H=e.game.daylight;if(!H.is_night&&X)for(var U=[e.game.spaceSquids,e.game.spaceSpiders,e.game.spaceSnake],W=0;W<U.length;W++)for(var Y=U[W],q=Y.length,z=0;z<q;z++){var j=Y[z];if(6!==j.ownedByStructureType){var K=p.distanceBetweenVectors(j.pos,j.restPos);if(V.screen.rectSS_2000.intersectsPoint(j.restPos)){var Z=R(e,j.pos);j.restPos=new v.Vector(Z.x,Z.y),h.LOG_GL("relocating restpos outside rect "+d.TypesToString(j.type))}K>1200&&(j.prioritzeRestpos=!0)}}if(H.is_dawn&&!b&&V.notifications.push({type:72,life:f.NOTIFICATION_LIFE,message:"Dawn is nearing, it will be daylight soon"}),H.is_day&&!L){if(X&&X.inSafeZone){for(var Q=c.getQuadTreesObj().query([3],X)[0],J=0,$=[],ee=0;ee<V.npcs.length;ee++){var te=V.npcs[ee];te.miningRig&&te.miningRig.base&&te.miningRig.base.guid===Q.guid&&(J++,$.push(te))}if(J<5){var re=10-J;h.LOG_GL("creating "+re+" workers");for(W=0;W<re;W++){var ae=R(e),ne=o.createNPCs(e,1,{pos:new v.Vector(ae.x,ae.y)},-1)[0];ne.miningRig.base=Q,V.npcs.push(ne)}}else if(J>13&&V.spacePorts.length>1){var oe=V.spacePorts.find(function(e){return e.guid!==Q.guid});for(W=15;W<$.length;W++){$[W].miningRig.base=oe,h.LOG_GL("reassigning worker from"+Q.guid+" to "+oe.guid)}}}V.notifications.push({type:73,life:f.NOTIFICATION_LIFE,message:"Daylight is here."})}if(H.is_dusk&&!w&&V.notifications.push({type:71,life:f.NOTIFICATION_LIFE,message:"It will be dark soon..."}),H.is_night&&!I&&V.notifications.push({type:71,life:f.NOTIFICATION_LIFE,message:"The night is here..."}),I=H.is_night,b=H.is_dawn,L=H.is_day,w=H.is_dusk,V.isPaused||V.skillTree.active||V.clock<36e4||V.daylight.is_day)return M=!0,!1;if((O+=e.stepMS)>3e4&&(S>1e4&&(S*=.95),O=0,++G>8&&(C=1e-7*G)),M&&(V.notifications.push({type:71,life:f.NOTIFICATION_LIFE,message:"Things will only get harder from now.."}),M=!1),X){var ie=c.getQuadTreesObj();ie.All.query;var se=ie.queryTreesVec([6],X.pos,X.radius,X.radius);for(W=0;W<se.length;W++){var Ae=se[W];if(p.distanceBetweenVectors(Ae.pos,X.pos)<Ae.radius-900)return void 0;l.LOG_GL_FIXED("DIRECTOR ON","PLAYER IN ANCIENT")}X.inSafeZone?_>100&&(_-=4):_=S,T.intersectsPoint(X.pos)?E+=k:(T.x=X.pos.x-.5*B,T.y=X.pos.y-.5*F,T.width=B,T.height=F,E=0);var ue=Math.random()>.5?1.5*B:-1.5*B;if(E>_||X.inSafeZone&&E>.5*_||Math.random()<C){if(h.LOG_GL("-- CAMPING DETECTED --"),V.enemies.length<y){0;var le=R(e);if(0===ie.queryTreesVec([6],le,50,50).length){var ce=o.createEnemies(e,1+Math.floor(5*Math.random()));i.default(ce,le.x,le.y,300,300),(t=V.enemies).push.apply(t,ce)}}if(V.spaceSnake.length<m){le=R(e);0===ie.queryTreesVec([6],le,50,50).length&&(r=V.spaceSnake).push.apply(r,s.default(e,1,le.x,le.y))}if(V.spaceSquids.length<x){le=R(e);0===ie.queryTreesVec([6],le,50,50).length&&(D=V.spaceSquids).push.apply(D,A.default(e,1,le.x,le.y,60*Math.random()+140))}if(V.spaceSpiders.length<g){le=R(e);0===ie.queryTreesVec([6],le,50,50).length&&(N=V.spaceSpiders).push.apply(N,u.default(e,1,le.x,le.y))}if(I&&(X.inSafeZone||Math.random()>.5)&&(h.LOG_GL("-- camping setting targets:"),G>2&&P(0,V.spaceSpiders,X.pos),G>4&&P(0,V.spaceSnake,X.pos),G>6&&P(0,V.spaceSquids,X.pos),V.enemies.length>0)){var de=new v.Vector(ue,ue);de.add(X.pos);var pe=V.enemies[Math.floor(Math.random()*V.enemies.length)];pe.pos.setFromVec(de);var fe=Math.atan2(X.pos.y-pe.pos.y,X.pos.x-pe.pos.x);pe.angle=n.normalizeRadianAngle(fe)}E=0}}return!1}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(29),r(49),r(134)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keybindingItems=t.createKeyBindingLabel=t.keyCodetoStrHelper=t.IN_GAME_KEY_BINDING_TRANSLATIONS=void 0,t.IN_GAME_KEY_BINDING_TRANSLATIONS={};var o="in_game_keys_translation",i=!0,s=null,A=null;window.addEventListener("keydown",function(e){if(i){switch(e.keyCode){case r.Keys.ESCAPE:return i=!1,void(s=null);case r.Keys.BACKSPACE:case r.Keys.DELETE:case r.Keys.RETURN:case r.Keys.TILDE:return}p(s,e.keyCode),A=e.keyCode}});var u=[];t.keyCodetoStrHelper=function(e){switch(e){case r.Keys.LEFT:return"ARROW LEFT";case r.Keys.UP:return"ARROW UP";case r.Keys.RIGHT:return"ARROW RIGHT";case r.Keys.DOWN:return"ARROW DOWN";case r.Keys.PRIMARY_WEAPON:return"SPACE";default:return String.fromCharCode(e)}};var l=function(e){for(var t in e)delete e[t]},c=function(){for(var e in l(n.REVERSE_IN_GAME_KEY_BINDING_TRANSLATIONS),t.IN_GAME_KEY_BINDING_TRANSLATIONS)for(var a in r.Keys)if(parseInt(r.Keys[a],10)===parseInt(e,10)){if(n.REVERSE_IN_GAME_KEY_BINDING_TRANSLATIONS[t.IN_GAME_KEY_BINDING_TRANSLATIONS[e]])return console.error("duplicate key"),!0;n.REVERSE_IN_GAME_KEY_BINDING_TRANSLATIONS[t.IN_GAME_KEY_BINDING_TRANSLATIONS[e]]=r.Keys[a]}};t.createKeyBindingLabel=function(e,r){return e+" <"+t.keyCodetoStrHelper(r)+">"};var d=function(e,r){return"INPUT "+e+" <"+t.keyCodetoStrHelper(r)+">"},p=function(e,t){for(var r=0;r<u.length;r++){var a=u[r];a.id===e&&(a.children[0].label=d(e,t))}},f=function(){var e=function(e){if(r.Keys[e]){var n=t.IN_GAME_KEY_BINDING_TRANSLATIONS[r.Keys[e]];u.push({id:e,label:t.createKeyBindingLabel(e,n),action:function(t){return i=!0,s=e,Promise.resolve({})},children:[{action:function(n){return i=!1,s=null,function(e,a){var n=!1,o=t.IN_GAME_KEY_BINDING_TRANSLATIONS[r.Keys[e]];t.IN_GAME_KEY_BINDING_TRANSLATIONS[r.Keys[e]]=a,c()&&(t.IN_GAME_KEY_BINDING_TRANSLATIONS[r.Keys[e]]=o,c(),n=!0);for(var i=0;i<u.length;i++){var s=u[i];s.id===e&&(n?(s.label=t.createKeyBindingLabel(s.id,o),s.children[0].label="ERROR <DUPLICATE KEY>"):s.label=t.createKeyBindingLabel(s.id,a))}if(n)return!0}(e,A)?Promise.resolve({}):(a.saveData(o,t.IN_GAME_KEY_BINDING_TRANSLATIONS),Promise.resolve({pop:!0}))},label:d(e,n)}]})}};for(var n in r.inGameKeyCodes.keys)e(n);u.push({label:"RESET KEYS TO DEFAULT",action:function(e){return v(),a.saveData(o,t.IN_GAME_KEY_BINDING_TRANSLATIONS),Promise.resolve({})}})};setTimeout(function(){if(v(),a.containsData(o)){console.log("key bindings loaded");var e=a.loadData(o);l(t.IN_GAME_KEY_BINDING_TRANSLATIONS),function(e,t){for(var r in e)t[r]=e[r]}(e,t.IN_GAME_KEY_BINDING_TRANSLATIONS),h()}},0);var h=function(){for(;u.length>0;)u.pop();f(),c()},v=function(){!function(){for(var e in r.Keys)t.IN_GAME_KEY_BINDING_TRANSLATIONS[r.Keys[e]]=r.Keys[e]}(),h()};t.keybindingItems={label:"KEY BINDINGS",children:u}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(7),r(1),r(4),r(18),r(12),r(23),r(10),r(21),r(5),r(243),r(24),r(84),r(13)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpaceBatTree=void 0;var v=new r.Rectangle(0,0,0,0),g=new d.QuadTreeUint16(v,8,80),y=[];t.getSpaceBatTree=function(){return g};var m=new a.Vector(0,0),x=new a.Vector(0,0),S={},_=function(e,t){var r=e.guid+"_"+t.guid,a=S[r];return a||(a=n.distanceBetweenVectors(e.pos,t.pos),S[r]=a,S[t.guid+"_"+e.guid]=a,a)},T=function(e,t){return v.x=e.pos.x-.5*t,v.y=e.pos.y-.5*t,v.width=t,v.height=t,g.queryInt(v)},E=function(e){m.x=0,m.y=0;for(var t=0,r=1e3,a=T(e,r),n=a.length;n<5&&r<2e3;)n=(a=T(e,r*=4)).length;for(var o=0;o<n;o++){var i=a[o];if(i.guid!==e.guid){var s=_(e,i);s>0&&s<500&&(m.add(i.pos),t++)}}return t>0?(m.div(t),L(e,m)):m},M=function(e){m.x=0,m.y=0;for(var t=0,r=T(e,1e3),n=r.length,o=0;o<n;o++){var i=r[o];if(i.guid!==e.guid)_(e,i)<500&&(m.add(i.vel),t++)}if(t>0){m.div(t),m.normalize(),m.mult(e.maxSpeed);var s=a.SubtractVector(m,e.vel,x);return s.limit(.05),s}return m},I=function(e){m.x=0,m.y=0,x.x=0,x.y=0;for(var t=0,r=T(e,80),n=r.length,o=0;o<n;o++){var i=r[o];if(i.guid!==e.guid){var s=_(e,i);if(s>0&&s<40){var A=a.SubtractVector(e.pos,i.pos,x);A.normalize(),A.div(s),m.add(A),t++}}}return t>0&&m.div(t),m.magSq()>0&&(m.normalize(),m.mult(e.maxSpeed),m.subtract(e.vel),m.limit(.05)),m},L=function(e,t){var r=a.SubtractVector(t,e.pos,m);r.normalize(),r.mult(e.maxSpeed);var n=a.SubtractVector(r,e.vel,x);return n.limit(.05),n},w=function(e,t){m.x=0,m.y=0,x.x=0,x.y=0;v.x=e.pos.x-100,v.y=e.pos.y-100,v.width=200,v.height=200;for(var r=c.getQuadTreesObj().queryTreesVec(t,e.pos,200,200),a=r.length,o=0,i=0;i<a;i++){var s=r[i],A=n.distanceBetween(s,e);if(A<s.radius+e.radius+100){var u=e.guid%2==0?.5*Math.PI:-.5*Math.PI,l=Math.atan2(s.pos.y-e.pos.y,s.pos.x-e.pos.x)+u;m.x=(A-(s.radius+e.radius))/50,m.setAngle(l),x.add(m),o++}}return o>1&&x.div(o),x};t.default=function(e){var t=e.game,a=e.WW,n=e.WH,v=e.SX,m=e.SY,x=e.step,_=e.stepMS,T=e.SW,b=e.SH,P=t.spaceBats,R=P.length;if(!t.IS_PROCEDURAL){t.IS_PROCEDURAL&&g instanceof d.QuadTreeUint16?g=new f.QuadTreeInt32(new r.Rectangle(0,0,0,0),100,100):!t.IS_PROCEDURAL&&g instanceof f.QuadTreeInt32&&(g=new d.QuadTreeUint16(new r.Rectangle(0,0,0,0),100,100)),S={};var O=c.getQuadTreesObj();y=[];var C=[4,9,8,3,0],G=o([44,1,2],C),D=o([1,2],C),N=o([44,2],C),B=o([44,1],C),F=new r.Rectangle(v-1e3,m-1e3,T+2e3,b+2e3);g.reset(),g.setup(F,8,80);for(var V=0,k=[],X=0;X<R;X++){var H=P[X];if(V<75&&F.intersectsPoint(H.pos))g.insert(H,1),k.push(H),V++;else{var U=P[H.leaderIndex];H.groupLeader?(H.target=null,H.targetType=null,g.insert(H,1),k.push(H),V++,0):(Math.abs(H.pos.x-U.pos.x)>500||Math.abs(H.pos.y-U.pos.y)>500)&&(H.pos.x=U.pos.x+100*Math.random(),H.pos.y=U.pos.y+100*Math.random())}}new r.Rectangle(v,m,T,b);var W=k.length;_,Math.random()>.99&&0;for(X=0;X<W;X++){U=P[(H=k[X]).leaderIndex];if(H.groupLeader){y=G;var Y=O.queryTreesVec([44,2,1],H.pos,400,400)[0];if(Y&&Y.life>0&&!Y.remove){if(H.target=Y,44===Y.type)Y.abilities.active.cloak&&(H.target=void 0);switch(Y.type){case 44:H.targetType=44,y=D;break;case 2:H.targetType=2,y=B;break;case 1:H.targetType=1,y=N;break;default:H.target=null,u.LOG_GL("Bat targeting error. unknown type:"+Y.type)}(q=L(H,Y.pos)).mult(5),H.vel.add(q)}else H.target=null,H.targetType=null,y=G;H.target&&(H.target.remove||H.target.life<1)&&(H.target=null,H.targetType=null)}else if(U.target)if(U.target.life<1)U.target.remove=!0,U.target=null,U.targetType=null;else{var q;(q=L(H,U.target.pos)).mult(5),H.vel.add(q);var z=O.queryTreesVec([U.targetType],H.pos,H.radius,H.radius)[0];if(z){if(44===z.type){var j=z;j.abilities.active.cloak>0?h.DamgeItemFixedValue(z,5e-4):(h.DamgeItemFixedValue(z,.005),j.damageTaken=!0)}else h.DamgeItemFixedValue(z,.005);var K=H.vel.clone();K.mult(25e-5),z.vel.add(K),p.createDust(H.pos.toPoint(),1,0,e),z.life<1&&(z.remove=!0)}}if(!H.groupLeader&&(H.gettingBackToGroup||H.pos.x>U.pos.x+1200||H.pos.x<U.pos.x-1200||H.pos.y>U.pos.y+1200||H.pos.y<U.pos.y-1200))(q=L(H,U.pos)).mult(5),H.vel.add(q),H.gettingBackToGroup=!0,(H.pos.x<U.pos.x+200||H.pos.x>U.pos.x-200||H.pos.y<U.pos.y+200||H.pos.y>U.pos.y-200)&&(H.gettingBackToGroup=!1);else if(!U.target){var Z=I(H);Z.mult(1.75),H.vel.add(Z);var Q=M(H);Q.mult(1.5),H.vel.add(Q);var J=E(H);J.mult(1.5),H.vel.add(J)}var $=w(H,y);H.vel.add($),H.vel.limit(H.gettingBackToGroup?1.75*H.maxSpeed:H.maxSpeed)}for(X=0;X<W;X++){H=k[X];A.default(t,H,!1),l.wormhole(H,e),i.default(H,x),s.shift(H,a,n)}return"spaceBats"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(23),r(18),r(21),r(12),r(1),r(4),r(5),r(6),r(16),r(24),r(27),r(94),r(32),r(7)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d,p,f,h,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSpaceTurret=void 0;var g=new s.Vector(0,0),y=v.rect_pool_pop(0,0,0,0);t.default=function(e){for(var t=e.game,o=e.WW,s=e.WH,A=e.step,c=e.stepMS,p=t.spaceTurrets.length,v=0;v<p;v++){var m=t.spaceTurrets[v];m.fireing=!1;var x=m.comp[0].vertex[0];x.set(m.targetLength,0),l.rotateVector(x,m.angle-m.targetSpread,x);var S=m.comp[0].vertex[1];if(S.set(m.targetLength,0),l.rotateVector(S,m.angle+m.targetSpread,S),x.add(m.pos),S.add(m.pos),m.overHeatTimerMS>0)m.overheatVal>30&&(m.overheatVal*=.99),m.overHeatTimerMS-=c;else if(m.bullets>0&&m.activationTimer<0){y.update(m.pos.x-m.targetLength,m.pos.y-m.targetLength,2*m.targetLength,2*m.targetLength);for(var _=u.getQuadTreesObj().queryTreesRect([10,9,35,1],y),T=0;T<_.length;T++){var E=_[T];if(f.getLineOfSight(m.pos,E)){var M=Math.atan2(E.pos.y+2*E.vel.y-m.pos.y,E.pos.x+2*E.vel.x-m.pos.x);m.angle=M;var I=h.createBullet(25);I.vel.setLength(30),I.damage=m.damage,I.owenerType=43,I.ownerGuid=m.ownerGuid,I.vel.setAngle(M),I.vel.setLength(25),I.pos.x=m.pos.x,I.pos.y=m.pos.y,I.pos.add(I.vel),I.pos.add(I.vel),m.overheatVal+=2,m.overheatVal>=100&&(m.overHeatTimerMS=1500),d.createDust(I.pos,1,.1,e,g.x,g.y),t.bullets.push(I),m.bullets--,m.fireing=!0}}}m.fireing||m.overheatVal>0&&m.overheatVal--,m.vel.getLength()>5&&m.vel.setLength(5),m.vel.mult(.97),m.activationTimer>0?m.activationTimer-=c:m.lightIntensity<1?m.lightIntensity+=.03*A:m.lightIntensity=0,a.default(m,A),i.shift(m,o,s),r.default(t,m,!0),n.wormhole(m,e)}return"SpaceTurret  "};t.createSpaceTurret=function(e,t,r){var a=e.vel.clone();a.mult(.65);var n=new s.Vector(e.pos.x+Math.cos(e.angle+Math.PI)*(e.radius+10),e.pos.y+Math.sin(e.angle+Math.PI)*(e.radius+10));t.game.spaceTurrets.push(o(o({ownerGuid:e.guid,damage:r.damage,pos:n,vel:a,guid:A.getGuid(),life:100,radius:9},c.setImovableDefaults(p.BallCreator(n.x,n.y,9,9))),{type:43,collType:19,activationTimer:3100,overheatVal:0,overHeatTimerMS:0,lightIntensity:0,bullets:700,opos:n.toPoint(),targetLength:750,targetSpread:.24*Math.PI,targetAngle:e.angle+Math.PI,angle:e.angle+Math.PI,origin:n.clone(),fireing:!1,armor:{type:3,value:1}}))}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(309),r(140),r(311),r(344),r(44),r(345),r(20),r(346),r(347)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQuadTreesConstructionTimings=void 0;var c=0,d=0,p=0,f=0,h=0;t.getQuadTreesConstructionTimings=function(){var e=n.getNumCollisions(),t=l.getMostIntensiveTree();return{constructionItems:d,constructionTime:c,collideTime:f,resolveTime:h,cleanupTime:p,broadphase:e.broadPhase,calls:e.collisions,mostIntensiveTree:t.mostIntensiveTree,mostIntensiveTreeType:t.mostIntensiveTreetype,mostIntensAmounts:t.mostIntensAmounts}};var v=[];t.default=function(e){return c=i.MeasureTimeSingle(function(){d=r.default(e)}),f=i.MeasureTimeSingle(function(){v=n.default()}),h=i.MeasureTimeSingle(function(){o.default(e,v)}),e.game.IS_PROCEDURAL&&(1===A.getProceduralEngineType()&&u.default(e),0===A.getProceduralEngineType()&&s.default(e)),e.IS_MULTIPLAYER&&!e.IS_SERVER||(p=i.MeasureTimeSingle(function(){a.default(e)})),"intersections QuadTree"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(12),r(1)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});new n.Vector(0,0);t.default=function(e,t,n){if(r.resolve(n.step,e,t))return n.game.IS_PROCEDURAL||(a.shift(e,n.WW,n.WH),a.shift(t,n.WW,n.WH)),!0}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(6)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomTruncatedPosAndSeed=t.getCoordFromSeed_positive_only=t.getSeedFromINTEGERS=void 0;var a=function(e){return e<0?-2*e-1:2*e},n=function(e){return t=e,-2*Math.floor(.5*t)+t==1?-.5*(e+1):.5*e;var t};t.getSeedFromINTEGERS=function(e,t){if(e!==Math.round(e))throw"x must be INTEGER";if(t!==Math.round(t))throw"y must be INTEGER";return function(e,t){return e!=Math.max(e,t)?t*t+e:e*e+e+t}(a(e),a(t))};t.getCoordFromSeed_positive_only=function(e){var t,r,a,o=(t=e,r=Math.trunc(Math.sqrt(t)),{x:(a=t-r*r)<r?a:r,y:a<r?r:a-r});return{x:n(o.x),y:n(o.y)}};t.getRandomTruncatedPosAndSeed=function(e,a){var n=e()*r.MAX_INT_RANGES.MAX_INT_32_QUART*(e()>.5?1:-1),o=e()*r.MAX_INT_RANGES.MAX_INT_32_QUART*(e()>.5?1:-1),i=Math.floor(n/a)*a,s=Math.floor(o/a)*a;return{x:i,y:s,seed:t.getSeedFromINTEGERS(i,s)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(48)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randWithWhiteHole=void 0;t.randWithWhiteHole=function(e){var t=r.mulberry32(e),a=t();return{rng:t,wh:a>.97&&a<.98}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(10),r(351)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hashhousekeeping=t.resetHashes=t.getSpaceport=t.getLifeItem=t.getAsteroid=t.getDead=t.putSpacePort=t.putLifeItem=t.putAsteroid=void 0;var n=new a.SortedHash,i=new a.SortedHash,s=new a.SortedHash,A=new a.SortedHash;t.putAsteroid=function(e){(function(e){if(Math.abs(e.pos.x-e.opos.x)>10||Math.abs(e.pos.y-e.opos.y)>10||e.life<e.oLife)return!0})(e)&&(e.life>0&&!e.remove?n.add(e.seedKey,o(o({life:0|e.life},e.pos.toPointINT()),{resources:{iron:0|e.resources.iron,minerals:0|e.resources.minerals,platinum:0|e.resources.platinum}})):(i.add(e.seedKey,!0),n.remove(e.seedKey)))};t.putLifeItem=function(e){var t;(t=e).life<t.oLife&&(e.life>0&&!e.remove?(r.LOG_GL(">> lifeitem put in hash"),s.add(e.seedKey,0|e.life)):(r.LOG_GL(">> lifeitem put in [destroyed] hash"),i.add(e.seedKey,!0),s.remove(e.seedKey)))};t.putSpacePort=function(e){e.isEnemyForMS>0&&(e.life>0&&!e.remove?A.add(e.seedKey,0|e.isEnemyForMS):(i.add(e.seedKey,!0),A.remove(e.seedKey)))};t.getDead=function(e){return i.get(e)};t.getAsteroid=function(e){return n.get(e)};t.getLifeItem=function(e){return s.get(e)};t.getSpaceport=function(e){return A.get(e)};t.resetHashes=function(){i.clear(),n.clear(),s.clear(),A.clear()};t.hashhousekeeping=function(){i.housekeeping(3e4),n.housekeeping(15e3),s.housekeeping(9e3),A.housekeeping(100)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(12),r(6),r(18),r(21),r(7),r(67),r(5),r(4),r(14),r(47)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetPartsTree=void 0;t.GetPartsTree=function(){return p};var d=i.rect_pool_pop(0,0,0,0),p=new c.QuadTreeFastPoint32(i.rect_pool_pop(0,0,100,100),20,83);t.default=function(e){var t=e.game,i=(e.SW,e.SH,e.SX,e.SY,e.WW),c=e.WH,f=e.step,h=A.getQuadTreesObj();if(h&&h.All){var v=t.screen.rectSS_400,g=t.asteroidParts;p.reset(),p.setup(v,100,83);for(var y=g.length,m=0;m<y;m++){var x=g[m];p.insert(x)}var S=p.queryInt(v),_=S.length,T=h.queryTreesRect([49,2,1,44,30,4,22,11,0],v),E=T.length;for(m=0;m<E;m++){var M=T[m],I=2*M.radius;if(44===M.type?I=2*M.originalRadius:4!==M.type&&22!==M.type||(I=M.radius),d.x=M.pos.x-I,d.y=M.pos.y-I,d.width=2*I,d.height=2*I,0===M.type)for(var L=(O=p.queryInt(d)).length,w=0;w<L;w++){var b=O[w];if(u.fine(3,M.comp[0].vertex,b.pos)){var P=Math.atan2(M.pos.y-b.pos.y,M.pos.x-b.pos.x);b.vel.setAngle(P+Math.PI);var R=.7*Math.random();b.vel.setLength(1*R+2),n.default(b,f),Math.abs(b.angleVel)<.1?b.angleVel=(R>.5?R:.4-R)*R*.1:b.angleVel*=2}}else{var O;for(L=(O=p.queryInt(d)).length,w=0;w<L;w++){b=O[w],P=Math.atan2(M.pos.y-b.pos.y,M.pos.x-b.pos.x);var C=b.pos.x-M.pos.x,G=b.pos.y-M.pos.y;if(s.OperatorApproxDist96(C,G)<I){b.vel.setAngle(P+Math.PI);R=.7*Math.random();b.vel.setLength(1*R+.1),n.default(b,f),Math.abs(b.angleVel)<.1?b.angleVel=(R>.5?R:.4-R)*R*.1:b.angleVel*=2}}}}for(m=0;m<_;m++){var D=(x=S[m]).vel.getLength();D>7&&x.vel.setLength(7),n.default(x,f),x.angle+=x.angleVel,D>0&&x.vel.mult(.98),x.angleVel*=.996;var N=x.angle;(x.angleVel>.01||x.angleVel<.01)&&(x.angleVel>.3?x.angleVel=.3:x.angleVel<-.3&&(x.angleVel=-.3),x.rotatedEdgeA&&(x.rotatedEdgeA=a.rotateVector(x.edgeA,N,x.rotatedEdgeA)),x.rotatedEdgeB&&(x.rotatedEdgeB=a.rotateVector(x.edgeB,N,x.rotatedEdgeB))),r.shift(x,i,c),o.wormhole(x,e)}var B=l.getForce2Tree().queryInt(e.game.screen.rectSS_400);for(m=0;m<B.length;m++){var F=B[m],V=p.queryCircle(F.pos,F.radius);l.FastForce2Cached(V,F,1.9)}t.screen.rectSS_800;if(g.length>2500){var k=[],X=0;for(m=0;m<y;m++){b=g[m];X<50&&!v.intersectsPoint(b.pos)?X++:k.push(b)}t.asteroidParts=k}return"parts"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(89),r(89),r(119),r(119),r(1)],void 0===(n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WedgeCreator=t.wedgeUpdater=void 0;t.wedgeUpdater=function(e,t){a.bodyUpdater(e),e.pos.set(e.pos.x+e.vel.x*t,e.pos.y+e.vel.y*t);var r=e.comp[0];r.pos=e.pos,i.TriangleGetVertices(r,e.angle+e.angVel),e.angle+=e.angVel};t.WedgeCreator=function(e,t,a,i){var A=[n.TriangleCreator(e+20*a,t,e-20*a,t-13*a,e-20*a,t+13*a,new s.Vector(e,t))],u=new s.Vector(e,t),l=40*a,c=i*(Math.pow(l,2)+Math.pow(l,2))/12,d=0;return 0!==i&&(d=1/c),o(o({},r.RigidBodyCreatorBase(1,i,A,u.x,u.y)),{inertia:c,inv_inertia:d})}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(177),r(1)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TriangleGetVertices=t.TriangleCreator=void 0;t.TriangleCreator=function(e,t,n,o,i,s,A){var u=[];u[0]=new a.Vector(e,t),u[1]=new a.Vector(n,o),u[2]=new a.Vector(i,s);var l=A||new a.Vector((u[0].x+u[1].x+u[2].x)/3,(u[0].y+u[1].y+u[2].y)/3),c=new a.Vector(0,0);c.setFromVec(u[0]),c.subtr(l),c.unit();var d=c.clone(),p=[];p[0]=u[0].clone(),p[1]=u[1].clone(),p[2]=u[2].clone(),p[0].subtr(l),p[1].subtr(l),p[2].subtr(l);return{vertex:u,pos:l,dir:c,refDir:d,refDiam:p,angle:0,rotMat:r.CreateMatrix22(),shape:1}};t.TriangleGetVertices=function(e,t){r.MatrixOpRotMx22(e.rotMat,t),e.dir=r.MatrixOpMultiplyVec(e.rotMat,e.refDir,e.dir);for(var a=0;a<3;a++)r.MatrixOpMultiplyVec(e.rotMat,e.refDiam[a],e.vertex[a]),e.vertex[a].add(e.pos)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(1),r(95),r(65)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFragmentsFromTriangle=void 0;t.createFragmentsFromTriangle=function(e,t,r,a,A,u){void 0===A&&(A={x:0,y:0}),void 0===u&&(u=!1);for(var l=i(t,a.pos),c=s(l,r),d=0;d<c.length;d++){var p=c[d],f=p[0],h=p[1],v=p[2],g=.34*(f.x+h.x+v.x),y=.32*(f.y+h.y+v.y),m=i(p,{x:g,y:y});u?o.createFragmentBlack({x:g+a.pos.x,y:y+a.pos.y},e,m,a.vel.x+A.x,a.vel.y+A.y):n.createFragment({x:g+a.pos.x,y:y+a.pos.y},e,m,a.vel.x+A.x*Math.random(),a.vel.y+A.y*Math.random())}};var i=function(e,t){for(var r=[],n=0;n<3;n++){var o=e[n];r.push(new a.Vector(o.x-t.x,o.y-t.y))}return r},s=function(e,t){for(var r=[e],a=0;a<t;a++){for(var n=[],o=0;o<r.length;o++)n.push.apply(n,A(r[o]));r=n}return r},A=function(e){var t=e[0],a=e[1],n=e[2],o=r.midpoint(t,a),i=r.midpoint(t,n),s=r.midpoint(a,n);return[[{x:t.x,y:t.y},{x:o.x,y:o.y},{x:i.x,y:i.y}],[{x:i.x,y:i.y},{x:s.x,y:s.y},{x:o.x,y:o.y}],[{x:a.x,y:a.y},{x:o.x,y:o.y},{x:s.x,y:s.y}],[{x:n.x,y:n.y},{x:i.x,y:i.y},{x:s.x,y:s.y}]]}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(4),r(7),r(31),r(17)],void 0===(n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuadTreeInt32Base=t.intersectsXYWH_XYWH=void 0;var s={},A=function(e){return new a.Rectangle(e[0],e[1],e[2],e[3])},u=function(e,t){return!(e[0]>t[0]+t[2]||e[0]+e[2]<t[0]||e[1]>t[1]+t[3]||e[1]+e[3]<t[1])},l=function(e,t){return!(e[0]>t[0]+t[2]||e[0]+e[2]<t[0]||e[1]>t[1]+t[3]||e[1]+e[3]<t[1])},c=function(e,t,r,a,n){return!(e[0]>t+a||e[0]+e[2]<t||e[1]>r+n||e[1]+e[3]<r)};t.intersectsXYWH_XYWH=function(e,t,r,a,n,o,i,s){return!(e>n+i||e+r<n||t>o+s||t+a<o)};var d=function(e,t){return t[0]>e[0]&&t[1]>e[1]&&t[0]+t[2]<e[0]+e[2]&&t[1]+t[3]<e[1]+e[3]},p=8,f=function(){function e(e,t,r,a){var n=this;this.divide=!1,this.debugBounds=function(e,t){var r=new Int32Array([e.x,e.y,e.width,e.height]);return u(r,n.boundry)&&t.push(A(n.boundry)),n.divide&&(n.northeast.debugBounds(e,t),n.northwest.debugBounds(e,t),n.southeast.debugBounds(e,t),n.southwest.debugBounds(e,t)),t},this.debugAABBs=function(e,t){var r=new Int32Array([e.x,e.y,e.width,e.height]);if(u(r,n.boundry)){for(var a=0;a<4*n.index;a+=4)t.push(A(n.itemsXYWH.slice(a,a+4)));n.divide&&(n.northeast.debugAABBs(e,t),n.northwest.debugAABBs(e,t),n.southeast.debugAABBs(e,t),n.southwest.debugAABBs(e,t))}return t},this.boundry=new Int32Array(e),this.capacity=r>=a?t*p:t,this.items=new Int32Array(this.capacity),this.itemsXYWH=new Int32Array(4*this.capacity),this.index=0,this.currentDepth=r,this.maxDepth=a,this.deleteBranchMarker=0}return e.prototype.update=function(e,t,r,a,n,o,i){this.boundry[0]=e,this.boundry[1]=t,this.boundry[2]=r,this.boundry[3]=a,this.capacity=n,this.currentDepth=o,this.maxDepth=i,this.index=0},e.prototype.subDivide=function(){var t=this.boundry[0],r=this.boundry[1],a=this.boundry[2],n=this.boundry[3],o=this.currentDepth+1,i=this.maxDepth,A=o>=i?this.capacity*p:this.capacity;if(this.northeast)this.northeast.update(t+.5*a,r,.5*a,.5*n,A,o,i),this.northwest.update(t,r,.5*a,.5*n,A,o,i),this.southeast.update(t+.5*a,r+.5*n,.5*a,.5*n,A,o,i),this.southwest.update(t,r+.5*n,.5*a,.5*n,A,o,i);else{var u=s[A];if(u&&u.length>4)return this.northeast=u.pop(),this.northwest=u.pop(),this.southeast=u.pop(),this.southwest=u.pop(),void this.subDivide();this.northeast=new e([t+.5*a,r,.5*a,.5*n],A,o,i),this.northwest=new e([t,r,.5*a,.5*n],A,o,i),this.southeast=new e([t+.5*a,r+.5*n,.5*a,.5*n],A,o,i),this.southwest=new e([t,r+.5*n,.5*a,.5*n],A,o,i)}this.divide=!0},e.prototype.___query=function(e,r,a,n,o,i,s){void 0===s&&(s=-1);var A=this.items,u=this.index,l=this.itemsXYWH;if(c(this.boundry,e,r,a,n)){for(var d=0;d<u;d++){var p=A[d];if(!i[p]&&p!==s){var f=4*d;t.intersectsXYWH_XYWH(e,r,a,n,l[f],l[f+1],l[f+2],l[f+3])&&(i[p]=!0,o.push(p))}}this.divide&&(this.northeast.___query(e,r,a,n,o,i,s),this.northwest.___query(e,r,a,n,o,i,s),this.southeast.___query(e,r,a,n,o,i,s),this.southwest.___query(e,r,a,n,o,i,s))}return o},e.prototype.insert=function(e,t){if(!l(this.boundry,t))return!1;if(!(this.index<this.capacity))return this.divide||this.subDivide(),!!this.northeast.insert(e,t)||(!!this.northwest.insert(e,t)||(!!this.southeast.insert(e,t)||!!this.southwest.insert(e,t)));this.items[this.index]=e;var r=4*this.index;return this.itemsXYWH[r]=t[0],this.itemsXYWH[r+1]=t[1],this.itemsXYWH[r+2]=t[2],this.itemsXYWH[r+3]=t[3],this.index++,!!d(this.boundry,t)||void 0},e.prototype.reset=function(){this.index=0;var e=!this.northwest;if(this.northwest){var t=this.northeast.reset(),r=this.northwest.reset(),a=this.southeast.reset(),n=this.southwest.reset();if(t&&r&&a&&n&&(this.deleteBranchMarker++,this.deleteBranchMarker>30)){var o=s[this.northeast.capacity];o||(o=s[this.northeast.capacity]=[]),o.push(this.northeast,this.northwest,this.southeast,this.southwest),this.northeast=null,this.northwest=null,this.southeast=null,this.southwest=null,this.deleteBranchMarker=0}this.divide=!1}return e},e}(),h=function(){function e(e,t,r,a){var n=this;void 0===a&&(a=8),this.divide=!1,this.findIndex=function(e,t){if(void 0===t&&(t=null),t){if((r=t.items.indexOf(e))>-1)return r;t.divide&&(n.findIndex(e,t.northeast),n.findIndex(e,t.northwest),n.findIndex(e,t.southeast),n.findIndex(e,t.southwest))}else{var r;if((r=n.items.indexOf(e))>-1)return r;n.divide&&(n.findIndex(e,n.northeast),n.findIndex(e,n.northwest),n.findIndex(e,n.southeast),n.findIndex(e,n.southwest))}},this.debugAABBs=function(e,t){var r=new Int32Array([e.x,e.y,e.width,e.height]);if(u(r,n.boundry)){for(var a=0;a<4*n.index;a+=4)t.push(A(n.itemsXYWH.slice(a,a+4)));n.divide&&(n.northeast.debugAABBs(e,t),n.northwest.debugAABBs(e,t),n.southeast.debugAABBs(e,t),n.southwest.debugAABBs(e,t))}return t},this.debugBounds=function(e){var t=[],r=[e.x,e.y,e.width,e.height];return l(n.boundry,r)&&t.push(A(n.boundry)),n.divide&&(n.northeast.debugBounds(e,t),n.northwest.debugBounds(e,t),n.southeast.debugBounds(e,t),n.southwest.debugBounds(e,t)),t},this.setup(e,t,r,a)}return e.prototype.shrink=function(){this.boundry[0]=0|Math.max(this.minX+1,0),this.boundry[1]=0|Math.max(this.minY+1,0),this.boundry[2]=Math.ceil(this.maxW-this.minX),this.boundry[3]=Math.ceil(this.maxH-this.minY)},e.prototype.intersectTree=function(e){var t=[],r=this.itemType===e.itemType,a=this.index;if(a>0){for(var n={},i=this.items,s=this.itemsXYWH,A=0;A<a;A++){var u=i[A];if(!n[u]){var l=4*A,c=s[l],d=s[l+1],p=s[l+2],f=s[l+3];n[u]=!0;var h=e.___queryXYWH(c,d,p,f,[],[],r?u:-1);h.length>0&&t.push(o([u],h))}}this.divide&&(this.___iterateBranchAgainstTree(this.northeast,e,t,n),this.___iterateBranchAgainstTree(this.northwest,e,t,n),this.___iterateBranchAgainstTree(this.southeast,e,t,n),this.___iterateBranchAgainstTree(this.southwest,e,t,n))}return t},e.prototype.___iterateBranchAgainstTree=function(e,t,r,a){var n=e.index,i=this.itemType===t.itemType;if(n>0){for(var s=e.items,A=e.itemsXYWH,u=0;u<n;u++){var l=s[u];if(!a[l]){var c=4*u,d=A[c],p=A[c+1],f=A[c+2],h=A[c+3];a[l]=!0;var v=t.___queryXYWH(d,p,f,h,[],[],i?l:-1);v.length>0&&r.push(o([l],v))}}e.divide&&(this.___iterateBranchAgainstTree(e.northeast,t,r,a),this.___iterateBranchAgainstTree(e.northwest,t,r,a),this.___iterateBranchAgainstTree(e.southeast,t,r,a),this.___iterateBranchAgainstTree(e.southwest,t,r,a))}},e.prototype.___queryXYWH=function(e,r,a,n,o,i,s){void 0===s&&(s=-1);var A=this.items,u=this.itemsXYWH;if(c(this.boundry,e,r,a,n)){for(var l=0;l<this.index;l++){var d=A[l];if(!i[d]&&d!==s){var p=4*l;t.intersectsXYWH_XYWH(e,r,a,n,u[p],u[p+1],u[p+2],u[p+3])&&(i[d]=1,o.push(d))}}this.divide&&(this.northeast.___query(e,r,a,n,o,i,s),this.northwest.___query(e,r,a,n,o,i,s),this.southeast.___query(e,r,a,n,o,i,s),this.southwest.___query(e,r,a,n,o,i,s))}return o},e.prototype.insert=function(e){var t=e.radius,r=2*t,a=2*t,n=e.pos.x-t,o=e.pos.y-t,i=[n,o,r,a];if(!l(this.boundry,i))return!1;if(this.references[this.totalItems]=e,this.totalItems++,!(this.index<this.capacity))return this.divide||this.subDivide(),this.northeast.insert(this.REFERENCE_INDEX,i)?(this.REFERENCE_INDEX++,!0):this.northwest.insert(this.REFERENCE_INDEX,i)?(this.REFERENCE_INDEX++,!0):this.southeast.insert(this.REFERENCE_INDEX,i)?(this.REFERENCE_INDEX++,!0):this.southwest.insert(this.REFERENCE_INDEX,i)?(this.REFERENCE_INDEX++,!0):void this.REFERENCE_INDEX++;this.items[this.index]=this.REFERENCE_INDEX;var s=4*this.index;return this.itemsXYWH[s]=n,this.itemsXYWH[s+1]=o,this.itemsXYWH[s+2]=r,this.itemsXYWH[s+3]=a,this.index++,this.REFERENCE_INDEX++,!!d(this.boundry,i)||void 0},e.prototype.subDivide=function(){var e=this.boundry[0],t=this.boundry[1],r=this.boundry[2],a=this.boundry[3],n=this.maxDepth,o=this.capacity;this.northeast?(this.northeast.update(e+.5*r,t,.5*r,.5*a,o,0,n),this.northwest.update(e,t,.5*r,.5*a,o,0,n),this.southeast.update(e+.5*r,t+.5*a,.5*r,.5*a,o,0,n),this.southwest.update(e,t+.5*a,.5*r,.5*a,o,0,n)):(this.northeast=new f([e+.5*r,t,.5*r,.5*a],o,0,n),this.northwest=new f([e,t,.5*r,.5*a],o,0,n),this.southeast=new f([e+.5*r,t+.5*a,.5*r,.5*a],o,0,n),this.southwest=new f([e,t+.5*a,.5*r,.5*a],o,0,n)),this.divide=!0},e.prototype.___query=function(e,r,a,n){var o=[],i=[],s=this.items,A=this.itemsXYWH;if(c(this.boundry,e,r,a,n)){for(var u=0;u<this.index;u++){var l=s[u];if(!o[l]){var d=4*u;t.intersectsXYWH_XYWH(e,r,a,n,A[d],A[d+1],A[d+2],A[d+3])&&(o[l]=1,i.push(l))}}this.divide&&(this.northeast.___query(e,r,a,n,i,o),this.northwest.___query(e,r,a,n,i,o),this.southeast.___query(e,r,a,n,i,o),this.southwest.___query(e,r,a,n,i,o))}var p=i.length;if(0===p)return[];var f=new Array(p);for(u=0;u<p;u++)f[u]=this.references[i[u]];return f},e.prototype.query=function(e){var t=e.radius;return this.___query(e.pos.x-t,e.pos.y-t,2*t,2*t)},e.prototype.queryPoint=function(e){throw"not implemented : queryPoint @ QuadTreeInt32Base"},e.prototype.queryShape=function(e){for(var t=Number.MAX_VALUE,r=Number.MIN_VALUE,n=Number.MAX_VALUE,o=Number.MIN_VALUE,i=e.length,s=0;s<i;s++){var A=e[s];A.x>r&&(r=A.x),A.x<t&&(t=A.x),A.y>o&&(o=A.y),A.y<n&&(n=A.y)}for(var u=new a.Rectangle(t,n,r-t,o-n),l=this.queryInt(u),c=l.length,d=0;d<c;d++)for(var p=l[d],f=new a.Rectangle(p.pos.x-p.radius,p.pos.y-p.radius,2*p.radius,2*p.radius).toPointArray(),h=0;h<4;h++){var v=f[h],g=(s=0,0),y=void 0;for(s=0,g=i-1;s<i;g=s++)e[s].y>v.y!=e[g].y>v.y&&v.x<(e[g].x-e[s].x)*(v.y-e[s].y)/(e[g].y-e[s].y)+e[s].x&&(y=!y);if(y)return[p]}return[]},e.prototype.queryRay=function(e,t){for(var r,a,o,i,s,A,u=Math.min(e.x,t.x),l=Math.min(e.y,t.y),c=Math.max(e.x,t.x)-u,d=Math.max(e.y,t.y)-l,p=this.___query(u,l,c,d),f=e.x,h=e.y,v=t.x,g=t.y,y=[],m=p.length,x=0;x<m;x++){var S=p[x],_=S.pos.x,T=S.pos.y,E=S.radius;n.LineIntersects(f,h,v,g,_-E,T-E,_+E,T-E)?y.push(S):n.LineIntersects(f,h,v,g,_+E,T-E,_+E,T+E)?y.push(S):n.LineIntersects(f,h,v,g,_-E,T+E,_+E,T+E)?y.push(S):n.LineIntersects(f,h,v,g,_-E,T-E,_-E,T+E)?y.push(S):(a=T,o=E,i=E,A=h,(r=_)>(s=f)||r+o<s||a>A||a+i<A||y.push(S))}return y},e.prototype.queryCircle=function(e,t){var a=this.___query(e.x-t,e.y-t,2*t,2*t);if(0===a.length)return a;for(var n,o,i,s,A,u=.7*t,l=[e.x-u,e.y-u,2*u,2*u],c=a.length,d=[],p=0;p<c;p++){var f=a[p];n=l,o=f.pos.x-f.radius,i=f.pos.y-f.radius,s=2*f.radius,A=2*f.radius,n[0]>o+s||n[0]+n[2]<o||n[1]>i+A||n[1]+n[3]<i?r.radiusIntersectXYXY(e.x,e.y,t,f.pos.x,f.pos.y,f.radius)&&d.push(f):d.push(f)}return d},e.prototype.queryInt=function(e){return this.___query(e.x,e.y,e.width,e.height)},e.prototype.queryVec=function(e,t,r){return this.___query(e.x-t,e.y-r,2*t,2*r)},e.prototype.destroy=function(){this.northeast=null,this.northwest=null,this.southeast=null,this.southwest=null},e.prototype.reset=function(){this.index=0,this.totalItems=0,this.REFERENCE_INDEX=0,this.references=[],this.divide&&(this.northeast.reset(),this.northwest.reset(),this.southeast.reset(),this.southwest.reset()),this.divide=!1},e.prototype.getRangeType=function(){return"INT32"},e.prototype.setup=function(e,t,r,a){void 0===a&&(a=8);var n=e.x,o=e.y,s=e.width,A=e.height;this.boundry=new Int32Array([n,o,s,A]),(n>2147483647||o>2147483647||s>2147483647||A>2147483647||n<-2147483648||o<-2147483648)&&console.log("Out of range @ Quadtree constructor "+this.boundry.join(",")+" "+i.TypesToString(this.itemType)),this.items=new Int32Array(t),this.itemsXYWH=new Int32Array(4*t),this.capacity=t,this.itemType=r,this.references=[],this.REFERENCE_INDEX=0,this.index=0,this.totalItems=0,this.minX=65535,this.minY=65535,this.maxW=0,this.maxH=0,this.maxDepth=a},e.prototype.visualize=function(e,t,r,a){if(this.divide){var n=600/this.boundry[2],o=10;this.__visualize(n,o,e,t,r,a,r-300,a+40,this.northwest),this.__visualize(n,o,e,t,r,a,r-100,a+40,this.northeast),this.__visualize(n,o,e,t,r,a,r+100,a+40,this.southwest),this.__visualize(n,o,e,t,r,a,r+300,a+40,this.southeast)}},e.prototype.__visualize=function(e,t,r,a,n,o,i,s,A){r.push(n,o,i,s);var u=A.boundry;r.push(u[0]*e+100,u[1]*e+240,(u[0]+u[2])*e+100,u[1]*e+240,(u[0]+u[2])*e+100,u[1]*e+240,(u[0]+u[2])*e+100,(u[1]+u[3])*e+240,u[0]*e+100,u[1]*e+240,u[0]*e+100,(u[1]+u[3])*e+240,u[0]*e+100,(u[1]+u[3])*e+240,(u[0]+u[2])*e+100,(u[1]+u[3])*e+240),t*=.25,A.divide?(this.__visualize(e,t,r,a,i,s,i-30*t,s+40,A.northwest),this.__visualize(e,t,r,a,i,s,i-10*t,s+40,A.northeast),this.__visualize(e,t,r,a,i,s,i+10*t,s+40,A.southwest),this.__visualize(e,t,r,a,i,s,i+30*t,s+40,A.southeast)):A.southwest&&(this.__visualize(e,t,a,a,i,s,i-30*t,s+40,A.northwest),this.__visualize(e,t,a,a,i,s,i-10*t,s+40,A.northeast),this.__visualize(e,t,a,a,i,s,i+10*t,s+40,A.southwest),this.__visualize(e,t,a,a,i,s,i+30*t,s+40,A.southeast))},e}();t.QuadTreeInt32Base=h}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(8),r(62),r(3)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BONUS_BUFFERS=void 0;var A=o.default.create("L",s.TEXT_SIZE_SMALL,"w"),u=o.default.create("R3",s.TEXT_SIZE_SMALL,"w"),l=o.default.create("R5",s.TEXT_SIZE_SMALL,"w"),c=o.default.create("R8",s.TEXT_SIZE_SMALL,"w"),d=o.default.create("EB",s.TEXT_SIZE_SMALL,"w"),p=o.default.create("SH",s.TEXT_SIZE_SMALL,"w"),f=o.default.create("BO",s.TEXT_SIZE_SMALL,"w"),h=o.default.create("WU",s.TEXT_SIZE_SMALL,"w"),v=o.default.create("|>",s.TEXT_SIZE_SMALL,"w"),g=o.default.create("M6",s.TEXT_SIZE_SMALL,"w"),y=o.default.create("AP",s.TEXT_SIZE_SMALL,"w"),m=o.default.create("UB",s.TEXT_SIZE_SMALL,"w"),x=o.default.create("HB",s.TEXT_SIZE_SMALL,"w"),S=o.default.create("P3",s.TEXT_SIZE_SMALL,"w"),_=o.default.create("FL",s.TEXT_SIZE_SMALL,"w"),T=o.default.create("??",s.TEXT_SIZE_SMALL,"w"),E=o.default.create("LIFE",s.TEXT_SIZE_SMALL,"g"),M=o.default.create("ROCKET X3",s.TEXT_SIZE_SMALL,"g"),I=o.default.create("ROCKET X5",s.TEXT_SIZE_SMALL,"g"),L=o.default.create("ROCKET X8",s.TEXT_SIZE_SMALL,"g"),w=o.default.create("ELECTROBASTARDRAY",s.TEXT_SIZE_SMALL,"g"),b=o.default.create("SHIELD",s.TEXT_SIZE_SMALL,"g"),P=o.default.create("BOOSTERS",s.TEXT_SIZE_SMALL,"g"),R=o.default.create("WEAPON_UPGRADE",s.TEXT_SIZE_SMALL,"g"),O=o.default.create("DRONE SHIP",s.TEXT_SIZE_SMALL,"g"),C=o.default.create("MISSILE X6",s.TEXT_SIZE_SMALL,"g"),G=o.default.create("AUTOPILOT",s.TEXT_SIZE_SMALL,"g"),D=o.default.create("HOMING BULLETS",s.TEXT_SIZE_SMALL,"g"),N=o.default.create("ULTRABRIGHT",s.TEXT_SIZE_SMALL,"g"),B=o.default.create("PROXIMITY MINES X3",s.TEXT_SIZE_SMALL,"g"),F=o.default.create("FLAMETHROWER",s.TEXT_SIZE_SMALL,"g"),V=o.default.create("UNKNOWN ??",s.TEXT_SIZE_SMALL,"g");t.BONUS_BUFFERS={BUFFER_LIFE:E,BUFFER_ROCKET_X1:M,BUFFER_ROCKET_X2:I,BUFFER_ROCKET_X3:L,BUFFER_EB:w,BUFFER_SHIELD:b,BUFFER_BOOSTERS:P,BUFFER_WEAPON_UPGRADE:R,BUFFER_DRONE:O,BUFFER_UNKNOWN:V,BUFFER_MISSILE_X6:C,BUFFER_AUTOPILOT:G,BUFFER_HOMINGBULLETS:D,BUFFER_ULTRABRIGHT:N,BUFFER_PROXIMITY_MINES_X3:B,BUFFER_FLAME:F};var k=[],X=[];t.default=function(e){var t=e.SX,s=e.SY,E=e.gl;k=[],X=[];for(var M=e.game.asteroids,I=0;I<M.length;I++){var L=M[I];if(r.onStage(e,L.pos.x,L.pos.y,L.radius)){var w=L.type;if(4!==L.type){var b=null;switch(w){case 58:b=d;break;case 52:b=A;break;case 54:b=u;break;case 55:b=l;break;case 56:b=c;break;case 51:b=p;break;case 59:b=f;break;case 60:b=h;break;case 61:b=v;break;case 57:b=g;break;case 62:b=y;break;case 64:b=m;break;case 63:b=x;break;case 53:b=S;break;case 65:b=_;break;default:b=T}o.default.addGL(E,a.default(n.GLctx.Texture,E),b,L.pos.x-t-.5*L.radius+5,L.pos.y-s-.5*L.radius-5,e);var P=i.hexBox(L.radius,L.pos,t,s);k.push.apply(k,P[0]),r.addToColorMap(X,k,.1,.1,.1,1),k.push.apply(k,P[1]),r.addToColorMap(X,k,.7,.7,.7,1),k.push.apply(k,P[2]),r.addToColorMap(X,k,.3,.3,.3,1)}}}if(k.length>0){var R=a.default(n.GLctx.Vertices,E);r.drawColorMap(X,k,R,E)}return"bonuses"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(8),r(0),r(3),r(9)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.msToTime=void 0,r.default.createSplitted("1234567890:",n.TEXT_SIZE_SMALL,"g"),r.default.createSplitted("1234567890:",n.TEXT_SIZE_LARGE,"g");var i=r.default.create("You survived for",n.TEXT_SIZE_SMALL,"w"),s=r.default.create("1",n.TEXT_SIZE_MEDIUM,"g"),A=r.default.create("1",n.TEXT_SIZE_LARGE,"r");t.msToTime=function(e){var t=Math.floor(e%1e3/100),r=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),n=Math.floor(e/36e5);return(n>0?(n<10?"0"+n:n)+":":"")+(a<10?"0"+a:a)+":"+(r<10?"0"+r:r)+":"+t};var u=-1;t.default=function(e){var l=e.game,c=e.gl,d=l.resW,p=(l.resH,l.daylight.is_night);if(l.menuSettings.gameClock&&!(l.currentLevel<=13)){var f=o.default(e),h=f?l.fromClock>0?l.fromClock-l.clock:l.clock:u;u=h;var v=s,g=n.TEXT_SIZE_SMALL;l.fromClock&&(l.clock>l.fromClock&&(h=0),h<1e4&&(g=n.TEXT_SIZE_LARGE,v=A));var y=r.default.createSplitted(t.msToTime(h),g,!f||p?"r":"g",""),m=a.default(a.GLctx.Texture,c);return r.default.addListGL(c,m,y,d-8*v.w+8,8,e),f||r.default.addGL(c,m,i,d-(8*v.w+8+i.w),8,e),"clock"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(3),r(100),r(9),r(56)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distortionBracketEnd=t.resetDistortionBracket=void 0;var s=0,A=.97*a.GAME_INTRO_TIMER;t.resetDistortionBracket=function(){A=a.GAME_INTRO_TIMER};var u=!1;t.default=function(e,t){e.ctx,e.frame;var r=e.WW,l=e.WH,c=e.game,d=e.SW,p=(e.SH,e.SX,e.SY,e.gl,e.stepMS),f=e.step;c.resW;A-=f;var h=o.default(e),v=c.currentLevel>=13&&(null==h?void 0:h.damageTaken)||!c.IS_PROCEDURAL&&i.default(h,r,l);if(!v&&h&&(v=Math.abs(h.forceX)>.5||Math.abs(h.forceY)>.5),v){var g=4;Math.random()>.9&&(g=64,Math.random()>.9&&(g=256)),e.SX+=(Math.random()-.5)*g,e.SY+=(Math.random()-.5)*g}return h&&h.damageTaken&&(s=500),s>0||v||!h||A>-30||c.level_completed?(s-=p,!c.level_completed&&h||(A=a.GAME_INTRO_TIMER),!u,u=!0):(!!u,u=!1),t.distortion&&u&&n.setTargetToFrameBuffer(e),"distortion begin"};t.distortionBracketEnd=function(e,t){var a=e.gl,o=r.default(u?r.GLctx.GameBufferDist:r.GLctx.Texture,a);return n.renderFrameBuffer(a,o,u),n.setTargetToCanvas(a),"distortion end"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(126),r(187),r(188),r(189),r(190),r(191),r(192),r(2)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawWeaponIcon=void 0;t.drawWeaponIcon=function(e,t,l,c,d,p,f,h,v){switch(void 0===c&&(c=1),void 0===h&&(h=1),e){case 25:r.drawBulletIcon(t,l,d,c,!1,h);break;case 30:o.drawRocketIcon(t,l,d,c,!0,!1,h);break;case 32:o.drawRocketIcon(t,l,d,c,!1,!1,h);break;case 31:o.drawRocketIcon(t,l,d,c,!0,!0,h);break;case 24:case 41:case 42:a.drawChargeIcon(t,l,d,p,f,e,c,h);break;case 50:n.drawElectroIcon(t,l,d,c,h);break;case 43:i.drawTurretIcon(t,l,d,c,h);break;case 26:A.drawFlameIcon(t,l,d,p,f,c,h);break;case 27:s.drawLazerIcon(t,l,d,p,f,c,h)}v&&[d,p,f].filter(function(e){return e.length}).forEach(function(e,t){var r=1-.33*t;u.drawColor(e,v.gl,0,r,0,1-.2*t)})}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawBulletIcon=void 0;var a=[0,1,2,4,8];t.drawBulletIcon=function(e,t,n,o,i,s){void 0===o&&(o=1),void 0===i&&(i=!1),void 0===s&&(s=1);var A=2*o,u=40*A,l=10*A,c=3*A,d=2*A,p=Math.max(2,2.2*A),f=20*A,h=.4*A,v=e,g=t;switch(s){case 1:v=e-.5*(u+1.5*f),g=t-.5*l;break;case 0:v=e,g=t+5*A}r.line2Poly(v+.1*u,g,v+u,g,n,p),r.line2Poly(v+.1*u,g+l,v+u,g+l,n,p),r.line2Poly(v+A,g-p,v+A,g+l+p,n,1.3*p),r.line2Poly(v+A,g+.5*A,v+.15*u,g+.5*A,n,.5*p),r.line2Poly(v+A,g+l-.5*A,v+.15*u,g+l-.5*A,n,.5*p),r.line2Poly(v+.15*u,g+.8*l,v+.95*u,g+.8*l,n,Math.max(1,.1*p)),r.line2Poly(v+u-A+2,g,v+u+c,g+d,n,p),r.line2Poly(v+u-A+2,g+10*A,v+u+c,g+10*A-d,n,p),r.line2Poly(v+u+c,g+d,v+u+c,g+10*A-d,n,.3*p),r.line2Poly(v+u+c,g+d,v+u+c+f,g+d,n,p),r.line2Poly(v+u+c,g+10*A-d,v+u+c+f,g+10*A-d,n,p);for(var y=0;y<a.length-1;y++)r.line2Poly(v+u+c+f+3*y*A,g+10*A-d+a[y]*-h,v+u+c+f+3*(y+1)*A,g+10*A-d+a[y+1]*-h,n,p);for(y=0;y<a.length-1;y++)r.line2Poly(v+u+c+f+3*y*A,g+d+a[y]*h,v+u+c+f+3*(y+1)*A,g+d+a[y+1]*h,n,p);i&&(r.line2Poly(v+2*u,g+.7*l,v+2*u+20*A,g+l,n,.5*p),r.line2Poly(v+2*u,g+.3*l,v+2*u+20*A,g,n,.5*p),r.line2Poly(v+2.2*u,g+.5*l,v+2*u+20*A,g+.6*l,n,.5*p),r.line2Poly(v+2.2*u,g+.5*l,v+2*u+20*A,g+.4*l,n,.5*p))}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(7),r(2),r(5),r(8),r(3),r(0),r(0),r(55),r(2),r(6),r(1)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawTurret=void 0;var p=[],f=[],h=[],v=0,g=new d.Vector(0,0),y=new d.Vector(0,0);t.drawTurret=function(e,t,r,n,o,i,s,A){void 0===A&&(A=1),g.set(2*e,0),g.setAngle(t),a.line2Poly(r-i,n-s,r+g.x-i,n+g.y-s,o,3*A);for(var u=0;u<4;u++)g.set(1.5*e,0),g.setAngle(t+.25*Math.PI+.5*Math.PI*u),y.set(.8*e,0),y.setAngle(t+.25*Math.PI+.5*Math.PI*u),a.line2Poly(r+g.x-i,n+g.y-s,r+y.x-i,n+y.y-s,o,1.5*A);l.blockCirclePoly(6,e,r,n,t+Math.PI/6,o,0,i,s,2*A,!1,0,4,0,4)},t.default=function(e){e.SW,e.SH;var d=e.SX,g=e.SY,y=e.gl,m=e.game,x=e.stepMS;p=[],f=[],h=[],(v+=x)>500&&(v=0);var S=n.getQuadTreesObj();if(S.All)for(var _=S.queryTreesRect([43],m.screen.rectSS_200),T=_.length,E=0;E<T;E++){var M=_[E];M.bullets>0&&h.push({heat:M.overheatVal,overheat:M.overHeatTimerMS>0,posx:M.pos.x,posy:M.pos.y,value:M.bullets}),M.life<30&&u.default(e,M.pos,(30-M.life)*Math.random()+5,70+50*Math.random());var I=M.pos.x,L=M.pos.y;t.drawTurret(M.radius,M.angle,I,L,p,d,g),a.addToColorMap(f,p,.1,.6,.1,.8)}if(p.length>0){var w=[];if(h.length>0){y.disable(y.BLEND);for(E=0;E<h.length;E++){var b=((O=h[E]).overheat||0===O.value)&&v>250?"   ":O.overheat?"OHT":c.pad009(O.value),P=o.default.create(b,i.TEXT_SIZE_SMALL,"y");w.push(P),l.drawRectPoly(new r.Rectangle(O.posx-.5*P.w*m.zoomTX,O.posy-40,P.w,i.TEXT_SIZE_SMALL),d,g,p,1),l.drawTriangle(O.posx-.5*P.w*m.zoomTX-4,O.posy-40+.5*i.TEXT_SIZE_SMALL,4,d,g,p),a.line2Poly(O.posx-P.w*m.zoomTX*.5-12-d,O.posy-40+i.TEXT_SIZE_SMALL-g,O.posx-P.w*m.zoomTX*.5-12-d,O.posy-40+i.TEXT_SIZE_SMALL-i.TEXT_SIZE_SMALL*O.heat*.01-g,p,2)}a.addToColorMap(f,p,1,1,0,1)}if(a.drawColorMapSingle(f,p,y),y.enable(y.BLEND),w.length>0){var R=s.default(A.GLctx.Texture,y);for(E=0;E<w.length;E++){var O=h[E];P=w[E];o.default.addGL(y,R,P,O.posx-d-.5*P.w*m.zoomTX,O.posy-g-40,e)}}}return"spaceTurrets"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(0),r(0),r(64),r(73),r(2),r(7),r(101),r(129)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l){"use strict";var c;Object.defineProperty(t,"__esModule",{value:!0}),t.RayCaster=void 0;var d=new A.Rectangle(0,0,0,0),p=[],f=A.rect_pool_pop(0,0,0,0);t.RayCaster=function(e,t,A,h,v,g,y,m,x,S,_,T,E){var M=A.game,I=A.gl,L=A.SH,w=A.SW,b=A.SX,P=A.SY;f.update(0,0,w,L);M.screen.rect;var R=M.resW/w,O=t>4?t:1e3*t*R;if(o.onStage(A,e.x,e.y,O)){!S,S||(d.x=e.x-.5*O,d.y=e.y-.5*O,d.width=O,d.height=O,S=d),_||(_=S),c=[],p.length=0,u.RCGL_POLYS(S,e,O,c,A),l.RAGL_POLYS(S,e,O,A,h,v,g,y,E);var C=e.x-b,G=e.y-P,D=S,N=D.x-b,B=D.x-b+D.width,F=D.y-P,V=D.y-P+D.height,k=[{a:{x:N,y:F},b:{x:B,y:F}},{a:{x:B,y:F},b:{x:B,y:V}},{a:{x:B,y:V},b:{x:N,y:V}},{a:{x:N,y:V},b:{x:N,y:F}}];if(void 0!==m&&void 0!==x){var X=new r.Vector(e.x+Math.cos(m-.5*x)*O,e.y+Math.sin(m-.5*x)*O),H=new r.Vector(e.x+Math.cos(m+.5*x)*O,e.y+Math.sin(m+.5*x)*O),U=new r.Vector(2*Math.cos(m),2*Math.sin(m)),W={a:{x:C-U.x,y:G-U.y},b:{x:X.x-b,y:X.y-P}},Y={a:{x:C-U.x,y:G-U.y},b:{x:H.x-b,y:H.y-P}};if(!(f.intersectsPoint(W.a)||f.intersectsPoint(W.b)||f.intersectsPoint(Y.a)||f.intersectsPoint(Y.b)))return;k.push(W,Y),p.push(C-U.x,G-U.y,X.x-b,X.y-P,C-U.x,G-U.y,H.x-b,H.y-P)}k.push.apply(k,i.polysToPair(c));var q=i.getSightPolygon(e.x-b,e.y-P,k);c=[],c=[e.x-b,e.y-P];var z=i.pairToPolys(q);if(c.push.apply(c,z),z.length>1&&c.push(z[0],z[1]),c.length>0){a.default(n.GLctx.VerticesGradient,I);var j=a.GLUniformLocation(I,"u_pos_x"),K=a.GLUniformLocation(I,"u_pos_y"),Z=a.GLUniformLocation(I,"u_perimiter");I.uniform1f(j,C),I.uniform1f(K,G),I.uniform1f(Z,O),s.drawColor(c,I,h,v,g,y,I.TRIANGLE_FAN),T&&(a.default(n.GLctx.Vertices,I),s.drawColor(c,I,1,0,0,1,I.LINE_STRIP),s.drawColor(p,I,1,1,1,1,I.LINE_STRIP),c.length=0,s.drawRectPoly(S,b,P,c,2),s.drawColor(c,I,1,1,0,1))}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(2),r(5),r(7),r(1),r(73),r(0),r(22),r(6),r(195)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RAGL_LIGHTS_FLUSH=t.RAGL_POLYS_LOS_FLUSH=t.RAGL_POLYS_FLUSH=t.RAGL_POLYS=t.ignoreRayAbsorberShape=void 0;var d=new i.Vector(0,0),p=new i.Vector(0,0),f=new i.Vector(0,0),h={},v={},g=[],y=[],m=function(e,t,a,n,o,i){var s=e.pos,A=e.radius,u=t.posx,c=t.posy,h=Math.atan2(s.y-c,s.x-u),g=t.radius,y=r.distanceBetweenXYXY(s.x,s.y,u,c)-e.radius;d.setLength(A),d.setAngle(h-.5*Math.PI),p.setLength(A),p.setAngle(h+.5*Math.PI),a.push(d.x+s.x-o,d.y+s.y-i,p.x+s.x-o,p.y+s.y-i);var m={a:{x:d.x+s.x-o,y:d.y+s.y-i},b:{x:p.x+s.x-o,y:p.y+s.y-i},guid:e.guid};n.push(m);var x=.8*g/(y||1),S=Math.min(2*e.radius,g),_=Math.max(2*e.radius,g);l.map(x,0,1,S,_),f.setLength(Math.max(y-e.radius,e.radius)),f.setAngle(h-Math.PI);var T=.5*g,E=Math.min(1,(y||1)/(T||1)),M=1-E,I=Math.min(2*e.radius,Math.max(.5*e.radius,g*E*1.2));Math.max(e.radius,I*(1.2*E));f.setLength(e.radius+.5*I*E),f.setAngle(h-Math.PI),function(e,t){var r=v[e.guid];r?r.lights.push(t):r=v[e.guid]={item:e,lights:[t]}}(e,{r:Math.min(t.r*M*2,1),g:Math.min(t.g*M*2,1),b:Math.min(t.b*M*2,1),a:t.a,radius:I,posx:s.x+f.x,posy:s.y+f.y,originalX:u,originalY:c})};t.ignoreRayAbsorberShape=function(e,t){return r.distanceBetweenXYXY(e.pos.x,e.pos.y,t.x,t.y)<=.95*e.radius};var x=o.rect_pool_pop(0,0,0,0);t.RAGL_POLYS=function(e,r,a,o,i,A,u,l,c){var d=o.game,p=o.SX,f=o.SY,v=(o.SW,o.SH,n.getQuadTreesObj());if(v.All){x.update(e.x,e.y,e.width,e.height),c?(x.updateFromRect(d.screen.rectSS_400),a=x.height-400):(x.add(310),a+=300);for(var S=[],_=[],T=(r.x,r.y,v.queryTreesRect([4,11,21,22],x)),E=0;E<T.length;E++){var M=T[E];11!==M.type&&t.ignoreRayAbsorberShape(M,r)||m(M,{posx:r.x,posy:r.y,r:i,g:A,b:u,a:l,radius:a},S,_,p,f)}var I=x.x-p,L=x.x-p+x.width,w=x.y-f,b=x.y-f+x.height,P=[{a:{x:I,y:w},b:{x:L,y:w}},{a:{x:L,y:w},b:{x:L,y:b}},{a:{x:L,y:b},b:{x:I,y:b}},{a:{x:I,y:b},b:{x:I,y:w}}];P.push.apply(P,_);for(var R=s.getSightPolygon(r.x-p,r.y-f,P),O=h[r.x+"_"+r.y]={},C=0;C<R.length;C++)O[R[C].guid]=!0;var G=[r.x-p,r.y-f],D=s.pairToPolys(R);G.push.apply(G,D),G.push(D[0],D[1]),g.push(G),c&&(y.length=0,y.push.apply(y,G))}};t.RAGL_POLYS_FLUSH=function(e,t,r,n,o,i,s,u){if(void 0===t&&(t=!1),void 0===r&&(r=!1),void 0===n&&(n=1),void 0===o&&(o=1),void 0===i&&(i=1),void 0===s&&(s=1),void 0===u&&(u=e.gl.TRIANGLE_FAN),!t){var l=e.gl;A.default(A.GLctx.Vertices,l),l.disable(l.BLEND);for(var c=0;c<g.length;c++){var d=g[c];a.drawColor(d,l,n,o,i,s,u)}return l.enable(l.BLEND),r||(g.length=0),"RAGL_POLYS_FLUSH"}g.length=0};t.RAGL_POLYS_LOS_FLUSH=function(e,t,r,n,o,i){void 0===t&&(t=1),void 0===r&&(r=1),void 0===n&&(n=1),void 0===o&&(o=1),void 0===i&&(i=e.gl.TRIANGLE_FAN);var s=e.gl;return A.default(A.GLctx.Vertices,s),s.disable(s.BLEND),a.drawColor(y,s,t,r,n,o,i),s.enable(s.BLEND),"RAGL_POLYS_LOS_FLUSH"};t.RAGL_LIGHTS_FLUSH=function(e){e.gl;for(var t=e.game,r=e.SX,i=e.SY,s=(e.SW,e.SH),A=n.getQuadTreesObj().queryTreesRect([4,21],t.screen.rect),l=(new o.Rectangle(0,0,0,0),A.length),d=0;d<l;d++){var p=A[d];if(M=v[p.guid]){var f=[];a.blockCirclePoly(p.sides,p.radius,p.pos.x,p.pos.y,p.angle,f,s,r,i,Math.max(4,.1*p.radius));for(var g=(I=M.lights).length,y=0;y<g;y++){var m=I[y];h[m.originalX+"_"+m.originalY][p.guid]&&u.GlowCustomLayout({x:m.posx,y:m.posy},m.radius,f,e,m.r*p.specular,m.g*p.specular,m.b*p.specular,m.a)}}}var x=[],S=[],_=[],T=[],E=n.getQuadTreesObj().queryTreesRect([11],t.screen.rect);for(l=E.length,d=0;d<l;d++){var M,I,L=E[d];if(M=v[L.guid])for(x.length=0,S.length=0,_.length=0,T.length=0,a.blockCirclePoly(L.sides,L.radius,L.pos.x,L.pos.y,L.angle,x,s,r,i,L.radius),c.drawRockformationCrystals(L,r,i,L.radius,.46,_,S,T),g=(I=M.lights).length,y=0;y<g;y++)m=I[y],h[m.originalX+"_"+m.originalY][L.guid]&&(u.GlowCustomLayout({x:m.posx,y:m.posy},m.radius,x,e,m.r*L.specular*.2,m.g*L.specular*.2,m.b*L.specular,m.a),u.GlowCustomLayout({x:m.posx,y:m.posy},m.radius,T,e,m.r*L.specular*2,m.g*L.specular*2,m.b*L.specular*2,m.a),u.GlowCustomLayout({x:m.posx,y:m.posy},m.radius,S,e,m.r*L.specular*.1,m.g*L.specular*.1,m.b*L.specular,m.a),u.GlowCustomLayout({x:m.posx,y:m.posy},m.radius,_,e,m.r*L.specular*.2,m.g*L.specular*.2,m.b*L.specular*.2,m.a))}return v={},h={},"RAGL_LIGHTS_FLUSH"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(7)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRagdoll=t.RagDoll=t.Link=void 0;var n=function(){function e(e){this.x=e.x,this.y=e.y,this.xb=this.x,this.yb=this.y+2,this.w=0,this.stiffness=e.stiffness,this.mass=1}return e.prototype.anim=function(e){var t=(this.x-this.xb)*this.stiffness,r=(this.y-this.yb)*this.stiffness;this.xb=this.x,this.yb=this.y,this.x+=t+.5*(Math.random()-.5)*e,this.y+=r+.5*(Math.random()-.5)*e},e}(),o=function(){function e(e,t,r,a,n,o,i,s){this.p1=e,this.p2=t,this.p3=r,this.len1=a,this.len2=n,this.angle=o,this.range=i,this.force=s||.2}return e.prototype.solve=function(){var e,t,r,a,n,o,i,s,A,u,l,c;e=Math.atan2(this.p2.y-this.p1.y,this.p2.x-this.p1.x),t=Math.atan2(this.p3.y-this.p2.y,this.p3.x-this.p2.x),r=(r=this.angle-(t-e))>Math.PI?r-2*Math.PI:r<-Math.PI?r+2*Math.PI:r,a=Math.abs(r)>this.range?(-Math.sign(r)*this.range+r)*this.force:0,n=this.p1.mass+this.p2.mass,o=this.p1.mass/n,i=this.p2.mass/n,l=Math.cos(e-a),c=Math.sin(e-a),A=this.p1.x+(this.p2.x-this.p1.x)*i,u=this.p1.y+(this.p2.y-this.p1.y)*i,this.p1.x=A-l*this.len1*i,this.p1.y=u-c*this.len1*i,this.p2.x=A+l*this.len1*o,this.p2.y=u+c*this.len1*o,e=Math.atan2(this.p2.y-this.p3.y,this.p2.x-this.p3.x)+a,n=this.p2.mass+this.p3.mass,i=this.p2.mass/n,s=this.p3.mass/n,l=Math.cos(e),c=Math.sin(e),A=this.p3.x+(this.p2.x-this.p3.x)*i,u=this.p3.y+(this.p2.y-this.p3.y)*i,this.p3.x=A-l*this.len2*i,this.p3.y=u-c*this.len2*i,this.p2.x=A+l*this.len2*s,this.p2.y=u+c*this.len2*s},e}(),i=function(){function e(e,t){this.length=t.length*e.s,this.width=t.width*e.s,this.type=t.memberType,e.points[t.p0]=this.p0=e.points[t.p0]?e.points[t.p0]:new n(e),e.points[t.p1]=this.p1=e.points[t.p1]?e.points[t.p1]:new n(e),this.width>this.p0.w&&(this.p0.w=this.width);var r=t.mass||1;r>this.p0.mass&&(this.p0.mass=r),r>this.p1.mass&&(this.p1.mass=r)}return e.prototype.draw=function(){var e=this.p1.x-this.p0.x,t=this.p1.y-this.p0.y,a=Math.atan2(t,e),n=new r.Vector(this.length,0);n.setAngle(a);var o=n.toPoint();return{a:{x:this.p0.x,y:this.p0.y},b:o,angle:a,end:{x:this.p0.x+n.x,y:this.p0.y+n.y}}},e}();t.Link=i;var s=a.rect_pool_pop(0,0,0,0),A=function(){function e(e,t,r,a,n){function s(e,t){for(var r=0;r<n.links.length;r++){var a=n.links[r];if(a.p0===e&&a.p1===t||a.p0===t&&a.p1===e)return a.length}return 1}this.points=[],this.links=[],this.angles=[],this.x=e,this.y=t,this.s=r,this.stiffness=a,this.points=[],this.links=[],this.angles=[];for(var A=0;A<n.links.length;A++){var u=n.links[A];this.links.push(new i(this,u))}for(A=0;A<n.constraints.length;A++){var l=n.constraints[A];this.angles.push(new o(this.points[l.p1],this.points[l.p2],this.points[l.p3],s(l.p1,l.p2)*r,s(l.p2,l.p3)*r,l.angle,l.range,l.force))}}return e.prototype.anim=function(e){for(var t=0,r=void 0;r=this.points[t++];r.anim(e));for(t=0,r=void 0;r=this.angles[t++];r.solve());},e.prototype.getRect=function(){for(var e=Number.MAX_VALUE,t=Number.MAX_VALUE,r=Number.MIN_VALUE,a=Number.MIN_VALUE,n=0,o=void 0;o=this.points[n++];)o.x>r&&(r=o.x),o.y>a&&(a=o.y),o.x<e&&(e=o.x),o.y<t&&(t=o.y);return s.update(e,t,r-e,a-t),s},e.prototype.collideIM=function(e){for(var t=0,r=void 0;r=this.points[t++];){var a=r.x-e.pos.x,n=r.y-e.pos.y,o=Math.sqrt(a*a+n*n),i=e.radius+r.w;if(o<i){o=Math.abs(i-o);var s=Math.atan2(n,a);r.x+=o*Math.cos(s),r.y+=o*Math.sin(s)}}},e.prototype.collide=function(e){for(var t=0,r=void 0;r=this.points[t++];)for(var a=0,n=void 0;n=e.points[a++];){var o=r.x-n.x,i=r.y-n.y,s=Math.sqrt(o*o+i*i),A=.5*(r.w+n.w);if(s<A){s=Math.abs(A-s);var u=Math.atan2(i,o),l=s*Math.cos(u)*.5,c=s*Math.sin(u)*.5;r.x+=l,r.y+=c,n.x-=l,n.y-=c}}},e}();t.RagDoll=A;var u={links:[{p0:0,p1:1,length:3,width:3,img:"rd05.png",memberType:1},{p0:1,p1:2,length:5,width:2.5,img:"rd09.png",memberType:2},{p0:3,p1:7,length:6,width:3.5,img:"rd01.png",memberType:5},{p0:7,p1:8,length:7,width:5,img:"rd06.png",memberType:6},{p0:3,p1:9,length:6,width:3.5,img:"rd01.png",memberType:7},{p0:9,p1:10,length:7,width:5,img:"rd06.png",memberType:8},{p0:0,p1:4,length:2.5,width:4.5,img:"rd04.png",memberType:9},{p0:0,p1:3,length:9,width:5,mass:10,img:"rd08.png",memberType:0},{p0:0,p1:5,length:5,width:3,img:"rd05.png",memberType:3},{p0:5,p1:6,length:5,width:2.5,img:"rd07.png",memberType:4}],constraints:[{p1:4,p2:0,p3:3,angle:0,range:.1,force:.2*.1*5},{p1:3,p2:0,p3:1,angle:Math.PI/2,range:2*Math.PI*.1,force:.2*.1},{p1:0,p2:1,p3:2,angle:-Math.PI/2,range:Math.PI/2*.1,force:.2*.1},{p1:3,p2:0,p3:5,angle:Math.PI/2,range:2*Math.PI*.1,force:.2*.1},{p1:0,p2:5,p3:6,angle:-Math.PI/2,range:Math.PI/2*.1,force:.2*.1},{p1:0,p2:3,p3:7,angle:-Math.PI/3,range:Math.PI/2*.1,force:.2*.1},{p1:0,p2:3,p3:9,angle:-Math.PI/3,range:Math.PI/2*.1,force:.2*.1},{p1:3,p2:7,p3:8,angle:Math.PI/2,range:Math.PI/3*.1,force:.2*.1},{p1:3,p2:9,p3:10,angle:Math.PI/2,range:Math.PI/3*.1,force:.2*.1}]};t.createRagdoll=function(e,t,r){return void 0===e&&(e=300),void 0===t&&(t=300),void 0===r&&(r=10),new A(e,t,r,.998,u)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(76),r(61)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRadialGradientTexture=void 0;var n={};t.createRadialGradientTexture=function(e,t,o,i,s,A,u){void 0===u&&(u=!1);var l=""+e+o+t+i+s+A;if(u){var c=n[l];if(c)return c}var d=document.createElement("canvas");d.height=s,d.width=s;var p=d.getContext("2d"),f=.5*s,h=p.createRadialGradient(f,f,0,f,f,f);h.addColorStop(0,"rgba("+e+", "+o+", "+t+", "+i+")"),h.addColorStop(1,"Enable"===A?"rgba(0, 0, 0, 1)":"rgba(0, 0, 0, 0)"),p.fillStyle=h,p.fillRect(0,0,s,s);var v=r.default.create("texture1",d,!0,a.default().global_gl);return u&&(n[l]=v),v}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(1),r(22),r(196),r(3),r(197),r(9),r(11),r(2),r(6),r(5),r(55),r(4),r(21),r(14)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d,p,f,h,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawGenericShipThrust=t.drawPlayerShipThrust=void 0;var g=0,y=[[0,0,1],[0,1,0],[1,0,0]],m=0,x=[],S=new r.Vector(0,0),_=new r.Vector(0,0),T=function(e,t,a,n){return void 0===a&&(a=0),void 0===n&&(n=0),new r.Vector(e.pos.x+Math.cos(t)*-(i.SHIP_LENGTH_RADIUS+a),e.pos.y+Math.sin(t)*-(i.SHIP_LENGTH_RADIUS+n))},E=function(e,t){var r=u.ShipColors[e.colorIndex]||u.ShipColors[0];a.Glow(e.pos,4*e.radius,[],t,.5*r.r,.5*r.g,.5*r.b,1)},M=function(e,t,r,a,o,i,s,A){void 0===A&&(A=!1),n.DirectionalGlow(e,t+a,o,Math.PI*r,i,s,s,s,1),A||(n.DirectionalGlow(e,1.25*t+a,o,Math.PI*r*.5,i,s,s,1,1),n.DirectionalGlow(e,1.5*t+a,o,Math.PI*r*.2,i,1,s,1,1),n.DirectionalGlow(e,1.65*t+a,o,Math.PI*r*.1,i,1,s,1,1))},I=new r.Vector(0,0);t.drawPlayerShipThrust=function(e,t,r){var n,o;void 0===r&&(r=1);var i=.5+.2*c.RandomStepBased(t.step,e.guid),A=.1*c.RandomStepBased(t.step,e.guid)*r;I.set(e.radius*r*.4,0);var u=e.keyCodes,l=null===(n=e.abilities.hash[2])||void 0===n?void 0:n.activated,d=l?.8:.5;if(u.UP||l){var p=T(e,e.angle,0,0);M(p,.2*d,.1*d,A,e.angle+Math.PI,t,i)}if(u.DOWN){var h=f.midpoint(e.comp[0].vertex[0],e.comp[0].vertex[1],.9),v=f.midpoint(e.comp[0].vertex[0],e.comp[0].vertex[2],.9);M(h,.03*d,.1*d,A,e.angle,t,i),M(v,.03*d,.1*d,A,e.angle,t,i)}(null===(o=e.abilities.hash[2])||void 0===o?void 0:o.activated)&&(p=T(e,e.angle,0,0),M(p,.4*d,.07*d,A,e.angle+Math.PI,t,i),c.rotateVector(I,e.angle+Math.PI,I),I.add(p),s.Flare(I,.5,t),a.Glow(I,.1,[],t,1,1,1,1));u.LEFT&&(M(e.comp[0].vertex[1],.05*d*.6,.07*d,A,e.angle+-.5*Math.PI,t,i),M(e.comp[0].vertex[0],.05*d*.6,.07*d,A,e.angle+.5*Math.PI,t,i)),u.RIGHT&&(M(e.comp[0].vertex[2],.05*d*.6,.07*d,A,e.angle+.5*Math.PI,t,i),M(e.comp[0].vertex[0],.05*d*.6,.07*d,A,e.angle+-.5*Math.PI,t,i)),e.abilities.hash[14]&&(u.STRAFERIGHT&&(M(e.comp[0].vertex[2],.05*d*.6,.07*d,A,e.angle+-.5*Math.PI,t,i),M(e.comp[0].vertex[0],.05*d*.6,.07*d,A,e.angle+-.5*Math.PI,t,i)),u.STRAFELEFT&&(M(e.comp[0].vertex[1],.05*d*.6,.07*d,A,e.angle+.5*Math.PI,t,i),M(e.comp[0].vertex[0],.05*d*.6,.07*d,A,e.angle+.5*Math.PI,t,i)))};t.drawGenericShipThrust=function(e,t){var r=49===e.type?.05:.3,n=.5+.2*c.RandomStepBased(t.step,e.guid),o=.05*c.RandomStepBased(t.step,e.guid),i=.05*c.RandomStepBased(t.step,e.guid),s=.05*c.RandomStepBased(t.step,e.guid),A=.05*c.RandomStepBased(t.step,e.guid),u=.05*c.RandomStepBased(t.step,e.guid);e.turnAcc<.03?(M(e.comp[0].vertex[2],.05*r,.07*r,o,e.angle+-.5*Math.PI,t,n,!0),M(e.comp[0].vertex[0],.05*r,.07*r,i,e.angle+.5*Math.PI,t,n,!0),a.Glow(e.comp[0].vertex[2],o,[],t,n,n,n,.05),a.Glow(e.comp[0].vertex[0],i,[],t,n,n,n,.05)):e.turnAcc>.03&&(M(e.comp[0].vertex[1],.05*r,.07*r,s,e.angle+.5*Math.PI,t,n,!0),M(e.comp[0].vertex[0],.05*r,.07*r,A,e.angle+-.5*Math.PI,t,n,!0),a.Glow(e.comp[0].vertex[1],o,[],t,n,n,n,.05),a.Glow(e.comp[0].vertex[0],i,[],t,n,n,n,.05));var l=e.vel.getLength();if(!(l<1)){var d=T(e,e.angle,0,0);M(d,.2*r*l*.2,.1*r*l*.2,u,e.angle+Math.PI,t,n),a.Glow(d,u,[],t,n,n,n,.05)}};var L=0,w=!0,b=0;t.default=function(e){e.WW,e.WH;var n,u,T,M,I,P,R,O,C,G=e.game,D=(e.SW,e.SH,e.SX),N=e.SY,B=(e.gl,e.step);if(G.menuSettings.glow){x=[];var F=d.getQuadTreesObj();if(F.All){for(var V=G.screen.rect,k=F.queryTreesRect([35],V),X=k.length,H=0;H<X;H++){var U=k[H];a.Glow(U.pos,.003*U.radius*1.35,x,e,.9,.1,.1,.2)}var W=F.queryTreesRect([2],V);for(H=0;H<W.length;H++){var Y=W[H];if(Y.miningRig)if(4===Y.miningRig.armState){var q=Y.miningRig.arm[Y.miningRig.arm.length-1];p.default(e,q.joint,80,20),a.Glow(q.joint,.01+.05*c.RandomStepBased(B,Y.guid),[],e,.3,.3,1*c.RandomStepBased(B,Y.guid+3),1)}else if(5===Y.miningRig.armState){q=Y.comp[0].vertex[0];p.default(e,q,80,20),a.Glow(q,.01+.05*Math.random(),[],e,.3,.3,1*Math.random(),1)}}var z=F.queryTreesRect([4],V);X=z.length;for(H=0;H<X;H++){var j=z[H];4!==j.type&&a.Glow(j.pos,.1,x,e,.1,.9,.1,1)}var K=F.queryTreesRect([42],V);X=K.length;for(H=0;H<X;H++){var Z=K[H];a.Glow(Z.pos,.03*Z.lightIntensity,x,e,.6,.1,.1,1)}var Q=F.queryTreesRect([43],V);X=Q.length;for(H=0;H<X;H++){var J=Q[H];J.fireing?a.Glow(J.pos,.01+.08*c.RandomStepBased(B,J.guid),x,e,1,1,1,1):J.bullets>0&&a.Glow(J.pos,.03*J.lightIntensity,x,e,.1,.6,.3,1)}var $=F.queryTreesRect([41],V);X=$.length;for(H=0;H<X;H++){(Z=$[H]).target?2===Z.aquireMode?(Z.intersectAaquired&&a.Glow(Z.intersectA,.003+.015*c.RandomStepBased(B,Z.guid),x,e,.1,.9,.1,1),Z.intersectBaquired&&a.Glow(Z.intersectB,.003+.015*c.RandomStepBased(B,Z.guid),x,e,.1,.9,.1,1),a.Glow(Z.pos,.01,x,e,.1,.9,.1,1)):1===Z.aquireMode&&(Z.intersectAaquired&&a.Glow(Z.intersectA,.003+.015*c.RandomStepBased(B,Z.guid),x,e,.9,.2,.1,1),Z.intersectBaquired&&a.Glow(Z.intersectB,.003+.015*c.RandomStepBased(B,Z.guid),x,e,.9,.2,.1,1),a.Glow(Z.pos,.01,x,e,.9,.2,.1,1)):a.Glow(Z.pos,.015,x,e,.1,.2,1,1)}var ee=F.queryTreesRect([3],V);for(H=0;H<ee.length;H++){var te=ee[H];if(Ve=te.cannons[b]){var re=Ve.pos.x,ae=Ve.pos.y;if(Ve.fireing){_.set(2*te.wallThickness,0),c.rotateVector(_,Ve.angle,_);var ne=re+_.x,oe=ae+_.y;a.Glow({x:ne,y:oe},.05,[],e,1,1,1,1)}w?(L+=.19*B)>1&&(w=!1):(L-=.36*B)<0&&(L=0,w=!0,++b>=te.cannons.length&&(b=0));var ie=te.weaponsActive?0:1,se=te.weaponsActive?1:0;a.Glow({x:re,y:ae},.04*L,[],e,ie,se,.1,1)}else b=0}var Ae=h.getAllAnomalies(e.game);X=Ae.length;for(H=0;H<X;H++){var ue=Ae[H],le=(re=ue.pos.x,ae=ue.pos.y,new r.Vector(re,ae));switch(ue.type){case 12:a.Glow(le,.1*ue.radius,x,e,.6,.1,.6,1);break;case 13:a.Glow(le,.1*ue.radius,x,e,.6,.6,.1,1);break;case 14:a.Glow(le,.1*ue.radius,x,e,.6,.1,.1,1)}s.Flare(le,1,e)}var ce=v.getForce2Tree().queryInt(e.game.screen.rect);for(H=0;H<ce.length;H++){var de=ce[H];if(1===de.type)if(de.radius>30)a.Glow(de.pos,Math.max(de.radius>90?1.8*de.radius:.5*de.radius,30),[],e,1,1,1,1),s.Flare(de.pos,.1*de.radius*.01,e);else if(Math.random()>.7){var pe=Math.random();a.Glow(de.pos,7+7*Math.random(),[],e,1*pe,1*pe,1,1)}}var fe=G.rockets;X=fe.length;for(H=0;H<X;H++){var he=fe[H],ve=!0;if(he.life>i.ROCKET_START_LIFE-20?ve=!1:he.life>i.ROCKET_START_LIFE-40?ve=c.RandomStepBased(e.step,he.guid)>.8:he.life>i.ROCKET_START_LIFE-60&&(ve=c.RandomStepBased(e.step,he.guid)>.4),ve){var ge=1===he.subType?.3:1;a.Glow(he.pos,.1*ge,[],e,.8,.8,1,1),s.Flare(he.pos,.35*ge,e)}}var ye=A.default(e);ye&&((null===(n=ye.weapons.hash[50])||void 0===n?void 0:n.active)&&((null===(u=ye.targetLock)||void 0===u?void 0:u.pos)||(null===(T=ye.aimTarget)||void 0===T?void 0:T.pos))&&(a.Glow((null===(M=ye.targetLock)||void 0===M?void 0:M.pos)||ye.aimTarget.pos,.2*c.RandomStepBased(e.step,ye.guid)+.1,[],e,.9,.3,.9,1),s.Flare((null===(I=ye.targetLock)||void 0===I?void 0:I.pos)||ye.aimTarget.pos,.3,e)),(null===(P=ye.abilities.hash[3])||void 0===P?void 0:P.activated)&&E(ye,e),ye.life>0&&!ye.abilities.active.cloak&&t.drawPlayerShipThrust(ye,e),(null===(R=ye.weapons.hash[50])||void 0===R?void 0:R.active)&&!ye.unableToComply&&a.Glow(ye.comp[0].vertex[0],.01+.06*c.RandomStepBased(B,ye.guid),x,e,1,1,1,1),(null===(O=ye.abilities.hash[10])||void 0===O?void 0:O.activated)&&G.currentLevel>=13&&((null===(C=ye.abilities.hash[11])||void 0===C?void 0:C.activated)?a.Glow(ye.aimPoint,17+38*Math.random(),x,e,1,.1,.3+.7*Math.random(),1):a.Glow(ye.aimPoint,13,x,e,.3,1,.3,1)));var me=F.queryTreesRect([1,49,44,2],V);X=me.length;for(H=0;H<X;H++){var xe=me[H];ye&&ye.guid===xe.guid||l.onStage(e,xe.pos.x,xe.pos.y,100)&&((null==xe?void 0:xe.abilities.active.shield)>0&&E(xe,e),t.drawGenericShipThrust(xe,e))}var Se=F.queryTreesRect([0],V);X=Se.length;for(H=0;H<Se.length;H++){var _e=Se[H],Te=(ie=y[g][0],se=y[g][1],y[g][2]);a.Glow(_e.comp[0].vertex[g],.01*m,[],e,ie,se,Te,1),a.GlowCustomLayout(_e.comp[0].vertex[g],.1*Math.max(0,m-.8)*11,o(o(o([],_e.comp[0].vertex[0].toVertArray(D,N)),_e.comp[0].vertex[1].toVertArray(D,N)),_e.comp[0].vertex[2].toVertArray(D,N)),e,ie,se,Te,1),(m+=.1)>1&&(m=0,++g>2&&(g=0));for(var Ee=Math.min(3,2*_e.vel.getLength()+.1),Me=f.midpoint(_e.comp[0].vertex[2],_e.pos,.04),Ie=f.midpoint(_e.comp[0].vertex[1],_e.pos,.04),Le=(f.midpoint(_e.comp[0].vertex[2],Me,.5),f.midpoint(_e.comp[0].vertex[1],Ie,.5),f.midpoint(_e.comp[0].vertex[1],_e.comp[0].vertex[2])),we=f.midpoint(Le,_e.pos,.1),be=f.midpoint(Le,_e.pos,-.3),Pe=.3,Re=0;Re<5;Re++){var Oe=.1+.15*Ee,Ce=.2+.15*Ee,Ge=1,De=1,Ne=f.midpoint(Me,Ie,.165*(Re+1));2===Re&&(Ne=f.midpoint(Ne,_e.pos,.02)),Re<3?Pe+=.4:Pe-=.4;var Be=[we.x-D,we.y-N,be.x-D,be.y-N,_e.comp[0].vertex[1].x-D,_e.comp[0].vertex[1].y-N,we.x-D,we.y-N,be.x-D,be.y-N,_e.comp[0].vertex[2].x-D,_e.comp[0].vertex[2].y-N];_e.life<150&&Re%2==0&&(Oe=1*c.RandomStepBased(B,_e.guid+1),Ce=0,Ge=0,De=.5*c.RandomStepBased(B,_e.guid+2)+.5),a.GlowCustomLayout(Ne,.13*Pe*.4+.05*c.RandomStepBased(B,_e.guid+3),Be,e,Oe,Ce,Ge,1),a.GlowCustomLayout(Ne,.04*Pe*.4*Ee*1+.01*c.RandomStepBased(B,_e.guid+4),Be,e,De,De,De,1)}for(var Fe=0;Fe<_e.cannons.length;Fe++){var Ve=_e.cannons[Fe];S.setLength(.1*_e.radius),S.setAngle(Ve.angle),S.add(Ve.pos),Ve.fired&&(a.Glow(S,.01+.02*c.RandomStepBased(B,_e.guid),[],e,1,1,.2,1),a.GlowCustomLayout(S,.15+.15*c.RandomStepBased(B,_e.guid),o(o(o([],_e.comp[0].vertex[0].toVertArray(D,N)),_e.comp[0].vertex[1].toVertArray(D,N)),_e.comp[0].vertex[2].toVertArray(D,N)),e,.2,.2,.1,1))}}X=G.traceLine.length;for(H=0;H<X;H++)for(var ke=G.traceLine[H],Xe=ke.line,He=Xe.length,Ue=0;Ue<He;Ue++){Ne=Xe[Ue];a.Glow(Ne,.01,[],e,ke.r,ke.g,ke.b,ke.a)}return"glow"}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(9)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Darkness=t.setDarknessFollower=void 0;var i=[],s=null;t.setDarknessFollower=function(e){s=e};t.Darkness=function(e,t,o){void 0===o&&(o=1);var s=t.game,A=t.gl,u=t.SH,l=t.SW,c=t.SX,d=t.SY;i=[];var p=(l>u?l:u)*(s.resW/l)*1.5*o,f=e.x-c,h=e.y-d;if(r.fillPolyForFan(l,0,0,l,u,i),i.length>0){A.blendFunc(A.DST_COLOR,A.ZERO),a.default(n.GLctx.VerticesGradient,A);var v=n.GLUniformLocation(A,"u_pos_x"),g=n.GLUniformLocation(A,"u_pos_y");A.uniform1f(v,f),A.uniform1f(g,h);var y=n.GLUniformLocation(A,"u_perimiter");A.uniform1f(y,.5*p*(1+t.game.daylight.darkness_multip)),r.drawColor(i,A,1,1,1,1),A.blendFunc(A.ONE,A.ONE)}},t.default=function(e){i=[];var r=e.game,a=(e.gl,e.SH),n=e.SW,A=e.SX,u=e.SY;if(!r.menuSettings.extensiveUI&&!r.settings_no_darkness){var l=1,c=o.default(e),d=s;return d||(c?(c.abilities.active.cloak>0&&(l*=.2),d=c.pos):d={x:A+.5*n,y:u+.5*a}),t.Darkness(d,e,l),s=null,"darkness"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REVERSE_IN_GAME_KEY_BINDING_TRANSLATIONS=void 0,t.REVERSE_IN_GAME_KEY_BINDING_TRANSLATIONS={}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r};a=[r,t,r(49),r(1),r(136),r(137),r(3),r(123),r(202),r(40),r(15)],void 0===(n=function(e,t,r,a,n,s,A,u,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStorageUsedKB=t.getGameSaves=t.loadGame=t.deleteSavedGame=t.saveGame=void 0;var p=function(e,t){var r={life:A.NOTIFICATION_LIFE,type:70,message:t};e.notifications.unshift(r)},f=function(e){for(var t in e){var r=e[t];if(r)if(r.isVector)e[t]=new a.Vector(r.x,r.y,r.id);else if(r.isMuscleSegment){var o=r,i=new s.MuscleSegment(o.width,new n.Muscle(o.leftMuscle.minLength,o.leftMuscle.maxLength),new n.Muscle(o.rightMuscle.minLength,o.rightMuscle.maxLength),o.centerX,o.centerY,o.angle,o.desiredAngleVsTarget);e[t]=i}else"object"==typeof e[t]&&f(e[t])}};t.saveGame=function(e,t){try{var a=t||"LVL:"+e.currentLevel+" t:"+u.msToTime(e.clock),n=r.loadData("gameSaves")||[];if(n.filter(function(e){return e===a}).length>0)return void p(e,"ALREADY SAVED AT THIS LOCATION");n.push(a),e.allKeyCodes,e.notifications,e.performance,e.resH,e.resW,e.currentResH,e.currentResW,e.state,e.SW,e.SH,e.playerGuidHash;var o=i(e,["allKeyCodes","notifications","performance","resH","resW","currentResH","currentResW","state","SW","SH","playerGuidHash"]),s=r.loadData("descriptor")||l.getDescriptor(),A=l.pack(o,s,!0),c=A.result,d=r.saveData(a,c),f=r.saveData("descriptor",A.descriptor);console.log("Game save",d,"descriptor",f);var h=(r.loadInt("saveSize")||0)+d;console.log("save int","saveSize",h),r.saveInt("saveSize",h),r.saveData("gameSaves",n),p(e,"GAME SAVED")}catch(t){console.error(t),p(e,"UNABLE TO SAVE GAME")}};t.deleteSavedGame=function(e,t){var a=r.loadData("gameSaves")||[];a.push(t);var n=a.filter(function(e){return e!==t}),o=r.loadData(t);if(o){JSON.stringify(o).length;var i=r.loadInt("saveSize");r.saveInt("saveSize",i)}r.saveData(t,{deletedGame:!0}),r.saveData("gameSaves",n),p(e,"SAVE DELETED")};t.loadGame=function(e,t){var a=t.game,n=o({},a),i=(performance.now(),r.loadData(e)),s=l.unpack(i,r.loadData("descriptor"),function(){});for(var A in console.warn("hardcoded mapsize in loadgame"),c.default(d.default().engine,t,function(e){return{WW:16e3,WH:16e3}}),f(s),s)a[A]=s[A];a.SW=n.SW,a.SH=n.SH,a.resH=n.resH,a.resW=n.resW;performance.now();p(a,"GAME LOADED")};t.getGameSaves=function(){return r.loadData("gameSaves")||[]};t.getStorageUsedKB=function(){return Math.ceil((r.loadInt("saveSize")||0+JSON.stringify(r.loadData("descriptor")||{}).length)/1e3)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Muscle=void 0;var r=function(){function e(e,t){this.minLength=e,this.maxLength=t,this.l=t}return e.prototype.toJSON=function(){return{minLength:this.minLength,maxLength:this.maxLength,l:this.l}},e.prototype.relax=function(){this.l=.98*this.l+.02*this.maxLength},e.prototype.contract=function(){this.l=.95*this.l+.05*this.minLength},e}();t.Muscle=r}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MuscleSegment=void 0;var r=function(e){for(;e<0;)e+=2*Math.PI;for(;e>=2*Math.PI;)e-=2*Math.PI;return e},a=function(){function e(e,t,r,a,n,o,i){this.isMuscleSegment=!0,this.width=e,this.leftMuscle=t,this.rightMuscle=r,this.centerX=a,this.centerY=n,this.angle=o,this.desiredAngleVsTarget=i,this.isMuscleSegment=!0}return e.prototype.toJSON=function(){return{width:this.width,centerX:this.centerX,centerY:this.centerY,angle:this.angle,leftMuscle:this.leftMuscle.toJSON(),rightMuscle:this.rightMuscle.toJSON(),desiredAngleVsTarget:this.desiredAngleVsTarget,isMuscleSegment:!0}},e.prototype.getLength=function(){return.5*this.leftMuscle.l+.5*this.rightMuscle.l},e.prototype.updatePosition=function(e){var t=e.centerX+Math.cos(e.angle)*e.getLength()*.5,r=e.centerY+Math.sin(e.angle)*e.getLength()*.5,a=Math.atan2(this.leftMuscle.l-this.rightMuscle.l,this.width);this.angle=e.angle+a,this.centerX=t+Math.cos(this.angle)*this.getLength()*.5,this.centerY=r+Math.sin(this.angle)*this.getLength()*.5},e.prototype.moveMusclesForTarget=function(e,t){var a=r(Math.atan2(t-this.centerY,e-this.centerX)),n=r(a-this.angle),o=r(n-this.desiredAngleVsTarget);if(o<Math.PI){var i=Math.min(.15,o/Math.PI*.5);this.rightMuscle.l=this.rightMuscle.l*(1-i)+this.rightMuscle.minLength*i}else{i=Math.min(.15,.5*(2-o/Math.PI));this.leftMuscle.l=this.leftMuscle.l*(1-i)+this.leftMuscle.minLength*i}},e}();t.MuscleSegment=a}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var a=Array(e),n=0;for(t=0;t<r;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,n++)a[n]=o[i];return a};a=[r,t,r(203),r(4),r(5),r(16),r(38)],void 0===(n=function(e,t,r,a,n,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addProximityDetectionToShip=t.resetProximityDetection=void 0;var u=null;t.resetProximityDetection=function(){u=null},t.addProximityDetectionToShip=function(e,t,l){var c=t.game,d=t.SW,p=t.SH,f=(t.WW,t.WH,n.getQuadTreesObj());if(f.Asteroids){var h=[];h.push.apply(h,f.Enemies.queryVec(e.pos,d,p));var v=f.queryTreeVecIgnoreGuid(4,e.pos,.5*d,.5*p,e.guid);h.push.apply(h,v);for(var g=r.default(e,h,d,l,!1),y=r.default(e,f.SpaceSquid.queryVec(e.pos,d,p),d,l,!1),m=r.default(e,f.SpaceSpiders.queryVec(e.pos,d,p),d,l,!1),x=[],S=0;S<c.spaceSnake.length;S++){var _=c.spaceSnake[S];if(_.life>1){var T=_.segments;T.length>0&&x.push(T[T.length-1])}}var E=r.default(e,x,.8*d,l,!1);e.enemyDetection=A.posInAncient(e.pos)?[]:i(g.vectors,y.vectors,E.vectors,m.vectors);var M=i(f.Asteroids.queryVec(e.pos,d,p),f.RockFormations.queryVec(e.pos,300,300)),I=[],L=M.length;for(S=0;S<L;S++){var w=M[S];12!==w.type&&21!==w.type||I.push(w)}var b=r.default(e,I,.4*d,l,!0);if(e.asterodDetection=b.vectors,!u){u=[];o(o({},s.setImovableDefaults(null)),{vel:null,life:0,radius:0,guid:a.getGuid(),type:59})}e.anomalyDetection=r.default(e,u,d,l,!1).vectors;var P=[g,y,E,m],R=Number.MAX_VALUE,O=null;for(S=0;S<P.length;S++){var C=P[S];C.closestDistance<R&&(R=C.closestDistance,O=C.closestItem)}e.closestItem=O,e.closestItem||(e.closestItem=b.closestItem)}},t.default=function(e){for(var r=e.game,a=(e.SW,e.SH,e.WW,e.WH,r.player),n=0;n<a.length;n++){var o=a[n];t.addProximityDetectionToShip(o,e,!1)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(76),r(205),r(61),r(0),r(0)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showVideoFeed=void 0;var s=[],A=!1,u=!1,l=function(e,t){A=!0;var a=document.createElement("canvas");a.height=90,a.width=100;var o=a.getContext("2d"),i=new Image;i.crossOrigin="Anonymous",i.setAttribute("crossOrigin",""),i.onload=function(){o.drawImage(i,0,0),o.lineWidth=1,o.beginPath();for(var A=0;A<a.height;A+=4)o.moveTo(0,A),o.lineTo(a.width,A);o.stroke(),s[t]||(s[t]=[]),s[t].push(r.default.create("texture1",a,!0,n.default().global_gl)),e.length>0?l(e,t):u=!0},i.src=e.pop()},c=0,d=0,p=0;t.showVideoFeed=function(e,t,a,n){e.game;var A=e.gl,l=(e.SH,e.SX,e.SY,e.stepMS);e.step,e.SW;(c+=l)>p&&(c=0,p=20+Math.random()*Math.random()*1088,d=Math.floor(s[n].length*Math.random())),Math.random();if(u){var f=s[n][d];f&&r.default.addGL(A,o.default(Math.random()>.26?i.GLctx.TextureDist:i.GLctx.Texture,A),f,t+0,a+0,e,1.4,1.4)}},t.default=function(e){e.game,e.gl,e.SH,e.SX,e.SY,e.stepMS,e.step,e.SW;if(!A)for(var t=0;t<a.faces.length;t++)l(a.faces[t],t);return"videofeed"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(214),r(59),r(14),r(13)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanList=void 0;t.cleanList=function(e,t,r,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);var i=[],s=e.length,A=!!r;t.game.IS_PROCEDURAL;if(o)for(var u=0;u<s;u++)(l=e[u]).remove||l.life<1&&l?(n&&a.pool_put(l.type,l),A&&r(l,t)):i.push(l);else for(u=0;u<s;u++){var l;(l=e[u]).ownedByStructureType&&l.ownedByStructureGuid?i.push(l):l.remove||l.life<1||!l.inTree?(n&&a.pool_put(l.type,l),A&&r(l,t)):i.push(l)}return i};var i=0;t.default=function(e){var a=e.game;e.WW,e.WH;i=performance.now();for(var s=0;s<a.spaceSnake.length;s++){var A=a.spaceSnake[s];A.segments=t.cleanList(A.segments,e,r.default)}a.spaceSnake=a.spaceSnake.filter(function(e){return!e.remove}),a.asteroids=t.cleanList(a.asteroids,e,r.default),a.rockFormations=t.cleanList(a.rockFormations,e,r.default);for(s=0;s<a.spacePorts.length;s++){var u=a.spacePorts[s];if(u.cannons=t.cleanList(u.cannons,e,r.default),u.centerNoneCannon.remove){if(o.__LifeFixedValueSet(u,0),u.cannons.length>0){if(Math.random()>.75){var l=u.cannons.pop();l.remove=!0,r.default(l,e)}}else u.cannons=[],u.remove=!0,a.spacePorts.splice(s,1),n.addForceExplosion(a,u.pos.x,u.pos.y,250,4,null),a.IS_PROCEDURAL&&a.proceduralRemovalData.push(u);break}}a.bullets=t.cleanList(a.bullets,e,null,!0),a.rockets=t.cleanList(a.rockets,e,r.default),a.drones=t.cleanList(a.drones,e,r.default),a.player=t.cleanList(a.player,e,r.default,!1,!0),a.npcs=t.cleanList(a.npcs,e,r.default),a.spaceSquids=t.cleanList(a.spaceSquids,e,r.default),a.spaceSpiders=t.cleanList(a.spaceSpiders,e,r.default),a.enemies=t.cleanList(a.enemies,e,r.default),a.charges=t.cleanList(a.charges,e,r.default),a.proximityMines=t.cleanList(a.proximityMines,e,r.default),a.spaceMines=t.cleanList(a.spaceMines,e,r.default),a.spaceTurrets=t.cleanList(a.spaceTurrets,e,r.default),a.destroyers=t.cleanList(a.destroyers,e,r.default),a.flames=t.cleanList(a.flames,e),i=performance.now()-i}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(23),r(1),r(6),r(4),r(24),r(5),r(4),r(21),r(30),r(18),r(142),r(120),r(32)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFragmentsFromDestroyer=void 0;var v=[.2,.6],g=[];t.default=function(e){for(var t=e.game,f=e.step,y=(e.SX,e.SY,t.destroyers),m=o(o(o([],t.spaceSquids),t.spaceSpiders),t.enemies),x=m.length>0?m[0]:null,S=x,_=0;_<y.length;_++){var T=y[_],E=A.getQuadTreesObj().query([3],T);if(1===E.length)if(u.distanceBetweenVectors(E[0].pos,T.pos)<.85*T.radius+E[0].radius+(void 0===T.repairingCloseAngle?0:500))if(T.repairing){if(void 0===T.repairingCloseAngle)T.repairingCloseAngle=n.wrapRadianAngle(T.angle+.75*Math.PI);else if(T.life>200){var M=u.angleDifference(T.angle,T.repairingCloseAngle);Math.abs(M)>.1&&(T.angle+=.007*(M>0?-1:1),T.angle=n.wrapRadianAngle(T.angle))}T.thrust.mult(.9999)}else{T.repairingCloseAngle=void 0;var I=T.thrust.getLength();0===I&&T.thrust.setLength(.05),I<.5&&T.thrust.mult(1.01)}else T.thrust.setLength(.2);else T.thrust.setLength(.5);if(x=A.getQuadTreesObj().queryTreesVec([9,10,1,35],T.pos,1200,1200,!0)[0]||x,T.life<600||T.repairing){var L=A.getQuadTreesObj().queryTreesVec([3],T.pos,3500,3500,!0),w=[];L.length>1&&(w=A.getQuadTreesObj().queryTreesVec([3],T.pos,800,800,!0));var b=w[0]||L[0]||t.spacePorts[0];b&&(T.repairing=!0,T.life>.9*T.oLife&&(T.repairing=!1)),S=b||x}var P=0,R=1e4,O=T.thrust.getLength(),C=o([],t.rockFormationSystemRadius);3!==(null==x?void 0:x.type)&&C.push.apply(C,t.spacePorts);var G=c.default(T,T.angle,C);if(T.thrust.add(G.avoidance),S){var D=Math.atan2(S.pos.y-T.pos.y,S.pos.x-T.pos.x);if(g.push(.001*n.angleDelta(T.angle,D)*f),g.length>200){g.shift();for(var N=0,B=0;B<200;B++)N+=g[B];P=.015*N}R=u.distanceBetweenVectors(S.pos,T.pos);3===(null==S?void 0:S.type)&&R<4500?T.thrust.getLength()>.01&&T.thrust.mult(Math.max(R/4500,.01)):O<1&&(T.thrust.setLength(1.01*O),O<.01&&T.thrust.setLength(.01))}T.thrust.setAngle(T.angle),T.radarAngle+=P,T.radarAngle+=.04*f,T.radarAngle=n.normalizeRadianAngle(T.radarAngle),T.angle+=P+100*T.angleVel,T.angle=n.wrapRadianAngle(T.angle);for(var F=0,V=0;V<2;V++)for(var k=0;k<3;k++){var X=i.midpoint(T.pos,T.comp[0].vertex[k],v[V]),H=T.cannons[F];H.pos.setFromVec(X),new a.Vector(100,0).setAngle(H.min),new a.Vector(100,0).setAngle(H.max);var U=x?x.pos:{x:5e3,y:5e3},W=x?Math.atan2(U.y-H.pos.y,U.x-H.pos.x):T.angle,Y=T.angle+0,q=n.angleDelta(H.angle,W),z=H.baseAngle+Y+W;(z>H.max&&z<H.min||z<H.max&&z>H.min)&&!0;var j=!1;if(q+H.baseAngle+Y>H.baseMax+Y?(j=!0,H.baseAngle-=.05):q+H.baseAngle+Y<H.baseMin+Y&&(j=!0,H.baseAngle+=.05),j||(H.baseAngle+=.12*n.angleDelta(H.angle,W)*f-P),H.baseAngle+Y>H.baseMax+Y?H.baseAngle=H.baseMax-.001:H.baseAngle+Y<H.baseMin+Y&&(H.baseAngle=H.baseMin+.001),H.angle=H.baseAngle+T.angle,H.min=H.baseMin+T.angle,H.max=H.baseMax+T.angle,x&&!H.fired&&3!==(null==x?void 0:x.type)){if(!j&&i.distanceBetweenXYXY(T.pos.x,T.pos.y,U.x,U.y)<1500){var K=h.createBullet(28,T);K.pos.x=H.pos.x,K.pos.y=H.pos.y,K.vel.setLength(p.DESTROYER_BULLET_VEL_LEN),K.vel.setAngle(H.angle),K.life=400,s.createDust(H.pos,3,2,e,.1*K.vel.x,.1*K.vel.y),e.game.bullets.push(K),H.fired=!0}}else Math.random()>.8&&(H.fired=!1);F++}T.vel.add(T.thrust),r.default(t,T,!0),l.wormhole(T,e),T.vel.getLength()>4&&T.vel.setLength(4),d.ShipPositionUpdater(T,f),3===(null==S?void 0:S.type)?(T.vel.x*=.9,T.vel.y*=.9):(T.vel.x*=.97,T.vel.y*=.97)}return"Destroyer"};t.createFragmentsFromDestroyer=function(e,t){var r=t.comp[0].vertex,a=0===t.type?6:49===t.type?2:3;f.createFragmentsFromTriangle(e,r,a,t)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DESTROYER_BULLET_DAMAGE=t.DESTROYER_BULLET_VEL_LEN=t.SPACE_PORT_BULLET_DAMAGE=t.SPACE_PORT_BULLET_VEL_LEN=void 0,t.SPACE_PORT_BULLET_VEL_LEN=30,t.SPACE_PORT_BULLET_DAMAGE={type:1,valuePercent:0,value:6,stunMS:1,pushPercentM:.01,slowPercentM:.01,ownerGuid:-1},t.DESTROYER_BULLET_VEL_LEN=22,t.DESTROYER_BULLET_DAMAGE={type:1,valuePercent:0,value:3,stunMS:1,pushPercentM:.001,slowPercentM:.01,ownerGuid:-1}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(7),r(9),r(1),r(6),r(11),r(37),r(41),r(34),r(36),r(10),r(5)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectorSetup=t.resetDirector=void 0;var f=10,h=30,v=9,g=11,y=40,m=1e4,x=m,S=0,_=new r.Rectangle(0,0,0,0),T=0;t.resetDirector=function(){x=x,T=m};t.DirectorSetup=function(e){h=e.enemies,v=e.spacesnakes,g=e.spacesquids,f=e.spaceSpiders,y=e.npcs,m=e.campingTimeout,S=e.destroyers};var E=function(e,t,a){for(var n=a.SX,o=a.SY,i=a.SW,s=a.SH,A=new r.Rectangle(n-800,o-800,i+1600,s+1600),u=3e3,l=null,c=p.getQuadTreesObj();u<.5*a.WW;){for(var d=c.queryTreesVec([e],t,u,u),f=0;f<d.length;f++){var h=d[f];if(!A.intersectsPoint(h.pos)){l=h;break}}if(l)break;u+=3e3}return l};t.default=function(e){var t,r,p,M,I,L=e.SX,w=e.SY,b=e.SW,P=e.SH,R=e.WW,O=e.WH,C=e.game,G=e.stepMS;if(C.isPaused)return!1;var D=a.default(e);if(D){D.inSafeZone?x>100&&(x-=4):x=m,_.intersectsPoint(D.pos)?T+=G:(_.x=D.pos.x-.5*b,_.y=D.pos.y-.5*P,_.width=b,_.height=P,T=0);var N=Math.random()>.5?1.5*b:-1.5*b;if(T>x){var B;if(D.inSafeZone||Math.random()>.5)if(Math.random()>.8){if(C.spaceSnake.length>0){var F=Math.floor(Math.random()*C.spaceSnake.length),V=C.spaceSnake[F];V.restPos.setFromVec(D.pos),V.prioritzeRestpos=!0}}else if(Math.random()>.66){if(C.spaceSquids.length>0)(B=E(9,D.pos,e))&&(B.restPos.setFromVec(D.pos),B.prioritzeRestpos=!0)}else if(C.spaceSpiders.length>0)(B=E(10,D.pos,e))&&(B.restPos.setFromVec(D.pos),B.prioritzeRestpos=!0);if(C.enemies.length>0){var k=new n.Vector(N,N);k.add(D.pos);var X=C.enemies[Math.floor(Math.random()*C.enemies.length)];X.pos.setFromVec(k);var H=Math.atan2(D.pos.y-X.pos.y,D.pos.x-X.pos.x);X.angle=i.normalizeRadianAngle(H)}T=0}else for(var U=o(o(o([],C.spaceSquids),C.spaceSnake),C.spaceSpiders),W=0;W<U.length;W++){var Y=U[W];W%2==0?Y.restPos.set(0,W*P):Y.restPos.set(R,W*P)}if(C.enemies.length<h){0;var q=s.createEnemies(e,5);A.default(q,L+N,w+N,300,300),(t=C.enemies).push.apply(t,q)}if(C.spaceSnake.length<v&&(r=C.spaceSnake).push.apply(r,u.default(e,1,L+N,w+2*N)),C.spaceSquids.length<g&&(p=C.spaceSquids).push.apply(p,l.default(e,1,L+N,w+N)),C.spaceSpiders.length<f&&(M=C.spaceSpiders).push.apply(M,c.default(e,1,L+N,w+N)),C.npcs.length<y&&((I=C.npcs).push.apply(I,s.createNPCs(e,1,{},-1)),d.LOG_GL("npc created @ "+(0|C.npcs[C.npcs.length-1].pos.x)+", "+(0|C.npcs[C.npcs.length-1].pos.y))),C.destroyers.length<S){var z=s.createDestroyer(e);C.anomalyPairs.length>0?z.pos.setFromVec(C.anomalyPairs[0].out.pos):z.pos.set(R-5,O-5),C.destroyers.push(z),d.LOG_GL("destroyer created @ "+(0|z.pos.x)+", "+(0|z.pos.y))}}return!1}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(2),r(0),r(0),r(6),r(4),r(9),r(2),r(56),r(22),r(2),r(2),r(38)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResetRadar=void 0;var h=new r.Vector(0,0),v=new r.Vector(0,0),g=new r.Vector(0,0),y=0,m=[],x=[],S=[],_=.06*Math.PI,T={},E=(new r.Vector(0,0),function(e,t,r,a,n,o,i,A,u,l){for(var c=e.length,d=[],p=0;p<c;p++){var f=e[p],h=Math.floor(f.pos.x/r*n+i),v=Math.floor(f.pos.y/a*o+i);if(!T[f.guid]&&s.fine(3,t,{x:h,y:v})){var g=h+A,y=v+u,m=0===f.type,x={pos:{x:g,y:y},life:200,guid:f.guid,type:f.type,radius:f.radius,angle:m?f.angle:0};d.push(x),T[f.guid]=x}}return d}),M=new r.Vector(0,0),I=new r.Vector(0,0),L=new r.Vector(0,0),w=new r.Vector(0,0),b=0;t.ResetRadar=function(){b=0};var P=!0,R=0;t.default=function(e){e.SW;var t=e.WW,r=e.WH,s=(e.SH,e.SX),O=e.SY,C=e.game,G=e.gl,D=C.daylight.is_night,N=e.step;m=[],x=[];var B=A.default(e)||C.player[0];if(B&&!(C.currentLevel<=13)&&C.menuSettings.minimap&&!C.levelEditor){var F=f.posInAncient(B.pos);F?R<Math.PI&&(R+=.025):R>0&&(R-=.025);var V=-1*(B.angle+.5*Math.PI)+R;C.isPaused&&(N=0);var k=F&&Math.random()>.95||!C.IS_PROCEDURAL&&l.default(B,t,r)&&b>0&&!P;k&&Math.random()>.7&&(b=3*Math.random());var X=k||B.damageTaken||0!==B.forceX||0!==B.forceY?(Math.random()-.5)*(k?7:4):0;if(P){if(b-=.01,P!=(B.abilities.active.cloak>0||C.skillTree.active||0!==B.forceX||0!==B.forceY)&&(S=[],b=0,T={}),b<0)return S=[],T={},void(b=0)}else(b+=.01)>1&&(b=1);P=B.abilities.active.cloak>0||C.skillTree.active||0!==B.forceX||0!==B.forceY;var H=i.map(b,.85,1,0,1);I.set(110,110);var U=e.IS_MULTIPLAYER?500:800,W=e.IS_MULTIPLAYER?10:30,Y=U,q=U,z=(Math.max(110,110)-10)*(P?H:1);h.set(z,0),v.set(z,0),y+=P||0!==X?0:.025*N*b,k&&Math.random()>.97&&(y+=Math.PI*Math.random()*1.5),i.rotateVector(h,y,h),i.rotateVector(v,y-_,v),y>2*Math.PI&&(y-=2*Math.PI);for(var j=Math.floor(B.pos.x/t*Y+10),K=Math.floor(B.pos.y/r*q+10),Z=[{x:j,y:K},{x:h.x+j,y:h.y+K},{x:v.x+j,y:v.y+K}],Q=C.enemies,J=C.spaceSquids,$=C.spacePorts,ee=C.spaceSnake,te=C.asteroids,re=C.rockFormations,ae=C.spaceBats,ne=C.spaceSpiders,oe=C.destroyers,ie=[],se=0;se<ee.length;se++)ie.push.apply(ie,ee[se].segments);P||S.push.apply(S,function(e,t,r,a,n,o,i,s,A,u){for(var l=e.length,c=[],d=0;d<l;d++){var p=e[d];c.push.apply(c,E(p,t,r,a,n,o,i,s,A))}return c}(f.posInAncient(B.pos)?[C.ancientBlocks]:[C.ancientBlocks,Q,J,$,ie,$,te,re,ae,ne,oe],Z,t,r,Y,q,10,110-j,110-K));var Ae=S.length;for(se=0;se<Ae;se++){if((ge=S[se]).life-=N,P){var ue=.01*N;ge.pos.y>110?ge.pos.y*=1-ue:ge.pos.y<110?ge.pos.y*=1+ue:(ge.pos.y=110,ge.pos.x>115?ge.pos.x*=1-.3*ue:ge.pos.x<105?ge.pos.x*=1+.3*ue:ge.pos.x=110)}M.set(ge.pos.x-I.x,ge.pos.y-I.y),i.rotateVector(M,V,M);var le=I.x+X+M.x,ce=I.y+X+M.y;if(ge.life<0)ge.remove=!0,delete T[ge.guid];else{var de=.005*ge.life,pe=2,fe=!1;switch(ge.type){case 35:pe=3;break;case 1:case 44:pe=5;break;case 9:pe=6;break;case 3:fe=!0,u.crossHair(le,ce,m,12,1);break;case 4:if(ge.radius<W)continue;(pe=Math.max(.03*ge.radius,1))>4&&(fe=!0,a.blockCirclePoly(7,pe,le,ce,0,m,0,0,0,2));break;case 21:pe=Math.max(.062*ge.radius,2),fe=!0,u.createBlockCirclePolySingleWall(le,ce,m,8,0,pe,!0);break;case 11:(pe=Math.max(.03*ge.radius,1))>8&&(fe=!0,u.createBlockCirclePolySingleWall(le,ce,m,8,0,pe,!0));break;case 80:pe=2;break;case 0:p.line2PolyTriangleRotateableFilled(le,ce,7,m,ge.angle-.5*Math.PI-B.angle),fe=!0}fe||a.rectangleRotated45Poly(le,ce,pe,m),a.addToColorMap(x,m,(D?.7:.1)*de*b,(D?.1:.7)*de*b,.1*de*b,1)}}if(a.addToColorMap(x,m,b>1?.5*b:0,.2*b,b>1.1?.5*b:0,1),P){u.line2Poly(120-110*H,110,110+90*H,110,m,2);var he=z*((H<.5?1:-1)>0?b:b-(b-.5))*.1;a.blockCirclePoly(40,he,110,110,0,m,-1,0,0,he),a.addToColorMap(x,m,D?b:0,D?0:b,0,1)}var ve=[];for(se=0;se<Ae;se++){var ge;(ge=S[se]).remove||ve.push(ge)}S=ve,g.set(-z,0),i.rotateVector(g,y+V,g);!function(e,t,r,n,o,s,A,u,l){L.set(r,n),i.rotateVector(L,Math.PI+.1*Math.PI,L);for(var c=L.getAngle(),d=0;d<24;d++)w.setFromVec(L),w.setAngle(c-.6*Math.PI*(d/24)),o.push(e,t,e+L.x,t+L.y,e+w.x,t+w.y),a.addToColorMap(A,o,l?(.4-.05*d)*u:0,l?0:(.4-.05*d)*u,0,1);w.setAngle(L.getAngle()+.1*Math.PI),s.push(e,t,e+L.x,t+L.y,e+w.x,t+w.y)}(110,110,g.x,g.y,m,[],x,b,D),a.addToColorMap(x,m,1,1,1,1),d.drawColorMapSingle(x,m,G);var ye=k?10*(Math.random()-.5):0,me=k?10*(Math.random()-.5):0;return c.Glow({x:110+s+ye,y:110+O+me},100,m,e,D?.3*b:0,D?0:.3*b,0,1),x=[],function(e,t,r,a,n){for(var o=r.length,i=0;i<o;i++){var s=r[i];u.createBlockCirclePolySingleWall(e,t,n,Math.round(68*s),0,a*s)}}(110,110,[1,.75,.5,.25],z+2,m=[]),a.addToColorMap(x,m,D?.1*b:0,D?0:.1*b,0,1),a.drawColorMap(x,m,n.default(o.GLctx.Vertices,G),G,G.LINES),"Radar"}b=0}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(10),r(218),r(220),r(48),r(7),r(147),r(221),r(222),r(17),r(2),r(60),r(69),r(223),r(84),r(146)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f,h,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetProceduralWorld=t.getRectangles=void 0;var g=[];t.getRectangles=function(){return g};var y=new n.Hash,m=new n.Hash,x=new h.QuadTreeInt32(i.rect_pool_pop(0,0,0,0),5,0,20,!1);t.resetProceduralWorld=function(){y.clear(),m.clear(),x.reset(),S=0,_=0,T=!0};var S=0,_=0,T=!0,E=0,M=0,I=function(e,t,n,i){var A=s.getSeedFromGenResXY(t,n),c=y.get(A);if(c)return u.default(e,c),y.remove(A),void(i[A]=!0);if(!i[A]&&!m.get(A)){var d=o.mulberry32(A),p=d();if(0,p,E=Math.min(p,E),M=Math.max(p,M),p>.6){var f=a.default(A,e,d,t,n,x,m);f&&5===f&&r.LOG_GL("creating : "+l.TypesToString(f)+" "+t+" "+n+" S:"+A),i[A]=!0}}},L=function(e,t,r,a,n,o,i){for(var s=e;s<t;s+=i)for(var A=r;A<a;A+=i)I(n,s,A,o)},w=i.rect_pool_pop(0,0,0,0),b=i.rect_pool_pop(0,0,0,0);t.default=function(e){if(e.game.IS_PROCEDURAL){var t=e.game,a=e.SX,n=e.SY,o=e.SW,i=e.SH,u=t.procedural.map,c=u.GEN_RES,d=u.GEN_SIZE_PIXELS;0,0,E=2e7,M=0,g=[];var h=performance.now(),I=Math.floor(o/c)*c+c,P=Math.floor(i/c)*c+c;w.update(-d+a,-d+n,I+2*d,P+2*d),r.LOG_GL_FIXED_FORCED(e.game.procedural.treeBounds.x,"X"),r.LOG_GL_FIXED_FORCED(e.game.procedural.treeBounds.y,"Y"),r.LOG_GL_FIXED_FORCED(e.game.procedural.treeBounds.width,"width"),r.LOG_GL_FIXED_FORCED(e.game.procedural.treeBounds.height,"height"),e.game.proceduralBounds=w,b.update(2*-d+a,2*-d+n,I+4*d,P+4*d),e.game.procedural.boundsSS=b;var R=f.createExistingSeedHash(e);v.updateTree(e,x);var O=x.intersectTree(x);O.length>0&&r.LOG_GL_FIXED(O.length,"Procedual tree err");for(var C=0;C<t.proceduralRemovalData.length;C++){if(4===(D=t.proceduralRemovalData[C]).type&&(!D.procedurallyCreated||A.checkDiffed(D))){var G=s.getSeedFromCoord(D.pos.x,D.pos.y,c);if(D.procedurallyCreated&&m.add(D.seedKey,!0),0,!D.opos)throw console.log(D),console.log(l.TypesToString(D.type)),"missing opos";y.add(G,{type:D.type,x:0|D.pos.x,y:0|D.pos.y,ox:0|D.opos.x,oy:0|D.opos.y,life:0|D.life,oLife:0|D.oLife,radius:D.radius,guid:D.guid,oSeedK:G})}}t.proceduralRemovalData=[];for(C=0;C<t.proceduralDestroyedData.length;C++){var D;6!==(D=t.proceduralDestroyedData[C]).shape&&3!==D.shape&&D.seedKey&&D.procedurallyCreated&&(m.add(D.seedKey,!0),D.type)}t.proceduralDestroyedData=[];var N=Math.floor(a/c)*c-d,B=Math.floor(n/c)*c-d,F=I+2*d,V=P+2*d,k=N+F,X=B+V;if(u.SX=N,u.SY=B,u.WIDTH=F,u.HEIGHT=V,u.SX_END=k,u.SY_END=X,u.MOVED_X=N-S,u.MOVED_Y=B-_,u.MOVED_XY_ABS_DIST_CELLS=Math.abs(u.MOVED_X)+Math.abs(u.MOVED_Y),u.MOVED_X_RES=u.MOVED_X/u.GEN_RES,u.MOVED_Y_RES=u.MOVED_Y/u.GEN_RES,u.FULL_REFRESH=T||Math.abs(N-S)>d||Math.abs(B-_)>d,u.WIDTH_RES=F/c,u.HEIGHT_RES=V/c,u.FULL_REFRESH){performance.now();L(N,k,B,X,e,R,c)}else if(N!==S||B!==_){var H=0,U=0,W=0,Y=0;N<S?(H=N,U=S,W=Math.min(B,_),Y=Math.max(B,_)+V,L(H,U,W,Y,e,R,c)):N>S&&(H=S+F,U=N+F,W=Math.min(B,_),Y=Math.max(B,_)+V,L(H,U,W,Y,e,R,c)),B<_?(W=B,Y=_,H=Math.min(N,S),U=Math.max(N,S)+F,L(H,U,W,Y,e,R,c)):B>_&&(W=_+V,Y=B+V,H=Math.min(N,S),U=Math.max(N,S)+F,L(H,U,W,Y,e,R,c))}performance.now();return window.metaHash=y,S=N,_=B,T=!1,y.housekeeping(1e4,1e3),m.housekeeping(2e4,1e3),window.parasiteTree=p.getParasiteTree(),"procedural world"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(14),r(83)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateTree=t.anomalyPairAsTreeItem=t.ancientAsTreeItem=t.minefieldAsTreeItem=t.anomalyAsTreeItem=t.rockformationSystemAsTreeItem=t.spaceFogAsTreeItem=t.beltAsTreeItem=void 0;t.beltAsTreeItem=function(e){return{pos:{x:e.x,y:e.y},vel:{x:0,y:0},radius:e.radius,sleepingAABB:!0,type:e.type,collType:-1,seedKey:e.seedkey}};t.spaceFogAsTreeItem=function(e){return{pos:{x:e.x,y:e.y},vel:{x:0,y:0},radius:e.radius,seedKey:e.seedKey,sleepingAABB:!1,type:e.type,collType:-1}};t.rockformationSystemAsTreeItem=function(e){return{pos:e.pos,vel:{x:0,y:0},radius:e.radius,seedKey:e.seedKey,sleepingAABB:!1,type:e.type,collType:-1}};t.anomalyAsTreeItem=function(e,t){return{pos:e.pos,vel:{x:0,y:0},radius:e.effect*t.game.procedural.map.GEN_RES,seedKey:e.seedKey,sleepingAABB:!1,type:e.type,collType:-1}};t.minefieldAsTreeItem=function(e){return{pos:{x:e.pos.x,y:e.pos.y},vel:{x:0,y:0},radius:e.radius+200,seedKey:e.seedKey,sleepingAABB:!1,type:e.type,collType:-1}};t.ancientAsTreeItem=function(e){return{pos:{x:e.pos.x,y:e.pos.y},vel:{x:0,y:0},radius:e.radius+200,seedKey:e.seedKey,sleepingAABB:!1,type:e.type,collType:-1}};t.anomalyPairAsTreeItem=function(e,t){return[{pos:e.in.pos,vel:{x:0,y:0},radius:e.in.radius,seedKey:e.in.seedKey,sleepingAABB:!1,type:e.in.type,collType:-1},{pos:e.out.pos,vel:{x:0,y:0},radius:e.out.radius,seedKey:e.out.seedKey,sleepingAABB:!1,type:e.out.type,collType:-1}]};t.updateTree=function(e,n){n.reset(),n.setup(e.game.procedural.boundsSS,5,-1,8,!1);var o=e.game;o.minefields.map(function(e){n.insert(t.minefieldAsTreeItem(e),0)}),o.asteroidBelts.map(function(e){n.insert(t.beltAsTreeItem(e),0)}),o.spacePorts.map(function(e){n.insert(e,0)}),o.spaceFog.map(function(e){n.insert(t.spaceFogAsTreeItem(e),0)}),o.rockFormationSystemRadius.map(function(e){n.insert(t.rockformationSystemAsTreeItem(e),0)}),o.anomlies.map(function(r){n.insert(t.anomalyAsTreeItem(r,e),0)}),o.ancients.map(function(e){n.insert(t.ancientAsTreeItem(e),0)}),o.anomalyPairs.map(function(o){var i=t.anomalyPairAsTreeItem(o,e);n.insert(i[0],0);var s=i[1];n.insert(s,0)&&0===r.getForce2Tree().queryVec(s.pos,2,2).length&&a.createForceFromAnomaly(e,o.out)})}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSeedFromGenResXY=t.getSeedFromCoord=void 0;t.getSeedFromCoord=function(e,t,r){var a=Math.floor(e/r)*r,n=Math.floor(t/r)*r;return a<<16|(n>0?Math.abs(n)+5e4:Math.abs(n))};t.getSeedFromGenResXY=function(e,t){return e<<16|(t>0?Math.abs(t)+5e4:Math.abs(t))}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(1),r(12),r(6),r(2),r(7),r(5)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderSquids=void 0;var c=new o.Vector(0,0),d=new o.Vector(0,0),p=new o.Vector(0,0),f=function(e,t,r,a){var n=e.pos.x,o=e.pos.y,i=e.angle+Math.PI;c.x=2.3*e.radius,c.y=0,s.rotateVector(c,i,c),d.x=.7*e.radius,d.y=0,s.rotateVector(d,i,d),p.x=1.05*e.radius,p.y=0,s.rotateVector(p,i+.5*Math.PI,p),t.push(c.x+n-r,c.y+o-a,d.x+n-r,d.y+o-a,p.x+n-r,p.y+o-a),p.x=1.05*e.radius,p.y=0,s.rotateVector(p,i+-.5*Math.PI,p),t.push(c.x+n-r,c.y+o-a,d.x+n-r,d.y+o-a,p.x+n-r,p.y+o-a)};t.renderSquids=function(e,t,a,n,u,l,h){new o.Vector(0,0);for(var v=0;v<u.length;v++){var g=u[v];if(i.onStage(e,g,1e3)){var y=g.pos.x,m=g.pos.y;r.blockCirclePoly(14,g.radius,y,m,s.normalizeRadianAngle(g.angle-Math.PI),t,0,l,h,.6*g.radius,!1,0,4,9,14),f(g,t,l,h),c.x=.7*g.radius,c.y=0,s.rotateVector(c,g.angle+.93*Math.PI,c),r.setTriangle(g.pos.x+c.x-l,g.pos.y+c.y-h,a,5),c.x=.7*g.radius,c.y=0,s.rotateVector(c,g.angle+-.93*Math.PI,c),r.setTriangle(g.pos.x+c.x-l,g.pos.y+c.y-h,a,5);for(var x=g.tentacles,S=0;S<x.length;S++)for(var _=x[S],T=0;T<_.arm.length;T++){var E=_.arm[T],M=.5*E.leftMuscle.l+.5*E.rightMuscle.l;c.x=-.5*M,c.y=0,s.rotateVector(c,E.angle,c),d.x=.8*M,d.y=0,s.rotateVector(d,E.angle,d),A.line2Poly(c.x+E.centerX+y-l,c.y+E.centerY+m-h,d.x+E.centerX+y-l,d.y+E.centerY+m-h,t,E.width),c.x=-.4*M,c.y=0,s.rotateVector(c,E.angle,c),d.x=.7*M,d.y=0,s.rotateVector(d,E.angle,d),p.x=.8*E.width,p.y=0,s.rotateVector(p,E.angle+.5*Math.PI,p),A.line2Poly(c.x+E.centerX+y+p.x-l,c.y+E.centerY+m+p.y-h,d.x+E.centerX+y+p.x-l,d.y+E.centerY+m+p.y-h,n,.1*E.width),T===_.glowIndex&&A.line2Poly(c.x+E.centerX+y+p.x-l,c.y+E.centerY+m+p.y-h,d.x+E.centerX+y+p.x-l,d.y+E.centerY+m+p.y-h,n,.1*E.width)}}}};var h=[],v=[],g=[];t.default=function(e){var r=e.SW,o=e.SH,i=(e.frame,e.SX),s=e.SY,c=(e.WW,e.WH,e.game,e.gl);h=[],v=[],g=[];var d=l.getQuadTreesObj();if(d.All){var p=Math.max(r>o?r:o,2e3),f=u.rect_pool_pop(i-p,s-p,2*p,2*p),y=d.queryTreesRect([9],f);if(u.rect_pool_put(f),t.renderSquids(e,h,v,g,y,i,s),h.length>0){a.default(n.GLctx.Vertices,c),A.drawColor(g,c,.5,.1,.1,1);c.blendFunc(c.DST_COLOR,c.ZERO),A.drawColor(h,c,0,0,0,1),c.blendFunc(c.ONE,c.ONE),A.drawColor(v,c,.5,.1,.1,1)}return"spacesquid"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(5),r(96)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MineralsExhangeRate=t.PlatinumExhangeRate=t.IronExhangeRate=void 0;t.IronExhangeRate=function(e,t){var n=e.abilities.hash[11];if(n){var o=n.data;if(o.iron.value>0){var i=r.getQuadTreesObj().queryTreesVec([3],e.pos,e.radius,e.radius)[0];if(i){var s=parseFloat(Math.min(Math.max(.06,100/(.1*(i.resources.iron+o.iron.value+1))),.42).toFixed(2));return t&&o.iron.value>0&&(a.updateShipCredits(e,Math.round(o.iron.value*s)),i.resources.iron+=o.iron.value,o.iron.value=0),{success:!0,rate:s,resource:Math.round(o.iron.value),credits:Math.round(o.iron.value*s)}}}}return{success:!1}};t.PlatinumExhangeRate=function(e,t){var n=e.abilities.hash[11];if(n){var o=n.data;if(o.platinum.value>0){var i=r.getQuadTreesObj().queryTreesVec([3],e.pos,e.radius,e.radius)[0];if(i){var s=parseFloat(Math.min(Math.max(3.32,100/(.1*(i.resources.platinum+o.platinum.value+1))),18.42).toFixed(2));return t&&o.platinum.value>0&&(a.updateShipCredits(e,Math.round(o.platinum.value*s)),i.resources.platinum+=o.platinum.value,o.platinum.value=0),{success:!0,rate:s,resource:Math.round(o.platinum.value),credits:Math.round(o.platinum.value*s)}}}}return{success:!1}};t.MineralsExhangeRate=function(e,t){var n=e.abilities.hash[11];if(n){var o=n.data;if(o.minerals.value>0){var i=r.getQuadTreesObj().queryTreesVec([3],e.pos,e.radius,e.radius)[0];if(i){var s=parseFloat(Math.min(Math.max(9.2,100/(.1*(i.resources.minerals+o.minerals.value+1))),23.1).toFixed(2));return t&&o.minerals.value>0&&(a.updateShipCredits(e,Math.round(o.minerals.value*s)),i.resources.minerals+=o.minerals.value,o.minerals.value=0),{success:!0,rate:s,resource:Math.round(o.minerals.value),credits:Math.round(o.minerals.value*s)}}}}return{success:!1}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(3),r(5),r(99),r(9),r(126),r(8)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawBackplatePolys=void 0;for(var l=[],c=[],d=[],p=0;p<5;p++)c[p]=0,d[p]=0;var f=0,h=0,v=0,g=0,y=void 0,m=0,x=[],S=[];t.drawBackplatePolys=function(e,t){var n=e.gl;a.default(a.GLctx.Vertices,n),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),r.drawColor(t,n,0,0,0,.5),n.blendFunc(n.ONE,n.ONE),t.length=0};var _=[];t.default=function(e){var p,T,E=e.gl,M=e.SW,I=e.SH,L=e.game,w=e.step,b=e.stepMS;if(L.currentLevel<=13||L.skillTree.active)return"transition SP";var P=s.default(e);if(!P||(null===(p=P.abilities.hash[1])||void 0===p?void 0:p.activated))return f=0,h=0,m=0,"transition SP";l.length=0,_.length=0,x.length=0,S.length=0;var R=L.daylight.is_night?"r":"g",O=o.getQuadTreesObj().queryTreesRect([3],L.screen.rect).find(function(e){return e.weaponsActive});if(f+=w*v,m>4e3?h+=w*g:O||(h+=w*g),O?(v=.02,h<0?h=0:h>1&&(h=1),(m+=b)>4e3?(v=-.03,g=.02):f<0?f=0:f>1&&(f=1)):(m=0,v=-.03,g=-.03,f>1?f=1:f<0&&(f=0),h>1?h=1:h<0&&(h=0)),f>0){for(var C=Math.min(Math.round(3*f*1.5),3),G=0;G<C;G++){var D=c[G];G===C-1?(f<.7&&(D+=w*v*10),D>1?D=1:D<0&&(D=0)):v>0&&(D=1),c[G]=D,f>.7&&(d[G]+=w*v*(.1*G+1)*8,d[G]>1?d[G]=1:d[G]<0&&(d[G]=0)),A.drawBulletIcon(.5*M+50-40*d[G],.2*I+34*G+3,l,.5*(2.6-D),!1,0)}if(f<1&&f>0){var N=1-f,B=.5*M*f,F=M-2*B,V=.2*I*f,k=I*N;for(G=0;G<23;G++){var X=(100+120*Math.random())*N;i.addDistBox(B+F*Math.random()-.5*X,V+Math.random()*k,X,(7+40*Math.random())*N,B+F*Math.random()-.5*X,V+Math.random()*k,100*N,100,Math.random()>.5?50+30*Math.random():-30*Math.random()-50,0,0)}}if(f>.2){var H=u.default.create("SPACE",f<.7?n.TEXT_SIZE_HUGE:n.TEXT_SIZE_LARGE,R,!1),U=u.default.create("PORT",f<.7?n.TEXT_SIZE_HUGE:n.TEXT_SIZE_LARGE,R,!1);if((null==O?void 0:O.name)&&(null==(y=O)?void 0:y.cannons.length)<1)return void(y=null);if(!y)return;var W=u.default.create(y.name+" CLASS",n.TEXT_SIZE_LARGE,R),Y=u.default.create((y.name+" CLASS").substring(0,Math.ceil(f*(y.name+" CLASS").length)),n.TEXT_SIZE_LARGE,R);f>.8&&(r.cutoffRect(.5*M-W.w,.2*I,Math.max(W.w,200)+160,1.8*n.TEXT_SIZE_LARGE,40*f,_,S),t.drawBackplatePolys(e,S)),f>.9&&_.push(.5*M,.2*I*f,.5*M,.2*I+1.8*n.TEXT_SIZE_LARGE+I*(1-f));var q=u.default.create(((null==O?void 0:O.centerNoneCannon)?Math.round((null==O?void 0:O.centerNoneCannon.life)/(null==O?void 0:O.centerNoneCannon.oLife)*100):"N/A")+"%",n.TEXT_SIZE_MEDIUM,R),z=a.default(f<1?a.GLctx.TextureDist:a.GLctx.Texture,E);u.default.addGL(E,z,q,.5*M-(H.w+U.w+q.w+40),.2*I+.5*n.TEXT_SIZE_MEDIUM,e),u.default.addGL(E,z,H,.5*M-(H.w+U.w)+(Math.random()-.5)*(1-f)*70,.2*I+(Math.random()-.5)*(1-f)*160,e,!1),u.default.addGL(E,z,U,.5*M-U.w+(Math.random()-.5)*(1-f)*70,.2*I+(Math.random()-.5)*(1-f)*160,e,!1),u.default.addGL(E,z,Y,.5*M-W.w,.2*I+n.TEXT_SIZE_LARGE-10,e)}}if(h>0){var j=y.centerNoneCannon&&y.centerNoneCannon.life>.1*n.SPACEPORT_START_LIFE?y.weaponsActive:!(Math.random()>.99)&&y.weaponsActive,K=u.default.create(((null==y?void 0:y.name)||"N/A")+" CLASS",n.TEXT_SIZE_MEDIUM,j?R:"r"),Z=y.centerNoneCannon,Q=Z&&Z.life<.2*n.SPACEPORT_START_LIFE,J=.5*M,$=I-100,ee=J-.12*y.cannons[0].oLife-10;r.cutoffRect(ee-80,I-111,200+Math.max(K.w,330)+20,60,15,_,S),t.drawBackplatePolys(e,S),_.push(.5*M,I-110,.5*M,I-110+60);z=a.default(Math.random()>.98||Q||h<1?a.GLctx.TextureDist:a.GLctx.Texture,E);u.default.addGL(E,z,K,J,$+n.TEXT_SIZE_SMALL,e,!0);for(var te=$,re=0,ae=0;ae<L.npcs.length;ae++){var ne=L.npcs[ae];ne.miningRig&&ne.miningRig.base&&ne.miningRig.base.guid===y.guid&&re++}l=[],x=[];var oe=I-52;for(G=0;G<Math.round(3*h);G++)A.drawBulletIcon(ee-75,I-107+18*G,l,.35,!1,0);for(G=0;G<Math.round(y.cannons.length*h);G++){var ie=y.cannons[G];oe-=ie.isCannon?6:12,r.line2Poly(ee,oe,ee+.12*ie.life,oe,l,ie.isCannon?3:6),ie.isCannon?ie.life:ie.life}var se=.12*(null===(T=y.centerNoneCannon)||void 0===T?void 0:T.oLife)+10;y.shields>0&&7===y.cannons.length?r.line2Poly(ee+se+5,te,ee+se+5+y.shields*h,te,x,6):(r.line2Poly(ee+se,te+n.TEXT_SIZE_SMALL-3,ee+se+.05*(100+y.shields)+10*(10+Math.max(y.shields,-10)),te+n.TEXT_SIZE_SMALL-3,x,2),u.default.addGL(E,z,u.default.create(y.shields<-10?"shields down":"restarting shields",n.TEXT_SIZE_SMALL,y.shields<-10?"r":R),ee+se,oe-.5*n.TEXT_SIZE_SMALL-1,e)),u.default.addGL(E,z,u.default.create(">> workers: "+Math.round(re*h),n.TEXT_SIZE_SMALL,R),J+(null==y?void 0:y.oshields)+90,oe-.5*n.TEXT_SIZE_SMALL-1,e),te+=n.TEXT_SIZE_MEDIUM}if(l.length>0){a.default(a.GLctx.Vertices,E),E.blendFunc(E.ONE,E.ONE);var Ae=L.daylight.is_night?1:0,ue=L.daylight.is_night?0:1;r.drawColor(l,E,Ae,ue,0,1),r.drawColor(_,E,Ae,ue,0,1,E.LINES),r.drawColor(x,E,.4,.4,1,1)}return"transition SP"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0),r(70),r(70)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderFrameBufferCombineGL=t.renderTextureToBufferMultiGL=t.renderFrameBufferGL=t.disableFrameBufferGL=void 0,t.default=function(e,t,n,i){void 0===n&&(n=e.game.resW),void 0===i&&(i=e.game.resH);e.SH,e.SX,e.SY;var s=e.gl;e.game;return r.default(a.GLctx.Texture,s),o.setupFrameBufferMulti(s,t,n,i),o.setTargetToFrameBufferMulti(e,t,n,i),"enableFrameBuffer"};t.disableFrameBufferGL=function(e){e.SH,e.SX,e.SY;var t=e.gl;e.game;return o.setTargetToCanvasMulti(t),t.activeTexture(t.TEXTURE0+0),"enableFrameBuffer"};t.renderFrameBufferGL=function(e,t,r,o,i,s,A){void 0===r&&(r=a.GLctx.Texture),void 0===o&&(o=0),void 0===i&&(i=0),void 0===s&&(s=e.game.resW),void 0===A&&(A=e.game.resH);e.SH,e.SX,e.SY;var u=e.gl;e.game;return n.renderFrameBufferMulti(u,r,t,o,i,s,A),u.activeTexture(u.TEXTURE0+0),"renderFrameBufferMulti"};t.renderTextureToBufferMultiGL=function(e,t,r,i,s,A,u,l){void 0===i&&(i=a.GLctx.Texture),void 0===s&&(s=0),void 0===A&&(A=0),void 0===u&&(u=e.game.resW),void 0===l&&(l=e.game.resH);e.SH,e.SX,e.SY;var c=e.gl;e.game;return o.setupFrameBufferMulti(c,t,u,l),n.renderTextureToBufferMulti(c,t,r,i,s,A,u,l),c.activeTexture(c.TEXTURE0+0),"renderTextureToBuffer"};t.renderFrameBufferCombineGL=function(e,t,o,i,s,A,u){void 0===i&&(i=0),void 0===s&&(s=0),void 0===A&&(A=e.game.resW),void 0===u&&(u=e.game.resH);e.SH,e.SX,e.SY;var l=e.gl,c=(e.game,r.default(a.GLctx.TextureCombineMultiply,l));return n.renderFrameBufferMultiCombine(l,c,t,o,i,s,A,u),l.activeTexture(l.TEXTURE0+0),"renderFrameBufferCombineMulti"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(33),r(6),r(9)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SlowMotion=void 0;var o=1;t.SlowMotion=function(){o=2e-4},t.default=function(e){var t,i=e.game;e.step,e.SW;1!==o&&(e.step*=o,e.stepMS*=o),o<1?(o+=.003,i.eventMap[r.GAME_EVENT.TIME_SCALE_CHANGED]={intensity:a.map(o,2e-4,1,.1,1)}):o=1;var s=n.default(e);return s&&(null===(t=s.abilities.hash[5])||void 0===t?void 0:t.activated)&&(o=.1),"timescale"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(6),r(3)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHIP_TURNING_MAX_VAL=t.SHIP_TURNING_INITIAL=void 0,t.SHIP_TURNING_INITIAL=.005,t.SHIP_TURNING_MAX_VAL=.1,t.default=function(e,n){var o,i,s=e.keyCodes;if(e.abilities.hash[14]){var A;if(s.STRAFELEFT)(A=e.vel.clone()).setLength(.1),A.setAngle(e.angle-.5*Math.PI),e.vel.add(A);if(s.STRAFERIGHT)(A=e.vel.clone()).setLength(.1),A.setAngle(e.angle+.5*Math.PI),e.vel.add(A)}if(s.UP&&e.life<a.PLAYER_LIFE_LOW_THRESHOLD){var u=1-r.map(e.life,0,a.PLAYER_LIFE_LOW_THRESHOLD,0,1);e.angle+=n*u*.01}s.LEFT&&(e.angVel+=e.turnAcc*n*.05,e.turnAcc>-t.SHIP_TURNING_MAX_VAL&&(e.turnAcc-=t.SHIP_TURNING_INITIAL*n),e.angleVel*=.99),s.RIGHT&&(e.angVel+=e.turnAcc*n*.05,e.turnAcc<t.SHIP_TURNING_MAX_VAL&&(e.turnAcc+=t.SHIP_TURNING_INITIAL*n),e.angleVel*=.99),s.LEFT||s.RIGHT||(e.turnAcc=0),e.angle=r.normalizeRadianAngle(e.angle),s.UP||(null===(o=e.abilities.hash[2])||void 0===o?void 0:o.activated)?((null===(i=e.abilities.hash[2])||void 0===i?void 0:i.activated)?e.thrust.setLength(.5):e.thrust.setLength(.1),e.thrust.setAngle(e.angle)):(e.vel.mult(.99),e.thrust.setLength(0)),e.keyCodes.DOWN&&(e.thrust.setLength(.07),e.thrust.setAngle(e.angle+Math.PI)),e.vel.add(e.thrust)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(6),r(15)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableShipMousecontrol=t.ShipWeaponLoadout=void 0,t.ShipWeaponLoadout=["FIRE","MISSILE","DOWN","CHARGE","ELECTROBASTARDRAY","BOOST"];var n={x:-1,y:-1},o=!1,i=!1,s=!1,A=!1;t.enableShipMousecontrol=function(){window.addEventListener("mousemove",function(e){n.x=e.x,n.y=e.y;var t=a.default().engine.game;t.currentLevel>14?t.menuSettings.mouseControl||s||(t.notifications.push({type:63,life:1e3,message:"Mouse control can be enabled in menu. ESC/OPTIONS/STEER WITH MOUSE [ON]"}),s=!0):14===t.currentLevel&&(A||(A=!0,t.notifications.push({type:63,life:1e3,message:"Use arrow UP/DOWN and ENTER/ESCAPE to navigate menu"})))}),window.addEventListener("mousedown",function(e){2===e.button?i=!0:0===e.button&&(o=!0)}),window.addEventListener("mouseup",function(e){2===e.button?i=!1:0===e.button&&(o=!1)}),window.addEventListener("wheel",function(e){u=Math.sign(e.deltaY)})};var u=0;t.default=function(e){0!==u&&(!function(e,r){var a=e.selectedPrimaryWeapon+r;a<0||a>t.ShipWeaponLoadout.length-1||(e.selectedPrimaryWeapon=a)}(e,u),u=0);var a=Math.atan2(n.y-(e.pos.y-e.SY),n.x-(e.pos.x-e.SX));e.angle=r.normalizeRadianAngle(e.angle);var s=r.angleDelta(e.angle,a);s<-.05?(e.keyCodes.LEFT=!0,e.keyCodes.RIGHT=!1):s>.05?(e.keyCodes.RIGHT=!0,e.keyCodes.LEFT=!1):(e.keyCodes.RIGHT=!1,e.keyCodes.LEFT=!1),e.keyCodes[t.ShipWeaponLoadout[e.selectedPrimaryWeapon]]=i,e.keyCodes.UP=o}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(6),r(5),r(7),r(4),r(3),r(13),r(17),r(1)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=.004*Math.PI*2,c=function(e,t,a){var n=Math.atan2(t.pos.y-e.pos.y,t.pos.x-e.pos.x);e.angle=r.normalizeRadianAngle(e.angle),e.angle+=.01*r.angleDelta(e.angle,n)*a};t.default=function(e,t){var r=t.step,d=t.game,p=e.miningRig;if(e.thrust.setAngle(e.angle),p&&d.rockFormationSystemRadius.length>0){if(p.slowdownMultip<1&&5!==p.armState&&4!==p.armState&&1!==p.armState?p.slowdownMultip+=.003:p.slowdownMultip<1&&e.vel.getLength(),e.thrust.mult(p.slowdownMultip),e.vel.add(e.thrust),p.target&&!p.target.remove&&p.target.life>0)c(e,p.target,r),(v=o.distanceBetweenVectors(e.pos,p.target.pos)-(p.target.radius+e.radius))<500&&(p.slowdownMultip>.1&&(p.slowdownMultip*=.95),v<100?(p.slowdownMultip>.1&&(p.slowdownMultip*=.9),3===p.armState?p.armState=1:0===p.armState?p.armState=4:4===p.armState&&(p.target.minerals-=.01,p.minedMinerals++,p.minedMinerals>=300&&(p.armState=2,p.target=null))):4===p.armState&&(p.armState=0));else if(p.minedMinerals>0){if(0===p.base.cannons.length||0===p.base.life||p.base.centerNoneCannon.remove)return d.spacePorts.length>0?void(p.base=d.spacePorts[Math.floor(d.spacePorts.length*Math.random())]):void(e.miningRig=null);var f=function(e,t){if(!t.miningRig.repairTarget||t.miningRig.repairTarget.life>=i.SPACEPORT_START_LIFE){var r=e.centerNoneCannon;if(r.life>.3*i.SPACEPORT_START_LIFE)if(t.guid%2==0)for(var a=0;a<e.cannons.length;a++)(n=e.cannons[a]).life<r.life&&(r=n);else if(t.pos.x>e.pos.x){for(var a=0;a<e.cannons.length;a++)if((n=e.cannons[a]).life<r.life){r=n;break}}else for(var a=e.cannons.length-1;a>0;a--){var n;if((n=e.cannons[a]).life<r.life){r=n;break}}return t.miningRig.repairTarget=r,r}return t.miningRig.repairTarget}(p.base,e);if((null==f?void 0:f.life)>.6*f.oLife){var h=a.getQuadTreesObj().queryTreesVec([0],f.pos,600,600);h.length&&(f=h[0])}c(e,f,r),p.armState=3;var v,g=f.radius;if(0===f.type)g=f.shipSizeMultip*i.SHIP_WIDTH_RADIUS;if((v=o.distanceBetweenVectors(f.pos,e.comp[0].vertex[0])-(20+g))<350&&p.minedMinerals>0?p.slowdownMultip>.1&&(p.slowdownMultip*=.995):p.slowdownMultip<1&&(p.slowdownMultip*=1.05),v<90){if(p.slowdownMultip>.1&&(p.slowdownMultip*=.98),f.life>=i.SPACEPORT_START_LIFE)return void(p.armState=3);var y=new u.Vector(20,0);if(y.setAngle(e.angle),y.add(e.comp[0].vertex[0]),A.ShipLike(f.type)?o.fine(3,f.comp[0].vertex,y):v<0){if(p.slowdownMultip>.1&&(p.slowdownMultip*=.99),p.armState=5,p.minedMinerals--,f.life<f.oLife&&(s.LifeIncreaseFixedValue(f,0===f.type?.4:1),f.life>=f.oLife&&(s.LifeMaxValue(f,f.oLife),22===f.type&&(f.damages=[])),e.life<80&&s.LifeIncreaseFixedValue(e,1),22===f.type)){var m=f;m.damages.length>1&&Math.random()>.8&&(m.damages.pop(),m.damages.pop())}p.minedMinerals<=0&&(p.armState=3)}}}else c(e,d.rockFormationSystemRadius[0],r),function(e){var t,r=e.miningRig,i=n.rect_pool_pop(e.pos.x-200,e.pos.y-200,400,400),s=a.getQuadTreesObj().queryTreesRect([11],i);n.rect_pool_put(i);for(var A=Number.MAX_SAFE_INTEGER,u=0;u<s.length;u++){var l=s[u];t?l.radius>t.radius&&l.minerals>0&&o.distanceBetweenVectors(t.pos,e.pos)<A&&(t=l):l.radius>15&&l.minerals>0&&(t=l)}t&&(r.target=t)}(e);if(3!==p.armState){for(var x=e.comp[0].vertex[0].toPoint(),S=e.angle,_=0;_<p.arm.length;_++){var T=p.arm[_];T.joint.set(T.size,0),S+=T.angle,T.joint.setAngle(S),T.joint.add(x),x=T.joint.toPoint()}1===p.armState&&function(e){e.thrust.set(0,0);for(var t=e.miningRig,r=0;r<t.arm.length;r++){var a=t.arm[r];if(a.angle>a.maxAngle)return a.angle-=l*(r+1),!1;a.angle=a.maxAngle}return!0}(e)&&(p.armState=0),2===p.armState&&function(e){e.thrust.set(0,0);for(var t=e.miningRig,r=t.arm.length-1;r>=0;r--){var a=t.arm[r];if(a.angle<a.minAngle)return a.angle+=l*(r+1),!1;a.angle=a.minAngle}return!0}(e)&&(p.armState=3)}}return"MiningRig"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(102)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformPosToGrid=void 0;var a=function(e,t,r,a,n,o){if(!(r<1))for(var i,s,A=0,u=r,l=-r;A<=u;)i=e-u,s=u+u,c(e-A,t-u,t+u,A+A),c(i,t-A,t+A,s),(l+=A+++A)>=0&&(l-=--u+u);function c(e,t,r,a){a++;for(var n=0;a--;)d(n=e+a,t),d(n,r)}function d(e,t){e<n&&t<o&&e>=0&&t>=0&&(a[t*n+e]=0)}};t.transformPosToGrid=function(e,t,a,n,o,i){var s=r.getSectorSize(e.WW,e.WH);return{x:Math.round((t-s.w*n)/s.w*i),y:Math.round((a-s.h*o)/s.h*i)}},t.default=function(e,t,n,o,i,s,A){for(var u=[],l=n*o,c=0;c<l;c++)u.push(1);var d=r.getSectorSize(t.WW,t.WH),p={},f=i.length;for(c=0;c<f;c++){var h=i[c],v=h.guid;if(!p[v]){p[v]=!0;var g=(h.pos.x-d.w*s)/d.w*e,y=(h.pos.y-d.h*A)/d.h*e,m=h.radius/d.w*e;a(Math.round(g),Math.round(y),Math.ceil(m),u,n,o)}}var x=[];for(c=0;c<o;c++)x.push(u.slice(c*n,c*n+n));return x}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(4),r(1),r(6),r(18),r(30),r(12),r(21),r(23),r(46),r(4),r(71),r(148),r(17),r(46),r(30),r(5),r(16),r(105),r(24),r(13)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d,p,f,h,v,g,y,m,x,S,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPartsFromSquid=void 0;var T=new a.Vector(0,0);t.default=function(e){var t=e.game,a=e.step,o=(e.SW,e.SH,e.SX,e.SY,e.WW),p=e.WH,f=e.stepMS;if(y.getQuadTreesObj().All){for(var m=v.getBaseTargetArrays(e),S=0;S<t.spaceSquids.length;S++){var E=t.spaceSquids[S];E.guid%2==0&&E.life<.3*E.oLife&&r.distanceBetweenVectors(E.restPos,E.pos)>1900&&(E.prioritzeRestpos=!0);var M=c.default(E,E.pos,E.radius,38*E.radius,m),I=M.targetPos;E.debugX=I.x,E.debugY=I.y;var L=E.tentacles;E.angle=n.normalizeRadianAngle(E.angle),T.x=200,T.y=0,T.setAngle(E.angle),T.add(E.pos);var w=E.pos,b=r.distanceBetweenVectors(w,I),P=E.angle;if(b>30){var R=Math.atan2(I.y-w.y,I.x-w.x),O=b>E.radius?.15:.3;if(E.angle+=n.angleDelta(E.angle,R)*O*a*.1,e.IS_MULTIPLAYER&&!e.IS_SERVER){var C=d.angleDifference(E.angle,E.netangle);C>.05*Math.PI&&(E.angle-=.05*C*a)}T.x=.1,T.y=0,T.setAngle(E.angle)}else T.setLength(0),E.vel.mult(.9);var G=s.default(E,E.angle,g.getGenericAvoidance(E,e,[],[]));E.vel.add(G.avoidance),E.vel.add(T),P=d.angleDifference(E.angle,P);var D=4+.5*E.level;E.vel.getLength()>D&&E.vel.setLength(D),i.default(E,E.infected?.8*a:a),A.shift(E,o,p),l.default(t,E,!0,1,3),u.wormhole(E,e),M.targetIsIM&&!E.stunned&&b<2*M.target.radius&&(_.DamgeItemFixedValue(M.target,1+.1*E.level),h.ShipLike(M.target.type)&&(M.target.damageTaken=!0),x.PredatorLevelUpgrade(E,M.target));for(var N=E.angle,B=L.length,F=Math.floor(B/2),V=0;V<B;V++){var k=L[V];k.glowIndex--,k.glowIndex<0&&(k.glowIndex=k.arm.length),k.searchTime+=f;var X=k.arm[k.arm.length-1],H=k.arm[0];if(T.x=H.centerX,T.y=H.centerY,n.rotateVector(T,P,T),H.centerX=T.x,H.centerY=T.y,H.angle+=P,b<k.reach)k.target.x=I.x-E.pos.x,k.target.y=I.y-E.pos.y,k.searchTime=0,r.distanceBetweenXYXY(k.target.x,k.target.y,X.centerX,X.centerY)<5&&M.targetIsIM&&M.target.vel.mult(.666);else if(k.searchTime>20){T.x=2*k.reach,T.y=0;var U=.05*(E.infected?.1*a:a);k.swimIn?(k.swimAngle+=U,k.swimAngle>.5&&(k.swimIn=!1)):(k.swimAngle-=U,k.swimAngle<-.3&&(k.swimIn=!0));var W=k.swimAngle;V<F?n.rotateVector(T,N-W,T):n.rotateVector(T,N+W,T),k.target.x=T.x,k.target.y=T.y,k.searchTime=15*Math.random()}for(var Y=1;Y<k.arm.length;Y++){var q=k.arm[Y],z=k.arm[Y-1];q.leftMuscle.relax(),q.rightMuscle.relax(),E.stunned?Math.random()>.5?q.leftMuscle.contract():q.rightMuscle.contract():q.moveMusclesForTarget(k.target.x,k.target.y),q.updatePosition(z)}}E.stunned=!1}return"spacesquids"}};t.createPartsFromSquid=function(e,t){var r=[];f.renderSquids(t,r,[],[],[e],0,0);for(var i=r.length,s=0;s<i;s+=2){var A=r[s],u=r[s+1];S.createDust({x:A,y:u},1,1,t)}var l=new a.Vector(0,0),c=new a.Vector(0,0);for(s=1;s<10;s++){var h=o(o({specular:.2,isLV426:!1},m.setImovableDefaults(null)),{netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},sides:8,pos:e.pos,vel:new a.Vector(0,0),life:e.life,guid:e.guid,type:e.type,collType:25,radius:.5*e.radius*s*.5,angle:e.angle,angleVel:0,armor:null,resources:null});p.default(h,t,0)}for(var v=e.pos.x,g=e.pos.y,y=e.tentacles,x=0;x<y.length;x++)for(var _=y[x],T=0;T<_.arm.length;T++){var E=_.arm[T],M=.5*E.leftMuscle.l+.5*E.rightMuscle.l;l.x=-.5*M,l.y=0,n.rotateVector(l,E.angle,l),c.x=.8*M,c.y=0,n.rotateVector(c,E.angle,c);var I=new a.Vector(0,.08*Math.random());I.setAngle(-.5*Math.random()*(4*Math.PI));var L=new a.Vector(l.x,l.y),w=new a.Vector(c.x,c.y),b=new a.Vector(E.centerX+v,E.centerY+g),P=o(o({fromType:e.type,edgeA:L,edgeB:w,rotatedEdgeA:new a.Vector(0,0),rotatedEdgeB:new a.Vector(0,0),colorFade:255,complexPartIndices:null,complexPartVectors:null,pos:b,angle:0,angleVel:.005*Math.random(),vel:I,guid:d.getGuid(),type:37,collType:25,life:100+50*Math.random(),radius:E.width,width:.3*E.width},m.setImovableDefaults(null)),{armor:null});t.game.asteroidParts.push(P)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(6),r(3),r(18),r(12),r(23),r(14),r(13),r(306)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=e.game,l=e.WW,c=e.WH,d=e.step,p=t.rockets.length,f=0;f<p;f++){var h=t.rockets[f];if(30===h.type){var v=h.target;if(v&&!v.remove||(u.changeType(h,32),h.target=void 0),v){var g=Math.atan2(v.pos.y-h.pos.y,v.pos.x-h.pos.x);h.angle=r.normalizeRadianAngle(h.angle),h.angle+=.07*r.angleDelta(h.angle,g)*d}}h.thrust.setLength(.1),h.thrust.setAngle(h.angle),h.vel.add(h.thrust);var y=32===h.type?10.5:9.5;h.vel.getLength()>y&&h.vel.setLength(y),h.angle=h.angle%a.doublePI,i.default(t,h,!1),n.default(h,d),A.DamgeItemFixedValue(h,.01*d),h.life<0&&(h.remove=!0,s.addForce(t,h.pos.x,h.pos.y,90,2,h.damage)),o.shift(h,l,c)}return"rockets/missiles"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(5)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new r.Vector(0,0);t.default=function(e){var t=e.game,r=t.rockFormationSystemRadius;if(0!==r.length&&a.getQuadTreesObj().All){var o=r[0];if(13===t.currentLevel){var i=[];i.push(44,8,10,9),function(e,t){t.length;for(var r=e.pos.x,o=e.pos.y,i=a.getQuadTreesObj().queryTreesVec(t,e.pos,e.radius,e.radius),s=i.length,A=0;A<s;A++){var u=i[A],l=Math.atan2(u.pos.y-o,u.pos.x-r);n.set(.13,0),n.setAngle(l),u.vel.add(n)}}(o,i)}for(var s=t.rockFormations,A=s.length,u=0;u<A;u++){var l=s[u];l.minerals<1&&(l.remove=!0),l.pos.setFromVec(l.staticPos)}return"rockFormations"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(113),r(312),r(313),r(314),r(316),r(319),r(320),r(321),r(322),r(323),r(324),r(326),r(327),r(328),r(329),r(330),r(331),r(51),r(342),r(343)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d,p,f,h,v,g,y,m,x,S,_){"use strict";var T,E;Object.defineProperty(t,"__esModule",{value:!0}),t.getIntersectionData=void 0;var M=function(e,t,r){return void 0===r&&(r=[]),t.filter(function(e){return r.indexOf(e)<0}).map(function(t){return{type:t,handler:e}})},I=((T={})[2]=o(o([],M(r.default,[2,15])),M(v.default,[3])),T[5]=o([],M(r.default,[2,14,15,5,3])),(E={})[2]=[{type:2,handler:r.default},{type:15,handler:r.default},{type:3,handler:v.default},{type:23,handler:r.default}],E[5]=[{type:2,handler:r.default},{type:14,handler:r.default},{type:15,handler:r.default},{type:5,handler:r.default},{type:3,handler:r.default},{type:23,handler:r.default}],E[9]=[{type:2,handler:r.default},{type:14,handler:a.default},{type:9,handler:r.default},{type:5,handler:r.default},{type:3,handler:r.default},{type:23,handler:r.default}],E[16]=[{type:2,handler:r.default},{type:14,handler:a.default},{type:15,handler:r.default},{type:9,handler:r.default},{type:5,handler:r.default},{type:16,handler:r.default},{type:6,handler:n.default},{type:10,handler:n.default},{type:8,handler:n.default},{type:3,handler:r.default},{type:23,handler:r.default}],E[7]=[{type:2,handler:r.default},{type:14,handler:a.default},{type:3,handler:r.default},{type:23,handler:r.default}],E[8]=[{type:2,handler:r.default},{type:8,handler:r.default},{type:15,handler:r.default},{type:3,handler:r.default},{type:23,handler:r.default}],E[6]=[{type:3,handler:r.default},{type:23,handler:r.default},{type:8,handler:i.default},{type:5,handler:i.default},{type:2,handler:s.default},{type:6,handler:i.default},{type:15,handler:r.default},{type:14,handler:A.default}],E[12]=[{type:6,handler:u.default},{type:5,handler:u.default},{type:8,handler:u.default},{type:7,handler:l.default},{type:9,handler:c.default},{type:16,handler:c.default},{type:20,handler:u.default},{type:2,handler:d.default},{type:3,handler:d.default},{type:23,handler:d.default},{type:14,handler:_.default},{type:15,handler:d.default}],E[10]=[{type:15,handler:r.default},{type:2,handler:r.default},{type:10,handler:r.default},{type:6,handler:r.default},{type:5,handler:r.default},{type:8,handler:r.default},{type:3,handler:r.default},{type:23,handler:r.default}],E[11]=[{type:14,handler:_.default},{type:5,handler:p.default},{type:2,handler:f.default},{type:3,handler:f.default},{type:23,handler:f.default},{type:7,handler:h.default},{type:9,handler:c.default},{type:16,handler:c.default},{type:6,handler:p.default},{type:20,handler:p.default},{type:10,handler:p.default},{type:8,handler:p.default},{type:15,handler:f.default},{type:17,handler:m.default},{type:19,handler:m.default}],E[13]=[{type:2,handler:r.default},{type:3,handler:r.default},{type:23,handler:r.default},{type:6,handler:r.default},{type:10,handler:r.default},{type:8,handler:r.default},{type:15,handler:r.default},{type:7,handler:r.default},{type:16,handler:r.default},{type:9,handler:r.default}],E[17]=[{type:17,handler:g.default},{type:2,handler:g.default},{type:3,handler:g.default},{type:23,handler:g.default},{type:6,handler:g.default},{type:10,handler:g.default},{type:8,handler:g.default},{type:15,handler:g.default},{type:5,handler:g.default},{type:7,handler:g.default},{type:9,handler:g.default},{type:16,handler:g.default},{type:20,handler:g.default}],E[18]=[{type:18,handler:y.default},{type:17,handler:y.default},{type:2,handler:y.default},{type:3,handler:y.default},{type:23,handler:y.default},{type:6,handler:y.default},{type:10,handler:y.default},{type:8,handler:y.default},{type:15,handler:y.default},{type:5,handler:y.default},{type:7,handler:y.default},{type:9,handler:y.default},{type:16,handler:y.default},{type:11,handler:y.default},{type:19,handler:y.default},{type:20,handler:y.default}],E[19]=[{type:17,handler:r.default},{type:19,handler:r.default},{type:2,handler:r.default},{type:3,handler:r.default},{type:23,handler:r.default},{type:6,handler:r.default},{type:10,handler:r.default},{type:8,handler:r.default},{type:5,handler:r.default},{type:15,handler:r.default},{type:7,handler:r.default},{type:16,handler:r.default},{type:9,handler:r.default},{type:20,handler:r.default}],E[20]=[{type:20,handler:r.default},{type:6,handler:r.default},{type:3,handler:r.default},{type:23,handler:r.default},{type:8,handler:r.default},{type:5,handler:r.default},{type:10,handler:r.default},{type:2,handler:r.default},{type:15,handler:r.default},{type:9,handler:r.default},{type:16,handler:r.default}],E[21]=[{type:5,handler:S.default},{type:2,handler:S.default},{type:3,handler:S.default},{type:23,handler:S.default},{type:7,handler:S.default},{type:9,handler:S.default},{type:16,handler:S.default},{type:6,handler:S.default},{type:20,handler:S.default},{type:10,handler:S.default},{type:8,handler:S.default},{type:15,handler:S.default},{type:17,handler:S.default},{type:19,handler:S.default}],E);!function(){var e=0;for(var t in I)e+=I[t].length;console.log("intersectionData len:: "+e)}();t.getIntersectionData=function(){return I},x.startupTests()}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCorrectCollisionPoint=void 0;t.getCorrectCollisionPoint=function(e,t){var a=e.length;if(0===a)return t.pos;if(1===a)return e[0];for(var n=t.pos.x-1e3*t.vel.x,o=t.pos.y-1e3*t.vel.y,i=Number.MAX_VALUE,s=0,A=0;A<e.length;A++){var u=r.distanceBetweenXYXYRelative(n,o,e[A].x,e[A].y);u<i&&(i=u,s=A)}return e[s]}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(57),r(84),r(7),r(2),r(1),r(60),r(52)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawTreeRec=void 0;t.drawTreeRec=function(e,r,a,i,s,A,u,l){if(void 0===u&&(u=1),void 0===l&&(l=[]),e.ne)t.drawTreeRec(e.ne,r,a,i,s,A,u,l),t.drawTreeRec(e.nw,r,a,i,s,A,u,l),t.drawTreeRec(e.se,r,a,i,s,A,u,l),t.drawTreeRec(e.sw,r,a,i,s,A,u,l);else for(var c=e.indexes_I_XYWH_S,d=0;d<c.length;d+=6){var p=c[d+1]*u,f=c[d+2]*u,h=c[d+3]*u,v=c[d+4]*u,g=c[d+5];o.drawRectPoly(new n.Rectangle(p,f,h,v),-s,-A,1===g?l:i,3)}o.drawRectPoly(new n.Rectangle(e.x*u,e.y*u,e.width*u,e.height*u),-s,-A,a,1)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(17),r(98)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuadTreeUint16Point=t.intersectsUintArr16_XYWH=t.intersectsUintArr16XY=void 0;var o={};t.intersectsUintArr16XY=function(e,t,r){return!(e[0]>t||e[0]+e[2]<t||e[1]>r||e[1]+e[3]<r)};t.intersectsUintArr16_XYWH=function(e,t,r,a,n){return!(e[0]>t+a||e[0]+e[2]<t||e[1]>r+n||e[1]+e[3]<r)};var i=8,s=function(){function e(e,t,r,a){this.divide=!1,this.boundry=new Uint16Array(e),this.capacity=r>=a?t*i:t,this.items=new Uint16Array(this.capacity),this.itemsXY=new Uint16Array(2*this.capacity),this.index=0,this.currentDepth=r,this.maxDepth=a,this.deleteBranchMarker=0}return e.prototype.update=function(e,t,r,a,n,o,i){this.boundry[0]=e,this.boundry[1]=t,this.boundry[2]=r,this.boundry[3]=a,this.capacity=n,this.currentDepth=o,this.maxDepth=i,this.index=0},e.prototype.subDivide=function(){var t=this.boundry[0],r=this.boundry[1],a=this.boundry[2],n=this.boundry[3],s=this.currentDepth+1,A=this.maxDepth,u=s>=A?this.capacity*i:this.capacity;if(this.northeast)this.northeast.update(t+Math.ceil(.5*a),r,Math.ceil(.5*a),Math.ceil(.5*n),u,s,A),this.northwest.update(t,r,Math.ceil(.5*a),Math.ceil(.5*n),u,s,A),this.southeast.update(t+Math.ceil(.5*a),r+Math.ceil(.5*n),Math.ceil(.5*a),Math.ceil(.5*n),u,s,A),this.southwest.update(t,r+Math.ceil(.5*n),Math.ceil(.5*a),Math.ceil(.5*n),u,s,A);else{var l=o[u];if(l&&l.length>4)return this.northeast=l.pop(),this.northwest=l.pop(),this.southeast=l.pop(),this.southwest=l.pop(),void this.subDivide();this.northeast=new e([t+Math.ceil(.5*a),r,Math.ceil(.5*a),Math.ceil(.5*n)],u,s,A),this.northwest=new e([t,r,Math.ceil(.5*a),Math.ceil(.5*n)],u,s,A),this.southeast=new e([t+Math.ceil(.5*a),r+Math.ceil(.5*n),Math.ceil(.5*a),Math.ceil(.5*n)],u,s,A),this.southwest=new e([t,r+Math.ceil(.5*n),Math.ceil(.5*a),Math.ceil(.5*n)],u,s,A)}this.divide=!0},e.prototype.___query=function(e,r,a,o,i,s,A){void 0===A&&(A=-1);var u=this.items,l=this.index,c=this.itemsXY;if(t.intersectsUintArr16_XYWH(this.boundry,e,r,a,o)){for(var d=0;d<l;d++){var p=u[d];if(!s[p]&&p!==A){var f=2*d;n.intersectsXYWH_XY(e,r,a,o,c[f],c[f+1])&&(s[p]=!0,i.push(p))}}this.divide&&(this.northeast.___query(e,r,a,o,i,s,A),this.northwest.___query(e,r,a,o,i,s,A),this.southeast.___query(e,r,a,o,i,s,A),this.southwest.___query(e,r,a,o,i,s,A))}return i},e.prototype.insert=function(e,r,a){if(!t.intersectsUintArr16XY(this.boundry,r,a))return!1;if(this.index<this.capacity){this.items[this.index]=e;var n=2*this.index;return this.itemsXY[n]=r,this.itemsXY[n+1]=a,this.index++,!0}return this.divide||this.subDivide(),!!this.northeast.insert(e,r,a)||(!!this.northwest.insert(e,r,a)||(!!this.southeast.insert(e,r,a)||!!this.southwest.insert(e,r,a)))},e.prototype.reset=function(){this.index=0;var e=!this.northwest;if(this.northwest){var t=this.northeast.reset(),r=this.northwest.reset(),a=this.southeast.reset(),n=this.southwest.reset();if(t&&r&&a&&n&&(this.deleteBranchMarker++,this.deleteBranchMarker>3)){var i=o[this.northeast.capacity];i||(i=o[this.northeast.capacity]=[]),i.push(this.northeast,this.northwest,this.southeast,this.southwest),this.northeast=null,this.northwest=null,this.southeast=null,this.southwest=null,this.deleteBranchMarker=0}this.divide=!1}return e},e}(),A=function(){function e(e,t,r,a){void 0===a&&(a=8),this.divide=!1,this.setup(e,t,r,a)}return e.prototype.___queryXYWH=function(e,r,a,o,i,s,A){void 0===A&&(A=-1);var u=this.items,l=this.itemsXY;if(t.intersectsUintArr16_XYWH(this.boundry,e,r,a,o)){for(var c=0;c<this.index;c++){var d=u[c];if(!s[d]&&d!==A){var p=2*c;n.intersectsXYWH_XY(e,r,a,o,l[p],l[p+1])&&(s[d]=1,i.push(d))}}this.divide&&(this.northeast.___query(e,r,a,o,i,s,A),this.northwest.___query(e,r,a,o,i,s,A),this.southeast.___query(e,r,a,o,i,s,A),this.southwest.___query(e,r,a,o,i,s,A))}return i},e.prototype.insertUnsafe=function(e){throw"insert unsafe not implemented @ QuadtreeUint16Point"},e.prototype.insert=function(e){var r=e.pos.x,a=e.pos.y;if(!t.intersectsUintArr16XY(this.boundry,r,a))return!1;if(this.references[this.totalItems]=e,this.totalItems++,this.index<this.capacity){this.items[this.index]=this.REFERENCE_INDEX;var n=2*this.index;return this.itemsXY[n]=r,this.itemsXY[n+1]=a,this.index++,this.REFERENCE_INDEX++,!0}return this.divide||this.subDivide(),this.northeast.insert(this.REFERENCE_INDEX,r,a)?(this.REFERENCE_INDEX++,!0):this.northwest.insert(this.REFERENCE_INDEX,r,a)?(this.REFERENCE_INDEX++,!0):this.southeast.insert(this.REFERENCE_INDEX,r,a)?(this.REFERENCE_INDEX++,!0):this.southwest.insert(this.REFERENCE_INDEX,r,a)?(this.REFERENCE_INDEX++,!0):(this.REFERENCE_INDEX++,!1)},e.prototype.subDivide=function(){var e=this.boundry[0],t=this.boundry[1],r=this.boundry[2],a=this.boundry[3],n=this.maxDepth,o=this.capacity;this.northeast?(this.northeast.update(e+Math.ceil(.5*r),t,Math.ceil(.5*r),Math.ceil(.5*a),o,0,n),this.northwest.update(e,t,Math.ceil(.5*r),Math.ceil(.5*a),o,0,n),this.southeast.update(e+Math.ceil(.5*r),t+Math.ceil(.5*a),Math.ceil(.5*r),Math.ceil(.5*a),o,0,n),this.southwest.update(e,t+Math.ceil(.5*a),Math.ceil(.5*r),Math.ceil(.5*a),o,0,n)):(this.northeast=new s([e+Math.ceil(.5*r),t,Math.ceil(.5*r),Math.ceil(.5*a)],o,0,n),this.northwest=new s([e,t,Math.ceil(.5*r),Math.ceil(.5*a)],o,0,n),this.southeast=new s([e+Math.ceil(.5*r),t+Math.ceil(.5*a),Math.ceil(.5*r),Math.ceil(.5*a)],o,0,n),this.southwest=new s([e,t+Math.ceil(.5*a),Math.ceil(.5*r),Math.ceil(.5*a)],o,0,n)),this.divide=!0},e.prototype.___query=function(e,r,a,o){var i=[],s=[],A=this.items,u=this.itemsXY;if(t.intersectsUintArr16_XYWH(this.boundry,e,r,a,o)){for(var l=0;l<this.index;l++){var c=A[l];if(!i[c]){var d=2*l;n.intersectsXYWH_XY(e,r,a,o,u[d],u[d+1])&&(i[c]=1,s.push(c))}}this.divide&&(this.northeast.___query(e,r,a,o,s,i),this.northwest.___query(e,r,a,o,s,i),this.southeast.___query(e,r,a,o,s,i),this.southwest.___query(e,r,a,o,s,i))}var p=s.length;if(0===p)return[];var f=new Array(p);for(l=0;l<p;l++)f[l]=this.references[s[l]];return f},e.prototype.query=function(e){var t=e.radius;return this.___query(e.pos.x-t,e.pos.y-t,2*t,t)},e.prototype.queryCircle=function(e,t){var a=this.___query(e.x-t,e.y-t,2*t,2*t);if(0===a.length)return a;for(var o=.7*t,i=[e.x-o,e.y-o,2*o,2*o],s=a.length,A=[],u=0;u<s;u++){var l=a[u];n.intersectsArr_XY(i,l.pos.x,l.pos.y)?A.push(l):r.radiusIntersectPoint(e.x,e.y,t,l.pos.x,l.pos.y)&&A.push(l)}return A},e.prototype.queryInt=function(e){return this.___query(e.x,e.y,e.width,e.height)},e.prototype.queryVec=function(e,t,r){return this.___query(e.x-t,e.y-r,2*t,2*r)},e.prototype.destroy=function(){},e.prototype.reset=function(){this.index=0,this.totalItems=0,this.REFERENCE_INDEX=0,this.references=[],this.divide&&(this.northeast.reset(),this.northwest.reset(),this.southeast.reset(),this.southwest.reset()),this.divide=!1},e.prototype.setup=function(e,t,r,n){void 0===n&&(n=8);var o=Math.max(0,e.x),i=Math.max(0,e.y),s=e.width,A=e.height;this.boundry=new Uint16Array([o,i,s,A]),(o>65535||i>65535||s>65535||A>65535)&&console.log("Out of range @ Quadtree constructor "+this.boundry.join(",")+" "+a.TypesToString(this.itemType)),this.items=new Uint16Array(t),this.itemsXY=new Uint16Array(2*t),this.capacity=t,this.itemType=r,this.references=[],this.REFERENCE_INDEX=0,this.index=0,this.totalItems=0,this.minX=65535,this.minY=65535,this.maxW=0,this.maxH=0,this.maxDepth=n},e.prototype.getRangeType=function(){return"UINT16"},e.prototype.getDepth=function(){return console.error("depth not implemented"),-1},e.prototype.visualize=function(e,t,r,a,n,o,i){if(void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=.3),this.divide){var s=i,A=10;this.__visualize(s,A,e,t,r,a,r-300,a+40,this.northwest,n,o),this.__visualize(s,A,e,t,r,a,r-100,a+40,this.northeast,n,o),this.__visualize(s,A,e,t,r,a,r+100,a+40,this.southwest,n,o),this.__visualize(s,A,e,t,r,a,r+300,a+40,this.southeast,n,o)}},e.prototype.__visualize=function(e,t,r,a,n,o,i,s,A,u,l){var c=A.boundry;r.push((u+c[0])*e,(l+c[1])*e,(u+(c[0]+c[2]))*e,(l+c[1])*e,(u+(c[0]+c[2]))*e,(l+c[1])*e,(u+(c[0]+c[2]))*e,(l+(c[1]+c[3]))*e,(u+c[0])*e,(l+c[1])*e,(u+c[0])*e,(l+(c[1]+c[3]))*e,(u+c[0])*e,(l+(c[1]+c[3]))*e,(u+(c[0]+c[2]))*e,(l+(c[1]+c[3]))*e),t*=.25,A.divide?(this.__visualize(e,t,r,a,i,s,i-30*t,s+40,A.northwest,u,l),this.__visualize(e,t,r,a,i,s,i-10*t,s+40,A.northeast,u,l),this.__visualize(e,t,r,a,i,s,i+10*t,s+40,A.southwest,u,l),this.__visualize(e,t,r,a,i,s,i+30*t,s+40,A.southeast,u,l)):A.southwest&&(this.__visualize(e,t,a,a,i,s,i-30*t,s+40,A.northwest,u,l),this.__visualize(e,t,a,a,i,s,i-10*t,s+40,A.northeast,u,l),this.__visualize(e,t,a,a,i,s,i+10*t,s+40,A.southwest,u,l),this.__visualize(e,t,a,a,i,s,i+30*t,s+40,A.southeast,u,l))},e}();t.QuadTreeUint16Point=A}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShipCamera=void 0;var r=[],a=[];t.ShipCamera=function(e,t){t.step;var n=e.SW,o=e.SH;if(t.IS_SERVER)return e.SX=e.pos.x-.5*n,void(e.SY=e.pos.y-.5*o);var i=function(e){r.push(e.x),a.push(e.y);var t=r.length;t>50&&(r.shift(),a.shift(),t--);for(var n=0,o=0,i=0;i<t;i++)n+=r[i],o+=a[i];return{x:n/t,y:o/t}}(e.vel);e.SX=e.pos.x-.5*n+20*i.x,e.SY=e.pos.y-.5*o+20*i.y},t.default=function(e){for(var r=e.game,a=(e.step,e.SW),n=e.SH,o=(r.resW,r.player),i=0;i<o.length;i++){var s=o[i];e.IS_MULTIPLAYER||s.SW!==a&&(s.SW=a,s.SH=n),t.ShipCamera(s,e)}}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,a,n,o,i,s,A){void 0===e&&(e=0),void 0===a&&(a=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===A&&(A=0);var u=a,l=n;if(!t(u,l,A)&&A<=e){if(u===o&&l===o){var c=o-1,d=i+=2;return void r(e,t,c+1,c,c,d,1,A+1)}a===o+i&&n===o?s=2:n===o+i&&a===o+i?s=0:a===o&&n===o+i&&(s=3);var p=u,f=l;switch(s){case 0:p--;break;case 1:p++;break;case 2:f++;break;case 3:f--}r(e,t,p,f,o,i,s,A+1)}};t.default=r}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(114),r(7),r(115),r(87),r(165),r(10),r(352)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generator=t.generatorSchedulable=void 0;var u=function(e,t){return e>0?e-e%t:e-e%t-t};t.generatorSchedulable=function(e){var r=e.game.procedural.chunks;t.generator(e,r.size,r.ss,r.hash,r.qeue,!0)};var l=0,c=0,d=!1,p=a.rect_pool_pop(0,0,0,0);t.generator=function(e,t,f,h,v,g,y){void 0===y&&(y=12);var m=e.SW,x=e.SH,S=e.SX,_=e.SY,T=_+.5*x,E=u(S+.5*m,t),M=u(T,t);i.default(7,function(i,s,A){var u=i*t+E|0,l=s*t+M|0,c=0===u&&0===l?r.getSeedFromINTEGERS(63,78):r.getSeedFromINTEGERS(0|u,0|l);return!h[c]&&(function(e,t,r,i,s,A,u,l,c){void 0===c&&(c=12);var d={rect:a.rect_pool_pop(r,i,s,s),children:[],seed:t,typeHash:{},populated:!1,type:87,remove:!1};A[t]=d;var p=n.randWithWhiteHole(t),f=p.rng;if(p.wh)o.populateChunk(d,d,e,f,l,13);else if(f()<.02)o.populateChunk(d,d,e,f,l,6);else if(f()>.03)o.createChunkRec(e,d,d,f,r,i,s,0,0,0,c,u,l);else{for(var h=0;h<5&&(o.populateChunk(d,d,e,f,l),!d.populated);h++);d.populated||o.createChunkRec(e,d,d,f,r,i,s,0,1e-4,0,c,u,l)}}(e,c,u,l,t,h,v,g,y),!0)}),i.default(25,function(a,n,o){if(Math.abs(a)>1||Math.abs(n)>1){var i=a*t+E|0,u=n*t+M|0,f=0===i&&0===u?r.getSeedFromINTEGERS(63,78):r.getSeedFromINTEGERS(0|i,0|u);if(h[f])return A.clearChunk(e,h[f],h),!0}if(d||Math.abs(l-S)>t||Math.abs(c-_)>t){p.x=S-8*t,p.y=_-8*t,p.width=16*t,p.height=16*t;var v=performance.now();for(var g in d=!1,h){var y=h[g];if(!y.rect.intersects(p)){d=!0,A.clearChunk(e,y,h);break}}d&&s.LOG_GL("cleared  out of bounds chunks @ "+(performance.now()-v).toFixed(2)+" ms")}return l=S,c=_,!1})}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(28)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=!1,n=-1,o=-1,i=[],s=[],A=function(e){a=!1,o=-1,o=-1,e.weapons.all.forEach(function(e){e.guiHardSelected=!1,e.guiSoftSelected=!1,e.guiSoftSelectedMoveTo=!1})},u=function(e){e.weapons.all.forEach(function(e){e.guiSoftSelected=!1}),i=[],s=[];for(var t=[e.weapons.primary,e.weapons.secondary,e.weapons.aux],r=0;r<t.length;r++){for(var a=t[r],o=0;o<a.types.length;o++)s.push(e.weapons.hash[a.types[o]]);if(a.types.length>1){for(o=0;o<a.types.length;o++)i.push(e.weapons.hash[a.types[o]]);-1===n&&(n=0,e.weapons.hash[a.types[0]].guiSoftSelected=!0)}}i.length>0&&(n=0)};t.default={moveSelection:function(e){n++,a?(n>s.length-1&&(n=0),s.forEach(function(e){e.guiSoftSelected=!1,e.guiSoftSelectedMoveTo=!1}),s[n].guiSoftSelectedMoveTo=!0):(i.forEach(function(e){e.guiSoftSelected=!1,e.guiSoftSelectedMoveTo=!1}),n>i.length-1&&(n=0),n>-1&&i.length>0&&(i[n].guiSoftSelected=!0))},reset:A,init:function(e){-1===n&&u(e)},action:function(e){a&&-1!==o?function(e){var t=e.weapons.all.find(function(e){return e.guiHardSelected}),a=e.weapons.all.find(function(e){return e.guiSoftSelectedMoveTo}),n=e.weapons.byArrayType[a.arrayType].types.indexOf(a.type);r.reOrderWeapons(e.weapons.byArrayType[t.arrayType],e.weapons.byArrayType[a.arrayType],t.type,e.weapons,n),A(e),u(e)}(e):-1===n?u(e):n>=0&&n<i.length&&(i[n].guiSoftSelected=!1,i[n].guiHardSelected=!0,(o=n+1)>i.length-1&&(o=0),i[o].guiSoftSelectedMoveTo=!0,a=!0)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(43)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=!1,n=-1,o=-1,i=[],s=[],A=function(e){a=!1,o=-1,o=-1,e.abilities.all.forEach(function(e){e.guiHardSelected=!1,e.guiSoftSelected=!1,e.guiSoftSelectedMoveTo=!1})},u=function(e){e.abilities.all.forEach(function(e){e.guiSoftSelected=!1}),i=[],s=[];for(var t=[e.abilities.primary,e.abilities.secondary,e.abilities.aux],r=0;r<t.length;r++){for(var a=t[r],o=0;o<a.types.length;o++)s.push(e.abilities.hash[a.types[o]]);if(a.types.length>1){for(o=0;o<a.types.length;o++)i.push(e.abilities.hash[a.types[o]]);-1===n&&(n=0,e.abilities.hash[a.types[0]].guiSoftSelected=!0)}}i.length>0&&(n=0)};t.default={moveSelection:function(e){n++,a?(n>s.length-1&&(n=0),s.forEach(function(e){e.guiSoftSelected=!1,e.guiSoftSelectedMoveTo=!1}),s[n].guiSoftSelectedMoveTo=!0):(i.forEach(function(e){e.guiSoftSelected=!1,e.guiSoftSelectedMoveTo=!1}),n>i.length-1&&(n=0),i[n].guiSoftSelected=!0)},reset:A,init:function(e){-1===n&&u(e)},action:function(e){a&&-1!==o?function(e){var t=e.abilities.all.find(function(e){return e.guiHardSelected}),a=e.abilities.all.find(function(e){return e.guiSoftSelectedMoveTo}),n=e.abilities.byArrayType[a.arrayType].types.indexOf(a.type);r.reOrderAbilitys(e.abilities.byArrayType[t.arrayType],e.abilities.byArrayType[a.arrayType],t.type,e.abilities,n),A(e),u(e)}(e):-1===n?u(e):(i[n].guiSoftSelected=!1,i[n].guiHardSelected=!0,(o=n+1)>i.length-1&&(o=0),i[o].guiSoftSelectedMoveTo=!0,a=!0)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(1),r(4),r(16)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var i=[],s=0;s<t;)for(var A=i.length,u=Math.round(40*Math.random()+20),l=.8*e.WW*Math.random()+.1*e.WW,c=.8*e.WH*Math.random()+.1*e.WH,d=(new r.Vector(5*(Math.random()-.5),5*(Math.random()-.5)),0);d<u;d++){var p=o(o({target:null,gettingBackToGroup:!1,groupLeader:0===d,leaderIndex:A,pos:new r.Vector(l+Math.random()*e.SW*.01,c+Math.random()*e.SH*.01),vel:new r.Vector(5*(Math.random()-.5),5*(Math.random()-.5)),guid:a.getGuid(),maxSpeed:8,radius:30,type:80,collType:26,life:100,attackMode:!1,attackTimer:0,abortedAttackTimer:0,inAttackSwarm:!1},n.setImovableDefaults(null)),{armor:{type:0,value:1}});if(i.push(p),++s>t)break}return i}}.apply(t,a))||(e.exports=n)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__,exports,__webpack_require__(8),__webpack_require__(0),__webpack_require__(2),__webpack_require__(29),__webpack_require__(39),__webpack_require__(3),__webpack_require__(10)],__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,CreateText_1,GLCTX_1,BufferGL_1,KeyMapper_1,GameState_1,Consts_1,LogGL_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GetConsoleOpen=exports.ForceOpen=exports.Log=exports.Err=void 0;for(var TEXT_HEIGHT=30,TEXT_SIZE=18,MAX_LINES=14,ROW_SIZE=100,colors=["r","g","w"],i=0;i<colors.length;i++)CreateText_1.default.createSplitted("1234567890:-+*()[]'\"/|,.-_ <>",TEXT_SIZE,colors[i]),CreateText_1.default.createSplitted("QWERTYUIOPASDFGHJKLZXCVBNM",TEXT_SIZE,colors[i]),CreateText_1.default.createSplitted("qwertyuiopasdfghjklzxcvbnm",TEXT_SIZE,colors[i]);var measure=CreateText_1.default.create("1",TEXT_SIZE,"r"),openTarget=!1,polys=[],polyColorMap=[],isOpen=!1,isOpening=!1,isClosing=!1,topPos=window.innerHeight,OPEN_POS=.5*window.innerHeight,actualHintCode=[],hintLine=[],lines=[],currentLine="game".split(""),userInputIndexes=[],currentUserInputIndex=-1,scrollIndex=0,is_paused=!1,commands={godmode:function(e){if(1===e.player.length){e.player[0];e.notifications.push({type:70,message:"GOD MODE ENABLED",life:10*Consts_1.NOTIFICATION_LIFE})}},pause:function(){exports.Log("enabled"),is_paused=!is_paused},zoom:{in:function(e){e.SW*=.7,e.SH*=.7},out:function(e){e.SW*=1.3,e.SH*=1.3},eagleEye:function(e){e.SW<4e3?(e.SW*=10,e.SH*=10):commands.zoom.reset(e)},reset:function(e){e.SW=window.innerWidth,e.SH=window.innerHeight}},clear:function(){lines=[],scrollIndex=0},kill:function(e){if(e.player[0]){var t=e.player[0];t.life=0,t.remove=!0,openTarget=!1}},lock:function(e){if(e.player[0]){var t=e.player[0],r=t.pos.toPoint();setInterval(function(){t.pos.x=r.x,t.pos.y=r.y,t.life=2e3},100),LogGL_1.LOG_GL_FIXED_FORCED("PLAYER LOCKED","console msg"),e.notifications.push({type:70,message:"PLAYER LOCK ENABLED",life:10*Consts_1.NOTIFICATION_LIFE}),openTarget=!1}},dusk:function(e){e.daylight.time=Consts_1.DAYLIGHT_DUSK_BEGIN_TIME},dawn:function(e){e.daylight.time=Consts_1.DAYLIGHT_DAWN_BEGIN_TIME}},showHistory=function(e){var t=(currentUserInputIndex>-1?currentUserInputIndex:userInputIndexes.length-1)+e;t>userInputIndexes.length-1?t=userInputIndexes.length-1:t<0&&(t=0),lines[userInputIndexes[t]]&&(currentLine=lines[userInputIndexes[t]].join("").split(""))},convertStr=function(e,t){var r=[];if(e&&e.length>1){for(var a=e.split(""),n=0;n<a.length;n++){var o=a[n];if(t){if(t.indexOf(o)>-1){n++,r.push(o),lines.push(r),r=[];continue}}else if("\\"===o&&("n"===a[n+1]||"r"===a[n+1])){n++,lines.push(r),r=[];continue}r.push(a[n]),r.length>ROW_SIZE&&" "===o&&(lines.push(r),r=[])}r.length>0&&lines.push(r)}else lines.push(e+"");removeOld()},removeOld=function(){lines.length>400&&(lines=lines.splice(100,lines.length))},addToLine=function(e){if(e&&e.length>1)for(var t=e.split(""),r=0;r<t.length;r++)currentLine.push(t[r]),currentLine.length>ROW_SIZE&&(lines.push(currentLine),currentLine=[]);else currentLine.push(e+"");removeOld()},removeFromLine=function(){currentLine.pop()},executeCommand=function(e){for(var t=commands,r=e.split("."),a=0;a<r.length;a++){var n=r[a];t[n]&&(t=t[n])}return!(!t||"function"!=typeof t)&&(t(window.game),!0)},executeLine=function(){var str=currentLine.join("");if(!executeCommand(str)){userInputIndexes.push(lines.length),currentUserInputIndex=-1,lines.push(currentLine),currentLine=[];var res="";try{res=JSON.stringify(eval(str),null,1)}catch(e){res=e+""}convertStr("> "+res,",{}")}},KEYMAP={TILDE:220,BACKSPACE:8,DELETE:46,RETURN:13,SHIFT:16,CAPSLOCK:20,ALT:17,ALTGR:18,UP:38,DOWN:40,LEFT:37,RIGHT:39,HOME:35,END:36,ESCAPE:27},close=function(e){e.SH,e.stepMS;isClosing=!0,(topPos*=1.1)>e.game.resH&&(topPos=e.game.resH,isClosing=!1,isOpening=!1,isOpen=!1)},open=function(e){e.SH,e.stepMS;isOpening=!0,(topPos*=.9)<.5*e.game.resH&&(topPos=.5*e.game.resH,isClosing=!1,isOpening=!1,isOpen=!0)},generateHints=function(){var str=currentLine.join(""),matcher="",parts=[];"."===str[str.length-1]?str=str.substr(0,str.length-1):(parts=str.split("."),matcher=parts.pop(),str=parts.join(".")),actualHintCode=[],hintLine=[];var hints=[],priorityHints=[];if(str.indexOf("game")>-1)try{var res=eval(str),i=1;if("object"==typeof res)for(var key in res){var keyValue=res[key],m="["+i+" "+key+":"+typeof keyValue+"]",c=str+"."+key;if(matcher.length>0){var idxof=key.indexOf(matcher);if(-1===idxof)continue;if(0===idxof){i++,priorityHints.push(m),actualHintCode.push(c);continue}}i++,hints.push(m),actualHintCode.push(c)}}catch(e){hints.push("[no matches]")}else{var i=0,cwd=commands,cwdUpdated=!1;for(0===parts.length&&commands[str]&&(cwd=commands[str],cwdUpdated=!0),i=0;i<parts.length;i++){var currPath=parts[i];cwd[currPath]&&(cwd=cwd[currPath],cwdUpdated=!0)}for(var key in i=0,cwd){var keyType=typeof cwd[key],strType="function"===keyType?"()":">";i++;var m="["+i+" "+key+":"+strType+"]";cwdUpdated?actualHintCode.push(str+"."+key):actualHintCode.push(key),hints.push(m)}}hintLine=priorityHints.concat(hints)},scroll=function(e){var t=scrollIndex+e;t>-MAX_LINES&&t<lines.length&&(scrollIndex=t)},blinkMarker=!1,blinkMarkerCnt=0,handleKeys=function(e,t){var r=e.keys,a=e.charCodeString;if(r.BACKSPACE)return console.log("console backspace"),removeFromLine(),void generateHints();if(r.DELETE)return console.log("console delete"),removeFromLine(),void generateHints();if(r.RETURN)return console.log("console return"),void executeLine();if(r.UP)return console.log("console up"),showHistory(-1),void generateHints();if(r.DOWN)return console.log("console down"),showHistory(1),void generateHints();if(r.HOME)return console.log("console home"),scroll(-1),void(hintLine=["scroll up:"+scrollIndex]);if(r.END)return console.log("console end"),scroll(1),void(hintLine=["scroll down:"+scrollIndex]);if(r.ESCAPE){console.log("console escape");var n=currentLine.join("").split(".");return 1===n.length&&0===n[0].length&&(openTarget=!1),n.pop(),void(currentLine=n.join(".").split(""))}if(r.SHIFT||r.CAPSLOCK||r.ALT||r.ALTGR||r.LEFT||r.RIGHT)console.log("console ignored keys");else{var o=t-48-1;t>=48&&t<=57&&actualHintCode.length>0&&o<actualHintCode.length&&o>=0?currentLine=actualHintCode[o].split(""):null!==a&&addToLine(a),generateHints()}};exports.default=function(e){e.frame;var t=e.game,r=e.gl,a=e.stepMS,n=t.resW,o=t.resH;if(t.allKeyCodes.currentKeyCode===KeyMapper_1.Keys.TILDE&&(t.state.console.active?isOpen&&(openTarget=!1):isOpen||(openTarget=!0,GameState_1.StateMachine(t.state).consoleActivate())),t.state.console.active){isOpen||openTarget||GameState_1.StateMachine(t.state).consoleDisable(),handleKeys(t.allKeyCodes.console,t.allKeyCodes.currentKeyCode),t.allKeyCodes.console.keys.ESCAPE&&(openTarget=!1),polys=[],polyColorMap=[];if(openTarget?open(e):isOpen&&close(e),isOpen||isOpening||isClosing){var i=t.zoomTX;BufferGL_1.fillPoly(n*i,0,topPos*i,n*i,(topPos+.5*o)*i,polys),BufferGL_1.addToColorMap(polyColorMap,polys,0,0,0,.8),BufferGL_1.fillPoly(n*i,0,topPos*i,n*i,1*i,polys),BufferGL_1.addToColorMap(polyColorMap,polys,.5,.5,.5,1),r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);var s=GLCTX_1.default(GLCTX_1.GLctx.Vertices,r);BufferGL_1.drawColorMap(polyColorMap,polys,s,r),r.blendFunc(r.ONE,r.ONE);var A=GLCTX_1.default(GLCTX_1.GLctx.Texture,r),u=CreateText_1.default.createSplitted(hintLine.join(" ").substr(0,ROW_SIZE),TEXT_SIZE,"g","");CreateText_1.default.addListGL(r,A,u,10,10+topPos,e);for(var l=Math.max(lines.length-MAX_LINES-scrollIndex,0),c=Math.min(l+MAX_LINES,lines.length),d=1,p=l;p<c;p++){var f=CreateText_1.default.createSplitted(lines[p].join(""),TEXT_SIZE,"r","");CreateText_1.default.addListGL(r,A,f,10,10+topPos+d*TEXT_HEIGHT*1,e),d++}var h=CreateText_1.default.createSplitted(currentLine.join(""),TEXT_SIZE,"w",blinkMarker?"_":"");return CreateText_1.default.addListGL(r,A,h,10,10+topPos+d*TEXT_HEIGHT*1,e),(blinkMarkerCnt+=a)>500&&(blinkMarker=!blinkMarker,blinkMarkerCnt=0),"Console"}}};var ErrCnt=0,Err=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];is_paused||convertStr("("+ ++ErrCnt+") "+e.join(", "))};exports.Err=Err;var Log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];is_paused||convertStr(e.join(", "))};exports.Log=Log;var ForceOpen=function(){isOpen||is_paused||(openTarget=!0)};exports.ForceOpen=ForceOpen;var GetConsoleOpen=function(){return isOpen};exports.GetConsoleOpen=GetConsoleOpen}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(e,t,r){var a,n;a=[r,t,r(11),r(37),r(8),r(34),r(3),r(0),r(4),r(20),r(25),r(15)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function(e){var t=e.SW,r=e.SH;e.SX=e.game.player[0].pos.x-.5*t,e.SY=e.game.player[0].pos.y-.5*r};t.default={camera:d,splash:null,assert:function(e){var t=e.game;return t.player[0]&&t.spaceSquids[0]&&A.distanceBetween(t.player[0],t.spaceSquids[0])<700&&(t.player[0].keyCodes.AUX_ABILITY=!0),!1},init:function(e){var t=e.game,n=e.SW,i=e.SH,s=r.createShip(e,{life:2e3});t.player.push(s),s.angle+=.9*Math.PI,a.default(t.player,n,i,.3*n,.3*i),t.spaceSquids=o.default(e,1,s.pos.x+.5*n,s.pos.y+200,null,null,{life:5e6});for(var p=0;p<220;p++)u.default(e),l.default(e),t.player[0]&&t.spaceSquids[0]&&A.distanceBetween(t.player[0],t.spaceSquids[0])<555&&(t.player[0].keyCodes.AUX_ABILITY=!0);s.keyCodes.UP=!0,c.default().gui.step=0,d(c.default().gui),u.default(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),a=(e.game,1.3*i.TEXT_SIZE_MEDIUM),o=n.default.create("USE ",a,"w"),A=n.default.create("ELECTROBASTARD RAY ",a,"r"),u=n.default.create("TO STUN",a,"w"),l=n.default.create("BIOLOGIAL ENEMIES [SPACE SQUIDS]",a,"w"),c=s.default(s.GLctx.Texture,t);n.default.addListGL(t,c,[o,A,u],100,r-400,e),n.default.addGL(t,c,l,100,r-400+a,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(173)],void 0===(n=function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),window.m4=r(425),window.webglUtils=r(426);r(427);var n=function(){function e(){}return e.main=function(){a.default()},e}();t.default=n,n.main()}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(26),r(20),r(25),r(3),r(29),r(40),r(372),r(374),r(375),r(40),r(0),r(170),r(44),r(170),r(39),r(29),r(379),r(49),r(380),r(381),r(398),r(9),r(3),r(10),r(399),r(171),r(15),r(419),r(74),r(10),r(154),r(5),r(24),r(110),r(117),r(26),r(20),r(25),r(420),r(421),r(422),r(423),r(424),r(8),r(53),r(100)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d,p,f,h,v,g,y,m,x,S,_,T,E,M,I,L,w,b,P,R,O,C,G,D,N,B,F,V,k,X,H,U,W,Y,q,z,j){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var K=[];K[13]=P.default,K[19]=c.default,K[20]=X.default,K[11]=w.default,K[14]=H.default,K[15]=U.default,K[16]=W.default,K[17]=Y.default;var Z=window.innerWidth,Q=window.innerHeight,J=10*Z,$=10*Q,ee=Z,te=Q,re=S.default(Z,Q),ae=null,ne=null,oe=null,ie=null,se=null;window.onresize=function(){b.default().engine.game.loadscreen&&(window.location.href=window.location.href),setTimeout(function(){window.innerWidth===ee&&window.innerHeight===te?(I.LOG_GL_FIXED_FORCED("RESOLUTION OK","MESSAGE"),setTimeout(function(){I.LOG_GL_CLEAR_ALL()},2e3)):I.LOG_GL_FIXED_FORCED("RESOLUTION CHANGE NOT SUPPORTED","ERROR"),b.default().engine.game.resW=window.innerWidth,b.default().engine.game.resH=window.innerHeight,b.default().engine.game.currentResW=window.innerWidth,b.default().engine.game.currentResH=window.innerHeight,b.default().engine.game.SW=window.innerWidth,b.default().engine.game.SH=window.innerHeight,b.default().engine.SW=window.innerWidth,b.default().engine.SH=window.innerHeight,b.default().gui.SW=window.innerWidth,b.default().gui.SH=window.innerHeight;var e=E.default(b.default().engine);e&&(e.SW=window.innerWidth,e.SH=window.innerHeight);var t=document.getElementById("stage");t.width=window.innerWidth,t.height=window.innerHeight,ne.game.zoomTX=ne.SW/ne.game.resW,ne.game.zoomTXinverted=ne.game.resW/ne.SW,p.zoom(b.default().gui,!0)},50)};var Ae=!0;t.default=function(){var e=new URLSearchParams(window.location.search),t=parseInt(e.get("level"),10)-1;if(null===e.get("console")){for(var n in null===e.get("devproject")&&null===e.get("hotdevproject")||(F.setDevProjectGui(),V.setDevProjectEngine(),k.setDevProjectEngineClient()),re.menuSettings)"boolean"==typeof re.menuSettings[n]&&x.containsBool(n)&&(re.menuSettings[n]=x.loadBool(n));for(var n in re.menuSettings.debugItems)x.containsBool(n)&&(re.menuSettings.debugItems[n]=x.loadBool(n)||!1);null!=e.get("debug")?(re.debug={},re.menuSettings.extensiveUI=!0):re.menuSettings.extensiveUI=!1,e.get("dev")&&(re.debug={},re.menuSettings.fps=!0,!0),Ae=!e.get("soft"),!!e.get("skip"),t<K.length&&(re.currentLevel=t),Ae||(J=10*Z,$=10*Q),f.Log("SW:",Z,"SH:",Q),f.Log("WW:",J,"WH:",$);var i=document.getElementById("stage");i.width=Z,i.height=Q,Ae?se=_.createGL(i,re.menuSettings.antialiasing):((oe=i.getContext("2d")).fillStyle="black",oe.fillRect(0,0,Z,Q),ie=oe.getImageData(0,0,Z,Q)),window.addEventListener("resize",function(){var e=window.innerWidth/i.width;re.resW=re.SW=i.width*=e,re.resH=re.SH=i.height*=e,f.Log("resolution changed",re.resW,re.resH)}),window.game=re,window.trees=function(){return o(o({},G.getQuadTreesObj()),{spaceDust:D.GetSpaceDustTree(),bats:N.getSpaceBatTree(),parts:B.GetPartsTree()})},ae=T.createDefaultGuiCTX(re,J,$,se,oe,ie,ie?ie.data:new Uint8ClampedArray(0)),ne=T.createDefaultEngineCTX(re,J,$,!1,!1),b.setGlobalContexts(ne,ae),A.default(ne,ae),a.init(ne),y.addKeyMapperEvents(),C.enableShipMousecontrol(),r.default(ae);if(null===e.get("hot")){var s;if(null===e.get("hotdevproject")){if(null!==e.get("hotrocks"))return ue(7),void setTimeout(function(){g.StateMachine(b.default().engine.game.state).menuDisable()},500);if(null!==e.get("hotplayground"))return ue(8),void setTimeout(function(){g.StateMachine(b.default().engine.game.state).menuDisable()},500);ne.game.loadscreen=!0,se.clear(se.COLOR_BUFFER_BIT|se.DEPTH_BUFFER_BIT),setTimeout(function(){q.default.createUnitializedTextBuffers(function(e,t,r){if(L.default(ae,ne,t?1:e),t){ne.game.loadscreen=!1,j.setupFrameBuffer(se),f.Log("created: "+r+" char textures"),ue(13);var a=x.loadStr("version_info");a!==M.VERSION_STR&&(x.saveStr("version_info",M.VERSION_STR),re.notifications.push({type:70,message:"new version: "+M.VERSION_STR,life:M.NOTIFICATION_LIFE}),I.LOG_GL("new version: "+M.VERSION_STR),I.LOG_GL("UPDATE: was on "+a),re.menuSettings.fps=!1,re.menuSettings.fps3dBars=!1,re.menuSettings.fps3dGrid=!1,re.debug=!1,re.menuSettings.debugItems.aabb=!1,re.menuSettings.debugItems.forces=!1,re.menuSettings.debugItems.predatorTarget=!1,re.menuSettings.debugItems.proceduralCreation=!1);var n=z.getUser();n&&re.notifications.push({type:70,message:"Welcome back "+n,life:2*M.NOTIFICATION_LIFE})}},se)},0)}else ue(7)}else{j.setupFrameBuffer(se);var u=e.get("level"),l=function(){null!==u?(ue(parseInt(u,10)),setTimeout(function(){g.StateMachine(b.default().engine.game.state).menuDisable()},500)):(ue(13),setTimeout(function(){g.StateMachine(b.default().engine.game.state).menuDisable()},500))};null!==e.get("text")?(s=function(){l()},q.default.createUnitializedTextBuffers(function(e,t,r){O.LOG_GL_FIXED(t?"DONE ("+r+")":Math.round(100*e),"TXT"),t&&s()},se,!0)):l()}}else console.log("console only. only static inializers.")};var ue=function(e){var t;t=K[e],re.currentLevel=e,A.default(ne,ae,t.mapSize),f.Log("mapsize set to",ne.WW,ne.WH),f.Log("changed to level",e),t.init(ne),d.postLeelReset(ne),fe(),re.playerGuid=re.player[0].guid},le=0,ce=0,de=0,pe=null,fe=function(){var e=!1,t=performance.now(),o=t,A=0,u=!1,c=function(d){var S;p.zoom(ae);var _=re.currentLevel,T=K,L=T[_].assert;u=re.isPaused,t=o,o=performance.now(),A=o-t;var w=E.default(ae);if(w)pe=w;else{if(pe){var b=[];for(var P in pe.abilities.hash){var O=pe.abilities.hash[P];b.push(O.type)}var C=pe.weapons.all.map(function(e){return e.type}),G=pe.credits;x.saveData("continue_stats",{abilities:b,weapons:C,credits:G,pos:pe.pos.toPoint()})}if(pe&&z.getUserOnlineStatus())if(20===re.currentLevel||19===re.currentLevel){var D=pe.score+(1e-4*re.clock|0);I.LOG_GL("score set for player "+D+" "+z.getUser());try{z.setLadderValue(ne,D)}catch(e){}}else I.LOG_GL("ignore score, not correct level");pe=null}w&&(A=Math.min(A,100));var N=A*M.STEP_MULTIP;ne.stepMS=A,ne.step=N,ne.stepREQframe=d,u||(ne.stepMStotal+=A,ne.frameCnt++),ae.stepMS=A,ae.step=N,ae.stepREQframe=d,u||(ae.stepMStotal+=A,ae.frameCnt++);var B=s.default(re.state);if(ne.keyCodes=ae.keyCodes=B.game.keys,re.allKeyCodes=B,w&&(w.keyCodes=B.game.keys),e||(e=re.player.length>0&&L(ne)),!e&&re.fromClock&&re.clock>re.fromClock&&(re.player=[]),void 0!==re.targetLevel)return ue(re.targetLevel),void(re.targetLevel=void 0);if(e||0===re.player.length){if((le+=A)>500&&re.SW>.15*re.resW){var F=.99;re.SX+=re.SW*(1-F)*.5*1,re.SY+=re.SH*(1-F)*.5*1,re.SW*=.99,re.SH*=.99,p.zoom(ae)}var V=R.getRagDollPos();if(V&&(re.SX=V.x-.5*re.SW,re.SY=V.y-.5*re.SH),e&&(re.level_completed=!0),le>i.LEVEL_COMPLETION_TIMEOUT)return le=0,e?(f.Log("level asserted:",re.currentLevel),void ue(re.currentLevel+1)):(f.Log("level failed:",re.currentLevel),ue(13),void g.StateMachine(re.state).menuActivate())}if(re.debug)u||(a.default(ne),(X=T[_].camera)&&X(ae),n.default(ne));else try{if(!u)a.default(ne),(X=T[_].camera)&&X(ae),n.default(ne)}catch(e){ce++,I.LOG_GL_FIXED_FORCED(ce,"engine/client error "+(null!==(S=null==e?void 0:e.message)&&void 0!==S?S:e)),v.Err(JSON.stringify(e.stack)),f.ForceOpen(),re.performance.engine=[],console.error(e)}ne.game.zoomTX=ne.SW/ne.game.resW,ne.game.zoomTXinverted=ne.game.resW/ne.SW;var k=re.player[0];if(k?(ae.SX=ne.SX=re.SX=k.SX,ae.SY=ne.SY=re.SY=k.SY):(ae.SX=ne.SX=re.SX,ae.SY=ne.SY=re.SY),ae.SW=ne.SW=re.SW,ae.SH=ne.SH=re.SH,re.debug)(X=T[_].camera)&&X(ae),r.default(ae),(H=T[_].gui)&&H(ae);else try{var X,H;if(Ae)(X=T[_].camera)&&X(ae),r.default(ae),(H=T[_].gui)&&H(ae)}catch(e){de++,I.LOG_GL_FIXED_FORCED(de,"gui error "+e.message),v.Err(JSON.stringify(e.stack)),f.ForceOpen(),re.performance.gui=[],I.LOG_GL_FIXED_FORCED(ce,"engine/client error "+e.message),console.error(e)}Ae&&(h.default(f.default,ae,re.performance.gui,"gui"),l.default(ae)),m.default(re),re.eventMap={},y.resetKeyCodes(!1),requestAnimationFrame(c)};setTimeout(function(){return c(0)},re.testMode?500:0)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(2),r(1),r(6),r(0),r(0),r(9),r(8),r(62),r(4),r(63),r(2),r(55),r(11),r(3),r(17)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d,p,f,h,v,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0});Number.MIN_VALUE;var y=[],m=[],x=(u.default.create("<AUTOPILOT>",30,"g"),u.default.create("<AUTOPILOT>",30,"r"),new a.Vector(0,0));t.default=function(e){var t,S,_=e.game,T=e.SX,E=e.SY,M=e.SW,I=e.SH,L=e.gl,w=e.step,b=0,P=_.player;y=[],m=[];var R=_.enemies;b=R.length;for(var O=0;O<b;O++){var C=R[O],G=C.pos.x,D=C.pos.y;r.onStage(e,C.pos.x,C.pos.y)&&(d.default(_.zoomTXinverted,C,T,E,y,m,{r:1,g:0,b:0}),G>T&&G<T+M&&D>E&&D<E+I&&r.line2Poly(G-.5*C.radius-T,D-2*C.radius-E,G-.5*C.radius+.3*C.life-T,D-2*C.radius-E,y,2))}var N=_.npcs;if((b=N.length)>0)for(O=0;O<b;O++){var B=N[O];G=B.pos.x,D=B.pos.y;if(r.onStage(e,B.pos.x,B.pos.y)&&d.default(_.zoomTXinverted,B,T,E,y,m,{r:.9,g:.9,b:.9}),B&&B.miningRig&&3!==B.miningRig.armState&&5!==B.miningRig.armState){for(var F=B.comp[0].vertex[0],V=0;V<B.miningRig.arm.length;V++){var k=B.miningRig.arm[V].joint;r.line2Poly(F.x-T,F.y-E,k.x-T,k.y-E,y,2),F=k}r.addToColorMap(m,y,.8,.8,.8,1)}}var X=A.default(e);if(X&&/*!playerplayer.abilities.active.cloak &&*/!_.levelEditor){if(X.abilities.hash[15]&&_.currentLevel>=13&&X.coaxialMount.locked){var H=2.5*Math.random(),U=X.pos.x+X.coaxialMount.pos.x+X.coaxialMount.barrel.x,W=X.pos.y+X.coaxialMount.pos.y+X.coaxialMount.barrel.y,Y=X.coaxialMount.locked.x,q=X.coaxialMount.locked.y,z=new a.Vector(Y-U,q-W);z.mult(.7),z.addXY(U,W),Y=z.x,q=z.y,r.line2Poly(U-T,W-E,Y-T-H,q-E-H,y,.1),r.line2Poly(U-T,W-E,Y-T+H,q-E+H,y,.1),r.line2Poly(U-T,W-E,Y-T,q-E,y,.1),r.addToColorMap(m,y,.6,.6,.2,1)}if(X.abilities.hash[10]&&13!==_.currentLevel&&!(null===(t=X.abilities.hash[1])||void 0===t?void 0:t.activated)){if(X.aimTarget){var j=Math.floor((c.distanceBetweenVectors(X.pos,X.aimPoint)-X.radius)*v.PX_TO_MEETERS_CONVERSION);if(_.currentLevel>13){var K=e.game.daylight.is_night,Z=u.default.create(g.TypesToString(X.aimTarget.type),v.TEXT_SIZE_SMALL,K?"r":"g"),Q=u.default.createSplitted((j<5?"<5 ":j)+"M",v.TEXT_SIZE_SMALL,K?"r":"g","");u.default.addListGL(L,i.default(s.GLctx.Texture,L),o([Z],Q),X.pos.x-.5*Z.w-T,X.pos.y-(Z.h+v.SHIP_LENGTH_RADIUS+30)-E,e,!0)}}H=2.5*Math.random();r.line2Poly(X.pos.x-T,X.pos.y-E,X.aimPoint.x-T-H,X.aimPoint.y-E-H,y,.1),r.line2Poly(X.pos.x-T,X.pos.y-E,X.aimPoint.x-T+H,X.aimPoint.y-E+H,y,.1),r.line2Poly(X.pos.x-T,X.pos.y-E,X.aimPoint.x-T,X.aimPoint.y-E,y,.1),(null===(S=X.abilities.hash[11])||void 0===S?void 0:S.activated)?(r.line2Poly(X.pos.x-T,X.pos.y-E,X.aimPoint.x-T,X.aimPoint.y-E,y,2),X.abilities.hash[12]?r.addToColorMap(m,y,1,1,.1,1):X.abilities.hash[13]?r.addToColorMap(m,y,1,0,1,1):r.addToColorMap(m,y,1,0,.1,1),f.default(e,X.aimPoint,120+120*Math.random(),90)):r.addToColorMap(m,y,.3,1,.3,1)}_.menuSettings.showCloseItems}var J=_.drones.length;for(V=0;V<J;V++){var $=_.drones[V];d.default(_.zoomTXinverted,$,T,E,y,m,{r:.1,g:.7,b:.1})}for(var ee=0;ee<P.length;ee++){var te=P[ee];if(te.guid!==_.playerGuid&&te.name&&te.name.length>1){if(!te.abilities.active.cloak){var re=u.default.create(te.name,30,"g");u.default.addGL(L,i.default(s.GLctx.Texture,L),re,te.pos.x-.5*re.w-T,te.pos.y-70-E,e)}}else if(13!==_.currentLevel){var ae=!1;if(te.unableToComply){ae=!0;var ne={x:te.pos.x,y:te.pos.y};ne.x-=T,ne.y-=E,ne.y-=2*te.originalRadius;var oe=.7*te.originalRadius,ie=.85*oe,se=.7*oe,Ae=ne.y-oe,ue=ne.x,le=ne.y+oe,ce=ne.x-ie,de=ne.y+oe,pe=ne.x+ie,fe=ne.y-.3*se,he=ne.x,ve=ne.y+se,ge=ne.x;r.line2Poly(ue,Ae,ce,le,y,2),r.line2Poly(ue,Ae,pe,de,y,2),r.line2Poly(ce,le,pe,de,y,2),r.line2Poly(he,fe,ge,ve,y,2)}else{var ye=te.weapons.hash[25];if(ye&&ye.cooldown.value>0&&!te.abilities.active.cloak){ae=!0;var me=ye.cooldown.max/60;r.blockCirclePoly(60,.6*te.originalRadius,te.pos.x,te.pos.y-2*te.originalRadius,0,y,0,T,E,4,!1,0,(ye.cooldown.max-ye.cooldown.value)/me,0,(ye.cooldown.max-ye.cooldown.value)/me)}}ae&&r.addToColorMap(m,y,0,.6,0,1)}if(d.default(_.zoomTXinverted,te,T,E,y,m),r.addToColorMap(m,y,1,0,1,1),te.abilities.hash[15]){r.line2Poly(te.pos.x+te.coaxialMount.pos.x-T,te.pos.y+te.coaxialMount.pos.y-E,te.pos.x+te.coaxialMount.pos.x+te.coaxialMount.barrel.x-T,te.pos.y+te.coaxialMount.pos.y+te.coaxialMount.barrel.y-E,y,2);var xe=h.ShipColors[te.colorIndex];r.addToColorMap(m,y,xe.r,xe.g,xe.b,1)}if(te.abilities.hash[4]&&(te.targetLock||te.aimTarget)){var Se=te.weapons.hash[50];if(null==Se?void 0:Se.active){var _e=[],Te=te.targetLock||te.aimTarget;x.set(.8*Te.radius*Math.random(),0),x.setAngle(Math.random()*Math.PI*2);for(var Ee=Te.pos.x+x.x,Me=Te.pos.y+x.y,Ie=0;Ie<3;Ie++){var Le=[(G=te.comp[0].vertex[0].x)-T],we=[(D=te.comp[0].vertex[0].y)-E],be=(Ee-G)/10,Pe=(Me-D)/10;for(V=1;V<9;V++)Le.push(be*(V+1)+.5*(n.RandomStepBased(w,te.guid+V)-.5)*Pe+G-T),we.push(Pe*(V+1)+.5*(n.RandomStepBased(w,te.guid-V)-.5)*be+D-E);Le.push(Ee-T),we.push(Me-E);var Re=Le.length-1;for(V=0;V<Re;V++){var Oe=Le[V],Ce=Le[V+1],Ge=we[V],De=we[V+1];_e.push(Oe,Ge,Ce,De)}}var Ne=_e.length;for(V=0;V<Ne;V+=4)r.line2Poly(_e[V],_e[V+1],_e[V+2],_e[V+3],y,2);r.addToColorMap(m,y,.1,.1,.7,1);for(V=0;V<Ne;V+=4)r.line2Poly(_e[V],_e[V+1],_e[V+2],_e[V+3],y,1);r.addToColorMap(m,y,.5,.5,1,1)}}}b=_.rockets.length;for(V=0;V<b;V++){var Be=_.rockets[V],Fe=n.rotateVector(Be.tailLayout,Be.angle);r.line2Poly(Be.pos.x-T,Be.pos.y-E,Be.pos.x+Fe.x-T,Be.pos.y+Fe.y-E,y,1===Be.subType?1.5:2)}r.addToColorMap(m,y,.5,.5,.5,1),b=_.charges.length;for(V=0;V<b;V++){var Ve=_.charges[V],ke=l.hexBox(Ve.radius,Ve.pos,T,E);y.push.apply(y,ke[0]),r.addToColorMap(m,y,.1,.1,.1,1),y.push.apply(y,ke[1]),r.addToColorMap(m,y,.7,.7,.7,1),y.push.apply(y,ke[2]),r.addToColorMap(m,y,.3,.3,.3,1)}return y.length>0&&(L.disable(L.BLEND),p.drawColorMapSingle(m,y,L),L.enable(L.BLEND)),"ship"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SAT_collider=void 0,t.SAT_collider=function(e,t){for(var r={pen:null,axis:null,vertex:null},a=0;a<e.comp.length;a++)for(var o=0;o<t.comp.length;o++){var i=n(e.comp[a],t.comp[o]);i&&i.pen>r.pen&&(r=i)}return r};var a=new r.Vector(0,0);function n(e,t){var r=null;a.set(0,0);for(var n,m,S,_=a,T=function(e,t){var r=[];if(0===e.shape&&0===t.shape)return y.setFromVec(t.pos).subtr(e.pos),y.mag()>0?(i.setFromVec(y).unit(),r.push(i)):(i.set(Math.random(),Math.random()).unit(),r.push(i)),r;0===e.shape&&(i.setFromVec(x(t,e.pos)).subtr(e.pos),i.unit(),r.push(i));2===e.shape&&(g.setFromVec(e.dir),g.normal(),r.push(g));4===e.shape&&(s.setFromVec(e.dir).normal(),r.push(s),r.push(e.dir));1===e.shape&&(A.setFromVec(e.vertex[1]).subtr(e.vertex[0]),u.setFromVec(e.vertex[2]).subtr(e.vertex[1]),l.setFromVec(e.vertex[0]).subtr(e.vertex[2]),A.normal(),u.normal(),l.normal(),r.push(A),r.push(u),r.push(l));0===t.shape&&(c.setFromVec(x(e,t.pos)).subtr(t.pos),c.unit(),r.push(c));2===t.shape&&(d.setFromVec(t.dir).normal(),r.push(d));4===t.shape&&(p.setFromVec(t.dir).normal(),r.push(p),r.push(t.dir));1===t.shape&&(f.setFromVec(t.vertex[1]).subtr(t.vertex[0]),h.setFromVec(t.vertex[2]).subtr(t.vertex[1]),v.setFromVec(t.vertex[0]).subtr(t.vertex[2]),f.normal(),h.normal(),v.normal(),r.push(f),r.push(h),r.push(v));return r}(e,t),E=function(e){if(0===e.shape||2===e.shape)return 1;if(4===e.shape)return 2;if(1===e.shape)return 3;throw"unknown shape @ getshape axes"}(e),M=0;M<T.length;M++){m=o(T[M],e),S=o(T[M],t);var I=Math.min(m.max,S.max)-Math.max(m.min,S.min);if(I<0)return!1;if(m.max>S.max&&m.min<S.min||m.max<S.max&&m.min>S.min){var L=Math.abs(m.min-S.min),w=Math.abs(m.max-S.max);L<w?I+=L:(I+=w,T[M].mult(-1))}(I<r||null===r)&&(r=I,_=T[M],M<E?(n=t,m.max>S.max&&_.setFromVec(T[M]).mult(-1)):(n=e,m.max<S.max&&_.setFromVec(T[M]).mult(-1)))}var b=o(_,n).collVertex;return n===t&&_.setFromVec(_).mult(-1),{pen:r,axis:_.clone(),vertex:b.clone()}}function o(e,t){!function(e,t){0===e.shape&&(e.vertex[0].setFromVec(e.pos),S.setFromVec(t),S.unit(),S.mult(-e.r),e.vertex[0].add(S),e.vertex[1].setFromVec(e.pos),S.setFromVec(t),S.unit(),S.mult(e.r),e.vertex[1].add(S))}(t,e);for(var a=r.Vector.dot(e,t.vertex[0]),n=a,o=t.vertex[0],i=0;i<t.vertex.length;i++){var s=r.Vector.dot(e,t.vertex[i]);s<a&&(a=s,o=t.vertex[i]),s>n&&(n=s)}return{min:a,max:n,collVertex:o}}var i=new r.Vector(0,0),s=new r.Vector(0,0),A=new r.Vector(0,0),u=new r.Vector(0,0),l=new r.Vector(0,0),c=new r.Vector(0,0),d=new r.Vector(0,0),p=new r.Vector(0,0),f=new r.Vector(0,0),h=new r.Vector(0,0),v=new r.Vector(0,0),g=new r.Vector(0,0),y=new r.Vector(0,0);var m=new r.Vector(0,0);function x(e,t){for(var r,a=null,n=0;n<e.vertex.length;n++){m.setFromVec(t).subtr(e.vertex[n]);var o=m.mag();(o<a||null===a)&&(r=e.vertex[n],a=o)}return r}var S=new r.Vector(0,0)}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollData=void 0;var a=new r.Vector(0,0),n=new r.Vector(0,0),o=new r.Vector(0,0),i=new r.Vector(0,0),s=new r.Vector(0,0),A=new r.Vector(0,0),u=new r.Vector(0,0),l=new r.Vector(0,0),c=new r.Vector(0,0),d=new r.Vector(0,0),p=new r.Vector(0,0),f=new r.Vector(0,0),h=function(){function e(e,t,r,a,n){this.o1=e,this.o2=t,this.normal=r,this.pen=a,this.cp=n}return e.prototype.penRes=function(){p.setFromVec(this.normal).mult(this.pen/(this.o1.inv_m+this.o2.inv_m)),f.setFromVec(p),p.mult(this.o1.inv_m),this.o1.pos.add(p),f.mult(-this.o2.inv_m),this.o2.pos.add(f)},e.prototype.collRes=function(){a.setFromVec(this.cp).subtr(this.o1.comp[0].pos),o.set(-this.o1.angVel*a.y,this.o1.angVel*a.x),s.setFromVec(this.o1.vel).add(o),n.setFromVec(this.cp).subtr(this.o2.comp[0].pos),i.set(-this.o2.angVel*n.y,this.o2.angVel*n.x),A.setFromVec(this.o2.vel).add(i);var e=r.Vector.cross(a,this.normal);e=e*this.o1.inv_inertia*e;var t=r.Vector.cross(n,this.normal);t=t*this.o2.inv_inertia*t,u.setFromVec(s).subtr(A);var p=r.Vector.dot(u,this.normal),f=(-p*Math.min(this.o1.elasticity,this.o2.elasticity)-p)/(this.o1.inv_m+this.o2.inv_m+e+t);l.setFromVec(this.normal).mult(f),c.setFromVec(l).mult(this.o1.inv_m),d.setFromVec(l).mult(-this.o2.inv_m),this.o1.vel.add(c),this.o2.vel.add(d),this.o1.angVel+=this.o1.inv_inertia*r.Vector.cross(a,l),this.o2.angVel-=this.o2.inv_inertia*r.Vector.cross(n,l)},e}();t.CollData=h}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MatrixOpRotMx22=t.MatrixOpMultiplyVec=t.CreateMatrix22=void 0;t.CreateMatrix22=function(){for(var e=[],t=0;t<2;t++){e[t]=[];for(var r=0;r<2;r++)e[t][r]=0}return e};t.MatrixOpMultiplyVec=function(e,t,r){return r.x=e[0][0]*t.x+e[0][1]*t.y,r.y=e[1][0]*t.x+e[1][1]*t.y,r};t.MatrixOpRotMx22=function(e,t){e[0][0]=Math.cos(t),e[0][1]=-Math.sin(t),e[1][0]=Math.sin(t),e[1][1]=Math.cos(t)}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(93)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[],s=[];t.default=function(e){var t=e.game,A=e.SW,u=e.SH,l=e.SX,c=e.SY,d=e.gl;if(t.menuSettings.particles){var p;i=[],s=[];for(var f=o.getParticleTree().references,h=f.length,v=0;v<h;v++){var g=0|(p=f[v]).pos.x,y=0|p.pos.y,m=0|p.vel.x,x=0|p.vel.y;i.push(g-l,y-c,g+(0==m?1:m)-l,y+(0==x?1:x)-c)}r.addToColorMap(s,i,.3,.3,.3,1);var S=t.customParticles;h=S.length;for(v=0;v<h;v++){var _=S[v];g=_.pos.x-l,y=_.pos.y-c;g<A&&y<u&&g>0&&y>0&&i.push(g,y,g+_.vel.x,y+_.vel.y)}r.addToColorMap(s,i,.5,.3,.2,1);for(var T=t.spacePorts,E=T.length,M=0;M<E;M++){var I=T[M].chargeParticles,L=I.length;for(v=0;v<L;v++){var w=I[v];g=0|w.pos.x,y=0|w.pos.y;if(g-l<A&&y-c<u&&g-l>0&&y-c>0){m=0|w.vel.x,x=0|w.vel.y;i.push(g-l,y-c,g+(0==m?1:m)-l,y+(0==x?1:x)-c)}}}if(r.addToColorMap(s,i,.5,1,.5,1),i.length>0){var b=a.default(n.GLctx.Vertices,d);r.drawColorMap(s,i,b,d,d.LINES)}return"particles"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircleCreator=void 0;t.CircleCreator=function(e,t,a){return{vertex:[new r.Vector(0,0),new r.Vector(0,0)],pos:new r.Vector(e,t),r:a,shape:0}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(1),r(4),r(32),r(16),r(14)],void 0===(n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customExplosion=t.particleForExplosion=void 0;t.particleForExplosion=function(e,t,r,a){if(!(a.length>6e3)){for(var o=0;o<e;o++)(u=n.createParticle(t,r,Math.random()-.5,Math.random()-.5,100*Math.random())).vel.setLength(Math.random()+1),a.push(u);for(o=0;o<e;o++)(u=n.createParticle(t,r,15*(Math.random()-.5),15*(Math.random()-.5),50*Math.random())).vel.setLength(.1*Math.random()),a.push(u);if(e>10)for(var i=0;i<4;i++)for(var s=[10*Math.random()-5,10*Math.random()-5,10*Math.random()-5,10*Math.random()-5],A=0;A<s.length;A+=2)for(o=0;o<80;o++){var u;(u=n.createParticle(t,r,s[A]+.1*Math.random(),-s[A+1]+.1*Math.random(),130*Math.random())).vel.setLength(.1*o),a.push(u)}}};t.customExplosion=function(e,t,n,s,A,u,l,c){if(!(c.length>5e3)){for(var d=0;d<e;d++)(v=o(o({type:19,collType:25,guid:a.getGuid(),color:{r:s,g:A,b:u,a:l},life:100*Math.random(),radius:1,pos:new r.Vector(t,n),vel:new r.Vector(Math.random()-.5,Math.random()-.5)},i.setImovableDefaults(null)),{armor:null})).vel.setLength(Math.random()+1),c.push(v);for(d=0;d<e;d++)(v=o(o({type:19,collType:25,guid:a.getGuid(),color:{r:s,g:A,b:u,a:l},radius:1,life:50*Math.random(),pos:new r.Vector(t,n),vel:new r.Vector(15*(Math.random()-.5),15*(Math.random()-.5))},i.setImovableDefaults(null)),{armor:null})).vel.setLength(.1*Math.random()),c.push(v);if(e>10)for(var p=0;p<4;p++)for(var f=[10*Math.random()-5,10*Math.random()-5,10*Math.random()-5,10*Math.random()-5],h=0;h<f.length;h+=2)for(d=0;d<80;d++){var v;(v=o(o({type:19,collType:25,guid:a.getGuid(),color:{r:s,g:A,b:u,a:l},radius:1,life:130*Math.random(),pos:new r.Vector(t,n),vel:new r.Vector(f[h]+.1*Math.random(),-f[h+1]+.1*Math.random())},i.setImovableDefaults(null)),{armor:null})).vel.setLength(.1*d),c.push(v)}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(1),r(16),r(17)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.struct=void 0;var i=o(o({},a.setImovableDefaults(null)),{pos:new r.Vector(0,0),vel:new r.Vector(0,0),radius:1,life:0,guid:-1,type:0,collType:0,stunned:!1,shape:3,sleepingAABB:!1,remove:!1,targetFlagged:!1,forceX:0,forceY:0,armor:null}),s=o({},i),A=o(o({ownerGuid:0,owenerType:0,target:null,homing:!1},{damage:{stunMS:0,type:0,value:0,valuePercent:0,pushPercentM:0,slowPercentM:0}}),s);t.struct=function(e){switch(e){case 48:case 25:case 28:var t=o({},A);return t.pos=new r.Vector(0,0),t.vel=new r.Vector(0,0),t;case 20:var a=o({},s);return a.pos=new r.Vector(0,0),a.vel=new r.Vector(0,0),a;default:throw"no struct found for: "+n.TypesToString(e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(1),r(6),r(2),r(12)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=[],l=[],c=new o.Vector(0,0),d=new o.Vector(0,0),p=new o.Vector(0,0),f=new o.Vector(0,0);t.default=function(e){e.WW,e.WH,e.game,e.SW;var t=e.SH,o=e.SX,h=e.SY,v=e.gl;u=[],l=[];for(var g=e.game.spaceSnake,y=g.length,m=0;m<y;m++)for(var x=g[m].segments,S=x.length,_=0;_<S;_++){var T=x[_];if(A.onStage(e,T,3*T.radius)){r.blockCirclePoly(10,T.radius*(0===_?1.3:1.2),T.pos.x,T.pos.y,T.angle,u,t,o,h,T.radius*(0===_?1.3:1.2));for(var E=x[_-1],M=1;M<6;M++)r.blockCirclePoly(5,.17*T.radius*M,T.pos.x,T.pos.y,T.pos.y-T.pos.x,l,t,o,h,.17*T.radius*M),_>0&&r.line2Poly(T.pos.x-o,T.pos.y-h,E.pos.x-o,E.pos.y-h,l,.1*T.radius*M);if(_>0&&_<S-1)for(var I=0;I<2;I++)for(var L=.3*T.radius,w=0;w<L;w++)f.x=2*T.radius+T.radius*w*.2,f.y=0,i.rotateVector(f,T.angle+(-.38*Math.PI+.04*w-.15*T.legAngle*w)*(0===I?-1:1),f),r.line2Poly(T.pos.x-o,T.pos.y-h,T.pos.x+f.x-o,T.pos.y+f.y-h,u,2),w<4&&r.line2Poly(T.pos.x-o,T.pos.y-h,T.pos.x+f.x-o,T.pos.y+f.y-h,l,2);else c.x=1.13*T.radius,c.y=0,i.rotateVector(c,T.angle+-.1*Math.PI+.01*T.radius,c),p.x=1.13*T.radius,p.y=0,i.rotateVector(p,T.angle+-.1*Math.PI-.01*T.radius,p),d.x=.9*T.radius,d.y=0,i.rotateVector(d,T.angle+.1*Math.PI+.065*T.legAngle,d),d.add(c),u.push(c.x+T.pos.x-o,c.y+T.pos.y-h,d.x+T.pos.x-o,d.y+T.pos.y-h,p.x+T.pos.x-o,p.y+T.pos.y-h),c.x=1.13*T.radius,c.y=0,i.rotateVector(c,T.angle+.1*Math.PI+.01*T.radius,c),p.x=1.13*T.radius,p.y=0,i.rotateVector(p,T.angle+.1*Math.PI-.01*T.radius,p),d.x=.9*T.radius,d.y=0,i.rotateVector(d,T.angle+-.1*Math.PI-.065*T.legAngle,d),d.add(c),u.push(c.x+T.pos.x-o,c.y+T.pos.y-h,d.x+T.pos.x-o,d.y+T.pos.y-h,p.x+T.pos.x-o,p.y+T.pos.y-h)}}if(u.length>0){a.default(n.GLctx.Vertices,v);v.blendFunc(v.DST_COLOR,v.ZERO);s.drawColor(u,v,0,0,0,1),v.blendFunc(v.ONE,v.ONE),s.drawColor(l,v,.1,.01,.01,1)}return"spacesnake"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(63),r(2)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=[],A=[],u=function(e,t,a,n,i,u){var l=e.length;if(l>0){for(var c=0;c<l;c++){var d=e[c];s.push.apply(s,o.vectorsToVertices(d.complexPartIndices,d.complexPartVectors,d.pos.x-t,d.pos.y-a,d.angle))}r.addToColorMap(A,s,n,i,u,1)}};t.default=function(e){e.ctx,e.WW,e.WH,e.game,e.SW,e.SH;var t=e.SX,o=e.SY,l=e.gl;e.game.asteroids;s=[],A=[];for(var c=e.game.asteroidParts,d=[],p=[],f=[],h=[],v=0;v<c.length;v++){var g=c[v];if(r.onStage(e,g.pos.x,g.pos.y,600)){switch(g.type){case 23:i.line2PolyTriangle(g.pos.x+g.rotatedEdgeA.x-t,g.pos.y+g.rotatedEdgeA.y-o,g.pos.x+g.rotatedEdgeB.x-t,g.pos.y+g.rotatedEdgeB.y-o,s,.25*g.width);break;case 33:d.push(g);break;case 45:p.push(g);break;case 46:h.push(g);break;case 47:f.push(g);break;case 36:i.line2PolyTriangle(g.pos.x+g.rotatedEdgeA.x-t,g.pos.y+g.rotatedEdgeA.y-o,g.pos.x+g.rotatedEdgeB.x-t,g.pos.y+g.rotatedEdgeB.y-o,s,g.width);break;case 37:i.line2PolyTriangle(g.pos.x+g.rotatedEdgeA.x-t,g.pos.y+g.rotatedEdgeA.y-o,g.pos.x+g.rotatedEdgeB.x-t,g.pos.y+g.rotatedEdgeB.y-o,s,.25*g.width);break;default:i.line2PolyTriangle(g.pos.x+g.rotatedEdgeA.x-t,g.pos.y+g.rotatedEdgeA.y-o,g.pos.x+g.rotatedEdgeB.x-t,g.pos.y+g.rotatedEdgeB.y-o,s,g.width)}g.colorFade>127.5&&(g.colorFade-=.1)}}if(r.addToColorMap(A,s,.3,.3,.3,1),u(d,t,o,.1,1,1),u(p,t,o,.6,.1,.1),u(f,t,o,.1,.6,.1),u(h,t,o,.6,.6,.6),s.length>0){var y=a.default(n.GLctx.Vertices,l);l.disable(l.BLEND),r.drawColorMap(A,s,y,l),l.enable(l.BLEND)}return"parts"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(8),r(3),r(0),r(9),r(99)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r.default.create("GET",60,"r"),A=r.default.create("READY",70,"r"),u=r.default.create("1",50,"r"),l=r.default.create("2",50,"r"),c=r.default.create("3",50,"r");t.default=function(e){e.frame;var t=e.SW,d=e.SH,p=e.step,f=e.game,h=e.gl,v=(f.resW,o.default(e)),g=v?v.life:0,y=f.initGameTime;(y-=p)<0&&(y=0),f.initGameTime=y;var m=.4*t,x=.45*d;if(f.currentLevel>13&&y>.9*a.GAME_INTRO_TIMER)for(var S=1-(y-.9*a.GAME_INTRO_TIMER)/(.1*a.GAME_INTRO_TIMER),_=1-S,T=t,E=d,M=0;M<Math.round(Math.max(148*S,0));M++){var I=(150+120*Math.random())*_;i.addDistBox(0+T*Math.random()-.5*I,0+Math.random()*E,I,(17+60*Math.random())*_,0+T*Math.random()-.5*I,0+Math.random()*E,20+100*_,100,Math.random()>.5?30+30*Math.random():-30*Math.random()-30,0,0)}if((f.level_completed||g<1||!v)&&(y=a.GAME_INTRO_TIMER),y>0&&!f.level_completed&&g>0){var L=c;if(y<200&&(L=l),y<100&&(L=u),y<8&&(m=300+(Math.random()-.5)*t*.4,x=300+(Math.random()-.5)*t*.4),f.currentLevel>13){var w=n.default(n.GLctx.TextureDist,h);r.default.addListGL(h,w,[s,A,L],3*Math.random()+m,3*Math.random()+x,e)}}return"game intro"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(8),r(0),r(9)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r.default.create("GAME OVER",150,"r"),i=r.default.create("space points",40,"r"),s=r.default.create("LEVEL COMPLETED",150,"r");t.default=function(e){var t=e.game,A=e.SW,u=e.SH,l=e.gl,c=A/t.resW;if(0!==t.player.length){var d=n.default(e);if((d?d.life:0)<1&&(t.SW>.5*t.resW&&(t.SW=.99*t.SW,t.SH=.99*t.SH),t.currentLevel>13)){var p=a.default(a.GLctx.TextureDist,l);r.default.addGL(l,p,o,.35*A+5*Math.random(),.15*u+5*Math.random(),e),r.default.addGL(l,p,i,.05*A+5*Math.random(),.5*u+5*Math.random(),e)}if(t.level_completed){t.SW<.5*t.resW&&(t.SW=1.01*t.SW,t.SH=1.01*t.SH);p=a.default(a.GLctx.TextureDist,l);r.default.addGL(l,p,s,.15*A+5*Math.random(),.2*u+5*Math.random(),e),r.default.addGL(l,p,i,.07*A+5*Math.random(),.4*u+5*Math.random(),e);var f=r.default.create(d.score+"",350,"r");r.default.addGL(l,p,f,i.w*c+.05*A+20+5*Math.random(),.2*u+5*Math.random(),e)}return"game over"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(33),r(8),r(0),r(3),r(9),r(56),r(3),r(38),r(2),r(125)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d,p=function(){for(var e={},t=0;t<10;t++)e[t]=a.default.create(t+"",o.TEXT_SIZE_SMALL,"g");var r=["-","+","?","|"," "];for(t=0;t<r.length;t++)e[r[t]]=a.default.create(r[t],o.TEXT_SIZE_SMALL,"g");return e}(),f=(a.default.create("autopilot:",o.TEXT_SIZE_SMALL,"g"),a.default.create("homing bullets:",o.TEXT_SIZE_SMALL,"g"),a.default.create("LV:",o.TEXT_SIZE_SMALL,"g")),h=a.default.create("SPACE ICE:",o.TEXT_SIZE_SMALL,"g"),v=a.default.create("INTEGRITY:",o.TEXT_SIZE_SMALL,"g"),g=(a.default.create("LIFE:",o.TEXT_SIZE_SMALL,"g"),a.default.create("RADIUS:",o.TEXT_SIZE_SMALL,"g")),y=a.default.create("IRON:",o.TEXT_SIZE_SMALL,"g"),m=a.default.create("PLATINUM:",o.TEXT_SIZE_SMALL,"g"),x=a.default.create("RARE MINERALS:",o.TEXT_SIZE_SMALL,"g");!function(e){e[e.guid=0]="guid",e[e.size=1]="size",e[e.integrity=2]="integrity",e[e.iron=3]="iron",e[e.platinum=4]="platinum",e[e.rare_minerals=5]="rare_minerals"}(d||(d={}));var S=[{buffer:g,type:d.size},{buffer:v,type:d.integrity},{buffer:f,type:d.guid},{buffer:y,type:d.iron},{buffer:m,type:d.platinum},{buffer:x,type:d.rare_minerals}],_=[{buffer:g,type:d.size},{buffer:v,type:d.integrity},{buffer:h,type:d.guid},{buffer:y,type:d.iron},{buffer:m,type:d.platinum},{buffer:x,type:d.rare_minerals}],T=(a.default.create("hull:",o.TEXT_SIZE_SMALL,"g"),a.default.create("score:",o.TEXT_SIZE_SMALL,"g"),a.default.create("shield:",o.TEXT_SIZE_SMALL,"g"),a.default.create("EB:",o.TEXT_SIZE_SMALL,"g"),a.default.create("Rockets:",o.TEXT_SIZE_SMALL,"g"),a.default.create("Missiles:",o.TEXT_SIZE_SMALL,"g"),a.default.create("boost:",o.TEXT_SIZE_SMALL,"g"),null),E=!1,M=(a.default.create("WARNING: MISSILE LOCK",25,"r"),function(e,t){for(var r=(e+"").split(""),a=r.length,n=0;n<a;n++){var o=p[r[n]];o&&t.push(o)}}),I=!1,L=0,w=-1,b=0,P=function(){b=b>0?1170:1500};t.default=function(e){e.frame;var t=e.WW,p=e.WH,f=e.SW,h=(e.SH,e.SX),v=e.SY,g=e.gl,y=e.game,m=e.step,x=e.stepMS;if(!(y.currentLevel<=13)){var R=f/y.resW,O=i.default(e);if(!O||O.life<1||O.abilities.active.cloak)return 0,void(b=0);var C=!y.IS_PROCEDURAL&&s.default(O,t,p),G=[];if(O.keyCodes.TOGGLE_PRIMARY_WEAPON?(T=O.weapons.primary,E=!0,P()):O.keyCodes.TOGGLE_SECONDARY_WEAPON?(T=O.weapons.secondary,E=!0,P()):O.keyCodes.TOGGLE_AUX_WEAPON?(T=O.weapons.aux,E=!0,P()):O.keyCodes.TOGGLE_PRIMARY_ABILITY?(T=O.abilities.primary,E=!1,P()):O.keyCodes.TOGGLE_SECONDARY_ABILITY?(T=O.abilities.secondary,E=!1,P()):O.keyCodes.TOGGLE_AUX_ABILITY&&(T=O.abilities.aux,E=!1,P()),T){var D=300;n.default(n.GLctx.Vertices,g),c.drawWeaponIcon(T.types[T.index],.5*f,D-100,.7,[],[],[],1,e);var N=n.default(b>300&&b<1200?n.GLctx.Texture:n.GLctx.TextureDist,g),B=a.default.create("["+T.name+"]",A.TEXT_SIZE_MEDIUM,"g");a.default.addGL(g,N,B,.5*f-.5*B.w,D-(A.TEXT_SIZE_MEDIUM+10),e,!1);for(var F=0;F<T.types.length;F++){var V=T.types[F],k="";k=E?O.weapons.hash[V].name:O.abilities.hash[V].name;var X=a.default.create(k,F===T.index?A.TEXT_SIZE_MEDIUM+8:A.TEXT_SIZE_MEDIUM-8,"g");a.default.addGL(g,N,X,.5*f-.5*X.w,D,e,!1),D+=X.h}(b-=x)<=0&&(T=null,b=0)}if(!O.remove)if(O.life<o.PLAYER_LIFE_LOW_THRESHOLD?I||(y.eventMap[r.GAME_EVENT.PLAYER_DAMAGE_LEVEL_CRITICAL]={},I=!0):(I&&(y.eventMap[r.GAME_EVENT.PLAYER_DAMAGE_LEVEL_OK]={}),I=!1),y.menuSettings.objectData&&O.targetLock&&!u.posInAncient(O.pos)&&!u.posInAncient(O.targetLock.pos,!0)){var H=O.targetLock;G=[];var U=0;D=0;switch(H.guid!==w&&(L=0,w=H.guid),H.radius<200?(U=H.pos.x-h+40,D=H.pos.y-v-H.radius-o.TEXT_SIZE_SMALL):(U=H.pos.x-h-80,D=H.pos.y-v+30),H.type){case 4:case 11:var W=4===H.type?S:_,Y=Math.min(W.length,L),q=0,z=0;for(F=0;F<Y;F++){var j=W[F];(G=[]).push(j.buffer);var K=0;switch(j.type){case d.guid:K=H.guid;break;case d.integrity:K=H.life;break;case d.size:K=H.radius;break;case d.iron:K=H.resources.iron;break;case d.platinum:K=H.resources.platinum;break;case d.rare_minerals:K=H.resources.minerals}L>W.length+F&&M(Math.round(K),G),q=Math.max(q,a.default.measureBuffers(G)*R),G.length>0&&(z+=o.TEXT_SIZE_SMALL,a.default.addListGL(g,n.default(C||L<2.5*W.length?n.GLctx.TextureDist:n.GLctx.Texture,g),G,U,D+F*-o.TEXT_SIZE_SMALL,e,!0))}var Z=Math.min(1,L/(2*W.length)),Q=[],J=D-(z+8)+o.TEXT_SIZE_SMALL;l.cutoffRect(U-8,J,q+16,z+16,18,Q),n.default(n.GLctx.Vertices,g),l.drawColor(Q,g,0,1,0,1,g.LINES),Q=[];var $=H;$.resources.iron>0&&l.line2Poly(U+8,J-8,U+8,J-(8+Math.min(.2*$.resources.iron,25)*Z),Q,3),$.resources.platinum>0&&l.line2Poly(U+8+6,J-8,U+8+6,J-(8+Math.min(8*$.resources.platinum,25)*Z),Q,3),$.resources.minerals>0&&l.line2Poly(U+8+12,J-8,U+8+12,J-(8+Math.min(8*$.resources.minerals,25)*Z),Q,3),l.drawColor(Q,g,0,1,0,1)}L+=.3*m}else L=0;return"playersStats"}0}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(62),r(1)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawChargeIcon=void 0;var o=n.vec_pool_pop(0,0),i=n.vec_pool_pop(0,0),s=[.9*Math.PI,Math.PI,1.1*Math.PI,Math.PI+.9*Math.PI,0,Math.PI+1.1*Math.PI];Math.PI,Math.PI;t.drawChargeIcon=function(e,t,n,A,u,l,c,d){void 0===c&&(c=1),void 0===d&&(d=1);var p=2*c,f=e,h=t;switch(d){case 1:f=e,h=t;break;case 0:f=e+38*p,h=t+38*p}var v=a.hexBox(20*p,{x:f,y:h},0,0);if(n.push.apply(n,v[0]),A.push.apply(A,v[1]),u.push.apply(u,v[2]),42===l){o.setLength(38*p),i.setLength(22*p);for(var g=0;g<s.length;g++){var y=s[g];o.setAngle(y),i.setAngle(y),r.line2Poly(f+o.x,h+o.y,f+i.x,h+i.y,1===g||4===g?n:u,2*p)}}41===l&&(r.blockCirclePoly(80,26*p,f,h,0,n,0,0,0,3*p,!1,0,30,0,30),r.blockCirclePoly(80,32*p,f,h,0,A,0,0,0,2*p,!1,0,30,0,30),r.blockCirclePoly(80,38*p,f,h,0,u,0,0,0,p,!1,0,30,0,30)),24===l&&r.blockCirclePoly(80,29*p,f,h,0,A,0,0,0,3*p,!1,0,60,0,60)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawElectroIcon=void 0;t.drawElectroIcon=function(e,t,a,n,o){void 0===n&&(n=1),void 0===o&&(o=1);var i=2*n,s=30*i,A=2*i,u=e,l=t;switch(o){case 1:u=e-.5*s,l=t-s;break;case 0:u=e,l=t}r.line2Poly(u+.5*s-.5*i,l,u+s+.5*i,l,a,A),r.line2Poly(u+.5*s,l,u,l+s,a,A),r.line2Poly(u+s,l,u+.6*s,l+.7*s+.5*i,a,A),r.line2Poly(u+.6*s,l+.7*s,u+s+A,l+.7*s,a,A),r.line2Poly(u-.5*i,l+s,u+.5*s+i,l+s,a,A),r.line2Poly(u+.5*s,l+s,u+.2*s,l+2*s,a,A,2),r.line2Poly(u+s,l+.7*s,u+.2*s,l+2*s,a,A,2)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawRocketIcon=void 0;var a=[0,1,2,6,10,11];t.drawRocketIcon=function(e,t,r,a,o,i,s){void 0===a&&(a=1),void 0===o&&(o=!1),void 0===i&&(i=!1),void 0===s&&(s=1);var A=2*a;i?(n(e-3*A,t-12*A*2,r,.6*A,o,s),n(e+60*A*.3,t,r,.6*A,o,s),n(e-3*A,t+12*A*2,r,.6*A,o,s)):n(e,t,r,A,o,s)};var n=function(e,t,n,o,i,s){void 0===o&&(o=1),void 0===i&&(i=!1),void 0===s&&(s=1);var A=Math.max(2,2.2*o),u=60*o,l=12*o,c=.5*o,d=5*o,p=1*o,f=e,h=t;switch(s){case 1:f=e-1.2*u*.5,h=t-l;break;case 0:f=e,h=t}r.line2Poly(f,h+d,f+u,h+d,n,A),i&&(r.line2Poly(f+p,h+d+.5*l,f+p+4*d,h+d+.5*l,n,A),r.line2Poly(f+p,h+d,f+p,h,n,A),r.line2Poly(f+p+4*d,h+d,f+p,h,n,A),r.line2Poly(f+p,h+d+l,f+p,h+2*d+l,n,A),r.line2Poly(f+p+4*d,h+d+l,f+p,h+2*d+l,n,A)),r.line2Poly(f,h+d,f,h+d+l,n,A),r.line2Poly(f,h+d+l,f+u,h+d+l,n,A);for(var v=0;v<a.length-1;v++)r.line2Poly(f+u+3*v*o,h+d+l+a[v]*-c,f+u+3*(v+1)*o,h+d+l+a[v+1]*-c,n,A);for(v=0;v<a.length-1;v++)r.line2Poly(f+u+3*v*o,h+d+a[v]*c,f+u+3*(v+1)*o,h+d+a[v+1]*c,n,A)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(127)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawTurretIcon=void 0;r.vec_pool_pop(0,0),r.vec_pool_pop(0,0),Math.PI,Math.PI,Math.PI,Math.PI,Math.PI,Math.PI,Math.PI,Math.PI,Math.PI;t.drawTurretIcon=function(e,t,r,n,o){void 0===n&&(n=1),void 0===o&&(o=1);var i=e,s=t,A=5*n;switch(o){case 1:i=e,s=t;break;case 0:i=e+12*A,s=t+12*A}a.drawTurret(7*A,0,i,s,r,0,0,A)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawLazerIcon=void 0;t.drawLazerIcon=function(e,t,a,n,o,i,s){void 0===i&&(i=1),void 0===s&&(s=1);var A=5*i,u=30*A,l=30*A,c=e,d=t;switch(s){case 1:c=e-.5*u,d=t-.5*l;break;case 0:c=e,d=t}r.line2Poly(c+.02*u,d+.5*l,c+.8*u,d+.5*l,a,1*A),r.line2Poly(c+.8*u,d+.2*l,c+.8*u,d+.8*l,a,3*A),r.line2Poly(c+.8*u,d+.5*l,c+.4*u,d+.2*u,a,A),r.line2Poly(c+.8*u,d+.5*l,c+.5*u,d+.15*u,o,.5*A),r.line2Poly(c+.8*u,d+.5*l,c+.5*u,d+.35*u,a,.5*A),r.line2Poly(c+.8*u,d+.5*l,c+.4*u,d+.8*u,a,A),r.line2Poly(c+.8*u,d+.5*l,c+.5*u,d+.85*u,a,.5*A),r.line2Poly(c+.8*u,d+.5*l,c+.5*u,d+.65*u,o,.5*A)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawFlameIcon=void 0;t.drawFlameIcon=function(e,t,a,n,o,i,s){void 0===i&&(i=1),void 0===s&&(s=1);var A=5*i,u=30*A,l=30*A,c=e,d=t;switch(s){case 1:c=e-.5*u,d=t-.5*l;break;case 0:c=e,d=t}for(var p=1;p<5;p++){var f=c,h=d+.5*l,v=c+.97*u,g=d+.4*l+l*p*.05;r.line2Poly(f,h,v,g,a,.5*A)}r.blockCirclePoly(33,.4*l,c+.55*u,d+.5*l,5.4,o,0,0,0,A,!1,1,7,1,7),r.blockCirclePoly(33,.4*l,c+.5*u,d+.5*l,5.3,n,0,0,0,A,!1,2,6,2,6),r.blockCirclePoly(33,.4*l,c+.6*u,d+.5*l,5.7,n,0,0,0,A,!1,2,6,2,6),r.blockCirclePoly(33,.4*l,c+u,d+.5*l,3,n,0,0,0,A,!1,2,6,2,6),r.blockCirclePoly(33,.4*l,c+u,d+.5*l,1.5,a,0,0,0,A,!1,2,6,2,6),r.blockCirclePoly(33,.3*l,c+u,d+.5*l,3,o,0,0,0,A,!1,2,6,2,6),r.blockCirclePoly(33,.3*l,c+u,d+.5*l,1.5,o,0,0,0,A,!1,2,6,2,6)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(128),r(3),r(10),r(3),r(6),r(5),r(21),r(14),r(0),r(22),r(74)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=0,h=new r.Vector(0,0),v=new r.Vector(0,0),g=new r.Vector(0,0),y=0,m=0;t.default=function(e){e.WW,e.WH;var t=e.game,r=e.gl,x=e.step,S=e.SX,_=e.SY,T=e.SW,E=e.SH;if(t.menuSettings.raycasting){var M=t.daylight.fog;if(0!==M){var I=.1*M;d.Glow({x:.5*T+S,y:.5*E+_},1.8*E,[],e,I,I,I,M)}var L=t.screen.rectSS_400,w=(t.screen.rect,A.getQuadTreesObj());if(w&&w.All){for(var b=w.queryTreesRect([2],L),P=0;P<b.length;P++){var R=b[Math.floor(Math.random()*b.length)];if(R.miningRig&&5===R.miningRig.armState&&Math.random()>.95){var O=R.comp[0].vertex[0];a.RayCaster(O,.06+.19*Math.random(),e,.7,.7,.7+.3*Math.random(),1)}}for(var C=e.game.player,G=0;G<C.length;G++){var D=C[G];if(D.life>0){if(D.abilities.active.cloak?(y>0&&(y-=.3),m>0&&(m-=.3)):(y<.9&&(y+=.03),m<1&&(m+=.03)),!D.abilities.active.cloak){var N=D.abilities.hash[8];(null==N?void 0:N.activated)?(y=2.2,D.abilities.values.energy<10&&(y=1.8-.1*(10-D.abilities.values.energy)),m=1.5):y=D.life<n.PLAYER_LIFE_LOW_THRESHOLD?.7+.1*s.RandomStepBased(e.step,D.guid):.8}a.RayCaster(D.pos,1.25*y,e,.2*m,.05*m,.2*m,1,void 0,void 0,void 0,void 0,!1,!0)}}var B=p.getRagDollPos();B&&a.RayCaster(B,2,e,.5,.05,.2,1);var F=t.rockets,V=F.length;for(P=0;P<V;P++){var k=F[P],X=!0;if(k.life>n.ROCKET_START_LIFE-.2?X=!1:k.life>n.ROCKET_START_LIFE-.4?X=s.RandomStepBased(e.step,k.guid)>.8:k.life>n.ROCKET_START_LIFE-.6&&(X=s.RandomStepBased(e.step,k.guid)>.4),X){var H=1===k.subType?.12:.14;32===k.type?44!==k.ownerType?a.RayCaster(k.pos,H,e,.4,.05,.1,1):a.RayCaster(k.pos,H,e,.2,.1,.33,1):44!==k.ownerType?a.RayCaster(k.pos,H,e,.5,.1,.1,1):a.RayCaster(k.pos,H,e,.05,.3,.3,1)}}var U=t.charges;V=U.length,.03,(f+=x)>40&&(f=0);for(P=0;P<V;P++){var W=U[P];a.RayCaster(W.pos,.4,e,.5,.2,.6,1)}var Y=u.getAllAnomalies(e.game);V=Y.length;for(P=0;P<V;P++){var q=Y[P],z=q.pos.x,j=q.pos.y;switch(g.set(z,j),q.type){case 12:a.RayCaster(g,2.6*q.radius,e,.6,.1,.6,1);break;case 13:a.RayCaster(g,2.6*q.radius,e,.6,.6,.1,1);break;case 14:a.RayCaster(g,2.6*q.radius,e,.9,.1,.1,1);case 15:case 16:a.RayCaster(g,2.5*q.radius,e,.1,.1,.7,1)}}var K=t.spaceFog;V=K.length;for(P=0;P<V;P++){var Z=K[P];if(!(s.RandomStepBased(e.step,Z.guid)<.97)){z=Z.x,j=Z.y;g.set(z+(s.RandomStepBased(e.step,Z.guid)-.5)*Z.radius*.5,j+(s.RandomStepBased(e.step,Z.guid)-.5)*Z.radius*.5),Z.fire?a.RayCaster(g,1+s.RandomStepBased(e.step,Z.guid),e,.7,.1,.1,.6):a.RayCaster(g,1.5+s.RandomStepBased(e.step,Z.guid),e,.6,.1,.1,.6)}}var Q=performance.now(),J=l.getForce2Tree().queryInt(e.game.screen.rect);for(P=0;P<J.length;P++){var $=J[P];if(1===$.type&&$.radius>3)a.RayCaster($.pos,Math.max(2*$.radius,200),e,.2,.2,.1,1),performance.now()-Q>4&&0!==x&&o.LOG_GL("raycaster gl heavy time op")}var ee=w.queryTreesRect([3],L);c.default(c.GLctx.Vertices,r);for(P=0;P<ee.length;P++){var te=ee[P],re=te.centerNoneCannon.pos.x,ae=te.centerNoneCannon.pos.y,ne=te.centerNoneCannon.life,oe=te.isEnemyForMS>0?.9:0,ie=ne>.1*i.SPACEPORT_START_LIFE?1:2*ne/i.SPACEPORT_START_LIFE;s.RandomStepBased(e.step,te.guid)>ie?s.RandomStepBased(e.step,te.guid)>.2&&a.RayCaster({x:re,y:ae},2.6*te.radius,e,.3+oe,.2,.1,1):a.RayCaster({x:re,y:ae},2.4*te.radius,e,.1+oe,.5,.1,1)}for(var se=w.queryTreesRect([22],L),Ae=0;Ae<se.length;Ae++){var ue=se[Ae];if(ue.isCannon&&ue.lightsOn){if(v.set(2*ue.wallThickness,0),v.setAngle(ue.angle),ue.fireing){var le=s.RandomStepBased(x,234);a.RayCaster({x:ue.pos.x+v.x,y:ue.pos.y+v.y},100+100*le,e,.9,.9,.1,.3+.7*le)}h.set(1.1*ue.wallThickness,0),s.rotateVector(h,ue.angle,h);var ce=ue.pos.x+h.x,de=ue.pos.y+h.y;h.set(.5*ue.wallThickness,0),s.rotateVector(h,ue.angle+.5*Math.PI,h);var pe=ce+h.x,fe=de+h.y;h.set(.5*ue.wallThickness,0),s.rotateVector(h,ue.angle-.5*Math.PI,h);var he=ce+h.x,ve=de+h.y;a.RayCaster({x:pe,y:fe},800,e,.6,.6,.2,1,ue.angle+.029*Math.PI,.07*Math.PI,void 0,void 0,!1),a.RayCaster({x:he,y:ve},800,e,.6,.6,.2,1,ue.angle-.029*Math.PI,.07*Math.PI,void 0,void 0,!1)}}var ge=w.queryTreesRect([6],L);V=ge.length;for(P=0;P<V;P++){var ye=ge[P];a.RayCaster(ye.pos,1.8,e,.2,0,0,1)}return"raycaster"}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trianglePoint=void 0;t.trianglePoint=function(e,t){var r=t[0],a=t[1],n=t[2],o=e.x-r.x,i=e.y-r.y,s=(a.x-r.x)*i-(a.y-r.y)*o>0;return(n.x-r.x)*i-(n.y-r.y)*o>0!=s&&(n.x-a.x)*(e.y-a.y)-(n.y-a.y)*(e.x-a.x)>0==s},console.log("TEST > true:"+t.trianglePoint({x:2,y:2},[{x:0,y:0},{x:0,y:5},{x:10,y:2}])),console.log("TEST > false:"+t.trianglePoint({x:-2,y:2},[{x:0,y:0},{x:0,y:5},{x:10,y:2}]))}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(2),r(5),r(4),r(48)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawRockFormation=t.drawRockformationCrystals=void 0;var u=[],l=[],c=[],d=[],p=2*Math.PI;t.drawRockformationCrystals=function(e,t,r,a,n,o,i,u){for(var l=e.sides,c=e.angle,d=e.pos.x-t,f=e.pos.y-r,h=e.sides,v=A.mulberry32(e.guid),g=d+Math.cos(p*(h/l)+c)*a>>0,y=f+Math.sin(p*(h/l)+c)*a>>0,m=[o,i,u],x=0,S=0;h>-1;--h){if(0===x&&S>.33*l||1===x&&S>.66*l){x++;var _=m.shift();m.push(_)}S++,v();for(var T=d+Math.cos(p*(h/l)+c)*a>>0,E=f+Math.sin(p*(h/l)+c)*a>>0,M=.6*v()+.2,I=[M,1],L={x:g,y:y},w=0;w<2;w++)if(!(1!==n&&v()>n)){var b={x:L.x,y:L.y},P=s.midpoint({x:g,y:y},{x:T,y:E},I[w]);L=P;var R=s.midpoint(b,P,.5);R.setFromVec(s.midpoint(R,{x:d,y:f},.12+.1*v())),m[0].push(b.x,b.y,P.x,P.y,R.x,R.y);var O=d+(v()-.5)*a*.6,C=f+(v()-.5)*a*.6,G=d+(v()-.5)*a*.6,D=f+(v()-.5)*a*.6;m[1].push(O,C,b.x,b.y,R.x,R.y),m[1].push(G,D,O,C,b.x,b.y),m[2].push(O,C,P.x,P.y,R.x,R.y)}g=T,y=E}};t.drawRockFormation=function(e,a,n,o,i,s,A,u){r.blockCirclePoly(e.sides,.8*e.radius,e.pos.x,e.pos.y,e.angle,u,a,n,o,.8*e.radius),t.drawRockformationCrystals(e,n,o,e.radius,.46,i,s,A)},t.default=function(e){e.SW;var s=e.SH,A=e.SX,p=e.SY,f=e.gl,h=e.game,v=i.getQuadTreesObj();if(v.All){var g=h.screen.rectSS_200,y=v.queryTreesRect([11],g);if(u=[],l=[],c=[],d=[],h.debug&&h.rockFormationSystemRadius.length>0){var m=h.rockFormationSystemRadius[0];r.blockCirclePoly(40,m.radius,m.pos.x,m.pos.y,0,u,s,A,p,30)}for(var x=0;x<y.length;x++){var S=y[x];t.drawRockFormation(S,s,A,p,l,u,c,d)}u.length>0&&(f.disable(f.BLEND),a.default(n.GLctx.Vertices,f),o.drawColor(d,f,.2,.2,.4,1),o.drawColor(u,f,.1,.1,.4,1),o.drawColor(l,f,.01,.01,.01,1),f.enable(f.BLEND),o.drawColor(c,f,1,1,1,1))}return"rockFormations"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(2),r(0),r(0),r(64)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionalGlow=void 0;var s=[];t.DirectionalGlow=function(e,t,A,u,l,c,d,p,f){s=[];var h=l.game,v=l.gl,g=l.SH,y=l.SW,m=l.SX,x=l.SY,S=(y>g?g*t:y*t)*(h.resW/y);if(i.onStage(l,e.x,e.y,S)){s=[];var _=e.x-m,T=e.y-x,E=new r.Vector(e.x+Math.cos(A-.5*u)*S,e.y+Math.sin(A-.5*u)*S),M=new r.Vector(e.x+Math.cos(A+.5*u)*S,e.y+Math.sin(A+.5*u)*S);if((s=[_,T,E.x-m,E.y-x,M.x-m,M.y-x]).length>0){n.default(o.GLctx.VerticesGradient,v);var I=o.GLUniformLocation(v,"u_pos_x"),L=o.GLUniformLocation(v,"u_pos_y"),w=o.GLUniformLocation(v,"u_perimiter");v.uniform1f(I,_),v.uniform1f(L,T),v.uniform1f(w,S),a.drawColor(s,v,c,d,p,f)}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(64),r(2)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Flare=void 0;var s=[],A=[],u=function(e,t,r,a,n){var o=.1*Math.random()+.95;e.push(t-a*n*o,r,t,r+.01*n*a,t,r+-.01*n*a,t+a*n*o,r,t,r+.01*n*a,t,r+-.01*n*a)};t.Flare=function(e,t,l){var c=l.game,d=l.gl,p=l.SH,f=l.SW,h=l.SX,v=l.SY,g=(f>p?p*t:f*t)*(c.resW/f);if(o.onStage(l,e.x,e.y,.1*g)){s=[];var y=e.x-h,m=e.y-v;if(u(s,y,m,g,1),r.addToColorMap(A,s,.1,.1,.2,.1),u(s,y,m,g,.8),r.addToColorMap(A,s,.2,.2,.3,.2),u(s,y,m,g,.4),r.addToColorMap(A,s,.4,.4,.5,.4),u(s,y,m,g,.1),r.addToColorMap(A,s,.6,.6,.9,.6),u(s,y,m,g,.05),r.addToColorMap(A,s,.9,.9,1,1),s.length>0){var x=a.default(n.GLctx.Vertices,d);i.drawColorMap(A,s,x,d)}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(3),r(0),r(0),r(102),r(2)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var A=0,u=[];t.default=function(e){var t=e.step,l=e.WW,c=(e.WH,e.SX),d=e.SY,p=e.SW,f=(e.SH,e.game),h=e.gl;u=[],(A+=.5*t)>100&&(A=0);i.RESOLUTION,a.MAP_SAFETY_ZONE;for(var v=f.wayPoints,g=v.length,y=1;y<g;y++){var m=v[y-1],x=v[y];r.onStage(e,m.posX,m.posY,m.vertical?Math.abs(m.posY-x.posY):Math.abs(m.posX-x.posX))&&(m.vertical?r.lineVerticalRGBADash(p,m.posX-c,m.posY-d,x.posY-d,u,5,50,50,A):r.lineHorizontalRGBADash(p,m.posX-c,m.posY-d,x.posX-c,u,5,50,50,A))}return u.length>0&&(n.default(o.GLctx.Vertices,h),s.drawColor(u,h,.1,.1,.1,1)),"waypoints"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(2),r(33),r(0),r(0),r(8),r(29),r(39),r(49),r(201),r(226),r(228),r(229),r(231),r(2),r(3),r(22)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d,p,f,h,v,g,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var m={children:o(o(o(o(o([],window.io?[]:c.singlePlayerItems),window.io?d.multiplayerItems:[]),p.optionsItems),h.shipItems),f.debugItems)},x=0;x<m.children.length;x++)s.default.create(m.children[x].label,70,"w");var S=s.default.create(" ON",70,"w"),_=s.default.create(" OFF",70,"w"),T=[],E=-1,M=0,I=0,L=!1,w=!1,b=0,P=function(e,t){for(var r=[],a=0;a<t.length;a++){var n=t[a];n.condition&&!n.condition(e)||r.push(n)}return r},R=function(e){for(var t=m.children,r=0;r<T.length;r++)t=(t=P(e,t))[T[r]].children;return t},O=80,C=[],G=!1,D=function(e,t){for(var r=t||C.length,a=0;a<r;a++)C[a]=e};D(window.innerWidth,10);var N=!0,B=function(e,t,r){for(var a=!0,n=C.length,o=0;o<n;o++){var i=C[o];i=i+=1*(O*(e.step*t)+(1+o)/n*500*t),t>0?i<r?a=!1:i=r:i>r?a=!1:i=r,C[o]=i}return a},F=!1,V=!1,k=function(e){var t=e.keys;return t.UP?(I=-1,!0):t.DOWN?(I=1,!0):t.RETURN?(w=!0,G=!0,!0):!(!t.BACKSPACE&&!t.ESCAPE||0===T.length)&&(w=!1,0===T.length?(D(window.innerWidth),L=!L,F=!1,N=!0,G=!1,V=!1):V=!0,!0)},X=[],H=0,U=!1,W=!1;t.default=function(e){var t=e.game,o=e.stepMS,c=e.gl,d=e.SW,p=(e.SH,e.SX),f=e.SY;if(O=d/1800*80,!t.loadscreen)if(13===t.currentLevel&&(H+=o)>=5e4&&(H=5e4,U||(V=!0,W=!1,U=!0),F&&(F=!1)),(t.allKeyCodes.currentKeyCode===A.Keys.ESCAPE||-1!==t.allKeyCodes.currentKeyCode&&U)&&!t.skillTree.active&&0===t.skillTree.timer&&(t.state.menu.active?0===T.length&&H<5e4?H=5e4:(H=0,U=!1,F=!0,W=!1):(u.StateMachine(t.state).menuActivate(),H=0,U=!1,t.isPaused=!0)),U&&W){var h=s.default.create("ESC TO SHOW MENU",g.TEXT_SIZE_SMALL,"w");s.default.addGL(c,n.default(i.GLctx.Texture,c),h,.5*t.resW-.5*h.w,10,e)}else if(t.state.menu.active||!W){if(t.currentLevel>13&&L&&(t.isPaused=!0,L=!1),k(t.allKeyCodes.menu)&&(H=0,t.eventMap[a.GAME_EVENT.MENU_SELECT]={x:0,y:0}),!(t.currentLevel>13)||t.isPaused){X=[],[];var m,x=function(e){var t=R(e),r=[];if(t)for(var a=0;a<t.length;a++){var n=t[a];n.condition&&!n.condition(e)||r.push(n)}var o=M+I;return M=o>=0&&o<r.length?o:o<0?r.length-1:0,I=0,E>-1&&(r[E]&&r[E].children&&(T.push(E),M=0),E=-1),M<b&&(b=M),M+1>5+b&&(b=M-5+1),r}(e),P=Math.min(x.length,5+b);w&&(x[M].action&&x[M].action(e).then(function(e){for(var r in e.root&&(T=[],M=0),e.resetToTop&&(M=0),e.pop&&(M=T.pop(),G=!1,N=!1,F=!1,V=!1),t.menuSettings)"boolean"==typeof t.menuSettings[r]&&l.saveBool(r,t.menuSettings[r]);for(var r in t.menuSettings.debugItems)"boolean"==typeof t.menuSettings.debugItems[r]&&l.saveBool(r,t.menuSettings.debugItems[r])}),w=!1),G?B(m=e,-1,-m.game.resW)&&(D(m.game.resW),G=!1,N=!0,E=M):N?function(e){B(e,-1,0)&&(D(0),N=!1)}(e):F?function(e){B(e,1,0)&&(D(0),F=!1)}(e):V?function(e){B(e,1,e.game.resW)&&(D(-e.game.resW),V=!1,F=!0,T.pop())}(e):W=!0;for(var Y=t.zoomTX,q=[],z=1-Math.abs(C[0]/d),j=(.22*t.resH-5)*Y,K=(.25*t.resH+77*(P-b)+20)*Y,Z=K-j,Q=Z*z,J=K-(Z-Q),$=j+(Z-Q);$<J;$+=5)q.push(0,$,d,$);n.default(i.GLctx.Vertices,c),y.GlowCustomLayout({x:.5*t.resW+p,y:.2*t.resH*2+f},.88*z,q,e,.61,.61,.61,1,c.LINES);var ee=0,te=0,re=0;for($=b;$<P;$++){var ae=x[$],ne=M===$,oe=s.default.create(ae.label,70,"w");te=.25*t.resH+77*re;var ie=ae.enabled?ae.enabled(e)?[oe,S]:[oe,_]:[oe],se=s.default.measureBuffers(ie),Ae=.5*t.resW-.5*se+C[re+1];s.default.addListGL(c,n.default(ne?i.GLctx.TextureDist:i.GLctx.Texture,c),ie,Ae,te,e),oe.w>ee&&(ee=oe.w),re++}ee=1.1*ee+100;var ue=.5*t.resW-.5*ee;return b>0&&X.push(ue-.5*C[0]-30+.5*ee,.2*t.resH,ue-.5*C[0]+30+.5*ee,.2*t.resH,ue-.5*C[0]+.5*ee,.2*t.resH-20),r.line2Poly((ue-C[0])*Y,.22*t.resH*Y,(ue+ee-C[0])*Y,.22*t.resH*Y,X,8*Y),r.line2Poly((ue-C[Math.min(5,P)])*Y,(te+91)*Y,(ue+ee-C[Math.min(5,P)])*Y,(te+91)*Y,X,8*Y),P<x.length&&X.push(ue-.5*C[Math.min(5,P)]-30+.5*ee,te+91+20,ue-.5*C[Math.min(5,P)]+30+.5*ee,te+91+20,ue-.5*C[Math.min(5,P)]+.5*ee,te+91+40),n.default(i.GLctx.Vertices,c),v.drawColor(X,c,1,1,1,.5),"menu"}}else D(t.resW)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyTypeMode=void 0,function(e){e[e.TYPEING=0]="TYPEING",e[e.PLAYING=1]="PLAYING"}(t.KeyTypeMode||(t.KeyTypeMode={}))}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n,o=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))(function(n,o){function i(e){try{A(a.next(e))}catch(e){o(e)}}function s(e){try{A(a.throw(e))}catch(e){o(e)}}function A(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,s)}A((a=a.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,a,n,o,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){i.label=o[1];break}if(6===o[0]&&i.label<n[1]){i.label=n[1],n=o;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(o);break}n[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(33),r(39),r(49),r(135),r(225),r(3),r(53),r(135)],void 0===(n=function(e,t,r,a,n,A,u,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.singlePlayerItems=void 0;var p=function(){var e=A.getGameSaves(),n=t.singlePlayerItems.filter(function(e){return"LOAD/SAVE"===e.label})[0].children.filter(function(e){return"LOAD GAME"===e.label})[0];n.children=e.map(function(e){return{label:e,action:function(t){return d.loadGame(e,t),a.StateMachine(t.game.state).menuDisable(),t.game.eventMap[r.GAME_EVENT.START_GAME]={},t.game.isPaused=!1,Promise.resolve({root:!0})}}}),n.children.reverse(),n.children.unshift({label:A.getStorageUsedKB()+"/4000 KB USED"});var o=t.singlePlayerItems.filter(function(e){return"LOAD/SAVE"===e.label})[0].children.filter(function(e){return"DELETE SAVED GAME"===e.label})[0];o.children=e.map(function(e){return{label:e,action:function(t){return d.deleteSavedGame(t.game,e),p(),Promise.resolve({root:!0})}}}),o.children.reverse(),o.children.unshift({label:A.getStorageUsedKB()+"/4000 KB USED"})};setTimeout(function(){p()},10),t.singlePlayerItems=s(s([],u.createUserItems),[{label:"RESUME GAME",action:function(e){return a.StateMachine(e.game.state).menuDisable(),e.game.eventMap[r.GAME_EVENT.RESUME_GAME]={},e.game.isPaused=!1,Promise.resolve({root:!0})},condition:function(e){return e.game.isPaused&&!!c.getUser()}},{label:"CONTINUE",action:function(e){return e.game.targetLevel=20,a.StateMachine(e.game.state).menuDisable(),e.game.eventMap[r.GAME_EVENT.START_GAME]={},e.game.isPaused=!1,e.game.continueState=n.loadData("continue_stats"),Promise.resolve({root:!0})},condition:function(e){return!e.game.isPaused&&!!n.loadData("continue_stats")}},{label:"NEW GAME",action:function(e){return e.game.targetLevel=20,a.StateMachine(e.game.state).menuDisable(),e.game.eventMap[r.GAME_EVENT.START_GAME]={},e.game.isPaused=!1,e.game.continueState=null,Promise.resolve({root:!0})},condition:function(e){return!!c.getUser()}},{label:"LEADERBOARD",children:[{label:"LOADING..."}],action:function(e){return o(void 0,void 0,void 0,function(){var r;return i(this,function(a){switch(a.label){case 0:t.singlePlayerItems.filter(function(e){return"LEADERBOARD"===e.label})[0].children=[{label:"LOADING..."}],a.label=1;case 1:return a.trys.push([1,3,,4]),[4,c.getLadder()];case 2:return r=a.sent(),t.singlePlayerItems.filter(function(e){return"LEADERBOARD"===e.label})[0].children=r.map(function(e){return{label:e}}),[3,4];case 3:return a.sent(),e.game.notifications.push({life:l.NOTIFICATION_LIFE,type:70,message:"unable to load leaderboard.."}),[2,Promise.resolve({root:!0})];case 4:return[2,Promise.resolve({})]}})})},condition:function(){return c.getUserOnlineStatus()}},{label:"LOAD/SAVE",condition:function(e){return!!c.getUser()&&(n.loadData("gameSaves")||[]).length>0||e.game.currentLevel>13},children:[{label:"LOAD GAME",condition:function(){return A.getGameSaves().length>0},children:[]},{label:"SAVE GAME (CURRENTLY BROKEN)",action:function(e){return d.saveGame(e.game),p(),Promise.resolve({root:!0})},condition:function(e){return e.game.currentLevel>13}},{label:"DELETE SAVED GAME",condition:function(){return A.getGameSaves().length>0},children:[]}]}])}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unpack=t.pack=t.getDescriptor=void 0;var r={},a={},n=function(e,t){var r={};for(var a in e)r[a]=e[a];for(var a in t)r[a]=t[a];return r},o=function(e){s=e.keyset,r=n(r,e.packHash),a=n(a,function(e){var t={};for(var r in e)t[e[r]]=r;return t}(e.packHash))};t.getDescriptor=function(){return{keyset:s,packHash:r}};var i=("qwertuiopasdfghjklzcvbnm"+"qwertuiopasdfghjklzcvbnm".toUpperCase()).split(""),s=[0],A=function(e){if("x"===e||"y"===e)return r[e]=e,a[e]=e,e;var t=parseInt(e,10);if(t>=0)return t;if(r[e])return r[e];var n=function(){for(var e=i.length,t=s.map(function(e){return i[e]}).join(""),r=s.length;r>=0;r--){var a=s[r];if(a<e-1){s[r]=a+1,r!==s.length-1&&s[r+1]>0&&(s[r+1]=0);break}if(0===r){s.push(0);for(var n=0;n<s.length;n++)s[n]=0}}return t}();return r[e]=n,a[n]=e,n},u=function(e,t,r){for(var n in e){var o=e[n],i=a[n];if("object"==typeof o)if(o[a.isVector]){var s=t[i]={},A=a.x,l=a.y,c=a.id,d=a.isVector;s[A]=o[A],s[l]=o[l],s[c]=o[c],s[d]=o[d]}else if(Array.isArray(o))t[i]=[],u(o,t[i],r);else if(Array.isArray(t)){var p={};u(o,p,r),t.push(p)}else t[i]={},u(o,t[i],r);else Array.isArray(t)?t.push(o):t[i]=o}},l=function(e,t,r){for(var a in e){var n=e[a];if(null!=n){var o=A(a);if("object"==typeof n)if(n.isVector){var i=t[o]={};i[A("x")]=r?0|n.x:n.x,i[A("y")]=r?0|n.y:n.y,i[A("isVector")]=n.isVector,void 0!==n.id&&(i[A("id")]=n.id)}else Array.isArray(n)?(t[o]=[],l(n,t[o],r)):(t[o]={},l(n,t[o],r));else if(r&&"number"==typeof n){var s=n;(s+"").indexOf(".")>-1&&(s=.1*Math.round(10*s)),Array.isArray(t)?t.push(s):t[o]=s}else Array.isArray(t)?t.push(n):t[o]=n}}return t};t.pack=function(e,r,a){o(r);var n={};return l(e,n,a),{result:n,descriptor:t.getDescriptor()}};t.unpack=function(e,t,r){o(t);var a={};return u(e,a,r),a}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(4),r(1)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInsightShapeProximity=void 0;var n=new a.Vector(0,0),o=new a.Vector(0,0),i=new a.Vector(0,0),s=[n,o,i];t.getInsightShapeProximity=function(e,t){return n.set(0,0),o.set(0,0),i.set(0,0),o.setLength(1200),o.setAngle(t-.1*Math.PI),i.setLength(1200),i.setAngle(t+.1*Math.PI),n.add(e),o.add(e),i.add(e),s},t.default=function(e,n,o,i,s){for(var A=1.3*e.originalRadius,u=Number.MAX_VALUE,l=null,c=s&&t.getInsightShapeProximity(e.pos,e.angle),d=[],p=n.length,f=0;f<p;f++){var h=n[f];if(!(s&&h.radius<200)||r.fine(3,c,h.pos)){var v=r.distanceBetween(h,e)-h.radius;if(v<o&&(v<u&&(u=v,l=h),i)){var g=Math.atan2(h.pos.y-e.pos.y,h.pos.x-e.pos.x),y=new a.Vector(A,A);y.setAngle(g);var m=new a.Vector(Math.min(A+.03*(o-v),45),Math.min(A+.03*(o-v),45));m.setAngle(g),d.push({from:y,to:m})}}}return{closestDistance:u,closestItem:l,vectors:d}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerlinNoise3d=t.PerlinNoise2d=void 0;var r=function(){return function(e,t,r){this.dot2=function(e,t){return this.x*e+this.y*t},this.dot3=function(e,t,r){return this.x*e+this.y*t+this.z*r},this.x=e,this.y=t,this.z=r}}(),a=[new r(1,1,0),new r(-1,1,0),new r(1,-1,0),new r(-1,-1,0),new r(1,0,1),new r(-1,0,1),new r(1,0,-1),new r(-1,0,-1),new r(0,1,1),new r(0,-1,1),new r(0,1,-1),new r(0,-1,-1)],n=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],o=new Array(512),i=new Array(512);!function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var t=0;t<256;t++){var r;r=1&t?n[t]^255&e:n[t]^e>>8&255,o[t]=o[t+256]=r,i[t]=i[t+256]=a[r%12]}}(0);var s=function(e){return e*e*e*(e*(6*e-15)+10)},A=function(e,t,r){return(1-r)*e+r*t};t.PerlinNoise2d=function(e,t){var r=Math.floor(e),a=Math.floor(t);e-=r,t-=a;var n=i[(r&=255)+o[a&=255]].dot2(e,t),u=i[r+o[a+1]].dot2(e,t-1),l=i[r+1+o[a]].dot2(e-1,t),c=i[r+1+o[a+1]].dot2(e-1,t-1),d=s(e);return A(A(n,l,d),A(u,c,d),s(t))},t.PerlinNoise3d=function(e,t,r){var a=Math.floor(e),n=Math.floor(t),u=Math.floor(r);e-=a,t-=n,r-=u;var l=i[(a&=255)+o[(n&=255)+o[u&=255]]].dot3(e,t,r),c=i[a+o[n+o[u+1]]].dot3(e,t,r-1),d=i[a+o[n+1+o[u]]].dot3(e,t-1,r),p=i[a+o[n+1+o[u+1]]].dot3(e,t-1,r-1),f=i[a+1+o[n+o[u]]].dot3(e-1,t,r),h=i[a+1+o[n+o[u+1]]].dot3(e-1,t,r-1),v=i[a+1+o[n+1+o[u]]].dot3(e-1,t-1,r),g=i[a+1+o[n+1+o[u+1]]].dot3(e-1,t-1,r-1),y=s(e),m=s(t),x=s(r);return A(A(A(l,f,y),A(c,h,y),x),A(A(d,v,y),A(p,g,y),x),m)}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.faces=void 0;t.faces=[],t.faces[0]=["data:image/png;base64,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","data:image/png;base64,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","data:image/png;base64,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","data:image/png;base64,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","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABaCAMAAAB5TAO7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAwBQTFRFKv8AK5gAAF4E////AAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASips5QAAAAZ0Uk5T//////8As7+kvwAABalJREFUeNrsWduSIzsIkyDn/3+4QecB222nO5k4s/u24+qqXCbGAsTN/A9//8/wT8g/IX/r77H7gwTSgLSN820hOfI4mEQ9OpSf/c79cwximgSKJsnTwUjwTyJJJkE4CAbhYQDcefxBIclwecwLgUS6fhTDz2LXgabW8IAlPBY18w8gSbkDgYDQZQQCQJS//eABHwg5VAd1OOgO4tSXty2o3wmRjzMHAuHhQl+FBwCkXwgRIhyANywOD6Kv2Tb6VkgqaV4aLyyJuPhYl5LfeZfikYwnwp4SLrt9g0R6JMMXm6DbJFwRi71eaewtEoF3v0t7heQFFnvPcuSk835mCxdi4UqMb3eRCMRxc96O5PqL8Fsob5EQ6YGY7AEEwk6OrFhU/N9BItm9JdMCuMUi3lrlDRIZMFtk4LGAPdnkNOKm4QnkfNrG+fBwVBz2EQuWgL0hJAVkuBabRIvFgDxw8S8H4VtCCMCD4SeGepBw1Of9u47nuI1hr4W4mnXHWb1FYRjU3y08AQxxw5bXQsKA8Gx5IzqW4sLIKQsOgA3bh0Ky/tfCKx9GVC6xlh/vOQ/wRl8veXLgARy+RIt29tIgbjkv05UqL5FYrxwgWFuCEKERqS482Q2QqX56Ii2RVgvWK9QXPNFVX6+RFBchCG3vIcFgZhXB4tnHEjtCoCQ8CSI7lnr6KrmtZukPc8Mmpd+wZpMrFoxP0DNk6TcvUOxNNum11myTgQUdHwha97i2ZXwqxNh8a7HJWIClJRwIFwHNO/uGuloNjwnHsugVYzKqrsSLGux9tRJVmyz2yGEPD8jqm54r74W8b+cegoeDDgcYsJxXK+fKZlyiPHcqSCEgVyjk4Que/qo+b1gGX/S5kIPVs1laBk7un37lzW4NyxqTP0TSeNL5cCJIgxULIcCV5qdNYktI6QJpZx1/coZwBRAMKC3jtInHTvfLcKXJUh4OC8iZlgamJUUwKYFgmijyPDo3+pMg0ugOT8BttQuTSGDCeu/D9tPAImCplo3U7dIe9VyT9Tpe7Ptjp+VGSyEYjCWCTXy58mS3nUsNFhimzLVG4+pXWi2lrbAC2FPsOp9LJPPgqPC4hyRcWDPvpCnM+aXQloftIYEjwRXHbI3mW8X/fBgBHGDmzpSIItW4UWvwpD5DvZZJ3nhC0cJ2kGTQ+Jzb13zf+R/ZKjbuurAhUqs3rR7WNCdX24zgU8P1sxBrWX4598VGYLB2TtM2GWHsLL/jyXhdPCoTYRcJgAdn/Z+5pN7n/H5UEbYrBJpzooNV02mpxDqSYwxdd4dqwdMGqikRrraBAYcT3yExaGL5JY6NuAxkk/ENkud6eI7EedoJ6Gnr2EfyWOvhmR+lt3oMGqlxK6wMLKo9JaNMlmY0GmEVYSBjkveF6ocj28zz5IAq9/cGsevPOU1GvrgQOHOIAwEztWIhYFmxbRkQbeaTruPO7EB46xy6DAi2tj6HvrkQKM7L0iSHydLIsLKIjDQLii/O/umtA5Emq/qK4TKlXMm0dAMBWegE85W6AAO7XeTBIFxpafRenzmYfQb77dXG42R9m28PbwPCAbka0eXfCoHd5flJBnuHDfIX101P3W9ao0O4Qnme/+M+/sUE155yZJtRhSVSTOC4GRJuCMnea+WUJ6GQA57WbGH5GyGZ0eYs9lynRMWChIC8GUJy46r8gEf5LSbbM6xL02jNv7eJeXjQOdcoINBrmWACCcbxm8vMNtfmQOHhEVMPWZnELH8hpCKk94LVibqrG7He+o7Hr3jS4nCfP0ozZ4R+h2b5PZKBpc1SBZ/qscryN4PuLTI2LKYQVDPNpwnSNCGeuocPq5VZX/nMlXM+2WbWvev4PJ8kexEy1V48+5WpawGQU+YiWpfyI5LDelWQuM7vlp5lKVMSELxuBX9ifA4ZZ8Vyamd8NbS13s+ybmH+HwDXgeUrFG5EbgAAAABJRU5ErkJggg==","data:image/png;base64,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","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABaCAMAAAB5TAO7AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAwBQTFRFKv8AK5gAAF4E////AAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASips5QAAAAZ0Uk5T//////8As7+kvwAABcNJREFUeNrcmduSwzgIRA/g/f8fNrAPSLJ8mSTKzL7suFRxxhWhVkODsPzDf/+n/F+MbF/8JlYXt2xk19AAQmP7T4wEBKKBZSDsoPrHnEQEgrmAC+Zmhuz7nxoJRCNJ0hS3xMEwMt7+VD6Nk91OX91qAPj2N0gia0LHPT29cAROgO1/gSSP9XvdmJvP0F6D0U9QNAy0mU1xc3MccCCw/B2SJG4rcevXNNMvkCSZjDXXcEvKz5zCA6+8TN/akDAwxnBzc0EQxI0DjfiXRjIkThhwc0tzc9LKjwcWja84SYT97EcnRq5PfiBG3wQ5MWYaeMwtSTs8DPz7OEmBvK32B+96AeUVkkzYj3iYPi3JS6w0TLmKxA2S+2prduwJ4yMUfa0G0ZTEz5yQaIuS4//FYqwhSd9IHpCEelOv67OURygvkORG+GW9jrtrw3HhpMlcrCERQvwpSu4qPKbb7QGKvhT4aBw33+qepeVbT/GxrblwCGjTptKodgmV67ueXTNPrhip/W0qNaIicXRGdsJTzxe2q/bWMI8R34a0URiNM5569rkRy8ZFcTBivOOZlOuyNP/cSHZOhNAgNFrWLTw8a9djCfuSkxAnSTQUDQ3VlhHJ4sVuvKwKpOyChSAUjo6nXz1azrzssaZdBq7FyTGzhtIuTfLmX6r3oNfXpXjt/4Sh7vuloWXn4EbyvmevtsvLjyZOuF2HnV6DPbjXq+3aNowLJ9MFEa1q6YrWJrSlQmLH3PJgei7zQqOYzzqvnOaWhZJoqzgRBLnyUfqVZCgpGOanaFmouxh1iRATL9FUoKFsitD9TFeM1J57s9T9jOj+hiBWrElTLeNeT7wx0rSrr5sRK6EUJ3WOUNJm/Y0lTtw0NFSaH01x33OKg3kQPuuvLnHSfKuyVtoc926pI5IqW14PTZ8ZicqDZgmGuEx8WAa4IR4aKlMmkTUj28iDiZOac5wHUVxoaJw5WTwEGaG4RaRl9yvGrgmRjSF/yokfn7Rq/7VmQw8rKDlFjU/RKGtGBNFQRizGocnMGiA/1MYfGfGK6iOrzLllunJk/Fw2ovZDXrzkFaLFDKJx9YB3R+yIrsKlwcd9fTY9HkwpkG5nTszeUCKeJKkhUaPf16e0ezRNVAVILF3XvMt0ZmOKk/O923SQV10jXr38a/IrTrm+PTMXHafZJYEE2FrWONYdFzTN+xoS8VWBLOxzHpEnLJVPtBx4Yx0JhE8R8hAvLfbzx2k/MaI25RFBIo7cMtViUqWHfCErgObBRSRuSpI658jCArQIyWUjrU87avt89jXR6i98hwQl41YPX7+RkFnz7V8hOekWXGvj5mfdBvoFko2TLx1ZS2BSgmGDkC/6wtHXb/eu28Bmwwb79k1fuK03c8ozPmxUDSY6n2zWjXQOLHoPrc6LoxYPm5u2F94/RbJNWd1HJzVDQ732yyXmNS3lk0OMex5JQ1JT3TJIFZVUVZRgZJGvtgsmBU7PXtGXr1oxNDLlLct/igQhUDm8ODU0+hrd0BQhpRxYvn1/ojrx3PKITX3EyC7xuVgL3+L+or31wPAMJJoR0a+N7NjMjIaiDuDqrgFpza/iF++0jEsNRqhX76PmrlqZ/Tbnx8RDaPbMgtQITVFH65EIAin6CySEuFXlMnKLmDhNgy3qdL/Ug7wnyMTNZdJj8Z4hUdwUBYnfcNI6Q/1MX+ddnyuv3u6Kr4xEU+LOdLT+IPPJq9dbudos6N5buiKEgkXrcVVHZFRe1XaX4xeL3qUVi5IaGpJpGRIidB8LTU0FhAwBJGW1uNOuXkMjL2eunpWnWnt+KfxB+m02IricTY7zyXEveSjqeMOpn1Dedva89luf5fJqI483nG+QhI417nrucp7HHQmM9xz6qQ2u58XzaEhmG2R/w/kSSSgjL53qu2sPrw275kQBZ3uJ5GQDbjjms68e+fOMxSzzJyRHedY9/tp5vo6hjHl7q/DvABqVHgScUraIAAAAAElFTkSuQmCC","data:image/png;base64,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","data:image/png;base64,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","data:image/png;base64,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","data:image/png;base64,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"],t.faces[1]=["data:image/png;base64,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","data:image/png;base64,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","data:image/png;base64,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"]}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(35),r(104)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateRockets=void 0;t.clientCreateRockets=function(e){for(var t=[],n=e.game.rockets,o=n.length,i=0;i<o;i++){var s=n[i],A=r.readFromGH(s.type,s.guid);A||(A=a.createRocketClient({angle:s.angle,life:s.life,pos:s.pos,vel:s.vel,ownerType:s.type,ownerGuid:s.ownerGuid,target:s.target}),r.writeGH(s.type,s.guid,A)),A.netpos=s.pos,A.netvel=s.vel,A.netangle=s.angle,t.push(A)}return t}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(35),r(36)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateSpiders=void 0;t.clientCreateSpiders=function(e,t){for(var n=[],o=e.game.spaceSpiders,i=o.length,s=0;s<i;s++){var A=o[s],u=r.readFromGH(A.type,A.guid);u||(u=a.default(t,1,A.pos.x,A.pos.y,A.radius,A.restPos,{life:A.life})[0],r.writeGH(A.type,A.guid,u)),u.netpos=A.pos,u.netangle=A.angle,n.push(u)}return n}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(35),r(19)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateAsteroids=void 0;t.clientCreateAsteroids=function(e){for(var t=[],n=e.game.asteroids,o=0;o<n.length;o++){var i=n[o],s=r.readFromGH(4,i.guid);s||(s=a.createSingleAsteroid(i.radius,i.pos,i.vel,{angleVel:0,angle:i.angle,type:i.type}),r.writeGH(4,i.guid,s)),s.netangle=i.angle,s.netpos=i.pos,s.netvel=i.vel,s.life=i.life,t.push(s)}return t}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(35),r(79),r(10)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateParasites=void 0;t.clientCreateParasites=function(e){for(var t=[],o=e.game.parasites,i=0;i<o.length;i++){var s=o[i],A=r.readFromGH(38,s.guid);if(A||(A=a.createParasite(s.pos.x,s.pos.y,s.numSegments,s.restPos.x,s.restPos.y,s.life),r.writeGH(38,s.guid,A),n.LOG_GL("PARASITE CREATED "+s.guid)),s.target){var u=r.readFromGH(49,s.target.targetGuid)||r.readFromGH(44,s.target.targetGuid)||r.readFromGH(1,s.target.targetGuid);u&&(A.target={ship:u,idxA:s.target.idxA,idxB:s.target.idxB,valueBetween:s.target.valueBetween})}else A.target&&(A.target=null);A.netpos=s.pos,t.push(A)}return t}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(35),r(41),r(10)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateSnakes=void 0;t.clientCreateSnakes=function(e,t){for(var o=[],i=e.game.spaceSnakes,s=0;s<i.length;s++){var A=i[s],u=r.readFromGH(8,A.guid);u||(u=a.default(t,1,A.segments[0].pos.x,A.segments[0].pos.y,A.size,A.restPos)[0],r.writeGH(8,A.guid,u),n.LOG_GL("SNAKE CREATED "+A.guid)),o.push(u)}return o}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(35),r(52)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateRocks=void 0;t.clientCreateRocks=function(e){for(var t=[],n=e.game.rockformation,o=0;o<n.length;o++){var i=n[o],s=r.readFromGH(11,i.guid);s||(s=a.createRFsingle(i.pos,i.radius),r.writeGH(11,i.guid,s)),t.push(s)}return t}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(35),r(34),r(10)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateSquids=void 0;t.clientCreateSquids=function(e,t){for(var o=[],i=e.game.spaceSquids,s=0;s<i.length;s++){var A=i[s],u=r.readFromGH(9,A.guid);u||(u=a.default(t,1,A.pos.x,A.pos.y,A.radius,A.restPos,{life:A.life})[0],n.LOG_GL("SQUID CREATED "+A.guid),r.writeGH(9,A.guid,u)),u.netpos=A.pos,u.netangle=A.angle,u.stunned=A.stunned,o.push(u)}return o}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(35),r(1),r(50),r(10),r(140)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateSpaceports=void 0;t.clientCreateSpaceports=function(e,t){for(var s=[],A=e.game.spacePorts,u=0;u<A.length;u++){var l=A[u],c=r.readFromGH(3,l.guid);if(!c){c=n.default(t,l.radius,new a.Vector(l.pos.x,l.pos.y),l.name,l.reparations,l.cannons),o.LOG_GL("SPACEPORT CREATED "+l.guid),r.writeGH(3,l.guid,c);for(var d=0;d<c.cannons.length;d++){var p=c.cannons[d];l.cannons[d]&&p.guid===l.cannons[d].guid?r.writeGH(22,l.cannons[d].guid,c.cannons[d]):(c.cannons.splice(d,1),d--)}}var f={},h={},v=Math.max(c.cannons.length,l.cannons.length);for(d=0;d<v;d++)(p=c.cannons[d])&&(f[p.guid]=p),(y=l.cannons[d])&&(h[y.guid]=y);for(var g in f){p=f[g];var y=h[g];p&&(y?(p.life=y.life,p.angle=y.angle,p.isCannon=y.isCannon):(p.life=0,p.remove=!0,c.cannons=i.cleanList(c.cannons,t)))}s.push(c)}return s}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(80),r(68),r(71),r(45),r(1),r(79),r(215),r(24),r(14),r(66),r(141),r(65)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=new i.Vector(0,0);t.default=function(e,t){t.SX,t.SY,t.SW,t.SH;var h=t.game;if(!t.game.levelEditor){var v=!0,g=t.IS_MULTIPLAYER&&t.IS_SERVER,y=h.screen.rectSS_400;switch(e.type){case 30:case 32:case 31:e.life<1&&l.addForceExplosion(t.game,e.pos.x,e.pos.y,70,1,null);break;case 11:case 4:var m=e;r.removeAsteroid(m,t),g&&t.game.removedAsteroids.push(m),t.game.proceduralDestroyedData.push(m);break;case 35:for(var x=e,S=o.getSpacesnakeFromSegment(x.guid),_=0;_<S.segments.length;_++){(T=S.segments[_]).remove=!0}if(!S.remove){if(!g){o.createPartsFromSpaceSnake(t,S);for(_=0;_<S.segments.length;_++){var T=S.segments[_];if(u.createDust(T.pos,T.radius,T.radius,t),S.infected)for(var E=Math.ceil(4*Math.random()),M=0;M<E;M++)t.game.parasites.push(s.createParasite(T.pos.x+(Math.random()-.5)*T.radius,T.pos.y+(Math.random()-.5)*T.radius,32*Math.random()+8,t.WW*Math.random(),t.WH*Math.random()))}}S.remove=!0}break;case 10:var I=e;if(!g){if(y.intersectsPoint(I.pos)){for(_=0;_<20;_++)p.createFragmentBlack(I.pos,t,[new i.Vector(0,0),new i.Vector(6+6*Math.random(),0),new i.Vector(0,6+6*Math.random())],I.vel.x*Math.random(),I.vel.y*Math.random(),Math.random());u.createDust(I.pos,I.radius,I.radius,t,I.vel.x*Math.random(),I.vel.y*Math.random())}if(I.infected)for(E=Math.ceil(Math.random()*I.radius*.5)+4,M=0;M<E;M++)t.game.parasites.push(s.createParasite(I.pos.x+(Math.random()-.5)*I.radius,I.pos.y+(Math.random()-.5)*I.radius,32*Math.random()+8,t.WW*Math.random(),t.WH*Math.random()));for(_=0;_<I.legs.length;_++)for(var L=I.legs[_],w=0;w<L.bones.length;w++){var b=L.bones[w],P=b.length;f.set(P,0),f.setAngle(b.angle),p.createFragmentBlack(b.pos,t,[new i.Vector(0,-3),new i.Vector(0,3),new i.Vector(P,0)],I.vel.x*Math.random(),I.vel.y*Math.random(),b.angle)}}break;case 9:if(!g){var R=e;if(y.intersectsPoint(R.pos)){var O=3*R.radius,C=new i.Vector(0,0);for(_=0;_<O;_++)C.setLength(Math.random()*R.radius*.7),C.setAngle(Math.random()*Math.PI*2),p.createFragmentBlack({x:R.pos.x+C.x,y:R.pos.y+C.y},t,[new i.Vector(0,-6),new i.Vector(3*Math.random()+5,0),new i.Vector(0,4*Math.random()+4)],R.vel.x*Math.random(),R.vel.y*Math.random(),Math.random()*Math.PI*2);for(_=0;_<R.tentacles.length;_++){var G=R.tentacles[_];for(w=0;w<G.arm.length;w++){var D=G.arm[w];D.centerX;for(var N=0;N<3;N++)p.createFragmentBlack({x:D.centerX+R.pos.x+(Math.random()-5),y:D.centerY+R.pos.y+(Math.random()-5)},t,[new i.Vector(0,-10),new i.Vector(0,0),new i.Vector(Math.min(9,D.getLength()),0)],R.vel.x*Math.random(),R.vel.y*Math.random(),Math.random()*Math.PI*2)}}}if(R.infected)for(E=Math.ceil(Math.random()*R.radius*.25)+9,M=0;M<E;M++)t.game.parasites.push(s.createParasite(R.pos.x+(Math.random()-.5)*R.radius,R.pos.y+(Math.random()-.5)*R.radius,32*Math.random()+8,t.WW*Math.random(),t.WH*Math.random()))}break;case 22:l.addForceExplosion(t.game,e.pos.x,e.pos.y,510,4,null),g||(n.default(e,t,0),u.createDust(e.pos,e.radius,e.radius,t)),e.remove=!0,t.game.proceduralDestroyedData.push(e);break;case 0:var B=e;if(!g){y.intersectsPoint(B.pos)&&(d.createFragmentsFromDestroyer(t,B),u.createDust(B.pos,.4*B.radius,1,t,B.vel.x,B.vel.y));var F=function(e){var r=B.cannons[e];c.scheduleOnce(B.guid+"c"+e,function(){l.addForceExplosion(t.game,r.pos.x+B.vel.x*(200+150*e)*.05,r.pos.y+B.vel.y*(200+150*e)*.05,90,4,null)},200+150*e)};for(_=0;_<B.cannons.length;_++)F(_);c.scheduleOnce(B.guid+"H",function(){l.addForceExplosion(t.game,B.pos.x,B.pos.y,510,8,null)},200+150*B.cannons.length),c.scheduleOnce(B.guid+"m",function(){l.addForceExplosion(t.game,B.comp[0].vertex[0].x,B.comp[0].vertex[0].y,510,8,null)},1600)}break;case 44:case 49:case 2:case 1:var V=e;l.addForceExplosion(t.game,e.pos.x,e.pos.y,90,2,null);var k=a.GetPlayerByGuidOrNull(V.killedByGuid,t);g||y.intersectsPoint(V.pos)&&(A.default(V,t),d.createFragmentsFromDestroyer(t,V)),k?(k.kills++,g&&t.game.networkMessages.push({msg:((k.name||"UNKNOWN")+" KILLED "+(V.name||"UNKNOWN")).toUpperCase(),level:1})):g&&t.game.networkMessages.push({msg:(V.name||"UNKNOWN")+" SACRIFICED HIMSELF",level:1}),g&&t.game.removedShips.push(V),V.deaths++;break;case 43:l.addForceExplosion(t.game,e.pos.x,e.pos.y,90,2,null);break;case 24:l.addForceExplosion(t.game,e.pos.x,e.pos.y,750,16,e.damage);break;case 42:l.addForceExplosion(t.game,e.pos.x,e.pos.y,510,8,e.damage);break;case 41:l.addForceExplosion(t.game,e.pos.x,e.pos.y,250,4,e.damage);break;default:v=!1}v&&g&&t.game.networkMessages.push({msg:"remove",remove:{type:e.type,guid:e.guid},level:1})}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(216)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){r.default(t,e)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(91),r(1),r(4),r(6),r(91),r(16)],void 0===(n=function(e,t,r,a,n,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=function(e,t,r){var u=function(e,t){for(var r={},a=[],n=[],o=0;o<t.length;o++)void 0===r[t[o]]?(r[t[o]]=a.length,n.push(a.length),a.push(e[t[o]].clone())):n.push(r[t[o]]);return{vectors:a,indices:n}}(t,r),l=null;switch(e.type){case 44:l=33;break;case 1:l=45;break;case 49:l=47;break;case 2:l=46;break;default:l=45}var c=function(e){for(var t=e.length,r=[],a=[],n=0;n<t;n++)r.push(e[n].x),a.push(e[n].y);var o=Math.max.apply(Math,r),i=Math.min.apply(Math,r),s=Math.max.apply(Math,a),A=Math.min.apply(Math,a);return{offsetX:.5*(o-i)+i,offsetY:.5*(s-A)+A,radius:.5*Math.max(o-i,s-A)}}(u.vectors),d=new a.Vector(-c.offsetX,-c.offsetY);return i.rotateVector(d,e.angle,d),o(o({fromType:e.type,pos:new a.Vector(e.pos.x+d.x,e.pos.y+d.y),vel:new a.Vector(e.vel.x,e.vel.y),life:150,radius:c.radius,guid:n.getGuid(),type:l,collType:25,angle:e.angle,width:null,edgeA:null,edgeB:null,rotatedEdgeA:null,rotatedEdgeB:null,colorFade:255,complexPartIndices:u.indices,complexPartVectors:s.offsetVectorArray(u.vectors,-c.offsetX,-c.offsetY),angleVel:.01*Math.random()-.005},A.setImovableDefaults(null)),{armor:null})};t.default=function(e,t){for(var a,n=r.default(49===t.type?1:2,!0),o=n.leftWing,i=n.rightWing,s=n.hood,A=n.roof,l=n.baseWingIndexes,c=n.endWingIndexes,d=n.hoodIndexes,p=n.roofIndexes,f=t.vel.getAngle(),h=t.vel,v=[u(t,o,l),u(t,i,l),u(t,s,d),u(t,A,p),u(t,o,c),u(t,i,c)],g=0;g<v.length;g++){var y=Math.random()-.5,m=(Math.random(),v[g]);m.vel.set(h.x,h.y),m.vel.setAngle(f+.1*y),m.angleVel=.01*Math.random()-.005}(a=e.game.asteroidParts).push.apply(a,v)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r},s=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(35),r(11),r(1)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clientCreateShips=void 0;var A=function(e,t){e.guid,e.type,e.pos,e.vel,e.angle;var r=e.thrust,a=i(e,["guid","type","pos","vel","angle","thrust"]);for(var n in t.netpos=e.pos,t.netvel=e.vel,t.netangle=e.angle,r&&t.thrust.setFromVec(r),a)t[n]=a[n]};t.clientCreateShips=function(e,t,r){if(44===r){var a=l(e,t);return a?s([a],u(e.game.ships,r,t)):u(e.game.ships,r,t)}if(1===r)return u(e.game.enemies,r,t);if(49===r)return u(e.game.drones,r,t);throw new Error("unknown type @ createClient ship + "+r)};var u=function(e,t,s){for(var u=[],l=0;l<e.length;l++){var c=e[l],d=r.readFromGH(t,c.guid),p=(c.pos,c.vel,c.angle,i(c,["pos","vel","angle"]));d||(d=a.createShip(s,o(o({},p),{pos:new n.Vector(c.pos.x,c.pos.y),vel:new n.Vector(c.vel.x,c.vel.y),angle:c.angle,guid:c.guid})),r.writeGH(t,c.guid,d)),A(c,d),u.push(d)}return u},l=function(e,t){var s=e.game.playerShip;if(!s)return null;var u=r.readFromGH(44,s.guid),l=(s.pos,s.vel,s.angle,s.thrust,i(s,["pos","vel","angle","thrust"]));return u||(u=a.createShip(t,o(o({},l),{pos:new n.Vector(s.pos.x,s.pos.y),vel:new n.Vector(s.vel.x,s.vel.y),thrust:new n.Vector(s.thrust.x,s.thrust.y),angle:s.angle,guid:s.guid})),r.writeGH(44,s.guid,u)),u.SW=e.SW,u.SH=e.SH,u.netSX=e.SX,u.netSY=e.SY,A(s,u),u}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(19),r(50),r(1),r(11),r(52),r(6),r(36),r(34),r(4),r(7),r(5),r(81),r(9),r(11),r(82),r(146),r(3),r(83)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f,h,v,g,y,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exist=void 0;t.exist=function(e,t){return e.filter(function(e){return e.seedKey===t}).length>0};var x=function(e,t,r,a){var n=c.rect_pool_pop(r-.5*t,a-.5*t,t,t),o=e.queryInt(n).length>0;return c.rect_pool_put(n),o},S=function(e,t,r,a,n,o){var i=c.rect_pool_pop(r-.5*t,a-.5*t,t,t),s=e.queryInt(i);c.rect_pool_put(i);var A={};if(void 0!==n&&(A[n]=!0),void 0!==o)for(var u=0;u<o.length;u++)A[o[u]]=!0;var l=s.length;for(u=0;u<l;u++)if(A[s[u].type])return!0;return!1};t.default=function(e,t,c,_,T,E,M){var I,L,w,b,P,R=t.game,O={seedKey:e,procedurallyCreated:!0,pos:new n.Vector(_,T),opos:{x:_,y:T}},C=Math.floor(18*c());switch(C){case 0:if(c()>.99)return x(E,300,_,T)?void M.add(e,!0):(R.destroyers.push(o.createDestroyer(t,O)),C);break;case 1:if(c()>.97)return x(E,50,_,T)?void M.add(e,!0):((I=R.enemies).push.apply(I,o.createEnemies(t,1,O)),C);break;case 2:if(c()>.98&&R.npcs.length<30)return x(E,50,_,T)?void M.add(e,!0):((L=R.npcs).push.apply(L,h.createNPCs(t,1,O,-1)),C);break;case 24:case 25:case 28:case 29:case 30:case 32:case 33:break;case 3:if(c()>.98){if(x(E,2e3,_,T))return void M.add(e,!0);if(S(E,4500,_,T,-1,[12,14,13,15,16]))return void M.add(e,!0);var G=c;G(),G();var D=v.getSpacePortClassType(G),N=a.default(t,D.size,new n.Vector(_,T),D.name,{life:Math.floor(.2*y.SHIP_MAX_LIFE+G()*y.SHIP_MAX_LIFE*.8)},null,O);return R.spacePorts.push(N),E.insert(N,0),d.getQuadTreesObj().query([4],N).map(function(e){return e.radius>30&&(e.remove=!0)}),C}break;case 5:if(c()>.996){var B=2600*c()+256;if(x(E,2*B,_,T))return void M.add(e,!0);var F=r.createAsteroidBelt(c,_,T,B,2*Math.PI*c(),Math.PI*c()*.3,20+40*c(),90+120*c(),100+120*c());return E.insert(g.beltAsTreeItem(F.belt),0),t.game.asteroidBelts.push(F.belt),(w=t.game.asteroids).push.apply(w,F.asteroids),C}break;case 4:var V=Math.floor(300*c()+20);if(S(E,2.2*V,_,T,null,[6,3]))return;N=r.createSingleAsteroid(V,{x:_,y:T},{x:c()-.5,y:c()-.5},O);return R.asteroids.push(N),C;case 23:break;case 7:if(c()>.995){if(x(E,2800,_,T))return;if(S(E,4500,_,T,-1,[12,14,13,15,16]))return void M.add(e,!0);var k=i.default(c,_,T,200);return(b=R.rockFormations).push.apply(b,k.rockFormations),R.rockFormationSystemRadius.push(k.rfSystem),k.rfSystem.seedKey=e,k.rfSystem.procedurallyCreated=!0,E.insert(k.rfSystem,0),C}break;case 8:break;case 9:if(c()>.994){if(x(E,300,_,T))return;(K=u.default(t,1,_,T,60*c()+140,{x:_,y:T})[0]).seedKey=e,K.procedurallyCreated=!0,R.spaceSquids.push(K)}break;case 10:if(c()>.994){if(x(E,300,_,T))return;var X=A.default(t,1,_,T,8+8*c(),{x:_,y:T})[0];return X.seedKey=e,X.procedurallyCreated=!0,R.spaceSpiders.push(X),C}break;case 6:if(c()>.997&&0===R.ancients.length){if(x(E,7400,_,T))return void M.add(e,!0);if(S(E,7400,_,T,-1,[12,14,13,15,16]))return void M.add(e,!0);var H=f.default(t);if(l.distanceBetweenVectors(H.pos,{x:_,y:T})<4e3)return;for(var U=p.CreateAncient(c,12,c()*Math.PI,_,T,e),W=d.getQuadTreesObj().queryTreesVec([0,4],{x:_,y:T},3700,3700,!1),Y=W.length,q=0;q<Y;q++){var z=W[q];z.remove=!0,M.add(z.seedKey,!0)}return R.ancients.push(U.ancient),(P=R.ancientBlocks).push.apply(P,U.blocks),p.populateAncientRooms(t,U.ancient),E.insert(g.ancientAsTreeItem(U.ancient),0),C}break;case 22:case 11:case 19:case 20:case 35:case 36:case 37:case 38:break;case 15:if(c()>.991){if(x(E,1200,_,T))return void M.add(e,!0);if(S(E,4500,_,T,-1,[12,14,13,15,16]))return void M.add(e,!0);var j={fire:!0,guid:l.getGuid(),radius:100+600*c()+(c()>.2?100*c():20*c()),x:_,y:T,seedKey:e,type:15};return R.spaceFog.push(j),E.insert(g.spaceFogAsTreeItem(j),0),C}break;case 16:if(c()>.988){if(x(E,1200,_,T))return void M.add(e,!0);if(S(E,4500,_,T,-1,[12,14,13,15,16]))return void M.add(e,!0);j={fire:!1,guid:l.getGuid(),radius:100+600*c()+(c()>.2?100*c():20*c()),x:_,y:T,seedKey:e,type:16};if(R.spaceFog.push(j),c()>.9){var K=u.default(t,1,_,T,80*c()+80,{x:_,y:T})[0];R.spaceSquids.push(K)}return E.insert(g.spaceFogAsTreeItem(j),0),C}break;case 12:if(c()>.99){if(x(E,1200,_,T))return void M.add(e,!0);if(S(E,4500,_,T,-1,[12,14,13,15,16]))return void M.add(e,!0);var Z=m.createAnomaly(t,_,T,c()>.92,c()>.9?4:2,510,!0,!0,e);return E.insert(g.anomalyAsTreeItem(Z,t),0),C}break;case 13:break;case 14:if(c()>.993){if(x(E,1200,_,T))return void M.add(e,!0);if(S(E,4500,_,T,-1,[12,14,13,15,16]))return void M.add(e,!0);var Q=m.createAnomalyPair(t,_,T,c()*s.MAX_INT_RANGES.MAX_INT_32_QUART*(c()>.5?1:-1),c()*s.MAX_INT_RANGES.MAX_INT_32_QUART*(c()>.5?1:-1),e),J=g.anomalyPairAsTreeItem(Q,t);return E.insert(J[0],0),E.insert(J[1],0),C}break;case 40:break;default:return}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(27),r(4),r(16),r(1),r(19)],void 0===(n=function(e,t,r,a,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAncientBlockSingle=void 0;t.createAncientBlockSingle=function(e,t,A,u,l,c){return void 0===A&&(A=8),void 0===u&&(u=0),void 0===l&&(l=!1),void 0===c&&(c={}),o(o(o({},n.setImovableDefaults(r.BallCreator(t.x,t.y,e,0))),{specular:.1,centerStone:l,isLV426:!1,netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},type:21,collType:23,sleepingAABB:!0,guid:a.getGuid(),staticPos:{x:t.x,y:t.y},minerals:0,radius:e,vel:new i.Vector(0,0),sides:A,angle:u,angleVel:.01*(1-2*Math.random()),life:9999999,oLife:9999999,acc:new i.Vector(0,0),opos:{x:t.x,y:t.y},armor:{type:6,value:1},resources:s.createDefaultResources(0,21)}),c)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=void 0;var r=function(){function e(){this._hash={},this._sortedHash=[]}return e.prototype.add=function(e,t){this._hash[e]=t,this._sortedHash.push(e)},e.prototype.get=function(e){return this._hash[e]},e.prototype.remove=function(e){delete this._hash[e]},e.prototype.clear=function(){this._hash={},this._sortedHash=[]},e.prototype.size=function(){return this._sortedHash.length},e.prototype.hashSize=function(){var e=0;for(var t in this._hash)e++;return e},e.prototype.housekeeping=function(e,t){if(void 0===e&&(e=4e3),void 0===t&&(t=.1*e),this._sortedHash.length>e){for(var r=this._sortedHash.length-(e-t),a=this._sortedHash.splice(r,this._sortedHash.length),n=0;n<r;n++)delete this._hash[this._sortedHash[n]];this._sortedHash=a}},e}();t.Hash=r}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkDiffed=void 0;t.checkDiffed=function(e){return!e.seedKey||!(!e.opos||!(Math.abs(e.opos.x-e.opos.x)>Math.max(.1*e.radius,30)||Math.abs(e.opos.y-e.opos.y)>Math.max(.1*e.radius,30)||e.life!==e.oLife))}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(19),r(1),r(11)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var o,i={},s=t.x,A=t.y;switch(i.pos=new a.Vector(t.x,t.y),i.life=t.life,i.seedKey=t.oSeedK,i.opos={x:t.ox,y:t.oy},i.oLife=t.oLife,i.radius=t.radius,t.type){case 0:e.game.destroyers.push(n.createDestroyer(e,i));break;case 1:(o=e.game.enemies).push.apply(o,n.createEnemies(e,1,i));break;case 2:case 24:case 25:case 28:case 29:case 30:case 32:case 33:case 3:break;case 4:var u=r.createSingleAsteroid(t.radius,{x:s,y:A},{x:.1,y:.1},i);e.game.asteroids.push(u);break;case 23:case 7:case 8:case 9:case 10:case 22:case 11:case 19:case 20:case 35:case 36:case 37:case 38:case 12:case 13:case 14:case 40:case 41:case 42:case 43:break;default:return}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(5)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createExistingSeedHash=void 0;t.createExistingSeedHash=function(e){var t={};r.___getQtreeList().map(function(e){for(var r=e.references.length,a=0;a<r;a++){var n=e.references[a];if(6===n.shape||3===n.shape)break;n.procedurallyCreated&&(t[n.seedKey]=!0)}});for(var a=e.game.anomlies,n=a.length,o=0;o<n;o++){var i=a[o];t[i.seedKey]=!0}var s=e.game.anomalyPairs;n=s.length;for(o=0;o<n;o++){var A=s[o];t[A.in.seedKey]=!0,t[A.out.seedKey]=!0}var u=e.game.asteroidBelts;n=u.length;for(o=0;o<n;o++){var l=u[o];t[l.seedkey]=!0}var c=e.game.ancients;n=c.length;for(o=0;o<n;o++){var d=c[o];t[d.seedKey]=!0}return t}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(90),r(42),r(72)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSkillTreeLayout=t.getSkillTree=t.resetSkillTree=void 0;var i={type:14,description:"",name:"",aquired:!0,children:[{type:15,name:"INFO",description:"Welcome to the spaceport trading system.",perks:[{value:"Here you can sell resources, buy [WEAPONS] and [ABILITES]."},{value:"Don't forget to stock up on ammunition."},{headline:!0,value:""},{value:"A tip to get started.",headline:!0},{value:"Buy the following [ABILITIES] to be able to mine iron:"},{value:"Lazersight",headline:!0},{value:"Targetlock",headline:!0},{value:"MiningRig",headline:!0},{value:"Go out and mine some iron and come back to a spaceport"},{value:"and exchange it for some sweet space credits."},{value:"After that you can go haywire and buy weapons"},{value:"and start making the real money by killing space beasts."}]},{type:16,name:"SHIP INFORMATION",description:"your ship",quadrant:"BL",aquired:!0,children:[{type:17,name:"rearrange weapons",description:"equip and unequip weapons",quadrant:"BL",aquired:!0},{type:18,name:"rearrange abilities",description:"equip and unequip abilites",quadrant:"BL",aquired:!0}]},{type:3,name:"WEAPONS",description:"Weapons, ammunition and upgrades for weapons",quadrant:"BR",aquired:!0},{type:6,name:"ABILITIES",description:"Abilities and upgrades for abilities",quadrant:"TL",aquired:!0},{type:7,name:"TRADE",description:"Sell collected resources for space credits",aquired:!0,children:[{type:8,name:"sell iron",description:"Sell iron for space credits",aquired:!0},{type:9,name:"sell minerals",description:"Sell minerals for space credits",aquired:!0},{type:10,name:"sell platinum",description:"Sell platinum for space credits",aquired:!0}]}]},s=function(e){return e>1?"Increase":"Decrease"},A=function(e){return Math.round(100*e)+""},u=function(e,t){var r=[],a=e>1;r.push(s(e)),r.push(t);var n="";return n=a?A(e-1)+"%":"-"+A(1-e)+"%",r.push(n),r.join(" ")+"."},l=function(e,t,r){var a=r.shift(),n=[];n.push({value:u(a,"ammo with"),headline:!1},{headline:!0,value:""},{value:"Reguirements:",headline:!0},{value:"previous upgrade"},{headline:!0,value:""});var i={type:1,name:"ammo"+u(a,""),installationData:o({},t.installationData),description:s(a)+" max ammunition of "+e.name,weaponUpgrade:{ammunition:{max:a}},requirements:[{installationType:2,type:0,subType:1}],perks:n,children:[]};return r.length>0&&i.children.push(l(e,i,r)),i},c=function(e,t,r){var a=r.shift(),n=[];n.push({value:u(a,"damage with"),headline:!1},{headline:!0,value:""},{value:"Reguirements:",headline:!0},{value:"previous upgrade"},{headline:!0,value:""});var i={type:1,name:"damage"+u(a,""),installationData:o({},t.installationData),description:s(a)+" damage of "+e.name,weaponUpgrade:{damage:{value:a}},requirements:[{installationType:2,type:0,subType:0}],perks:n,children:[]};return r.length>0&&i.children.push(c(e,i,r)),i},d=function(e){if(e.children)for(var t=0;t<e.children.length;t++){var r=e.children[t];if(0===r.type){r.children||(r.children=[]),r.weaponInformation.ammunitionCost>0&&r.children.push({type:11,name:"Ammunition",description:"Ammunition for "+(i=r).name,weaponInformation:i.weaponInformation,requirements:[{installationType:2,type:0}],perks:[],children:[]});for(var a=[1.2,1.3,1.4,1.5,1.55],n=0;n<a.length;n++)r.children.push(c(r,r,[a[n]]));if(1===r.weaponInformation.ammunition.type){var o=[1.2,1.6,1.8,2];for(n=0;n<o.length;n++)r.children.push(l(r,r,[o[n]]))}}else d(r)}var i},p=function(e){var t;e.children||(e.children=[]);for(var r=0;r<e.children.length;r++){var a=e.children[r];a.selected=!1,a.focused=!1,a.perks=a.perks||[],a.aquired=null!==(t=a.aquired)&&void 0!==t&&t,p(a)}},f=function(e){if(e.children)for(var t=0;t<e.children.length;t++){var a=e.children[t];if(6===a.type)for(var n in a.children||(a.children=[]),r.abilityDatas){var o=r.abilityDatas[n],i=[];switch(i.push({value:"Drain type:",headline:!0}),o.drainType){case 0:i.push({value:"ENERGY"});break;case 1:i.push({value:"N/A"})}switch(i.push({headline:!0,value:""}),i.push({value:"Activation type:",headline:!0}),o.activationType){case 1:i.push({value:"manually activated"});break;case 0:i.push({value:"passive"})}i.push({headline:!0,value:""}),o.requirements&&i.push({value:"Reguirements:",headline:!0},{value:o.requirements.name},{headline:!0,value:""});var s={type:4,name:o.name,description:o.description,perks:i,children:[],installationData:{installationType:1,type:o.type,cost:o.cost},requirements:o.requirements?[{installationType:1,type:o.requirements.type}]:null};a.children.push(s)}else f(a)}},h=null,v=[],g=function(e,t,r){t[r]=(t[r]||0)+e.children.length;for(var a=0;a<e.children.length;a++){var n=e.children[a];g(n,t,r+1)}},y=function(e,t,r,a){r[a]=r[a]||0,14===e.type&&(e.x=0,e.y=0);for(var n=0;n<e.children.length;n++){var o=e.children[n],i=150*t[a]*-.5;o.x=i+150*r[a]+.5*e.x,o.y=300*-a,o.parentx=e.x,o.parenty=e.y,r[a]+=1,y(o,t,r,a+1)}};t.resetSkillTree=function(){(function(e){if(e.children)for(var t=0;t<e.children.length;t++){var r=e.children[t];if(3===r.type)for(var o in r.children||(r.children=[]),a.weaponDatas){var i=a.weaponDatas[o],s=[],u=void 0;switch((i.requiresTargetLock||i.requiresLazerSight)&&(u=[],s.push({value:"Reguirements:",headline:!0}),i.requiresTargetLock&&(s.push({value:"target lock ability"}),u.push({installationType:1,type:4})),i.requiresLazerSight&&(s.push({value:"lazersight ability"}),u.push({installationType:1,type:10})),s.push({headline:!0,value:""})),s.push({value:"Ammunition:",headline:!0}),i.ammunition.type){case 0:s.push({value:"Ammo type: Energy"});break;case 1:s.push({value:"Ammo type: Physical"})}s.push({value:"Max loadout "+i.ammunition.max+" units"}),s.push({value:"Requires "+i.ammunition.perShot+" units per shot"}),s.push({value:"Stock ammo "+i.ammunition.value}),s.push({headline:!0,value:""}),s.push({value:"Damage",headline:!0}),s.push({value:"type: "+n.DamageTypeToString(i.damage.type)}),s.push({value:"value: "+i.damage.value}),i.damage.valuePercent>0&&s.push({value:"percent of target life "+A(i.damage.valuePercent)+"%"}),i.damage.stunMS>0&&s.push({value:"Stuns target for "+i.damage.stunMS+" ms"}),i.damage.slowPercentM>0&&s.push({value:"Slows target by "+A(i.damage.slowPercentM)+"%"}),i.damage.pushPercentM>0&&s.push({value:"Pushes on target "+A(i.damage.slowPercentM)+"%"}),i.projectile.speed>0&&(s.push({headline:!0,value:""}),s.push({value:"Projectile:",headline:!0}),s.push({value:"Speed: "+i.projectile.speed+" space knots."})),r.children.push({type:0,children:[],requirements:u,description:i.description,installationData:{installationType:0,type:i.type,cost:i.cost},weaponInformation:i,name:i.name,perks:s})}}})(h=JSON.parse(JSON.stringify(i))),d(h),f(h),p(h),h.children[0].focused=!0,g(h,v=[],0),y(h,v,[],0)},t.resetSkillTree();t.getSkillTree=function(){return h};t.getSkillTreeLayout=function(){return v}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))(function(n,o){function i(e){try{A(a.next(e))}catch(e){o(e)}}function s(e){try{A(a.throw(e))}catch(e){o(e)}}function A(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,s)}A((a=a.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var r,a,n,o,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){i.label=o[1];break}if(6===o[0]&&i.label<n[1]){i.label=n[1],n=o;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(o);break}n[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};a=[r,t,r(29),r(53),r(3)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUserItems=void 0;var s=!0;window.addEventListener("keydown",function(e){if(s){var a=t.createUserItems[0].label;switch(e.keyCode){case r.Keys.BACKSPACE:case r.Keys.DELETE:if("ENTER NAME"===a);else{var n=a.split("");n.pop(),a=n.join("")}return""==a&&(a="ENTER NAME"),void(t.createUserItems[0].label=a);case r.Keys.RETURN:case r.Keys.LEFT:case r.Keys.RIGHT:case r.Keys.UP:case r.Keys.DOWN:return}if(e.keyCode>=65&&e.keyCode<=90||"space"===e.key){if("space"===e.key&&" "===a.split("").pop())return;"ENTER NAME"===a?a=e.key.toUpperCase():a+=e.key.toUpperCase()}t.createUserItems[0].label=a}}),t.createUserItems=[{label:"ENTER NAME",action:function(e){return o(void 0,void 0,void 0,function(){var r;return i(this,function(o){switch(o.label){case 0:if(!("ENTER NAME"!==(r=a.getUser()||t.createUserItems[0].label)&&r&&r.length>3&&"  "!==r&&r.split(" ").join("").length>3))return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),s=!1,t.createUserItems[0].label="LOADING...",[4,a.createUser(e,r)];case 2:return o.sent(),[2,Promise.resolve({root:!0})];case 3:return o.sent(),e.game.notifications.push({life:n.NOTIFICATION_LIFE,type:70,message:"UNABLE TO CREATE USER..."}),a.createOfflineUser(r),[2,Promise.resolve({root:!0})];case 4:return[3,6];case 5:return e.game.notifications.push({life:n.NOTIFICATION_LIFE,type:70,message:"NAME SHOULD BE MORE THAN 3 LETTERS. A-Z"}),[2,Promise.resolve({})];case 6:return[2]}})})},condition:function(){return!a.getUser()}}]}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(39),r(227),r(29),r(49)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiplayerItems=void 0;var i=!0,s=null;window.addEventListener("keydown",function(e){if(i){var r=t.multiplayerItems[0].label;switch(e.keyCode){case n.Keys.BACKSPACE:case n.Keys.DELETE:if("ENTER_NAME_TO_JOIN"===r);else{var a=r.split("");a.pop(),r=a.join("")}return""==r&&(r="ENTER_NAME_TO_JOIN"),void(t.multiplayerItems[0].label=r);case n.Keys.RETURN:case n.Keys.LEFT:case n.Keys.RIGHT:case n.Keys.UP:case n.Keys.DOWN:return}if(e.keyCode>=65&&e.keyCode<=90||"space"===e.key){if("space"===e.key&&" "===r.split("").pop())return;"ENTER_NAME_TO_JOIN"===r?r=e.key.toUpperCase():r+=e.key.toUpperCase()}t.multiplayerItems[0].label=r}}),t.multiplayerItems=[{label:"ENTER_NAME_TO_JOIN",action:function(e){var n=s||t.multiplayerItems[0].label;if("ENTER_NAME_TO_JOIN"!==n&&n&&n.length>1&&"  "!==n&&n.split(" ").join("").length>1)return a.clientCreateShip(n,window.innerWidth,window.innerHeight),i=!1,o.saveStr("multiplayer_save_name_key",n),e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}}];setTimeout(function(){o.containsStr("multiplayer_save_name_key")&&(s=o.loadStr("multiplayer_save_name_key"),t.multiplayerItems[0].label="JOIN GAME")},0)}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";var r=this;Object.defineProperty(t,"__esModule",{value:!0}),t.serverInit=t.serverEvent=t.clientRecieveGameEvents=t.getNumClients=t.serverSendShipId=t.serverSend=t.serverSendHeartbeat=t.clientRecieve=t.clientRecieveShipId=t.clientRecieveHeartbeat=t.clientSend=t.clientCreateShip=t.initClient=t.VOLATILE_GAME_STATE_TRAFFIC=void 0;var a=null,n=null,o=0;t.VOLATILE_GAME_STATE_TRAFFIC=!0;t.initClient=function(){console.log("init client IO() "),a=r.io()};t.clientCreateShip=function(e,t,r){var n={playerName:e,SW:t,SH:r};a.emit("client_create_ship",n)};t.clientSend=function(e){a.emit("client",e)};t.clientRecieveHeartbeat=function(e){a.on("server_heartbeat",function(t){e(t)})};t.clientRecieveShipId=function(e){a.on("client_ship_id",function(t){e(t)})};t.clientRecieve=function(e){a.on("server",function(t){e(t)})};t.serverSendHeartbeat=function(e){t.VOLATILE_GAME_STATE_TRAFFIC?n.volatile.emit("server_heartbeat",e):n.emit("server_heartbeat",e)};t.serverSend=function(e){t.VOLATILE_GAME_STATE_TRAFFIC?n.volatile.emit("server",e):n.emit("server",e)};t.serverSendShipId=function(e){n.emit("client_ship_id",e)};t.getNumClients=function(){return o};t.clientRecieveGameEvents=function(e){a.on("server_event",function(t){e(t)})};t.serverEvent=function(e,t){e.emit("server_event",t)};t.serverInit=function(e,t,r,a,i){n=e,e.on("connection",function(e){o++,console.log("client connected",e.id),a(e.id,e,o),e.on("client",function(r){var a=t(r);a&&e.emit("server",a)}),e.on("client_create_ship",function(t){e.emit("client_ship_id",r(t,e.id))}),e.broadcast.emit("newclientconnect",{description:o+" clients connected!"}),e.on("disconnect",function(){i(e.id),console.log("client disconnect",e.id),o--,e.broadcast.emit("newclientconnect",{description:o+" clients connected!"})})})}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(109),r(53)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optionsItems=void 0,t.optionsItems=[{condition:function(){return!!a.getUser()},label:"OPTIONS",children:[{label:"STEER WITH MOUSE",action:function(e){return e.game.menuSettings.mouseControl=!e.game.menuSettings.mouseControl,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.mouseControl}},r.keybindingItems,{label:"GFX",children:[{label:"WOODEN PC MODE",action:function(e){return e.game.menuSettings.woodenPC=!e.game.menuSettings.woodenPC,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.woodenPC}},{label:"NOISE",action:function(e){return e.game.menuSettings.noise=!e.game.menuSettings.noise,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.noise}},{label:"MOTION BLUR (BETA)",action:function(e){return e.game.menuSettings.motionBlur=!e.game.menuSettings.motionBlur,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.motionBlur}},{label:"SPACEDUST",action:function(e){return e.game.menuSettings.spacedust=!e.game.menuSettings.spacedust,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.spacedust}},{label:"RAYCASTING",action:function(e){return e.game.menuSettings.raycasting=!e.game.menuSettings.raycasting,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.raycasting}},{label:"LOS SHADOWS",action:function(e){return e.game.menuSettings.losShadows=!e.game.menuSettings.losShadows,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.losShadows}},{label:"GLOW",action:function(e){return e.game.menuSettings.glow=!e.game.menuSettings.glow,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.glow}},{label:"GLOW PARTICLES",action:function(e){return e.game.menuSettings.glowParticles=!e.game.menuSettings.glowParticles,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.glowParticles}},{label:"REFLECTIONS",action:function(e){return e.game.menuSettings.reflections=!e.game.menuSettings.reflections,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.reflections}},{label:"ANTIALIASING (RELOAD REQUIRED)",action:function(e){return e.game.menuSettings.antialiasing=!e.game.menuSettings.antialiasing,setTimeout(function(){window.location.reload()},500),Promise.resolve({})},enabled:function(e){return e.game.menuSettings.antialiasing}},{label:"TRANSFORM FEEDBACK",action:function(e){return e.game.menuSettings.transformFeedback=!e.game.menuSettings.transformFeedback,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.transformFeedback}},{label:"PARTICLES",action:function(e){return e.game.menuSettings.particles=!e.game.menuSettings.particles,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.particles}},{label:"HEAVY FOG",action:function(e){return e.game.menuSettings.heavyFog=!e.game.menuSettings.heavyFog,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.heavyFog}}]},{label:"HUD",children:[{label:"MINIMAP",action:function(e){return e.game.menuSettings.minimap=!e.game.menuSettings.minimap,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.minimap}},{label:"FLIGHT INSTRUMENTS",action:function(e){return e.game.menuSettings.instruments=!e.game.menuSettings.instruments,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.instruments}},{label:"SHOW CLOSE ENTITIES",action:function(e){return e.game.menuSettings.showCloseItems=!e.game.menuSettings.showCloseItems,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.showCloseItems}},{label:"SHOW SIGHT LINES",action:function(e){return e.game.menuSettings.showSightLines=!e.game.menuSettings.showSightLines,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.showSightLines}},{label:"SHIP STATUS",action:function(e){return e.game.menuSettings.shipStatus=!e.game.menuSettings.shipStatus,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.shipStatus}},{label:"SHOW OBJECT DATA",action:function(e){return e.game.menuSettings.objectData=!e.game.menuSettings.objectData,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.objectData}},{label:"KEYBINDING HINT",action:function(e){return e.game.menuSettings.keybindingHint=!e.game.menuSettings.keybindingHint,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.keybindingHint}},{label:"GAME CLOCK",action:function(e){return e.game.menuSettings.gameClock=!e.game.menuSettings.gameClock,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.gameClock}},{label:"HELP FROM COMMANDER",action:function(e){return e.game.menuSettings.commanderHelp=!e.game.menuSettings.commanderHelp,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.commanderHelp}}]},{label:"AUDIO",children:[{label:"MUSIC",action:function(e){return e.game.menuSettings.music=!e.game.menuSettings.music,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.music}},{label:"SFX",action:function(e){return e.game.menuSettings.sfx=!e.game.menuSettings.sfx,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.sfx}}]}]}]}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(39),r(230),r(53)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debugItems=void 0,t.debugItems=[{condition:function(){return!!n.getUser()},label:"DEV UI",children:o(o([{label:"GUI DEBUG",children:[{label:"AABBs",action:function(e){return e.game.menuSettings.debugItems.aabb=!e.game.menuSettings.debugItems.aabb,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.debugItems.aabb}},{label:"FORCES",action:function(e){return e.game.menuSettings.debugItems.forces=!e.game.menuSettings.debugItems.forces,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.debugItems.forces}},{label:"PROCEDURAL CREATION",action:function(e){return e.game.menuSettings.debugItems.proceduralCreation=!e.game.menuSettings.debugItems.proceduralCreation,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.debugItems.proceduralCreation}},{label:"PREDATOR TARGETS",action:function(e){return e.game.menuSettings.debugItems.predatorTarget=!e.game.menuSettings.debugItems.predatorTarget,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.debugItems.predatorTarget}},{label:"CHUNK RENDER",action:function(e){return e.game.menuSettings.debugItems.chunks=!e.game.menuSettings.debugItems.chunks,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.debugItems.chunks}}]},{label:"NETWORK LOCATIONS",action:function(e){return e.game.menuSettings.networkLocaations=!e.game.menuSettings.networkLocaations,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.networkLocaations}},{label:"EXTENSIVE UI",action:function(e){return e.game.menuSettings.extensiveUI=!e.game.menuSettings.extensiveUI,setTimeout(function(){e.game.debug=e.game.menuSettings.extensiveUI?{}:null},0),Promise.resolve({})},enabled:function(e){return e.game.menuSettings.extensiveUI}},{label:"FPS",action:function(e){return e.game.menuSettings.fpsOnly=!e.game.menuSettings.fpsOnly,e.game.menuSettings.fps&&(e.game.menuSettings.fps=!1,e.game.menuSettings.keybindingHint=!1),Promise.resolve({})},enabled:function(e){return e.game.menuSettings.fpsOnly}},{label:"FPS MEETERS",action:function(e){return e.game.menuSettings.fps=!e.game.menuSettings.fps,e.game.menuSettings.fpsOnly&&(e.game.menuSettings.fpsOnly=!1,e.game.menuSettings.keybindingHint=!1),Promise.resolve({})},enabled:function(e){return e.game.menuSettings.fps}},{label:"HEAP",action:function(e){return e.game.menuSettings.heap=!e.game.menuSettings.heap,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.heap}},{label:"FPS 3D BARS",action:function(e){return e.game.menuSettings.fps3dBars=!e.game.menuSettings.fps3dBars,e.game.menuSettings.fps3dBars&&(e.game.menuSettings.fps3dGrid=!1),Promise.resolve({})},enabled:function(e){return e.game.menuSettings.fps3dBars}},{label:"FPS 3D GRID",action:function(e){return e.game.menuSettings.fps3dGrid=!e.game.menuSettings.fps3dGrid,e.game.menuSettings.fps3dGrid&&(e.game.menuSettings.fps3dBars=!1),Promise.resolve({})},enabled:function(e){return e.game.menuSettings.fps3dGrid}},{label:"ON SCREEN LOGGING",action:function(e){return e.game.menuSettings.onScreenLogging=!e.game.menuSettings.onScreenLogging,Promise.resolve({})},enabled:function(e){return e.game.menuSettings.onScreenLogging}},{label:"LEVELS",children:[{label:"OLD SURVIVAL LEVEL",action:function(e){return e.game.targetLevel=19,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"THE CONVOY",action:function(e){return e.game.targetLevel=21,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"SURVIVAL",action:function(e){return e.game.targetLevel=19,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"BE THE SNAKE",action:function(e){return e.game.targetLevel=22,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}}]},{label:"LEVEL EDITOR",action:function(e){return e.game.targetLevel=18,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}}],a.testItems),[{label:"WORKERS TEST",action:function(e){return e.game.targetLevel=14,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"MINEFIELD TEST",action:function(e){return e.game.targetLevel=15,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"FROM DUSK TIL DAWN TEST",action:function(e){return e.game.targetLevel=16,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"FIRE SNAKE TEST",action:function(e){return e.game.targetLevel=17,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}}])}]}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(39)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testItems=void 0;var a=function(e,t){return{label:e,action:function(e){return e.game.targetLevel=t,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}}};t.testItems=[{label:"TESTS",children:[{label:"DYNAMIC COLLISION",action:function(e){return e.game.targetLevel=1,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"STATIC COLLISSION",action:function(e){return e.game.targetLevel=0,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"SPACE SNAKES",action:function(e){return e.game.targetLevel=2,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"SPACE SQUIDS",action:function(e){return e.game.targetLevel=5,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"SPACE SNAKE <FOLLOW>",action:function(e){return e.game.targetLevel=3,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"SPACE BATS",action:function(e){return e.game.targetLevel=3,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"SPACE SPIDER",action:function(e){return e.game.targetLevel=6,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"ROCK FORMATIONS",action:function(e){return e.game.targetLevel=7,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}},{label:"SPACEDUST PERF.",action:function(e){return e.game.targetLevel=23,e.game.isPaused=!1,r.StateMachine(e.game.state).menuDisable(),Promise.resolve({root:!0})}},a("PLAYGROUND",8),a("NEURAL NETWORK TRAINING",9),a("NEURAL NETWORK EVOLUTION",10)]}]}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(49),r(11),r(11),r(9),r(53)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shipItems=void 0;var s=function(){return"CHROME <"+n.ShipColorStrings[n.getCurrentColorIndex()]+">"};t.shipItems=[{condition:function(){return!!i.getUser()},label:"SHIP",children:[{label:s(),action:function(e){n.increaseColorIndex(),r.saveInt("storage_ship_color_index",n.getCurrentColorIndex()),t.shipItems[0].children[0].label=s();var a=o.default(e);return a&&(a.colorIndex=n.getCurrentColorIndex()),Promise.resolve({})}}]}],setTimeout(function(){var e=r.loadInt("storage_ship_color_index")||0;a.setColorIndex(e),t.shipItems[0].children[0].label=s()},0)}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(0),r(0),r(2)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[],s=[],A=0,u=function(e,t,r,a,n,o,i){var s=.5*n;i.push(e-s,t,r,e-s,a,r,e+s,t,r,e+s,a,r,e-s,t,o,e-s,a,o,e+s,t,o,e+s,a,o,e-s,t,r,e-s,t,o,e+s,t,r,e+s,t,o,e-s,a,r,e-s,a,o,e+s,a,r,e+s,a,o,e-s,t,r,e+s,t,r,e-s,t,o,e+s,t,o,e-s,a,r,e+s,a,r,e-s,a,o,e+s,a,o)};t.default=function(e){e.stepMS;var t=e.game,l=e.SW,c=e.SH,d=e.gl;if(t.menuSettings.fps3dGrid||t.menuSettings.fps3dBars){i=[];t.resW;var p=o(o(o([0],t.performance.engine.map(function(e){return e.time})),t.performance.gui.map(function(e){return e.time})),[0]);A=p.length,s.push.apply(s,p),s.length>100*A&&(s=s.splice(A,100*A));for(var f=40,h=s.length,v=0,g=t.menuSettings.fps3dBars,y=0;y<h;y++){var m=y%A*f+0+.135*l,x=.72*c,S=2*Math.floor(y/A)*-.05-1;g?u(m,x,S,x-48*s[v],32,2*(Math.floor(y/A)-.8)*-.05-1,i):(i.push(m+60,x-48*s[v+1],S,m+20,x-48*s[v],S),y>=A&&i.push(m+20,x-48*s[v],S,m+20,x-48*s[v-A],2*(Math.floor(y/A)-1)*-.05-1)),v++}if(!g){m=A*f+0+.135*l,x=.72*c;i.push(m+20,x,-1,m+20,x,2*Math.floor(h/A)*-.05-1)}i.length>0&&(r.default(a.GLctx.Vertices3d,d),n.drawColor(i,d,.8,.1,.1,1,d.LINES))}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0),r(8),r(122),r(3)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n.default.create("SPACEPORT WEAPONS ONLINE",i.TEXT_SIZE_SMALL,"g"),A=n.default.create("SPACEPORT WEAPONS OFFLINE",i.TEXT_SIZE_SMALL,"r"),u=n.default.create("ENTERED SPACEPORT",i.TEXT_SIZE_SMALL,"w"),l=n.default.create("RELOADING WEAPONS, REPAIRING HULL...",i.TEXT_SIZE_SMALL,"g"),c=n.default.create("SHIP REPAIRS COMPLETED. WEAPONS RELOADED.",i.TEXT_SIZE_SMALL,"g"),d=n.default.create("LEFT SPACEPORT - SHIP WEAPONS ENABLED",i.TEXT_SIZE_SMALL,"g");t.default=function(e){for(var t=e.gl,p=e.game,f=e.game.notifications,h=f.length,v=0,g=0;g<h;g++){var y=f[g];if(!(y.onlyForGuid&&y.onlyForGuid!==p.playerGuid&&p.playerGuid>-1)&&!(p.currentLevel<=13&&70!==y.type)){var m=null;switch(y.type){case 58:m=o.BONUS_BUFFERS.BUFFER_EB;break;case 52:m=o.BONUS_BUFFERS.BUFFER_LIFE;break;case 54:m=o.BONUS_BUFFERS.BUFFER_ROCKET_X1;break;case 55:m=o.BONUS_BUFFERS.BUFFER_ROCKET_X2;break;case 56:m=o.BONUS_BUFFERS.BUFFER_ROCKET_X3;break;case 57:m=o.BONUS_BUFFERS.BUFFER_MISSILE_X6;break;case 51:m=o.BONUS_BUFFERS.BUFFER_SHIELD;break;case 59:m=o.BONUS_BUFFERS.BUFFER_BOOSTERS;break;case 60:m=o.BONUS_BUFFERS.BUFFER_WEAPON_UPGRADE;break;case 61:m=o.BONUS_BUFFERS.BUFFER_DRONE;break;case 62:m=o.BONUS_BUFFERS.BUFFER_AUTOPILOT;break;case 63:m=o.BONUS_BUFFERS.BUFFER_HOMINGBULLETS;break;case 64:m=o.BONUS_BUFFERS.BUFFER_ULTRABRIGHT;break;case 53:m=o.BONUS_BUFFERS.BUFFER_PROXIMITY_MINES_X3;break;case 65:m=o.BONUS_BUFFERS.BUFFER_FLAME;break;case 70:m=n.default.create(y.message||"err",i.TEXT_SIZE_SMALL,"y");break;case 71:m=n.default.create(y.message||"err",i.TEXT_SIZE_SMALL,"r");break;case 72:m=n.default.create(y.message||"err",i.TEXT_SIZE_SMALL,"y");break;case 73:m=n.default.create(y.message||"err",i.TEXT_SIZE_SMALL,"g");break;case 76:m=u;break;case 75:m=s;break;case 74:m=A;break;case 77:m=d;break;case 78:m=l;break;case 79:m=c;break;default:m=o.BONUS_BUFFERS.BUFFER_UNKNOWN}n.default.addGL(t,r.default(y.life<20?a.GLctx.TextureDist:a.GLctx.Texture,t),m,.5*p.resW-.5*m.w,.8*p.resH-v*(1.1*i.TEXT_SIZE_SMALL),e),v++}}return"notifications"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0),r(2),r(69)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[],s=[];t.default=function(e){var t=e.gl,A=e.game,u=e.SX,l=e.SY;e.SW,e.SH;i=[],s=[];for(var c=A.screen.rectSS_200,d=o.getParasiteTree().queryInt(c),p=d.length,f=0;f<p;f++){var h=d[f],v=h.segments,g=v.length;if(h.target){var y=h.segments[h.segments.length-1];n.line2Poly(y.pos.x-u,y.pos.y-l,h.target.ship.pos.x-u,h.target.ship.pos.y-l,s)}for(var m=1;m<g;m++){var x=v[m],S=v[m-1];i.push(x.pos.x-u,x.pos.y-l,S.pos.x-u,S.pos.y-l)}}return i.length>0&&(r.default(a.GLctx.Vertices,t),n.drawColor(i,t,.9,.15,.15,1,t.LINES),n.drawColor(s,t,0,1,0,1)),"parasite"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(8),r(0),r(29),r(3),r(109),r(56),r(9)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=0;t.default=function(e){var t=e.game,l=e.SW,c=e.SH,d=e.gl,p=e.WW,f=e.WH,h=t.daylight.is_night;if(!t.menuSettings.keybindingHint||t.currentLevel<=13||t.levelEditor)u=0;else{var v=A.default(e);if(v&&!(v.life<1)){v.abilities.active.cloak>0&&(u=1);var g=l/t.resW,y=v.damageTaken||!t.IS_PROCEDURAL&&s.default(v,p,f),m=[];for(var x in n.inGameKeyCodes.keys){var S=i.IN_GAME_KEY_BINDING_TRANSLATIONS[n.Keys[x]],_="";switch(x){case"PRIMARY_WEAPON":if(v.weapons.primary.types.length<1)continue;_=v.weapons.hash[v.weapons.primary.types[v.weapons.primary.index]].name;break;case"SECONDARY_WEAPON":if(v.weapons.secondary.types.length<1)continue;_=v.weapons.hash[v.weapons.secondary.types[v.weapons.secondary.index]].name;break;case"AUX_WEAPON":if(v.weapons.aux.types.length<1)continue;_=v.weapons.hash[v.weapons.aux.types[v.weapons.aux.index]].name;break;case"TOGGLE_PRIMARY_WEAPON":if(v.weapons.primary.types.length<2)continue;break;case"TOGGLE_SECONDARY_WEAPON":if(v.weapons.secondary.types.length<2)continue;break;case"TOGGLE_AUX_WEAPON":if(v.weapons.aux.types.length<2)continue;break;case"PRIMARY_ABILITY":if(v.abilities.primary.types.length<1)continue;_=v.abilities.hash[v.abilities.primary.types[v.abilities.primary.index]].name;break;case"SECONDARY_ABILITY":if(v.abilities.secondary.types.length<1)continue;_=v.abilities.hash[v.abilities.secondary.types[v.abilities.secondary.index]].name;break;case"AUX_ABILITY":if(v.abilities.aux.types.length<1)continue;_=v.abilities.hash[v.abilities.aux.types[v.abilities.aux.index]].name;break;case"TOGGLE_PRIMARY_ABILITY":if(v.abilities.primary.types.length<2)continue;break;case"TOGGLE_SECONDARY_ABILITY":if(v.abilities.secondary.types.length<2)continue;break;case"TOGGLE_AUX_ABILITY":if(v.abilities.aux.types.length<2)continue;break;case"STRAFELEFT":case"STRAFERIGHT":if(!v.abilities.hash[14])continue}var T=i.createKeyBindingLabel(v.abilities.active.cloak>0?"PRESS TO UNCLOAK":x,S);m.push(r.default.create(T.replace("_"," ")+(_?" "+_:""),o.TEXT_SIZE_SMALL,h?"r":"g"))}for(var E=a.default(y?a.GLctx.TextureDist:a.GLctx.Texture,d),M=m.length,I=Math.min(u,M),L=0;L<I;L++)L===Math.floor(u)&&(E=a.default(a.GLctx.TextureDist,d)),r.default.addGL(d,E,m[L],(y?5+10*Math.random():10)*g,.3*c+L*(1.2*o.TEXT_SIZE_SMALL)*g,e);return u<M+2?u+=.14:t.clock<6e4&&r.default.addGL(d,E,r.default.create("ESC/options/hud/keybinding hint",o.TEXT_SIZE_SMALL,h?"r":"g"),(y?5+10*Math.random():10)*g,.3*c+(I+1)*(1.2*o.TEXT_SIZE_SMALL)*g,e),"keybindings"}u=0}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0),r(24),r(2),r(9)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=[],A=0,u=0,l=0;t.default=function(e){var t=e.gl,c=e.game,d=e.SX,p=e.SY;e.SW,e.SH;if(c.menuSettings.spacedust){s=[];for(var f=n.GetSpaceDustTree().references,h=f.length,v=0;v<h;v++){var g=f[v];s.push(g.pos.x-d,g.pos.y-p,g.pos.x+2-d,g.pos.y-p,g.pos.x-d,g.pos.y+2-p)}if(s.length>0)i.default(e)?(A=.3,u=.15,l=.15):(A<1&&(A+=.01),u>0&&(u-=.01),l>0&&(l-=.01)),r.default(a.GLctx.Vertices,t),o.drawColor(s,t,A,u,l,1,t.POINTS);return"spacedust"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(2),r(1),r(6),r(5),r(22)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=[],c=[],d=[],p=new i.Vector(0,0),f=new i.Vector(0,0);t.default=function(e){var t=e.SX,i=e.SY,h=(e.SW,e.SH),v=e.gl,g=e.game,y=A.getQuadTreesObj();if(y&&y.All){var m=g.daylight.is_day,x=(g.daylight.is_night,g.screen.rect),S=y.queryTreesRect([3],x);c=[],l=[],d=[];for(var _=0;_<S.length;_++){for(var T=S[_],E=T.cannons,M=0;M<E.length;M++){var I=E[M];!I.lightsOn!==m&&Math.random()>.98&&(I.lightsOn=!m);var L=I.pos.x,w=I.pos.y;r.blockCirclePoly(I.sides,I.radius,L,w,I.angle,l,h,t,i,2*T.wallThickness),I.isCannon&&(p.set(2*T.wallThickness,0),s.rotateVector(p,I.angle,p),o.line2Poly(L-t,w-i,L+p.x-t,w+p.y-i,l,.2*T.wallThickness));for(var b=I.damages,P=b.length,R=0;R<P;R++){var O=b[R];s.rotateVector(O,I.angle,f);var C=L+f.x-t,G=w+f.y-i;f.mult(.8);var D=L+f.x-t,N=w+f.y-i;c.push(C,G,D,N)}}if(r.addToColorMap(d,l,0,0,0,1),T.shieldImpacts.length>0){var B=[];r.blockCirclePoly(60,2*T.radius,T.centerNoneCannon.pos.x,T.centerNoneCannon.pos.y,0,B,h,t,i,T.radius);for(var F=0;F<T.shieldImpacts.length;F++){var V=T.shieldImpacts[F];u.GlowCustomLayout(V,300,B,e,.1,.1,1,1)}}}if(l.length>0){v.blendFunc(v.DST_COLOR,v.ZERO);var k=a.default(n.GLctx.Vertices,v);o.drawColorMap(d,l,k,v),v.blendFunc(v.ONE,v.ONE),o.drawColor(c,v,.25,.25,.25,1,v.LINES)}return"spaceport"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(239),r(9),r(1),r(2),r(0),r(0),r(56),r(3),r(3)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=[],d=[],p=new n.Vector(0,0);t.default=function(e){e.frame;var t=e.WW,n=e.WH,h=(e.SH,e.SX,e.SY,e.gl),v=e.game,g=v.currentResW,y=a.default(e);if(y&&!(v.currentLevel<=13)&&v.menuSettings.shipStatus&&!v.levelEditor){p.set(y.vel.x,y.vel.y);var m=y.weapons.all,x=y.abilities.passive,S=[];S.push({str:"power",val:y.life,max:u.SHIP_MAX_LIFE,allowOverFlow:!1},{str:"speed",val:p.getLength()+.01,max:l.SHIP_MAX_VEL,allowOverFlow:!0});for(var _=0;_<m.length;_++){var T=m[_];T.ammunition.value>0&&S.push({str:T.name,val:T.ammunition.value,max:T.ammunition.max,allowOverFlow:!1})}for(_=0;_<x.length;_++){var E=x[_];E.displayAsInstrument&&S.push({str:E.name,val:E.value.n,max:E.value.max,allowOverFlow:!1})}S.push(f(e));var M=S.length,I=.5*(g-110*M);c=[],d=[];for(_=0;_<M;_++){var L=S[_],w=[],b=[],P=y.abilities.active.cloak||v.skillTree.active;r.AnalogueInstrument(I,30,100,60,L.max,P?0:L.val<1?0:L.val,L.allowOverFlow,L.str,e,y.guid+_+1,b,w,y.damageTaken||!v.IS_PROCEDURAL&&A.default(y,t,n)||0!==y.forceX||0!==y.forceY,!P&&L.val>0,0===_),w.length>0&&(c.push(w),d.push(b)),I+=110}if(c.length>0){var R=o.unitePolyColorMaps(c,d);o.drawColorMap(R.colorMap,R.polys,i.default(s.GLctx.Vertices,h),h)}return"PlayerstatsAnalogue"}};var f=function(e){var t=e.game.daylight,r=t.time,a=t.is_dusk,n=t.is_dawn,o=a?"dusk":n?"dawn":"twilight",i=.5;if(r>u.DAYLIGHT_DUSK_BEGIN_TIME+.5*u.DAYLIGHT_TOTAL_DUSK_TIME)i=1-(r-(u.DAYLIGHT_DUSK_BEGIN_TIME+.5*u.DAYLIGHT_TOTAL_DUSK_TIME))/(u.DAYLIGHT_TOTAL_TIME-(u.DAYLIGHT_DUSK_BEGIN_TIME+.5*u.DAYLIGHT_TOTAL_DUSK_TIME)),o="night";else if(r<u.DAYLIGHT_DUSK_BEGIN_TIME+.5*u.DAYLIGHT_TOTAL_DUSK_TIME&&r>u.DAYLIGHT_DAWN_BEGIN_TIME+.5*u.DAYLIGHT_TOTAL_DAWN_TIME){i=1-(r-(u.DAYLIGHT_DAWN_BEGIN_TIME+.5*u.DAYLIGHT_TOTAL_DAWN_TIME))/(u.DAYLIGHT_TOTAL_TIME-(u.DAYLIGHT_DAWN_BEGIN_TIME+.5*u.DAYLIGHT_TOTAL_DAWN_TIME+(u.DAYLIGHT_TOTAL_TIME-(u.DAYLIGHT_DUSK_BEGIN_TIME+.5*u.DAYLIGHT_TOTAL_DUSK_TIME)))),o="daylight"}return{allowOverFlow:!0,max:100,str:o,val:100*i}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(1),r(6),r(2),r(0),r(8),r(3),r(22)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalogueInstrument=void 0;var l={},c=new a.Vector(0,0),d=new a.Vector(0,0),p=[],f=[],h=0;t.AnalogueInstrument=function(e,t,v,g,y,m,x,S,_,T,E,M,I,L,w){void 0===I&&(I=!1),void 0===L&&(L=!0),void 0===w&&(w=!0);var b=_.gl,P=_.SX,R=_.SY,O=_.game,C=O.daylight.is_night;O.currentLevel<=13&&(h=0,(l[T]||{}).localPower=0);var G=e+.5*v,D=t+.5*g;l[T]||function(e){l[e]={currentValue:0,actualValue:0,actualOverhoot:0,localPower:0}}(T);var N=l[T],B=N.currentValue,F=N.actualValue,V=N.actualOverhoot,k=N.localPower;if(w&&(L?(h+=.01)>1&&(h=1):(h-=.01)<0&&(h=0,I=!1)),L?(k+=.01)>1&&(k=1):(k-=.01)<0&&(k=0,I=!1),!(k<=0)){I&&(e+=2*(Math.random()-.5),t+=2*(Math.random()-.5)),I||(F=m);var X=x?F:Math.min(y,F);h<1&&(X=0),I?(B--,x=!0):B+=.05*(X-B),(B>y||B<0)&&(x=!0),0===p.length&&function(e,t,r,o,i){for(var s=r-t,A=new a.Vector(0,0),u=0;u<e;u++){A.set(0,-o);var l=s*(u/e)+t;n.rotateVector(A,l,A),A.toVertices,p.push(A.toPoint()),A.set(0,-i),n.rotateVector(A,l,A),f.push(A.toPoint())}}(7,-1,1.2,.8*g,.7*g);var H=e+.5*v,U=t+.8*g,W=-.1*g,Y=W+-.4*g*n.map(k,.8,.95,0,1,!0);c.set(0,Y),d.set(0,W);var q=e+.5*v,z=t+.5*g,j=0;j=x?B*(.9*Math.PI)/y-.45*Math.PI:n.map(B,0,y,0,.9*Math.PI)-.45*Math.PI,n.rotateVector(c,j,c),n.rotateVector(d,j,d);for(var K=p.length*n.map(k,.8,1,0,1,!1),Z=0;Z<K;Z++){var Q=p[Z],J=f[Z];r.line2Poly(Q.x+H,Q.y+U,J.x+H,J.y+U,E,1)}o.addToColorMap(M,E,.2,.2,.2,1,!0);var $=s.default.create(S,A.TEXT_SIZE_SMALL,C?"r":"g");r.line2Poly(q+d.x,z+d.y,q+c.x,z+c.y,E,1.5);var ee=h<1?n.map(h,.8,1,0,1,!0):1,te=k<1?n.map(k,.8,1,0,1,!0):1;o.addToColorMap(M,E,C?.7*ee:0,C?0:.7*ee,0,1,!0);var re=Math.random()>.999;k>.85&&s.default.addGL(b,i.default(k<1||re?i.GLctx.TextureDist:i.GLctx.Texture,b),$,e+.5*v-.5*$.w,t+.5*g,_),u.Glow({x:G+P,y:D+R},(I?.05*Math.random()+.05:re?.01:.1)*te,E,_,C?.4:0,C?0:.3,0,1),l[T]={currentValue:B,actualOverhoot:V,actualValue:F,localPower:k}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(5)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[],s=[];t.default=function(e){var t=e.SW,A=e.SH,u=e.SX,l=e.SY,c=e.gl,d=e.game;i.length=0,s.length=0;var p=d.screen.rect,f=o.getQuadTreesObj();if(f.All){for(var h=f.queryTreesRect([25,28],p),v=h.length,g=[],y=0;y<v;y++){if(!(E=h[y]).remove)if(E.homing)g.push(E);else{var m=0|E.pos.x,x=0|E.pos.y;if(m-u<t&&x-l<A&&m-u>0&&x-l>0){var S=0|E.vel.x,_=0|E.vel.y;i.push(m-u,x-l,m+(0==S?1:S)-u,x+(0==_?1:_)-l)}}}r.addToColorMap(s,i,1,1,0,1);var T=f.queryTreesRect([48],p);v=T.length;for(y=0;y<v;y++){if(!(E=T[y]).remove){m=0|E.pos.x,x=0|E.pos.y;if(m-u<t&&x-l<A&&m-u>0&&x-l>0){S=0|E.vel.x,_=0|E.vel.y;i.push(m-u,x-l,m+(0==S?1:S)-u,x+(0==_?1:_)-l)}}}r.addToColorMap(s,i,1,0,0,1),v=g.length;for(y=0;y<v;y++){var E;m=0|(E=g[y]).pos.x,x=0|E.pos.y;if(m-u<t&&x-l<A&&m-u>0&&x-l>0){S=0|E.vel.x,_=0|E.vel.y;i.push(m-u,x-l,m+(0==S?1:S)-u,x+(0==_?1:_)-l)}}if(r.addToColorMap(s,i,1,0,0,1),i.length>0){var M=a.default(n.GLctx.Vertices,c);r.drawColorMap(s,i,M,c,c.LINES)}return"bullets"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(75),r(2),r(6),r(5),r(21)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.game,s=e.gl,A=(e.WW,e.WH,e.SX,e.SY,e.SW,e.SH,e.step),u=o.getQuadTreesObj();if(u.All)for(var l=u.queryTreesRect([22],t.screen.rectSS_200),c=0;c<l.length;c++){if((y=l[c]).life<100){var d=10,p=y.life/d;r.default(e,5-.5*p,d-p+n.RandomStepBased(A,y.guid)*(d-p),y.pos.x,y.pos.y,250,0,50,.3,"Enable",128,1),r.default(e,5-.5*p,d-p+n.RandomStepBased(A,y.guid)*(d-p),y.pos.x,y.pos.y,255,200,150,.3,"Enable",128,1)}}if(u){var f=u.queryTreesRect([0],t.screen.rectSS_200);for(c=0;c<f.length;c++){var h=f[c];if(h.life<200)for(var v=Math.min(.005*(200-h.life)*6,h.cannons.length),g=(d=20,p=h.life/20,0);g<v;g++){var y=h.cannons[g];r.default(e,5-.5*p,d-p+n.RandomStepBased(A,h.guid+g)*(d-p),y.pos.x,y.pos.y,250,0,50,.3,"Enable",128,1)}}}var m=i.getAllAnomalies(e.game);for(c=0;c<m.length;c++){var x=m[c];r.default(e,220,350,x.pos.x,x.pos.y,50,0,0,.1,"Enable",512),r.default(e,120,159,x.pos.x,x.pos.y,255,255,255,.7,"Enable",256)}var S=t.spaceFog,_=S.length;for(c=0;c<_;c++){var T=S[c];if(a.onStage(e,T.x,T.y,1200+T.radius)){var E=T.x,M=T.y;T.fire?(r.default(e,T.radius,300*n.RandomStepBased(A,T.guid),E,M,100,200,100,.3,"Enable",512),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),r.default(e,.1*T.radius,250,E,M,0,0,0,.9,"Disable",256),s.blendFunc(s.ONE,s.ONE),r.default(e,30,100*n.RandomStepBased(A,T.guid)+100,E,M,100,200,100,.3,"Disable",512)):(r.default(e,T.radius,128,E,M,255,0,0,.9,"Disable",32),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),r.default(e,.66*T.radius,600,E,M,0,0,0,.9,"Disable",512),r.default(e,.66*T.radius,200,E,M,100,100,100,.3,"Disable",512),s.blendFunc(s.ONE,s.ONE),r.default(e,.2*T.radius,12,E,M,255,0,0,.4,"Disable",8))}}return"fog"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(110),r(2),r(1),r(131),r(76),r(6)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=[],l=new o.Vector(0,0),c=new o.Vector(0,0),d=new o.Vector(0,0),p=new o.Vector(0,0);new o.Vector(0,0),new o.Vector(0,0),new o.Vector(0,0),new o.Vector(0,0);t.default=function(e){e.SW,e.SH;var t=e.SX,o=e.SY,f=e.gl,h=e.game,v=e.step;u=[];for(var g=a.getSpaceBatTree().queryInt(h.screen.rect),y=g.length,m=i.createRadialGradientTexture(75,5,5,.15,30,"Enable",!0),x=i.createRadialGradientTexture(175,5,5,.35,30,"Enable",!0),S=0;S<y;S++){var _=g[S],T=_.vel.getAngle();l.x=20,l.y=0,l.setAngle(T+Math.PI),p.x=10,p.y=0,p.setAngle(T),c.x=6,c.y=0,c.setAngle(T+.5*Math.PI),d.x=6,d.y=0,d.setAngle(T-.5*Math.PI),u.push(_.pos.x+p.x-t,_.pos.y+p.y-o,_.pos.x+c.x-t,_.pos.y+c.y-o,_.pos.x+d.x-t,_.pos.y+d.y-o,_.pos.x+l.x-t,_.pos.y+l.y-o,_.pos.x+c.x-t,_.pos.y+c.y-o,_.pos.x+d.x-t,_.pos.y+d.y-o),n.line2Poly(_.pos.x-t,_.pos.y-o,_.pos.x+1.3*l.x-t,_.pos.y+1.3*l.y-o,u,2),s.default.addGL(f,r.default(r.GLctx.Texture,f),A.RandomStepBased(v,_.guid)>.8?x:m,_.pos.x+_.vel.x-t,_.pos.y+_.vel.y-o,e,1,1)}return f.blendFunc(f.DST_COLOR,f.ZERO),u.length>0&&(r.default(r.GLctx.Vertices,f),n.drawColor(u,f,0,0,0,1)),f.blendFunc(f.ONE,f.ONE),"spacebats"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(4),r(7),r(31),r(17)],void 0===(n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuadTreeUint16=t.intersectsXYWH_XYWH=void 0;var s={},A=function(e){return new a.Rectangle(e[0],e[1],e[2],e[3])},u=function(e,t){return!(e[0]>t[0]+t[2]||e[0]+e[2]<t[0]||e[1]>t[1]+t[3]||e[1]+e[3]<t[1])},l=function(e,t){return!(e[0]>t[0]+t[2]||e[0]+e[2]<t[0]||e[1]>t[1]+t[3]||e[1]+e[3]<t[1])},c=function(e,t,r,a,n){return!(e[0]>t+a||e[0]+e[2]<t||e[1]>r+n||e[1]+e[3]<r)};t.intersectsXYWH_XYWH=function(e,t,r,a,n,o,i,s){return!(e>n+i||e+r<n||t>o+s||t+a<o)};var d=function(e,t){return t[0]>e[0]&&t[1]>e[1]&&t[0]+t[2]<e[0]+e[2]&&t[1]+t[3]<e[1]+e[3]},p=8,f=function(){function e(e,t,r,a){var n=this;this.divide=!1,this.debugBounds=function(e,t){var r=new Uint16Array([e.x,e.y,e.width,e.height]);return u(r,n.boundry)&&t.push(A(n.boundry)),n.divide&&(n.northeast.debugBounds(e,t),n.northwest.debugBounds(e,t),n.southeast.debugBounds(e,t),n.southwest.debugBounds(e,t)),t},this.boundry=new Uint16Array(e),this.capacity=r>=a?t*p:t,this.items=new Uint16Array(this.capacity),this.itemsSleepState=new Uint8Array(this.capacity),this.itemsXYWH=new Uint16Array(4*this.capacity),this.index=0,this.currentDepth=r,this.maxDepth=a,this.deleteBranchMarker=0}return e.prototype.update=function(e,t,r,a,n,o,i){this.boundry[0]=e,this.boundry[1]=t,this.boundry[2]=r,this.boundry[3]=a,this.capacity=n,this.currentDepth=o,this.maxDepth=i,this.index=0},e.prototype.subDivide=function(){var t=this.boundry[0],r=this.boundry[1],a=this.boundry[2],n=this.boundry[3],o=this.currentDepth+1,i=this.maxDepth,A=o>=i?this.capacity*p:this.capacity;if(this.northeast)this.northeast.update(t+.5*a,r,.5*a,.5*n,A,o,i),this.northwest.update(t,r,.5*a,.5*n,A,o,i),this.southeast.update(t+.5*a,r+.5*n,.5*a,.5*n,A,o,i),this.southwest.update(t,r+.5*n,.5*a,.5*n,A,o,i);else{var u=s[A];if(u&&u.length>4)return this.northeast=u.pop(),this.northwest=u.pop(),this.southeast=u.pop(),this.southwest=u.pop(),void this.subDivide();this.northeast=new e([t+.5*a,r,.5*a,.5*n],A,o,i),this.northwest=new e([t,r,.5*a,.5*n],A,o,i),this.southeast=new e([t+.5*a,r+.5*n,.5*a,.5*n],A,o,i),this.southwest=new e([t,r+.5*n,.5*a,.5*n],A,o,i)}this.divide=!0},e.prototype.___query=function(e,r,a,n,o,i,s){void 0===s&&(s=-1);var A=this.items,u=this.index,l=this.itemsXYWH;if(c(this.boundry,e,r,a,n)){for(var d=0;d<u;d++){var p=A[d];if(!i[p]&&p!==s){var f=4*d;t.intersectsXYWH_XYWH(e,r,a,n,l[f],l[f+1],l[f+2],l[f+3])&&(i[p]=!0,o.push(p))}}this.divide&&(this.northeast.___query(e,r,a,n,o,i,s),this.northwest.___query(e,r,a,n,o,i,s),this.southeast.___query(e,r,a,n,o,i,s),this.southwest.___query(e,r,a,n,o,i,s))}return o},e.prototype.insert=function(e,t,r){if(!l(this.boundry,t))return!1;if(!(this.index<this.capacity))return this.divide||this.subDivide(),!!this.northeast.insert(e,t,r)||(!!this.northwest.insert(e,t,r)||(!!this.southeast.insert(e,t,r)||!!this.southwest.insert(e,t,r)));this.items[this.index]=e,this.itemsSleepState[this.index]=r;var a=4*this.index;return this.itemsXYWH[a]=t[0],this.itemsXYWH[a+1]=t[1],this.itemsXYWH[a+2]=t[2],this.itemsXYWH[a+3]=t[3],this.index++,!!d(this.boundry,t)||void 0},e.prototype.reset=function(){this.index=0;var e=!this.northwest;if(this.northwest){var t=this.northeast.reset(),r=this.northwest.reset(),a=this.southeast.reset(),n=this.southwest.reset();if(t&&r&&a&&n&&(this.deleteBranchMarker++,this.deleteBranchMarker>30)){var o=s[this.northeast.capacity];o||(o=s[this.northeast.capacity]=[]),o.push(this.northeast,this.northwest,this.southeast,this.southwest),this.northeast=null,this.northwest=null,this.southeast=null,this.southwest=null,this.deleteBranchMarker=0}this.divide=!1}return e},e}(),h=function(){function e(e,t,r,a,n){var o=this;void 0===a&&(a=8),void 0===n&&(n=!1),this.divide=!1,this.findIndex=function(e,t){if(void 0===t&&(t=null),t){if((r=t.items.indexOf(e))>-1)return r;t.divide&&(o.findIndex(e,t.northeast),o.findIndex(e,t.northwest),o.findIndex(e,t.southeast),o.findIndex(e,t.southwest))}else{var r;if((r=o.items.indexOf(e))>-1)return r;o.divide&&(o.findIndex(e,o.northeast),o.findIndex(e,o.northwest),o.findIndex(e,o.southeast),o.findIndex(e,o.southwest))}},this.debugAABBs=function(e,t){return console.error("NOT IMPLEMENTED"),t},this.debugBounds=function(e){var t=[],r=[e.x,e.y,e.width,e.height];return l(o.boundry,r)&&t.push(A(o.boundry)),o.divide&&(o.northeast.debugBounds(e,t),o.northwest.debugBounds(e,t),o.southeast.debugBounds(e,t),o.southwest.debugBounds(e,t)),t},this.setup(e,t,r,a,n)}return e.prototype.shrink=function(){this.boundry[0]=0|Math.max(this.minX+1,0),this.boundry[1]=0|Math.max(this.minY+1,0),this.boundry[2]=Math.ceil(this.maxW-this.minX),this.boundry[3]=Math.ceil(this.maxH-this.minY)},e.prototype.intersectTree=function(e){var t=[],r=(this.itemType,e.itemType,this.index);if(r>0){for(var a={},n=this.items,i=this.itemsSleepState,s=this.itemsXYWH,A=0;A<r;A++){if(0!==i[A]){var u=n[A];if(!a[u]){var l=4*A,c=s[l],d=s[l+1],p=s[l+2],f=s[l+3];a[u]=!0;var h=e.___queryXYWH(c,d,p,f,[],[],u);h.length>0&&t.push(o([u],h))}}}this.divide&&(this.___iterateBranchAgainstTree(this.northeast,e,t,a),this.___iterateBranchAgainstTree(this.northwest,e,t,a),this.___iterateBranchAgainstTree(this.southeast,e,t,a),this.___iterateBranchAgainstTree(this.southwest,e,t,a))}return t},e.prototype.___iterateBranchAgainstTree=function(e,t,r,a){var n=e.index,i=this.itemType===t.itemType;if(n>0){for(var s=e.items,A=e.itemsSleepState,u=e.itemsXYWH,l=0;l<n;l++){if(0!==A[l]){var c=s[l];if(!a[c]){var d=4*l,p=u[d],f=u[d+1],h=u[d+2],v=u[d+3];a[c]=!0;var g=t.___queryXYWH(p,f,h,v,[],[],i?c:-1);g.length>0&&r.push(o([c],g))}}}e.divide&&(this.___iterateBranchAgainstTree(e.northeast,t,r,a),this.___iterateBranchAgainstTree(e.northwest,t,r,a),this.___iterateBranchAgainstTree(e.southeast,t,r,a),this.___iterateBranchAgainstTree(e.southwest,t,r,a))}},e.prototype.___queryXYWH=function(e,r,a,n,o,i,s){void 0===s&&(s=-1);var A=this.items,u=this.itemsXYWH;if(c(this.boundry,e,r,a,n)){for(var l=0;l<this.index;l++){var d=A[l];if(!i[d]&&d!==s){var p=4*l;t.intersectsXYWH_XYWH(e,r,a,n,u[p],u[p+1],u[p+2],u[p+3])&&(i[d]=1,o.push(d))}}this.divide&&(this.northeast.___query(e,r,a,n,o,i,s),this.northwest.___query(e,r,a,n,o,i,s),this.southeast.___query(e,r,a,n,o,i,s),this.southwest.___query(e,r,a,n,o,i,s))}return o},e.prototype.insert=function(e,t){var r=e.radius,a=e.pos.x,n=e.pos.y,o=2*r,i=2*r,s=e.sleepingAABB?0:1;if(this.AABB_VEL){var A=e.vel.x*-t,u=e.vel.y*-t;A>0?o+=A:(a+=A,o-=A),u>0?i+=u:(n+=u,i-=u)}var c=a-r,p=n-r,f=c<0?0:c,h=p<0?0:p,v=[f,h,o,i];if(!l(this.boundry,v))return!1;if(this.references[this.totalItems]=e,this.totalItems++,!(this.index<this.capacity))return this.divide||this.subDivide(),this.northeast.insert(this.REFERENCE_INDEX,v,s)?(this.REFERENCE_INDEX++,!0):this.northwest.insert(this.REFERENCE_INDEX,v,s)?(this.REFERENCE_INDEX++,!0):this.southeast.insert(this.REFERENCE_INDEX,v,s)?(this.REFERENCE_INDEX++,!0):this.southwest.insert(this.REFERENCE_INDEX,v,s)?(this.REFERENCE_INDEX++,!0):void this.REFERENCE_INDEX++;this.items[this.index]=this.REFERENCE_INDEX,this.itemsSleepState[this.index]=s;var g=4*this.index;return this.itemsXYWH[g]=f,this.itemsXYWH[g+1]=h,this.itemsXYWH[g+2]=o,this.itemsXYWH[g+3]=i,this.index++,this.REFERENCE_INDEX++,!!d(this.boundry,v)||void 0},e.prototype.subDivide=function(){var e=this.boundry[0],t=this.boundry[1],r=this.boundry[2],a=this.boundry[3],n=this.maxDepth,o=this.capacity;this.northeast?(this.northeast.update(e+.5*r,t,.5*r,.5*a,o,0,n),this.northwest.update(e,t,.5*r,.5*a,o,0,n),this.southeast.update(e+.5*r,t+.5*a,.5*r,.5*a,o,0,n),this.southwest.update(e,t+.5*a,.5*r,.5*a,o,0,n)):(this.northeast=new f([e+.5*r,t,.5*r,.5*a],o,0,n),this.northwest=new f([e,t,.5*r,.5*a],o,0,n),this.southeast=new f([e+.5*r,t+.5*a,.5*r,.5*a],o,0,n),this.southwest=new f([e,t+.5*a,.5*r,.5*a],o,0,n)),this.divide=!0},e.prototype.___query=function(e,r,a,n){var o=[],i=[],s=this.items,A=this.itemsXYWH;if(c(this.boundry,e,r,a,n)){for(var u=0;u<this.index;u++){var l=s[u];if(!o[l]){var d=4*u;t.intersectsXYWH_XYWH(e,r,a,n,A[d],A[d+1],A[d+2],A[d+3])&&(o[l]=1,i.push(l))}}this.divide&&(this.northeast.___query(e,r,a,n,i,o),this.northwest.___query(e,r,a,n,i,o),this.southeast.___query(e,r,a,n,i,o),this.southwest.___query(e,r,a,n,i,o))}var p=i.length;if(0===p)return[];var f=new Array(p);for(u=0;u<p;u++)f[u]=this.references[i[u]];return f},e.prototype.query=function(e){var t=e.radius;return this.___query(e.pos.x-t,e.pos.y-t,2*t,2*t)},e.prototype.queryShape=function(e){for(var t=Number.MAX_VALUE,r=Number.MIN_VALUE,n=Number.MAX_VALUE,o=Number.MIN_VALUE,i=e.length,s=0;s<i;s++){var A=e[s];A.x>r&&(r=A.x),A.x<t&&(t=A.x),A.y>o&&(o=A.y),A.y<n&&(n=A.y)}for(var u=new a.Rectangle(t,n,r-t,o-n),l=this.queryInt(u),c=l.length,d=0;d<c;d++)for(var p=l[d],f=new a.Rectangle(p.pos.x-p.radius,p.pos.y-p.radius,2*p.radius,2*p.radius).toPointArray(),h=0;h<4;h++){var v=f[h],g=(s=0,0),y=void 0;for(s=0,g=i-1;s<i;g=s++)e[s].y>v.y!=e[g].y>v.y&&v.x<(e[g].x-e[s].x)*(v.y-e[s].y)/(e[g].y-e[s].y)+e[s].x&&(y=!y);if(y)return[p]}return[]},e.prototype.queryRay=function(e,t){for(var r,a,o,i,s,A,u=Math.min(e.x,t.x),l=Math.min(e.y,t.y),c=Math.max(e.x,t.x)-u,d=Math.max(e.y,t.y)-l,p=this.___query(u,l,c,d),f=e.x,h=e.y,v=t.x,g=t.y,y=[],m=p.length,x=0;x<m;x++){var S=p[x],_=S.pos.x,T=S.pos.y,E=S.radius;n.LineIntersects(f,h,v,g,_-E,T-E,_+E,T-E)?y.push(S):n.LineIntersects(f,h,v,g,_+E,T-E,_+E,T+E)?y.push(S):n.LineIntersects(f,h,v,g,_-E,T+E,_+E,T+E)?y.push(S):n.LineIntersects(f,h,v,g,_-E,T-E,_-E,T+E)?y.push(S):(a=T,o=E,i=E,A=h,(r=_)>(s=f)||r+o<s||a>A||a+i<A||y.push(S))}return y},e.prototype.queryCircle=function(e,t){var a=this.___query(e.x-t,e.y-t,2*t,2*t);if(0===a.length)return a;for(var n,o,i,s,A,u=.7*t,l=[e.x-u,e.y-u,2*u,2*u],c=a.length,d=[],p=0;p<c;p++){var f=a[p];n=l,o=f.pos.x-f.radius,i=f.pos.y-f.radius,s=2*f.radius,A=2*f.radius,n[0]>o+s||n[0]+n[2]<o||n[1]>i+A||n[1]+n[3]<i?r.radiusIntersectXYXY(e.x,e.y,t,f.pos.x,f.pos.y,f.radius)&&d.push(f):d.push(f)}return d},e.prototype.queryInt=function(e){return this.___query(e.x,e.y,e.width,e.height)},e.prototype.groupResult=function(e,t){for(var r=e.length,a={},n=0;n<r;n++){var o=e[n],i=o.type;(u=a[i])||(u=a[i]=[]),u.push(o)}a[3001]=e;var s=[],A=t.length;for(n=0;n<A;n++){var u;if(u=a[t[n]])for(var l=u.length,c=0;c<l;c++)s.push(u[c])}return a[3002]=s,a},e.prototype.queryVecTypes=function(e,t,r,a){var n=this.___query(e.x-t,e.y-r,2*t,2*r);return this.groupResult(n,a)},e.prototype.queryVec=function(e,t,r){return this.___query(e.x-t,e.y-r,2*t,2*r)},e.prototype.destroy=function(){this.northeast=null,this.northwest=null,this.southeast=null,this.southwest=null},e.prototype.reset=function(){this.index=0,this.totalItems=0,this.REFERENCE_INDEX=0,this.references=[],this.divide&&(this.northeast.reset(),this.northwest.reset(),this.southeast.reset(),this.southwest.reset()),this.divide=!1},e.prototype.getRangeType=function(){return"UINT16"},e.prototype.setup=function(e,t,r,a,n){void 0===a&&(a=8),void 0===n&&(n=!1);var o=e.x,s=e.y,A=e.width,u=e.height;this.boundry=new Uint16Array([o<0?0:o,s<0?0:s,A,u]),(o>65535||s>65535||A>65535||u>65535)&&console.log("Out of range @ Quadtree constructor "+this.boundry.join(",")+" "+i.TypesToString(this.itemType)),this.AABB_VEL=n,this.items=new Uint16Array(t),this.itemsSleepState=new Uint8Array(t),this.itemsXYWH=new Uint16Array(4*t),this.capacity=t,this.itemType=r,this.references=[],this.REFERENCE_INDEX=0,this.index=0,this.totalItems=0,this.minX=65535,this.minY=65535,this.maxW=0,this.maxH=0,this.maxDepth=a},e.prototype.visualize=function(e,t,r,a){if(this.divide){var n=600/this.boundry[2],o=10;this.__visualize(n,o,e,t,r,a,r-300,a+40,this.northwest),this.__visualize(n,o,e,t,r,a,r-100,a+40,this.northeast),this.__visualize(n,o,e,t,r,a,r+100,a+40,this.southwest),this.__visualize(n,o,e,t,r,a,r+300,a+40,this.southeast)}},e.prototype.__visualize=function(e,t,r,a,n,o,i,s,A){r.push(n,o,i,s);var u=A.boundry;r.push(u[0]*e+100,u[1]*e+240,(u[0]+u[2])*e+100,u[1]*e+240,(u[0]+u[2])*e+100,u[1]*e+240,(u[0]+u[2])*e+100,(u[1]+u[3])*e+240,u[0]*e+100,u[1]*e+240,u[0]*e+100,(u[1]+u[3])*e+240,u[0]*e+100,(u[1]+u[3])*e+240,(u[0]+u[2])*e+100,(u[1]+u[3])*e+240),t*=.25,A.divide?(this.__visualize(e,t,r,a,i,s,i-30*t,s+40,A.northwest),this.__visualize(e,t,r,a,i,s,i-10*t,s+40,A.northeast),this.__visualize(e,t,r,a,i,s,i+10*t,s+40,A.southwest),this.__visualize(e,t,r,a,i,s,i+30*t,s+40,A.southeast)):A.southwest&&(this.__visualize(e,t,a,a,i,s,i-30*t,s+40,A.northwest),this.__visualize(e,t,a,a,i,s,i-10*t,s+40,A.northeast),this.__visualize(e,t,a,a,i,s,i+10*t,s+40,A.southwest),this.__visualize(e,t,a,a,i,s,i+30*t,s+40,A.southeast))},e}();t.QuadTreeUint16=h}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(9),r(3),r(6)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var A=[],u=[],l=0,c=1,d=0;t.default=function(e){A=[],u=[];e.game;var t=e.gl,p=e.SH,f=e.stepMS,h=e.SW,v=e.step;if(o.default(e)?(d-=5e-4*f*3*v,l=0):(d+=5e-4*f*v,l+=f),d>1?d=1:d<0&&(d=0,c=1),d>0){r.fillPoly(0,0,0,h,p,u);var g=s.map(l,.9*i.LEVEL_COMPLETION_TIMEOUT,i.LEVEL_COMPLETION_TIMEOUT,.1,.5,!0);r.fillPoly(-1,0,0,h,p*g*d,A),r.fillPoly(-1,0,p-p*g*d,h,p*g,A)}return A.length>0&&(a.default(n.GLctx.Vertices,t),t.blendFunc(t.DST_COLOR,t.ZERO),l>.7*i.LEVEL_COMPLETION_TIMEOUT&&(c>0&&(c-=.01),r.drawColor(u,t,1,c,c,1)),r.drawColor(A,t,0,0,0,1),t.blendFunc(t.ONE,t.ONE)),"cinematic"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(14)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[],s={},A=[];t.default=function(e){i=[];e.game;for(var t=e.gl,u=e.SH,l=e.SW,c=o.getForce2Tree().queryInt(e.game.screen.rect),d=0;d<c.length;d++){var p=c[d];if(1===p.type&&p.radius>200&&!s[p.pos.x+"_"+p.pos.y]){s[p.pos.x+"_"+p.pos.y]=!0,A.push({x:p.pos.x,y:p.pos.y}),r.fillPoly(-1,0,0,l,u,i);break}}if(i.length>0){a.default(n.GLctx.Vertices,t);r.drawColor(i,t,.15,.15,.15,.15)}else if(A.length>30){var f=A.shift();delete s[f.x+"_"+f.y]}return"highlight"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(55),r(55),r(6),r(3),r(5),r(22),r(14)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=e.game,u=(e.SX,e.SY,e.SW,e.SH,e.gl,i.getQuadTreesObj());if(u.All){for(var l=t.screen.rect,c=u.queryTreesRect([44,49,2,22],l),d=c.length,p=0;p<d;p++){var f,h=c[p];if(22===h.type){if(h.life<.2*o.SPACEPORT_START_LIFE)(f=n.map(h.life,0,.2*o.SPACEPORT_START_LIFE,.2,1,!0,!0))>.2&&r.default(e,h.pos,12*f,800*f)}else(f=n.map(h.life,0,o.PLAYER_LIFE_LOW_THRESHOLD,.2,1,!0,!0))>.2&&(r.default(e,h.pos,5*f,150*f),Math.random()>.9&&s.Glow(h.pos,.02*Math.random(),[],e,1,1,1,Math.random()))}return A.getForce2Tree().queryInt(t.screen.rect).map(function(a){a.positive&&1===a.type&&t.screen.rect.intersectsPoint(a.pos)&&r.default(e,a.pos,3===a.radius?20:.1*a.radius,40+20*Math.random())}),a.drawSparks(e),"Sparks"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(2),r(1),r(2)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[],s=[],A=new n.Vector(0,0);t.default=function(e){e.ctx,e.WW,e.WH;var t=e.game,n=(e.SW,e.SH,e.SX),u=e.SY,l=e.gl;s=[],i=[];for(var c=0;c<t.spaceSpiders.length;c++){var d=t.spaceSpiders[c];if(o.onStage(e,d.pos.x,d.pos.y,10*d.radius)){var p=d.pos.x-n,f=d.pos.y-u,h=d.angle,v=d.radius;a.blockCirclePoly(8,v,p,f,h,s,null,null,null,v),A.set(v,0),A.setAngle(h),a.blockCirclePoly(8,.8*v,p+A.x,f+A.y,h,s,null,null,null,.8*v),A.mult(-.8),a.blockCirclePoly(8,.6*v,p+A.x,f+A.y,h,s,null,null,null,.6*v),A.mult(2),a.blockCirclePoly(8,.5*v,p+A.x,f+A.y,h,s,null,null,null,.5*v);for(var g=0;g<d.legs.length;g++)for(var y=d.legs[g],m=0;m<y.bones.length;m++){var x=y.bones[m],S=y.bones[m-1];if(m>0){var _=(y.bones.length-m)/y.bones.length*2,T=x.pos.x-n,E=x.pos.y-u,M=S.pos.x-n,I=S.pos.y-u;m>1&&i.push(T,E,M,I),a.line2PolyCone(T,E,M,I,s,.1*v*_,.25*v*_)}}}}return s.length>0&&(l.disable(l.BLEND),r.default(r.GLctx.Vertices,l),a.drawColor(s,l,.05,.05,.05,1),a.drawColor(i,l,.18,.02,.02,1,l.LINES),l.enable(l.BLEND)),"space spiders"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(8),r(0),r(2),r(3),r(6)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=[],A=[],u=[],l=0,c=performance.now(),d=0;t.default=function(e){if(e.game.menuSettings.heap){var t=e.gl,p=e.stepMS,f=e.game,h=window.performance.memory.totalJSHeapSize/1e6,v=window.performance.memory.usedJSHeapSize/1e6,g=performance.now()-c;c=performance.now();var y=1e3/g;d>100&&(d=0,u.push(y),A.push(h),s.push(v)),d+=p,A.length>f.resW-l&&(A.shift(),s.shift(),u.shift()),a.default(a.GLctx.VerticesOverlay,t);for(var m=[],x=[],S=[],_=0;_<A.length;_++)m.push(_,400-A[_]),x.push(_,400-s[_]),S.push(_,400-u[_]);var T=0;for(_=3;_<x.length;_+=3)s[_-3]>s[_]+20&&T++;n.drawColor(S,t,0,0,.6,1,t.LINE_STRIP),n.drawColor(m,t,1,0,0,1,t.LINE_STRIP),n.drawColor(x,t,0,1,0,1,t.LINE_STRIP);var E=r.default.createSplitted("TOTAL: "+i.normalize(h,"heap total",10,0).avg,o.TEXT_SIZE_SMALL,"r",""),M=r.default.createSplitted("CURR : "+i.normalize(v,"heap curr",10,0).avg,o.TEXT_SIZE_SMALL,"g",""),I=r.default.createSplitted("FPS  : "+i.normalize(y,"fps curr",10,0).avg,o.TEXT_SIZE_SMALL,"b",""),L=r.default.createSplitted("M.GC : "+T,o.TEXT_SIZE_SMALL,"w","");0===l&&(l=200);var w=a.default(a.GLctx.Texture,t),b=A.length+10;return r.default.addListGL(t,w,E,b,50,e),r.default.addListGL(t,w,M,b,70,e),r.default.addListGL(t,w,I,b,90,e),r.default.addListGL(t,w,L,b,110,e),"heap"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(7),r(2),r(6),r(5),r(62),r(2),r(54)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=[],c=[],d=[],p=[];t.default=function(e){var t=e.SW,f=e.SH,h=e.SX,v=e.SY,g=e.gl,y=(e.game,e.step);d=[],p=[],l=[],c=[];var m=i.getQuadTreesObj();if(m.All){var x=a.rect_pool_pop(h-u.PROXIMITY_MINE_RAY_LENGTH,v-u.PROXIMITY_MINE_RAY_LENGTH,t+2*u.PROXIMITY_MINE_RAY_LENGTH,f+2*u.PROXIMITY_MINE_RAY_LENGTH),S=m.queryTreesRect([41],x);a.rect_pool_put(x);for(var _=S.length,T=0;T<_;T++){var E=S[T],M=E.pos;d.push(M.x-h,M.y-v,E.intersectA.x-h,E.intersectA.y-v),d.push(M.x-h,M.y-v,E.intersectA.x-h-4,E.intersectA.y-v),d.push(M.x-h,M.y-v,E.intersectA.x-h,E.intersectA.y-v-4),E.intersectAaquired?1===E.aquireMode?n.addToColorMap(p,d,.6*o.RandomStepBased(y,E.guid),.05,.05,1):2===E.aquireMode&&n.addToColorMap(p,d,.05,.6*o.RandomStepBased(y,E.guid),.05,1):n.addToColorMap(p,d,.1,.1,.8*o.RandomStepBased(y,E.guid),1),d.push(M.x-h,M.y-v,E.intersectB.x-h,E.intersectB.y-v),d.push(M.x-h,M.y-v,E.intersectB.x-h-4,E.intersectB.y-v),d.push(M.x-h,M.y-v,E.intersectB.x-h,E.intersectB.y-v-4),E.intersectBaquired?1===E.aquireMode?n.addToColorMap(p,d,.3*o.RandomStepBased(y,E.guid),.05,.05,1):2===E.aquireMode&&n.addToColorMap(p,d,.05,.3*o.RandomStepBased(y,E.guid),.05,1):n.addToColorMap(p,d,0,0,.1*o.RandomStepBased(y,E.guid),1),1===E.aquireMode&&(A.blockCirclePoly(.05*E.timerT,2*E.radius,M.x,M.y,0,l,0,h,v,3,!1,0,.05*E.aquireTimer,0,.05*E.aquireTimer),n.addToColorMap(c,l,1,.1,.1,1));var I=s.hexBox(E.radius,E.pos,h,v);l.push.apply(l,I[0]),n.addToColorMap(c,l,.1,.1,.1,1),l.push.apply(l,I[1]),n.addToColorMap(c,l,.7,.7,.7,1),l.push.apply(l,I[2]),n.addToColorMap(c,l,.3,.3,.3,1)}}return l.length>0&&(r.default(r.GLctx.Vertices,g),n.drawColorMapSingle(p,d,g,g.LINES),g.disable(g.BLEND),n.drawColorMapSingle(c,l,g),g.enable(g.BLEND)),"proximityMines"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(5),r(62)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=[],i=[];t.default=function(e){e.SW,e.SH;var t=e.SX,s=e.SY,A=e.gl,u=e.game;o=[],i=[];var l=a.getQuadTreesObj();if(l.All)for(var c=u.screen.rect,d=l.queryTreesRect([42],c),p=d.length,f=0;f<p;f++){var h=d[f],v=n.hexBox(h.radius,h.pos,t,s);o.push.apply(o,v[0]),r.addToColorMap(i,o,.1,.1,.1,1),o.push.apply(o,v[1]),r.addToColorMap(i,o,.7,.7,.7,1),o.push.apply(o,v[2]),r.addToColorMap(i,o,.3,.3,.3,1)}return o.length>0&&(A.disable(A.BLEND),r.drawColorMapSingle(i,o,A),A.enable(A.BLEND)),"proximityMines"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(22),r(6),r(5),r(63),r(9),r(4),r(21),r(14)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e,t,a,n,o,s,A,u){for(var l=a.SX,c=a.SY,d=t.length,h=0;h<d;h++){var v=t[h].pos,g=f(v,e);if(0===e.type){(y=p(v,e,l,c)).length>0&&r.GlowCustomLayout(v,.3*n,y,a,o,s,A,u)}else{for(var y=[],m=0;m<g.length;m++)y.push.apply(y,i.GetShipPartComplex(1,e,l,c,g[m]));y.length>0&&r.GlowCustomLayout(v,n,y,a,o,s,A,u)}}},d=function(e,t){var r=n.getQuadTreesObj(),a=(t.SX,t.SY,t.SW,t.SH,t.game),o=(t.WW,t.WH,a.screen.rectSS_400),i=a.screen.rectSS_800,s=r.queryTreesRect([30],o);c(e,s.filter(function(e){return 44===e.ownerType}),t,1.2,0,.2,1,1),c(e,s.filter(function(e){return 44!==e.ownerType}),t,1.4,1,0,0,1),r.queryTreesRect([3],o),c(e,r.queryTreesRect([3],o),t,3,.1,1,.1,1),c(e,r.queryTreesRect([24],o),t,2,.5,.2,.6,1);for(var A=u.getAllAnomalies(t.game),d=0;d<A.length;d++){var p=A[d].pos;i.intersectsPoint(p)&&c(e,[{pos:p}],t,4,1,.2,.1,1)}var f=l.getForce2Tree().queryInt(t.game.screen.rect);for(d=0;d<f.length;d++){var h=f[d];if(1===h.type){var v=.2*Math.random();c(e,[h],t,2*h.radius*Math.random(),v,v,v,.1*v)}}};t.default=function(e){var t=e.game;e.SW,e.SH,e.SX,e.SY,e.WW,e.WH,e.gl;if(t.menuSettings.reflections){var r=n.getQuadTreesObj();if(r.All){var a=s.default(e);a&&d(a,e);for(var o=t.screen.rect,i=r.queryTreesRect([1,2,49,0],o),A=0;A<i.length;A++)d(i[A],e);return"reflections"}}};var p=function(e,t,r,n){var i=Math.atan2(e.y-t.pos.y,e.x-t.pos.x),s=a.normalizeRadianPositive(t.angle-i)-Math.PI,u=Math.abs(s);if(u<.1)return[];var l=A.midpoint(t.comp[0].vertex[1],t.comp[0].vertex[2]),c=A.midpoint(l,t.pos,.1),d=o(o(o([],t.comp[0].vertex[0].toVertArray(r,n)),t.comp[0].vertex[1].toVertArray(r,n)),[c.x-r,c.y-n]),p=o(o(o([],t.comp[0].vertex[0].toVertArray(r,n)),t.comp[0].vertex[2].toVertArray(r,n)),[c.x-r,c.y-n]);return u<.1?void 0:u>Math.PI-.2?o(o([],p),d):(Math.PI,s>0?d:p)},f=function(e,t){var r=Math.atan2(e.y-t.pos.y,e.x-t.pos.x),n=a.normalizeRadianPositive(t.angle-r)-Math.PI,o=Math.abs(n);return o<.1?[4]:o>Math.PI-.2?[2,0,1]:o>Math.PI-.4?n>0?[1,2]:[0,2]:n>0?[1]:[0]}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(5),r(22),r(9),r(38)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=new r.Vector(0,0),A=[],u=0;t.default=function(e){e.SX,e.SY,e.SW,e.SH;var t=e.step,r=e.stepMS,l=e.game,c=!1,d=o.default(e);d&&i.posInAncient(d.pos)&&(c=!0);var p=l.screen.rectSS_800,f=a.getQuadTreesObj(),h=c?[]:f.queryTreesRect([9,10,8],p,!0),v=h.length;if(u>100){if(v>0){var g=h[Math.floor(h.length*Math.random())].pos;s.set(400+1e3*Math.random(),0),s.setAngle(Math.random()*Math.PI*2),s.add(g);var y={x:2.2*(Math.random()-.5),y:2.2*(Math.random()-.5)};A.push({pos:s.toPoint(),vel:y,size:.13*(.1*Math.random()+.05),life:6e3*Math.random()+1200})}u=0}u+=r;for(var m=v>0?r:2.2*r,x=0;x<A.length;x++){(_=A[x]).pos.x+=_.vel.x*t,_.pos.y+=_.vel.y*t,_.vel.x*=.99,_.vel.y*=.99,_.life-=m,_.size-=3e-5,n.Glow({x:_.pos.x,y:_.pos.y},_.size,[],e,Math.min(.001*_.life,.8),0,0,1)}var S=[];for(x=0;x<A.length;x++){var _;(_=A[x]).life>0&&_.size>0&&p.intersectsPoint(_.pos)&&S.push(_)}return A=S,"redParticles"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(5)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[];t.default=function(e){e.SW,e.SH;var t=e.SX,s=e.SY,A=e.gl,u=e.game;i=[];for(var l=u.screen.rect,c=o.getQuadTreesObj().queryTreesRect([44,1,49,8,10,9],l),d=c.length,p=0;p<d;p++){var f=c[p],h=f.radius;switch(f.type){case 10:h*=3;break;case 8:h*=2.5;break;case 9:h*=1.3;break;case 49:h*=2}for(var v=f.pos.x+h-t,g=f.pos.y-h-s,y=Math.min(3,0|f.level),m=0;m<y;m++){var x=v,S=g-1.5*m*4;r.line2Poly(x,S,x-6,S+5,i,1.5),r.line2Poly(x,S,x+6,S+5,i,1.5)}}if(i.length>0){a.default(n.GLctx.Vertices,A);r.drawColor(i,A,.6,.6,0,1)}return"UnitLevelMarker"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(5),r(2),r(0),r(0),r(2),r(4),r(22),r(1)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=[],c=[],d=[],p=[],f=[],h=[],v=([[.2,.2,.5],[.2,.5,.2],[.5,.2,.2]].map(function(e){return e.map(function(e){return.4*e})}),[]),g=new u.Vector(0,0),y=new u.Vector(0,0);t.default=function(e){var t=e.game,u=e.gl,m=e.SX,x=e.SY;e.SW,e.SH;l=[],p=[],c=[],d=[],h=[],f=[],v=[];var S=t.screen.rect,_=r.getQuadTreesObj().queryTreesRect([0],S),T=t.player[0];T&&T.debugCircle&&i.blockCirclePoly(30,T.debugCircle.radius,T.debugCircle.pos.x-m,T.debugCircle.pos.y-x,0,l);for(var E=0;E<_.length;E++){for(var M=_[E],I=s.midpoint(M.comp[0].vertex[2],M.pos,.04),L=s.midpoint(M.comp[0].vertex[1],M.pos,.04),w=s.midpoint(M.comp[0].vertex[2],I,.5),b=s.midpoint(M.comp[0].vertex[1],L,.5),P=0;P<5;P++){var R=s.midpoint(w,b,.165*(P+1));v.push(R)}v[2]=s.midpoint(v[2],M.pos,.012);for(var O=0;O<M.cannons.length;O++){var C=M.cannons[O],G=.03*M.radius;i.blockCirclePoly(12,G,C.pos.x,C.pos.y,C.angle,f,0,m,x,G);for(var D=[C.angle,C.min,C.max],N=0;N<1;N++)y.setLength(0===N?.1*M.radius:40),y.setAngle(D[N]),a.line2Poly(C.pos.x-m,C.pos.y-x,C.pos.x+y.x-m,C.pos.y+y.y-x,f,0===N?3:.5);A.GlowCustomLayout(C.pos,.045,[C.pos.x-m-50,C.pos.y-x-50,C.pos.x-m-50,C.pos.y-x+50,C.pos.x-m+50,C.pos.y-x+50,C.pos.x-m+50,C.pos.y-x-50,C.pos.x-m-50,C.pos.y-x-50,C.pos.x-m+50,C.pos.y-x+50],e,.4,.4,.4,1)}if(i.addToColorMap(h,f,.3,.3,.3,1),M.debugCircle&&i.blockCirclePoly(30,M.debugCircle.radius,M.debugCircle.pos.x-m,M.debugCircle.pos.y-x,0,l),M.debugVectors){var B=M.debugVectors;M.pos;a.line2Poly(B.lineNormalA.x-m,B.lineNormalA.y-x,B.lineNormalB.x-m,B.lineNormalB.y-x,l,2),a.line2Poly(B.lineNormalC.x-m,B.lineNormalC.y-x,B.lineNormalB.x-m,B.lineNormalB.y-x,l,2),a.line2Poly(B.lineNormalD.x-m,B.lineNormalD.y-x,B.lineNormalB.x-m,B.lineNormalB.y-x,l,2)}var F=M.comp[0].vertex;a.line2Poly(F[0].x-m,F[0].y-x,F[1].x-m,F[1].y-x,l,4),a.line2Poly(F[0].x-m,F[0].y-x,F[2].x-m,F[2].y-x,l,4),a.line2Poly(F[1].x-m,F[1].y-x,F[2].x-m,F[2].y-x,l,4);var V=s.midpoint(M.comp[0].vertex[1],M.comp[0].vertex[2]),k=s.midpoint(V,M.pos,.1);A.GlowCustomLayout(M.comp[0].vertex[0],1.5,[k.x-m,k.y-x,M.comp[0].vertex[1].x-m,M.comp[0].vertex[1].y-x,M.comp[0].vertex[0].x-m,M.comp[0].vertex[0].y-x],e,1,.8,.8,1),A.GlowCustomLayout(M.comp[0].vertex[2],1.5,[k.x-m,k.y-x,M.comp[0].vertex[2].x-m,M.comp[0].vertex[2].y-x,M.comp[0].vertex[0].x-m,M.comp[0].vertex[0].y-x],e,.8,.8,.8,1),A.GlowCustomLayout(k,2.5,[k.x-m,k.y-x,M.comp[0].vertex[2].x-m,M.comp[0].vertex[2].y-x,M.comp[0].vertex[1].x-m,M.comp[0].vertex[1].y-x],e,.6,.6,1,1);var X=s.midpoint(M.pos,M.comp[0].vertex[1],.7),H=s.midpoint(M.pos,M.comp[0].vertex[1],.75),U=s.midpoint(M.pos,M.comp[0].vertex[2],.7),W=s.midpoint(M.pos,M.comp[0].vertex[2],.75),Y=s.midpoint(M.pos,M.comp[0].vertex[1],.65),q=(s.midpoint(M.pos,M.comp[0].vertex[1],.8),s.midpoint(M.pos,M.comp[0].vertex[2],.65)),z=(s.midpoint(M.pos,M.comp[0].vertex[2],.8),s.midpoint(M.pos,V,.8)),j=s.midpoint(M.pos,V,.6);A.GlowCustomLayout(M.pos,.5,[U.x-m,U.y-x,W.x-m,W.y-x,z.x-m,z.y-x,j.x-m,j.y-x,z.x-m,z.y-x,U.x-m,U.y-x,X.x-m,X.y-x,H.x-m,H.y-x,z.x-m,z.y-x,j.x-m,j.y-x,z.x-m,z.y-x,X.x-m,X.y-x],e,.4,.4,.4,1),f.push(q.x-m,q.y-x,U.x-m,U.y-x,j.x-m,j.y-x,Y.x-m,Y.y-x,X.x-m,X.y-x,j.x-m,j.y-x),i.addToColorMap(h,f,.3,.3,.3,1);var K=s.midpoint(z,j),Z=s.midpoint(z,j,.55);g.setAngle(M.radarAngle),g.setLength(.12*M.radius),a.line2Poly(K.x-m,K.y-x,g.x+K.x-m,g.y+K.y-x,f,4),g.setAngle(M.radarAngle+Math.PI),a.line2Poly(K.x-m,K.y-x,g.x+K.x-m,g.y+K.y-x,f,4),i.addToColorMap(h,f,1,1,1,1),a.line2Poly(Z.x-m,Z.y-x,g.x+Z.x-m,g.y+Z.y-x,f,2),g.setAngle(M.radarAngle),a.line2Poly(Z.x-m,Z.y-x,g.x+Z.x-m,g.y+Z.y-x,f,2),i.addToColorMap(h,f,0,0,0,1)}if(l.length>0){var Q=o.default(n.GLctx.Vertices,u);u.disable(u.BLEND),i.drawColorMap(p,c,Q,u),i.drawColorMap(h,f,Q,u),u.enable(u.BLEND),u.blendFunc(u.ONE,u.ONE),a.drawColor(d,u,1,1,1,1)}return"Destroyer"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(9),r(10)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={},A=[],u=[],l=[],c=function(e){for(var t=Number.MAX_VALUE,r=Number.MIN_VALUE,a=e.length,n=0;n<a;n++){var o=e[n];o<t&&(t=o),o>r&&(r=o)}var i=r-t;return{min:t,max:r,spread:i,mult:1/(i/100)}},d=0,p=0,f=function(e,t,r,a,n,o){var i=[],A=s[e+"x"];A||(A=s[e+"x"]=[]);var u=s[e+"y"];u||(u=s[e+"y"]=[]),A.push(t),u.push(r);for(var l=c(A),d=c(u),p=A.length,f=0;f<p;f++){var h=(A[f]-l.min)*l.mult,v=(u[f]-d.min)*d.mult;i.push(n-200+f,o-200+h+a),i.push(n-200+f,o-200+v+a)}return A.length>200&&(A.shift(),u.shift()),i};t.default=function(e){var t=e.game,s=e.gl,c=e.SX,h=e.SY,v=e.SW,g=e.SH;if(t.debug){var y=o.default(e);if(y){var m=10*(y.SX-d)+y.SX,x=10*(y.SY-p)+y.SY;d=y.SX,p=y.SY,u.push(m-c+200+.5*v,x-h+.5*g),u.length>300&&(u.shift(),u.shift());for(var S=0;S<u.length;S+=2)u[S]--;y.damageTaken&&i.LOG_GL("damagetaken"),l=f("vel",y.vel.x,y.vel.y,-200,v,g)}if((A=f("camera",c,h,0,v,g)).length>0){n.default(a.GLctx.Vertices,s);r.drawColor(A,s,1,1,1,1,s.POINTS),r.drawColor(l,s,0,1,0,1,s.POINTS),r.drawColor(u,s,1,0,0,1,s.LINES)}return"CameraGraph"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(9),r(5),r(257)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.gl;var t=r.default(e),o=a.getQuadTreesObj();if(o&&o.All&&t)return n.RayCasterLOS(t.pos,1,e,t.guid),"raycaster LOS"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(0),r(0),r(2),r(5),r(2),r(17),r(31),r(6),r(10),r(4)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RayCasterLOS=void 0;var p=[],f=[],h=new r.Vector(0,0),v=new r.Vector(0,0),g=new r.Vector(0,0),y=new r.Vector(0,0),m=new r.Vector(0,0),x=new r.Vector(0,0),S=new r.Vector(0,0),_=new r.Vector(0,0),T=new r.Vector(0,0),E=new r.Vector(0,0),M=new r.Vector(0,0),I=new r.Vector(0,0),L=new r.Vector(0,0),w=new r.Vector(0,0),b=new r.Vector(0,0);new r.Vector(0,0);t.RayCasterLOS=function(e,t,r,c){var P=r.gl,R=r.SH,O=r.SW,C=r.SX,G=r.SY,D=(r.game,O>R?O:R);p=[],f=[];var N=i.getQuadTreesObj();if(N.All){for(var B=D,F=N.queryTreesVec([21],e,B,B),V=0;V<F.length;V++){var k=F[V],X=k.pos,H=Math.atan2(e.y-k.pos.y,e.x-k.pos.x);if(m.set(.8*k.radius,0),m.setAngle(l.normalizeRadianPositive(H)),h.set(k.radius,0),h.setAngle(l.normalizeRadianPositive(H)+.5*Math.PI),g.set(k.radius,0),g.setAngle(l.normalizeRadianPositive(H)-.5*Math.PI),A.ShipLike(k.type)){var U=k.comp[0].vertex,W=[];h.setLength(2*k.radius),g.setLength(2*k.radius);for(var Y=0;Y<3;Y++){S.set(U[Y].x-e.x,U[Y].y-e.y),S.mult(2e6),S.add(e);var q=u.LineIntersectsToPoint(h.x+k.pos.x-C,h.y+k.pos.y-G,g.x+k.pos.x-C,g.y+k.pos.y-G,e.x-C,e.y-G,S.x-C,S.y-G);o.line2Poly(h.x+k.pos.x-C,h.y+k.pos.y-G,g.x+k.pos.x-C,g.y+k.pos.y-G,f,2),o.line2Poly(e.x-C,e.y-G,S.x-C,S.y-G,f,2),q&&W.push(q)}if(3===W.length){for(var z=[0,1,0,2,1,2],j=-1,K=-1,Z=-1,Q=0;Q<z.length;Q+=2){var J=d.distanceBetweenVectors(W[z[Q]],W[z[Q+1]]);J>j&&(j=J,K=z[Q],Z=z[Q+1])}var $=[W[K],W[Z]];d.distanceBetweenVectors(h,$[0])<d.distanceBetweenVectors(h,$[1])?(h.setFromVec($[0]),g.setFromVec($[1])):(h.setFromVec($[1]),g.setFromVec($[0])),h.subtract(X),h.addXY(C,G),g.subtract(X),g.addXY(C,G)}}if(21===k.type){var ee=k,te=[];s.createBlockCirclePolySingleWall(0,0,te,ee.sides,ee.angle,ee.radius),h.setLength(2*k.radius),g.setLength(2*k.radius),W=[];for(var re=0;re<te.length&&(!(q=u.LineIntersectsToPoint(h.x,h.y,g.x,g.y,te[re],te[re+1],te[re+2],te[re+3]))||(W.push(q),2!==W.length));re+=4);2===W.length&&(d.distBetweenVectorsRelative(h,W[0])<d.distBetweenVectorsRelative(h,W[1])?(h.setFromVec(W[0]),g.setFromVec(W[1])):(h.setFromVec(W[1]),g.setFromVec(W[0])))}h.mult(1.2),g.mult(1.2);var ae=X.x+h.x-C,ne=X.y+h.y-G,oe=X.x+g.x-C,ie=X.y+g.y-G,se=Math.atan2(e.y-ne-G,e.x-ae-C)+Math.PI,Ae=Math.atan2(e.y-ie-G,e.x-oe-C)+Math.PI;v.set(5e3,0),v.setAngle(l.normalizeRadianPositive(se)),y.set(5e3,0),y.setAngle(l.normalizeRadianPositive(Ae)),x.setFromVec(m),x.mult(.1),L.set(X.x+h.x-C,X.y+h.y-G),I.set(X.x+g.x-C,X.y+g.y-G),w.set(X.x+v.x-C,X.y+v.y-G),b.set(X.x+y.x-C,X.y+y.y-G),_.setFromVec(I);var ue=Math.atan2(I.y-b.y,I.x-b.x);T.set(Math.min(.4*k.radius,50),0),T.setAngle(l.normalizeRadianPositive(ue)+.5*Math.PI),T.add(_),E.setFromVec(L);var le=Math.atan2(L.y-w.y,L.x-w.x);M.set(Math.min(.4*k.radius,50),0),M.setAngle(l.normalizeRadianPositive(le)-.5*Math.PI),M.add(E);var ce={lightPosX:k.pos.x-m.x-C,lightPosY:k.pos.y-m.y-G,radius:k.radius,itemPosX:k.pos.x-x.x-C,itemPosY:k.pos.y-x.y-G,edgeA_from:_.toPoint(),edgeA_to:T.toPoint(),edgeB_from:E.toPoint(),edgeB_to:M.toPoint(),edgeC_from:{x:k.pos.x-m.x-C,y:k.pos.y-m.y-G},edgeC_to:{x:k.pos.x-x.x-C,y:k.pos.y-x.y-G},polys:[X.x+h.x-C,X.y+h.y-G,X.x+g.x-C,X.y+g.y-G,X.x+v.x-C,X.y+v.y-G,X.x+y.x-C,X.y+y.y-G]};p.push(ce)}a.default(n.GLctx.EdgeGradient,P),P.blendFunc(P.DST_COLOR,P.ZERO);for(var de=p.length,V=0;V<de;V++){var ce=p[V],pe=a.GLUniformLocation(P,"toA"),fe=a.GLUniformLocation(P,"fromA"),he=a.GLUniformLocation(P,"toB"),ve=a.GLUniformLocation(P,"fromB"),ge=a.GLUniformLocation(P,"toC"),ye=a.GLUniformLocation(P,"fromC");P.uniform2f(pe,ce.edgeA_from.x,ce.edgeA_from.y),P.uniform2f(fe,ce.edgeA_to.x,ce.edgeA_to.y),P.uniform2f(he,ce.edgeB_from.x,ce.edgeB_from.y),P.uniform2f(ve,ce.edgeB_to.x,ce.edgeB_to.y),P.uniform2f(ye,ce.edgeC_from.x,ce.edgeC_from.y),P.uniform2f(ge,ce.edgeC_to.x,ce.edgeC_to.y);var me=1*r.game.daylight.darkness_multip;o.drawColor(ce.polys,P,me,me,me,1,P.TRIANGLE_STRIP)}return P.blendFunc(P.ONE,P.ONE),"los shadows"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0),r(8),r(3),r(5),r(9)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t,A,u=e.SX,l=e.SY,c=(e.SW,e.SH,e.gl),d=e.game,p=i.getQuadTreesObj();if(p&&p.All){var f=s.default(e),h=d.screen.rect,v=p.queryTreesRect([3],h);if(13!==d.currentLevel)for(var g=0;g<v.length;g++){var y=v[g],m=null!==(A=f&&(null===(t=y.centerNoneCannon)||void 0===t?void 0:t.aggressionForGuidsHash[f.guid])>0)&&void 0!==A&&A?"r":"g";if(!y.weaponsActive){var x=n.default.create("SPACEPORT",o.TEXT_SIZE_MEDIUM,m),S=n.default.create((y.name||"")+" CLASS",o.TEXT_SIZE_MEDIUM,m),_=y.centerNoneCannon,T=_&&_.life<.2*o.SPACEPORT_START_LIFE,E=r.default(Math.random()>.98||T?a.GLctx.TextureDist:a.GLctx.Texture,c),M=_.pos.x-.5*x.w-u,I=_.pos.y-.7*y.radius-l;n.default.addGL(c,E,x,M,I,e,!0),n.default.addGL(c,E,S,M,I+o.TEXT_SIZE_MEDIUM,e,!0)}}return"spaceport texts"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0),r(2),r(10),r(8),r(4),r(9),r(3),r(2)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(new Date).getTime();t.default=function(e){e.SW,e.SH,e.SX,e.SY,e.gl,e.game}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(128),r(0),r(58),r(6),r(5)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var A=[],u=[],l=[],c=[];o.createRamp(u,80,0,1,.2),o.createRamp(u,20,1,0,.2),o.createRamp(l,8,0,.2,.1),o.createRamp(l,8,.2,0,.1),o.createRamp(l,44,0,.3,.1),o.createRamp(l,40,.4,0,.1),o.createRamp(c,50,1,.1,.15),o.createRamp(c,50,.1,0,.15),o.createRamp([],100,0,1,.1),t.default=function(e){e.SW,e.SH,e.SX,e.SY;var t=e.gl,d=e.game,p=e.step;A=[];for(var f=s.getQuadTreesObj().queryTreesRect([26],d.screen.rectSS_200),h=0;h<f.length;h++){var v=f[h],g=Math.round(v.colorRamp);if(o.rampSize[g]>.01){g<50&&!v.collided&&a.RayCaster(v.pos,.2,e,u[g],l[g],c[g],1,v.vel.getAngle(),o.rampSize[g]);v.large;a.RayCaster(v.pos,.18*(v.large?o.rampSize[g]*(i.RandomStepBased(p,v.guid)>.8?9:6):o.rampSize[g]),e,u[g]*(v.large?.3:1),l[g]*(v.large?.3:1),c[g]*(v.large?.3:1),1)}}return A.length>0&&(n.default(n.GLctx.Vertices,t),r.drawColor(A,t,1,1,1,1)),"FlameThrower"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0),r(2),r(7),r(9)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o.rect_pool_pop(0,0,0,0),A=o.rect_pool_pop(0,0,0,0);t.default=function(e){var t=e.gl,o=e.game,u=e.SX,l=e.SY,c=e.SW,d=e.SH,p=o.traceLine,f=p.length;s.x=u,s.y=l,s.width=c,s.height=d;for(var h=i.default(e),v=0;v<f;v++){for(var g=[],y=p[v],m=y.line,x=m.length-1,S=0;S<x;S++){var _=m[S],T=m[S+1];T&&(A.x=Math.min(_.x,T.x),A.y=Math.min(_.y,T.y),A.width=Math.max(_.x,T.x)-A.x,A.height=Math.max(_.y,T.y)-A.y,s.intersects(A)&&g.push(_.x-u,_.y-l,T.x-u,T.y-l))}if(h&&y.active){var E=y.line[y.line.length-1];E&&(g.push(E.x-u,E.y-l),g.push(h.pos.x-u,h.pos.y-l))}g.length>0&&(r.default(a.GLctx.Vertices,t),n.drawColor(g,t,y.r,y.g,y.b,y.a,t.LINES))}return"TraceLineGL"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(2),r(5),r(3)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var A=[],u=[];t.default=function(e){e.SW,e.SH;var t=e.SX,s=e.SY,l=e.gl,c=e.game,d=i.getQuadTreesObj();if(d.All){var p=c.screen.rectSS_200,f=d.queryTreesRect([21],p);A=[],u=[];for(var h=0;h<f.length;h++){var v=f[h];r.createBlockCirclePolySingleWall(v.pos.x-t,v.pos.y-s,A,v.sides,v.angle,v.radius,!0)}A.length>0&&(l.blendFunc(l.DST_COLOR,l.ZERO),a.default(n.GLctx.Vertices,l),o.drawColor(A,l,0,0,0,1),l.blendFunc(l.ONE,l.ONE),o.drawColor(u,l,1,0,0,1))}return"Ancient"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(5),r(7),r(8),r(3),r(57),r(17)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=[],d=[],p=[];t.default=function(e){var t=e.gl,f=e.game,h=e.SX,v=e.SY;if(!f.menuSettings.debugItems.aabb)return"debug aabb (disabled)";c=[],d=[],p=[];for(var g=n.default(a.GLctx.Texture,t),y=o.getQuadTreesObj().All,m=y.getAABBdata_I_XYWH_S(f.screen.rect.x,f.screen.rect.y,f.screen.rect.width,f.screen.rect.height),x=m.aabb,S=[],_=[],T=x.length,E=x,M=0;M<T;M+=6){var I=E[M+1],L=E[M+2],w=E[M+3],b=E[M+4],P=E[M+5];if(w>400){var R=E[M],O=s.default.create(l.TypesToString(y.references[R].type),A.TEXT_SIZE_SMALL,1===P?"b":"g");s.default.addGL(t,g,O,I-h,L-v,e,!0),s.default.addGL(t,g,O,I+w-h-O.w,L-v,e,!0),s.default.addGL(t,g,O,I+w-h-O.w,L+b-v-A.TEXT_SIZE_SMALL,e,!0),s.default.addGL(t,g,O,I-h,L+b-v-A.TEXT_SIZE_SMALL,e,!0)}1===P?S.push(new i.Rectangle(I,L,w,b)):_.push(new i.Rectangle(I,L,w,b))}for(M=0;M<_.length;M++)r.rectanglePolyRect(_[M],h,v,d);for(M=0;M<S.length;M++)r.rectanglePolyRect(S[M],h,v,p);var C=m.nodes;if(f.currentLevel>=13)for(M=0;M<C.length;M+=8){I=C[M],L=C[M+1],w=C[M+2],b=C[M+3];var G=C[M+4],D=C[M+5]/u.FST32_NODE_LOOP_BASE,N=C[M+6],B=C[M+7],F=new i.Rectangle(I,L,w,b);e.game.screen.rect.intersects(F)&&(s.default.addListGL(t,g,s.default.createSplitted(G+"/"+D+" ("+N+"/"+B+")",A.TEXT_SIZE_SMALL,"w",""),I+10-h,L+10-v,e,!0),r.rectanglePolyRect(F,h,v,c))}return n.default(a.GLctx.Vertices,t),r.drawColor(c,t,0,.8,0,1,t.LINES),r.drawColor(d,t,1,0,0,1,t.LINES),r.drawColor(p,t,0,1,1,1,t.LINES),"debug aabb"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(3),r(2),r(14),r(7),r(8)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=[],c=[],d=[],p=[];t.default=function(e){var t=e.gl,f=e.game,h=e.SX,v=e.SY;if(!f.menuSettings.debugItems.forces)return"forces debug (disabled)";l=[],c=[],p=[],d=[];for(var g=n.default(a.GLctx.Texture,t),y=s.getForce2Tree().queryInt(f.screen.rect),m=0;m<y.length;m++){var x=y[m],S=s.debugForce2.getOrCreateCachedForceField(x);u.default.addGL(t,g,u.default.create(S.field.length+" x "+.5*S.field[0].length+" "+S.fx+"|"+S.fy+" s:"+x.sizeRoundedToOddRes+" i:"+Math.round(x.intensity),20,"w"),x.pos.x-x.radius-h,x.pos.y-x.radius-30-v,e),i.drawRectPoly(new A.Rectangle(x.pos.x-x.radius,x.pos.y-x.radius,2*x.radius,2*x.radius),h,v,d,1);for(var _=S.field,T=S.field.length,E=2*T,M=0;M<T;M++)for(var I=_[M],L=0;L<E;L+=2){var w=I[L],b=I[L+1],P=.5*L*o.FORCEFIELD_RESOLUTION_F2+.5*o.FORCEFIELD_RESOLUTION_F2-h+x.pos.x-x.radius,R=M*o.FORCEFIELD_RESOLUTION_F2+.5*o.FORCEFIELD_RESOLUTION_F2-v+x.pos.y-x.radius;Math.abs(w)>0||Math.abs(b)>0?(l.push(P,R,P+5e3*w,R+5e3*b),c.push(P,R)):p.push(P,R)}}return n.default(a.GLctx.Vertices,t),r.drawColor(p,t,1,0,0,1,t.POINTS),r.drawColor(c,t,0,1,1,1,t.POINTS),r.drawColor(l,t,0,1,1,1,t.LINES),r.drawColor(d,t,1,0,0,1),"forces debug"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(7),r(21)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=[],A=[],u=[],l=[],c=function(e,t,r,a,n,i){var s=e.x-t,A=e.y-r,u=e.width*a,l=e.height*a;return s=s+.5*(e.width-u)+n,A=A+.5*(e.height-l)+i,new o.Rectangle(s,A,u,l)},d=function(e,t,r,a,n,i,s,A){var u=e.pos.x-t-e.radius,l=e.pos.y-r-e.radius,c=2*e.radius*a,d=2*e.radius*a;return u*=a,l*=a,u+=n+s,l+=i+A,new o.Rectangle(u,l,c,d)},p=function(e,t,r,a,n,o,i,s){for(var A=e.length,u=0;u<A;u++){var l=e[u];f(l,t,r,a,n,o,i,s)}},f=function(e,t,a,n,o,i,s,A){for(var u=e.length,l=0;l<u;l++){var c=e[l];r.rectanglePolyRect(d(c,n,o,i,a.x,a.y,s,A),0,0,t)}};t.default=function(e){var t=e.gl,d=e.game,f=e.SW,h=e.SH,v=e.SX,g=e.SY;if(!d.menuSettings.debugItems.proceduralCreation||!d.IS_PROCEDURAL)return"debug procedural creation (disabled)";s=[],A=[],u=[],l=[],d.procedural.boundsSS,d.proceduralBounds;var y=h/d.procedural.boundsSS.height*.5,m=.3*-f,x=.1*h,S=c(d.screen.rect,v,g,y,m,x);r.rectanglePolyRect(S,0,0,u);[d.screen.rectSS_200,d.screen.rectSS_800,d.screen.rectSS_1000,d.screen.rectSS_1500,d.screen.rectSS_2000,new o.Rectangle(v-4e3,g-4e3,8e3,8e3),new o.Rectangle(v-4e3,g-4e3,f+8e3,h+8e3)].map(function(e){c(e,v,g,y,m,x)});var _=c(d.proceduralBounds,v,g,y,m,x);r.rectanglePolyRect(_,0,0,u);var T=c(d.procedural.boundsSS,v,g,y,m,x);return r.rectanglePolyRect(T,0,0,s),p([d.asteroids,d.rockFormations,d.ancientBlocks],s,S,v,g,y,0,0),p([d.spacePorts,i.getAllAnomalies(d),d.rockFormationSystemRadius,d.ancients],l,S,v,g,y,0,0),p([d.spaceSquids,d.destroyers,d.enemies,d.spaceSpiders],A,S,v,g,y,0,0),p([d.player],u,S,v,g,y,0,0),n.default(a.GLctx.Vertices,t),r.drawColor(s,t,1,1,1,1,t.LINES),r.drawColor(A,t,1,0,0,1,t.LINES),r.drawColor(u,t,0,1,1,1,t.LINES),r.drawColor(l,t,.2,1,.2,1,t.LINES),"debug procedural creation"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(5)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[],s=[];t.default=function(e){var t=e.gl,A=e.game,u=e.SX,l=e.SY;if(!A.menuSettings.debugItems.predatorTarget)return"debug predator target (disabled)";i=[],s=[];var c=[];return o.getQuadTreesObj().customOperator([5,7,9,16],function(e){c.push.apply(c,e.queryInt(A.screen.rectSS_2000))}),c.map(function(e){e.restPos&&e.restPos.x&&r.line2Poly(e.pos.x-u,e.pos.y-l,e.restPos.x-u,e.restPos.y-l,i,2),e.preyPos&&e.preyPos.x&&r.line2Poly(e.pos.x-u,e.pos.y-l,e.preyPos.x-u,e.preyPos.y-l,s,2)}),n.default(a.GLctx.Vertices,t),r.drawColor(i,t,0,1,0,1),r.drawColor(s,t,1,0,0,1),"debug debug predator target"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(2),r(53)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=[],A=0;t.default=function(e){var t=e.gl,u=e.SW;s=[];var l=i.getRequestsInFlight();l>0?(A+=3)>600&&(A=600):A=0;for(var c=.5*u,d=0;d<l;d++)o.line2Poly(c-.5*A,20*(d+1),c+.5*A,20*(d+1),s,2);return s.length>0&&(n.default(a.GLctx.Vertices,t),r.drawColor(s,t,.1,.8,.8,1)),"AjaxRequests"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(8),r(0),r(3),r(9)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.default.createSplitted("1234567890:",n.TEXT_SIZE_SMALL,"g"),t.default=function(e){var t,i=e.game,s=e.gl,A=i.daylight.is_night;if(!(i.currentLevel<=13)){var u=i.resW,l=o.default(e);if(l&&(null===(t=l.abilities.hash[1])||void 0===t||!t.activated)){var c=n.TEXT_SIZE_SMALL,d=l.credits+"$ ",p=l.abilities.hash[11];if(p){var f=p.data;f.iron.value>0&&(d+="["+Math.floor(f.iron.value)+"Ir] "),f.platinum.value>0&&(d+="["+Math.floor(f.platinum.value)+"Pl] "),f.minerals.value>0&&(d+="["+Math.floor(f.minerals.value)+"Mi] ")}var h=r.default.createSplitted(d,c,A?"r":"g",""),v=a.default(a.GLctx.Texture,s);return r.default.addListGL(s,v,h,.5*u-h[0].w*d.length*.5,8,e),"credits"}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(9),r(2),r(0),r(0),r(6),r(1),r(17),r(8),r(4),r(3)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=[],p=[],f=0,h=0,v=new s.Vector(0,0),g=new s.Vector(0,0),y=function(e,t,r,n,o,s){1===o&&(f+=.004*Math.PI,h+=.001*Math.PI,f>=2*Math.PI&&(f=0),h>=2*Math.PI&&(h=0));var A=Math.max(.8*n,60)*i.map(o,0,.25,0,1,!0);a.blockCirclePoly(128,A,t,r,Math.PI/12+f,e,0,0,0,4,!1,0,Math.floor(128/6*o),0,Math.floor(128/6*o)),a.blockCirclePoly(128,A,t,r,Math.PI+Math.PI/12+f,e,0,0,0,4,!1,0,Math.floor(128/6*o),0,Math.floor(128/6*o)),a.blockCirclePoly(128,A-8,t,r,.5*-Math.PI+h,e,0,0,0,2,!1,0,Math.floor(64*o),0,Math.floor(64*o)),v.setLength(A-12),g.setLength(A-24);for(var u=A-19,l=Math.min(.3*A,48),c=Math.ceil(l*o),d=0;d<c;d++){var p=d*(Math.PI/l)*.4;v.setAngle(p),g.setAngle(p),d/c>=s&&g.setLength(u),a.line2Poly(t+v.x,r+v.y,t+g.x,r+g.y,e,1)}};t.default=function(e){var t,s,f=e.game,h=e.gl,v=e.SX,g=e.SY;if(!(f.currentLevel<=13)){var m=r.default(e);if(m&&m.abilities.hash[4]&&(null===(t=m.abilities.hash[1])||void 0===t||!t.activated)){d=[],p=[];var x=m.abilities.hash[4].data;if(x.timer>.5*x.timerT&&m.aimTarget){var S=m.aimTarget,_=(x.timer-.5*x.timerT)/(.5*x.timerT);m.targetLock||i.map(x.timer,.5*x.timerT,x.timerT,0,1,!0);if(x.timer>.75*x.timerT||Math.random()>.8){var T=A.EnemyLike(null===(s=x.target)||void 0===s?void 0:s.type)?d:p;y(T,S.pos.x-v,S.pos.y-g,S.radius,_,S.life/S.oLife),a.line2Poly(S.pos.x-S.radius-.09*S.radius*_-v,S.pos.y-g,S.pos.x-S.radius+.09*S.radius*_-v,S.pos.y-g,T,2),a.line2Poly(S.pos.x-v,S.pos.y-S.radius-.09*S.radius*_-g,S.pos.x-v,S.pos.y-S.radius+.09*S.radius*_-g,T,2),a.line2Poly(S.pos.x+S.radius-.09*S.radius*_-v,S.pos.y-g,S.pos.x+S.radius+.09*S.radius*_-v,S.pos.y-g,T,2),a.line2Poly(S.pos.x-v,S.pos.y+S.radius-.09*S.radius*_-g,S.pos.x-v,S.pos.y+S.radius+.09*S.radius*_-g,T,2)}}if(m.targetLock){S=m.targetLock;var E=A.EnemyLike(m.targetLock.type),M=(T=E?d:p,x.timer-.75*x.timerT),I=i.map(M,0,.25*x.timerT,0,1,!0,!0),L=x.timer>.75?I:1;if(x.dropLockTimer>x.dropLockTimerT-400&&(L=i.map(x.dropLockTimer,x.dropLockTimerT-400,x.dropLockTimerT,0,1,!0,!0)),y(T,S.pos.x-v,S.pos.y-g,S.radius,L,S.life/S.oLife),E&&(null==S?void 0:S.oLife)>0){var w=S.life/S.oLife*S.radius*.5,b=S.pos.x-v-.25*S.radius,P=S.pos.y-g;a.line2Poly(b,P,b+w*L,P,T,2),a.line2Poly(b-2,P-4,b+.5*S.radius+4,P-4,T,1),a.line2Poly(b-2,P+4,b+.5*S.radius+4,P+4,T,1),a.line2Poly(b-2,P-4,b-2,P+4,T,1),a.line2Poly(b+.5*S.radius+4,P-4,b+.5*S.radius+4,P+4,T,1)}(x.timer<.75*x.timerT||Math.random()>.8)&&(a.line2Poly(S.pos.x-S.radius-.09*S.radius-v,S.pos.y-g,S.pos.x-S.radius+.09*S.radius-v,S.pos.y-g,T,2),a.line2Poly(S.pos.x-v,S.pos.y-S.radius-.09*S.radius-g,S.pos.x-v,S.pos.y-S.radius+.09*S.radius-g,T,2),a.line2Poly(S.pos.x+S.radius-.09*S.radius-v,S.pos.y-g,S.pos.x+S.radius+.09*S.radius-v,S.pos.y-g,T,2),a.line2Poly(S.pos.x-v,S.pos.y+S.radius-.09*S.radius-g,S.pos.x-v,S.pos.y+S.radius+.09*S.radius-g,T,2));var R=Math.floor((l.distanceBetweenVectors(m.pos,S.pos)-(S.radius+m.radius))*c.PX_TO_MEETERS_CONVERSION),O=u.default.create((R<5?"<5 ":R)+"M",c.TEXT_SIZE_SMALL,R<5?"r":"g");u.default.addGL(h,n.default(o.GLctx.Texture,h),O,S.pos.x-v-.5*O.w,S.pos.y-g-.5*O.h-(O.h+6),e,!0)}return(d.length>0||p.length>0)&&(n.default(o.GLctx.Vertices,h),a.drawColor(d,h,1,0,0,1),a.drawColor(p,h,0,1,0,1)),"targetlock"}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0),r(2),r(10),r(6),r(271)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var A=[],u=[],l=400;t.default=function(e){e.SW,e.SH,e.SX,e.SY;var t=e.gl,c=e.game,d=c.resW,p=c.resH;u=[],A=[];var f=c.skillTree.timer;if(c.skillTree.active?((f+=.007*e.step)<.5&&(f+=.007*e.step*4),f>1&&(f=1)):((f-=.007*e.step)<.5&&(f-=.007*e.step*4),f<0&&(f=0)),c.skillTree.timer=f,0!==f){(l+=2*e.step)>2.3*p&&(l=-60);for(var h=i.map(f,.7,.8,0,1,!0),v=i.map(f,.65,.7,0,1,!0),g=i.map(f,.8,1,0,1,!0),y=p/4,m=0;m<y;m++)u.push(.5*d*(1-v),h*m*4+(1-h)*p*.5,.5*d+v*d*.5,h*m*4+(1-h)*p*.5);o.LOG_GL_FIXED(h,"fade clamped"),o.LOG_GL_FIXED(f,"fade"),n.fillPoly(0,0,0,d,p,A),t.blendFunc(t.DST_COLOR,t.ZERO),a.default(r.GLctx.Vertices,t),n.drawColor(A,t,1-f,1-f,1-f,0),t.blendFunc(t.ONE,t.ONE),a.default(r.GLctx.VerticesGradient,t);var x=r.GLUniformLocation(t,"u_pos_x"),S=r.GLUniformLocation(t,"u_pos_y"),_=r.GLUniformLocation(t,"u_perimiter");t.uniform1f(x,.5*d),t.uniform1f(S,.5*p),t.uniform1f(_,d*(1+g)*(Math.random()>.99?.5*Math.random()+.5:1)),n.drawColor(u,t,0,.3+.6*(1-h)+(Math.random()>.99?.25*Math.random():.1),0,1,t.LINES),s.default(e,f),a.default(r.GLctx.VerticesGradientLinear,t);var T=r.GLUniformLocation(t,"u_pos_from_x"),E=r.GLUniformLocation(t,"u_pos_from_y"),M=r.GLUniformLocation(t,"u_pos_to_x"),I=r.GLUniformLocation(t,"u_pos_to_y");return t.uniform1f(T,0),t.uniform1f(E,l+30),t.uniform1f(M,0),t.uniform1f(I,l),u=[],n.fillPoly(0,0,l,d,30,u),n.drawColor(u,t,0,.13*i.map(f,.67,.8,0,1,!0),0,1),"SKcontainer"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0),r(2),r(6),r(8),r(3),r(272),r(273),r(276),r(63),r(9),r(277)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=[],h=-1,v=1,g=10,y=!1;t.default=function(e,t){e.SW,e.SH;var m,x,S=e.SX,_=e.SY,T=e.gl,E=e.game,M=E.resW,I=E.resH,L=8*s.SHIP_LENGTH_RADIUS;f=[];var w=E.skillTree.focused,b=w.parent.children,P=100*o.map(t,.7,.75,0,1,!0),R=P,O=P,C=I-2*P;n.cutoffRect(R,O,350,C,40,f),t>=.73&&l.default(e,t,.45*P),t>.95&&w.parent.name&&A.default(e,t,w.parent,R+10,O+10,18,"< ");var G=350+2*P,D=P,N=M-(350+3*P),B=I-2*P;t>.8&&u.default(e,t,w.node,G,D,N-2*L,B,20),n.cutoffRect(G,D,N,B,40,f),O+=56;for(var F=Math.min(b.length,Math.floor(b.length*o.map(t,.8,.9,0,1,!0))),V=O,k=0;k<F;k++){var X=b[k];if(A.default(e,t,X,R+10,V,18),V+=28,X.focused)for(var H=0;H<X.children.length;H++)A.default(e,t,X.children[H],R+10,V,18,"- "),V+=28}if(t>.7){var U=d.default(e);if(U.angle+=.0013*e.step,Math.random()>.9995&&(U.angle+=Math.PI*Math.random()),-1===h&&(h=U.credits),h!==U.credits&&!y){var W=Math.abs(h-U.credits);v=Math.max(Math.round(W/40),1),g=3*v,y=!0}h<U.credits?h+=v:h-=v,Math.abs(h-U.credits)<g&&(h=U.credits,y=!1);var Y=i.default.createSplitted(Math.floor(h)+"$",s.TEXT_SIZE_MEDIUM,h<=0?"r":"g","");i.default.addListGL(T,a.default(r.GLctx.Texture,T),1===t?Y:Y.splice(0,Math.floor(Y.length*o.map(t,.9,1,0,1,!0))),M-P-2*L+10,I-P-2*L-37,e),p.SKwIcon(e,null===(m=w.node.weaponInformation)||void 0===m?void 0:m.type,M-P-2*L,P,t,2*L,I-P-2*L-200);var q=null===(x=U.abilities.hash[11])||void 0===x?void 0:x.data;[{v:(null==q?void 0:q.iron.value)||0,n:"Ir"},{v:(null==q?void 0:q.platinum.value)||0,n:"Pl"},{v:(null==q?void 0:q.minerals.value)||0,n:"Mi"}].map(function(n,A){var u=i.default.createSplitted(Math.floor(n.v)+" "+n.n,s.TEXT_SIZE_SMALL,"g","");i.default.addListGL(T,a.default(r.GLctx.Texture,T),1===t?u:u.splice(0,Math.floor(u.length*o.map(t,.9,1,0,1,!0))),M-P-2*L+10,I-P-2*L-37-s.TEXT_SIZE_SMALL*(A+1),e)});var z=a.default(r.GLctx.Vertices,T);f.push(M-P-2*L,I-P-2*L,M-P,I-P-2*L),f.push(M-P-2*L,I-P-2*L-100,M-P,I-P-2*L-100),f.push(M-P-2*L,P,M-P-2*L,I-P),n.drawColor(f,T,0,1*o.map(t,.7,.8,0,1,!0),0,1,T.LINES);var j=U.pos.x-S-(M-P-L),K=U.pos.y-_-(I-P-L);f=[];var Z=[];c.default(1,U,S+j,_+K,f,Z,{r:0,g:.4*o.map(t,.75,1,0,1,!0)+t>.9?Math.random()>.99?.25*Math.random():.4:.2*Math.random(),b:0},8+.1*Math.random()),n.drawColorMap(Z,f,z,T)}else h=-1,v=1,g=10,y=!1;return"SKitemManager"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0),r(8)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,o,i,s,A,u){void 0===u&&(u="");var l=e.gl;if(t>0){var c=a.default(r.GLctx.Texture,l),d=n.default.create(u+(o.focused?"> ":"")+o.name,A,"g");n.default.addGL(l,c,d,i,s,e,!1)}return"SKitem"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0),r(2),r(8),r(9),r(274),r(275)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=[],l=[],c=[];var d=0,p=0,f=0,h=0,v=0,g=0,y=0;t.default=function(e,t,m,x,S,_,T,E){e.SW,e.SH,e.SX,e.SY;var M=e.gl,I=e.game,L=e.stepMS,w=(I.resW,I.resH,i.default(e));a.default(r.GLctx.Vertices,M),l=[],u=[],c=[];var b,P=I.skillTree.focused;if(d!==P.node.x||p!==P.node.y){v===P.node.x&&g===P.node.y||(v=P.node.x,g=P.node.y,f=d,h=p,y=0);var R=(b=y)*(2-b);d=f+(f-P.node.x)*-R,p=h+(h-P.node.y)*-R,(y+=L/300)>=1&&(d=P.node.x,p=P.node.y,f=d,h=p,y=0)}!function(e,t,r,a,n,o,i,u,l){switch(e.type){case 16:case 18:case 17:A.skillInfoShip(e,t,r,a,n,o,i,u,l);break;default:s.skillInfoGeneral(e,t,r,a,n,o,i,u,l)}}(m,w,x,S,_,T,0===y?1:y,l,c),n.drawColor(u,M,0,1,0,1,M.LINES),n.drawColor(c,M,0,1,0,1);for(var O=a.default(r.GLctx.Texture,M),C=0;C<l.length;C++){var G=l[C];o.default.addGL(M,O,G.text,G.pos.x,G.pos.y,e,!1)}return"SKinfo"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(6),r(3),r(149),r(8)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skillInfoGeneral=void 0;t.skillInfoGeneral=function(e,t,s,A,u,l,c,d,p){var f,h=0,v=i.default.create(e.name.substr(0,e.name.length*c)+(c<0?"#":""),n.TEXT_SIZE_MEDIUM,"g");h=v.w;for(var g=e.description.split(" "),y=[],m="",x=Math.round(g.length*c),S=0;S<x;S++){var _=g[S];m.length+_.length>76&&(y.push(m),m=""),m+=g[S]+" "}y.push(m),c>.3&&d.push({pos:{x:s+20,y:A+20},text:v}),(null===(f=null==e?void 0:e.installationData)||void 0===f?void 0:f.cost)&&c>.9&&d.push({pos:{x:s+20,y:A+n.TEXT_SIZE_LARGE},text:e.aquired?i.default.create("[INSTALLED]",n.TEXT_SIZE_SMALL,"g"):i.default.create("space credits: "+e.installationData.cost+"$",n.TEXT_SIZE_SMALL,t.credits>=e.installationData.cost?"g":"r")});var T=A+20+n.TEXT_SIZE_LARGE+20,E=Math.round(c*y.length);for(S=0;S<E;S++){var M=i.default.create(y[S],n.TEXT_SIZE_SMALL,"g");h=Math.max(M.w,h),d.push({pos:{x:s+20,y:T+n.TEXT_SIZE_SMALL*S},text:M})}var I=T+n.TEXT_SIZE_SMALL*y.length+40;if(11===e.type){var L=t.weapons.hash[e.weaponInformation.type];e.perks=L?[{value:"cost per unit: "+L.ammunitionCost+" $"},{value:"total cost: "+Math.min(Math.floor(t.credits/L.ammunitionCost)*L.ammunitionCost,L.ammunitionCost*(L.ammunition.max-L.ammunition.value))+" $"},{value:"units to be purchased: "+Math.min(Math.floor(t.credits/L.ammunitionCost),L.ammunition.max-L.ammunition.value)},{value:""},{value:"current supply: "+L.ammunition.value},{value:"max capacity: "+L.ammunition.max}]:[{value:"Requirements",headline:!0},{value:e.weaponInformation.name+" weapon must be installed"}]}if(8===e.type||9===e.type||10===e.type){var w="",b=null;switch(e.type){case 8:w="iron",b=o.IronExhangeRate(t);break;case 9:w="minerals",b=o.MineralsExhangeRate(t);break;case 10:w="platinum",b=o.PlatinumExhangeRate(t)}e.perks=[{value:"EchangeRate",headline:!0},{value:b.success?"rate: "+b.rate+" ":"you have no "+w+" to sell."},{value:b.success?b.resource+" ["+w+"] = "+b.credits+" $ ":""},{value:""},{value:"If the rates are bad, try another spaceport."},{value:"Rates go down if the spaceport has an abundance of a resource."}]}var P=Math.round(e.perks.length*a.map(c,.2,.95,0,1,!0));for(S=0;S<P;S++){var R=e.perks[S];if(R.value.length>0){var O=i.default.create((R.headline?"- ":"")+e.perks[S].value,n.TEXT_SIZE_SMALL,"g");h=Math.max(O.w,h),d.push({pos:{x:s+20,y:I+n.TEXT_SIZE_SMALL*S},text:O})}}var C=I+n.TEXT_SIZE_SMALL*e.perks.length+40;if(1===e.type){var G=s+20;for(var D in e.weaponUpgrade){var N=e.weaponUpgrade[D];for(var B in N)if(C+=20,L=t.weapons.hash[e.installationData.type]){var F=L[D][B],V=N[B],k=L.original[D][B],X=L[D][B]-k,H=e.aquired?0:F*V-L[D][B],U=Math.max(k,X,H),W=250*a.map(c,0,.7,0,1,!0),Y=H/U*W,q=X/U*W+(e.aquired?5:0),z=k/U*W,j=a.map(c,.7,1,0,1,!0);if(r.fillPoly(0,G,C,z,10,p),z>0){r.line2Poly(G+.5*z,C,G+.5*z,C-15*j,p,1);var K="stock",Z=i.default.create(K.substr(0,K.length*j),n.TEXT_SIZE_SMALL,"g");d.push({pos:{x:G+.5*z-.5*Z.w,y:C-2.5*Z.h},text:Z})}var Q=G+z+5;r.fillPoly(0,Q,C,q,10,p),q>0&&(r.line2Poly(Q+.5*q,C,Q+.5*q,C+25*j,p,1),K="current",Z=i.default.create(K.substr(0,j*K.length),n.TEXT_SIZE_SMALL,"g"),d.push({pos:{x:Q+.5*q-.5*Z.w,y:C+2*Z.h},text:Z}));var J=G+z+5+q+(q>0?5:0);r.fillPoly(0,J,C,Y,10,p),Y>0&&(r.line2Poly(J+.5*Y,C,J+.5*Y,C-15*j,p,1),K="upgrade",Z=i.default.create(K.substring(0,j*K.length),n.TEXT_SIZE_SMALL,"g"),d.push({pos:{x:J+.5*Y-.5*Z.w,y:C-2.5*Z.h},text:Z}))}}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(3),r(8)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.skillInfoShip=void 0;var n=function(e,t,n,o,i,s,A){var u=t;if(s)for(var l=0;l<s.length;l++){var c=s[l];if(c.types.length>0){u+=r.TEXT_SIZE_SMALL+8,n.push({pos:{x:e,y:u},text:a.default.create(c.name.toLocaleUpperCase(),r.TEXT_SIZE_SMALL,"g")}),u+=r.TEXT_SIZE_SMALL+16;for(var d=0;d<c.types.length;d++){var p=c.types[d],f=i[p].name,h=i[p].guiSoftSelected,v=i[p].guiHardSelected,g=i[p].guiSoftSelectedMoveTo,y=c.types[c.index]===p;n.push({pos:{x:e,y:u},text:a.default.create(f+(y?" [equipped]":"")+(h?" [MOVE?]":"")+(v?" [MOVING]":"")+(g?" [MOVE TO HERE?]":""),r.TEXT_SIZE_SMALL,"g")}),u+=r.TEXT_SIZE_SMALL+8}}}else for(var m in i){u+=r.TEXT_SIZE_SMALL+8;var x=i[m];n.push({pos:{x:e,y:u},text:a.default.create(x.name,r.TEXT_SIZE_SMALL,"g")})}};t.skillInfoShip=function(e,t,o,i,s,A,u,l,c){var d=a.default.create(e.name.substr(0,e.name.length*u)+(u<0?"#":""),r.TEXT_SIZE_MEDIUM,"g");u>.3&&l.push({pos:{x:o+20,y:i+20},text:d});if(16!==e.type&&17!==e.type||(u>.4&&l.push({pos:{x:o+20,y:i+100},text:a.default.create("[Weapons]",r.TEXT_SIZE_SMALL,"g")}),u>.7&&n(o+20,i+100+20,l,0,t.weapons.hash,[t.weapons.primary,t.weapons.secondary,t.weapons.aux])),16===e.type||18===e.type){var p=18===e.type?20:.33*s;u>.5&&l.push({pos:{x:o+p,y:i+100},text:a.default.create("[Abilities]",r.TEXT_SIZE_SMALL,"g")}),u>.8&&n(o+p,i+100+20,l,0,t.abilities.hash,[t.abilities.primary,t.abilities.secondary,t.abilities.aux])}16===e.type&&(u>.6&&l.push({pos:{x:o+.66*s,y:i+100},text:a.default.create("[Passives]",r.TEXT_SIZE_SMALL,"g")}),u>.9&&n(o+.66*s,i+100+20,l,0,t.abilities.passive,null))}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0),r(8),r(29),r(109),r(3),r(2)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=[],l=[];t.default=function(e,t,c){var d=e.gl,p=e.game.resW;for(var f in u=[],(l=[]).push({buf:n.default.create("exit: escape",s.TEXT_SIZE_SMALL,"g"),order:30}),o.inGameKeyCodes.keys){var h=i.IN_GAME_KEY_BINDING_TRANSLATIONS[o.Keys[f]],v="",g=0;switch(f){case"LEFT":v="BACK: ",g=3;break;case"UP":v="UP: ",g=0;break;case"RIGHT":v="ENTER: ",g=2;break;case"DOWN":v="DOWN: ",g=1;break;case"PRIMARY_WEAPON":v="SELECT: ",g=4;break;default:continue}l.push({buf:n.default.create(v.toLocaleLowerCase()+i.keyCodetoStrHelper(h).toLocaleLowerCase(),s.TEXT_SIZE_SMALL,"g"),order:g})}if(t>0){var y=a.default(r.GLctx.Texture,d);l=l.sort(function(e,t){return e.order-t.order});for(var m=0,x=0;x<l.length;x++){m+=(_=l[x].buf).w+40}var S=.5*(p-m);for(x=0;x<l.length;x++){var _=l[x].buf;n.default.addGL(d,y,_,S,c,e,!1),A.cutoffRect(S-5,c-5,_.w+15,_.h+10,5,u),S+=_.w+40}a.default(r.GLctx.Vertices,d),A.drawColor(u,d,0,1,0,1,d.LINES)}return"SKhints"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(6),r(0),r(125)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SKwIcon=void 0;var i=-1,s=0,A=0,u=[],l=[],c=[],d=[u,l,c];t.SKwIcon=function(e,t,p,f,h,v,g){var y=e.gl;u.length=0,l.length=0,c.length=0,(s+=.5*e.step)>6&&(s=6),i!==t&&(A+=.5*e.step)>=6&&(A=0,s=0,i=t);var m=p+.5*v,x=f+.5*g,S=Math.random()>.99?.5+.6*Math.random():1;o.drawWeaponIcon(i,m,x,S,u,l,c),y.blendFunc(y.ONE,y.ONE),n.default(n.GLctx.Vertices,y),d.filter(function(e){return e.length}).forEach(function(t,n){var o=Math.min(1,1*a.map(h,.75,1,0,1,!0)+h>.9?Math.random()>.99?.25*Math.random():.9:.2*Math.random())-.33*n;r.drawColor(t,e.gl,0,o,0,1-.2*n)})}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0),r(2),r(9),r(5),r(8),r(3),r(6),r(150)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=[],d=[],p={x:0,y:0},f="press e to interact",h=0;t.default=function(e){var t,v,g=e.gl,y=e.game,m=(e.SW,e.SH,e.SX),x=e.SY,S=e.step,_=e.stepMS,T=o.default(e);if(!(!T||e.game.clock<5e3||(null===(t=T.abilities.hash[1])||void 0===t?void 0:t.activated))){if(c.length=0,d.length=0,y.skillTree.hasBeenActivated?y.skillTree.hasBeenActivated&&!y.skillTree.active&&(h+=_):(h=0,f="press e to interact"),T.inSafeZone||y.interactStartTimer>0){var E=i.getQuadTreesObj().queryTreesVec([3],T.pos,T.radius,T.radius)[0];(null===(v=null==E?void 0:E.centerNoneCannon)||void 0===v?void 0:v.pos)&&0===E.isEnemyForMS?(p.x=E.centerNoneCannon.pos.x,p.y=E.centerNoneCannon.pos.y,y.interactStartTimer+=.03*S,y.interactStartTimer>1&&(y.interactStartTimer=1)):y.interactStartTimer-=.03*S;var M=p.x-m,I=p.y-x,L=18*u.map(y.interactStartTimer,0,.3,0,1,!0),w=7*u.map(y.interactStartTimer,0,.6,0,1,!0);if(n.line2PolyMiteredAuto(M+L,I-2*L,M+2*L,I-L,c,w),n.line2PolyMiteredAuto(M+2*L,I+L,M+L,I+2*L,c,w),n.line2PolyMiteredAuto(M-L,I+2*L,M-2*L,I+L,c,w),n.line2PolyMiteredAuto(M-2*L,I-L,M-L,I-2*L,c,w),c.length>0){var b=h>2e3,P=b?f:"press e to interact";b&&(f=f.substring(0,f.length-1));var R=s.default.create(P.substr(0,P.length*u.map(y.interactStartTimer,.4,1,0,1,!0)),A.TEXT_SIZE_SMALL,"g"),O=s.default.create("E",48,"g");if(r.default(a.GLctx.Vertices,g),n.drawColor(c,g,0,.9,0,1),f.length>0&&(c.length=0,n.cutoffRect(M-(2*L+w),I-(2*L+w),4*L+2*w+R.w,4*L+2*w,2*w,c,d),y.interactStartTimer>.2&&(l.drawBackplatePolys(e,d),n.drawColor(c,g,0,.9,0,1,g.LINES))),y.interactStartTimer>.3){var C=r.default(y.interactStartTimer>=1?a.GLctx.Texture:a.GLctx.TextureDist,g);s.default.addGL(g,C,O,M-.5*O.w,I-.5*O.h,e,!0),s.default.addGL(g,C,R,M+L+w,I-.5*R.h,e,!0)}}}return"interact"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(5),r(7),r(6),r(280),r(22),r(3),r(38)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=[],l=a.rect_pool_pop(0,0,0,0),c=function(e,t,r,a,n,i,s,A,u){0;var c=e.SX,d=e.SY,p=e.SW;e.SH;l.update(c-250,d+t,p+500,a-t+2);var f={x:l.x+(u?0:l.width),y:l.y+.5*l.height};o.RayCasterLinear(f,2*l.width,l,e,.4*n,.4*i,.4*s,.4*A,u)};t.default=function(e){e.gl;var t=e.SW,o=e.SH,l=e.SX,d=e.SY,p=e.stepMS;if(u.length=0,!(e.game.currentLevel<=13||e.game.skillTree.active||e.game.isPaused)){var f=e.game.daylight.time,h=A.rectInAncient(e.game.screen.rectSS_400);h&&(e.game.daylight.is_night||e.game.daylight.is_dusk||(f=s.DAYLIGHT_DUSK_BEGIN_TIME)),h&&e.game.daylight.is_night||(f+=p),f>s.DAYLIGHT_TOTAL_TIME&&(f=0),e.game.daylight.time=f;var v=f>s.DAYLIGHT_DAWN_BEGIN_TIME&&f<s.DAYLIGHT_DAWN_BEGIN_TIME+s.DAYLIGHT_TOTAL_DAWN_TIME,g=f>s.DAYLIGHT_DUSK_BEGIN_TIME&&f<s.DAYLIGHT_DUSK_BEGIN_TIME+s.DAYLIGHT_TOTAL_DUSK_TIME,y=f<s.DAYLIGHT_DAWN_BEGIN_TIME||f>s.DAYLIGHT_DUSK_BEGIN_TIME+s.DAYLIGHT_TOTAL_DUSK_TIME,m=f>s.DAYLIGHT_DAWN_BEGIN_TIME+s.DAYLIGHT_TOTAL_DAWN_TIME&&f<s.DAYLIGHT_DUSK_BEGIN_TIME;if(e.game.daylight.is_dawn=v,e.game.daylight.is_dusk=g,e.game.daylight.is_day=m,e.game.daylight.is_night=y,v||g){var x=n.map(f,s.DAYLIGHT_DAWN_BEGIN_TIME,s.DAYLIGHT_DAWN_BEGIN_TIME+.5*s.DAYLIGHT_TOTAL_DAWN_TIME,0,1,!0),S=n.map(f,s.DAYLIGHT_DAWN_BEGIN_TIME,s.DAYLIGHT_DAWN_BEGIN_TIME+s.DAYLIGHT_TOTAL_DAWN_TIME,0,1,!0,!0),_=(n.map(f,s.DAYLIGHT_DAWN_BEGIN_TIME,s.DAYLIGHT_DAWN_BEGIN_TIME+s.DAYLIGHT_TOTAL_DAWN_TIME,0,1,!0),n.map(f,s.DAYLIGHT_DUSK_BEGIN_TIME,s.DAYLIGHT_DUSK_BEGIN_TIME+s.DAYLIGHT_TOTAL_DUSK_TIME,0,1,!0),n.map(f,s.DAYLIGHT_DUSK_BEGIN_TIME,s.DAYLIGHT_DUSK_BEGIN_TIME+.5*s.DAYLIGHT_TOTAL_DUSK_TIME,0,1,!0)),T=n.map(f,s.DAYLIGHT_DUSK_BEGIN_TIME,s.DAYLIGHT_DUSK_BEGIN_TIME+s.DAYLIGHT_TOTAL_DUSK_TIME,0,1,!0,!0);v&&(e.game.daylight.darkness_multip=x),g&&(e.game.daylight.darkness_multip=1-_);var E=4*t,M=a.rect_pool_pop(l-E,d,t+E,o),I=a.rect_pool_pop(l,d,t+E,o),L=r.getQuadTreesObj().queryTreesRect([4,22,44,1,49,2,21,11],v?M:I);a.rect_pool_put(M),a.rect_pool_put(I);var w=[],b=L.length;if(v){for(var P=0;P<o;P++)w[P]=t;for(P=0;P<b;P++)for(var R=(B=L[P]).pos.y-d,O=(q=B.pos.x-l+B.radius)>=0?1:Math.max(E+2*q,0)/E,C=B.radius*O,G=Math.round(R-C),D=Math.round(R+C),N=G;N<D;N++){(V=w[N])>q&&(w[N]=q)}}if(g){for(P=0;P<o;P++)w[P]=0;for(P=0;P<b;P++){var B;for(R=(B=L[P]).pos.y-d,O=(q=B.pos.x-l-B.radius)<=t?1:Math.max(E+2*q,0)/E,C=B.radius*O,G=Math.round(R-C),D=Math.round(R+C),N=G;N<D;N++){(V=w[N])<q&&(w[N]=q)}}}if(v){var F=-1,V=-1,k=0,X=!0,H=.9*x*S,U=.9*x*S,W=.05*x*S;for(R=0;R<o;R++){(q=w[Y=R])>0?-1===V?(F=Y,V=q):q!==V&&(c(e,F,0,Y,H,U,W,x*S,X),k=Y,F=Y,V=q):-1!==V&&(c(e,F,0,Y,H,U,W,x*S,X),F=-1,V=-1,k=Y)}k<o&&c(e,k,0,o,H,U,W,x*S,X),i.Glow({x:l-.5*t,y:d+.3*o+.5*o*x},2*t,[],e,2*H,2*U,2*W,x*S*2)}if(g){for(F=-1,V=-1,k=0,X=!1,H=1*_*T,U=.1*_*T,W=.1*_*T,R=0;R<o;R++){var Y,q;(q=w[Y=R])<t?-1===V?(F=Y,V=q):q!==V&&(c(e,F,0,Y,H,U,W,_*T,X),k=Y,F=Y,V=q):-1!==V&&(c(e,F,0,Y,H,U,W,_*T,X),F=-1,V=-1,k=Y)}k<o&&c(e,k,0,o,2*H,2*U,2*W,_*T,X),i.Glow({x:l+1.5*t,y:d+.5*o},2*t,[],e,2*H,2*U,2*W,_*T*2)}return"FromDuskTilDawn"}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(101),r(7),r(281),r(73),r(73),r(0),r(31),r(2)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RayCasterLinear=void 0;var l=a.rect_pool_pop(0,0,0,0),c=function(e,t){for(var r=[t.x-5e3,t.y,t.x+t.width+1e4,t.y,t.x-5e3,t.y+t.height,t.x+t.width+1e4,t.y+t.height],a=[],n=r.length,o=0;o<n;o+=4){var i=r[o],s=r[o+1],u=r[o+2],l=r[o+3],c=A.LineIntersectsToPoint(e.a.x,e.a.y,e.b.x,e.b.y,i,s,u,l);c&&a.push(c)}if(2===a.length)return e.a=a[0],e.b=a[1],e;if(1===a.length){var d=t.intersectsPointVertical(e.a),p=t.intersectsPointVertical(e.b);return d?e.b=a[0]:p&&(e.a=a[0]),e}return null};t.RayCasterLinear=function(e,t,a,A,d,p,f,h,v){var g=A.SW,y=A.SH,m=A.SX,x=A.SY,S=A.gl,_=v?-2e3:g+2e3,T=[];r.RCGL_POLYS(a,e,t,T,A);var E=n.polysToPair(T),M=[];l.x=a.x-m,l.y=a.y-x,l.width=a.width,l.height=a.height;for(var I=0;I<E.length;I++){var L=E[I],w=l.intersectsPoint(L.a),b=l.intersectsPoint(L.b);if(w&&b)M.push(L);else{var P=c(L,l);P&&M.push(P)}}v?M.push({a:{x:a.x+a.width-m,y:a.y-x},b:{x:a.x+a.width-m,y:a.y+a.height-x}}):M.push({a:{x:a.x-m,y:a.y-x},b:{x:a.x-m,y:a.y+a.height-x}});for(var R=0;R<M.length;R++)if(!(D=M[R])||!D.a||!D.b)throw console.log("pairsto kepp",M),"ERRRRRR";for(var O=i.getUnigquePointsFromPairs(M),C=[],G=0;G<O.length;G++){var D,N={a:{x:_,y:(D=O[G]).y},b:{x:D.x,y:D.y-1}},B={a:{x:_,y:D.y},b:{x:D.x,y:D.y+1}};C.push(N,B)}for(var F=[],V=0;V<C.length;V++){for(var k=C[V],X=null,H=M.length,U=0;U<H;U++){var W=o.getPairIntersection(k,M[U]);W&&(!X||W.param<X.param)&&(X=W)}X&&F.push(X)}F.sort(function(e,t){return e.y-t.y});for(var Y=[],q=F.length-1,z=0;z<q;z++){var j=F[z],K=F[z+1],Z=_,Q=1|j.y,J=j.x,$=1|j.y,ee=_,te=0|K.y,re=_,ae=0|K.y,ne=j.x,oe=1|j.y,ie=K.x,se=0|K.y;Y.push(Z,Q,J,$,ee,te,re,ae,ne,oe,ie,se)}if(Y.length>0){s.default(s.GLctx.VerticesGradient,S);var Ae=s.GLUniformLocation(S,"u_pos_x"),ue=s.GLUniformLocation(S,"u_pos_y"),le=s.GLUniformLocation(S,"u_perimiter");S.uniform1f(Ae,v?-300:g+300),S.uniform1f(ue,.5*y),S.uniform1f(le,2.3*g),u.drawColor(Y,S,d,p,f,h,S.TRIANGLES)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(67)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSightPolygon=t.pairToPolys=t.polysToPair=t.getRayCasterTimings=void 0;t.getRayCasterTimings=function(e){var t=[];return t.push(a.angles*e),t.push(a.angles2*e),function(){for(var e in a)a[e]=0}(),t};var a={total:0,polysToPair:0,pairToPolys:0,interSectionNew:0,interSection:0,raycasting:0,setup:0,filtering:0,uniqe:0,uniqe2:0,angles:0,angles2:0,sorting:0};t.polysToPair=function(e){for(var t=e.length,r=[],a=0;a<t;a+=4)r.push({a:{x:e[a],y:e[a+1]},b:{x:e[a+2],y:e[a+3]}});return r};t.pairToPolys=function(e){for(var t=e.length,r=[],a=0;a<t;a++){var n=e[a];r.push(n.x,n.y)}return r};var n=function(e,t){var a=e.a.x,n=e.a.y,o=e.b.x-e.a.x,i=e.b.y-e.a.y,s=t.a.x,A=t.a.y,u=t.b.x-t.a.x,l=t.b.y-t.a.y,c=r.OperatorApproxDist97(o,i),d=r.OperatorApproxDist97(u,l);if(o/c==u/d&&i/c==l/d)return null;var p=(o*(A-n)+i*(a-s))/(u*i-l*o);if(p<0||p>1)return null;var f=(s+u*p-a)/o;return f<0?null:{x:a+o*f,y:n+i*f,param:f}};t.getSightPolygon=function(e,t,r){var o=function(e){for(var t=performance.now(),r=[],n={},o=e.length,i=0;i<o;i++){var s=e[i],A=s.a.x/s.a.y;n[A]||(r.push(s.a),n[A]=!0);var u=s.b.x/s.b.y;n[u]||(r.push(s.b),n[u]=!0)}return a.uniqe+=performance.now()-t,r}(r),i=performance.now(),s=function(e,t,r){for(var n=performance.now(),o=[],i=e.length,s=0;s<i;s++){var A=e[s],u=Math.atan2(A.y-r,A.x-t);A.angle=u,o.push(u-1e-5,u+1e-5)}return a.angles+=performance.now()-n,o}(o,e,t);i=performance.now();for(var A=[],u=s.length,l=0;l<u;l++){var c=s[l],d={a:{x:e,y:t},b:{x:e+Math.cos(c),y:t+Math.sin(c)},angle:c};A.push(d)}for(var p=[],f=(Number.MAX_VALUE,Number.MIN_VALUE,1.01*t),h=.99*t,v=1.01*e,g=.99*e,y=[],m=[],x=[],S=[],_=performance.now(),T=0;T<r.length;T++){var E=r[T],M=E.a.y>f,I=E.b.y>f,L=E.a.y<h,w=E.b.y<h,b=E.a.x>v,P=E.b.x>v,R=E.a.x<g,O=E.b.x<g;M&&I&&R&&O?x.push(E):M&&I&&b&&P?S.push(E):L&&w&&R&&O?y.push(E):L&&w&&b&&P?m.push(E):M&&I?(x.push(E),S.push(E)):L&&w?(y.push(E),m.push(E)):b&&P?(S.push(E),m.push(E)):R&&O?(x.push(E),y.push(E)):(x.push(E),S.push(E),y.push(E),m.push(E))}a.sorting+=performance.now()-_;var C=[];for(l=0;l<u;l++){var G=null,D=(C=(c=(d=A[l]).angle)<-.5*Math.PI?y:c<0?m:c<.5*Math.PI?S:x).length;for(T=0;T<D;T++){var N=n(d,C[T]);N&&(!G||N.param<G.param)&&(G=N)}G&&(G.angle=c,p.push(G))}a.interSectionNew+=performance.now()-i,i=performance.now();for(var B=[],F=0;F<p.length;F++){for(var V=p[F],k=!0,X=F;X<p.length;X++){var H=p[X];if(F!=X&&Math.abs(V.x-H.x)<2&&Math.abs(V.y-H.y)<2){k=!1;break}}k&&B.push(V)}return p=B,a.filtering+=performance.now()-i,p=p.sort(function(e,t){return e.angle-t.angle})}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(7),r(8),r(3),r(9),r(17),r(5),r(98),r(2)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=[],f=[],h=[],v=[],g=[],y=[],m=[],x=[],S=[],_=[],T=[],E=function(e,t,r,a,n){return(e-t)/r*r*a-.5*r*a+.5*r+n},M=o.rect_pool_pop(0,0,0,0),I=function(e,t,a,n,o,i,s,A,u,l){void 0===l&&(l=1);for(var c=0;c<e.length;c++){var d=e[c];M.x=E(d.x,t,n,i,s),M.y=E(d.y,a,o,i,A),M.width=d.width*i,M.height=d.height*i,r.drawRectPoly(M,0,0,u,l)}},L=new o.Rectangle(0,0,0,0),w=new o.Rectangle(0,0,0,0),b=function(e,t,a,n,o,i,s,A,u,l,c,d){if(void 0===u&&(u=0),void 0===l&&(l=0),void 0===c&&(c=-1),void 0===d&&(d=0),!(c>0&&d>=c))for(var p=0;p<e.length;p++){var f=e[p];if(1===A){if(w.x=n,w.y=o,w.width=i,w.height=s,!w.intersects(f.rect))continue;f.populated?(w.x=f.rect.x+2,w.y=f.rect.y+2,w.width=f.rect.width-4,w.height=f.rect.height-4):(w.x=f.rect.x,w.y=f.rect.y,w.width=f.rect.width,w.height=f.rect.height),r.drawRectPoly(w,n,o,f.populated?a:t,0===d?2:1)}else w.x=(f.rect.x-n)/i*i*A-.5*i*A+.5*i+u,w.y=(f.rect.y-o)/s*s*A-.5*s*A+.5*s+l,w.width=f.rect.width*A,w.height=f.rect.height*A,r.drawRectPoly(w,0,0,f.populated?a:t,0===d?2:1);b(f.children,t,a,n,o,i,s,A,u,l,c,d+1)}},P=function(e,t,r){for(var a=0;a<e.length;a++){var n=e[a];if(n.rect.intersects(t.game.screen.rect)){if(n.seed){var o=i.default.create(n.rect.x+" | "+n.rect.y,s.TEXT_SIZE_SMALL,"w");i.default.addGL(t.gl,r,o,n.rect.x-t.SX,n.rect.y-t.SY+s.TEXT_SIZE_SMALL,t,!0)}if(n.populated){o=i.default.create(u.TypesToString(n.type),s.TEXT_SIZE_SMALL,"g");if(i.default.addGL(t.gl,r,o,n.rect.x-t.SX,n.rect.y-t.SY,t,!0),n.item){var A="ST:"+(n.item.remove?"removed":" in game ")+(n.item.inTree?"in tree ":" not in tree"),l=i.default.create(A,s.TEXT_SIZE_SMALL,"g");i.default.addGL(t.gl,r,l,n.rect.x-t.SX,n.rect.y-t.SY+s.TEXT_SIZE_SMALL,t,!0)}}P(n.children,t,r)}}};t.default=function(e){var t=e.gl,o=e.game,i=e.SX,s=e.SY,u=e.SW,M=e.SH;if(!o.menuSettings.debugItems.chunks)return"debug chunks (disabled)";p=[],f=[],_=[],T=[],h=[],v=[],g=[],y=[],m=[],x=[],S=[];var w=o.procedural.chunks.size,R=o.procedural.chunks.stats.maxLoad,O=o.procedural.chunks.stats.geneated,C=o.procedural.chunks.stats.load,G=o.procedural.chunks.hash,D=[];for(var N in G){var B=G[N];D.push(B)}b(D,p,_,i,s,u,M,1);var F=100/w+0,V=.3*-u,k=.1*-M;b(D,f,_,i,s,u,M,F,V,k,64),o.procedural.treeBounds&&I([o.procedural.treeBounds],i,s,u,M,F,V,k,S,4);var X=A.default(e);if(X){var H=E(X.pos.x,i,u,F,V),U=E(X.pos.y,s,M,F,k);r.line2Poly(H-3,U-3,H+3,U+3,p,1),r.line2Poly(H+3,U-3,H-3,U+3,p,1)}I([o.screen.rect,o.procedural.boundsSS,o.procedural.chunks.pruneRect,c.IntArrToRect(l.getQuadTreesObj().All.boundry)],i,s,u,M,F,V,k,p);for(var W=[],Y=0;Y<o.anomalyPairs.length;Y++){var q=o.anomalyPairs[Y];W.push(q.in,q.out)}!function(e,t,a,n,o,i,s,A){for(var u=0;u<e.length;u++)for(var l=e[u],c=0;c<l.length;c++){var p=l[c];null==p||p.pos;var f=E(p.pos.x,n,t,i,s),S=E(p.pos.y,o,a,i,A),_=p.radius*i;switch(L.x=f-_,L.y=S-_,L.width=2*_,L.height=2*_,p.type){case 12:r.rectanglePolyRect(L,0,0,y);break;case 13:r.rectanglePolyRect(L,0,0,g);break;case 14:r.rectanglePolyRect(L,0,0,y);break;case 17:r.rectanglePolyRect(L,0,0,y,!0);break;case 3:r.rectanglePolyRect(L,0,0,v);break;case 15:case 16:r.rectanglePolyRect(L,0,0,x);break;case 1:case 10:case 9:case 8:d.crossHairLines(f,S,h,Math.max(8,10*_));break;case 0:case 2:d.crossHairLines(f,S,m,Math.min(10,10*_));break;default:_>=4?r.rectanglePolyRect(L,0,0,m):(T.push(f,S),_>2.5&&(T.push(f+1,S),T.push(f+1,S+1),T.push(f,S+1),T.push(f,S-1)))}}}([o.asteroids,o.rockFormations,o.ancientBlocks,o.spaceMines,o.spacePorts.map(function(e){return e.centerNoneCannon}),o.spacePorts,o.anomlies,o.destroyers,o.npcs,o.enemies,o.spaceSpiders,o.spaceSquids,o.spaceSnake.filter(function(e){return e.segments.length>0}).map(function(e){return e.segments[0]}),W,o.spaceFog.map(function(e){return{pos:{x:e.x,y:e.y},radius:e.radius,type:e.type}}),o.minefields],u,M,i,s,F,V,k);var z=l.getQuadTreesObj().queryTreesRect([4],o.screen.rect);for(Y=0;Y<z.length;Y++){var j=z[Y];r.line2Poly(j.pos.x-i,j.pos.y-s,j.opos.x-i,j.opos.y-s,S,1)}if(r.line2Poly(20,20,20+5*O,20,f,4),r.line2Poly(20,30,20+5*C,30,f,4),r.line2Poly(10,10,10,40,f,4),r.line2Poly(20+5*R+10,10,20+5*R+10,40,f,4),p.length>0){n.default(a.GLctx.Vertices,t),r.drawColor(p,t,0,.3,.1,1),r.drawColor(S,t,1,0,0,1),r.drawColor(f,t,.1,0,0,1),r.drawColor(_,t,.1,.1,0,1),r.drawColor(T,t,1,1,1,1,t.POINTS),r.drawColor(m,t,1,1,1,1,t.LINES),r.drawColor(h,t,1,0,0,1,t.LINES),r.drawColor(g,t,1,1,0,1,t.LINES),r.drawColor(y,t,1,0,1,1,t.LINES),r.drawColor(v,t,0,1,0,1,t.LINES),r.drawColor(x,t,0,0,1,1,t.LINES);var K=n.default(a.GLctx.Texture,t);P(D,e,K)}return"debug/chunksGL"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(48),r(147),r(7),r(121),r(1)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});new A.QuadTreeInt32Base(new s.Rectangle(0,0,0,0),5,-44,5);t.default=function(e){e.gl,e.SX,e.SY,e.SW,e.SH,e.game,e.step}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(7)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});new o.Rectangle(0,0,0,0),new o.Rectangle(0,0,0,0);t.default=function(e){e.gl,e.game,e.SX,e.SY,e.SW,e.SH}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(3),r(2),r(8)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var A=[],u=[],l=!1,c=s.default.create("loading...",o.TEXT_SIZE_SMALL,"w");t.default=function(e){var t=e.game,d=e.gl,p=e.SH,f=(e.stepMS,e.SW);e.step;if(t.IS_PROCEDURAL){var h=t.procedural.chunks.hash,v=0;for(var g in h)v++;if(v<4&&(l=!0),l){A=[],u=[];for(var g in t.procedural.chunks.qeue){var y=.01*t.procedural.chunks.qeue[g].length;i.line2Poly(.5*f-y*f*.8*.5,.9*p+0,.5*f+y*f*.8*.5,.9*p+0,u,1)}if(r.fillPoly(0,0,0,f,p,A),u.length>0){a.default(n.GLctx.Vertices,d),d.blendFunc(d.ONE,d.ONE),r.drawColor(u,d,1,1,1,1);var m=a.default(n.GLctx.Texture,d);s.default.addGL(d,m,c,.5*f-.5*c.w,.9*p-o.TEXT_SIZE_SMALL,e)}else l=!1}return"chunkloader"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0),r(2),r(95)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[];t.default=function(e){var t=e.gl,s=(e.game,e.SX),A=e.SY;e.SW,e.SH;i=[];for(var u=o.getFragmentTree().references,l=u.length,c=0;c<l;c++)for(var d=u[c],p=0;p<3;p++){var f=d.triangle[p];i.push(f.x-s+d.pos.x,f.y-A+d.pos.y)}return i.length>0&&(r.default(a.GLctx.Vertices,t),n.drawColor(i,t,.5,.5,.5,1,t.TRIANGLES)),"fragments"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(0),r(2),r(65)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[];t.default=function(e){var t=e.gl,s=(e.game,e.SX),A=e.SY;e.SW,e.SH;i=[];for(var u=o.getFragmentBlackTree().references,l=u.length,c=0;c<l;c++)for(var d=u[c],p=0;p<3;p++){var f=d.triangle[p];i.push(f.x-s+d.pos.x,f.y-A+d.pos.y)}return i.length>0&&(r.default(a.GLctx.Vertices,t),t.blendFunc(t.DST_COLOR,t.ZERO),n.drawColor(i,t,.2,0,0,1,t.TRIANGLES),t.blendFunc(t.ONE,t.ONE)),"fragments"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(9),r(2),r(55),r(22)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=[],l=[],c=[],d=[];t.default=function(e){e.SW,e.SH;var t,p=e.SX,f=e.SY,h=e.gl,v=o.default(e);if(v){var g=v.weapons.hash[27];if((null==g?void 0:g.active)&&v.aimPoint){u=[];var y=2.5*Math.random();if(i.line2Poly(v.pos.x-p,v.pos.y-f,v.aimPoint.x-p-y,v.aimPoint.y-f-y,u,2),i.line2Poly(v.pos.x-p,v.pos.y-f,v.aimPoint.x-p+y,v.aimPoint.y-f+y,u,2),i.line2Poly(v.pos.x-p,v.pos.y-f,v.aimPoint.x-p,v.aimPoint.y-f,u,2),c.length>0&&(d=[v.pos.x-p,v.pos.y-f,c[2],c[3],v.aimPoint.x-p,v.aimPoint.y-f]),y=2.5*Math.random(),i.line2Poly(v.pos.x-p,v.pos.y-f,v.aimPoint.x-p-y,v.aimPoint.y-f-y,l,.3),i.line2Poly(v.pos.x-p,v.pos.y-f,v.aimPoint.x-p+y,v.aimPoint.y-f+y,l,.3),i.line2Poly(v.pos.x-p,v.pos.y-f,v.aimPoint.x-p,v.aimPoint.y-f,l,.3),u.length>0){a.default(n.GLctx.Vertices,h);h.blendFunc(h.ONE,h.ONE),r.drawColor(u,h,.1,.1,.7,1,h.LINES),r.drawColor(l,h,.1,.1,.7,1,h.LINES),d.length&&r.drawColor(d,h,0,0,.7,1,h.TRIANGLES)}0!==(null===(t=v.aimTarget)||void 0===t?void 0:t.armor.type)&&(s.default(e,v.aimPoint,220+220*Math.random(),99),A.Glow(v.aimPoint,30+80*Math.random(),[],e,.2,.2,1,1)),c=u,l,l=[],u=[],d=[]}else c=[],[],d=[]}return"lazer"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(2),r(5),r(8),r(9),r(3),r(22)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c={},d=function(e,t,i,A,d,p,f,h,v,g,y){var m;void 0===y&&(y="r");var x=e.SX,S=e.SY,_=e.gl,T=e.game,E=e.frameCnt,M=e.stepMS,I=i+A;if(f&&(c[I]=1200+150*Math.random()),(E<=1||(null===(m=t.abilities.hash[1])||void 0===m?void 0:m.activated)||T.skillTree.active)&&(c[I]=-(1500+900*Math.random())),c[I]<0&&(c[I]+=M,c[I]>-100&&(c[I]=1200+1050*Math.random())),c[I]>0){c[I]-=M,c[I]<0&&(c[I]=0);var L=E%30/30,w=s.default.create(i,u.TEXT_SIZE_SMALL,y),b=s.default.create(A,u.TEXT_SIZE_SMALL,y),P=Math.max(w.w,b.w);l.Glow({x:d+x+.5*P,y:p+u.TEXT_SIZE_SMALL+S},100,[],e,.4*h+.1*L,.4*v+.1*L,.4*g+.1*L,1);var R=n.default(a.GLctx.Texture,_);s.default.addGL(_,R,w,d+.5*(P-w.w),p,e),s.default.addGL(_,R,b,d+.5*(P-b.w),p+u.TEXT_SIZE_SMALL,e),n.default(a.GLctx.Vertices,_);var O=[];o.cutoffRect(d,p,P+8,2*u.TEXT_SIZE_SMALL,8,O),r.drawColor(O,_,h,v,g,1,_.LINES)}};t.default=function(e){var t,r=e.SW,a=(e.SH,e.SX,e.SY,e.gl,e.game);if(a.currentLevel>13){var n=A.default(e);if(n){for(var o=.5*r-315,s=100,l=!1,c=i.getQuadTreesObj().queryTreesRect([30],a.screen.rectSS_400),p=0;p<c.length;p++){if((null===(t=c[p].target)||void 0===t?void 0:t.guid)===n.guid){l=!0;break}}d(e,n,"MASTER","CAUTION",o,s,n.damageTaken||0!==n.forceX||0!==n.forceY,1,0,0,"r"),d(e,n,"HULL","FAILING",o+90,s,n.life<u.PLAYER_LIFE_LOW_THRESHOLD,1,0,0,"r"),d(e,n,"MISSILE","LOCK",o+180,s,l,1,0,0,"r"),n.weapons.hash[26]&&d(e,n,"FLAMEOUT","ACTIVE",o+270,s,n.flameOutCnt>0,1,1,0,"y"),n.abilities.hash[1]&&d(e,n,"CLOAK","ACTIVE",o+360,s,n.abilities.hash[1].activated,.1,.1,1,"b"),n.abilities.hash[5]&&d(e,n,"TIMEWARP","ACTIVE",o+450,s,n.abilities.hash[5].activated,.1,.1,1,"b"),n.abilities.hash[3]&&d(e,n,"SHIELD","ACTIVE",o+540,s,n.abilities.hash[3].activated,.1,.1,1,"b")}}return"FaultIconsGL"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(0),r(70),r(70),r(70),r(22)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=[];t.default=function(e){var t=e.gl,l=e.SW,c=e.SH,d=e.SX,p=e.SY;u.length=0,n.default(a.GLctx.Vertices,t),r.line2Poly(100,0,1100,1e3,u,10),r.drawColor(u,t,1,1,1,1),u.length=0;return u.length=0,n.default(a.GLctx.Texture,t),s.setupFrameBufferMulti(t,2,l,c),s.setTargetToFrameBufferMulti(e,2,l,c),n.default(a.GLctx.Vertices,t),r.line2Poly(0,50,1e3,50,u,30),r.line2Poly(0,100,1e3,100,u,30),r.line2Poly(0,150,1e3,150,u,30),r.drawColor(u,t,1,0,0,1),A.Glow({x:40+d,y:50+p},800,[],e,.9,.2,.3,1),u.length=0,n.default(a.GLctx.Texture,t),s.setupFrameBufferMulti(t,1,l,c),s.setTargetToFrameBufferMulti(e,1,l,c),n.default(a.GLctx.Vertices,t),r.line2Poly(0,0,0,1e3,u,30),r.line2Poly(50,0,50,1e3,u,30),r.line2Poly(100,0,100,1e3,u,30),r.line2Poly(150,0,150,1e3,u,30),r.drawColor(u,t,0,1,0,1),A.Glow({x:40+d,y:50+p},800,[],e,.1,.9,.3,1),i.renderFrameBufferMultiCombine(t,n.default(a.GLctx.TextureCombineMultiply,t),2,1),o.setTargetToCanvasMulti(t),t.activeTexture(t.TEXTURE0+0),u.length=0,n.default(a.GLctx.Vertices,t),r.line2Poly(0,0,1e3,1e3,u,10),r.drawColor(u,t,1,1,1,1),"DevGL"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=0,n=0,o=(new Date).getTime()/1e3;t.default=function(e){var t=e.gl,i=e.game,s=e.step,A=e.SX,u=e.SY,l=(e.SW,e.SH,i.resW),c=i.resH;a+=.067*s,n+=.047*s;var d=i.currentLevel<13||i.isPaused,p=r.default(r.GLctx.PerlinNoiseFog,t),f=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,1,0,1,1,0,-1,-1,0,1,-1,0].map(function(e){return 1*e})),t.STATIC_DRAW);var h=t.getAttribLocation(p,"aPosition");t.enableVertexAttribArray(h),t.vertexAttribPointer(h,3,t.FLOAT,!1,0,0);var v=t.getUniformLocation(p,"uTime"),g=t.getUniformLocation(p,"uLocation"),y=t.getUniformLocation(p,"uColorMultip");t.uniform1f(y,.8);var m=t.getUniformLocation(p,"uInvertColors");t.uniform1i(m,0);var x=t.getUniformLocation(p,"uIntensity");return t.uniform1f(x,1),d?t.uniform1f(v,1):t.uniform1f(v,.4*((new Date).getTime()/1e3-o)),t.uniform2f(g,(A+.798+a)/(.5*l)%l,(u+.732+n)/(-.5*c)%c),t.drawArrays(t.TRIANGLE_STRIP,0,4),"lightcasterFogGL"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShaderInstrument=t.readShaderPerformanceHash=t.readShaderPerformanceList=void 0;var r={};t.readShaderPerformanceList=function(){var e=[];for(var t in r){var a=r[t];e.push({name:a.name,time:a.time,success:a.success})}return e};t.readShaderPerformanceHash=function(){var e={};for(var t in r){var a=r[t];e[a.name]={name:a.name,time:a.time,success:a.success}}return e};t.ShaderInstrument=function(e,t,a){return function(e,t){var a=e.gl,n=r[t];if(n&&(n.success=!1,n.query)){var o=a.getQueryParameter(n.query,a.QUERY_RESULT_AVAILABLE),i=a.getParameter(n.ext.GPU_DISJOINT_EXT);if(o&&!i){var s=a.getQueryParameter(n.query,a.QUERY_RESULT);n.time=s/1e6,n.success=!0}(o||i)&&(a.deleteQuery(n.query),n.query=null)}}(e,t),function(e,t,a){var n=e.gl,o=r[t]=r[t]||{ext:null,query:null,time:-1,success:!1,name:"unknown"},i=!1;o.query&&!o.success||(o.ext=n.getExtension("EXT_disjoint_timer_query_webgl2"),o.query=n.createQuery(),n.beginQuery(o.ext.TIME_ELAPSED_EXT,o.query),i=!0);var s=a(e);return o.name=s||"unknown",i&&n.endQuery(o.ext.TIME_ELAPSED_EXT),s}(e,t,a)||"unknown"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resize=t.init=void 0;t.init=function(e){var t=e.game,r=t.resW,a=t.resH;e.game.starMap=[];for(var n=0;n<2*a;n++){var o={x:Math.random()*r*2,alpha:Math.floor(255*Math.random())};t.starMap.push(o)}};t.resize=function(e){e.game.starMap=[],t.init(e)};var r=0;t.default=function(e){var t=e.game,a=e.step,n=e.SW;if(r>5*a){r=0;var o={x:Math.random()*n*2,alpha:255*Math.random()};t.starMap.shift(),t.starMap.push(o)}return r+=a,"starmap"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(12),r(23),r(18),r(21),r(6)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=e.game,s=e.step,A=(e.SW,e.SH,e.WW),u=e.WH,l=0,c=t.customParticles;l=c.length;for(var d=[],p=0;p<l;p++){var f=c[p];f.life-=s,n.default(f,s),f.vel.mult(.99),f.vel.getLength()>5&&f.vel.setLength(5),f.life>0&&(d.push(f),a.default(t,f,!1),o.wormhole(f,e))}t.customParticles=d;var h=t.bullets;l=h.length;for(p=0;p<l;p++){var v=h[p];if(v.life-=s,v.homing){var g=v.target;if(g&&!g.remove&&g.life>0){var y=Math.atan2(g.pos.y-v.pos.y,g.pos.x-v.pos.x),m=v.vel.getAngle();m=i.normalizeRadianAngle(m),m+=.5*i.angleDelta(m,y)*s,v.vel.setAngle(m)}else v.homing=!1,v.target=void 0}n.default(v,s),a.default(t,v,!1),r.shift(v,A,u),v.life<0&&(v.remove=!0,v.target=void 0)}return"particles (& bullets)"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(33),r(3),r(12),r(21),r(152),r(296),r(153),r(154),r(155),r(18),r(297),r(298),r(301),r(58),r(69)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f,h,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t,g=e.game,y=e.step,m=e.WW,x=e.WH,S=g.resW,_=g.resH,T=g.player;s.default(e);for(var E=0;E<T.length;E++){var M=T[E];M.damageTaken&&(g.eventMap[r.GAME_EVENT.PLAYER_DAMAGE]={}),f.updateShipHashes(M),d.shipNotDisabledByCloak(M,e)&&(d.Abilities(M,e),p.Weapons(M,e),g.menuSettings.mouseControl&&g.currentLevel>13&&u.default(M),A.default(M,y)),M.angle<0&&(M.angle+=a.doublePI),M.angle=M.angle%a.doublePI,l.default(M,e),c.ShipPositionUpdater(M,y);if(n.shift(M,m-.2*S,x-.2*_,.2*S,.2*_),o.wormhole(M,e)&&(M.damageTaken=!0,i.SlowMotion()),M&&M.flameOutCnt<0&&(M.flameOutCnt+=.1,M.flameOutCnt>-1&&(M.flameOutCnt=0)),(null==M?void 0:M.damageTaken)&&0===M.flameOutCnt&&M.weapons.hash[26]&&!(null===(t=M.abilities.hash[1])||void 0===t?void 0:t.activated)&&v.getParasiteTree().queryVec(M.pos,1.5*M.radius,1.5*M.radius).length&&(M.flameOutCnt=36),(null==M?void 0:M.flameOutCnt)>0)for(var I=0;I<3;I++)if(M.flameOutCnt--,e.game.flames.push(h.createFlameoutFlame(M.weapons.hash[26],M.pos.x,M.pos.y,M.flameOutCnt/36*Math.PI*2,M.vel,M.guid,M.type)),0===M.flameOutCnt){M.flameOutCnt=-8;break}M.damageTaken=!1,M.unableToComply=!1}return"Ship"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(12),r(30),r(6),r(18),r(23),r(21),r(4),r(68),r(30),r(5),r(32),r(94),r(18)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=0;t.default=function(e){var t=e.game,v=(e.SX,e.SY,e.SW),g=e.SH,y=e.WW,m=e.WH,x=e.step,S=c.getQuadTreesObj();if(S.All)for(var _=t.drones,T=_.length,E=0;E<T;E++){var M=_[E],I=u.GetPlayerByGuidOrEmptyArray(M.ownerGuid,e),L=I[0];L&&L.abilities.active.cloak>0&&(L=null);var w=a.default(M,M.angle,l.getGenericAvoidance(M,e,[22],I));M.thrust.add(w.avoidance),M.avoidance=w,h+=.002,L&&L.inSafeZone&&A.distanceBetweenVectors(L.pos,M.pos)<200&&(h=0),h>.1&&(h=.1),M.vel.getLength()>M.maxVel&&M.vel.setLength(M.maxVel),l.getGenericAvoidance(M,e,[22],I),M.angle=n.normalizeRadianAngle(M.angle),o.default(M,x),r.shift(M,y-.2*v,m-.2*g,.2*v,.2*g),i.default(t,M,!0),s.wormhole(M,e);var b=S.queryTreesVec([1,35,9,10],M.pos,.5*v*.7,.5*g*.7);b=b.concat(S.queryTreeVecIgnoreGuid(44,M.pos,.5*v*.7,.5*g*.7,M.ownerGuid));var P=L?A.distanceBetweenVectors(M.pos,L.pos):0,R=L?n.wrapTargetPos(y,m,M.pos,L.pos):t.player[0]?t.player[0].pos:t.asteroids[0].pos,O=!1;b.length>0&&P<450&&(O=p.getLineOfSight(M.pos,b[0]));var C=b.length>0&&O;if(M.bulletsFired>0&&(M.bulletsFired-=.05*x),!C&&P<500)P>400&&(h=.008);else{var G=C?b[0].pos:R,D=A.distanceBetweenVectors(G,M.pos);if(D<t.resW){var N=.07;D<120&&(h=.01,N=.18);var B=Math.atan2(G.y-M.pos.y,G.x-M.pos.x);if(M.turnAcc=n.angleDelta(M.angle,B)*N,M.angle+=M.turnAcc*x,C&&M.bulletsFired<M.maxBullets){var F=d.createBullet(25,M);r.shift(F,y,m),t.bullets.push(F),M.bulletsFired++}}}M.thrust.setLength(h),M.thrust.setAngle(M.angle),M.vel.add(M.thrust),f.ShipPositionUpdater(M,x,!0),M.vel.mult(.99)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(13),r(17),r(7),r(4),r(6),r(5),r(1)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shipNotDisabledByCloak=t.Abilities=void 0;var u=function(e,t){var r,a;if(11===t.type&&(t.canChangeState=!1,t.activated=!1,e.targetLock&&(4===(null===(r=e.aimTarget)||void 0===r?void 0:r.type)||11===(null===(a=e.aimTarget)||void 0===a?void 0:a.type))&&e.aimTarget.guid===e.targetLock.guid)){var n=e.aimTarget;if((n.resources.iron>0||n.resources.minerals>0&&e.abilities.hash[13]||n.resources.platinum>0&&e.abilities.hash[12])&&o.distanceBetweenVectors(e.aimPoint,e.pos)<250)return t.canChangeState=!0,!0}if(1===t.drainType)return!0;var i=e.abilities.hash[6];if(i&&0===t.drainType&&i.value.n>=t.drainValue){if(t.activated)return!0;if(i.value.n>=t.minDrainStartValue)return!0}return!1},l=function(e,t,r){var a=function(e,t){for(var r=e.abilities.all,a=0;a<r.length;a++){var n=r[a];if(n.type===t)return n}}(e,t);if(a)if(0===a.stateChangeType){if(a.activated&&a.canChangeState)return a.activated=!1,void(a.canChangeState=!1);if(u(e,a)&&a.canChangeState)return a.activated=!0,void(a.canChangeState=!1)}else if(1===a.stateChangeType&&u(e,a))return void(a.activated=!0);e.unableToComply=!0},c=function(e,t,r){r?t.types.length<1?e.unableToComply=!0:t.canSelect&&(t.canSelect=!1,t.index<t.types.length-1?t.index++:t.index=0):t.canSelect=!0},d=n.rect_pool_pop(0,0,0,0),p=n.rect_pool_pop(0,0,0,0),f=function(e,t){for(var r,a,n=e.abilities.hash[6],o=e.abilities.hash[1],i=e.abilities.all,s=0;s<i.length;s++){var A=i[s];if(A.activated&&1===A.activationType){if(0===A.drainType&&(n.value.n>A.drainValue*t.step?n.value.n-=A.drainValue*t.step:A.activated=!1),(null==o?void 0:o.activated)&&A.type!==o.type){A.activated=!1;continue}if(11===A.type&&A.activated){var u=A.data;if(4===(null===(r=e.aimTarget)||void 0===r?void 0:r.type)||11===(null===(a=e.aimTarget)||void 0===a?void 0:a.type)){var l=e.aimTarget;u.iron.value<u.iron.max&&l.resources.iron>0?(u.iron.value+=.8*t.step,l.resources.iron-=t.step,l.resources.iron<0&&(l.resources.iron=0,A.activated=!1)):e.abilities.hash[13]&&u.minerals.value<u.minerals.max&&l.resources.minerals>0?(u.minerals.value+=.8*t.step,l.resources.minerals-=t.step,l.resources.minerals<0&&(l.resources.minerals=0,A.activated=!1)):e.abilities.hash[12]&&u.platinum.value<u.platinum.max&&l.resources.platinum>0?(u.platinum.value+=.8*t.step,l.resources.platinum-=t.step,l.resources.platinum<0&&(l.resources.platinum=0,A.activated=!1)):A.activated=!1}else A.activated=!1}}}};t.Abilities=function(e,t){var n=e.keyCodes,o=e.abilities,u=n.PRIMARY_ABILITY,h=n.SECONDARY_ABILITY,v=n.AUX_ABILITY;!function(e,t){for(var n,o,u,l,c=e.abilities.passive,f=0;f<c.length;f++){var h=c[f];switch(h.type){case 0:e.life<h.value.max&&r.LifeIncreaseFixedValue(e,h.value.n*t.step);break;case 4:var v=h.data;e.aimTarget||(v.timer=0),e.targetLock&&((null===(n=e.targetLock)||void 0===n?void 0:n.remove)||0!==e.forceY||0!==e.forceX?e.targetLock=null:(d.x=e.SX,d.y=e.SY,d.width=e.SW,d.height=e.SH,p.x=e.targetLock.pos.x-e.targetLock.radius,p.y=e.targetLock.pos.y-e.targetLock.radius,p.width=2*e.targetLock.radius,p.height=2*e.targetLock.radius,d.intersects(p)||(e.targetLock=null))),e.aimTarget&&!e.aimTarget.remove&&(null===(o=e.targetLock)||void 0===o?void 0:o.guid)!==e.aimTarget.guid&&(e.aimTarget.guid===v.currentTargetGuid?(v.timer+=t.stepMS,v.timer>=v.timerT&&(e.targetLock=e.aimTarget,v.timer=0)):v.currentTargetGuid=e.aimTarget.guid),e.targetLock&&e.targetLock.guid!==(null===(u=e.aimTarget)||void 0===u?void 0:u.guid)?v.dropLockTimer+=t.stepMS:v.dropLockTimer=0,v.dropLockTimer>v.dropLockTimerT&&(v.dropLockTimer=0,e.targetLock=void 0);break;case 6:h.value.n<h.value.max&&(e.inSafeZone?h.value.n+=h.regenValue*t.step*1.8:h.value.n+=h.regenValue*t.step),e.abilities.values.energy=h.value.n;break;case 7:break;case 15:var g=void 0;if(e.targetLock)a.EnemyLike(e.targetLock.type)&&(g=e.targetLock.pos);else for(var y=0;y<8&&!(g=null===(l=s.getQuadTreesObj().queryTreesVec([10,1,35,9],e.pos,100+120*y,100+120*y,!0)[0])||void 0===l?void 0:l.pos);y++);if(g)e.coaxialMount.locked=g.toPoint();else{g=new A.Vector(0,0);var m=new A.Vector(300,0);m.setAngle(e.angle),g.x=e.pos.x+m.x,g.y=e.pos.y+m.y,e.coaxialMount.locked=null}var x=Math.atan2(g.y-e.pos.y,g.x-e.pos.x);x=i.normalizeRadianAngle(x),e.coaxialMount.angle+=.08*i.angleDelta(e.coaxialMount.angle,x)*t.step,e.coaxialMount.barrel.setAngle(e.coaxialMount.angle)}}}(e,t),f(e,t),function(e,t,r,a){for(var n=0;n<e.length;n++){var o=e[n];if(1===o.activationType){if(0===o.stateChangeType&&!o.canChangeState)switch(o.arrayType){case 0:t||(o.canChangeState=!0);break;case 1:r||(o.canChangeState=!0);break;case 2:a||(o.canChangeState=!0)}if(1===o.stateChangeType)switch(o.arrayType){case 0:t||(o.activated=!1);break;case 1:r||(o.activated=!1);break;case 2:a||(o.activated=!1)}}}}(e.abilities.all,u,h,v),u&&l(e,o.primary.types[o.primary.index]),h&&l(e,o.secondary.types[o.secondary.index]),v&&l(e,o.aux.types[o.aux.index]),c(e,o.primary,n.TOGGLE_PRIMARY_ABILITY),c(e,o.secondary,n.TOGGLE_SECONDARY_ABILITY),c(e,o.aux,n.TOGGLE_AUX_ABILITY)};t.shipNotDisabledByCloak=function(e,t){var r=e.abilities.hash[1];if(null==r?void 0:r.activated){for(var a in r.time.curr-=t.stepMS,f(e,t),e.keyCodes)e.keyCodes[a]&&(r.time.curr<=0?r.activated=!1:e.unableToComply=!0);return!1}return r&&(r.time.curr=r.time.value),!0}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(299),r(104),r(300),r(58),r(85),r(111),r(54),r(13),r(1),r(48)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Weapons=void 0;var d=function(e,t,r){switch(e.ammunition.type){case 0:var a=t.abilities.passive.find(function(e){return 6===e.type});if(a&&a.value.n>=e.ammunition.perShot)return r&&(a.value.n-=e.ammunition.perShot),!0;break;case 1:if(e.ammunition.value>=e.ammunition.perShot)return r&&(e.ammunition.value-=e.ammunition.perShot),!0}return!1},p=c.mulberry32(327823),f=[],h=new l.Vector(0,0),v=function(e,t,c){var p=function(e,t){for(var r=e.weapons.all,a=0;a<r.length;a++){var n=r[a];if(n.type===t)return n}}(e,t);if(p&&d(p,e,!1)&&function(e){switch(e.cooldown.type){case 0:if(e.cooldown.value>0)return!1;break;case 1:if(e.cooldown.value>=e.cooldown.max)return!1}return!0}(p)){switch(p.cooldown.type){case 0:p.cooldown.value=p.cooldown.max;break;case 1:p.cooldown.value+=c.step*p.cooldown.incrementM}if(p.requiresTargetLock)if(e.targetLock)switch(d(p,e,!0),t){case 30:return void c.game.rockets.push(a.createRocket(e,p,e.targetLock));case 31:return void f.push({amount:8,shipguid:e.guid,remove:!1,weapon:p});case 50:return void(e.targetLock?(p.active=!0,u.DamageItem2(c,e.targetLock,{type:p.type,vel:h,damage:p.damage,ownerGuid:e.guid})):p.active=!1)}else switch(t){case 30:return void c.game.rockets.push(a.createRocket(e,p,e.aimTarget));case 31:return void f.push({amount:8,shipguid:e.guid,remove:!1,weapon:p});case 50:return void(e.aimTarget?(p.active=!0,u.DamageItem2(c,e.aimTarget,{type:p.type,vel:h,damage:p.damage,ownerGuid:e.guid})):p.active=!1)}else switch(d(p,e,!0),t){case 27:return p.active=!0,void(e.aimTarget&&u.DamageItem2(c,e.aimTarget,{type:p.type,vel:h,damage:p.damage,ownerGuid:e.guid}));case 25:if(e.abilities.hash[15]){var v=new l.Vector(0,0);v.add(e.coaxialMount.pos),v.add(e.coaxialMount.barrel),r.default(e,c,p,e.coaxialMount.angle,v,!0)}else r.default(e,c,p);return;case 32:return void c.game.rockets.push(a.createRocket(e,p));case 24:return void n.createCharge(e,c,p);case 26:return void c.game.flames.push(o.createFlame(e,p));case 42:return void i.createSpaceMine(e,c,p);case 43:return void s.createSpaceTurret(e,c,p);case 41:return void A.createProximityMineFromShip(e,c,p)}}e.unableToComply=!0},g=function(e,t,r){r?t.types.length<1?e.unableToComply=!0:t.canSelect&&(t.canSelect=!1,t.index<t.types.length-1?t.index++:t.index=0):t.canSelect=!0};t.Weapons=function(e,t){var r=e.keyCodes,n=e.weapons,o=r.PRIMARY_WEAPON,i=r.SECONDARY_WEAPON,s=r.AUX_WEAPON;!function(e,t,r,a,n){if(!(e.abilities.active.cloak>0))for(var o=e.weapons.all,i=0;i<o.length;i++){var s=o[i];if(s.active=!1,s.cooldown.value>0){var A=!1;switch(s.arrayType){case 0:A=!r;break;case 1:A=!a;break;case 2:A=!n;break;case 3:throw"error unset selectorArrayType"}if(A)switch(s.cooldown.type){case 0:s.cooldown.value-=t.stepMS;break;case 1:s.cooldown.value-=t.step}}}}(e,t,o,i,s),o&&v(e,n.primary.types[n.primary.index],t),i&&v(e,n.secondary.types[n.secondary.index],t),s&&v(e,n.aux.types[n.aux.index],t),g(e,n.primary,r.TOGGLE_PRIMARY_WEAPON),g(e,n.secondary,r.TOGGLE_SECONDARY_WEAPON),g(e,n.aux,r.TOGGLE_AUX_WEAPON),function(e){for(var t=0;t<f.length;t++){var r=(A=f[t]).shipguid;A.amount,A.amount--;for(var n=null,o=0;o<e.game.player.length;o++){var i=e.game.player[o];if(i.guid===r){n=i;break}}n&&!n.remove&&n.life>0?e.game.rockets.push(a.createRocket(n,A.weapon,n.targetLock||n.aimTarget,.3*Math.PI*(p()-.5),{subType:1})):A.remove=!0,A.amount<1&&(A.remove=!0)}var s=[];for(t=0;t<f.length;t++){var A;(A=f[t]).remove||s.push(A)}f=s}(t)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(12),r(24),r(32)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=new r.Vector(0,0);t.default=function(e,t,s,A,u,l){void 0===A&&(A=0);var c=t.WW,d=t.WH,p=t.game;new r.Vector(0,0);u=u||i;var f=o.createBullet(25,e);f.vel.setLength(e.vel.getLength()+30);var h=0;l?(f.pos.x=e.pos.x+u.x,f.pos.y=e.pos.y+u.y,h=A):(f.pos.x=e.pos.x+Math.cos(e.angle)*e.radius+u.x,f.pos.y=e.pos.y+Math.sin(e.angle)*e.radius+u.y,h=A+e.angle),f.vel.setAngle(h+.02*(Math.random()-.5)),a.shift(f,c,d),p.bullets.push(f);var v=r.vec_pool_pop(f.vel.x,f.vel.y);v.setAngle(e.angle+.5*Math.PI+.1*Math.random()-.05),v.setLength(3+Math.random()),v.add(e.vel),n.createDust(f.pos,1,.3,t,v.x,v.y),r.vec_pool_put(v)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(1),r(4),r(16),r(27)],void 0===(n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCharge=void 0;t.createCharge=function(e,t,s){var A=new r.Vector(1.2*e.vel.x,1.2*e.vel.y);A.mult(.5);var u=new r.Vector(e.pos.x+Math.cos(e.angle+Math.PI)*(e.radius+9+1),e.pos.y+Math.sin(e.angle+Math.PI)*(e.radius+9+1)),l=o(o({ownerGuid:e.guid,damage:s.damage,type:24,collType:13,guid:a.getGuid(),vel:A,timer:4e3,totalTime:4e3,radius:9,life:100},n.setImovableDefaults(i.BallCreator(u.x,u.y,9,9))),{armor:{type:3,value:1}});t.game.charges.push(l)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateShipHashes=void 0;t.updateShipHashes=function(e){for(var t=e.abilities,r=e.weapons,a=0;a<t.all.length;a++)1===(o=t.all[a]).type&&(o.activated?e.abilities.active.cloak=1:e.abilities.active.cloak=0),3===o.type&&(o.activated?e.abilities.active.shield=o.value.n:e.abilities.active.shield=0),e.abilities.hash[o.type]=o;for(var n=0;n<t.passive.length;n++){var o=t.passive[n];e.abilities.hash[o.type]=o}for(a=0;a<r.all.length;a++){var i=r.all[a];e.weapons.hash[i.type]=i}}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(12),r(4),r(23),r(18),r(21),r(30),r(6),r(104),r(30),r(5),r(32),r(105),r(58),r(42)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var v=.1;t.default=function(e){var t=e.game,g=(e.SX,e.SY,e.SW),y=e.SH,m=e.WW,x=e.WH,S=e.step,_=t.enemies,T=_.length,E=c.getQuadTreesObj();if(E.All){for(var M=0;M<T;M++){var I=_[M];(v+=.002)>.1&&(v=.1),I.thrust.setLength(v),I.thrust.setAngle(I.angle),I.vel.add(I.thrust),I.vel.mult(.99),I.vel.getLength()>I.maxVel&&I.vel.setLength(I.maxVel);var L=s.default(I,I.angle,l.getGenericAvoidance(I,e,[22,3],[]));I.vel.add(L.avoidance),I.avoidance=L,I.angle=A.normalizeRadianAngle(I.angle),o.default(I,S),r.shift(I,m-.2*g,x-.2*y,.2*g,.2*y),n.default(t,I,!0),i.wormhole(I,e);var w=E.queryTreesVec(I.guid%2==0?[44,49,2,43,9,10,8,0]:[0,49,2,43,44,9,10,8],I.pos,.5*g,.5*y,!0);I.bulletsFired>0&&(I.bulletsFired-=.05*S);for(var b=null,P=null,R=0;R<w.length;R++){var O=w[R];if(!(44===O.type&&O.abilities.active.cloak>0)){P=O,b=O.pos;break}if(a.distanceBetweenVectors(O.pos,I.pos)<180){P=O,b=O.pos;break}}if(b){var C=p.getUpgradeLevel(I),G=C>2,D=a.distanceBetweenVectors(b,I.pos);if(G&&D<400||!G&&D<t.resW){var N=.05;D<100&&(v=.01,N=.15);var B=Math.atan2(b.y-I.pos.y,b.x-I.pos.x);if(I.turnAcc=A.angleDelta(I.angle,B)*N,I.angle+=I.turnAcc*S,I.bulletsFired<I.maxBullets+5*C){if(G){var F=f.createFlame(I,h.weaponDatas.flameThrower);t.flames.push(F),I.bulletsFired++}else{var V=d.createBullet(48,I);r.shift(V,m,x),t.bullets.push(V),I.bulletsFired++}(P.inSafeZone?Math.random()>.95:Math.random()>.986-.02*p.getUpgradeLevel(I))&&(Math.random()>.66?t.rockets.push(u.createRocket(I,I.weapons.hash[30],P)):u.createRocket(I,I.weapons.hash[32],P))}}}}return"enemies"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},i=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(4),r(18),r(12),r(304),r(102),r(156),r(156),r(7),r(30),r(30),r(5),r(155)],void 0===(n=function(e,t,r,a,n,s,A,u,l,c,d,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ASTAR_GRID_RES=void 0;var v=function(e,t,r){return r?Math.min(e.gridX,t.gridX):Math.min(e.gridY,t.gridY)},g=function(e,t,r){return r?Math.max(e.gridX,t.gridX):Math.max(e.gridY,t.gridY)};t.ASTAR_GRID_RES=4;var y=function(e,r,a,n,i){void 0===i&&(i=2);var s=v(r,a,!0)+-.5*i,l=g(r,a,!0)+.5*i,d=v(r,a,!1)+-.5*i,p=g(r,a,!1)+.5*i,h=(A.getSectorSize(e.WW,e.WH).w,(l-s)*t.ASTAR_GRID_RES),y=(p-d)*t.ASTAR_GRID_RES,m=c.rect_pool_pop(s/A.RESOLUTION,d/A.RESOLUTION,l/A.RESOLUTION-s/A.RESOLUTION,p/A.RESOLUTION-d/A.RESOLUTION),x=f.getQuadTreesObj().queryTreesRect([n],m);if(c.rect_pool_put(m),e.game.player[0]){var S=o({},e.game.player[0]);S.radius=2.5*S.radius,x.push(S)}return{allPass:!1,res:u.default(t.ASTAR_GRID_RES,e,h,y,x,s,d),fromX:s,fromY:d}},m=function(e){for(var t=[],r=e.length,a=0;a<r;a++)t.push({x:e[a].y,y:e[a].x});return t},x=null,S=0,_=0,T=null,E=0,M=6,I=M;t.default=function(e){e.keyCodes;var o,u=e.game,c=e.WW,v=e.WH,g=(e.SX,e.SY,e.SW,e.SH,e.step),L=e.stepMS;if(f.getQuadTreesObj().All){var w=u.wayPoints;1,E+=L;for(var b=u.npcs,P=b.length,R=0;R<P;R++){var O=b[R];O.thrust.setLength(.05);var C=b[R-1];w[O.currentWayPointIndex];if(w.length>0)if(0===R){var G=A.getPoistionVecXYinGrid(O.pos);if(E>200||!T||x&&1===x.length||G.x!==T.x||G.y!==T.y){E=0;var D={gridX:G.x,gridY:G.y};M=Math.min(w.length-1-O.currentWayPointIndex,M),I>M&&(I=M);var N=w[O.currentWayPointIndex+I];if(N){var B=y(e,D,N,4,6),F=s.default();S=B.fromX,_=B.fromY;var V=l.transformPosToGrid(e,O.pos.x,O.pos.y,B.fromX,B.fromY,t.ASTAR_GRID_RES),k={x:(N.gridX-B.fromX)*t.ASTAR_GRID_RES,y:(N.gridY-B.fromY)*t.ASTAR_GRID_RES},X=new F.Graph(B.res,{diagonal:!0}),H=X.grid[V.y][V.x],U=X.grid[k.y][k.x];if(x=m(F.astar.search(X,H,U,null)),u.debug&&(u.debug.graphMap={graphMap:x,x:S,y:_,grid:B.res,wp:N,wpStart:G}),x&&x.length<I)if(x.length>0){I<M&&I++;for(var W=0;W<P;W++)b[W].currentWayPointIndex++}else.1,I>2?I--:I=M;x.length>0&&(T=G)}}var Y=x[Math.min(x.length-1,3)];if(Y){var q=A.gridPosToWorld(Y.x/t.ASTAR_GRID_RES+S,Y.y/t.ASTAR_GRID_RES+_);Math.atan2(q.y-O.pos.y,q.x-O.pos.x)}else if(T){q=A.gridPosToWorld(T.x,T.y,c,v);Math.atan2(q.y-O.pos.y,q.x-O.pos.x),0}}else{Math.atan2(C.pos.y-O.pos.y,C.pos.x-O.pos.x);var z=r.distanceBetweenVectors(C.pos,O.pos);z<3*O.radius?0:z>7*O.radius&&1.3}else{var j=p.getGenericAvoidance(O,e,i([2,44],0===(null===(o=null==O?void 0:O.miningRig)||void 0===o?void 0:o.minedMinerals)?[22]:[]),[]),K=d.default(O,O.angle,j);O.thrust.add(K.avoidance),O.avoidance=K}O.vel.mult(.98),h.default(O,e),a.default(O,g),n.shift(O,c,v),O.damageTaken=!1}return"npc"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Math.sqrt(2);t.default=function(){function e(e){for(var t=e,r=[];t.parent;)r.unshift(t),t=t.parent;return r}var t={search:function(r,a,n,i){r.cleanDirty();var s=(i=i||{}).heuristic||t.heuristics.manhattan,A=i.closest||!1,u=new o(function(e){return e.f}),l=a;for(a.h=s(a,n),r.markDirty(a),u.push(a);u.size()>0;){var c=u.pop();if(c===n)return e(c);c.closed=!0;for(var d=r.neighbors(c),p=0,f=d.length;p<f;++p){var h=d[p];if(!h.closed&&!h.isWall()){var v=c.g+h.getCost(c),g=h.visited;(!g||v<h.g)&&(h.visited=!0,h.parent=c,h.h=h.h||s(h,n),h.g=v,h.f=h.g+h.h,r.markDirty(h),A&&(h.h<l.h||h.h===l.h&&h.g<l.g)&&(l=h),g?u.rescoreElement(h):u.push(h))}}}return A?e(l):[]},heuristics:{manhattan:function(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},diagonal:function(e,t){var a=r,n=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);return 1*(n+o)+(a-2)*Math.min(n,o)}},cleanNode:function(e){e.f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=null}};function a(e,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(var r=0;r<e.length;r++){this.grid[r]=[];for(var a=0,o=e[r];a<o.length;a++){var i=new n(r,a,o[a]);this.grid[r][a]=i,this.nodes.push(i)}}this.init()}function n(e,t,r){this.x=e,this.y=t,this.weight=r}function o(e){this.content=[],this.scoreFunction=e}return a.prototype.init=function(){this.dirtyNodes=[];for(var e=0;e<this.nodes.length;e++)t.cleanNode(this.nodes[e])},a.prototype.cleanDirty=function(){for(var e=0;e<this.dirtyNodes.length;e++)t.cleanNode(this.dirtyNodes[e]);this.dirtyNodes=[]},a.prototype.markDirty=function(e){this.dirtyNodes.push(e)},a.prototype.neighbors=function(e){var t=[],r=e.x,a=e.y,n=this.grid;return n[r-1]&&n[r-1][a]&&t.push(n[r-1][a]),n[r+1]&&n[r+1][a]&&t.push(n[r+1][a]),n[r]&&n[r][a-1]&&t.push(n[r][a-1]),n[r]&&n[r][a+1]&&t.push(n[r][a+1]),this.diagonal&&(n[r-1]&&n[r-1][a-1]&&t.push(n[r-1][a-1]),n[r+1]&&n[r+1][a-1]&&t.push(n[r+1][a-1]),n[r-1]&&n[r-1][a+1]&&t.push(n[r-1][a+1]),n[r+1]&&n[r+1][a+1]&&t.push(n[r+1][a+1])),t},a.prototype.toString=function(){for(var e=[],t=this.grid,r=0;r<t.length;r++){for(var a=[],n=t[r],o=0;o<n.length;o++)a.push(n[o].weight);e.push(a.join(" "))}return e.join("\n")},n.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},n.prototype.getCost=function(e){return e&&e.x!=this.x&&e.y!=this.y?1.41421*this.weight:this.weight},n.prototype.isWall=function(){return 0===this.weight},o.prototype={push:function(e){this.content.push(e),this.sinkDown(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e},remove:function(e){var t=this.content.indexOf(e),r=this.content.pop();t!==this.content.length-1&&(this.content[t]=r,this.scoreFunction(r)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(e){this.sinkDown(this.content.indexOf(e))},sinkDown:function(e){for(var t=this.content[e];e>0;){var r=(e+1>>1)-1,a=this.content[r];if(!(this.scoreFunction(t)<this.scoreFunction(a)))break;this.content[r]=t,this.content[e]=a,e=r}},bubbleUp:function(e){for(var t=this.content.length,r=this.content[e],a=this.scoreFunction(r);;){var n,o=e+1<<1,i=o-1,s=null;if(i<t){var A=this.content[i];(n=this.scoreFunction(A))<a&&(s=i)}if(o<t){var u=this.content[o];this.scoreFunction(u)<(null===s?a:n)&&(s=o)}if(null===s)break;this.content[e]=this.content[s],this.content[s]=r,e=s}}},{astar:t,Graph:a}}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(21),r(19),r(3),r(5)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=0;t.default=function(e){var t=e.game;e.step,e.SW,e.SH,e.SX,e.SY,e.WW,e.WH;if(++i>200){i=0;for(var A=0;A<t.anomlies.length;A++){if(12===(v=t.anomlies[A]).type){var u=o.getQuadTreesObj().queryTreesVec([4],v.pos,400,400);u.length>20&&r.wormhole(u[0],e,!0);break}}}if(t.asteroids.length>n.MAX_NUM_ASTEROIDS)for(A=0;A<t.asteroids.length;A++){(c=t.asteroids[A]).remove=!0;break}else if(t.asteroids.length<100&&e.IS_MULTIPLAYER){var l=a.default(e,50,60,120);for(A=0;A<l.length;A++){var c=l[A];r.wormhole(c,e,!0),t.asteroids.push(c)}}if(t.IS_PROCEDURAL){var d=t.procedural.boundsSS,p=t.spaceFog;for(A=0;A<p.length;A++){var f=p[A];if(!d.intersectsPoint({x:f.x,y:f.y})){t.spaceFog.splice(A,1);break}}var h=t.anomlies;for(A=0;A<h.length;A++){var v=h[A];if(!d.intersectsPoint(v.pos)){t.anomlies.splice(A,1);break}}if(t.procedural.map.MOVED_XY_ABS_DIST_CELLS<10){var g=t.anomalyPairs;for(A=0;A<g.length;A++){var y=g[A];if(!d.intersectsPoint(y.in.pos)&&!d.intersectsPoint(y.out.pos)){t.anomalyPairs.splice(A,1);break}}}var m=t.asteroidBelts;for(A=0;A<m.length;A++){var x=m[A];if(!d.intersectsPoint({x:x.x,y:x.y})){t.asteroidBelts.splice(A,1);break}}var S=e.game.ancients;for(A=0;A<S.length;A++){var _=S[A];if(!d.intersectsPoint(_.pos)){e.game.ancients=[],e.game.ancientBlocks=[];for(var T=_.rooms,E=T.length,M=0;M<E;M++){switch(T[M].inhabitantType){case 8:for(var I=t.spaceSnake.length,L=0;L<I;L++){var w=t.spaceSnake[A];s(w.segments,_.guid)>0&&0}break;case 9:s(e.game.spaceSquids,_.guid);break;case 10:s(e.game.spaceSpiders,_.guid)}}}}}return"cleanup"};var s=function(e,t){for(var r=e.length,a=0,n=0;n<r;n++){var o=e[n];o.ownedByStructureGuid===t&&(o.remove=!0,o.ownedByStructureGuid=null,o.ownedByStructureType=null,a++)}return a}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeType=void 0;t.changeType=function(e,t){e.type=t}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(18),r(23),r(12)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){for(var t=e.game,o=e.step,i=e.WW,s=e.WH,A=e.stepMS,u=t.charges,l=u.length,c=0;c<l;c++){var d=u[c];d.timer-=A,d.timer<3?d.remove=!0:(d.vel.mult(.98),d.vel.limit(4),r.default(d,o),n.shift(d,i,s),a.default(t,d,!1))}return"Charges"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(12),r(5),r(13)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=new r.Vector(0,0);t.default=function(e){var t=e.game,r=(e.WW,e.WH,e.step),s=n.getQuadTreesObj();if(s.All){for(var A=t.spaceFog,u=A.length,l=0;l<u;l++){var c=A[l];if(a.onStageXY(e,c.x,c.y,c.radius)&&(i.set(c.x,c.y),c.fire))for(var d=s.queryTreesVec([44,49,1,35,9,2],i,c.radius,c.radius),p=0;p<d.length;p++){var f=d[p];if(44===f.type&&Math.random()>.9)f.damageTaken=!0;o.DamgeItemFixedValue(f,.3*r)}}return"fog"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(310),r(5),r(7)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=e.step,o=r.updateEntityList(e),i=a.___getQtreeList(),s=e.game.IS_PROCEDURAL?e.game.procedural.treeBounds||e.game.proceduralBounds:new n.Rectangle(0,0,e.WW,e.WH);0,Math.abs(s.width);var A=i[0];A.setup(s,10,88,8,!0);for(var u=o[0].list,l=u.length,c=0;c<l;c++){var d=u[c];d.inTree=!0,!1===A.insert(d,t)&&(d.inTree=!1)}return A.references.length}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(7)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateEntityList=t.getEntityList=t.getAllSpacePortCannonsCached=t.getAllSpaceSnakeSegmentsCached=void 0;var a=[],n=[];t.getAllSpaceSnakeSegmentsCached=function(e){if(a.length>0)return a;for(var t=[],r=e.length,n=0;n<r;n++)for(var o=e[n].segments,i=o.length,s=0;s<i;s++){var A=o[s];t.push(A)}return a=t,t};t.getAllSpacePortCannonsCached=function(e){if(n.length>0)return n;for(var t=[],r=e.length,a=0;a<r;a++)for(var o=e[a].cannons,i=o.length,s=0;s<i;s++){var A=o[s];t.push(A)}return n=t,t};var o=[];o[0]={type:88,list:[],preCalculateBounds:!1,AABB_VELOCITY_BASED:!0,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!0},o[1]={type:88,list:[],preCalculateBounds:!1,AABB_VELOCITY_BASED:!0,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!0},o[2]={type:4,list:[],preCalculateBounds:!1,AABB_VELOCITY_BASED:!0,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!1},o[3]={type:11,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!0},o[4]={type:7,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!0},o[5]={type:1,list:[],preCalculateBounds:!1,AABB_VELOCITY_BASED:!0,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!1},o[6]={type:44,list:[],preCalculateBounds:!1,AABB_VELOCITY_BASED:!0,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!1},o[8]={type:2,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!1},o[7]={type:35,list:[],preCalculateBounds:!1,AABB_VELOCITY_BASED:!1,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:3,largeProceduralBounds:!0},o[9]={type:9,list:[],preCalculateBounds:!1,AABB_VELOCITY_BASED:!1,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!0},o[10]={type:49,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!0,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!1},o[12]={type:30,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!0,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!1},o[11]={type:25,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!0,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!1},o[13]={type:24,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!1},o[14]={type:3,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!0},o[15]={type:22,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!0},o[16]={type:10,list:[],preCalculateBounds:!1,AABB_VELOCITY_BASED:!1,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!0},o[17]={type:41,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!1},o[18]={type:42,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!0,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!1},o[19]={type:43,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!0,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!1},o[20]={type:0,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!0},o[21]={type:26,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!0,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!1},o[22]={type:6,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!0},o[24]={type:17,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!0};var i=-1;o[23]={type:21,list:[],preCalculateBounds:!0,AABB_VELOCITY_BASED:!1,bounds:r.rect_pool_pop(0,0,0,0),cap:5,maxDepth:12,largeProceduralBounds:!0,keepEvaluator:function(e){var t=e.game.ancients;if(1===t.length){var r=t[0];if(r.guid===i)return!0;i=r.guid}return!1}};t.getEntityList=function(){return o};t.updateEntityList=function(e){var r=e.game;a=[],n=[];var i=r.asteroids,s=r.rockFormations,A=r.rockFormationSystemRadius,u=r.enemies,l=r.player,c=r.npcs,d=t.getAllSpaceSnakeSegmentsCached(r.spaceSnake),p=r.bullets,f=r.rockets,h=r.drones,v=r.charges,g=r.spacePorts,y=r.spaceSpiders,m=t.getAllSpacePortCannonsCached(r.spacePorts),x=r.spaceSquids,S=r.proximityMines,_=r.spaceMines,T=r.spaceTurrets,E=r.destroyers,M=r.flames,I=r.ancients,L=r.ancientBlocks,w=r.minefields;return o[0].list=function(e){for(var t=[],r=e.length,a=0;a<r;a++)for(var n=e[a],o=n.length,i=0;i<o;i++)t.push(n[i]);return t}([i,s,A,u,l,c,d,x,h,f,p,v,g,m,y,S,_,T,E,M,I,L,w]),o[2].list=i,o[3].list=s,o[4].list=A,o[5].list=u,o[6].list=l,o[8].list=c,o[7].list=d,o[9].list=x,o[10].list=h,o[12].list=f,o[11].list=p,o[13].list=v,o[14].list=g,o[15].list=m,o[16].list=y,o[17].list=S,o[18].list=_,o[19].list=T,o[20].list=E,o[21].list=M,o[22].list=I,o[23].list=L,o[24].list=w,o}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(160),r(5)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNumCollisions=void 0;var n=0,o=0;t.getNumCollisions=function(){var e=n,t=o;return n=0,o=0,{collisions:e,broadPhase:t}},t.default=function(){var e=a.___getQtreeList()[0],t=r.getIntersectionData(),i={},s=function(e){var r=t[e],a={};r.forEach(function(e){return a[e.type]=e.handler}),i[e]=a};for(var A in t)s(A);for(var u=e.intersectTree(e),l=e.references,c=[],d=0;d<u.length;d++)for(var p=u[d],f=l[p[0]],h=1;h<p.length;h++){var v=l[p[h]];if(f.guid!==v.guid&&!f.remove&&!v.remove){var g=!1,y=i[f.collType];if(y)(m=y[v.collType])&&(g=!0,c.push({a:f,b:v,handler:m,AABB_VEL:!0}));if(!g){var m,x=i[v.collType];if(x)(m=x[f.collType])&&(g=!0,c.push({b:f,a:v,handler:m,AABB_VEL:!0}))}o++,g&&n++}}return c}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(12)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n){var o=e.radius,i=t.radius;if(3===e.type){var s=e;o=s.cannons.length<=1?0:o*(s.cannons.length/7)*.6}if(3===t.type){var A=t;i=A.cannons.length<=1?0:i*(A.cannons.length/7)*.6}r.resolve(n.step,e,t)&&(a.shift(e,n.WW,n.WH),a.shift(t,n.WW,n.WH))}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(12)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n){if(r.resolve(n.step,e,t))return a.shift(e,n.WW,n.WH),a.shift(t,n.WW,n.WH),e.vel.mult(.1),!0}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(12),r(315),r(3),r(14),r(13),r(113)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,u){var l=e,c=t;if(l.abilities.active.shield>3)n.default(e,c,u);else if(c.abilities.active.shield>3)n.default(c,e,u);else{if(44!==l.type&&44!==c.type)return A.default(e,t,u);for(var d=l.vel.getLength(),p=c.vel.getLength(),f=d<3&&p<3,h=0;h<3;h++){var v=c.comp[0].vertex[h],g=l.comp[0].vertex[h],y=r.fine(l.comp[0].vertex.length,l.comp[0].vertex,v),m=r.fine(c.comp[0].vertex.length,c.comp[0].vertex,g);if(y||m){if(r.resolve(u.step,e,t)){if(a.shift(e,u.WW,u.WH),a.shift(t,u.WW,u.WH),f||s.DamageImpact(l,c),l.score-=o.PLAYER_SCORE_PLAYER_COLLIDED_WITH_SHIP,f){if(u.game.eventMap,f){var x=y?v:g;i.addForce(u.game,x.x,x.y,3,0,null)}}else i.addForceExplosion(u.game,v.x,v.y,30,0,null);l.life<1&&c.level++,c.life<1&&l.level++}break}}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(12)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n){r.resolve(n.step,e,t)&&(a.shift(e,n.WW,n.WH),a.shift(t,n.WW,n.WH))}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(12),r(107),r(317),r(318),r(3),r(14),r(13),r(113)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,c){var d=e;if(d.abilities.active.shield>3)return o.default(e,t,c);if(44!==d.type)return l.default(e,t,c);var p=d.comp[0].vertex,f=t.subType,h=e.vel.getLength()<5;if(r.distanceBetweenVectors(d.pos,t.pos)<1.2*d.radius+t.radius){var v=!1;if(t.radius<e.radius){if(i.default(d.comp[0].vertex[0],d.comp[0].vertex[1],t)||i.default(d.comp[0].vertex[1],d.comp[0].vertex[2],t)||i.default(d.comp[0].vertex[2],d.comp[0].vertex[0],t))return r.resolve(c.step,d,t),!0}else for(var g=0;g<p.length;g++){var y=p[g];if(r.distanceBetweenXYXY(y.x,y.y,t.pos.x,t.pos.y)<t.radius){v=!0,h&&A.addForce(c.game,y.x,y.y,3,0,null),4===f&&(h||A.addForce(c.game,y.x,y.y,30,0,null,!0));break}}if(v){if(4===f)return h||u.DamageImpact(t,e),r.resolve(c.step,d,t),d.score-=s.PLAYER_SCORE_PLAYER_COLLIDED_WITH_ASTEROID(t.radius),a.shift(e,c.WW,c.WH),a.shift(t,c.WW,c.WH),!0;n.default(t,d,c)}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(12),r(107),r(13)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,i){if(4===t.type){if(r.resolve(i.step,e,t))return a.shift(e,i.WW,i.WH),a.shift(t,i.WW,i.WH),o.DamageImpact(t,e),!0}else r.distanceBetweenVectors(e.pos,t.pos)<e.radius+t.radius&&n.default(t,e,i)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var a=r.pos,n=r.radius,o=e.x-a.x,i=e.y-a.y,s=t.x-a.x,A=(t.y-a.y-i)/(s-o),u=i-A*o,l=Math.pow(n,2)*Math.pow(A,2)+Math.pow(n,2)-Math.pow(u,2);if(l<0)return!1;var c=(-A*u+Math.sqrt(l))/(Math.pow(A,2)+1),d=(-A*u-Math.sqrt(l))/(Math.pow(A,2)+1);return[{x:c+a.x,y:A*c+u+a.y},{x:d+a.x,y:A*d+u+a.y}]}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(4),r(3),r(13)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t){return e.life>=t.life};t.default=function(e,t,i){var s=t,A=e;if(r.coarse(s,e)){if(s.isEnemyForMS>0)return void(A.inSafeZone=!1);var u=s.reparations,l=o(A,u);if(!A.inSafeZone){var c={life:a.NOTIFICATION_LIFE,type:75,onlyForGuid:A.guid};if(i.game.notifications.unshift(c),!l){var d={life:a.NOTIFICATION_LIFE,type:78,onlyForGuid:A.guid};i.game.notifications.unshift(d)}A.inSafeZone=!0}var p=!1;if(A.life<u.life&&(n.LifeIncreaseFixedValue(A,1),p=!0),l=o(A,u),p&&!l&&(s.shipChargeHash[e.guid]=!0),l&&p){var f={life:a.NOTIFICATION_LIFE,type:79,onlyForGuid:A.guid};i.game.notifications=i.game.notifications.filter(function(e){return e.type!==f.type}),i.game.notifications.unshift(f)}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(3),r(17),r(10),r(14),r(13)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,A){if(r.coarse(e,t)&&r.fine(3,t.comp[0].vertex,e.pos)){var u=e,l=t;(l.guid!==u.ownerGuid||u.life<a.ROCKET_START_LIFE-100)&&(n.ShipLike(u.type)&&o.LOG_GL_FIXED_FORCED("Err rocket is not ship","Type ERROR"),u.remove=!0,s.DamageItem2(A,l,u),l.inSafeZone&&u.vel.mult(.4),0===l.type&&u.vel.mult(.1),l.vel.add(u.vel),l.life<1&&(l.killedByGuid=u.ownerGuid),i.addForceExplosion(A.game,u.pos.x,u.pos.y,90,2,null))}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(14),r(13)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,o){if(r.coarse(e,t)){if(e.remove=!0,o.IS_MULTIPLAYER&&!o.IS_SERVER)return;n.DamageItem2(o,t,e),a.addForceExplosion(o.game,t.pos.x,t.pos.y,70,1,null)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(14),r(86),r(13)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,i){if(r.coarse(e,t)){var s=n.circleLineColl(e,t);if(s.collided){if(e.remove=!0,i.IS_MULTIPLAYER&&!i.IS_SERVER)return;o.DamageItem2(i,t,e),t.life<1||a.addForce(i.game,s.cp.x,s.cp.y,30,0,null,!0)}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(33),r(4),r(1),r(6),r(14),r(13)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var A=new n.Vector(0,0);t.default=function(e,t,n){if(4===t.type)a.coarse(t,e)&&(e.remove=!0,n.game.eventMap[r.GAME_EVENT.EXPLOSION]={x:t.pos.x,y:t.pos.y,radius:t.radius},s.DamageItem2(n,t,e),i.addForceExplosion(n.game,e.pos.x,e.pos.y,250,2,null));else if(22===t.type){if(a.coarse(t,e)){var u=t;e.remove=!0,n.game.eventMap[r.GAME_EVENT.EXPLOSION]={x:t.pos.x,y:t.pos.y,radius:t.radius},s.DamageItem2(n,t,e),t.vel.add(e.vel);for(var l=0;l<33;l++)A.setFromVec(e.pos),A.subtract(u.pos),A.mult(.5*Math.random()+.4),o.rotateVector(A,-u.angle,A),o.rotateVector(A,(Math.random()-.5)*Math.PI*.12,A),u.damages.push(A.clone()),u.damages.length>200&&u.damages.shift();i.addForceExplosion(n.game,e.pos.x,e.pos.y,250,2,null)}}else 11!==t.type&&21!==t.type||a.coarse(t,e)&&(i.addForceExplosion(n.game,e.pos.x,e.pos.y,250,2,null),e.remove=!0,s.DamageItem2(n,t,e))}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(33),r(3),r(78),r(325),r(86),r(14),r(13)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,u){var l,c=t,d=e;c.comp[0].vertex;if(!(c.guid===d.ownerGuid&&d.life>a.BULLET_OWNER_IMMUNE_THRESHOLD)){var p=null===(l=c.abilities.hash[3])||void 0===l?void 0:l.activated,f=p?i.circleLineColl(e,c,2*c.radius):o.triangleLineColl(e,c);if(f.collided&&(s.addForceExplosion(u.game,f.cp.x,f.cp.y,30,0,null),p||A.DamageItem2(u,t,e),e.remove=!0,t.life<1)){c.killedByGuid=d.ownerGuid;var h=d.ownerGuid,v=n.findPlayerWithGuid(u,h);v&&(v.score+=a.PLAYER_SCORE_KILLED_OTHER_SHIP),t.remove=!0,s.addForceExplosion(u.game,f.cp.x,f.cp.y,90,2,null),u.game.eventMap[r.GAME_EVENT.EXPLOSION]={y:f.cp.x,x:f.cp.y}}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(31),r(161)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triangleLineColl=void 0;var o=new r.Vector(0,0),i=[0,1,2],s=[1,2,0];t.triangleLineColl=function(e,t){o.set(e.pos.x+e.vel.x,e.pos.y+e.vel.y);for(var r=t.comp[0].vertex,A=[],u=0;u<3;u++){var l=r[i[u]],c=r[s[u]],d=a.LineIntersectsToPoint(l.x,l.y,c.x,c.y,e.pos.x,e.pos.y,o.x,o.y);d&&A.push(d)}return 0===A.length?{collided:!1}:{collided:!0,cp:n.getCorrectCollisionPoint(A,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(33),r(1),r(6),r(78),r(3),r(86),r(14),r(13)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=new a.Vector(0,0);t.default=function(e,t,a){var c=s.circleLineColl(e,t);if((4===t.type||22===t.type||21===t.type||11===t.type)&&c.collided){if(e.remove)return;if(22===t.type&&28===e.type)return;var d=c.cp,p=25===e.type,f=e;if(22===t.type){var h=t,v=h.aggressionForGuidsHash[f.ownerGuid]||0;h.aggressionForGuidsHash[f.ownerGuid]=v+1,v>=20&&(h.weaponsActiveTimerMS=5e3),l.setFromVec(d),l.subtract(h.pos),l.mult(.8*Math.random()+.1),n.rotateVector(l,-h.angle,l),h.damages.push(l.clone()),h.damages.length>200&&h.damages.shift()}if(u.DamageItem2(a,t,f),e.remove=!0,t.life<0){if(4===t.type&&p){var g=f.ownerGuid;(y=o.findPlayerWithGuid(a,g))&&(y.score+=i.PLAYER_SCORE_REMOVED_ASTEROID(t.radius))}a.game.eventMap[r.GAME_EVENT.EXPLOSION]={x:t.pos.x,y:t.pos.y,radius:t.radius}}else{var y;if(p)g=f.ownerGuid,(y=o.findPlayerWithGuid(a,g))&&(y.score+=i.PLAYER_SCORE_BULLET_HIT_ASTEROID);A.addForceExplosion(a.game,d.x,d.y,70,0,null),a.game.eventMap[r.GAME_EVENT.SPACE_BULLET_IMPACT]={x:d.x,y:d.y}}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(24),r(14),r(13)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,i){if(r.coarse(e,t)){if(e.remove=!0,i.IS_MULTIPLAYER&&!i.IS_SERVER)return;for(var s=0;s<8;s++)a.createDust(e.pos,1,0,i,Math.random()-.5,Math.random()-.5);o.DamageItem2(i,t,e),n.addForceExplosion(i.game,t.pos.x,t.pos.y,30,0,null)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(1),r(4),r(16),r(27),r(4),r(19)],void 0===(n=function(e,t,r,a,n,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,u){var l=null;if(4===e.type&&11===t.type)l=e;else{if(4!==t.type||11!==e.type)return void(a.coarse(e,t)&&s.resolve(u.step,e,t));l=t}if(u.game.rockFormations.length>200)a.coarse(e,t)&&s.resolve(u.step,e,t);else if(s.coarseVecotr(e.pos,.85*e.radius,t.pos,.85*t.radius)){l.remove=!0;var c=o(o({specular:.9,minerals:l.radius,isLV426:l.isLV426},n.setImovableDefaults(i.BallCreator(l.pos.x,l.pos.y,l.radius,20*l.m))),{netangle:0,netpos:{x:0,y:0},netvel:{x:0,y:0},vel:new r.Vector(0,0),staticPos:l.pos.clone(),life:l.life,sides:l.sides,angle:l.angle,guid:s.getGuid(),angleVel:0,radius:l.radius,type:11,collType:3,armor:{type:5,value:1},resources:A.createDefaultResources(l.radius,11)});l.remove=!0,u.game.rockFormations.push(c)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(12)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n){if(r.resolve(n.step,e,t)&&(a.shift(e,n.WW,n.WH),a.shift(t,n.WW,n.WH),41===e.type)){var o=e;o.target&&o.target.guid===t.guid&&(o.aquireTimer=o.timerT+1)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(13)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,n){var o=t.pos.x-e.pos.x,i=t.pos.y-e.pos.y,s=Math.sqrt(o*o+i*i);if(e.radius+t.radius>=s)if(42===e.type&&((A=e).activationTimer<=0?A.remove=!0:r.resolve(n.step,e,t)),42===t.type)(A=t).activationTimer<=0||42===e.type?A.remove=!0:r.resolve(n.step,e,t);else if(42===e.type&&t.armor)(A=e).activationTimer<=0&&a.DamageItem2(n,t,e);else if(42===t.type&&e.armor){var A;(A=t).activationTimer<=0&&a.DamageItem2(n,e,t)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(33),r(4),r(14),r(13)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,i){a.coarse(t,e)&&(o.DamageItem2(i,t,e),e.remove=!0,t.life<0&&(t.remove=!0),n.addForceExplosion(i.game,e.pos.x-e.vel.x,e.pos.y-e.vel.y,30,0,null),i.game.eventMap[r.GAME_EVENT.SPACE_BULLET_IMPACT]={x:e.pos.x,y:e.pos.y})}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(333),r(51)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifier=void 0;t.verifier=function(e){var t=function(e,t,n){var o="Intersection "+e+": "+t.split("_").map(function(e){return r.QtEntitiesToString(parseInt(e,10))}).join(" > ");if(n)throw o;a.TestLogger(o,!1)},n={},o={},i=function(r){o[r]=r+"",e[r].map(function(e){o[e.type]=e.type+"";var a=r+"_"+e.type,i=e.type+"_"+r;n[a]&&t("duplicate",a,!0),n[i]&&t("duplicate",i,!0),n[a]=!0,n[i]=!0})};for(var s in e)i(s);for(var s in a.TestLogger("IntersectionData.",!0),o)for(var A in o)!n[s+"_"+A]||n[A+"_"+s]}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QtEntitiesEnemiesList=t.QtEntitiesToString=void 0;var r=[22,4],a=[14,15,3,23],n=[11,12,21,18],o=[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23].filter(function(e){return!r.includes(e)&&!n.includes(e)}),i=o.filter(function(e){return!a.includes(e)});t.QtEntitiesToString=function(e){switch(e){case 2:return"Asteroids";case 3:return"RockFormations";case 4:return"RockFormationSystems";case 5:return"Enemies";case 6:return"Player";case 7:return"SpaceSnakes";case 8:return"Npcs";case 9:return"SpaceSquids";case 10:return"Drones";case 11:return"Bullets";case 12:return"Rockets";case 13:return"Charges";case 14:return"SpacePorts";case 15:return"SpacePortCannons";case 16:return"SpaceSpiders";case 17:return"ProximityMines";case 18:return"SpaceMines";case 19:return"SpaceTurrets";case 20:return"Destroyers";case 21:return"Flames";case 22:return"Ancients";case 23:return"AncientBlocks";case 25:return"one way collision";default:return"unknown: "+e}},t.QtEntitiesEnemiesList=[5,7,16,9];!function(e){for(var r=[],a=[],n=0;n<e.length;n++)for(var o=n;o<e.length;o++)r.push([e[n],e[o]]),a.push([t.QtEntitiesToString(e[n]),t.QtEntitiesToString(e[o])]);a.length}(i);var s=function(e,r){for(var a=[],n=[],o=0;o<e.length;o++)for(var i=0;i<r.length;i++)a.push([e[o],r[i]]),n.push([t.QtEntitiesToString(e[o]),t.QtEntitiesToString(r[i])]);n.length};s(a,i),s(n,o)}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(7),r(51),r(57),r(162),r(60)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.velocityAABBtest=void 0;var s=function(e){var t=[],r=[];o.drawTreeRec(e.root,e,t,r,100,100),i.drawExternal({polys:t}),i.drawExternal({polys:r,g:0,b:0})};t.velocityAABBtest=function(){for(var e=[n.QuadTreeFastRect32],t=0;t<e.length;t++){var o=e[t],A=r.rect_pool_pop(0,0,500,500),u=r.rect_pool_pop(0,0,500,500),l=r.rect_pool_pop(0,0,500,500),c=new o(A,5,4,5,!1),d=new o(u,5,25,5,!0),p=new o(l,5,25,5,!1);r.rect_pool_put(A),r.rect_pool_put(u),r.rect_pool_put(l),c.insert({pos:{x:220,y:100},vel:{x:0,y:0},radius:25,type:4,collType:2,sleepingAABB:!1},1),d.insert({pos:{x:270,y:100},vel:{x:100,y:0},radius:1,type:25,collType:11,sleepingAABB:!1},1),p.insert({pos:{x:200,y:100},vel:{x:100,y:0},radius:1,type:25,collType:11,sleepingAABB:!1},1);var f=c.intersectTree(d);console.log("swept result",t,f),1===f.length&&2===f[0].length?a.TestLogger("AABB (swept)"+c.getRangeType(),!0):(a.TestLogger("AABB (swept)"+c.getRangeType(),!1),1===t&&(s(c),s(d),i.drawExternal({polys:[],halt:!0}))),c.intersectTree(p).length?a.TestLogger("AABB"+c.getRangeType(),!0):a.TestLogger("AABB"+c.getRangeType(),!1)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(97),r(7),r(163),r(51),r(47),r(1)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.quadTreePointTest=void 0;t.quadTreePointTest=function(){var e=a.rect_pool_pop(0,0,1e3,100);A(new r.QuadTreeInt32Point(e,5,25),e),A(new n.QuadTreeUint16Point(e,5,25),e),A(new i.QuadTreeFastPoint32(e,5,25),e),a.rect_pool_put(e)};var A=function(e,t){for(var r=!0,a=0;a<998;a++){var n={pos:new s.Vector(.1*a,20),vel:new s.Vector(0,0)};e.insert(n)||(r=!1,o.TestLogger("qt point "+e.getRangeType()+" not inserted",!1),o.TestLogger("X:"+n.pos.x+" Y:"+n.pos.y,!1))}r&&o.TestLogger("tree insertion "+e.getRangeType(),!0);var i=e.queryInt(t).length;998!==i?(o.TestLogger("qt point query "+e.getRangeType(),!1),o.TestLogger(" expected 998",!1),o.TestLogger(" actual "+i,!1),o.TestLogger(" refs "+e.references.length,!1)):o.TestLogger("tree point query rect "+e.getRangeType(),!0)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(163),r(97),r(51)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rectIntersectionTests=void 0;t.rectIntersectionTests=function(){o(0,0,100,100,!0),o(0,100,100,100,!0),o(100,0,100,100,!0),o(100,100,100,100,!0),o(1.1,2.9,100,100,!0),o(.1,.9,100,100,!0),o(90.80000000000001,20,100,100,!0),o(-1,0,100,100,!1),o(101,0,100,100,!1),i(0,0,100,100,!0),i(0,100,100,100,!0),i(100,0,100,100,!0),i(100,100,100,100,!0),i(1.1,2.9,100,100,!0),i(.1,.9,100,100,!0),i(90.80000000000001,20,100,100,!0),i(-1,0,100,100,!1),i(101,0,100,100,!1)};var o=function(e,t,a,o,i,s,A){void 0===s&&(s=0),void 0===A&&(A=0);var u=[0,0,a,o],l=new Uint16Array(u);r.intersectsUintArr16XY(l,e,t)!==i?(n.TestLogger("intersectsUintArr16XY (uint16)",!1),n.TestLogger(u.join(",")+" rect (uint16)",!1),n.TestLogger([e,t].join(",")+" item (uint16)",!1)):n.TestLogger("rect intersection (uint16)",!0)},i=function(e,t,r,o,i,s,A){void 0===s&&(s=0),void 0===A&&(A=0);var u=[0,0,r,o],l=new Int32Array(u);a.intersectsInt32ArrXY(l,e,t)!==i?(n.TestLogger("intersectsInt32ArrXY (int32)",!1),n.TestLogger(u.join(",")+" rect (int32)",!1),n.TestLogger([e,t].join(",")+" item (int32)",!1)):n.TestLogger("rect intersection (int32)",!0)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(31),r(1)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bulletCircleTests=void 0;t.bulletCircleTests=function(){var e=new a.Vector(100,100),t=new a.Vector(0,0),n=new a.Vector(200,200);r.LineInterceptCircle(t,n,e,50)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(19),r(18),r(51)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collisiontests=void 0;t.collisiontests=function(){var e=a.createSingleAsteroid(20,{x:-100,y:100},{x:240,y:1.1},{life:1e4,sides:30}),t=a.createSingleAsteroid(100,{x:100,y:100},{x:1,y:1},{life:1e4});n.PositionUpdaterAutoSleep(e,1),n.PositionUpdaterAutoSleep(t,1),r.resolve(1,e,t)?o.TestLogger("fast impact test",!0):(o.TestLogger("fast impact test",!1),r.resolve(1,e,t));var i=a.createSingleAsteroid(10,{x:200,y:0},{x:0,y:0}),s=a.createSingleAsteroid(10,{x:190,y:0},{x:8,y:0});n.PositionUpdaterAutoSleep(i,1),n.PositionUpdaterAutoSleep(s,1),r.resolve(1,i,s)?o.TestLogger("slow impact test",!0):o.TestLogger("slow impact test",!1)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(51),r(48),r(114)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.seedGenTests=void 0;var o=[],i=function(e){var t=n.getSeedFromINTEGERS(e.x,e.y),a=n.getCoordFromSeed_positive_only(t);a.x===e.x&&a.y===e.y?(r.TestLogger("seed ok X: => ",!0),r.TestLogger("seed ok Y: => ",!0)):(r.TestLogger("seed ok X:"+e.x+" => "+a.x,!1),r.TestLogger("seed ok Y:"+e.y+" => "+a.y,!1))};t.seedGenTests=function(){!function(){for(var e=0;e<100;e++){var t=a.mulberry32(e*e);o.push({x:Math.round(e*e*e*(t()-.5)),y:Math.round(e*e*e*(t()-.5))})}}();for(var e=0;e<o.length;e++){var t=o[e];i(t)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(57),r(7)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intersectionOverlapTest=void 0,t.intersectionOverlapTest=function(){var e=a.rect_pool_pop(0,0,1e3,1e3),t=new r.QuadTreeFastRect32(e,2,0,4);a.rect_pool_put(e);for(var n,o=(n=76,function(){var e=n+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296}),i=0;i<100;i++)t.insert({collType:0,pos:{x:10+800*o(),y:10+800*o()},vel:{x:0,y:0},radius:5,sleepingAABB:!1,type:0},0);t.insert({collType:1,pos:{x:400,y:400},vel:{x:0,y:0},radius:300,sleepingAABB:!1,type:1},0);var s=a.rect_pool_pop(200,200,500,500),A=t.queryInt(s);a.rect_pool_put(s);var u=A.filter(function(e){return 1===e.type});console.log("bases",u),console.log("TODO: verify intersection multiple overlaps test")}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(57),r(84),r(7),r(51),r(162),r(60)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sleepingAABBStest=void 0,t.sleepingAABBStest=function(){for(var e=[!0,!1],t=(a.QuadTreeInt32,[r.QuadTreeFastRect32]),i=0;i<e.length;i++)for(var s=e[i],A=0;A<t.length;A++){for(var u=new(0,t[A])(new n.Rectangle(0,0,100,100),2,0,4,!1),l=0;l<3;l++)u.insert({collType:0,pos:{x:10+2*l,y:10+2*l},vel:{x:0,y:0},radius:5,sleepingAABB:s,type:0},0);u.insert({collType:0,pos:{x:30,y:30},vel:{x:0,y:0},radius:30,sleepingAABB:s,type:0},0),u.insert({collType:0,pos:{x:12,y:16},vel:{x:0,y:0},radius:5,sleepingAABB:!1,type:0},0),u.insert({collType:0,pos:{x:14,y:18},vel:{x:0,y:0},radius:5,sleepingAABB:!1,type:0},0);var c=u.intersectTree(u),d=!1;s?(d=2===c.length&&6===c[0].length&&5===c[1].length,o.TestLogger("sleeping AABB",d),d||console.log("sleeping",c)):(d=5===c.length&&6===c[0].length&&5===c[1].length&&4===c[2].length&&3===c[3].length&&2===c[4].length,o.TestLogger("none sleeping AABB",d),d||console.log("not sleeping",c))}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(4),r(16),r(1),r(13)],void 0===(n=function(e,t,r,a,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,s){var A=e;if(t.guid!==A.ownerGuid){var u=!1;switch(t.shape){case 0:u=r.distanceBetweenVectors(t.pos,e.pos)<t.radius;break;case 1:var l=t;u=r.fine(3,l.comp[0].vertex,e.pos);break;default:u=r.distanceBetweenVectors(t.pos,e.pos)<t.radius}if(u){if(Math.random()>.9&&e.life>20){var c=r.midpoint(e.pos,t.pos,.3),d=.4*r.distanceBetweenVectors(e.pos,c),p=new n.Vector(d*Math.random(),0);p.setAngle(Math.random()*Math.PI*2),p.add(c),s.game.flames.push(o(o({},a.setImovableDefaults(null)),{pos:p,vel:t.vel.clone(),guid:r.getGuid(),ownerGuid:A.ownerGuid,ownerType:A.ownerType,colorRamp:0,radius:10,life:.8*A.life,large:Math.random()>.95,type:26,collType:21,friction:.95,collided:!1,armor:null,damage:o({},A.damage)}))}e.pos.x-=e.vel.x*s.step,e.pos.y-=e.vel.y*s.step,A.collided=!0;var f=Math.PI*(Math.random()>.5?1.2:-1.2);e.vel.setAngle(e.vel.getAngle()+f),e.vel.mult(.01),i.DamageItem2(s,t,e)}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(33),r(4),r(13),r(72),r(86),r(14),r(78)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t,u){var l,c=3===t.type?t:e,d=3===t.type?e:t;if(d.ownerGuid!==c.guid&&a.coarse(c,d)&&c.shields>0){if(44===(null===(l=A.default(u,e))||void 0===l?void 0:l.type))return;var p=o.damageArmorMap[d.damage.type][c.armor.type];if(!d.remove){c.shields-=p*d.damage.value,c.shields<0&&c.shields>-5&&(c.shields=-5),c.shields>0&&(d.remove=!0),n.DamgeItemFixedValue(c.centerNoneCannon,.1);var f=i.circleLineColl(d,c).cp;f&&(c.shieldImpacts.push(f),s.addForceExplosion(u.game,f.x,f.y,70,0,null),u.game.eventMap[r.GAME_EVENT.SPACE_BULLET_IMPACT]={x:f.x,y:f.y})}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(5)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableResponseDebug=t.RESPONSE_DEBUG=t.getImIntersections=void 0;var a=[];t.getImIntersections=function(){return a};t.default=function(e,t){var n=t.length;r.___getQtreeList()[0].references;a=[];for(var o=0;o<n;o++){var i=t[o];i.handler(i.a,i.b,e)}},t.RESPONSE_DEBUG=[];t.enableResponseDebug=function(){}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(59),r(20)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){void 0===t&&(t=!1);for(var a=[],n=e.length,o=0;o<n;o++){var i=e[o];i.ownedByStructureType&&i.ownedByStructureGuid?a.push(i):i.inTree?a.push(i):t&&r.pool_put(i.type,i)}return a},o=0;t.default=function(e){var t=e.game;o=performance.now(),t.spaceSnake=function(e){for(var t=[],r=e.length,a=0;a<r;a++){var n=e[a];if(n.ownedByStructureType&&n.ownedByStructureGuid)t.push(n);else{for(var o=n.segments,i=o.length,s=!0,A=0;A<i;A++)if(!o[A].inTree){s=!1;break}s&&t.push(n)}}return t}(t.spaceSnake),t.asteroids=n(t.asteroids),t.rockFormations=n(t.rockFormations),t.spacePorts=function(e){for(var t=[],r=e.length,a=0;a<r;a++){for(var n=e[a],o=n.cannons,i=o.length,s=!0,A=0;A<i;A++)if(!o[A].inTree){s=!1;break}s&&t.push(n)}return t}(t.spacePorts),t.bullets=n(t.bullets,!0),t.rockets=n(t.rockets),t.npcs=n(t.npcs),t.spaceSquids=n(t.spaceSquids),t.spaceSpiders=n(t.spaceSpiders),t.enemies=n(t.enemies),t.charges=n(t.charges),t.proximityMines=n(t.proximityMines),t.spaceMines=n(t.spaceMines),t.spaceTurrets=n(t.spaceTurrets),t.destroyers=n(t.destroyers),t.flames=n(t.flames),a.getProceduralEngineType(),o=performance.now()-o}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(59)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t,a){void 0===t&&(t=!1),void 0===a&&(a=null);for(var n=[],o=e.length,i=0;i<o;i++){var s=e[i];s.removeProcedural?t&&r.pool_put(s.type,s):n.push(s)}return n},n=0;t.default=function(e){var t=e.game;n=performance.now(),t.spaceSnake=a(t.spaceSnake),t.asteroids=a(t.asteroids),t.rockFormations=a(t.rockFormations),t.rockFormationSystemRadius=a(t.rockFormationSystemRadius),t.spacePorts=a(t.spacePorts);for(var r=0;r<t.spacePorts.length;r++){var o=t.spacePorts[r];o.cannons=a(o.cannons)}t.bullets=a(t.bullets,!0),t.rockets=a(t.rockets),t.npcs=a(t.npcs),t.spaceSquids=a(t.spaceSquids),t.spaceSpiders=a(t.spaceSpiders),t.enemies=a(t.enemies),t.charges=a(t.charges),t.proximityMines=a(t.proximityMines),t.spaceMines=a(t.spaceMines),t.minefields=a(t.minefields),t.spaceTurrets=a(t.spaceTurrets),t.destroyers=a(t.destroyers),t.flames=a(t.flames),t.ancientBlocks=a(t.ancientBlocks),t.ancients=a(t.ancients),n=performance.now()-n}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(17)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetQuadtreeOnTreeIntersections=t.getMostIntensiveTree=t.getNumCollisions=void 0;var a,n=0,o=0;t.getNumCollisions=function(){var e=n,t=o;return n=0,o=0,{collisions:e,broadPhase:t}};var i=0,s="",A="";t.getMostIntensiveTree=function(){return{mostIntensiveTreetype:s,mostIntensiveTree:i,mostIntensAmounts:A}};t.GetQuadtreeOnTreeIntersections=function(e,t){var u=function(e){var t=[];for(var r in e)t.push(parseInt(r,10));return t}(t),l=u.length;i=0,s="",a=[];for(var c=0;c<l;c++){var d=u[c],p=e[d];o+=p.REFERENCE_INDEX;for(var f=t[d],h=f.length,v=0;v<h;v++){var g=e[f[v].type];if(0!==p.references.length&&0!==g.references.length){var y=performance.now(),m=p.intersectTree(g),x=performance.now()-y;x>i&&(i=x,s=r.TypesToString(p.itemType)+" - "+r.TypesToString(g.itemType),A=p.references.length+" - "+g.references.length),m.length>0&&(n+=m.length-1)}}}return a}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,r){var a=e.SX,n=e.SY,o=e.SW,i=e.SH;t.x=a-r,t.y=n-r,t.width=o+2*r,t.height=i+2*r};t.default=function(e){var t=e.game.screen;return r(e,t.rectMinus_400,-400),r(e,t.rectMinus_200,-200),r(e,t.rect,0),r(e,t.rectSS_200,200),r(e,t.rectSS_400,400),r(e,t.rectSS_600,600),r(e,t.rectSS_800,800),r(e,t.rectSS_1000,1e3),r(e,t.rectSS_1500,1500),r(e,t.rectSS_2000,2e3),"screenRect"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(7),r(87),r(166),r(116),r(66),r(353)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var A=r.rect_pool_pop(0,0,0,0);t.default=function(e){if(e.game.IS_PROCEDURAL){var t=e.game,r=e.SX,u=e.SY,l=e.SW,c=e.SH,d=t.procedural.map,p=d.GEN_RES,f=d.GEN_SIZE_PIXELS,h=Math.floor(l/p)*p+p,v=Math.floor(c/p)*p+p;A.update(4*-f+r,4*-f+u,h+4*f*2,v+4*f*2),e.game.procedural.boundsSS=A,e.game.proceduralBounds=e.game.procedural.boundsSS;var g=t.procedural.chunks;i.schedule("generatorSchedulable",n.generatorSchedulable,8),i.schedule("pruneAliveEntities",s.pruneAliveEntities,16),a.processChunkQeue(e,g.qeue);for(var y=t.proceduralDestroyedData,m=0;m<y.length;m++){var x=y[m];switch(x.type){case 4:case 11:o.putAsteroid(x);break;case 22:o.putLifeItem(x);break;case 3:o.putSpacePort(x)}}t.proceduralDestroyedData=[],o.hashhousekeeping();var S=Number.MAX_SAFE_INTEGER,_=Number.MAX_SAFE_INTEGER,T=Number.MIN_SAFE_INTEGER,E=Number.MIN_SAFE_INTEGER,M=[],I=t.procedural.chunks.qeue,L=t.procedural.chunks.hash;for(var w in L)M.push(L[w]);for(var w in I){var b=I[w],P=b.length;for(m=0;m<P;m++){var R=b[m];M.push(R.chunk)}}var O=M.length;if(0===O){var C=e.game.player[0];if(C){var G=8e3;S=C.pos.x-G,_=C.pos.y-G,T=C.pos.x+G,E=C.pos.y+G}}else for(m=0;m<O;m++){var D=M[m].rect;D.x<S&&(S=D.x),D.y<_&&(_=D.y),D.x+D.width>T&&(T=D.x+D.width),D.y+D.height>E&&(E=D.y+D.height)}return e.game.procedural.treeBounds.update(S,_,T-S,E-_),"chunkgenerator"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(4),r(1),r(19),r(52),r(50),r(34),r(3),r(81),r(82),r(10),r(114),r(83),r(6),r(165),r(115),r(116),r(10),r(13),r(36),r(11),r(41),r(88)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d,p,f,h,v,g,y,m,x,S,_,T,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createItemForChunk=void 0;var M=function(e,t,r,a,o,i,s){if(e<800){var A=n.createSingleAsteroid(t,{x:r,y:a},{x:.001,y:.001},i);return s.game.asteroids.push(A),A}};t.createItemForChunk=function(e,t,I,L,w){var b,P,R,O,C,G=null!=w?w:Math.floor(18*I()),D=t.game,N=e.rect,B=.5*N.width,F=N.x+B,V=N.y+B,k=Math.floor(I()*B*.6)+.2*B,X=F+(B-k)*(I()-.5)*1,H=V+(B-k)*(I()-.5)*1,U=p.getSeedFromINTEGERS(0|X,0|H),W={seedKey:U,procedurallyCreated:!0,pos:new a.Vector(X,H),opos:{x:X,y:H}},Y=o(o({},W),{pos:new a.Vector(F,V),opos:{x:F,y:V}});switch(G){case 4:if(B<1e3){if(L){if(y.getDead(U))return m.LOG_GL("--AST WAS DEAD"),{type:86,x:X,y:H,radius:k};var q=(xe=y.getAsteroid(U))?o(o({},W),{life:xe.life,resources:xe.resources,pos:new a.Vector(xe.x,xe.y)}):W;xe&&m.LOG_GL("--AST WAS MODIFIED FROM HASH"),M(B,k,X,H,0,q,t)}return{type:G,x:X,y:H,radius:k}}case 3:var z=I;z(),z();var j=c.getSpacePortClassType(z);if(j.size<k){if(L){if(y.getDead(U))return{type:86,x:X,y:H,radius:j.size};var K=s.default(t,j.size,new a.Vector(X,H),j.name,{life:Math.floor(.2*u.SHIP_MAX_LIFE+z()*u.SHIP_MAX_LIFE*.8)},null,Y),Z=y.getSpaceport(U);K.isEnemyForMS=null!=Z?Z:0;for(var Q=0;Q<K.cannons.length;Q++){var J=K.cannons[Q],$=p.getSeedFromINTEGERS(0|J.pos.x,0|J.pos.y);if(J.seedKey=$,y.getDead($))J.removeProcedural=!0,m.LOG_GL("create SP [dead]");else{var ee=y.getLifeItem($);ee>0&&(m.LOG_GL("create SP ["+ee+"]"),x.__LifeFixedValueSet(J,ee))}}D.spacePorts.push(K),e.item=K}return{type:3,x:X,y:H,radius:j.size}}break;case 5:if(B>1200){if(L){var te=n.createAsteroidBelt(I,F,V,B-100,2*Math.PI*I(),Math.PI*I()*.3,20+40*I(),90+120*I(),100+120*I(),1.01,e.rect);for(Q=0;Q<te.asteroids.length;Q++){var re=te.asteroids[Q],ae=p.getSeedFromINTEGERS(0|re.pos.x,0|re.pos.y);re.seedKey=ae,(oe=y.getDead(ae))?re.removeProcedural=oe:(xe=y.getAsteroid(ae))&&(re.pos.x=xe.x,re.pos.y=xe.y,re.resources=xe.resources,x.__LifeFixedValueSet(re,xe.life))}t.game.asteroidBelts.push(te.belt),(b=t.game.asteroids).push.apply(b,te.asteroids)}return{type:G,x:F,y:V,radius:B-100}}break;case 7:if(B>=2e3){if(L){var ne=i.default(I,X,H,250,e.rect);for((P=D.rockFormations).push.apply(P,ne.rockFormations),D.rockFormationSystemRadius.push(ne.rfSystem),ne.rfSystem.seedKey=U,ne.rfSystem.procedurallyCreated=!0,Q=0;Q<ne.rockFormations.length;Q++){var oe;re=ne.rockFormations[Q],ae=p.getSeedFromINTEGERS(0|re.pos.x,0|re.pos.y),re.seedKey=ae,(oe=y.getDead(ae))?re.removeProcedural=oe:(xe=y.getAsteroid(ae))&&(re.pos.x=xe.x,re.pos.y=xe.y,re.resources=xe.resources,x.__LifeFixedValueSet(re,xe.life))}}return{type:G,x:X,y:H,radius:B}}break;case 6:if(B>3900){if(L){var ie=l.CreateAncient(I,12,I()*Math.PI,F,V,U);D.ancients.push(ie.ancient),(R=D.ancientBlocks).push.apply(R,ie.blocks),l.populateAncientRooms(t,ie.ancient)}return{type:G,x:F,y:V,radius:B}}break;case 15:if(B>1e3){var se=100+600*I()+(I()>.2?100*I():20*I());if(L){var Ae={fire:!0,guid:r.getGuid(),radius:se,x:F,y:V,seedKey:U,type:15};D.spaceFog.push(Ae)}return{type:G,x:F,y:V,radius:se}}break;case 16:if(B>1e3){if(se=100+600*I()+(I()>.2?100*I():20*I()),L&&(Ae={fire:!1,guid:r.getGuid(),radius:se,x:F,y:V,seedKey:U,type:16},D.spaceFog.push(Ae),I()>.9)){var ue=A.default(t,1,F,V,80*I()+80)[0];D.spaceSquids.push(ue)}return{type:G,x:F,y:V,radius:se}}break;case 12:if(B>=1800)return se=510,L&&f.createAnomaly(t,X,H,I()>.92,I()>.9?4:2,se,!0,!0,U,12,I()>.8),{type:G,x:X,y:H,radius:se};break;case 13:if(e.rect.width>u.P_CHUNKS_SIZE_RES-100){if(se=750,L){f.createAnomaly(t,F,V,!0,16,se,!0,!0,U,13,!0);var le=Math.floor(25*I());for(Q=0;Q<le;Q++)D.asteroids.push(n.createSingleAsteroid(30+200*I(),{x:F+(I()-.5)*e.rect.width*.8,y:V+(I()-.5)*e.rect.height*.8},{x:I(),y:I()}))}return{type:G,x:F,y:V,radius:se}}break;case 14:if(B>1800&&(se=750,L)){var ce=Math.round(I()*h.MAX_INT_RANGES.MAX_INT_32_QUART*(I()>.5?1:-1)/u.P_CHUNKS_SIZE_RES)*u.P_CHUNKS_SIZE_RES,de=Math.round(I()*h.MAX_INT_RANGES.MAX_INT_32_QUART*(I()>.5?1:-1)/u.P_CHUNKS_SIZE_RES)*u.P_CHUNKS_SIZE_RES,pe=0,fe=0;if(v.default(2048,function(e,t,r){var a=e*u.P_CHUNKS_SIZE_RES+ce|0,n=t*u.P_CHUNKS_SIZE_RES+de|0,o=p.getSeedFromINTEGERS(a,n);return!!g.randWithWhiteHole(o).wh&&(pe=a+.5*u.P_CHUNKS_SIZE_RES,fe=n+.5*u.P_CHUNKS_SIZE_RES,!0)}),0!==pe&&0!==fe)return f.createAnomaly(t,X,H,!1,16,se,!0,!0,U,14,!0,{x:pe,y:fe}),{type:G,x:F,y:V,radius:se};d.LOG_GL_FIXED_FORCED("could not create black hole. Unable to find white hole..","SEARCH ERR")}break;case 9:if(B<1e3&&B>(se=60*I()+140))return L&&(ue=A.default(t,1,F,V,se,{x:F,y:V},Y)[0],D.spaceSquids.push(ue)),{type:G,x:F,y:V,radius:se};break;case 10:if(B<1e3&&B>(se=8+8*I())){if(L){var he=S.default(t,1,F,V,se,{x:F,y:V},Y)[0];D.spaceSpiders.push(he)}return{type:G,x:F,y:V,radius:se}}break;case 8:if(B<1e3&&B>300){if(L){var ve=T.default(t,1,F,V,9+18*I(),{x:F,y:V},Y)[0];D.spaceSnake.push(ve)}return{type:G,x:F,y:V,radius:300}}break;case 0:if(B<1e3&&B>(se=15*_.shipRadius)){if(L){var ge=_.createDestroyer(t,Y,15);D.destroyers.push(ge)}return{type:G,x:F,y:V,radius:se}}break;case 1:if(B<1e3&&B>(se=_.shipRadius))return L&&(O=D.enemies).push.apply(O,_.createEnemies(t,1,Y)),{type:G,x:F,y:V,radius:se};break;case 2:if(B<1e3&&B>(se=_.shipRadius))return L&&(C=D.npcs).push.apply(C,_.createNPCs(t,1,Y,-1)),{type:G,x:F,y:V,radius:se};break;case 17:if(B>1800){var ye=.4*B+I()*B*.4,me=.4*ye+.4*ye*I();return L&&E.createMineField(t,F-.5*ye,V-.5*ye,ye,me,I,I()*Math.PI*2),{type:G,x:F,y:V,radius:.6*ye}}break;default:var xe;if(B<1e3&&I()>.8)return y.getDead(U)?(m.LOG_GL("--AST WAS DEAD"),{type:86,x:X,y:H,radius:k}):(q=(xe=y.getAsteroid(U))?o(o({},W),{life:xe.life,resources:xe.resources,pos:new a.Vector(xe.x,xe.y)}):W,xe&&m.LOG_GL("--AST WAS MODIFIED FROM HASH"),M(B,k,X,H,0,q,t),{type:4,x:X,y:H,radius:k})}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(10)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortedHash=void 0;var a=function(){function e(){this.hash={},this.sortedHash=[],this.hashLen=0}return e.prototype.add=function(e,t){this.hash[e]=t,this.sortedHash.push(e),this.hashLen++},e.prototype.get=function(e){return this.hash[e]},e.prototype.remove=function(e){this.hash[e]&&(delete this.hash[e],this.hashLen--)},e.prototype.clear=function(){this.hash={},this.sortedHash=[]},e.prototype.sizeList=function(){return this.sortedHash.length},e.prototype.sizeHash=function(){return this.hashLen},e.prototype.housekeeping=function(e,t,a){if(void 0===e&&(e=4e3),void 0===t&&(t=.1*e),this.sortedHash.length>e){for(var n=this.sortedHash.length-(e-t),o=this.sortedHash.splice(n,this.sortedHash.length),i=0;i<n;i++)delete this.hash[this.sortedHash[i]];this.sortedHash=o,this.hashLen=this.sortedHash.length,a&&r.LOG_GL("SortedHash cleared "+n+" items")}},e}();t.SortedHash=a}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(7),r(5),r(87),r(116)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pruneGenerateChunks=t.clearChunk=t.pruneGenerateChunksSchedulable=void 0;var i=function(e){for(var t=0;t<e.children.length;t++){var a=e.children[t];i(a)}e.item=null,r.rect_pool_put(e.rect),e.children=null};t.pruneGenerateChunksSchedulable=function(e){t.pruneGenerateChunks(e,e.game.procedural.chunks.hash,e.game.procedural.chunks.pruneRect)};t.clearChunk=function(e,t,r){var s=[];for(var A in t.typeHash){var u=t.typeHash[A];switch(u){case 4:case 3:case 22:case 2:case 1:case 0:case 8:case 10:case 9:case 17:case 42:s.push(u);break;case 6:s.push(21,6,8,10,9);break;case 7:s.push(11,7);break;case 15:case 16:for(var l=[],c=e.game.spaceFog,d=0;d<c.length;d++){var p=c[d];t.rect.intersectsPoint(p)||l.push(p)}e.game.spaceFog=l;break;case 12:case 13:case 14:var f=[],h=e.game.anomlies;for(d=0;d<h.length;d++){var v=h[d];t.rect.intersectsPoint(v.pos)||f.push(v)}e.game.anomlies=f,s.push(4)}}!function(e,t){for(var r=a.getQuadTreesObj().queryTreesRect(e,t,!1),n=r.length,i=0;i<n;i++){var s=r[i];switch(s.removeProcedural=!0,s.type){case 4:case 11:o.putAsteroid(s);break;case 22:o.putLifeItem(s);break;case 3:o.putSpacePort(s)}}}(s,t.rect),delete r[t.seed],n.removeChildrenFromQeue(t,e.game.procedural.chunks.qeue),i(t)};t.pruneGenerateChunks=function(e,r,a){for(var n in r){var o=r[n];o.rect.intersects(a)||t.clearChunk(e,o,r)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(7),r(5)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pruneAliveEntities=void 0;var n=r.rect_pool_pop(0,0,0,0),o=0;t.pruneAliveEntities=function(e){var t=e.game.procedural.chunks,r=t.hash,i=t.size,s=Number.MAX_SAFE_INTEGER,A=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;for(var c in r){var d=r[c].rect;s=Math.min(d.x,s),A=Math.min(d.y,A),u=Math.max(d.x,u),l=Math.max(d.y,l)}switch(o){case 0:n.x=s-2*i,n.y=A-2*i,n.width=7*i,n.height=2*i;break;case 3:n.x=s-2*i,n.y=l+i,n.width=7*i,n.height=2*i;break;case 1:n.x=s-2*i,n.y=A-2*i,n.width=2*i,n.height=7*i;break;case 2:n.x=u+i,n.y=A-2*i,n.height=7*i,n.width=2*i;break;default:throw"illegal quadrant"}++o>3&&(o=0),t.pruneRect=n;for(var p=a.getQuadTreesObj().queryTreesRect([0,2,8,10,9,49,1,4,42,41,43,17],n,!1),f=p.length,h=0;h<f;h++)p[h].removeProcedural=!0}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(9),r(38),r(3)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.game.daylight.fog,o=r.default(e);return o&&a.posInAncient(o.pos)?(e.game.daylight.fog=0,e.game.daylight.time=n.DAYLIGHT_NIGHT_TIME,"heavyfog"):(e.game.daylight.is_day||e.game.daylight.is_dawn?t+=.003:t-=.003,t>1?t=1:t<0&&(t=0),e.game.daylight.fog=t,"heavyfog")}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resize=t.init=void 0;t.init=function(e){var t=e.game,r=t.resW,a=t.resH;e.game.starMap=[];for(var n=0;n<2*a;n++){var o={x:Math.random()*r*2,alpha:Math.floor(255*Math.random())};t.starMap.push(o)}};t.resize=function(e){e.game.starMap=[],t.init(e)};var r=0;t.default=function(e){var t=e.game,a=e.step,n=e.SW;if(r>5*a){r=0;var o={x:Math.random()*n*2,alpha:255*Math.random()};t.starMap.shift(),t.starMap.push(o)}return r+=a,"starmap"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(357),r(358),r(3),r(24),r(359)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,s,A,u,l=e.game.player;r.default(e);for(var c=0;c<l.length;c++){var d=l[c],p=d.keyCodes;if(!(d.abilities.active.cloak>0)){if(0==(null===(t=d.aimTarget)||void 0===t?void 0:t.armor.type)&&(null===(s=d.weapons.hash[27])||void 0===s?void 0:s.active)&&o.createDust(d.aimPoint,7,13,e),d.abilities.hash[14]&&(p.STRAFELEFT&&(a.default(e,d,.5*Math.PI,2),a.default(e,d,.5*Math.PI,2,-2*n.SHIP_LENGTH_RADIUS,-2*n.SHIP_LENGTH_RADIUS)),p.STRAFERIGHT&&(a.default(e,d,.5*-Math.PI,2),a.default(e,d,.5*-Math.PI,2,-2*n.SHIP_LENGTH_RADIUS,-2*n.SHIP_LENGTH_RADIUS))),p.LEFT&&(a.default(e,d,.5*Math.PI,2,-2*n.SHIP_LENGTH_RADIUS,-2*n.SHIP_LENGTH_RADIUS),a.default(e,d,.5*-Math.PI,3)),p.RIGHT&&(a.default(e,d,.5*-Math.PI,2,-2*n.SHIP_LENGTH_RADIUS,-2*n.SHIP_LENGTH_RADIUS),a.default(e,d,.5*Math.PI,3)),p.DOWN&&(a.default(e,d,0,3,0,n.SHIP_WIDTH_RADIUS,!0),a.default(e,d,0,3,0,-n.SHIP_WIDTH_RADIUS,!0)),p.UP||(null===(A=d.abilities.hash[2])||void 0===A?void 0:A.activated)){var f=0;f=(null===(u=d.abilities.hash[2])||void 0===u?void 0:u.activated)?50:20,a.default(e,d,Math.PI+.2*(Math.random()-.5),f)}d.abilities.hash[10]&&i.AimPoint(d)}}return"ship"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(32),r(24),r(5)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=e.game,o=n.getQuadTreesObj().queryTreesRect([30],t.screen.rectSS_600),i=o.length,s=0;s<i;s++){for(var A=o[s],u=0;u<4;u++){var l=r.createParticle(A.pos.x,A.pos.y,Math.random()-.5,Math.random()-.5,300);t.particles.push(l)}Math.random()>.8&&a.createDust(A.pos,Math.floor(3*Math.random()),1,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(1),r(3),r(32)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=new r.Vector(0,0),i=new r.Vector(0,0);t.default=function(e,t,r,s,A,u,l){void 0===A&&(A=0),void 0===u&&(u=0),void 0===l&&(l=!1);for(var c=0;c<s;c++){i.set(0,0),l||o.set(t.vel.x,t.vel.y),i.setLength(4-o.getLength()),i.setAngle(t.angle+r),i.mult(Math.random());var d=n.createParticle(t.pos.x+Math.cos(t.angle)*-(a.SHIP_LENGTH_RADIUS+A),t.pos.y+Math.sin(t.angle)*-(a.SHIP_LENGTH_RADIUS+u),i.x,i.y,15*Math.random());e.game.particles.push(d)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(6),r(1),r(54)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AimPoint=void 0;var o=new a.Vector(0,0);t.AimPoint=function(e){o.set(3e3,0),o.setAngle(e.angle),o.add(e.pos);var t=n.rayIntersections(e.pos,o,r.normalizeRadianAngle(e.angle),e.guid);t.target?(e.aimPoint.x=t.pos.x,e.aimPoint.y=t.pos.y,e.aimTarget=t.target):(e.aimPoint.x=o.x,e.aimPoint.y=o.y,e.aimTarget=null)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=e.game,r=0;r<t.notifications.length;r++){var a=t.notifications[r];if(a.life--,a.life<0){t.notifications.splice(r,1);break}}return"notifications"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(18),r(164),r(6),r(153),r(6),r(1)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var A=function(e,t){for(var a=e.length,n=0;n<a;n++)r.PositionUpdaterPoint(e[n],t)},u=new s.Vector(0,0),l=function(e,t){u.set(e.netvel.x,e.netvel.y),u.mult(t),e.netpos.x+=u.x,e.netpos.y+=u.y},c=function(e,t,r,a,o,s,A,u){void 0===r&&(r=!0),void 0===a&&(a=!0),void 0===o&&(o=!1),void 0===s&&(s=100),void 0===A&&(A=.1),void 0===u&&(u=.05);for(var c=e.length,d=0;d<c;d++){var p=e[d],f=p.pos.x-p.netpos.x,h=p.pos.y-p.netpos.y,v=p.vel.x-p.netvel.x,g=p.vel.y-p.netvel.y,y=p.pos.x,m=p.pos.y;if(p.pos.x-=f*A*t,p.pos.y-=h*A*t,a&&(o?Math.abs(f)>5||Math.abs(h)>5?(p.pos.x=y,p.pos.y=m,p.vel.x=p.vel.x-f/s,p.vel.y=p.vel.y-h/s):(p.vel.x=p.netvel.x,p.vel.y=p.netvel.y):o||(p.vel.x-=v,p.vel.y-=g)),(Math.abs(f)>s||Math.abs(h)>s)&&(p.pos.setFromVec(p.netpos),p.vel.setFromVec(p.netvel)),r){p.angle=n.normalizeRadianPositive(p.angle),p.netangle=n.normalizeRadianPositive(p.netangle);var x=i.diffRadianPositive(p.angle,p.netangle);p.angle+=x*u*t}l(p,t)}};t.default=function(e){var t=e.game,n=e.step;return c(t.spaceSquids,n,!1,!0),c(t.rockets,n,!0,!0,!0,100),c(t.asteroids,n,!0,!0,!0,100),c(t.spaceSpiders,n,!0,!1),c(t.drones,n,!0,!1,!1,30),c(t.enemies,n,!0,!1,!1,30),function(e,t,n){for(var i=e.length,s=0;s<i;s++){var A=e[s];A.guid===n.game.playerGuid?(a.ShipCamera(A,n),n.SX=A.SX,n.SY=A.SY,A.keyCodes=n.game.allKeyCodes.game.keys,o.default(A,t),A.netangle+=A.turnAcc*t):(A.angle+=A.turnAcc*t,r.PositionUpdaterPoint(A,t))}}(t.player,n,e),c(t.player,n,!0,!0,!1,200,.19,.2),A(t.charges,n),A(t.bullets,n),"interpolation"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};a=[r,t,r(68),r(1),r(6),r(18),r(23),r(7),r(5),r(16)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=A.rect_pool_pop(0,0,5,5),d=0;t.default=function(e){var t=e.game,A=e.step,p=(e.SW,t.spacePorts),f=u.getQuadTreesObj();if(f&&f.All){++d>6&&(d=0);for(var h=0;h<p.length;h++){var v=p[h],g=v.shipChargeHash,y=v.centerNoneCannon;for(var m in g){var x=r.GetPlayerByGuidOrNull(parseInt(m,10),e);if(x&&v.chargeParticles.length<1e3)for(var S=0;S<20;S++)v.chargeParticles.push(o(o({pos:new a.Vector(y.pos.x+60*(Math.random()-.5),y.pos.y+60*(Math.random()-.5)),vel:new a.Vector(5+5*Math.random(),20*(Math.random()-.5)),life:300,type:29,collType:25,radius:1,guid:-1,target:x},l.setImovableDefaults(null)),{armor:null}))}for(var _=v.chargeParticles,T=_.length,E=0;E<T;E++){(R=_[E]).life-=A;var M=R.target;if(M&&!M.remove){c.x=M.pos.x,c.y=M.pos.y;var I=Math.atan2(M.pos.y-R.pos.y,M.pos.x-R.pos.x),L=R.vel.getAngle();L=n.normalizeRadianAngle(L),L+=.5*n.angleDelta(L,I)*A,R.vel.setAngle(L)}s.default(t,R,!1);var w=R.vel.getLength();w>10&&R.vel.setLength(10),w>3&&R.vel.mult(.99),i.default(R,A),(R.life<0||c.intersectsPoint(R.pos))&&(R.remove=!0,R.target=void 0)}for(var b=[],P=0;P<T;P++){var R;(R=_[P]).remove||b.push(R)}v.chargeParticles=b,v.shipChargeHash={}}return"Spaceport"}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){for(var t=e.game.sparks,r=t.length,a=[],n=0;n<r;n++){var o=t[n];o.pos.addXY(o.vel.x*e.step,o.vel.y*e.step),o.vel.addXY(0,.3*e.step),o.life-=e.stepMS,o.life>0&&a.push(o)}return e.game.sparks=a,"sparks"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(9),r(3),r(103),r(4),r(5),r(38),r(92)],void 0===(n=function(e,t,r,a,n,o,i,s,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=0,l=!1;t.default=function(e){var t,c,d,p,f=e.game,h=e.SW,v=e.stepMS,g=(e.SX,e.SY,e.SH),y=i.getQuadTreesObj(),m=f.screen.rect,x=r.default(e);if(x&&y.All)if(s.posInAncient(x.pos)){n.createSubtitle({text:["COMMANDER: Are you sure that is a good idea?"],noShowAgainMS:25e4,face:0});var S=y.queryTreesVec([6],x.pos,x.radius,x.radius)[0];S&&o.distanceBetweenVectors(S.pos,x.pos)<S.radius-300?(l=!0,n.createSubtitle({text:["COMMANDER: I guess you did...  I can't see you on my system anymore","We talk again when you get out."],noShowAgainMS:25e4,face:0})):l&&n.createSubtitle({text:["COMMANDER: I see there's more to you than meets the eye.","I hope you found what you where looking for.","Now let's blast some space beasts to hell."],noShowAgainMS:25e4,face:0})}else{l=!1;var _=y.queryTreesVec([3],x.pos,x.radius,x.radius)[0];if(_){_.centerNoneCannon.life<.66*a.SPACEPORT_START_LIFE&&n.createSubtitle({text:[_.name+": We can't take this anymore. They are overwhelming us.","You need to get the hell out of here."],noShowAgainMS:2e4,face:1});for(var T=_.cannons,E=T.length,M=0;M<E;M++){var I=T[M];I.life<.95*a.SPACEPORT_START_LIFE&&I.life>.85*a.SPACEPORT_START_LIFE?n.createSubtitle({text:[_.name+": Cannon crew "+I.name+" taking damage"],noShowAgainMS:2e7,face:1}):I.life>.45*a.SPACEPORT_START_LIFE&&I.life<.7*a.SPACEPORT_START_LIFE?n.createSubtitle({text:[_.name+": Cannon crew "+I.name+" taking heavy damage"],noShowAgainMS:2e7,face:1}):I.life<.3*a.SPACEPORT_START_LIFE?n.createSubtitle({text:[_.name+": Cannon crew "+I.name+" reporting in.","We won't be able to take this much longer..."],noShowAgainMS:2e7,face:1}):(I.life<=0||I.remove)&&(I.isCannon?n.createSubtitle({text:[I.ownerName+": Oh god! We just lost the crew on cannon "+I.name+". ","Those poor souls. You must leave this place.","You will be the death of us all..."],noShowAgainMS:8e3,face:1}):n.createSubtitle({text:[I.ownerName+": Nooooooo...     [static]"],noShowAgainMS:1e3,face:1}))}}if((u+=v)>800){if(u=0,n.createSubtitle({text:["God speed captain.","I will do my best to guide you."],noShowAgainMS:9e11,face:0}),!x.inSafeZone){var L=i.getQuadTreesObj().queryCircle([3],x.pos,3*h)[0];if(L)L.reparations.life>x.life&&n.createSubtitle({text:["COMMANDER: There is a spaceport nearby.","Make a visit and restock your armory",L.name+"It is located at: "+(L.pos.x*A.COORD_GUI_HUD_M+.5*h*A.COORD_GUI_HUD_M|0)+" | "+(L.pos.y*A.COORD_GUI_HUD_M+.5*g*A.COORD_GUI_HUD_M|0)],noShowAgainMS:5e4,face:0})}if(x.life<20||(null===(t=x.weapons.hash[25])||void 0===t?void 0:t.ammunition.value)<250){var w=Number.MAX_VALUE,b=null;for(M=0;M<f.spacePorts.length;M++){var P=f.spacePorts[M],R=o.distanceBetweenVectors(x.pos,P.pos);R<w&&(w=R,b=P)}b&&((null===(c=x.weapons.hash[25])||void 0===c?void 0:c.ammunition.value)<250&&x.life>20?(null===(d=x.weapons.hash[25])||void 0===d?void 0:d.ammunition.value)<1?n.createSubtitle({text:["COMMANDER: You have gone through your entire magazine of space-bullets.","You need to find a spaceport.","The closest one is "+b.name+".","It is located at: "+(b.pos.x*A.COORD_GUI_HUD_M|0)+" | "+(b.pos.y*A.COORD_GUI_HUD_M|0)],noShowAgainMS:5e4,face:0}):n.createSubtitle({text:["COMMANDER: You are soon out of space-bullets.","You need to find a spaceport.","The closest one is "+b.name+".","It is located at: "+(b.pos.x*A.COORD_GUI_HUD_M|0)+" | "+(b.pos.y*A.COORD_GUI_HUD_M|0)],noShowAgainMS:5e4,face:0}):n.createSubtitle({text:["COMMANDER: You need to find a spaceport fast.","The closest one is "+b.name+".","It is located at: "+(b.pos.x*A.COORD_GUI_HUD_M|0)+" | "+(b.pos.y*A.COORD_GUI_HUD_M|0)],noShowAgainMS:5e4,face:0}))}var O=f.notifications[0];if(O)switch(O.type){case 71:n.createSubtitle({text:["Oh no! Space-parasites!","I hope there are not too many of them on you."],noShowAgainMS:1e6,face:0})}if(x.targetLock&&m.intersectsPoint(x.targetLock.pos)){var C=(null===(p=x.weapons.hash[30])||void 0===p?void 0:p.ammunition.value)>0,G=x.weapons.hash[50]&&x.abilities.values.energy>0,D="",N=!1,B=!1,F="";C?(N=!0,D="rockets"):G?(N=!0,D="electrobastardray"):D="spacebullets";var V="";switch(x.targetLock.type){case 1:V="enemy ship",F=" to blow it up!";break;case 35:V="got damn spacesnake",F=" to destroy it!";break;case 9:V="spacesquid from hell",F=" to send it back to where it came from.";break;case 10:V="godforsaken spacespider",F=" and fucking kill it.";break;case 4:x.targetLock.radius<100&&(B=!0),D="spacebullets",V="asteroid",F=" and hopefully get some sweet powerups.";break;case 11:V="space ice",D="spacebullets",F=" or just leave it....";break;default:return void(V="[ "+x.targetLock.type+" ]")}B||n.createSubtitle({text:["Captain!","You have that "+V+(N?" locked on.":" in your sight."),"Use your "+D+F],noShowAgainMS:1e8,face:0})}return y.queryTreesRect([1,9,10],f.screen.rect).length>4&&n.createSubtitle({text:["There seems to be a whole lot of hostility in your sector.","Maybe you should get the fuck out of there."],noShowAgainMS:1e8,face:0}),"subtitles"}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(366),r(24)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.game;var n=t.keyCodes;t.electroBastardRay=!1;var o=t.closestItem;if(n.ELECTROBASTARDRAY)if(o&&t.ammo.electrobastardray>0){if(t.ammo.electrobastardray--,t.electroBastardRay=!0,39===o.type||1===o.type?r.DamageItem(o,.1):r.DamageItem(o,1),a.createDust(o.pos,4,4,e),o.vel.mult(.9),o.stunned=!0,o.life<1)switch(o.type){case 12:o.remove=!0;break;case 1:case 2:case 43:case 39:var i=o;i.remove=!0,i.killedByGuid=t.guid}}else t.unableToComply=!0}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(45)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DamageItem=void 0,t.DamageItem=function(e,t,a){if(void 0===a&&(a=0),25===e.type){var n=r.getSpacesnakeFromSegment(e.guid);n.life-=n.life*a,n.life-=t,n.life<1&&n.segments.forEach(function(e){return e.remove=!0})}else e.life-=e.life*a,e.life-=t,e.life<1&&(e.remove=!0)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(9),r(4),r(3)],void 0===(n=function(e,t,r,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=[0,0,1,1,0,1],i=[1,0,0,1,1,0],s=[0,1,0,0,1,1],A=0,u=!1,l=function(e){var t=e.game.traceLine;if(t.length>0){var r=t[t.length-1];if(r.active)return r}t.length===o.length&&(e.game.traceLine.shift(),u||(e.game.notifications.push({life:n.NOTIFICATION_LIFE,type:72,message:"Lost traceline. Adding more will loose the oldest."}),u=!0),++A>t.length&&(A=0));var a,l=(a=t.length-A,{a:1,r:o[a%o.length],g:i[a%i.length],b:s[a%s.length],line:[],active:!0});return t.push(l),l},c=0;t.default=function(e){var t,n=e.stepMS;c+=n;var o=r.default(e),i=null===(t=null==o?void 0:o.abilities.hash[9])||void 0===t?void 0:t.activated;if(o&&i&&c>500){var s=l(e);o.isTracing?(s.line.push(o.pos.toPoint()),s.active=!1):s.line.push(o.pos.toPoint()),o.isTracing=!o.isTracing,c=0}if(e.frameCnt%60==0&&(null==o?void 0:o.isTracing)){var A=(s=l(e)).line;if(0===A.length)A.push(o.pos.toPoint());else if(A.length>1500)s.active=!1;else{var u=A[A.length-1];if(a.distanceBetweenVectors(u,o.pos)>100){var d=A[A.length-2];if(d){var p=a.distanceBetweenVectors(d,o.pos),f=a.distanceBetweenVectors(d,u)+a.distanceBetweenVectors(u,o.pos);Math.abs(p-f)<20?(u.x=o.pos.x,u.y=o.pos.y):A.push(o.pos.toPoint())}else A.push(o.pos.toPoint())}}}return"TraceLine"}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(72),r(29),r(28),r(9),r(43),r(10),r(96),r(149),r(167),r(168),r(369)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=function(e,t){e.node.focused=!1;var r=0;switch(t){case 2:14===e.parent.type?e.node.focused=!0:e.parent.focused=!0;break;case 3:e.parent.aquired&&e.node.children.length?e.node.children[0].focused=!0:e.node.focused=!0;break;case 0:e.parent.aquired?r=-1:e.node.focused=!0;break;case 1:e.parent.aquired?r=1:e.node.focused=!0}if(0!==r){var a=e.parent.children.indexOf(e.node),n=e.parent.children[a+r];n&&a>-1?n.focused=!0:e.node.focused=!0}},f=function(e,t,r){for(var a=0;a<e.children.length;a++){var n=e.children[a],o=t+100*a,i=r+-200;if(n.focused)return{node:n,parent:e};var s=f(n,o,i);if(s)return s}},h=!1,v=0,g=function(e,t){for(var r=0;r<e.children.length;r++){var a=e.children[r];if(!a.aquired){if(0===a.type){var n=a.installationData.type;a.aquired=!!t.weapons.hash[n]}if(4===a.type){var o=a.installationData.type;a.aquired=!!t.abilities.hash[o]}}g(a,t)}};t.default=function(e){var t,y,m,x,S=e.game,_=e.stepMS;if(S.skillTree.active)S.allKeyCodes.currentKeyCode===a.Keys.ESCAPE&&(S.skillTree.active=!1);else{if(!(S.currentLevel>13))return;var T=o.default(e);T&&T.keyCodes.INTERACT&&T.inSafeZone&&(S.skillTree.active||d.default.resetAll(T),S.skillTree.active=!0,S.skillTree.hasBeenActivated=!0)}if(S.skillTree.active){var E=o.default(e);if(E){var M=S.skillTree.node;g(M,E);var I=f(M,0,0);if(S.skillTree.focused=I,E)if(17===I.node.type&&l.default.init(E),18===I.node.type&&c.default.init(E),!h&&E.keyCodes.LEFT)p(I,2),h=!0,v=0;else if(!h&&E.keyCodes.RIGHT)d.default.moveSelection(E,I.node.type)||p(I,3),h=!0,v=0;else if(!h&&E.keyCodes.DOWN)p(I,1),h=!0,v=0;else if(!h&&E.keyCodes.UP)p(I,0),h=!0,v=0;else if(!h&&E.keyCodes.PRIMARY_WEAPON){if(h=!0,v=0,d.default.action(E,I.node.type),11===I.node.type){var L=I.node,w=E.weapons.hash[L.weaponInformation.type];if(w){var b=w.ammunitionCost*(w.ammunition.max-w.ammunition.value);if(E.credits>=b)A.updateShipCredits(E,-b),w.ammunition.value=w.ammunition.max;else{var P=Math.floor(E.credits/w.ammunitionCost);A.updateShipCredits(E,-P*w.ammunitionCost),w.ammunition.value+=P}}}else if(8===I.node.type)u.IronExhangeRate(E,!0);else if(9===I.node.type)u.MineralsExhangeRate(E,!0);else if(10===I.node.type)u.PlatinumExhangeRate(E,!0);else if((null===(y=null===(t=I.node)||void 0===t?void 0:t.installationData)||void 0===y?void 0:y.cost)&&!I.node.aquired&&E.credits>=I.node.installationData.cost){if(0===(null===(m=I.node.installationData)||void 0===m?void 0:m.installationType)){var R=E.weapons.hash[I.node.installationData.type],O=!(F=I.node.requirements);if(F)e:for(var C=0;C<F.length;C++){if(0===(k=F[C]).installationType&&(O=!!E.weapons.hash[k.type]),1===k.installationType&&(O=!!E.abilities.hash[k.type]),2===k.installationType){var G=I.parent.children.indexOf(I.node),D=I.parent.children[G-1];if(D)for(var N=0;N<D.requirements.length;N++){var B=D.requirements[N];if(B.subType!==k.subType?O=!0:B.subType===k.subType&&D.aquired&&(O=!0),!O)break e}else O=!0}if(!O)break}I.parent.aquired&&O&&(R?r.upgradeWeapon(R,I.node.weaponUpgrade):n.addWeaponToShip(E,n.createWeapon(I.node.installationData.type,E.guid,E.type)),A.updateShipCredits(E,-I.node.installationData.cost),I.node.aquired=!0)}if(1===(null===(x=I.node.installationData)||void 0===x?void 0:x.installationType)){var F,V=E.abilities.hash[I.node.installationData.type];O=!(F=I.node.requirements);if(F)for(C=0;C<F.length;C++){var k;if(1===(k=F[C]).installationType&&(O=!!E.abilities.hash[k.type]),0===k.installationType&&(O=!!E.weapons.hash[k.type]),2===k.installationType&&s.LOG_GL_FIXED_FORCED("SKILL TYPE NOT IMPLEMENTED","[PREVIOUSREQUIRED]"),!O)break}I.parent.aquired&&O&&(V?r.upgradeAbility(V,I.node.abilityUpgrade):i.addAbilityToShip(E,i.createAbility(I.node.installationData.type)),A.updateShipCredits(E,-I.node.installationData.cost),I.node.aquired=!0)}}}else(v+=_)>140&&(h=!1);return"skilltree"}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(168),r(167)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={reset:function(e,t){18===t&&r.default.reset(e),17===t&&a.default.reset(e)},init:function(e,t){18===t&&r.default.init(e),17===t&&a.default.init(e)},resetAll:function(e){r.default.reset(e),a.default.reset(e)},moveSelection:function(e,t){return 17===t?(a.default.moveSelection(e),!0):18===t?(r.default.moveSelection(e),!0):void 0},action:function(e,t){17===t&&a.default.action(e),18===t&&r.default.action(e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(166),r(87)],void 0===(n=function(e,t,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.game,e.stepMS}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(4),r(1),r(32),r(5)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForceEffectBalls=t.ForceEffectShipArray=void 0;var i=new a.Vector(0,0);t.default=function(e){var r=e.game;return t.ForceEffectShipArray(e,o.getQuadTreesObj().queryTreesRect([49,0,44,1],r.screen.rectSS_600)),t.ForceEffectBalls(e,o.getQuadTreesObj().queryTreesRect([4,42,22,11,43,41,24],r.screen.rectSS_600)),"ForceEffect"};t.ForceEffectShipArray=function(e,t){for(var r=t.length,a=0;a<r;a++)A(e,t[a])};var s=a.vec_pool_pop(0,0);t.ForceEffectBalls=function(e,t){for(var r=t.length,a=0;a<r;a++){var o=t[a];if(void 0!==o.forceX&&0!==o.forceX||void 0!==o.forceY&&0!==o.forceY){s.set(o.radius,0),s.setAngle(Math.random()*Math.PI*2);for(var i=.1*o.radius,A=0;A<i;A++){var u=n.createParticle(o.pos.x+s.x,o.pos.y+s.y,o.forceX,o.forceY,5*Math.random()+2);e.game.particles.push(u)}o.forceX*=.8,o.forceY*=.8,Math.abs(o.forceX)<.1&&Math.abs(o.forceY)<.1&&(o.forceX=0,o.forceY=0)}}};var A=function(e,t){if(void 0!==t.forceX&&0!==t.forceX||void 0!==t.forceY&&0!==t.forceY){for(var a=t.comp[0].vertex,o=[0,1,0,2],s=[2,2,1,0],A=Math.abs(t.forceX)+Math.abs(t.forceY),u=0;u<a.length;u++){var l=a[u],c=(Math.random()-.5)*A*15,d=(Math.random()-.5)*A*15;l.x+=c,l.y+=d}for(var p=0;p<o.length;p++)for(u=0;u<a.length;u++){var f=r.midpoint(a[o[p]],a[s[p]],Math.random(),i),h=n.createParticle(f.x,f.y,t.forceX,t.forceY,5*Math.random()+2);e.game.particles.push(h)}Math.abs(t.forceX)<.07&&Math.abs(t.forceY)<.07&&(t.forceX=0,t.forceY=0),t.forceX*=.8,t.forceY*=.8}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(8),r(373),r(64),r(0)],void 0===(n=function(e,t,r,a,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=!1,s=function(e,t,a,n,i,s){for(var A=Math.max(0,t.length-18),u=A;u<t.length;u++){var l=a[u];s.gl?r.default.printListGL(s.gl,o.default(o.GLctx.Texture,s.gl),l,50,50+40*(u-A),t[u],u===t.length-1&&i,s):r.default.printList(e,n.data,l,50,50+40*(u-A),t[u],u===t.length-1&&i)}},A=function(e,t,r,o,u,l,c,d,p){void 0===p&&(p=!1),setTimeout(function(){if(!i){var f=t.length-1;p&&(t[f]<e[f].length?t[f]=t[f]+1:t.length<e.length?t.push(0):d&&(d(),d=void 0)),r.gl?s(l,t,e,u,!p,r):(a.ClearHard(r),s(l,t,e,u,!p,r),n.distort(l,c*Math.random(),c*Math.random(),u.data),o.putImageData(u,0,0)),A(e,t,r,o,u,l,c,d,!p)}},20)};t.default=function(e,t,r,a,n,o,s){void 0===s&&(s=0),i=!1;var u=function(){i||(window.removeEventListener("keydown",u),i=!0,setTimeout(function(){t()},30))};setTimeout(function(){window.addEventListener("keydown",u)},1e3),A(e,[0],r,a,n,o,r.SH,function(){setTimeout(function(){i||(i=!0,setTimeout(function(){t()},30))},8e3)})}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClearHard=void 0;var r=1;t.default=function(e){var t=e.frame;e.WW,e.WH,e.SW,e.SH,t.length;!function(e,t,r,a){var n=e.length;if(a)for(var o=t;o<n;o+=r)e[o]=e[o]-20,e[o+1]=e[o+1]-20,e[o+2]=e[o+2]-20,e[o+3]=255;else for(o=t;o<n;o+=r)e[o]=0,e[o+1]=0,e[o+2]=0,e[o+3]=255}(t,4*r,4,!0),--r<0&&(r=1)};t.ClearHard=function(e){for(var t=e.frame,r=e.SW*e.SH*4,a=0;a<r;a+=4)t[a]=0,t[a+1]=0,t[a+2]=0,t[a+3]=255}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},i=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(6),r(2),r(0),r(8),r(0),r(3),r(2),r(67),r(4),r(112),r(24),r(5),r(47),r(93),r(117)],void 0===(n=function(e,t,r,a,n,s,A,u,l,c,d,p,f,h,v,g,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var m=!0,x=!0,S=!1,_=!1,T="QUADTREES",E=50;window.onkeypress=function(e){switch(e.keyCode){case 49:T="GUI",E=e.keyCode;break;case 50:T="QUADTREES",E=e.keyCode;break;case 51:T="SQRT OPERATORS",E=e.keyCode;break;case 52:T="SPACEDUST",E=e.keyCode;break;case 53:T="ITEMS",E=e.keyCode;break;case 55:m=!m;break;case 54:x=!x;break;case 57:S=!S,_=!0}};var M=[],I=[],L=[],w=[],b=[],P=[],R=[],O=[],C=[],G=[],D=[],N=[],B=[],F=[],V=[],k=[],X=[],H=[],U=[],W=[],Y=function(e,t,r,n,o,i,s,A){void 0===A&&(A=1);for(var u=r.length,l=0;l<u;l++){var c=10*r[l].time+1,d=n[l]||100,p=o[l]||100,f=c>d?c:d>1?.95*d:d,h=c>p?c:p>1?.97*p:p;n[l]=f,o[l]=h;var v=s*A+5*l*A;a.line2Poly(i*A,v,i*A+1+f*A,v,H,1*A),a.line2Poly(h*A,v,h*A-3,v,H,1*A)}},q={},z=function(e,t,r,a,n,o,i,s){if(void 0===o&&(o=30),void 0===i&&(i=!1),void 0===s&&(s=3),q[a]&&0!==q[a].i)q[a].i>o&&(q[a].i=-1);else{var A=r.sort(function(e,t){return e.time>t.time?-1:1});q[a]={list:A,i:1}}q[a].i++,j(e,t,q[a].list,a,n,i,s)},j=function(e,t,a,o,l,c,d){var p=Math.min(a.length,d),f=0;a.forEach(function(e){f+=e.time});var h=a[0];if(h){var v="w";switch(h.type){case"engine":v="y";break;case"engineClient":v="g";break;case"gui":v="w";break;case"shader":v="r"}s.default.addListGL(e.gl,n.default(A.GLctx.Texture,e.gl),i([s.default.create(h.type+":",u.TEXT_SIZE_SMALL,v)],s.default.createSplitted(r.normalize(f,h.type+"n tot t",30,1).avg.toFixed(1),u.TEXT_SIZE_SMALL,v,"")),100,o,e)}for(var g=0;g<p;g++){var y=a[g],m=y.name,x=c?" ("+y.type+")":"",S=y.time>.1?" > "+y.time.toFixed(1)+"MS ":"";if(c)switch(y.type){case"engine":l="y";break;case"engineClient":l="g";break;case"gui":l="w";break;case"shader":l="r"}var _=[s.default.create(m,u.TEXT_SIZE_SMALL,l)];c&&_.push(s.default.create(x,u.TEXT_SIZE_SMALL,l)),S.length>0&&_.push.apply(_,s.default.createSplitted(S,u.TEXT_SIZE_SMALL,l,"")),s.default.addListGL(e.gl,n.default(A.GLctx.Texture,e.gl),_,100,o+(g+1)*u.TEXT_SIZE_SMALL,e)}};s.default.createSplitted("|",22,"r","");s.default.createSplitted("0123456789,.-",22,"r");var K=!1;t.default=function(e){var t=e.stepMS,q=e.game,j=(e.frame,e.SW,e.gl),Z=e.SX,Q=e.SY;if(q.menuSettings.fps||q.menuSettings.fpsOnly){var J=performance.now();K||(K=!0,[[],[],[],[],[]],I=[],L=[],P=[],R=[],O=[],C=[],G=[],D=[],N=[],B=[],F=[],V=[],k=[],X=[],w=[],b=[],M=[],[],[],[]);var $=q.performance,ee=$.engine,te=$.engineClient,re=$.gui,ae=$.shaders,ne=$.totalEngine,oe=$.totalEngineClient,ie=$.totalGui;q.isPaused&&(ee=ee.map(function(e){return o(o({},e),{time:0})}),te=te.map(function(e){return o(o({},e),{time:0})}),ne=0,oe=0);var se=window.performance.memory.totalJSHeapSize/1e6,Ae=window.performance.memory.usedJSHeapSize/1e6,ue=n.default(A.GLctx.Texture,j),le=s.default.createSplitted("MEM: "+r.normalize(se,"max mem",30,0).avg+" / "+r.normalize(Ae,"curr mem",30,0).avg+" MB",u.TEXT_SIZE_SMALL,"w",""),ce=s.default.createSplitted("AABB: "+r.normalize(h.getQuadTreesObj().All.references.length,"n t. ov items",30,0).avg,u.TEXT_SIZE_SMALL,"w",""),de=s.default.createSplitted("PARTICLES: "+r.normalize(q.spaceDust.length+q.particles.length+q.customParticles.length+q.asteroidParts.length+q.fragments.length+q.fragmentsBlack.length,"n t. ov particles",30,0).avg+" / "+r.normalize(f.GetSpaceDustTree().references.length+g.getParticleTree().references.length+y.GetPartsTree().references.length+g.getParticleTree().references.length,"n t. ov screen particles",30,0).avg,u.TEXT_SIZE_SMALL,"w","");s.default.addListGL(j,ue,le,10,170,e,!1),s.default.addListGL(j,ue,ce,10,170-u.TEXT_SIZE_SMALL,e,!1),s.default.addListGL(j,ue,de,10,170-2*u.TEXT_SIZE_SMALL,e,!1),U=[],H=[],W=[];var pe=r.normalize(1e3/t,"FPS_LIST"),fe=r.normalize(ne,"ENGINE_TIME"),he=r.normalize(ie,"GUI_TIME"),ve=[r.normalize(t,"FRAME_TIME"),he,fe],ge=q.menuSettings.fpsOnly,ye=e.game.daylight.is_night,me=s.default.createSplitted(pe.avg+"|"+pe.low,ge?17.6:22,ge?ye?"r":"g":"r",""),xe=250;if(m||(xe=200),m){if(s.default.addListGL(j,n.default(A.GLctx.Texture,j),me,ge?20:204,ge?230:210,e),ge)return;for(var Se=ve.length,_e=0;_e<Se;_e++){var Te=ve[_e];a.line2Poly(0,240+3*_e*1,10*Te.avg*1,240+3*_e*1,H,1)}a.line2Poly(200,240,200,240+3*ve.length*1,H,1),M.push(1e3/t),M.length>100&&M.shift();for(var Ee=M.length,Me=0;Me<Ee;Me++){var Ie=.5*M[Me];a.line2Poly(2+2*Me*1,235,2+2*Me*1,1*(235-Ie),H,1)}a.addToColorMap(W,H,.9,0,0,1),Y(0,0,[{time:16-(ie+ne),name:null,type:null}],k,X,0,xe,1),a.addToColorMap(W,H,.9,0,0,1),xe+=15}x&&(Y(0,0,ee,P,R,0,xe,1),a.addToColorMap(W,H,.9,.9,0,1),z(e,1,ee,xe,"y"),xe=xe+5*ee.length+20,Y(0,0,te,O,C,0,xe,1),a.addToColorMap(W,H,0,.9,0,1),z(e,1,te,xe,"g"),xe=xe+5*te.length+20,function(e,t,r,n,o,i,s,A,u,l,c){void 0===c&&(c=1);for(var d=r.length,p=0;p<d;p++){var f=10*r[p].time+1,h=o[p]||100,v=i[p]||100,g=f>h?f:h>1?.95*h:h,y=f>v?f:v>1?.97*v:v;o[p]=g,i[p]=y;var m=l*c+5*p*c,x=u*c+1+g*c;if(n.length>p){var S=10*n[p].time+1,_=s[p]||100,T=A[p]||100,E=S>_?S:_>1?.95*_:_,M=S>T?S:T>1?.97*T:T;s[p]=E,A[p]=M,a.line2Poly(x+u*c+2,m,x+u*c+1+E*c+2,m,U,1*c),a.line2Poly(x+M*c+2,m,x+M*c-3+2,m,U,1*c)}a.line2Poly(u*c,m,x,m,H,1*c)}}(0,0,re,ae,I,L,w,b,0,xe,1),a.addToColorMap(W,H,1,1,1,1),z(e,1,re,xe,"w"),z(e,1,ae,xe+80,"r",30,!1,6),xe=xe+5*re.length+5,Y(0,0,[{time:ne,name:null,type:null}],G,D,0,xe+=5,1),a.addToColorMap(W,H,.9,.9,0,1),Y(0,0,[{time:oe,name:null,type:null}],N,B,0,xe+=5,1),a.addToColorMap(W,H,.9,.9,.9,1),Y(0,0,[{time:ie,name:null,type:null}],F,V,0,xe+=5,1),a.addToColorMap(W,H,0,.9,0,1),xe-=70,z(e,1,i(i(i([],ee),te),re),xe,null,60,!0)),a.drawColorMapSingle(W,H,j);var Le=r.normalize(ne,"totalEngine",30,2),we=r.normalize(oe,"totalEngineClient",30,2),be=r.normalize(ie,"totalGui",30,2),Pe=r.normalize(ne+oe+ie,"totalAll",30,2),Re=r.normalize(t,"step",30,2),Oe={};switch(E){case 49:var Ce=l.readPerformance(),Ge=A.GLCTXreadPerformance();Oe={"  program switching  ":r.normalize(Ge.switchedProgram,"program_switching",30).avg,"  program cache hit  ":r.normalize(Ge.switchedCacheHit,"program_cache_hit",30).avg,"  drawColor          ":r.normalize(Ce.drawColor,"drawColor",30).avg,"  addToColorMap      ":r.normalize(Ce.addToColorMap,"addToColorMap",30).avg,"  drawColorMap       ":r.normalize(Ce.drawColorMap,"drawColorMap",30).avg,"  drawColorMap calls ":Ce.drawColorMapCalls,"  drawColorMapSingle ":r.normalize(Ce.drawColorMapSingle,"drawColorMapSingle",30).avg,"  MapSingle Time     ":r.normalize(Ce.drawColorMapSingleTimings,"drawColorMapSingle time",30,2).avg,"Total: (avg)":"","  Engine    ":r.pad_9(Le.avg),"  Engine cl ":r.pad_9(we.avg),"  GUI       ":r.pad_9(be.avg),"  ALL       ":r.pad_9(Pe.avg),"  STEP      ":r.pad_9(Re.avg),"  SELF      ":null};break;case 50:var De=p.getQuadTreesConstructionTimings(),Ne=h.getApiReqestData();Oe={"  n items ":De.constructionItems,"  create  ":r.normalize(De.constructionTime,"QT CONST",30,2).avg,"  collide ":r.normalize(De.collideTime,"QT collide",30,2).avg,"  clean   ":r.normalize(De.cleanupTime,"QT clean",30,2).avg,"  resolve ":r.normalize(De.resolveTime,"QT resolve",30,2).avg,"  broadph ":De.broadphase,"  colls   ":De.calls,"  api hit ":r.normalize(Ne.cachehit,"api hit",30,0).avg,"  api miss":r.normalize(Ne.cachemiss,"api miss",30,0).avg,"  api Rect":r.normalize(Ne.queryTreesRectTime,"api rect",30,2).avg,"  total   ":r.normalize((ee.filter(function(e){return e.name.indexOf("QuadTree")>-1})[0]||{time:-1}).time,"Qt Total timings 2",30,2).avg};break;case 51:var Be=c.getOperatorUsage(),Fe=d.getMathSqrtUsage();Oe={"  96     ":r.normalize(Be.dist96,"dist96u",30,0).avg,"  97     ":r.normalize(Be.dist97,"dist97u",30,0).avg,"Math.sqrt":""," coarse  ":r.normalize(Fe.coarseUse," coarse",30,0).avg," coarseV ":r.normalize(Fe.coarseVectorUse," coarseV",30,0).avg," dbtw    ":r.normalize(Fe.distanceBetweenUse," dbtw",30,0).avg," dbtwV   ":r.normalize(Fe.distanceBetweenVectorsUse," dbtwV ",30,0).avg," dbtwXY  ":r.normalize(Fe.distanceBetweenXYXYUse," dbtwXY",30,0).avg," fine    ":r.normalize(Fe.fineUse," fine",30,0).avg};break;case 53:var Ve=l.readPerformance();Oe={"Particles ":q.particles.length,"Custom    ":q.customParticles.length,"Bullets   ":q.bullets.length,"Rockets   ":q.rockets.length,"Asteroids ":q.asteroids.length,"Dust      ":q.fragments.length,"Parts     ":q.asteroidParts.length,"Vertices  ":Ve.vertices};break;case 52:var ke=[];f.GetSpaceDustTree().visualize(ke,[],0,0,-Z,-Q,1),n.default(A.GLctx.Vertices,j),l.drawColor(ke,j,1,1,0,1,j.LINES);var Xe=v.getQTFastP32data(),He=f.getSpaceDustTimings();Oe={"num dust  ":He.numDust,"Quadrant n":He.quadrantSize,"on screen ":He.onscreen,"reset     ":r.normalize(He.reset,"dust reset",30,2).avg,"filtering ":r.normalize(He.filtering,"dust filtering",30,2).avg,insertions:r.normalize(He.insertions,"dust insertions",30,2).avg,collisions:r.normalize(He.collisions,"dust collisions",30,2).avg,"update    ":r.normalize(He.update,"dust update",30,2).avg,"total     ":r.normalize(He.totalTime,"dust total",30,2).avg,"tree type ":f.GetSpaceDustTree().getRangeType(),"nodes     ":Xe.nodesCreated,"pool      ":Xe.poolsize}}var Ue=0,We=0;for(var Ye in s.default.addGL(j,n.default(A.GLctx.Texture,j),s.default.create(T,u.TEXT_SIZE_SMALL,"w"),100,xe+4*u.TEXT_SIZE_SMALL+Ue*u.TEXT_SIZE_SMALL,e),xe+=u.TEXT_SIZE_SMALL,Oe)We="  SELF      "===Ye?r.pad_9(r.normalize(performance.now()-J,"statsGLself",100,2).avg):Oe[Ye],s.default.addListGL(j,n.default(A.GLctx.Texture,j),i([s.default.create(Ye,u.TEXT_SIZE_SMALL,"w")],s.default.addNumberCacheable(We,u.TEXT_SIZE_SMALL,"w")),100,xe+4*u.TEXT_SIZE_SMALL+Ue*u.TEXT_SIZE_SMALL,e),Ue++;n.default(A.GLctx.Vertices,j),l.drawColor(U,j,1,0,0,1);var qe=200;if(S){var ze={49:"gui",50:"quadtrees",51:"sqrt operators",52:"spacedust",53:"items",54:"big graphs",55:"fps graphs",57:"help"};for(var Ye in ze)s.default.addGL(j,n.default(A.GLctx.Texture,j),s.default.create("["+(parseInt(Ye,10)-48)+"] "+ze[Ye],u.TEXT_SIZE_SMALL,"w"),450,qe,e),qe+=u.TEXT_SIZE_SMALL}else!_&&q.clock<9e3&&s.default.addGL(j,n.default(A.GLctx.Texture,j),s.default.create("[HELP: 9]",u.TEXT_SIZE_SMALL,"w"),5,qe+u.TEXT_SIZE_SMALL,e)}else K=q.menuSettings.fps}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(19),r(11),r(41),r(34),r(1),r(50),r(376),r(169),r(143),r(36),r(377),r(52),r(59),r(7),r(378),r(11)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d,p,f,h,v,g,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0});new v.Rectangle(0,0,0,0);t.default={splash:null,gui:function(e){},assert:function(e){return e.IS_MULTIPLAYER||c.default(e),h.pool_log(),!1},init:function(e){var t=e.game,h=e.WW,v=e.WH,m=e.SW,x=e.SH;c.DirectorSetup({enemies:25,spacesquids:18,spacesnakes:4,spaceSpiders:10,npcs:30,campingTimeout:2e4,destroyers:1}),0;var S=a.createShip(e);e.IS_SERVER||(S.pos.x=.1*h,S.pos.y=.6*v,t.player[0]=S,t.drones=a.createDrones(e,S.pos,2,S.guid)),t.spaceSpiders=d.default(e,12);var _=A.default(e,400,new s.Vector(.27*e.WW,.1*e.WH),"AURIGA",{life:100}),T=A.default(e,380,new s.Vector(.7*e.WW,.1*e.WH),"GENESIS",{life:100}),E=A.default(e,440,new s.Vector(.2*e.WW,.85*e.WH),"NEW HORIZON",{life:100});t.spacePorts=[_,T,E],t.asteroids=r.default(e,300,120,300),g.setLV426(t.asteroids);var M=f.default(Math.random,.6*h,.5*v,250);t.rockFormations=M.rockFormations,t.rockFormationSystemRadius=[M.rfSystem],e.IS_SERVER||(t.spaceBats=l.default(e,500),t.npcs=o([],a.createNPCs(e,48,{},0)));var I=y.createDestroyer(e);t.destroyers=[I],I.pos.setFromVec(_.pos),I.pos.x+=_.radius+I.radius,I.pos.y-=300,I.angle+=.6*Math.PI,S.pos.setFromVec(_.pos),S.pos.addXY(100,50),t.enemies=a.createEnemies(e,30),t.spaceSnake=n.default(e,4,void 0,void 0,15*Math.random()+10),t.spaceSquids=i.default(e,14),p.default([t.spaceSpiders,t.enemies,t.spaceSquids,t.spaceBats],S.pos.x-3*m,S.pos.y-3*x,6*m,6*x,e),u.default(t,!1)},mapSize:function(e){return{WW:2e4,WH:2e4}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e.spaceFog.filter(function(e){return!e.fire});if(t)for(var a=Math.min(r.length,e.spaceSquids.length),n=0;n<a;n++){var o=r[n];e.spaceSquids[0].pos.set(o.x,o.y),e.spaceSquids[0].restPos.set(o.x,o.y)}else if(r.length>0&&e.spaceSquids.length>0){o=r[Math.floor(r.length*Math.random())];e.spaceSquids[0].pos.set(o.x,o.y+2e3),e.spaceSquids[0].restPos.set(o.x,o.y)}}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(7)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n,o,i){for(var s=r.rect_pool_pop(t,a,n,o),A=0;A<e.length;A++)for(var u=e[A],l=0;l<u.length;l++){var c=u[l];if(s.intersectsPoint(c.pos)){var d=2.2;Math.random()>.5?(c.pos.x=s.x+s.width*d+s.width*Math.random(),c.pos.y=s.y+s.height*d+s.height*Math.random()):(c.pos.x=s.x-s.width*d-s.width*Math.random(),c.pos.y=s.y-s.height*d-s.height*Math.random())}}r.rect_pool_put(s)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(10)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setLV426=void 0;t.setLV426=function(e){var t=e.sort(function(e,t){return e.radius-t.radius})[0];t.isLV426=!0,t.guid=426,t.life*=6,r.LOG_GL("LV 426 turned ON")}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(33)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="./assets/sound/",n=new Audio(a+"Iwan Gabovitch - Dark Ambience Loop.mp3"),o=new Audio(a+"Menu_Select_00.mp3"),i=new Audio(a+"voice/en/Attention.wav"),s=new Audio(a+"voice/en/CeaseFire.wav"),A=(new Audio(a+"voice/en/EngineMalfunction.wav"),new Audio(a+"voice/en/MissileDetected.wav"),new Audio(a+"voice/en/PowerSupplyReestablished.wav")),u=new Audio(a+"voice/en/PrepareForAction.wav"),l=new Audio(a+"voice/en/ReactorMalfunction.wav"),c=(new Audio(a+"voice/en/Warning.wav"),new Audio(a+"voice/en/WeaponDamaged.wav"),new Audio(a+"voice/en/WeaponDestroyed.wav")),d=(new Audio(a+"voice/en/WeaponMalfunction.wav"),new Audio(a+"bad.wav"));n.loop=!0;for(var p=function(e,t,r,a,n){var o=t[r];o&&(a||(a=n(o)),a.volume=e,a.play())},f=[],h=0;h<10;h++)f.push({audio:new Audio,finished:-1});var v=function(e,t){for(var r=0;r<f.length;r++){var a=new Date,n=f[r];if(n.finished<a.getTime()){n.finished=a.getTime()+1e3*e.duration,n.audio.src=e.src,n.audio.volume=t,n.audio.play();break}}},g=!0;t.default=function(e){var t,a,f,h,y,m,x=e.eventMap;if(e.menuSettings.music?g||(n.volume=1,g=!0):g&&(n.volume=0,g=!1),x[r.GAME_EVENT.TIME_SCALE_CHANGED]){var S=2*x[r.GAME_EVENT.TIME_SCALE_CHANGED].intensity;n.playbackRate=S<=1?S:1}e.menuSettings.sfx&&(t=.8,a=x,f=r.GAME_EVENT.MENU_SELECT,h=o,(m=a[f])&&v(h||y(m),t),p(1,x,r.GAME_EVENT.RESUME_GAME,i),p(1,x,r.GAME_EVENT.START_GAME,u),e.currentLevel<=13||(p(1,x,r.GAME_EVENT.PLAYER_DEAD,c),p(1,x,r.GAME_EVENT.PLAYER_DAMAGE,d),p(1,x,r.GAME_EVENT.PLAYER_DAMAGE_LEVEL_CRITICAL,l),p(1,x,r.GAME_EVENT.PLAYER_DAMAGE_LEVEL_OK,A),p(1,x,r.GAME_EVENT.NPC_FRIENDLY_FIRE,s)))}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(39),r(29),r(7),r(3),r(3)],void 0===(n=function(e,t,r,a,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return{interactStartTimer:0,screen:{rectMinus_400:new n.Rectangle(0,0,0,0),rectMinus_200:new n.Rectangle(0,0,0,0),rect:new n.Rectangle(0,0,0,0),rectSS_200:new n.Rectangle(0,0,0,0),rectSS_400:new n.Rectangle(0,0,0,0),rectSS_600:new n.Rectangle(0,0,0,0),rectSS_800:new n.Rectangle(0,0,0,0),rectSS_1000:new n.Rectangle(0,0,0,0),rectSS_1500:new n.Rectangle(0,0,0,0),rectSS_2000:new n.Rectangle(0,0,0,0)},map:{hash:{},qeue:[],pos:{x:0,y:0},zoom:1},IS_PROCEDURAL:!1,procedural:{treeBounds:new n.Rectangle(0,0,0,0),map:{SX:1,SY:1,SX_END:1,SY_END:1,HEIGHT:1,WIDTH:1,WIDTH_RES:1,HEIGHT_RES:1,GEN_RES:100,GEN_RES_REVERSE_M:.01,GEN_SIZE_PIXELS:5e3,FULL_REFRESH:!1,MOVED_X:0,MOVED_X_RES:0,MOVED_Y:0,MOVED_Y_RES:0,MOVED_XY_ABS_DIST_CELLS:0},boundsSS:new n.Rectangle(0,0,1,1),chunks:{hash:{},qeue:[],size:i.P_CHUNKS_SIZE_RES,ss:i.P_CHUNKS_SIZE_RES/2,stats:{load:0,geneated:0,maxLoad:50},pruneRect:new n.Rectangle(0,0,0,0)}},proceduralBounds:null,proceduralRemovalData:[],proceduralDestroyedData:[],destroyers:[],rockFormationsArcs:[],rockFormationSystemRadius:[],loadscreen:!1,spaceSpiders:[],sparks:[],spacePorts:[],spaceDust:[],fragments:[],fragmentsBlack:[],scoreboard:[],playerGuidHash:{},rockets:[],proximityMines:[],spaceMines:[],spaceTurrets:[],charges:[],spaceBats:[],drones:[],bullets:[],flames:[],networkMessages:[],playerPositions:[],playerGuid:-1,spaceSquids:[],parasites:[],eventMap:{},wayPoints:[],npcs:[],anomlies:[],anomalyPairs:[],ancientBlocks:[],ancients:[],force2:[],skillTree:{active:!1,timer:0,node:null,focused:null,hasBeenActivated:!1},initGameTime:o.GAME_INTRO_TIMER,starMap:[],particles:[],customParticles:[],player:null,enemies:[],asteroids:[],asteroidBelts:[],minefields:[],rockFormations:[],spaceFog:[],SX:0,SY:0,SW:e,SH:t,resW:e,resH:t,currentResW:e,currentResH:t,asteroidParts:[],spaceSnake:[],notifications:[],settings_asteroid_spawns_new:!0,settings_minimap_asteroid_min_radius:100,settings_wormhole:!0,settings_be_the_snake_mode:!1,settings_no_darkness:!1,daylight:{time:i.DAYLIGHT_LEVEL_START_TIME,darkness_multip:0,is_dawn:!1,is_day:!1,is_dusk:!1,is_night:!0,fog:.8},level_completed:!1,performance:{engine:[],engineClient:[],gui:[],shaders:[],particles:0,asteroids:0,totalEngine:0,totalEngineClient:0,totalGui:0},testMode:!1,isPaused:!1,clock:0,fromClock:0,currentLevel:0,levelEditor:!1,menuSettings:{heavyFog:!1,networkLocaations:!1,heap:!1,commanderHelp:!0,mouseControl:!1,objectData:!0,motionBlur:!1,onScreenLogging:!1,gameClock:!0,extensiveUI:!1,raycasting:!0,losShadows:!0,glowParticles:!0,glow:!0,reflections:!0,antialiasing:!1,fps:!1,fpsOnly:!1,fps3dBars:!1,fps3dGrid:!1,minimap:!0,instruments:!0,showCloseItems:!0,showSightLines:!1,music:!0,sfx:!1,shipStatus:!0,keybindingHint:!0,noise:!0,spacedust:!0,woodenPC:!1,transformFeedback:!0,particles:!0,debugItems:{chunks:!1,aabb:!1,forces:!1,proceduralCreation:!1,predatorTarget:!1}},state:r.defaultGameState(),allKeyCodes:a.default(r.defaultGameState()),removedAsteroids:[],removedShips:[],traceLine:[],zoomTX:1,zoomTXinverted:1,continueState:null}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(0),r(382),r(383),r(384),r(385),r(386),r(387),r(388),r(61),r(389),r(390),r(2),r(391),r(392),r(393),r(394),r(395),r(396),r(397)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f,h,v,g,y,m,x){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGL=void 0;t.createGL=function(e,t){void 0===t&&(t=!1);var _=e.getContext("webgl2",{antialias:t});window.webglUtils;_||(console.error("unable to get GL CTX, trying one more time"),(_=e.getContext("webgl2",{antialias:t}))||setTimeout(function(){window.location=window.location},2e3)),r.compileProgram(r.GLctx.Vertices3d,_,a.default,e.width,e.height,!0),r.compileProgram(r.GLctx.VerticesMultiColor,_,c.default,e.width,e.height),r.compileProgram(r.GLctx.VerticesFastAlpha,_,d.default,e.width,e.height),r.compileProgram(r.GLctx.Vertices,_,n.default),r.compileProgram(r.GLctx.VerticesOverlay,_,n.default),r.compileProgram(r.GLctx.TextureDist,_,o.default),r.compileProgram(r.GLctx.TextureBlur,_,x.default),r.compileProgram(r.GLctx.Texture,_,i.default),r.compileProgram(r.GLctx.TextureCombineMultiply,_,m.default),r.compileProgram(r.GLctx.GameBufferDist,_,s.default),r.compileProgram(r.GLctx.GameBufferNoise,_,A.default),r.compileProgram(r.GLctx.VerticesGradient,_,u.default,e.width,e.height),r.compileProgram(r.GLctx.VerticesGradient2tone,_,g.default,e.width,e.height),r.compileProgram(r.GLctx.VerticesGradientBLACK,_,f.default,e.width,e.height),r.compileProgram(r.GLctx.VerticesGradientLinear,_,h.default,e.width,e.height),r.compileProgram(r.GLctx.EdgeGradient,_,v.default,e.width,e.height),r.compileProgram(r.GLctx.PerlinNoiseFog,_,y.default);var T=r.default(r.GLctx.VerticesOverlay,_);_.useProgram(T),S(_,T,e);var E=r.default(r.GLctx.Vertices,_);return _.useProgram(E),S(_,E,e),_.enable(_.BLEND),_.blendFunc(_.ONE,_.ONE),l.setGlobalGL(_),p.setupBuffers(_),_};var S=function(e,t,r){var a=e.getAttribLocation(t,"a_position"),n=e.getUniformLocation(t,"u_resolution");e.getUniformLocation(t,"u_color");e.uniform2f(n,r.width,r.height);var o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o),e.enableVertexAttribArray(a),e.vertexAttribPointer(a,2,e.FLOAT,!1,0,0)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={fragment:"\n    precision mediump float;\n\n    uniform vec4 u_color;\n\n    \n\n    varying vec4 pos;\n\n    void main() {\n\n        float z = 1.0 - pos.z*-0.5;\n\n        float y = pos.y *4.0;\n        \n        vec4 color = vec4((u_color.r ) - z*0.1   ,  u_color.g  -z ,u_color.b  -z, 1);\n\n        gl_FragColor = color * 0.5;\n    }\n    ",vertex:"\n \n attribute vec4 a_position;\n attribute vec4 aVertexColor;\n uniform mat4 uModelViewMatrix;\n uniform mat4 uProjectionMatrix;\n varying lowp vec4 vColor;\n uniform vec2 u_resolution;\n\n varying vec4 pos;\n\n void main(void) {\n  // gl_Position = uProjectionMatrix * uModelViewMatrix * a_position;\n  // vColor = aVertexColor;\n\n   vec2 normSpace = vec2(a_position.x, a_position.y);\n\n   // convert the rectangle from pixels to 0.0 to 1.0\n   vec2 zeroToOne = normSpace / u_resolution;\n\n   // convert from 0->1 to 0->2\n   vec2 zeroToTwo = zeroToOne * 2.0;\n\n   // convert from 0->2 to -1->+1 (clipspace)\n   vec2 clipSpace = zeroToTwo - 1.0;\n\n   vec2 res = clipSpace * vec2(1, -1);\n\n   gl_Position =uProjectionMatrix  * vec4(res, a_position.z, 1);\n   pos = gl_Position;\n }\n"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={fragment:"\n    precision mediump float;\n\n    uniform vec4 u_color;\n\n    void main() {\n        \n        gl_FragColor = u_color;\n        // gl_FragColor = vec4(1,1,1,1);  // ALL WHITE\n        // gl_FragColor = vec4(0.5,0.5,0.5,1);  // ALL GREY\n    }\n    ",vertex:"\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nuniform float u_pointSize;\n\nvoid main() {\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = a_position / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    gl_PointSize = u_pointSize; // enable gl.POINTS\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    \n}\n"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={fragment:'#version 300 es\n        \n                // fragment shaders don\'t have a default precision so we need\n                // to pick one. mediump is a good default. It means "medium precision"\n                precision mediump float;\n                \n                // our texture\n                uniform sampler2D u_texture;\n        \n                uniform float distortionStart;\n                uniform float distortionEnd;\n                \n                // the texCoords passed in from the vertex shader.\n                in vec2 v_texcoord;\n                \n                // we need to declare an output for the fragment shader\n                out vec4 outColor;\n                \n                vec4 temp; \n                vec4 temp2;\n                \n                float rand(vec2 co){\n                    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453) * (distortionStart+distortionEnd);\n                }\n                \n                void main() {\n                    temp = texture(u_texture, v_texcoord).rgba;\n        \n                    \n                    temp2 = texture(u_texture, vec2(v_texcoord.x + rand(v_texcoord) * 0.1 * distortionEnd , v_texcoord.y)).rgba;\n        \n                    if( v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd){\n                        //inside distortionspace\n        \n                        if(distortionStart > 0.9 && distortionEnd > 0.9){\n                            outColor =  texture(u_texture, vec2(rand(v_texcoord),rand(v_texcoord))).rgba;\n                        }else if(int(v_texcoord.y * 100.0) % 2 == 0 && temp2.r > 0.01){\n                            outColor = vec4(1,distortionStart,distortionEnd,1);\n                        }else{\n                            outColor = vec4(0,0,0,0);\n                        }\n                    }else{\n                        if(distortionStart > 0.5){\n                            outColor =  texture(u_texture, v_texcoord).rgba;\n                        }else  if(int(v_texcoord.y * 100.0) % 1 == 0){\n                            outColor = vec4(0,0,0,0);\n                        }else{\n                            outColor =  texture(u_texture, v_texcoord).rgba;\n                        }\n                    }\n        \n                    //outColor.a = 0.0;\n                        /*\n                    if(  v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd &&  int(v_texcoord.y * 100.0) % 2 == 0 && temp2.r > 0.01    ){\n                        outColor = vec4(1,0,0,1);\n                    }else{\n        \n                        outColor =  texture(u_texture, v_texcoord).rgba;\n                        \n                        if(int(v_texcoord.y * 100.0) % 1 == 0){\n                            outColor = vec4(0,0,0,1);\n                        }else{\n                            outColor =  texture(u_texture, v_texcoord).rgba;\n                        }\n                        \n                       // outColor = v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd ? texture(u_texture , vec2( v_texcoord.x +    rand(v_texcoord) , v_texcoord.y)  ).rgba : texture(u_texture, v_texcoord).rgba ;\n                    }*/\n                  \n                }\n                ',vertex:"#version 300 es\nprecision mediump float;\n\nin vec4 a_position;\nin vec2 a_texcoord;\n\nuniform mat4 u_matrix;\n\nout vec2 v_texcoord;\n\nvoid main() {\ngl_Position = u_matrix * a_position;\nv_texcoord = a_texcoord;\n}\n"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={fragment:"#version 300 es\n    precision mediump float;\n\n    \n    in vec2 v_texcoord;\n\n    uniform sampler2D u_texture;\n    out vec4 outColor;\n    void main() {\n        outColor = texture(u_texture, v_texcoord);\n    }\n",vertex:"#version 300 es\n    precision mediump float;\n    \n    in vec4 a_position;\n    in vec2 a_texcoord;\n    \n    uniform mat4 u_matrix;\n    \n    out vec2 v_texcoord;\n    \n    void main() {\n    gl_Position = u_matrix * a_position;\n    v_texcoord = a_texcoord;\n    }\n"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={fragment:'#version 300 es\n        \n                // fragment shaders don\'t have a default precision so we need\n                // to pick one. mediump is a good default. It means "medium precision"\n                precision mediump float;\n                \n                // our texture\n                uniform sampler2D u_texture;\n        \n                uniform float distortionStart;\n                uniform float distortionEnd;\n                \n                // the texCoords passed in from the vertex shader.\n                in vec2 v_texcoord;\n                \n                // we need to declare an output for the fragment shader\n                out vec4 outColor;\n                \n                vec4 temp; \n                vec4 temp2;\n\n                vec4 boost1;\n                vec4 boost2;\n                vec4 boostVec4;\n                float threshold;\n                \n                float randNoise(vec2 co){\n                    return fract(sin(dot(co.xy *distortionStart  ,vec2(12.9898,78.233))) * 43758.5453) * 0.3 ;\n                }\n\n                float rand(vec2 co){\n                    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453) * (distortionStart+distortionEnd);\n                }\n                \n                void main() {\n                    temp = texture(u_texture, v_texcoord).rgba;\n        \n                    \n                    temp2 = texture(u_texture, vec2(v_texcoord.x + rand(v_texcoord) * 0.1 * distortionEnd , v_texcoord.y)).rgba;\n                    /*if(  v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd &&  int(v_texcoord.y * 100.0) % 2 == 0 && temp2.r > 0.01    ){\n                        outColor =  texture(u_texture, v_texcoord).rgba;\n                        outColor += v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd ? texture(u_texture , vec2( v_texcoord.x  , v_texcoord.y+    rand(v_texcoord))  ).rgba : texture(u_texture, v_texcoord).rgba ;\n                    }else{\n        */\n                    if(temp.r > 0.1 || temp.g > 0.1 || temp.b > 0.1 ){\n                        outColor =  temp.rgba;\n                    }else if(temp2.r > 0.1 || temp2.g > 0.1 || temp2.b > 0.1 ){\n                        if(distortionStart > 0.5){\n                            outColor =  temp2.brga;\n                        }else{\n                        outColor =  temp2.rgba ; \n                        }\n                    }else{\n                        \n                        outColor =  texture(u_texture, v_texcoord).rgba;\n                        \n                       outColor += v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd ? texture(u_texture , vec2( v_texcoord.x+    rand(v_texcoord)  , v_texcoord.y)  ).rgba : texture(u_texture, v_texcoord).rgba ;\n                       /*   \n                       outColor += v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd ? texture(u_texture , vec2( v_texcoord.x +    rand(v_texcoord) , v_texcoord.y)  ).rgba : texture(u_texture, v_texcoord).rgba ;\n                       outColor += v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd ? texture(u_texture , vec2( v_texcoord.x +    rand(v_texcoord) +0.01 , v_texcoord.y)  ).rgba : texture(u_texture, v_texcoord).rgba ;\n                       outColor += v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd ? texture(u_texture , vec2( v_texcoord.x +    rand(v_texcoord) +0.02 , v_texcoord.y)  ).rgba : texture(u_texture, v_texcoord).rgba ;\n                       outColor += v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd ? texture(u_texture , vec2( v_texcoord.x +    rand(v_texcoord) +0.03 , v_texcoord.y)  ).rgba : texture(u_texture, v_texcoord).rgba ;\n                       outColor += v_texcoord.y > distortionStart && v_texcoord.y < distortionEnd ? texture(u_texture , vec2( v_texcoord.x +    rand(v_texcoord) +0.05 , v_texcoord.y)  ).rgba : texture(u_texture, v_texcoord).rgba ;\n                       */\n                    }\n                    //noise\n                      outColor += vec4(randNoise(v_texcoord),randNoise(v_texcoord),randNoise(v_texcoord),randNoise(v_texcoord));\n\n\n                      //colorboost\n                      threshold = 0.5;\n                    boostVec4 = vec4(0.2,0.2,0.2,1.0);\n                      boost1 = texture(u_texture, vec2(v_texcoord.x + randNoise(v_texcoord) * 0.001 *distortionStart   , v_texcoord.y)).rgba;\n                      boost2 = texture(u_texture, vec2(v_texcoord.x - randNoise(v_texcoord) * 0.001 *distortionEnd , v_texcoord.y)).rgba;\n                      if (boost1.r > threshold || boost1.g > threshold || boost1.b > threshold) { \t\n                        if (outColor.r > threshold || outColor.g > threshold || outColor.b > threshold) {\n                            outColor += boostVec4;\n                        }                   \n                    }\n                    if (boost2.r > threshold || boost2.g > threshold || boost2.b > threshold) { \t                   \n                        if (outColor.r > threshold || outColor.g > threshold || outColor.b > threshold) {\n                            outColor += boostVec4;\n                        }\n                    }\n                }\n                ',vertex:"#version 300 es\nprecision mediump float;\n\nin vec4 a_position;\nin vec2 a_texcoord;\n\nuniform mat4 u_matrix;\n\nout vec2 v_texcoord;\n\nvoid main() {\ngl_Position = u_matrix * a_position;\nv_texcoord = a_texcoord;\n}\n"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={fragment:'#version 300 es\n        \n                // fragment shaders don\'t have a default precision so we need\n                // to pick one. mediump is a good default. It means "medium precision"\n                precision mediump float;\n                \n                // our texture\n                uniform sampler2D u_texture;\n        \n                uniform float distortionStart;\n                uniform float distortionEnd;\n                \n                // the texCoords passed in from the vertex shader.\n                in vec2 v_texcoord;\n                \n                // we need to declare an output for the fragment shader\n                out vec4 outColor;\n                \n                vec4 temp1; \n                vec4 temp2;\n\n                vec4 boost1;\n                vec4 boost2;\n                vec4 boostVec4;\n\n                float threshold;\n                \n                float rand(vec2 co){\n                    return fract(sin(dot(co.xy *distortionStart  ,vec2(12.9898,78.233))) * 43758.5453) * 0.3 ;\n                }\n                \n                void main() {   \n                    threshold = 0.5;\n                    boostVec4 = vec4(0.2,0.2,0.2,1.0);\n\n                    temp1 = texture(u_texture, vec2(v_texcoord.x + rand(v_texcoord) * 0.01 *distortionStart   , v_texcoord.y)).rgba;\n                    temp2 = texture(u_texture, vec2(v_texcoord.x - rand(v_texcoord) * 0.01 *distortionEnd , v_texcoord.y)).rgba;\n                    outColor =  texture(u_texture, v_texcoord).rgba;\n                    \n                    boost1 = texture(u_texture, vec2(v_texcoord.x + rand(v_texcoord) * 0.001 *distortionStart   , v_texcoord.y)).rgba;\n                    boost2 = texture(u_texture, vec2(v_texcoord.x - rand(v_texcoord) * 0.001 *distortionEnd , v_texcoord.y)).rgba;\n\n                    \n\n                    if(temp1.r > threshold || temp1.g > threshold || temp1.b > threshold){\n                        outColor += temp1;\n                    }\n                    if(temp2.r > threshold || temp2.g > threshold || temp2.b > threshold){\n                        outColor += temp2;\n                    }                    \n\n\n                    if (boost1.r > threshold || boost1.g > threshold || boost1.b > threshold) { \t\n                        if (outColor.r > threshold || outColor.g > threshold || outColor.b > threshold) {\n                            outColor += boostVec4;\n                        }                   \n                    }\n                    if (boost2.r > threshold || boost2.g > threshold || boost2.b > threshold) { \t                   \n                        if (outColor.r > threshold || outColor.g > threshold || outColor.b > threshold) {\n                            outColor += boostVec4;\n                        }\n                    }\n\n                    outColor += vec4(rand(v_texcoord) * v_texcoord.y,rand(v_texcoord),rand(v_texcoord),rand(v_texcoord));\n\n                    \n                    if(int(v_texcoord.y * 100.0) % 2 == 0 ){                       \n                        outColor.b -= 0.1;\n                        if(v_texcoord.y < distortionEnd && v_texcoord.y > distortionStart && rand(v_texcoord) >  0.29){\n                            outColor.r += 0.3;\n                        }\n                    }\n                }\n                ',vertex:"#version 300 es\nprecision mediump float;\n\nin vec4 a_position;\nin vec2 a_texcoord;\n\nuniform mat4 u_matrix;\n\nout vec2 v_texcoord;\n\nvoid main() {\ngl_Position = u_matrix * a_position;\nv_texcoord = a_texcoord;\n}\n"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={fragment:"\n    precision highp float;\n    \n    uniform vec4 u_color;    \n    varying vec2 vPos;\n    varying vec2 vPos2;\n\n    uniform float u_pos_x;\n    uniform float u_pos_y;   \n\n    uniform float u_perimiter;\n\n    float gradientNoise(in vec2 uv)\n    {\n        return fract(52.9829189 * fract(dot(uv, vec2(0.06711056, 0.00583715))));\n    }\n\n    \n    \n    \n    \n\n    float dist(vec2 p0, vec2 pf){\n        return sqrt((pf.x-p0.x)*(pf.x-p0.x)+(pf.y-p0.y)*(pf.y-p0.y));\n    }\n    float d;\n    vec4 res;\n\n    float noise;\n    void main() {       \n        d = (dist(vec2(u_pos_x,u_pos_y), vPos2 )) / u_perimiter * 2. ;\n      \n        noise = gradientNoise(vPos2.xy);\n        gl_FragColor += mix(u_color + noise*.1, vec4(0.0, 0.0, 0.0, 1.0), d) *u_color.a;\n           \n        \n\n        \n    }\n    ",vertex:"\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvarying vec2 vPos;\nvarying vec2 vPos2;\n\nvoid main() {\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = a_position / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    //gl_Position = vec4(a_position, 0, 1);\n    vPos = gl_Position.xy;\n    vPos2 = a_position;\n}\n"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={fragment:"\n    precision mediump float;\n\n    varying vec4 v_vertex_color;\n\n    void main() {\n        gl_FragColor = v_vertex_color;\n    }\n    ",vertex:"\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nattribute vec4 a_color;\n\nvarying vec4 v_vertex_color;\n\nvoid main() {\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = a_position / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    gl_PointSize = 1.0; // enable gl.POINTS\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    v_vertex_color = a_color;\n    \n}\n"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={fragment:"\n    precision mediump float;    \n\n    uniform vec4 u_color;\n\n    varying float v_fast_color_alpha;\n\n    void main() {\n        gl_FragColor = vec4(u_color.r,u_color.g,u_color.b, v_fast_color_alpha);     \n    }\n    ",vertex:"\nattribute vec3 a_position;\n\nuniform vec2 u_resolution;\n\nvarying float v_fast_color_alpha;\n\nvoid main() {\n\n    vec2 pos2d = vec2(a_position.x, a_position.y);\n    v_fast_color_alpha = a_position.z;\n\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = pos2d / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    gl_PointSize = 1.0; // enable gl.POINTS\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    \n}\n"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={fragment:"\n    precision mediump float;\n    \n    uniform vec4 u_color;    \n    varying vec2 vPos;\n    varying vec2 vPos2;\n\n    uniform float u_pos_x;\n    uniform float u_pos_y; \n    \n    \n\n    uniform float u_perimiter;\n\n    float dist(vec2 p0, vec2 pf){\n        return sqrt((pf.x-p0.x)*(pf.x-p0.x)+(pf.y-p0.y)*(pf.y-p0.y));\n    }\n    float d;\n\n    void main() {       \n       d = ((dist(vec2(u_pos_x,u_pos_y), vPos2 )) / u_perimiter );\n       d = d * d * d * d * d;\n       gl_FragColor += mix(u_color, vec4(0.0, 0.0, 0.0, 1), d);\n       // gl_FragColor = u_color;\n           \n    }\n    ",vertex:"\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvarying vec2 vPos;\nvarying vec2 vPos2;\n\nvoid main() {\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = a_position / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    \n    vPos = gl_Position.xy;\n    vPos2 = a_position;\n}\n"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={fragment:"\n    precision mediump float;\n    \n    uniform vec4 u_color;    \n    varying vec2 vPos;\n    varying vec2 vPos2;\n   \n    \n    uniform float u_pos_from_x;\n    uniform float u_pos_from_y;   \n    uniform float u_pos_to_x;\n    uniform float u_pos_to_y;   \n    \n\n\n    uniform float u_perimiter;\n\n    float dist(vec2 p0, vec2 pf){\n        return sqrt((pf.x-p0.x)*(pf.x-p0.x)+(pf.y-p0.y)*(pf.y-p0.y));\n    }\n    float d;\n    vec4 res;\n\n    void main() {       \n        vec2 from = vec2(u_pos_from_x, u_pos_from_y);\n        vec2 to = vec2(u_pos_to_x, u_pos_to_y);\n        vec2 gradVec;\n        float value;\n    \n        gradVec = to - from;\n        value = dot(vPos2 - from, gradVec)/dot(gradVec, gradVec);\n        value = clamp(value, 0.0, 1.0);\n    \n        gl_FragColor += mix(u_color, vec4(0.0, 0.0, 0.0, 1), value);\n       // gl_FragColor = vec4(value,0.0,0.0,0);  \n    }\n    ",vertex:"\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvarying vec2 vPos;\nvarying vec2 vPos2;\n\nvoid main() {\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = a_position / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    //gl_Position = vec4(a_position, 0, 1);\n    vPos = gl_Position.xy;\n    vPos2 = a_position;\n}\n"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={fragment:"\n    precision mediump float;\n    \n    uniform vec4 u_color;    \n    varying vec2 vPos;\n    varying vec2 vPos2;\n   \n    uniform vec2 fromA;\n    uniform vec2 toA;\n    uniform vec2 fromB;\n    uniform vec2 toB;\n    uniform vec2 fromC;\n    uniform vec2 toC;\n\n\n   \n\n    void main() {\n\n        vec4 color0 = u_color; //vec4(0.0,0.0,0.0,1.0);\n        vec4 color1 = vec4(1.0,1.0,1.0,1.0);\n\n        \n        vec2 gradVec;\n        float value;\n        float valueT;\n        \n        gradVec = toA - fromA;\n        value = dot(vPos2 - fromA, gradVec)/dot(gradVec, gradVec);\n        valueT = clamp(value, 0.0, 1.0);\n       \n        gradVec = toB - fromB;\n        value = dot(vPos2 - fromB, gradVec)/dot(gradVec, gradVec);\n        valueT = clamp( max(valueT, value),0.0,1.0);\n        \n        gradVec = toC - fromC;\n        value = dot(vPos2 - fromC, gradVec)/dot(gradVec, gradVec);\n        valueT = clamp( max(valueT, value),0.0,1.0);\n       \n        gl_FragColor = mix(color0, color1, valueT);\n          \n    }\n    ",vertex:"\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvarying vec2 vPos;\nvarying vec2 vPos2;\n\nvoid main() {\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = a_position / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    //gl_Position = vec4(a_position, 0, 1);\n    vPos = gl_Position.xy;\n    vPos2 = a_position;\n}\n"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={fragment:"\n    precision mediump float;\n    \n    uniform vec4 u_color;    \n    uniform vec4 u2_color;    \n    varying vec2 vPos;\n    varying vec2 vPos2;\n    uniform float u_range;\n\n    uniform float u_pos_x;\n    uniform float u_pos_y;   \n\n    uniform float u_perimiter;\n\n    float dist(vec2 p0, vec2 pf){\n        return sqrt((pf.x-p0.x)*(pf.x-p0.x)+(pf.y-p0.y)*(pf.y-p0.y));\n    }\n    float d;\n    vec4 res;\n    float m_range;\n\n    void main() {       \n        d = (dist(vec2(u_pos_x,u_pos_y), vPos2 )) / u_perimiter * 2. ;\n      \n        m_range = 1.0 - u_range;\n        gl_FragColor += mix(u_color, u2_color,d > 0.5 ? 0.5 + d * 0.01 : d);\n       //gl_FragColor = u_color;     \n    }\n    ",vertex:"\nattribute vec2 a_position;\n\nuniform vec2 u_resolution;\n\nvarying vec2 vPos;\nvarying vec2 vPos2;\n\nvoid main() {\n    // convert the rectangle from pixels to 0.0 to 1.0\n    vec2 zeroToOne = a_position / u_resolution;\n\n    // convert from 0->1 to 0->2\n    vec2 zeroToTwo = zeroToOne * 2.0;\n\n    // convert from 0->2 to -1->+1 (clipspace)\n    vec2 clipSpace = zeroToTwo - 1.0;\n\n    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    //gl_Position = vec4(a_position, 0, 1);\n    vPos = gl_Position.xy;\n    vPos2 = a_position;\n}\n"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={fragment:"\nprecision mediump float;\nuniform float uTime;\nvarying vec3 vPosition;\nuniform vec2 uLocation;\nuniform float uColorMultip;\nuniform float uIntensity;\nuniform int uInvertColors;\nfloat d;\n\n\n// Noise\nvec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }\nvec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\nvec3 fade(vec3 t) { return t*t*t*(t*(t*6.0-15.0)+10.0); }\nfloat noise(vec3 P) {\n    vec3 i0 = mod289(floor(P)), i1 = mod289(i0 + vec3(1.0));\n    vec3 f0 = fract(P), f1 = f0 - vec3(1.0), f = fade(f0);\n    vec4 ix = vec4(i0.x, i1.x, i0.x, i1.x), iy = vec4(i0.yy, i1.yy);\n    vec4 iz0 = i0.zzzz, iz1 = i1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy), ixy0 = permute(ixy + iz0), ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0), gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    vec4 gx1 = ixy1 * (1.0 / 7.0), gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0); gx1 = fract(gx1);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0), sz0 = step(gz0, vec4(0.0));\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1), sz1 = step(gz1, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5); gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5); gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g0 = vec3(gx0.x,gy0.x,gz0.x), g1 = vec3(gx0.y,gy0.y,gz0.y),\n        g2 = vec3(gx0.z,gy0.z,gz0.z), g3 = vec3(gx0.w,gy0.w,gz0.w),\n        g4 = vec3(gx1.x,gy1.x,gz1.x), g5 = vec3(gx1.y,gy1.y,gz1.y),\n        g6 = vec3(gx1.z,gy1.z,gz1.z), g7 = vec3(gx1.w,gy1.w,gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g0,g0), dot(g2,g2), dot(g1,g1), dot(g3,g3)));\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g4,g4), dot(g6,g6), dot(g5,g5), dot(g7,g7)));\n    g0 *= norm0.x; g2 *= norm0.y; g1 *= norm0.z; g3 *= norm0.w;\n    g4 *= norm1.x; g6 *= norm1.y; g5 *= norm1.z; g7 *= norm1.w;\n    vec4 nz = mix(vec4(dot(g0, vec3(f0.x, f0.y, f0.z)), dot(g1, vec3(f1.x, f0.y, f0.z)),\n        dot(g2, vec3(f0.x, f1.y, f0.z)), dot(g3, vec3(f1.x, f1.y, f0.z))),\n        vec4(dot(g4, vec3(f0.x, f0.y, f1.z)), dot(g5, vec3(f1.x, f0.y, f1.z)),\n            dot(g6, vec3(f0.x, f1.y, f1.z)), dot(g7, vec3(f1.x, f1.y, f1.z))), f.z);\n    return 2.2 * mix(mix(nz.x,nz.z,f.y), mix(nz.y,nz.w,f.y), f.x);\n}\nfloat noise(vec2 P) { return noise(vec3(P, 0.0)); }\nfloat fractal(vec3 P) {\n    float f = 0., s = 1.;\n    for (int i = 0 ; i < 9 ; i++) {\n        f += noise(s * P) / s;\n        s *= 2.;\n        P = vec3(.866 * P.x + .5 * P.z, P.y + 100., -.5 * P.x + .866 * P.z);\n    }\n    return f;\n}\nfloat turbulence(vec3 P) {\n    float f = 0., s = 1.;\n    for (int i = 0 ; i < 9 ; i++) {\n        f += abs(noise(s * P)) / s;\n        s *= 2.;\n        P = vec3(.866 * P.x + .5 * P.z, P.y + 100., -.5 * P.x + .866 * P.z);\n    }\n    return f;\n}\n\nvec3 clouds(float x, float y) {\n    float L = turbulence(vec3(x, y, uTime * .1));\n    return vec3(noise(vec3(.5, .5, L) * .7));\n}\n\nfloat dist(vec2 p0, vec2 pf){\n    return sqrt((pf.x-p0.x)*(pf.x-p0.x)+(pf.y-p0.y)*(pf.y-p0.y));\n}\n\nvoid main() {\n    vec3 color;\n    float x = vPosition.x;\n    float y = vPosition.y;\n    vec3 cloudEffect = clouds(vPosition.x + uLocation.x , vPosition.y + uLocation.y);\n    color = cloudEffect + vec3(uColorMultip, uColorMultip, uColorMultip);\n\n    //d = dist(vec2(0.,0.), vec2(x,y)) /  1. ;\n    gl_FragColor = vec4(uInvertColors == 1 ?  1.0 - color * uIntensity : color * uIntensity, color * uIntensity);\n    //gl_FragColor = vec4(uInvertColors == 1 ?  1.0 - color * uIntensity : color * uIntensity, color * uIntensity);\n}\n    ",vertex:"\n   attribute vec3 aPosition;\n   varying   vec3 vPosition;\n   void main() {\n      gl_Position = vec4(aPosition, 1.0);\n      vPosition = aPosition;\n   }\n"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={fragment:"#version 300 es\n    precision mediump float;\n\n    \n    in vec2 v_texcoord;\n\n    uniform sampler2D u_texture;\n    uniform sampler2D u_texture_b;\n    out vec4 outColor;\n    void main() {\n       // Multiply 2 textures, ...i hope\n        vec4 color0 = texture(u_texture, v_texcoord);\n        vec4 color1 = texture(u_texture_b, v_texcoord);\n        outColor = color0 * color1 * 5.7;\n        //outColor = color0 + color1;\n    }\n",vertex:"#version 300 es\n    precision mediump float;\n    \n    in vec4 a_position;\n    in vec2 a_texcoord;\n    \n    uniform mat4 u_matrix;\n    \n    out vec2 v_texcoord;\n    \n    void main() {\n    gl_Position = u_matrix * a_position;\n    v_texcoord = a_texcoord;\n    }\n"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a;void 0===(a=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={fragment:"# version 300 es\n    precision highp float;\n    in vec2 v_texcoord;\n   // uniform vec2 u_textureSize;\n    uniform sampler2D u_texture;\n    out vec4 outColor;\n\n    float normpdf(in float x, in float sigma)\n    {\n        return 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;\n    }\n\n    void main() {\n\n        const vec2 u_textureSize = vec2(100.0,100.0);\n\n        vec3 c = texture(u_texture, v_texcoord.xy / u_textureSize.xy).rgb;\n        \n        \n        //declare stuff\n        const int mSize = 11;\n        const int kSize = (mSize-1)/2;\n        float kernel[mSize];\n        vec3 final_colour = vec3(0.0);\n        \n        //create the 1-D kernel\n        float sigma = 7.0;\n        float Z = 0.0;\n        for (int j = 0; j <= kSize; ++j)\n        {\n            kernel[kSize+j] = kernel[kSize-j] = normpdf(float(j), sigma);\n        }\n        \n        //get the normalization factor (as the gaussian has been clamped)\n        for (int j = 0; j < mSize; ++j)\n        {\n            Z += kernel[j];\n        }\n        \n        //read out the texels\n        for (int i=-kSize; i <= kSize; ++i)\n        {\n            for (int j=-kSize; j <= kSize; ++j)\n            {\n                final_colour += kernel[kSize+j]*kernel[kSize+i]*texture(u_texture, (v_texcoord.xy+vec2(float(i),float(j))) / u_textureSize.xy).rgb;\n\n            }\n        }\n        \n        \n        outColor = vec4(final_colour/(Z*Z), 1.0);\n    }\n\n",vertex:"# version 300 es\nprecision highp float;\nin vec4 a_position;\nin vec2 a_texcoord;\nuniform mat4 u_matrix;\nout vec2 v_texcoord;\n\nvoid main() {\n    gl_Position = u_matrix * a_position;\n    v_texcoord = a_texcoord;\n}\n"}}.apply(t,[r,t]))||(e.exports=a)},function(e,t,r){var a,n;a=[r,t,r(29)],void 0===(n=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDefaultEngineCTX=t.createDefaultGuiCTX=void 0;t.createDefaultGuiCTX=function(e,t,a,n,o,i,s,A){var u=r.default(e.state);return{IS_MULTIPLAYER:A,step:0,stepMS:0,stepREQframe:0,stepMStotal:0,frameCnt:0,ctx:o,frame:s,imageData:i,game:e,SW:e.SW,SH:e.SH,WW:t,WH:a,SX:5e3,SY:2e3,gl:n,keyCodes:u.game.keys}};t.createDefaultEngineCTX=function(e,t,a,n,o){var i=r.default(e.state);return{IS_MULTIPLAYER:n,IS_SERVER:o,SW:e.SW,SH:e.SH,WW:t,WH:a,SX:0,SY:0,game:e,step:0,stepMS:0,stepMStotal:0,frameCnt:0,stepREQframe:0,keyCodes:i.game.keys}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(2),r(0),r(8),r(3),r(26),r(171),r(400),r(401),r(402),r(403),r(404),r(405),r(406),r(407),r(408),r(409),r(410),r(411),r(412),r(413),r(414),r(6),r(40),r(415),r(416),r(417),r(418),r(10)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f,h,v,g,y,m,x,S,_,T,E,M,I,L,w,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var P=null,R=null,O=null,C=null,G=null,D=["DON'T FOLLOW US","DEATH IS NEAR","IT'S NOT WHAT YOU THINK IT IS","THIS IS NOT A DISTRESS CALL, IT'S A WARNING","THERE BE SPACE SNAKES","LET'S GET THE FUCK OUT OF HERE","SPACE WAS NEVER MEAN'T FOR US","LEAVE THIS PLACE","REST IN PIECES","STAY IN THE LIGHT"],N=[g.default,v.default,f.default,p.default,d.default,c.default,s.default,A.default,u.default,l.default,h.default,y.default,m.default,x.default,S.default,_.default,M.default,I.default,L.default,w.default],B=!1,F=!1,V=null,k=!0;t.default=function(e,t,s,A){void 0===A&&(A=!1);var u=e.SW,l=e.SH,c=e.gl;if(c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),!k){if(F||(e.step=t.step=1,e.stepMS=t.stepMS=1e3/60,e.SW=t.SW=window.innerWidth,e.SH=t.SH=window.innerHeight,F=!0),!V)return void(V=N[Math.round(Math.random()*N.length)]);if(e.game.currentLevel=12,!B)return V.init(t),B=!0,void(e.game.player[0]&&(e.SX=t.SX=e.game.player[0].pos.x-500,e.SY=t.SY=e.game.player[0].pos.y-300));1!==s?(V.camera&&V.camera(e),i.default(e),V.assert(t),V.gui(e)):(E.default(t,e),b.LOG_GL_CLEAR())}A||(k=!1);var d=[],p=[];P||(P=n.default.create("FAR FROM GRACE".split("").join("  "),o.TEXT_SIZE_MEDIUM,"w",!1,!0),R=n.default.create("Klimtachakka @ gmail.com",26,"w",!1,!0),O=n.default.create("DORITO ENGINE |>",20,"w",!1,!0),C=n.default.create("VERSION "+o.VERSION_STR,16,"w",!1,!0),G=n.default.create(D[Math.floor(Math.random()*D.length)],32,"r",!1,!0));var f=.5*P.w,h=.5*u-.5*f,v=.9*l;r.line2Poly(h,v-4,h,v+4,d,1),r.line2Poly(h+f,v-4,h+f,v+4,d,1),r.line2Poly(h,v-4,h+f,v-4,d,1),r.line2Poly(h,v+4,h+f,v+4,d,1),r.line2Poly(h+2,v,h+f*s-2,v,d,2),r.addToColorMap(p,d,1,1,1,1),r.drawColorMap(p,d,a.default(a.GLctx.Vertices,c),c);var g=s>.95?a.default(a.GLctx.TextureDist,c):a.default(a.GLctx.Texture,c);n.default.addGL(c,g,R,.05*u,.95*l,e),n.default.addGL(c,g,O,.95*u-O.w,.95*l,e),n.default.addGL(c,g,C,.5*u-.5*C.w,.95*l,e),d=[],p=[],c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA),r.fillPoly(u,0,0,u,l,d);var y=s<.5?T.map(s,0,.1,0,1,!0,!0):T.map(s,.8,1,0,1,!0,!1);r.addToColorMap(p,d,0,0,0,y),r.drawColorMap(p,d,a.default(a.GLctx.Vertices,c),c),c.blendFunc(c.ONE,c.ONE),g=s>.9||s<.03?a.default(a.GLctx.TextureDist,c):a.default(a.GLctx.Texture,c);var m=s>.94;n.default.addGL(c,g,s>.94?G:P,.5*u-.5*(m?G.w:P.w),l*(m?.45:.06),e)}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(37),r(8),r(3),r(0),r(41),r(4),r(20),r(25),r(15)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function(e){var t=e.SW,r=e.SH;e.SX=e.game.player[0].pos.x-.66*t,e.SY=e.game.player[0].pos.y-.5*r};t.default={camera:d,splash:null,assert:function(e){var t=e.game;return t.player[0]&&t.spaceSnake[0]&&A.distanceBetween(t.player[0],t.spaceSnake[0].segments[t.spaceSnake[0].segments.length-1])<400&&(t.player[0].keyCodes.AUX_ABILITY=!0),!1},init:function(e){var t=e.game,n=e.SW,o=e.SH,i=r.createShip(e,{life:2e3});t.player.push(i),i.angle+=.9*Math.PI,a.default(t.player,n+250,o,.3*n,.3*o),t.spaceSnake=s.default(e,1,i.pos.x+.4*n,i.pos.y+200,Math.round(14+6*Math.random())),t.spaceSnake[0].restPos=i.pos.clone();for(var p=0;p<220;p++)u.default(e),l.default(e),i.keyCodes.DOWN=10===p,t.player[0]&&t.spaceSnake[0]&&A.distanceBetween(t.player[0],t.spaceSnake[0].segments[t.spaceSnake[0].segments.length-1])<400&&(t.player[0].keyCodes.AUX_ABILITY=!0);i.keyCodes.UP=!0,c.default().gui.step=0,d(c.default().gui),u.default(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),a=(e.game,1.3*o.TEXT_SIZE_MEDIUM),s=n.default.create("USE ",a,"w"),A=n.default.create("ELECTROBASTARD RAY ",a,"r"),u=n.default.create("TO STUN",a,"w"),l=n.default.create("BIOLOGIAL ENEMIES [SPACE SNAKES]",a,"w"),c=i.default(i.GLctx.Texture,t);n.default.addListGL(t,c,[s,A,u],100,r-400,e),n.default.addGL(t,c,l,100,r-400+a,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(37),r(8),r(34),r(3),r(0),r(41),r(50),r(11),r(9),r(20),r(25),r(15),r(36),r(13),r(28),r(43)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f,h,v,g,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var m=function(e){var t=e.SW,r=e.SH;e.SX=e.game.player[0].pos.x-.5*t,e.SY=e.game.player[0].pos.y-.7*r};t.default={camera:m,splash:null,assert:function(e){var t,r=e.game;if(r.clock>100&&(e.step=0),r.enemies.length<8){var n=c.default(e);if(n){var o=l.createEnemies(e,1);a.default(o,n.pos.x-900,n.pos.y-900,1800,1800),(t=r.enemies).push.apply(t,o)}}return!1},init:function(e){var t=e.game,n=(e.SW,e.SH,e.WW),i=e.WH,s=r.createShip(e,{life:2e3});s.weapons=g.createDefaultShipWeapons(s.guid,s.type,[30,50]),y.addAbilityToShip(s,y.createAbility(10)),y.addAbilityToShip(s,y.createAbility(4)),t.player.push(s),s.angle+=.9*Math.PI,s.pos.x=.7*n,s.pos.y=.7*i;var c=u.default(e,380,s.pos.clone(),"GENESIS",{life:0});c.cannons.forEach(function(e){return v.__LifeFixedValueSet(e,150+150*Math.random())}),v.__LifeFixedValueSet(c.centerNoneCannon,320),t.spacePorts.push(c),t.enemies=l.createEnemies(e,8),t.spaceSnake=A.default(e,1,s.pos.x+700,s.pos.y+200),t.spaceSpiders=h.default(e,1),a.default(t.spaceSpiders,s.pos.x-900,s.pos.y-900,1800,1800),t.spaceSquids=o.default(e,2),t.spaceSquids[0].pos.x=s.pos.x-800,t.spaceSquids[1].pos.x=s.pos.x+800,t.spaceSquids[0].pos.y=s.pos.y-600,t.spaceSquids[1].pos.y=s.pos.y+600,a.default(t.enemies,s.pos.x-900,s.pos.y-900,1800,1800);for(var x=0;x<120;x++)d.default(e),p.default(e),s.keyCodes.PRIMARY_WEAPON=10===x||90===x,x>80&&(Math.random()>.8?s.keyCodes.SECONDARY_WEAPON=!0:s.keyCodes.SECONDARY_WEAPON=!1);s.keyCodes.STRAFELEFT=!0,f.default().gui.step=0,m(f.default().gui),d.default(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),a=(e.game,1.3*i.TEXT_SIZE_MEDIUM),o=n.default.create("SPACEPORTS ",a,"g"),A=n.default.create("CAN BE A SAFE HAVEN",a,"w"),u=n.default.create("BUT DONT STAY TOO LONG",a,"w"),l=s.default(s.GLctx.Texture,t);n.default.addListGL(t,l,[o,A],100,r-400,e),n.default.addGL(t,l,u,100,r-400+a,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(37),r(8),r(3),r(0),r(9),r(169),r(15),r(19),r(20),r(25)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=function(e){var t=e.SW,r=e.SH,a=u.default().engine;a.SX=e.SX=e.game.player[0].pos.x-.5*t,a.SY=e.SY=e.game.player[0].pos.y-.5*r};t.default={camera:p,splash:null,assert:function(e){return!1},init:function(e){var t=e.game,n=e.SW,o=e.SH,i=e.WW,f=e.WH,h=r.createShip(e,{life:2e3});t.player.push(h),h.angle+=.9*Math.PI,h.pos.x=.7*i,h.pos.y=.7*f,t.asteroids=l.default(e,12,10,20),a.default(t.asteroids,h.pos.x-1e3,h.pos.y-1e3,2e3,2e3),t.spaceBats=A.default(e,400),a.default(t.spaceBats,h.pos.x-500,h.pos.y-500,500,500),u.default().gui.SX=e.SX=e.game.player[0].pos.x-.5*n,u.default().gui.SY=e.SY=e.game.player[0].pos.y-.5*o;for(var v=0;v<220;v++){c.default(e),d.default(e);var g=s.default(e);g.keyCodes.PRIMARY_WEAPON=150===v,g&&(t.clock>5e3?g.keyCodes.UP=Math.random()>.4:t.clock>3e3?g.keyCodes.UP=Math.random()>.85:g.keyCodes.UP=Math.random()>.8)}h.keyCodes.UP=!0,u.default().gui.step=0,p(u.default().gui),c.default(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),a=(e.game,1.3*o.TEXT_SIZE_MEDIUM),s=n.default.create("IF YOU GET CAUGHT BY ",a,"w"),A=n.default.create("SPACEBATS",a,"r"),u=n.default.create("GET THE FUCK OUT OF THERE",a,"w"),l=i.default(i.GLctx.Texture,t);n.default.addListGL(t,l,[s,A],100,r-400,e),n.default.addGL(t,l,u,100,r-400+a,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(8),r(3),r(0),r(15),r(20),r(25),r(26)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){var t=e.SW,r=e.SH,a=i.default().engine;a.SX=e.SX=e.game.player[0].pos.x-.5*t,a.SY=e.SY=e.game.player[0].pos.y-.5*r};t.default={camera:l,splash:null,assert:function(e){return!1},init:function(e){var t=e.game,a=e.SW,n=e.SH,o=(e.WW,e.WH,r.createShip(e,{life:2e3}));o.angle=1.1*Math.PI,t.player.push(o);var c=t.spaceFog.filter(function(e){return!e.fire})[0];o.pos.x=c.x+500,o.pos.y=c.y,i.default().gui.SX=e.SX=e.game.player[0].pos.x-.5*a,i.default().gui.SY=e.SY=e.game.player[0].pos.y-.5*n,i.default().gui.step=1;for(var d=0;d<35;d++)d>30&&(s.default(e),A.default(e)),u.default(i.default().gui);o.keyCodes.UP=!0,i.default().gui.step=0,l(i.default().gui),s.default(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),i=(e.game,1.3*n.TEXT_SIZE_MEDIUM),s=a.default.create("THE DARK ",i,"w"),A=a.default.create("SPACEFOG",i,"r"),u=a.default.create("IS NOT DANGEREOUS, BUT ENEMIES MIGHT HIDE",i,"w"),l=o.default(o.GLctx.Texture,t);a.default.addListGL(t,l,[s,A],100,r-400,e),a.default.addGL(t,l,u,100,r-400+i,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(8),r(3),r(0),r(15),r(20),r(25),r(26)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){var t=e.SW,r=e.SH,a=i.default().engine;a.SX=e.SX=e.game.player[0].pos.x-.5*t,a.SY=e.SY=e.game.player[0].pos.y-.5*r};t.default={camera:l,splash:null,assert:function(e){return!1},init:function(e){var t=e.game,a=e.SW,n=e.SH,o=(e.WW,e.WH,r.createShip(e,{life:2e3}));o.angle=.1*Math.PI,t.player.push(o);var c=t.spaceFog.filter(function(e){return e.fire})[0];o.pos.x=c.x-400,o.pos.y=c.y-200,i.default().gui.SX=e.SX=e.game.player[0].pos.x-.5*a,i.default().gui.SY=e.SY=e.game.player[0].pos.y-.5*n,i.default().gui.step=1;for(var d=0;d<35;d++)d>30&&(s.default(e),A.default(e)),u.default(i.default().gui);o.keyCodes.UP=!0,i.default().gui.step=0,l(i.default().gui),s.default(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),i=(e.game,1.3*n.TEXT_SIZE_MEDIUM),s=a.default.create("THE ",i,"w"),A=a.default.create("SPACE FIRE",i,"b"),u=a.default.create("WILL DAMAGE YOUR SHIP",i,"w"),l=o.default(o.GLctx.Texture,t);a.default.addListGL(t,l,[s,A],100,r-400,e),a.default.addGL(t,l,u,100,r-400+i,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(37),r(8),r(3),r(0),r(15),r(19),r(20),r(25),r(26),r(80),r(54),r(28)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={camera:function(e){var t=e.SW,r=e.SH,a=s.default().engine;a.SX=e.SX=e.game.player[0].pos.x-.5*t,a.SY=e.SY=e.game.player[0].pos.y-.5*r},splash:null,assert:function(e){return!1},init:function(e){var t=e.game,n=e.SW,o=e.SH,i=(e.WW,e.WH,r.createShip(e,{life:2e3}));i.angle=1.1*Math.PI,t.player.push(i),i.pos.x=6e3,i.pos.y=6e3;var h=f.createWeapon(41,i.guid,i.type);p.createProximityMineFromShip(i,e,h),t.asteroids=A.default(e,30,100,150),a.default(t.asteroids,i.pos.x-1e3,i.pos.y-1e3,2e3,2e3),t.asteroids.forEach(function(t){return Math.random()>.5&&d.removeAsteroid(t,e,i)}),s.default().gui.SX=e.SX=e.game.player[0].pos.x-.5*n,s.default().gui.SY=e.SY=e.game.player[0].pos.y-.5*o,s.default().gui.step=1;for(var v=0;v<165;v++)i.keyCodes.DOWN=v%2==0,u.default(e),l.default(e);c.default(s.default().gui),i.keyCodes.UP=!0,s.default().gui.step=0},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),a=(e.game,1.3*o.TEXT_SIZE_MEDIUM),s=n.default.create("BLOW UP ASTEROIDS TO GET ",a,"w"),A=n.default.create("POWERUPS",a,"g"),u=n.default.create("BUT BEWARE OF THE ",a,"w"),l=n.default.create("SPACE PARASITES ",a,"r"),c=i.default(i.GLctx.Texture,t);n.default.addListGL(t,c,[s,A],100,r-400,e),n.default.addListGL(t,c,[u,l],100,r-400+a,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(8),r(3),r(0),r(15),r(63),r(2),r(132)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=null;t.default={camera:function(){},splash:null,assert:function(){return!1},init:function(e){(l=r.createShip(e)).angle=-.17*Math.PI,l.pos.x=.7*e.SW+1e3,l.pos.y=.5*e.SH+1e3,l.keyCodes.TOGGLE_PRIMARY_ABILITY=!0;var t=i.default().gui;e.step=t.step=0,e.SX=t.SX=1e3,e.SY=t.SY=1e3},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=e.SH,i=[],c=[];l.keyCodes.TOGGLE_PRIMARY_ABILITY=!0,l.keyCodes.UP=!0;u.drawPlayerShipThrust(l,e,14),s.default(e.game.zoomTXinverted,l,e.SX,e.SY,i,c,null,14),A.drawColorMap(c,i,o.default(o.GLctx.Vertices,t),t);var d=1.3*n.TEXT_SIZE_MEDIUM,p=a.default.create("TAKE CARE OF YOUR ",d,"w"),f=a.default.create("SHIP",d,"g"),h=a.default.create("AND IT WILL TAKE CARE OF YOU",d,"w"),v=o.default(o.GLctx.Texture,t);a.default.addListGL(t,v,[p,f],100,r-400,e),a.default.addGL(t,v,h,100,r-400+d,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(8),r(3),r(0),r(15),r(26),r(130),r(74),r(75),r(22)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=null,d=function(e){for(var t=e.SX+.4*e.SW,r=e.SY+.3*e.SH,a=0;a<26;a+=2)u.default(e,8*a,700-a,t+a*a*.8+20,r+.5*a+50,1,.1,.1,1-.01*a,"Enable",16+4*a,0,300)};t.default={camera:function(){},splash:null,assert:function(){return!1},init:function(e){var t=e.SW,r=e.SH,a=o.default().gui;e.SX=a.SX=1e3,e.SY=a.SY=1e3,e.game.spaceFog=[],c=s.createRagdoll(e.SX+.4*t,e.SY+.5*r,6);var n=e.SX+.4*t,A=e.SY+.3*r;i.default(a);for(var u=0;u<50;u++){var l=c.links.filter(function(e){return 0===e.type})[0];l.p0.x=n,l.p0.y=A,l.p1.x=n+10,l.p1.y=A+100,c.anim(1)}d(a),e.step=a.step=0},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,o=e.SH;d(e);var i=c.links.filter(function(e){return 0===e.type})[0];l.Glow(i.p0,.3,[],e,.1,0,0,1),A.drawRagdoll(e,c,36,1,.15,.15,.15);var s=1.3*a.TEXT_SIZE_MEDIUM,u=r.default.create("SPACE CAN BE A CRUEL ",s,"w"),p=r.default.create("MISTRESS",s,"r"),f=r.default.create("LIVE TO FIGHT ANOTHER DAY",s,"w"),h=n.default(n.GLctx.Texture,t);r.default.addListGL(t,h,[u,p],100,o-400,e),r.default.addGL(t,h,f,100,o-400+s,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(37),r(8),r(3),r(0),r(4),r(20),r(25),r(15),r(36),r(13),r(28),r(43)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=function(e){var t=e.SW,r=e.SH;e.SX=e.game.player[0].pos.x-.66*t,e.SY=e.game.player[0].pos.y-.5*r};t.default={camera:h,splash:null,assert:function(e){var t=e.game;return t.player[0]&&t.spaceSpiders[0]&&s.distanceBetween(t.player[0],t.spaceSpiders[0])<800&&(t.player[0].targetLock=t.spaceSpiders[0],t.player[0].keyCodes.PRIMARY_WEAPON=!0),!1},init:function(e){var t=e.game,n=e.SW,o=e.SH,i=r.createShip(e,{life:2e3});i.abilities=f.createDefaultShipAbilitys([10,4]),i.weapons=p.createDefaultShipWeapons(i.guid,i.type,[50]),t.player.push(i),a.default(t.player,n+250,o,.3*n,.3*o),e.SX=t.player[0].pos.x,e.SY=t.player[0].pos.y,t.spaceSpiders=c.default(e,1,i.pos.x-.3*n,i.pos.y-20,null,null,{life:50}),i.angle=Math.PI,t.spaceSpiders[0].restPos=i.pos.clone();for(var v=0;v<22;v++){if(i.targetLock=t.spaceSpiders[0],i.abilities.values.energy<1e3){i.abilities.values.energy+=35;var g=i.abilities.passive.find(function(e){return 6===e.type});g&&(g.value.n=g.value.max)}e.game.player[0]&&(e.SX=e.game.player[0].pos.x-.66*n,e.SY=e.game.player[0].pos.y-.5*o),A.default(e),u.default(e),t.player[0]&&t.spaceSpiders[0]&&(d.__LifeFixedValueSet(t.spaceSpiders[0],250),s.distanceBetween(t.player[0],t.spaceSpiders[0])<800&&(i.targetLock=t.spaceSpiders[0],t.player[0].keyCodes.PRIMARY_WEAPON=!0))}i.keyCodes.UP=!0,l.default().gui.step=0,h(l.default().gui),A.default(e),i.targetLock=t.spaceSpiders[0],t.player[0].keyCodes.PRIMARY_WEAPON=!0,t.player[0].keyCodes.SECONDARY_WEAPON=!0,t.player[0].keyCodes.AUX_WEAPON=!0},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),a=(e.game,1.3*o.TEXT_SIZE_MEDIUM),s=n.default.create("USE ",a,"w"),A=n.default.create("ELECTROBASTARD RAY ",a,"r"),u=n.default.create("TO STUN",a,"w"),l=n.default.create("BIOLOGIAL ENEMIES [SPACE SPIDERS]",a,"w"),c=i.default(i.GLctx.Texture,t);n.default.addListGL(t,c,[s,A,u],100,r-400,e),n.default.addGL(t,c,l,100,r-400+a,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(8),r(3),r(0),r(15),r(19),r(37),r(26),r(20),r(50),r(1),r(36),r(13)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={camera:function(){},splash:null,assert:function(){return!1},init:function(e){e.SX,e.SY;var t=e.SW,a=e.SH,n=r.createShip(e,{life:1});e.game.player[0]=n,n.angle=-.17*Math.PI,e.game.anomalyPairs=[],e.game.spaceFog=[],e.game.anomlies=[],n.pos.x=.55*e.SW+1e3,n.pos.y=.45*e.SH+1e3,n.keyCodes.UP=!0,e.game.asteroids=s.default(e,40,8,20),A.default(e.game.asteroids,1e3,1e3,t,a),e.game.spaceSpiders=p.default(e,1,n.pos.x+200,n.pos.y+500);var o=c.default(e,400,new d.Vector(n.pos.x+.8*t,n.pos.y+200),"AURIGA",{life:100});e.game.spacePorts=[o];var h=i.default().gui;n.SX=e.SX=h.SX=1e3,n.SY=e.SY=h.SY=1e3;for(var v=0;v<10;v++)f.__LifeFixedValueSet(n,13),l.default(e),f.__LifeFixedValueSet(n,7),n.remove=!1;u.default(h),e.step=h.step=0},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=e.SH,i=1.3*n.TEXT_SIZE_MEDIUM,s=a.default.create("IF YOUR SHIP POWER IS ",i,"w"),A=a.default.create("LOW",i,"r"),u=a.default.create("FIND A SPACEPORT TO REPAIR YOUR SHIP",i,"w"),l=o.default(o.GLctx.Texture,t);a.default.addListGL(t,l,[s,A],100,r-400,e),a.default.addGL(t,l,u,100,r-400+i,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(8),r(3),r(0),r(1),r(11),r(15),r(20),r(25),r(26),r(111),r(28)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=function(e){var t=e.SW,r=e.SH,a=A.default().engine;a.SX=e.SX=e.game.player[0].pos.x-.3*t,a.SY=e.SY=e.game.player[0].pos.y-.3*r};t.default={camera:f,splash:null,assert:function(e){return!1},init:function(e){var t,a=e.game,n=(e.SW,e.SH,e.WW,e.WH,r.createShip(e,{life:2e3}));n.angle=Math.PI,a.player.push(n),n.pos.x=6e3,n.pos.y=6e3;for(var o=new i.Vector(200,0),h=new i.Vector(450,0),v=0;v<8;v++)o.setAngle(1.3*-Math.PI+.3*v),h.setAngle(1.3*-Math.PI+.3*v),n.angle=Math.PI+.3*v,n.pos.x=6e3-o.x,n.pos.y=6e3-o.y,h.addXY(6e3,6e3),d.createSpaceTurret(n,e,p.createWeapon(43,n.guid)),a.spaceTurrets[a.spaceTurrets.length-1].bullets-=Math.ceil(100*Math.random()+v);for(v=0;v<12;v++)(t=a.enemies).push.apply(t,s.createEnemies(e,1,{pos:new i.Vector(7200-100*v,5400+100*v)}));n.pos.x=6100,n.pos.y=6100,n.angle=.4*Math.PI,A.default().gui.step=1;for(v=0;v<110;v++)u.default(e),l.default(e);c.default(A.default().gui),A.default().gui.step=0,f(A.default().gui),u.default(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),i=(e.game,1.3*n.TEXT_SIZE_MEDIUM),s=a.default.create("SET UP SPACE TURRETS TO ",i,"w"),A=a.default.create("DEFEND",i,"g"),u=a.default.create("PARTS OF ",i,"w"),l=a.default.create("SPACE",i,"r"),c=o.default(o.GLctx.Texture,t);a.default.addListGL(t,c,[s,A],100,r-400,e),a.default.addListGL(t,c,[u,l],100,r-400+i,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(37),r(8),r(3),r(0),r(1),r(11),r(15),r(19),r(20),r(25),r(26),r(54),r(28)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var v=function(e){var t=e.SW,r=e.SH,a=u.default().engine;a.SX=e.SX=e.game.player[0].pos.x-.3*t,a.SY=e.SY=e.game.player[0].pos.y-.3*r};t.default={camera:v,splash:null,assert:function(){return!1},init:function(e){var t,n=e.game,o=r.createShip(e,{life:2e3});o.angle=Math.PI,n.player.push(o),o.pos.x=6e3,o.pos.y=6e3,e.game.asteroids=l.default(e,30),a.default(e.game.asteroids,4e3,4e3,4e3,4e3);for(var i=h.createWeapon(41,o.guid,o.type),g=new s.Vector(200,0),y=new s.Vector(450,0),m=0;m<8;m++)g.setAngle(1.3*-Math.PI+.3*m),y.setAngle(1.3*-Math.PI+.3*m),o.angle=Math.PI+.3*m,o.pos.x=6e3-g.x,o.pos.y=6e3-g.y,y.addXY(6e3,6e3),f.createProximityMineFromShip(o,e,i);for(m=0;m<12;m++)(t=n.enemies).push.apply(t,A.createEnemies(e,1,{pos:new s.Vector(7500-100*m,5400+100*m)}));o.pos.x=6100,o.pos.y=6100,o.angle=.4*Math.PI,u.default().gui.step=1;for(m=0;m<50;m++)c.default(e),d.default(e);p.default(u.default().gui),u.default().gui.step=0,v(u.default().gui),c.default(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=e.SH,a=1.3*o.TEXT_SIZE_MEDIUM,s=n.default.create("PROXIMITYMINES WILL ENGAGE WHEN IN ",a,"w"),A=n.default.create("RANGE",a,"g"),u=n.default.create("THE BLAST WILL DAMAGE ANYTHING ",a,"w"),l=n.default.create("IN CLOSE PROXIMITY ",a,"r"),c=i.default(i.GLctx.Texture,t);n.default.addListGL(t,c,[s,A],100,r-400,e),n.default.addListGL(t,c,[u,l],100,r-400+a,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o=this&&this.__spreadArray||function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e};a=[r,t,r(8),r(3),r(0),r(50),r(1),r(11),r(15),r(20),r(25),r(26),r(52)],void 0===(n=function(e,t,r,a,n,i,s,A,u,l,c,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=function(e){var t=e.SW,r=e.SH,a=u.default().engine;a.SX=e.SX=e.game.npcs[0].pos.x-.3*t,a.SY=e.SY=e.game.npcs[0].pos.y-.3*r};t.default={camera:f,splash:null,assert:function(){return!1},init:function(e){var t=e.game,r=e.WW,a=e.WH,n=i.default(e,380,new s.Vector(.7*e.WW,.1*e.WH),"GENESIS",{life:100});t.spacePorts=[n];var h=p.default(Math.random,.6*r,.5*a,250);t.rockFormations=h.rockFormations,t.rockFormationSystemRadius=[h.rfSystem],t.npcs=o([],A.createNPCs(e,1,{},0)),t.npcs.map(function(e){return e.miningRig.target=t.rockFormations[t.rockFormations.length-1]}),t.npcs.map(function(e){return e.pos.setFromVec(e.miningRig.target.pos)});var v=0;for(u.default().gui.step=1;4!==t.npcs[0].miningRig.armState&&v<500;)v++,l.default(e),c.default(e);t.npcs[0].miningRig.armState=4,d.default(u.default().gui),u.default().gui.step=0,f(u.default().gui),l.default(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,o=e.SH,i=1.3*a.TEXT_SIZE_MEDIUM,s=r.default.create("PROTECT THE ",i,"w"),A=r.default.create("WORKERS.",i,"g"),u=r.default.create("AND THEY WILL PROTECT THE ",i,"w"),l=r.default.create("SPACEPORTS.",i,"g"),c=n.default(n.GLctx.Texture,t);r.default.addListGL(t,c,[s,A],100,o-400,e),r.default.addListGL(t,c,[u,l],100,o-400+i,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(8),r(34),r(3),r(0),r(15),r(20),r(25),r(26)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){var t=e.SW,r=e.SH,a=s.default().engine;a.SX=e.SX=e.game.player[0].pos.x-.3*t,a.SY=e.SY=e.game.player[0].pos.y-.3*r};t.default={camera:c,splash:null,assert:function(){return!1},init:function(e){var t=e.game,a=r.createShip(e,{life:2e3});a.angle=Math.PI,t.player.push(a),a.pos.x=6e3,a.pos.y=6e3,a.angle+=Math.PI;var o=n.default(e,1,6500,6e3,390,{x:6e3,y:6e3},{life:1,infected:!0})[0];t.spaceSquids=[o],s.default().gui.step=1,s.default().engine.step=1;for(var i=0;i<60;i++)Math.random()>.9?a.keyCodes.AUX_WEAPON=!0:a.keyCodes.AUX_WEAPON=!1,A.default(e),u.default(e);l.default(s.default().gui),s.default().gui.step=0,c(s.default().gui),A.default(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=e.SH,n=1.3*o.TEXT_SIZE_MEDIUM,s=a.default.create("WATCH OUT FOR",n,"w"),A=a.default.create("SPACE PARASITES",n,"r"),u=a.default.create("THEY MIGHT HIDE IN ",n,"w"),l=a.default.create("SPACE BEASTS",n,"r"),c=i.default(i.GLctx.Texture,t);a.default.addListGL(t,c,[s,A],100,r-400,e),a.default.addListGL(t,c,[u,l],100,r-400+n,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(8),r(34),r(3),r(0),r(20),r(25),r(15),r(11),r(54),r(19),r(1),r(28)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={camera:function(e){e.SW,e.SH},splash:null,assert:function(e){e.game;return!1},init:function(e){var t=e.game,a=(e.SW,e.SH,e.WW,e.WH,r.createShip(e,{life:2e3}));t.player.push(a),a.angle+=.2*Math.PI,a.pos.set(5400,5e3),e.SX=a.pos.x,e.SY=a.pos.y;var o=l.createDestroyer(e);t.destroyers.push(o),o.angle-=.33*Math.PI,t.anomlies=[{type:12,pos:new p.Vector(7e3,6e3),positive:!1,effect:8,radius:510,spawnParticles:!1,seedKey:0}],o.pos.set(5400,5430),o.radarAngle=Math.random()*Math.PI;var i=d.default(e,1,null,null,{type:61})[0];i.radius=30,i.pos.setFromVec(o.pos),i.pos.x-=210,i.pos.y-=180,e.game.asteroids.push(i);var h=n.default(e,1,6300,5300,140)[0];h.restPos.setFromVec(a.pos.clone()),t.spaceSquids.push(h);for(var v=f.createWeapon(41,a.guid,a.type),g=0;g<92;g++)s.default(e),A.default(e),a.keyCodes.DOWN=22===g,g>89&&(c.createProximityMineFromShip(a,e,v),t.proximityMines[t.proximityMines.length-1].pos.x+=400*(Math.random()-.5),t.proximityMines[t.proximityMines.length-1].pos.y+=400*(Math.random()-.5)),h&&h.pos.set(6600,5300);a.keyCodes.UP=!0,u.default().gui.step=0},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),n=(e.game,1.3*o.TEXT_SIZE_MEDIUM),s=a.default.create("DESTROYERS ",n,"g"),A=a.default.create("HUNT ",n,"w"),u=a.default.create("",n,"r"),l=a.default.create("SPACEBEASTS",n,"r"),c=i.default(i.GLctx.Texture,t);a.default.addListGL(t,c,[s,A,u],100,r-400,e),a.default.addGL(t,c,l,100,r-400+n,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(8),r(3),r(0),r(15),r(19),r(20),r(25),r(26)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={camera:function(e){var t=e.SW,r=e.SH,a=i.default().engine;a.SX=e.SX=e.game.player[0].pos.x-.5*t,a.SY=e.SY=e.game.player[0].pos.y-.5*r},splash:null,assert:function(e){return!1},init:function(e){var t,a=e.game,n=e.SW,o=e.SH,c=(e.WW,e.WH,r.createShip(e,{life:2e3}));c.angle=1.1*Math.PI,a.player.push(c),c.pos.x=6e3,c.pos.y=6e3,a.asteroids=[],(t=a.asteroids).push.apply(t,s.createAsteroidBelt(Math.random,6e3,6250,3e3,.1*Math.PI,.01*Math.PI,10,90,216).asteroids),i.default().gui.SX=e.SX=e.game.player[0].pos.x-.8*n,i.default().gui.SY=e.SY=e.game.player[0].pos.y-.8*o,i.default().gui.step=1;for(var d=0;d<165;d++)A.default(e),u.default(e);l.default(i.default().gui),i.default().gui.step=0},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),i=(e.game,1.3*n.TEXT_SIZE_MEDIUM),s=a.default.create("A CHARGE ",i,"g"),A=a.default.create("IS A GOOD WAY TO",i,"w"),u=a.default.create("GET OUT OF ",i,"w"),l=a.default.create("ASTEROID BELTS ",i,"r"),c=o.default(o.GLctx.Texture,t);a.default.addListGL(t,c,[s,A],100,r-400,e),a.default.addListGL(t,c,[u,l],100,r-400+i,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(8),r(3),r(0),r(15),r(20),r(25),r(26),r(19),r(28)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function(e){var t=e.SW,r=e.SH,a=i.default().engine;a.SX=e.SX=e.game.player[0].pos.x-.5*t,a.SY=e.SY=e.game.player[0].pos.y-.5*r};t.default={camera:d,splash:null,assert:function(e){return!1},init:function(e){var t=e.game,a=e.SW,n=e.SH,o=(e.WW,e.WH,r.createShip(e,{life:2e3}));o.weapons=c.createDefaultShipWeapons(o.guid,o.type,[26]),o.angle=1.1*Math.PI,t.player.push(o),o.pos.x=6e3,o.pos.y=6e3,t.asteroids.push(l.createSingleAsteroid(240,{x:o.pos.x-600,y:o.pos.y-500},{x:0,y:0},{life:4e3})),i.default().gui.SX=e.SX=e.game.player[0].pos.x-.5*a,i.default().gui.SY=e.SY=e.game.player[0].pos.y-.5*n,i.default().gui.step=1;for(var p=0;p<65;p++)o.keyCodes.PRIMARY_WEAPON=!0,s.default(e),A.default(e);u.default(i.default().gui),i.default().gui.step=0,d(i.default().gui),s.default(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=(e.SW,e.SH),i=(e.game,1.3*n.TEXT_SIZE_MEDIUM),s=a.default.create("THE FLAMETHROWER ",i,"g"),A=a.default.create("CAN BE HANDY WHEN ",i,"w"),u=a.default.create("IT'S ",i,"w"),l=a.default.create("DARK ",i,"r"),c=o.default(o.GLctx.Texture,t);a.default.addListGL(t,c,[s,A],100,r-400,e),a.default.addListGL(t,c,[u,l],100,r-400+i,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(8),r(3),r(0),r(19),r(20),r(1),r(81)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={camera:function(){},splash:null,assert:function(){return!1},init:function(e){e.SX,e.SY,e.SW,e.SH;var t,a,n=r.createShip(e);e.game.player[0]=n,n.angle=.3,n.keyCodes.UP=!0;var o=u.CreateAncient(Math.random,12,0,n.pos.x,n.pos.y,0);e.game.ancients.push(o.ancient),(t=e.game.ancientBlocks).push.apply(t,o.blocks),n.pos.x+=2100;var l=i.default(e,4,10,14,{pos:new A.Vector(n.pos.x+300+100*Math.random(),n.pos.y+50+50*Math.random()),life:3e3});(a=e.game.asteroids).push.apply(a,l),e.game.anomalyPairs=[],e.game.anomlies=[],e.game.spaceFog=[];for(var c=0;c<30;c++)s.default(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=e.SH,i=1.3*n.TEXT_SIZE_MEDIUM,s=a.default.create("THE ANCIENTS OF OUTER SPACE CAN BOTH ",i,"w"),A=a.default.create("GIVE",i,"g"),u=a.default.create("AND TAKE",i,"r"),l=o.default(o.GLctx.Texture,t);a.default.addListGL(t,l,[s,A],100,r-400,e),a.default.addGL(t,l,u,100,r-400+i,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(8),r(3),r(0),r(20),r(81)],void 0===(n=function(e,t,r,a,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={camera:function(){},splash:null,assert:function(){return!1},init:function(e){e.SX,e.SY,e.SW,e.SH;var t,a=r.createShip(e);e.game.player[0]=a,a.angle=.3,a.pos.x=2001,a.pos.y=2e3;var n=s.CreateAncient(Math.random,12,0,a.pos.x,a.pos.y+300,0);e.game.ancients.push(n.ancient),(t=e.game.ancientBlocks).push.apply(t,n.blocks),a.pos.x,e.game.anomalyPairs=[],e.game.anomlies=[],e.game.spaceFog=[];for(var o=0;o<30;o++)i.default(e)},mapSize:function(){return{WW:2e4,WH:2e4}},gui:function(e){var t=e.gl,r=e.SH,i=1.3*n.TEXT_SIZE_MEDIUM,s=a.default.create("CHOOSE YOUR PATH ",i,"w"),A=a.default.create("CAREFULLY",i,"g"),u=o.default(o.GLctx.Texture,t);a.default.addListGL(t,u,[s,A],100,r-400+i,e)}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(1),r(30),r(5),r(133),r(12),r(28),r(43),r(108)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.menuGamePlayerAI=void 0;var c=new a.Vector(0,0),d=0,p=60;t.menuGamePlayerAI=function(e){var t=e.SW,r=e.SH,a=e.game,i=a.player[0];for(var s in i.keyCodes)i.keyCodes[s]=!1;for(var s in i.keyCodes)"STRAFELEFT"!==s&&"STRAFERIGHT"!==s&&"LEFT"!==s&&"RIGHT"!==s&&"TIMEFREEZE"!==s&&"CLOAKED"!==s&&"BOOST"!==s&&"CHARGE"!==s&&"MISSILE"!==s&&"FIRE"!==s&&"FLAMETHROWER"!==s&&"PROXIMITYMINE"!==s&&"SPACEMINE"!==s&&"SPACETURRET"!==s&&"TRACELINE"!==s&&Math.random()>.99&&(i.keyCodes[s]=!0);if(i.damageTaken?(d++,i.keyCodes.AUX_ABILITY=!0,Math.random()>.99&&(Math.random()>.5?i.keyCodes.TOGGLE_SECONDARY_WEAPON=!0:i.keyCodes.TOGGLE_AUX_WEAPON=!0)):d=0,i.coaxialMount&&i.coaxialMount.locked&&(i.keyCodes.PRIMARY_WEAPON=!0),(d>20||p<60)&&(p>0?(p--,i.keyCodes.TOGGLE_PRIMARY_ABILITY=!0):p=60),Math.random(),i.keyCodes.AUX_ABILITY=!1,i.keyCodes.DOWN=!1,i.weapons.all.map(function(e){return e.ammunition.value=2e3}),i.vel.getLength()<2&&(i.stunned||i.damageTaken)){i.keyCodes.TOGGLE_PRIMARY_WEAPON=!0,i.keyCodes.TOGGLE_AUX_ABILITY=!0;var A=Math.random();A>.66?a.proximityMines.length<50&&(i.keyCodes.TOGGLE_SECONDARY_WEAPON=!0):A>.33?a.spaceMines.length<100&&(i.keyCodes.TOGGLE_AUX_WEAPON=!0):a.spaceTurrets.length<60&&(i.keyCodes.PRIMARY_ABILITY=!0)}var u=o.getQuadTreesObj();if(u.All){c.set(i.pos.x,i.pos.y);for(var l=u.queryTreesVec([4,2,3,7,0],c,.5*t,.5*r),f=[],h=0;h<l.length;h++){var v=l[h];4!==v.type&&2!==v.type&&3!==v.type&&7!==v.type&&0!==v.type||f.push(v)}var g=n.default(i,i.angle,f);i.keyCodes.STRAFELEFT=!1,i.keyCodes.STRAFERIGHT=!1,g.avoidanceAngle>0?i.keyCodes.STRAFELEFT=!0:g.avoidanceAngle<0&&(i.keyCodes.STRAFERIGHT=!0),i.avoidance=g,i.vel.add(g.avoidance)}i.damageTaken,i.keyCodes.UP=!0,i.keyCodes.TOGGLE_PRIMARY_ABILITY};new a.Vector(0,0);t.default={gui:null,camera:function(e){},splash:null,assert:function(e){return t.menuGamePlayerAI(e),l.default(e),!1},init:function(e){var t;l.ProceduralDirectorSetup({enemies:25,spacesquids:18,spacesnakes:16,spaceSpiders:10,npcs:30,campingTimeout:2e4,destroyers:1}),e.game.IS_PROCEDURAL=!0,o.SetupQuadTreeRangeType(1),e.game.spaceFog=[],e.game.anomlies=[],e.game.anomalyPairs=[],s.disableMapShift(!0);for(var a=r.createShip(e,{life:400}),n=[26,50,24,27,31],i=0;i<3;i++)A.addWeaponToShip(a,A.createWeapon(n.splice(Math.floor(n.length*Math.random()),1)[0],a.guid,a.type));u.addAbilityToShip(a,u.createAbility(14)),u.addAbilityToShip(a,u.createAbility(0)),u.addAbilityToShip(a,u.createAbility(10)),u.addAbilityToShip(a,u.createAbility(4)),u.addAbilityToShip(a,u.createAbility(15)),a.angle=2*Math.PI*Math.random(),a.pos.x=1e8*(Math.random()-.5),a.pos.y=1e8*(Math.random()-.5),a.SX=a.pos.x+.5*e.game.SW,a.SY=a.pos.y+.5*e.game.SH,e.SX=e.game.SX=a.SX,e.SY=e.game.SY=a.SY,e.game.player.push(a),(t=e.game.drones).push.apply(t,r.createDrones(e,a.pos.clone().addXY(100*Math.random(),100*Math.random()),4,a.guid))},mapSize:function(){return{WW:32e3,WH:32e3}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(11),r(12),r(5),r(40),r(15),r(1),r(10),r(108),r(92),r(28),r(43),r(9),r(88)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=new URLSearchParams(window.location.search).get("frank");t.default={splash:null,gui:function(e){},assert:function(e){try{u.default(e);var t=p.default(e);if(t){if(h){var r=t.weapons.all.find(function(e){return 26===e.type});r&&(r.ammunition.value=2e3);var a=t.weapons.all.find(function(e){return 31===e.type});a&&(a.ammunition.value=2e3);var n=t.weapons.all.find(function(e){return 25===e.type});if(n&&(n.ammunition.value=2e3),t.abilities.values.energy<1e3){t.abilities.values.energy+=35;var o=t.abilities.passive.find(function(e){return 6===e.type});o&&(o.value.n=o.value.max)}}e.game.spaceDust.length}}catch(e){A.LOG_GL_FIXED_FORCED("level9 something went wrong","engine/client error "+e.message)}return!1},init:function(e){var t,A;-1,o.default(e,i.default().gui),e.game.IS_PROCEDURAL=!0,n.SetupQuadTreeRangeType(1),u.ProceduralDirectorSetup({enemies:25,spacesquids:18,spacesnakes:14,spaceSpiders:10,npcs:30,campingTimeout:2e4,destroyers:1}),e.game.spaceFog=[],e.game.anomlies=[],e.game.anomalyPairs=[],a.disableMapShift(!0);var p=r.createShip(e);h&&(p.weapons=c.createDefaultShipWeapons(p.guid,p.type,[26,27,50,31,43,42,32,25,41]),p.abilities=d.createDefaultShipAbilitys([6,10,4,15,11,2,9,1,5,8,3])),p.pos.x=-1200,p.pos.y=-18400,f.createMineField(e,p.pos.x+2e3,p.pos.y,2e3,1e3,Math.random,2),p.angle=2*Math.PI*Math.random();var v=new URLSearchParams(window.location.search);p.pos.x=parseInt(v.get("x"),10)*l.COORD_GUI_HUD_INV||p.pos.x,p.pos.y=parseInt(v.get("y"),10)*l.COORD_GUI_HUD_INV||p.pos.y,null!==v.get("hot")&&(p.weapons=c.createDefaultShipWeapons(p.guid,p.type,[26,30,31,32,50]),p.abilities=d.createDefaultShipAbilitys([6,10,4,11,2,9])),e.game.continueState&&(p.credits=e.game.continueState.credits,p.pos.x=e.game.continueState.pos.x,p.pos.y=e.game.continueState.pos.y,p.abilities=d.createDefaultShipAbilitys(e.game.continueState.abilities),p.weapons=c.createDefaultShipWeapons(p.guid,p.type,e.game.continueState.weapons)),e.game.player.push(p),(t=e.game.drones).push.apply(t,r.createDrones(e,p.pos.clone().addXY(100,0),2,p.guid));var g=r.createNPCs(e,1,{pos:new s.Vector(-4100,100)},-1);(A=e.game.npcs).push.apply(A,g)},mapSize:function(){return{WW:2e4,WH:2e4}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(12),r(1),r(15),r(5),r(115),r(9),r(10),r(52),r(11),r(50),r(40),r(2),r(60),r(13),r(4)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f,h,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={splash:null,gui:function(e){},assert:function(e){var t=s.default(e),r=(e.game.npcs[0].miningRig,e.game.destroyers[0]),a=e.game.spacePorts[0];if(r||e.game.destroyers.push(l.createDestroyer(e)),r&&a){var n=[];r.life>100&&v.distanceBetweenVectors(r.pos,a.pos)>3e3&&(r.life=550),a.pos.clone().add({x:-1500,y:1500}),A.LOG_GL_FIXED_FORCED(v.distanceBetweenVectors(r.pos,t.pos),"destroyer dist"),A.LOG_GL_FIXED_FORCED(r.life,"destroyer LIFE"),A.LOG_GL_FIXED_FORCED(r.repairing+"","destroyer repairing"),p.line2Poly(a.pos.x,a.pos.y,r.pos.x,r.pos.y,n,2),f.drawExternal({polys:n,autoSXSY:!0}),n=[];try{p.line2Poly(a.pos.x,a.pos.y,e.game.spaceSnake[0].segments[0].pos.x,e.game.spaceSnake[0].segments[0].pos.y,n,2),p.line2Poly(a.pos.x,a.pos.y,e.game.spaceSquids[0].pos.x,e.game.spaceSquids[0].pos.y,n,2),f.drawExternal({polys:n,r:1,g:0,b:0,autoSXSY:!0})}catch(e){}}return!1},init:function(e){var t,s,A;-1,d.default(e,n.default().gui),e.game.IS_PROCEDURAL=!1,o.SetupQuadTreeRangeType(1),e.game.spaceFog=[],e.game.anomlies=[],e.game.anomalyPairs=[],r.disableMapShift(!0);var p=l.createShip(e);p.pos.x=.6*e.WW,p.pos.y=.6*e.WH;var f=c.default(e,500,new a.Vector(p.pos.x,p.pos.y),"ZOEGAS");e.game.spacePorts.push(f),f.cannons[1].life=30,p.angle=2*Math.PI*Math.random(),e.game.player.push(p);var v=i.randWithWhiteHole(98374).rng,g=u.default(v,p.pos.x+3e3,p.pos.y,200);e.game.rockFormationSystemRadius.push(g.rfSystem),(t=e.game.rockFormations).push.apply(t,g.rockFormations),(s=e.game.rockFormationsArcs).push.apply(s,g.rockFormationArcs);var y=l.createDestroyer(e,{pos:new a.Vector(.3*e.WW,.3*e.WH)});h.DamgeItemFixedValue(y,.9*y.life),e.game.destroyers.push(y);for(var m=0;m<8;m++){var x=l.createNPCs(e,1,{pos:new a.Vector(p.pos.x+250*Math.random(),p.pos.y+250*Math.random())},-1);(A=e.game.npcs).push.apply(A,x)}},mapSize:function(){return{WW:2e4,WH:2e4}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(12),r(15),r(5),r(9),r(10),r(11),r(40),r(88),r(85),r(28),r(43),r(19),r(83),r(79)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c,d,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var v=0,g=0;t.default={splash:null,gui:function(e){},assert:function(e){var t,r,a,n;o.default(e);i.LOG_GL_FIXED_FORCED(e.game.minefields.length,"minefields"),i.LOG_GL_FIXED_FORCED(e.game.spaceMines.length,"mines"),i.LOG_GL_FIXED_FORCED(e.game.asteroids.length,"asteroids");for(var s=0,A=0;A<e.game.asteroids.length;A++)s+=e.game.asteroids[A].life;i.LOG_GL_FIXED_FORCED(s.toFixed(1),"asteroid jt. life");var u=e.game.force2[0];(null==u?void 0:u.changing)&&(i.LOG_GL_FIXED_FORCED(((null===(t=u.changing)||void 0===t?void 0:t.currentPositiveMS)/(null===(r=u.changing)||void 0===r?void 0:r.positiveMS)).toFixed(2),"Positive"),i.LOG_GL_FIXED_FORCED(((null===(a=u.changing)||void 0===a?void 0:a.currentNegativeMS)/(null===(n=u.changing)||void 0===n?void 0:n.negativeMS)).toFixed(2),"Negative"),i.LOG_GL_FIXED_FORCED(u.intensity.toFixed(2),"intensity"),i.LOG_GL_FIXED_FORCED(u.radius,"f2 RADIUS"));var l=e.game.minefields[0];if(l?i.LOG_GL_FIXED_FORCED(l.mines.length,"minefield mines"):i.LOG_GL_FIXED_FORCED("N/A","minefield mines"),300===e.frameCnt)for(var c=0;c<30;c++)e.game.parasites.push(h.createParasite(v-200+400*Math.random(),g-200+400*Math.random(),30+10*Math.random(),v,g+2e3));return!1},init:function(e){-1,A.default(e,a.default().gui),e.game.IS_PROCEDURAL=!1,n.SetupQuadTreeRangeType(1),e.game.spaceFog=[],e.game.anomlies=[],e.game.anomalyPairs=[],r.disableMapShift(!0);var t=s.createShip(e);t.weapons=c.createDefaultShipWeapons(t.guid,t.type,[26,27,31,43,42,32,25,24]),t.abilities=d.createDefaultShipAbilitys([6,10,4,15,11,2,9,1,5,8]),t.pos.x=.2*e.WW,t.pos.y=.2*e.WH,t.angle=0,v=t.pos.x,g=t.pos.y,e.game.player.push(t),e.game.spaceMines.push(l.createSpaceMineWoShip(t.pos.x-100,t.pos.y-1e3));for(var o=t.pos.x-500,i=t.pos.y-1500,h=0;h<20;h++)for(var y=0;y<20;y++)(h<8||y<8||h>12||y>12)&&e.game.asteroids.push(p.createSingleAsteroid(8,{x:o+50*h,y:i+50*y},{x:0,y:0}));f.createAnomaly(e,t.pos.x,t.pos.y+1e3,!1,4);var m=t.pos.x,x=t.pos.y+1e3;for(h=0;h<20;h+=2)for(y=0;y<20;y+=2)(h<8||y<8||h>12||y>12)&&e.game.asteroids.push(p.createSingleAsteroid(8+30*Math.random(),{x:m+50*h,y:x+50*y},{x:0,y:0}));u.createMineField(e,t.pos.x+2400,t.pos.y,1e3,700,Math.random,2.1)},mapSize:function(){return{WW:2e4,WH:2e4}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(12),r(1),r(15),r(5),r(9),r(11),r(40),r(19),r(48)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={splash:null,gui:function(e){},assert:function(e){i.default(e);return!1},init:function(e){var t;-1,A.default(e,n.default().gui),e.game.IS_PROCEDURAL=!1,o.SetupQuadTreeRangeType(1),e.game.spaceFog=[],e.game.anomlies=[],e.game.anomalyPairs=[],r.disableMapShift(!0);var i=s.createShip(e);e.game.player.push(i),i.pos.x=.6*e.WW,i.pos.y=.6*e.WH;for(var c=0;c<3;c++)e.game.asteroids.push(u.createSingleAsteroid(30+30*c,new a.Vector(i.pos.x+200*Math.random(),i.pos.y+-150+70*c*2),new a.Vector(0,0)));var d=l.mulberry32(7676),p=u.createAsteroidBelt(d,i.pos.x-1200,i.pos.y,300,2.1,2,30,150,120,1);e.game.asteroids.push(u.createSingleAsteroid(300,{x:i.pos.x+400,y:i.pos.y},{x:0,y:0})),e.game.asteroidBelts.push(p.belt),(t=e.game.asteroids).push.apply(t,p.asteroids)},mapSize:function(){return{WW:2e4,WH:2e4}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n;a=[r,t,r(12),r(15),r(5),r(9),r(10),r(11),r(40),r(41),r(19),r(48)],void 0===(n=function(e,t,r,a,n,o,i,s,A,u,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={splash:null,gui:function(e){},assert:function(e){var t,r=o.default(e);if(i.LOG_GL_FIXED_FORCED(e.game.spaceSnake.length,"snakes"),0===e.game.spaceSnake.length)(t=e.game.spaceSnake).push.apply(t,u.default(e,1,r.pos.x+400,r.pos.y+100));else{var a=e.game.spaceSnake[0];a&&(i.LOG_GL_FIXED_FORCED(a.infected+"","infected"),i.LOG_GL_FIXED_FORCED(a.attackMode+"","attackmode"),i.LOG_GL_FIXED_FORCED(!!a.spasm+"","spasm"))}return!1},init:function(e){var t,o;-1,A.default(e,a.default().gui),e.game.IS_PROCEDURAL=!1,n.SetupQuadTreeRangeType(1),e.game.spaceFog=[],e.game.anomlies=[],e.game.anomalyPairs=[],r.disableMapShift(!0);var i=s.createShip(e);e.game.player.push(i),i.pos.x=.6*e.WW,i.pos.y=.6*e.WH,(t=e.game.spaceSnake).push.apply(t,u.default(e,1,i.pos.x+700,i.pos.y+100));var d=c.mulberry32(7676),p=l.createAsteroidBelt(d,.2*e.WW,.5*e.WH,300,2.1,2,30,150,120,1);e.game.asteroidBelts.push(p.belt),(o=e.game.asteroids).push.apply(o,p.asteroids)},mapSize:function(){return{WW:2e4,WH:2e4}}}}.apply(t,a))||(e.exports=n)},function(e,t,r){var a,n,o;n=[],void 0===(o="function"==typeof(a=function(){"use strict";function e(e,t,r){return(r=r||new Float32Array(3))[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function t(e,t){t=t||new Float32Array(3);var r=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return r>1e-5&&(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r),t}function r(e,t,r){return(r=r||new Float32Array(3))[0]=e[1]*t[2]-e[2]*t[1],r[1]=e[2]*t[0]-e[0]*t[2],r[2]=e[0]*t[1]-e[1]*t[0],r}function a(e,t){const r=e[0]-t[0],a=e[1]-t[1],n=e[2]-t[2];return r*r+a*a+n*n}function n(e,t){t=t||new Float32Array(16);var r=e[0],a=e[1],n=e[2],o=e[3],i=e[4],s=e[5],A=e[6],u=e[7],l=e[8],c=e[9],d=e[10],p=e[11],f=e[12],h=e[13],v=e[14],g=e[15],y=d*g,m=v*p,x=A*g,S=v*u,_=A*p,T=d*u,E=n*g,M=v*o,I=n*p,L=d*o,w=n*u,b=A*o,P=l*h,R=f*c,O=i*h,C=f*s,G=i*c,D=l*s,N=r*h,B=f*a,F=r*c,V=l*a,k=r*s,X=i*a,H=y*s+S*c+_*h-(m*s+x*c+T*h),U=m*a+E*c+L*h-(y*a+M*c+I*h),W=x*a+M*s+w*h-(S*a+E*s+b*h),Y=T*a+I*s+b*c-(_*a+L*s+w*c),q=1/(r*H+i*U+l*W+f*Y);return t[0]=q*H,t[1]=q*U,t[2]=q*W,t[3]=q*Y,t[4]=q*(m*i+x*l+T*f-(y*i+S*l+_*f)),t[5]=q*(y*r+M*l+I*f-(m*r+E*l+L*f)),t[6]=q*(S*r+E*i+b*f-(x*r+M*i+w*f)),t[7]=q*(_*r+L*i+w*l-(T*r+I*i+b*l)),t[8]=q*(P*u+C*p+G*g-(R*u+O*p+D*g)),t[9]=q*(R*o+N*p+V*g-(P*o+B*p+F*g)),t[10]=q*(O*o+B*u+k*g-(C*o+N*u+X*g)),t[11]=q*(D*o+F*u+X*p-(G*o+V*u+k*p)),t[12]=q*(O*d+D*v+R*A-(G*v+P*A+C*d)),t[13]=q*(F*v+P*n+B*d-(N*d+V*v+R*n)),t[14]=q*(N*A+X*v+C*n-(k*v+O*n+B*A)),t[15]=q*(k*d+G*n+V*A-(F*A+X*d+D*n)),t}return{copy:function(e,t){return(t=t||new Float32Array(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},lookAt:function(a,n,o,i){i=i||new Float32Array(16);var s=t(e(a,n)),A=t(r(o,s)),u=t(r(s,A));return i[0]=A[0],i[1]=A[1],i[2]=A[2],i[3]=0,i[4]=u[0],i[5]=u[1],i[6]=u[2],i[7]=0,i[8]=s[0],i[9]=s[1],i[10]=s[2],i[11]=0,i[12]=a[0],i[13]=a[1],i[14]=a[2],i[15]=1,i},addVectors:function(e,t,r){return(r=r||new Float32Array(3))[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r},subtractVectors:e,distance:function(e,t){return Math.sqrt(a(e,t))},distanceSq:a,normalize:t,cross:r,dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},identity:function(e){return(e=e||new Float32Array(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},transpose:function(e,t){return(t=t||new Float32Array(16))[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t},orthographic:function(e,t,r,a,n,o,i){return(i=i||new Float32Array(16))[0]=2/(t-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(a-r),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(n-o),i[11]=0,i[12]=(e+t)/(e-t),i[13]=(r+a)/(r-a),i[14]=(n+o)/(n-o),i[15]=1,i},frustum:function(e,t,r,a,n,o){var i=t-e,s=a-r,A=o-n;return dst[0]=2*n/i,dst[1]=0,dst[2]=0,dst[3]=0,dst[4]=0,dst[5]=2*n/s,dst[6]=0,dst[7]=0,dst[8]=(e+t)/i,dst[9]=(a+r)/s,dst[10]=-(o+n)/A,dst[11]=-1,dst[12]=0,dst[13]=0,dst[14]=-2*n*o/A,dst[15]=0,dst},perspective:function(e,t,r,a,n){n=n||new Float32Array(16);var o=Math.tan(.5*Math.PI-.5*e),i=1/(r-a);return n[0]=o/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(r+a)*i,n[11]=-1,n[12]=0,n[13]=0,n[14]=r*a*i*2,n[15]=0,n},translation:function(e,t,r,a){return(a=a||new Float32Array(16))[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=e,a[13]=t,a[14]=r,a[15]=1,a},translate:function(e,t,r,a,n){n=n||new Float32Array(16);var o=e[0],i=e[1],s=e[2],A=e[3],u=e[4],l=e[5],c=e[6],d=e[7],p=e[8],f=e[9],h=e[10],v=e[11],g=e[12],y=e[13],m=e[14],x=e[15];return e!==n&&(n[0]=o,n[1]=i,n[2]=s,n[3]=A,n[4]=u,n[5]=l,n[6]=c,n[7]=d,n[8]=p,n[9]=f,n[10]=h,n[11]=v),n[12]=o*t+u*r+p*a+g,n[13]=i*t+l*r+f*a+y,n[14]=s*t+c*r+h*a+m,n[15]=A*t+d*r+v*a+x,n},xRotation:function(e,t){t=t||new Float32Array(16);var r=Math.cos(e),a=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=a,t[7]=0,t[8]=0,t[9]=-a,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},yRotation:function(e,t){t=t||new Float32Array(16);var r=Math.cos(e),a=Math.sin(e);return t[0]=r,t[1]=0,t[2]=-a,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=a,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},zRotation:function(e,t){t=t||new Float32Array(16);var r=Math.cos(e),a=Math.sin(e);return t[0]=r,t[1]=a,t[2]=0,t[3]=0,t[4]=-a,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},xRotate:function(e,t,r){r=r||new Float32Array(16);var a=e[4],n=e[5],o=e[6],i=e[7],s=e[8],A=e[9],u=e[10],l=e[11],c=Math.cos(t),d=Math.sin(t);return r[4]=c*a+d*s,r[5]=c*n+d*A,r[6]=c*o+d*u,r[7]=c*i+d*l,r[8]=c*s-d*a,r[9]=c*A-d*n,r[10]=c*u-d*o,r[11]=c*l-d*i,e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},yRotate:function(e,t,r){r=r||new Float32Array(16);var a=e[0],n=e[1],o=e[2],i=e[3],s=e[8],A=e[9],u=e[10],l=e[11],c=Math.cos(t),d=Math.sin(t);return r[0]=c*a-d*s,r[1]=c*n-d*A,r[2]=c*o-d*u,r[3]=c*i-d*l,r[8]=c*s+d*a,r[9]=c*A+d*n,r[10]=c*u+d*o,r[11]=c*l+d*i,e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},zRotate:function(e,t,r){r=r||new Float32Array(16);var a=e[0],n=e[1],o=e[2],i=e[3],s=e[4],A=e[5],u=e[6],l=e[7],c=Math.cos(t),d=Math.sin(t);return r[0]=c*a+d*s,r[1]=c*n+d*A,r[2]=c*o+d*u,r[3]=c*i+d*l,r[4]=c*s-d*a,r[5]=c*A-d*n,r[6]=c*u-d*o,r[7]=c*l-d*i,e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},axisRotation:function(e,t,r){r=r||new Float32Array(16);var a=e[0],n=e[1],o=e[2],i=Math.sqrt(a*a+n*n+o*o),s=(a/=i)*a,A=(n/=i)*n,u=(o/=i)*o,l=Math.cos(t),c=Math.sin(t),d=1-l;return r[0]=s+(1-s)*l,r[1]=a*n*d+o*c,r[2]=a*o*d-n*c,r[3]=0,r[4]=a*n*d-o*c,r[5]=A+(1-A)*l,r[6]=n*o*d+a*c,r[7]=0,r[8]=a*o*d+n*c,r[9]=n*o*d-a*c,r[10]=u+(1-u)*l,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},axisRotate:function(e,t,r,a){a=a||new Float32Array(16);var n=t[0],o=t[1],i=t[2],s=Math.sqrt(n*n+o*o+i*i),A=(n/=s)*n,u=(o/=s)*o,l=(i/=s)*i,c=Math.cos(r),d=Math.sin(r),p=1-c,f=A+(1-A)*c,h=n*o*p+i*d,v=n*i*p-o*d,g=n*o*p-i*d,y=u+(1-u)*c,m=o*i*p+n*d,x=n*i*p+o*d,S=o*i*p-n*d,_=l+(1-l)*c,T=e[0],E=e[1],M=e[2],I=e[3],L=e[4],w=e[5],b=e[6],P=e[7],R=e[8],O=e[9],C=e[10],G=e[11];return a[0]=f*T+h*L+v*R,a[1]=f*E+h*w+v*O,a[2]=f*M+h*b+v*C,a[3]=f*I+h*P+v*G,a[4]=g*T+y*L+m*R,a[5]=g*E+y*w+m*O,a[6]=g*M+y*b+m*C,a[7]=g*I+y*P+m*G,a[8]=x*T+S*L+_*R,a[9]=x*E+S*w+_*O,a[10]=x*M+S*b+_*C,a[11]=x*I+S*P+_*G,e!==a&&(a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a},scaling:function(e,t,r,a){return(a=a||new Float32Array(16))[0]=e,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=t,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=r,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},scale:function(e,t,r,a,n){return(n=n||new Float32Array(16))[0]=t*e[0],n[1]=t*e[1],n[2]=t*e[2],n[3]=t*e[3],n[4]=r*e[4],n[5]=r*e[5],n[6]=r*e[6],n[7]=r*e[7],n[8]=a*e[8],n[9]=a*e[9],n[10]=a*e[10],n[11]=a*e[11],e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},multiply:function(e,t,r){r=r||new Float32Array(16);var a=t[0],n=t[1],o=t[2],i=t[3],s=t[4],A=t[5],u=t[6],l=t[7],c=t[8],d=t[9],p=t[10],f=t[11],h=t[12],v=t[13],g=t[14],y=t[15],m=e[0],x=e[1],S=e[2],_=e[3],T=e[4],E=e[5],M=e[6],I=e[7],L=e[8],w=e[9],b=e[10],P=e[11],R=e[12],O=e[13],C=e[14],G=e[15];return r[0]=a*m+n*T+o*L+i*R,r[1]=a*x+n*E+o*w+i*O,r[2]=a*S+n*M+o*b+i*C,r[3]=a*_+n*I+o*P+i*G,r[4]=s*m+A*T+u*L+l*R,r[5]=s*x+A*E+u*w+l*O,r[6]=s*S+A*M+u*b+l*C,r[7]=s*_+A*I+u*P+l*G,r[8]=c*m+d*T+p*L+f*R,r[9]=c*x+d*E+p*w+f*O,r[10]=c*S+d*M+p*b+f*C,r[11]=c*_+d*I+p*P+f*G,r[12]=h*m+v*T+g*L+y*R,r[13]=h*x+v*E+g*w+y*O,r[14]=h*S+v*M+g*b+y*C,r[15]=h*_+v*I+g*P+y*G,r},inverse:n,transformVector:function(e,t,r){r=r||new Float32Array(4);for(var a=0;a<4;++a){r[a]=0;for(var n=0;n<4;++n)r[a]+=t[n]*e[4*n+a]}return r},transformPoint:function(e,t,r){r=r||new Float32Array(3);var a=t[0],n=t[1],o=t[2],i=a*e[3]+n*e[7]+o*e[11]+e[15];return r[0]=(a*e[0]+n*e[4]+o*e[8]+e[12])/i,r[1]=(a*e[1]+n*e[5]+o*e[9]+e[13])/i,r[2]=(a*e[2]+n*e[6]+o*e[10]+e[14])/i,r},transformDirection:function(e,t,r){r=r||new Float32Array(3);var a=t[0],n=t[1],o=t[2];return r[0]=a*e[0]+n*e[4]+o*e[8],r[1]=a*e[1]+n*e[5]+o*e[9],r[2]=a*e[2]+n*e[6]+o*e[10],r},transformNormal:function(e,t,r){r=r||new Float32Array(3);var a=n(e),o=t[0],i=t[1],s=t[2];return r[0]=o*a[0]+i*a[1]+s*a[2],r[1]=o*a[4]+i*a[5]+s*a[6],r[2]=o*a[8]+i*a[9]+s*a[10],r}}})?a.apply(t,n):a)||(e.exports=o)},function(e,t,r){var a,n;n=this,void 0===(a=function(){return function(){"use strict";var e,t=this;function r(e){t.console&&(t.console.error?t.console.error(e):t.console.log&&t.console.log(e))}function a(e,t,a,n){var o=n||r,i=e.createShader(a);e.shaderSource(i,t),e.compileShader(i);var s=e.getShaderParameter(i,e.COMPILE_STATUS);if(!s){var A=e.getShaderInfoLog(i);return o("*** Error compiling shader '"+i+"':"+A),e.deleteShader(i),null}return i}function n(e,t,a,n,o){var i=o||r,s=e.createProgram();t.forEach(function(t){e.attachShader(s,t)}),a&&a.forEach(function(t,r){e.bindAttribLocation(s,n?n[r]:r,t)}),e.linkProgram(s);var A=e.getProgramParameter(s,e.LINK_STATUS);if(!A){var u=e.getProgramInfoLog(s);return i("Error in program linking:"+u),e.deleteProgram(s),null}return s}function o(e,t,r,n){var o,i="",s=document.getElementById(t);if(!s)throw"*** Error: unknown script element"+t;if(i=s.text,!r)if("x-shader/x-vertex"===s.type)o=e.VERTEX_SHADER;else if("x-shader/x-fragment"===s.type)o=e.FRAGMENT_SHADER;else if(o!==e.VERTEX_SHADER&&o!==e.FRAGMENT_SHADER)throw"*** Error: unknown shader type";return a(e,i,r||o,n)}(e=e||t)===e.top&&(console.log("%c%s","color:blue;font-weight:bold;","for more about webgl-utils.js see:"),console.log("%c%s","color:blue;font-weight:bold;","http://webgl2fundamentals.org/webgl/lessons/webgl-boilerplate.html"));var i=["VERTEX_SHADER","FRAGMENT_SHADER"];return{createProgram:n,createProgramFromScripts:function(e,t,r,a,s){for(var A=[],u=0;u<t.length;++u)A.push(o(e,t[u],e[i[u]],s));return n(e,A,r,a,s)},createProgramFromSources:function(e,t,r,o,s){for(var A=[],u=0;u<t.length;++u)A.push(a(e,t[u],e[i[u]],s));return n(e,A,r,o,s)},resizeCanvasToDisplaySize:function(e,t){t=t||1;var r=e.clientWidth*t|0,a=e.clientHeight*t|0;return(e.width!==r||e.height!==a)&&(e.width=r,e.height=a,!0)}}}.call(n)}.apply(t,[]))||(e.exports=a)},function(e,t,r){
/*!
 * @license twgl.js 4.5.2 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */
"undefined"!=typeof self&&self,e.exports=function(e){function t(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,r){"use strict";t.__esModule=!0,t.copyExistingProperties=function(e,t){Object.keys(t).forEach(function(r){t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&(t[r]=e[r])})},t.copyNamedProperties=function(e,t,r){e.forEach(function(e){var a=t[e];void 0!==a&&(r[e]=a)})},t.isBuffer=function(e,t){return o||(o=e.createBuffer()),t instanceof o.constructor},t.isRenderbuffer=function(e,t){return i||(i=e.createRenderbuffer()),t instanceof i.constructor},t.isShader=function(e,t){return s||(s=e.createShader(e.VERTEX_SHADER)),t instanceof s.constructor},t.isTexture=function(e,t){return A||(A=e.createTexture()),t instanceof A.constructor},t.isSampler=function(e,t){if(!u){if(!e.createSampler)return!1;u=e.createSampler()}return t instanceof u.constructor},t.warn=t.error=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(r(1)),n=a.default.console&&a.default.console.error&&"function"==typeof a.default.console.error?a.default.console.error.bind(a.default.console):function(){};t.error=n;var o,i,s,A,u,l=a.default.console&&a.default.console.warn&&"function"==typeof a.default.console.warn?a.default.console.warn.bind(a.default.console):function(){};t.warn=l},function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var a=void 0!==a?a:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};t.default=a},function(e,t,r){"use strict";t.__esModule=!0,t.getGLTypeForTypedArray=function(e){if(e instanceof Int8Array)return n;if(e instanceof Uint8Array)return o;if(e instanceof Uint8ClampedArray)return o;if(e instanceof Int16Array)return i;if(e instanceof Uint16Array)return s;if(e instanceof Int32Array)return A;if(e instanceof Uint32Array)return u;if(e instanceof Float32Array)return l;throw"unsupported typed array type"},t.getGLTypeForTypedArrayType=function(e){if(e===Int8Array)return n;if(e===Uint8Array)return o;if(e===Uint8ClampedArray)return o;if(e===Int16Array)return i;if(e===Uint16Array)return s;if(e===Int32Array)return A;if(e===Uint32Array)return u;if(e===Float32Array)return l;throw"unsupported typed array type"},t.getTypedArrayTypeForGLType=function(e){var t=c[e];if(!t)throw"unknown gl type";return t},t.isArrayBuffer=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(r(1)),n=5120,o=5121,i=5122,s=5123,A=5124,u=5125,l=5126,c={},d=c;d[n]=Int8Array,d[o]=Uint8Array,d[i]=Int16Array,d[s]=Uint16Array,d[A]=Int32Array,d[u]=Uint32Array,d[l]=Float32Array,d[32819]=Uint16Array,d[32820]=Uint16Array,d[33635]=Uint16Array,d[5131]=Uint16Array,d[33640]=Uint32Array,d[35899]=Uint32Array,d[35902]=Uint32Array,d[36269]=Uint32Array,d[34042]=Uint32Array;var p=a.default.SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof a.default.SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};t.isArrayBuffer=p},function(e,t,r){"use strict";t.__esModule=!0,t.isWebGL1=function(e){return!e.texStorage2D},t.isWebGL2=function(e){return!!e.texStorage2D},t.glEnumToString=void 0;var a=function(){function e(e){var a=e.constructor.name;if(!t[a]){for(var n in e)if("number"==typeof e[n]){var o=r[e[n]];r[e[n]]=o?"".concat(o," | ").concat(n):n}t[a]=!0}}var t={},r={};return function(t,a){return e(t),r[a]||"0x"+a.toString(16)}}();t.glEnumToString=a},function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function n(e,t){return V[t].bindPoint}function o(e,t){return function(r){e.uniform1i(t,r)}}function i(e,t){return function(r){e.uniform1iv(t,r)}}function s(e,t){return function(r){e.uniform2iv(t,r)}}function A(e,t){return function(r){e.uniform3iv(t,r)}}function u(e,t){return function(r){e.uniform4iv(t,r)}}function l(e,t,r,a){var o=n(0,t);return C.isWebGL2(e)?function(t){var n,i;G.isTexture(e,t)?(n=t,i=null):(n=t.texture,i=t.sampler),e.uniform1i(a,r),e.activeTexture(e.TEXTURE0+r),e.bindTexture(o,n),e.bindSampler(r,i)}:function(t){e.uniform1i(a,r),e.activeTexture(e.TEXTURE0+r),e.bindTexture(o,t)}}function c(e,t,r,a,o){for(var i=n(0,t),s=new Int32Array(o),A=0;A<o;++A)s[A]=r+A;return C.isWebGL2(e)?function(t){e.uniform1iv(a,s),t.forEach(function(t,a){var n,o;e.activeTexture(e.TEXTURE0+s[a]),G.isTexture(e,t)?(n=t,o=null):(n=t.texture,o=t.sampler),e.bindSampler(r,o),e.bindTexture(i,n)})}:function(t){e.uniform1iv(a,s),t.forEach(function(t,r){e.activeTexture(e.TEXTURE0+s[r]),e.bindTexture(i,t)})}}function d(e,t){return function(r){r.value?(e.disableVertexAttribArray(t),e.vertexAttrib4fv(t,r.value)):(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||e.FLOAT,r.normalize||!1,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor))}}function p(e,t){return function(r){r.value?(e.disableVertexAttribArray(t),e.vertexAttrib4iv(t,r.value)):(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||e.INT,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor))}}function f(e,t){return function(r){r.value?(e.disableVertexAttribArray(t),e.vertexAttrib4uiv(t,r.value)):(e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||e.UNSIGNED_INT,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor))}}function h(e,t,r){var a=r.size,n=r.count;return function(r){e.bindBuffer(e.ARRAY_BUFFER,r.buffer);for(var o=r.size||r.numComponents||a,i=o/n,s=r.type||e.FLOAT,A=V[s],u=A.size*o,l=r.normalize||!1,c=r.offset||0,d=u/n,p=0;p<n;++p)e.enableVertexAttribArray(t+p),e.vertexAttribPointer(t+p,i,s,l,u,c+d*p),void 0!==r.divisor&&e.vertexAttribDivisor(t+p,r.divisor)}}function v(e,t,r,a){var n=a||N,o=e.createShader(r),i=0;if(H.test(t)&&(i=1,t=t.replace(H,"")),e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var s=e.getShaderInfoLog(o);return n(function(e,t){return t=t||0,++t,e.split("\n").map(function(e,r){return r+t+": "+e}).join("\n")}(t,i)+"\n*** Error compiling shader: "+s),e.deleteShader(o),null}return o}function g(e,t,r){var a;if("function"==typeof t&&(r=t,t=void 0),"function"==typeof e)r=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;var n=e;r=n.errorCallback,e=n.attribLocations,a=n.transformFeedbackVaryings}var o={errorCallback:r||N,transformFeedbackVaryings:a};if(e){var i={};Array.isArray(e)?e.forEach(function(e,r){i[e]=t?t[r]:r}):i=e,o.attribLocations=i}return o}function y(e){return e.indexOf("frag")>=0?X.FRAGMENT_SHADER:e.indexOf("vert")>=0?X.VERTEX_SHADER:void 0}function m(e,t){t.forEach(function(t){e.deleteShader(t)})}function x(e,t,r,a,n){for(var o=g(r,a,n),i=[],s=[],A=0;A<t.length;++A){var u=t[A];if("string"==typeof u){var l=F(u),c=l?l.text:u,d=e[U[A]];l&&l.type&&(d=y(l.type)||d),u=v(e,c,d,o.errorCallback),s.push(u)}G.isShader(e,u)&&i.push(u)}if(i.length!==t.length)return o.errorCallback("not enough shaders for program"),m(e,s),null;var p=e.createProgram();i.forEach(function(t){e.attachShader(p,t)}),o.attribLocations&&Object.keys(o.attribLocations).forEach(function(t){e.bindAttribLocation(p,o.attribLocations[t],t)});var f=o.transformFeedbackVaryings;if(f&&(f.attribs&&(f=f.attribs),Array.isArray(f)||(f=Object.keys(f)),e.transformFeedbackVaryings(p,f,o.transformFeedbackMode||e.SEPARATE_ATTRIBS)),e.linkProgram(p),!e.getProgramParameter(p,e.LINK_STATUS)){var h=e.getProgramInfoLog(p);return o.errorCallback("Error in program linking:"+h),e.deleteProgram(p),m(e,s),null}return p}function S(e,t,r,a){var n="",o=F(t);if(!o)throw"*** Error: unknown script element"+t;n=o.text;var i=r||y(o.type);if(!i)throw"*** Error: unknown shader type";return v(e,n,i,a)}function _(e,t,r,a,n){for(var o=g(r,a,n),i=[],s=0;s<t.length;++s){var A=v(e,t[s],e[U[s]],o.errorCallback);if(!A)return null;i.push(A)}return x(e,i,o)}function T(e){var t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}function E(e,t){for(var r=0,a={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),o=0;o<n;++o){var i=e.getActiveUniform(t,o);if(!T(i)){var s=i.name;"[0]"===s.substr(-3)&&(s=s.substr(0,s.length-3));var A=function(t,a){var n,o=e.getUniformLocation(t,a.name),i=a.size>1&&"[0]"===a.name.substr(-3),s=a.type,A=V[s];if(!A)throw"unknown type: 0x"+s.toString(16);if(A.bindPoint){var u=r;r+=a.size,n=i?A.arraySetter(e,s,u,o,a.size):A.setter(e,s,u,o,a.size)}else n=A.arraySetter&&i?A.arraySetter(e,o):A.setter(e,o);return n.location=o,n}(t,i);a[s]=A}}return a}function M(e,t){for(var r={},a=e.getProgramParameter(t,e.TRANSFORM_FEEDBACK_VARYINGS),n=0;n<a;++n){var o=e.getTransformFeedbackVarying(t,n);r[o.name]={index:n,type:o.type,size:o.size}}return r}function I(e,t,r){for(var a in t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),r.attribs&&(r=r.attribs),r){var n=t[a];if(n){var o=r[a];o.offset?e.bindBufferRange(e.TRANSFORM_FEEDBACK_BUFFER,n.index,o.buffer,o.offset,o.size):e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,n.index,o.buffer)}}}function L(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),a=[],n=[],o=0;o<r;++o){n.push(o),a.push({});var i=e.getActiveUniform(t,o);if(T(i))break;a[o].name=i.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(r){var o=r[0],i=r[1];e.getActiveUniforms(t,n,e[o]).forEach(function(e,t){a[t][i]=e})});for(var s={},A=e.getProgramParameter(t,e.ACTIVE_UNIFORM_BLOCKS),u=0;u<A;++u){var l=e.getActiveUniformBlockName(t,u),c={index:u,usedByVertexShader:e.getActiveUniformBlockParameter(t,u,e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(t,u,e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(t,u,e.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(t,u,e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};c.used=c.usedByVertexSahder||c.usedByFragmentShader,s[l]=c}return{blockSpecs:s,uniformData:a}}function w(e,t,r,a){var n=r.blockSpecs,o=r.uniformData,i=n[a];if(!i)return B("no uniform block object named:",a),{name:a,uniforms:{}};var s=new ArrayBuffer(i.size),A=e.createBuffer(),u=i.index;e.bindBuffer(e.UNIFORM_BUFFER,A),e.uniformBlockBinding(t,i.index,u);var l=a+".";W.test(l)&&(l=l.replace(W,"."));var c={};return i.uniformIndices.forEach(function(e){var t=o[e],r=V[t.type],a=r.Type,n=t.size*r.size,i=t.name;i.substr(0,l.length)===l&&(i=i.substr(l.length)),c[i]=new a(s,t.offset,n/a.BYTES_PER_ELEMENT)}),{name:a,array:s,asFloat:new Float32Array(s),buffer:A,uniforms:c}}function b(e,t,r){var a=t.uniformBlockSpec||t,n=a.blockSpecs[r.name];if(n){var o=n.index;return e.bindBufferRange(e.UNIFORM_BUFFER,o,r.buffer,r.offset||0,r.array.byteLength),!0}return!1}function P(e,t){for(var r={},a=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<a;++n){var o=e.getActiveAttrib(t,n);if(!T(o)){var i=e.getAttribLocation(t,o.name),s=k[o.type],A=s.setter(e,i,s);A.location=i,r[o.name]=A}}return r}function R(e,t){for(var r in t){var a=e[r];a&&a(t[r])}}function O(e,t){var r=E(e,t),a=P(e,t),n={program:t,uniformSetters:r,attribSetters:a};return C.isWebGL2(e)&&(n.uniformBlockSpec=L(e,t),n.transformFeedbackInfo=M(e,t)),n}t.__esModule=!0,t.createAttributeSetters=P,t.createProgram=x,t.createProgramFromScripts=function(e,t,r,a,n){for(var o=g(r,a,n),i=[],s=0;s<t.length;++s){var A=S(e,t[s],e[U[s]],o.errorCallback);if(!A)return null;i.push(A)}return x(e,i,o)},t.createProgramFromSources=_,t.createProgramInfo=function(e,t,r,a,n){var o=g(r,a,n),i=!0;if(t=t.map(function(e){if(e.indexOf("\n")<0){var t=F(e);t?e=t.text:(o.errorCallback("no element with id: "+e),i=!1)}return e}),!i)return null;var s=_(e,t,o);return s?O(e,s):null},t.createProgramInfoFromProgram=O,t.createUniformSetters=E,t.createUniformBlockSpecFromProgram=L,t.createUniformBlockInfoFromProgram=w,t.createUniformBlockInfo=function(e,t,r){return w(e,t.program,t.uniformBlockSpec,r)},t.createTransformFeedback=function(e,t,r){var a=e.createTransformFeedback();return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,a),e.useProgram(t.program),I(e,t,r),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),function(e,t,r){for(var a in t.transformFeedbackInfo&&(t=t.transformFeedbackInfo),r.attribs&&(r=r.attribs),r){var n=t[a];n&&e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,n.index,null)}}(e,t,r),a},t.createTransformFeedbackInfo=M,t.bindTransformFeedbackInfo=I,t.setAttributes=R,t.setBuffersAndAttributes=function(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(R(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.indices))},t.setUniforms=function e(t,r){for(var a=t.uniformSetters||t,n=arguments.length,o=1;o<n;++o){var i=arguments[o];if(Array.isArray(i))for(var s=i.length,A=0;A<s;++A)e(a,i[A]);else for(var u in i){var l=a[u];l&&l(i[u])}}},t.setUniformBlock=function(e,t,r){b(e,t,r)&&e.bufferData(e.UNIFORM_BUFFER,r.array,e.DYNAMIC_DRAW)},t.setBlockUniforms=function(e,t){var r=e.uniforms;for(var a in t){var n=r[a];if(n){var o=t[a];o.length?n.set(o):n[0]=o}}},t.bindUniformBlock=b;var C=a(r(3)),G=a(r(0)),D=function(e){return e&&e.__esModule?e:{default:e}}(r(1)),N=G.error,B=G.warn,F=D.default&&D.default.document&&D.default.document.getElementById?D.default.document.getElementById.bind(D.default.document):function(){return null},V={};V[5126]={Type:Float32Array,size:4,setter:function(e,t){return function(r){e.uniform1f(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1fv(t,r)}}},V[35664]={Type:Float32Array,size:8,setter:function(e,t){return function(r){e.uniform2fv(t,r)}}},V[35665]={Type:Float32Array,size:12,setter:function(e,t){return function(r){e.uniform3fv(t,r)}}},V[35666]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniform4fv(t,r)}}},V[5124]={Type:Int32Array,size:4,setter:o,arraySetter:i},V[35667]={Type:Int32Array,size:8,setter:s},V[35668]={Type:Int32Array,size:12,setter:A},V[35669]={Type:Int32Array,size:16,setter:u},V[5125]={Type:Uint32Array,size:4,setter:function(e,t){return function(r){e.uniform1ui(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1uiv(t,r)}}},V[36294]={Type:Uint32Array,size:8,setter:function(e,t){return function(r){e.uniform2uiv(t,r)}}},V[36295]={Type:Uint32Array,size:12,setter:function(e,t){return function(r){e.uniform3uiv(t,r)}}},V[36296]={Type:Uint32Array,size:16,setter:function(e,t){return function(r){e.uniform4uiv(t,r)}}},V[35670]={Type:Uint32Array,size:4,setter:o,arraySetter:i},V[35671]={Type:Uint32Array,size:8,setter:s},V[35672]={Type:Uint32Array,size:12,setter:A},V[35673]={Type:Uint32Array,size:16,setter:u},V[35674]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}}},V[35675]={Type:Float32Array,size:36,setter:function(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}}},V[35676]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}}},V[35685]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}}},V[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}}},V[35687]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}}},V[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}}},V[35689]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}}},V[35690]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}}},V[35678]={Type:null,size:0,setter:l,arraySetter:c,bindPoint:3553},V[35680]={Type:null,size:0,setter:l,arraySetter:c,bindPoint:34067},V[35679]={Type:null,size:0,setter:l,arraySetter:c,bindPoint:32879},V[35682]={Type:null,size:0,setter:l,arraySetter:c,bindPoint:3553},V[36289]={Type:null,size:0,setter:l,arraySetter:c,bindPoint:35866},V[36292]={Type:null,size:0,setter:l,arraySetter:c,bindPoint:35866},V[36293]={Type:null,size:0,setter:l,arraySetter:c,bindPoint:34067},V[36298]={Type:null,size:0,setter:l,arraySetter:c,bindPoint:3553},V[36299]={Type:null,size:0,setter:l,arraySetter:c,bindPoint:32879},V[36300]={Type:null,size:0,setter:l,arraySetter:c,bindPoint:34067},V[36303]={Type:null,size:0,setter:l,arraySetter:c,bindPoint:35866},V[36306]={Type:null,size:0,setter:l,arraySetter:c,bindPoint:3553},V[36307]={Type:null,size:0,setter:l,arraySetter:c,bindPoint:32879},V[36308]={Type:null,size:0,setter:l,arraySetter:c,bindPoint:34067},V[36311]={Type:null,size:0,setter:l,arraySetter:c,bindPoint:35866};var k={};k[5126]={size:4,setter:d},k[35664]={size:8,setter:d},k[35665]={size:12,setter:d},k[35666]={size:16,setter:d},k[5124]={size:4,setter:p},k[35667]={size:8,setter:p},k[35668]={size:12,setter:p},k[35669]={size:16,setter:p},k[5125]={size:4,setter:f},k[36294]={size:8,setter:f},k[36295]={size:12,setter:f},k[36296]={size:16,setter:f},k[35670]={size:4,setter:p},k[35671]={size:8,setter:p},k[35672]={size:12,setter:p},k[35673]={size:16,setter:p},k[35674]={size:4,setter:h,count:2},k[35675]={size:9,setter:h,count:3},k[35676]={size:16,setter:h,count:4};var X=void 0,H=/^[ \t]*\n/,U=["VERTEX_SHADER","FRAGMENT_SHADER"],W=/\[\d+\]\.$/},function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function n(e,t){var r=U[e];if(!r)throw"unknown internal format";var a=r.bytesPerElementMap[t];if(void 0===a)throw"unknown internal format";return a}function o(e){var t=U[e];if(!t)throw"unknown internal format";return{format:t.e,type:Array.isArray(t.type)?t.type[0]:t.type}}function i(e){return 0==(e&e-1)}function s(e,t,r,a){if(!O.isWebGL2(e))return i(t)&&i(r);var n=U[a];if(!n)throw"unknown internal format";return n.t&&n.r}function A(e,t,r){return B(t)?C.getGLTypeForTypedArray(t):r||e.UNSIGNED_BYTE}function u(e,t,r,a,n){if(n%1!=0)throw"can't guess dimensions";if(r||a){if(a){if(!r&&(r=n/a)%1)throw"can't guess dimensions"}else if((a=n/r)%1)throw"can't guess dimensions"}else{var o=Math.sqrt(n/(t===e.TEXTURE_CUBE_MAP?6:1));o%1==0?(r=o,a=o):(r=n,a=1)}return{width:r,height:a}}function l(e){N.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function c(e,t){void 0!==t.colorspaceConversion&&(Y.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.colorspaceConversion)),void 0!==t.premultiplyAlpha&&(Y.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha)),void 0!==t.flipY&&(Y.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY))}function d(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,Y.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,Y.flipY)}function p(e){Y.unpackAlignment=e.getParameter(e.UNPACK_ALIGNMENT),O.isWebGL2(e)&&(Y.unpackRowLength=e.getParameter(e.UNPACK_ROW_LENGTH),Y.unpackImageHeight=e.getParameter(e.UNPACK_IMAGE_HEIGHT),Y.unpackSkipPixels=e.getParameter(e.UNPACK_SKIP_PIXELS),Y.unpackSkipRows=e.getParameter(e.UNPACK_SKIP_ROWS),Y.unpackSkipImages=e.getParameter(e.UNPACK_SKIP_IMAGES))}function f(e){e.pixelStorei(e.UNPACK_ALIGNMENT,Y.unpackAlignment),O.isWebGL2(e)&&(e.pixelStorei(e.UNPACK_ROW_LENGTH,Y.unpackRowLength),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,Y.unpackImageHeight),e.pixelStorei(e.UNPACK_SKIP_PIXELS,Y.unpackSkipPixels),e.pixelStorei(e.UNPACK_SKIP_ROWS,Y.unpackSkipRows),e.pixelStorei(e.UNPACK_SKIP_IMAGES,Y.unpackSkipImages))}function h(e,t,r,a){a.minMag&&(r.call(e,t,e.TEXTURE_MIN_FILTER,a.minMag),r.call(e,t,e.TEXTURE_MAG_FILTER,a.minMag)),a.min&&r.call(e,t,e.TEXTURE_MIN_FILTER,a.min),a.mag&&r.call(e,t,e.TEXTURE_MAG_FILTER,a.mag),a.wrap&&(r.call(e,t,e.TEXTURE_WRAP_S,a.wrap),r.call(e,t,e.TEXTURE_WRAP_T,a.wrap),(t===e.TEXTURE_3D||G.isSampler(e,t))&&r.call(e,t,e.TEXTURE_WRAP_R,a.wrap)),a.wrapR&&r.call(e,t,e.TEXTURE_WRAP_R,a.wrapR),a.wrapS&&r.call(e,t,e.TEXTURE_WRAP_S,a.wrapS),a.wrapT&&r.call(e,t,e.TEXTURE_WRAP_T,a.wrapT),a.minLod&&r.call(e,t,e.TEXTURE_MIN_LOD,a.minLod),a.maxLod&&r.call(e,t,e.TEXTURE_MAX_LOD,a.maxLod),a.baseLevel&&r.call(e,t,e.TEXTURE_BASE_LEVEL,a.baseLevel),a.maxLevel&&r.call(e,t,e.TEXTURE_MAX_LEVEL,a.maxLevel)}function v(e,t,r){var a=r.target||e.TEXTURE_2D;e.bindTexture(a,t),h(e,a,e.texParameteri,r)}function g(e,t,r){h(e,t,e.samplerParameteri,r)}function y(e,t){var r=e.createSampler();return g(e,r,t),r}function m(e,t,r,a,n,o,i){r=r||N.textureOptions,o=o||e.RGBA,i=i||e.UNSIGNED_BYTE;var A=r.target||e.TEXTURE_2D;if(a=a||r.width,n=n||r.height,e.bindTexture(A,t),s(e,a,n,o))e.generateMipmap(A);else{var u=function(e){var t=U[e];if(!t)throw"unknown internal format";return t.r}(o)?e.LINEAR:e.NEAREST;e.texParameteri(A,e.TEXTURE_MIN_FILTER,u),e.texParameteri(A,e.TEXTURE_MAG_FILTER,u),e.texParameteri(A,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(A,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}}function x(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function S(e,t){return(t=t||{}).cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function _(e,t){var r=S(e,t),a=r.map(function(e,t){return{face:e,ndx:t}});return a.sort(function(e,t){return e.face-t.face}),a}function T(e,t,r,a){var n=(a=a||N.textureOptions).target||e.TEXTURE_2D,i=a.level||0,s=r.width,A=r.height,u=a.internalFormat||a.format||e.RGBA,l=o(u),h=a.format||l.format,g=a.type||l.type;if(c(e,a),e.bindTexture(n,t),n===e.TEXTURE_CUBE_MAP){var y,S,T=r.width,E=r.height;if(T/6===E)y=E,S=[0,0,1,0,2,0,3,0,4,0,5,0];else if(E/6===T)y=T,S=[0,0,0,1,0,2,0,3,0,4,0,5];else if(T/3==E/2)y=T/3,S=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(T/2!=E/3)throw"can't figure out cube map from element: "+(r.src?r.src:r.nodeName);y=T/2,S=[0,0,1,0,0,1,1,1,0,2,1,2]}F?(F.canvas.width=y,F.canvas.height=y,s=y,A=y,_(e,a).forEach(function(t){var a=S[2*t.ndx+0]*y,n=S[2*t.ndx+1]*y;F.drawImage(r,a,n,y,y,0,0,y,y),e.texImage2D(t.face,i,u,h,g,F.canvas)}),F.canvas.width=1,F.canvas.height=1):D.default.createImageBitmap&&(s=y,A=y,_(e,a).forEach(function(o){var l=S[2*o.ndx+0]*y,p=S[2*o.ndx+1]*y;e.texImage2D(o.face,i,u,y,y,0,h,g,null),D.default.createImageBitmap(r,l,p,y,y,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(r){c(e,a),e.bindTexture(n,t),e.texImage2D(o.face,i,u,h,g,r),d(e,a),x(a)&&m(e,t,a,s,A,u,g)})}))}else if(n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY){var M=Math.min(r.width,r.height),I=Math.max(r.width,r.height),L=I/M;if(L%1!=0)throw"can not compute 3D dimensions of element";var w=r.width===I?1:0,b=r.height===I?1:0;p(e),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.pixelStorei(e.UNPACK_ROW_LENGTH,r.width),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(e.UNPACK_SKIP_IMAGES,0),e.texImage3D(n,i,u,M,M,M,0,h,g,null);for(var P=0;P<L;++P){var R=P*M*w,O=P*M*b;e.pixelStorei(e.UNPACK_SKIP_PIXELS,R),e.pixelStorei(e.UNPACK_SKIP_ROWS,O),e.texSubImage3D(n,i,0,0,P,M,M,1,h,g,r)}f(e)}else e.texImage2D(n,i,u,h,g,r);d(e,a),x(a)&&m(e,t,a,s,A,u,g),v(e,t,a)}function E(){}function M(e){return D.default.ImageBitmap&&e instanceof D.default.ImageBitmap||D.default.ImageData&&e instanceof D.default.ImageData||D.default.HTMLElement&&e instanceof D.default.HTMLElement}function I(e,t,r){return M(e)?(setTimeout(function(){r(null,e)}),e):function(e,t,r){var a;if(r=r||E,D.default.Image){a=new D.default.Image,void 0!==(t=void 0!==t?t:N.crossOrigin)&&(a.crossOrigin=t);var n=function(){a.removeEventListener("error",o),a.removeEventListener("load",i),a=null},o=function(){var t="couldn't load image: "+e;G.error(t),r(t,a),n()},i=function(){r(null,a),n()};return a.addEventListener("error",o),a.addEventListener("load",i),a.src=e,a}if(D.default.ImageBitmap){var s,A,u=function(){r(s,A)},l={};t&&(l.mode="cors"),fetch(e,l).then(function(e){if(!e.ok)throw e;return e.blob()}).then(function(e){return D.default.createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(e){A=e,setTimeout(u)}).catch(function(e){s=e,setTimeout(u)}),a=null}return a}(e,t,r)}function L(e,t,r){var a=(r=r||N.textureOptions).target||e.TEXTURE_2D;if(e.bindTexture(a,t),!1!==r.color){var n=function(e){return e=e||N.textureColor,B(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}(r.color);if(a===e.TEXTURE_CUBE_MAP)for(var o=0;o<6;++o)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,n);else a===e.TEXTURE_3D||a===e.TEXTURE_2D_ARRAY?e.texImage3D(a,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,n):e.texImage2D(a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,n)}}function w(e,t,r,a){return a=a||E,r=r||N.textureOptions,L(e,t,r),I((r=Object.assign({},r)).src,r.crossOrigin,function(n,o){n?a(n,t,o):(T(e,t,o,r),a(null,t,o))})}function b(e,t,r,a){var i=(a=a||N.textureOptions).target||e.TEXTURE_2D;e.bindTexture(i,t);var s=a.width,l=a.height,h=a.depth,v=a.level||0,g=a.internalFormat||a.format||e.RGBA,y=o(g),m=a.format||y.format,x=a.type||A(e,r,y.type);if(B(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{var S=C.getTypedArrayTypeForGLType(x);r=new S(r)}var T,E=n(g,x),M=r.byteLength/E;if(M%1)throw"length wrong size for format: "+O.glEnumToString(e,m);if(i===e.TEXTURE_3D)if(s||l||h)!s||l&&h?!l||s&&h?(T=u(e,i,s,l,M/h),s=T.width,l=T.height):(T=u(e,i,s,h,M/l),s=T.width,h=T.height):(T=u(e,i,l,h,M/s),l=T.width,h=T.height);else{var I=Math.cbrt(M);if(I%1!=0)throw"can't guess cube size of array of numElements: "+M;s=I,l=I,h=I}else T=u(e,i,s,l,M),s=T.width,l=T.height;if(p(e),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment||1),c(e,a),i===e.TEXTURE_CUBE_MAP){var L=E/r.BYTES_PER_ELEMENT,w=M/6*L;_(e,a).forEach(function(t){var a=w*t.ndx,n=r.subarray(a,a+w);e.texImage2D(t.face,v,g,s,l,0,m,x,n)})}else i===e.TEXTURE_3D?e.texImage3D(i,v,g,s,l,h,0,m,x,r):e.texImage2D(i,v,g,s,l,0,m,x,r);return d(e,a),f(e),{width:s,height:l,depth:h,type:x}}function P(e,t,r){var a=r.target||e.TEXTURE_2D;e.bindTexture(a,t);var n=r.level||0,i=r.internalFormat||r.format||e.RGBA,s=o(i),A=r.format||s.format,u=r.type||s.type;if(c(e,r),a===e.TEXTURE_CUBE_MAP)for(var l=0;l<6;++l)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+l,n,i,r.width,r.height,0,A,u,null);else a===e.TEXTURE_3D?e.texImage3D(a,n,i,r.width,r.height,r.depth,0,A,u,null):e.texImage2D(a,n,i,r.width,r.height,0,A,u,null);d(e,r)}function R(e,t,r){r=r||E,t=t||N.textureOptions;var a=e.createTexture(),n=t.target||e.TEXTURE_2D,i=t.width||1,s=t.height||1,A=t.internalFormat||e.RGBA,u=o(A),l=t.type||u.type;e.bindTexture(n,a),n===e.TEXTURE_CUBE_MAP&&(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));var p=t.src;if(p)if("function"==typeof p&&(p=p(e,t)),"string"==typeof p)w(e,a,t,r);else if(B(p)||Array.isArray(p)&&("number"==typeof p[0]||Array.isArray(p[0])||B(p[0]))){var f=b(e,a,p,t);i=f.width,s=f.height,l=f.type}else if(Array.isArray(p)&&("string"==typeof p[0]||M(p[0])))n===e.TEXTURE_CUBE_MAP?function(e,t,r,a){function n(n){return function(o,i){--v,o?g.push(o):i.width!==i.height?g.push("cubemap face img is not a square: "+i.src):(c(e,r),e.bindTexture(f,t),5===v?S(e).forEach(function(t){e.texImage2D(t,s,A,l,p,i)}):e.texImage2D(n,s,A,l,p,i),d(e,r),x(r)&&e.generateMipmap(f)),0===v&&a(g.length?g:void 0,t,h)}}a=a||E;var i=r.src;if(6!==i.length)throw"there must be 6 urls for a cubemap";var s=r.level||0,A=r.internalFormat||r.format||e.RGBA,u=o(A),l=r.format||u.format,p=r.type||e.UNSIGNED_BYTE,f=r.target||e.TEXTURE_2D;if(f!==e.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";L(e,t,r),r=Object.assign({},r);var h,v=6,g=[],y=S(e,r);h=i.map(function(e,t){return I(e,r.crossOrigin,n(y[t]))})}(e,a,t,r):function(e,t,r,a){function n(n){return function(o,i){if(--h,o)v.push(o);else{if(c(e,r),e.bindTexture(p,t),_){_=!1,y=r.width||i.width,m=r.height||i.height,e.texImage3D(p,g,s,y,m,S,0,u,l,null);for(var A=0;A<S;++A)e.texSubImage3D(p,g,0,0,A,y,m,1,u,l,i)}else{var T=i;i.width===y&&i.height===m||(T=F.canvas,F.canvas.width=y,F.canvas.height=m,F.drawImage(i,0,0,y,m)),e.texSubImage3D(p,g,0,0,n,y,m,1,u,l,T),T===F.canvas&&(F.canvas.width=0,F.canvas.height=0)}d(e,r),x(r)&&e.generateMipmap(p)}0===h&&a(v.length?v:void 0,t,f)}}a=a||E;var i=r.src,s=r.internalFormat||r.format||e.RGBA,A=o(s),u=r.format||A.format,l=r.type||e.UNSIGNED_BYTE,p=r.target||e.TEXTURE_2D_ARRAY;if(p!==e.TEXTURE_3D&&p!==e.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";L(e,t,r),r=Object.assign({},r);var f,h=i.length,v=[],g=r.level||0,y=r.width,m=r.height,S=i.length,_=!0;f=i.map(function(e,t){return I(e,r.crossOrigin,n(t))})}(e,a,t,r);else{if(!M(p))throw"unsupported src type";T(e,a,p,t),i=p.width,s=p.height}else P(e,a,t);return x(t)&&m(e,a,t,i,s,A,l),v(e,a,t),a}t.__esModule=!0,t.setTextureDefaults_=function(e){G.copyExistingProperties(e,N),e.textureColor&&l(e.textureColor)},t.createSampler=y,t.createSamplers=function(e,t){var r={};return Object.keys(t).forEach(function(a){r[a]=y(e,t[a])}),r},t.setSamplerParameters=g,t.createTexture=R,t.setEmptyTexture=P,t.setTextureFromArray=b,t.loadTextureFromUrl=w,t.setTextureFromElement=T,t.setTextureFilteringForSize=m,t.setTextureParameters=v,t.setDefaultTextureColor=l,t.createTextures=function(e,t,r){function a(){0===n&&setTimeout(function(){r(o.length?o:void 0,i,s)},0)}r=r||E;var n=0,o=[],i={},s={};return Object.keys(t).forEach(function(r){var A,u=t[r];(function(e){return"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]})(u.src)&&(A=function(e,t,i){s[r]=i,--n,e&&o.push(e),a()},++n),i[r]=R(e,u,A)}),a(),i},t.resizeTexture=function(e,t,r,a,n){a=a||r.width,n=n||r.height;var i=r.target||e.TEXTURE_2D;e.bindTexture(i,t);var s,u=r.level||0,l=r.internalFormat||r.format||e.RGBA,c=o(l),d=r.format||c.format,p=r.src;if(s=p&&(B(p)||Array.isArray(p)&&"number"==typeof p[0])?r.type||A(e,p,c.type):r.type||c.type,i===e.TEXTURE_CUBE_MAP)for(var f=0;f<6;++f)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+f,u,l,a,n,0,d,s,null);else e.texImage2D(i,u,l,a,n,0,d,s,null)},t.getNumComponentsForFormat=function(e){var t=X[e];if(!t)throw"unknown format: "+e;return t.a},t.getBytesPerElementForInternalFormat=n;var O=a(r(3)),C=a(r(2)),G=a(r(0)),D=function(e){return e&&e.__esModule?e:{default:e}}(r(1)),N={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},B=C.isArrayBuffer,F=D.default.document&&D.default.document.createElement?D.default.document.createElement("canvas").getContext("2d"):null,V=6407,k=33319,X={},H=X;H[6406]={a:1},H[6409]={a:1},H[6410]={a:2},H[V]={a:3},H[6408]={a:4},H[6403]={a:1},H[36244]={a:1},H[k]={a:2},H[33320]={a:2},H[V]={a:3},H[36248]={a:3},H[6408]={a:4},H[36249]={a:4},H[6402]={a:1},H[34041]={a:2};var U={},W=U;W[6406]={e:6406,t:!0,r:!0,u:[1,2,2,4],type:[5121,5131,36193,5126]},W[6409]={e:6409,t:!0,r:!0,u:[1,2,2,4],type:[5121,5131,36193,5126]},W[6410]={e:6410,t:!0,r:!0,u:[2,4,4,8],type:[5121,5131,36193,5126]},W[V]={e:V,t:!0,r:!0,u:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},W[6408]={e:6408,t:!0,r:!0,u:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},W[33321]={e:6403,t:!0,r:!0,u:1,type:5121},W[36756]={e:6403,t:!1,r:!0,u:1,type:5120},W[33325]={e:6403,t:!1,r:!0,u:[4,2],type:[5126,5131]},W[33326]={e:6403,t:!1,r:!1,u:4,type:5126},W[33330]={e:36244,t:!0,r:!1,u:1,type:5121},W[33329]={e:36244,t:!0,r:!1,u:1,type:5120},W[33332]={e:36244,t:!0,r:!1,u:2,type:5123},W[33331]={e:36244,t:!0,r:!1,u:2,type:5122},W[33334]={e:36244,t:!0,r:!1,u:4,type:5125},W[33333]={e:36244,t:!0,r:!1,u:4,type:5124},W[33323]={e:k,t:!0,r:!0,u:2,type:5121},W[36757]={e:k,t:!1,r:!0,u:2,type:5120},W[33327]={e:k,t:!1,r:!0,u:[8,4],type:[5126,5131]},W[33328]={e:k,t:!1,r:!1,u:8,type:5126},W[33336]={e:33320,t:!0,r:!1,u:2,type:5121},W[33335]={e:33320,t:!0,r:!1,u:2,type:5120},W[33338]={e:33320,t:!0,r:!1,u:4,type:5123},W[33337]={e:33320,t:!0,r:!1,u:4,type:5122},W[33340]={e:33320,t:!0,r:!1,u:8,type:5125},W[33339]={e:33320,t:!0,r:!1,u:8,type:5124},W[32849]={e:V,t:!0,r:!0,u:3,type:5121},W[35905]={e:V,t:!1,r:!0,u:3,type:5121},W[36194]={e:V,t:!0,r:!0,u:[3,2],type:[5121,33635]},W[36758]={e:V,t:!1,r:!0,u:3,type:5120},W[35898]={e:V,t:!1,r:!0,u:[12,6,4],type:[5126,5131,35899]},W[35901]={e:V,t:!1,r:!0,u:[12,6,4],type:[5126,5131,35902]},W[34843]={e:V,t:!1,r:!0,u:[12,6],type:[5126,5131]},W[34837]={e:V,t:!1,r:!1,u:12,type:5126},W[36221]={e:36248,t:!1,r:!1,u:3,type:5121},W[36239]={e:36248,t:!1,r:!1,u:3,type:5120},W[36215]={e:36248,t:!1,r:!1,u:6,type:5123},W[36233]={e:36248,t:!1,r:!1,u:6,type:5122},W[36209]={e:36248,t:!1,r:!1,u:12,type:5125},W[36227]={e:36248,t:!1,r:!1,u:12,type:5124},W[32856]={e:6408,t:!0,r:!0,u:4,type:5121},W[35907]={e:6408,t:!0,r:!0,u:4,type:5121},W[36759]={e:6408,t:!1,r:!0,u:4,type:5120},W[32855]={e:6408,t:!0,r:!0,u:[4,2,4],type:[5121,32820,33640]},W[32854]={e:6408,t:!0,r:!0,u:[4,2],type:[5121,32819]},W[32857]={e:6408,t:!0,r:!0,u:4,type:33640},W[34842]={e:6408,t:!1,r:!0,u:[16,8],type:[5126,5131]},W[34836]={e:6408,t:!1,r:!1,u:16,type:5126},W[36220]={e:36249,t:!0,r:!1,u:4,type:5121},W[36238]={e:36249,t:!0,r:!1,u:4,type:5120},W[36975]={e:36249,t:!0,r:!1,u:4,type:33640},W[36214]={e:36249,t:!0,r:!1,u:8,type:5123},W[36232]={e:36249,t:!0,r:!1,u:8,type:5122},W[36226]={e:36249,t:!0,r:!1,u:16,type:5124},W[36208]={e:36249,t:!0,r:!1,u:16,type:5125},W[33189]={e:6402,t:!0,r:!1,u:[2,4],type:[5123,5125]},W[33190]={e:6402,t:!0,r:!1,u:4,type:5125},W[36012]={e:6402,t:!0,r:!1,u:4,type:5126},W[35056]={e:34041,t:!0,r:!1,u:4,type:34042},W[36013]={e:34041,t:!0,r:!1,u:4,type:36269},Object.keys(W).forEach(function(e){var t=W[e];if(t.bytesPerElementMap={},Array.isArray(t.u))t.u.forEach(function(e,r){var a=t.type[r];t.bytesPerElementMap[a]=e});else{var r=t.type;t.bytesPerElementMap[r]=t.u}});var Y={}},function(e,t,r){"use strict";t.__esModule=!0;var a=r(7);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(t[e]=a[e])})},function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function n(e,t){l.glEnumToString(e,0);var r=e.getExtension(t);if(r){var a={},n=g.exec(t)[1],o="_"+n;for(var i in r){var s=r[i],A="function"==typeof s,c=A?n:o,d=i;i.endsWith(c)&&(d=i.substring(0,i.length-c.length)),void 0!==e[d]?A||e[d]===s||u.warn(d,e[d],s,i):A?e[d]=function(e){return function(){return e.apply(r,arguments)}}(s):(e[d]=s,a[d]=s)}a.constructor={name:r.constructor.name},l.glEnumToString(a,0)}return r}function o(e){for(var t=0;t<y.length;++t)n(e,y[t])}t.__esModule=!0;var i={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0};t.addExtensionsToContext=o,t.getContext=function(e,t){return function(e,t){for(var r=["webgl2","webgl","experimental-webgl"],a=null,n=0;n<r.length;++n)if(a=e.getContext(r[n],t)){v.addExtensionsToContext&&o(a);break}return a}(e,t)},t.getWebGLContext=function(e,t){return function(e,t){for(var r=["webgl","experimental-webgl"],a=null,n=0;n<r.length;++n)if(a=e.getContext(r[n],t)){v.addExtensionsToContext&&o(a);break}return a}(e,t)},t.resizeCanvasToDisplaySize=function(e,t){t=t||1,t=Math.max(0,t);var r=e.clientWidth*t|0,a=e.clientHeight*t|0;return(e.width!==r||e.height!==a)&&(e.width=r,e.height=a,!0)},t.setDefaults=function(e){u.copyExistingProperties(e,v),s.setAttributeDefaults_(e),A.setTextureDefaults_(e)};var s=a(r(8));Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(t[e]=s[e]))});var A=a(r(5));Object.keys(A).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(t[e]=A[e]))});var u=a(r(0)),l=a(r(3));Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(t[e]=l[e]))});var c=r(9);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(t[e]=c[e]))});var d=r(10);Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(t[e]=d[e]))});var p=r(4);Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(t[e]=p[e]))});var f=r(2);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(t[e]=f[e]))});var h=r(11);Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(t[e]=h[e]))});var v={addExtensionsToContext:!0},g=/^(.*?)_/,y=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"]},function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function n(e,t,r,a,n){e.bindBuffer(t,r),e.bufferData(t,a,n||e.STATIC_DRAW)}function o(e,t,r,a){if(f.isBuffer(e,t))return t;r=r||e.ARRAY_BUFFER;var o=e.createBuffer();return n(e,r,o,t,a),o}function i(e){return"indices"===e}function s(e){return e.length?e:e.data}function A(e,t){var r;if(r=v.test(e)?2:g.test(e)?4:3,t%r>0)throw"Can not guess numComponents for attribute '"+e+"'. Tried "+r+" but "+t+" values is not evenly divisible by "+r+". You should specify it.";return r}function u(e,t){return e.numComponents||e.size||A(t,s(e).length)}function l(e,t){if(p.isArrayBuffer(e))return e;if(p.isArrayBuffer(e.data))return e.data;Array.isArray(e)&&(e={data:e});var r=e.type;return r||(r=i(t)?Uint16Array:Float32Array),new r(e.data)}function c(e,t){var r={};return Object.keys(t).forEach(function(a){if(!i(a)){var n=t[a],s=n.attrib||n.name||n.attribName||h.attribPrefix+a;if(n.value){if(!Array.isArray(n.value)&&!p.isArrayBuffer(n.value))throw new Error("array.value is not array or typedarray");r[s]={value:n.value}}else{var c,d,f,v;if(n.buffer&&n.buffer instanceof WebGLBuffer)c=n.buffer,v=n.numComponents||n.size,d=n.type,f=n.normalize;else if("number"==typeof n||"number"==typeof n.data){var g=n.data||n,y=n.type||Float32Array,m=g*y.BYTES_PER_ELEMENT;d=p.getGLTypeForTypedArrayType(y),f=void 0!==n.normalize?n.normalize:function(e){return e===Int8Array||e===Uint8Array}(y),v=n.numComponents||n.size||A(a,g),c=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,m,n.drawType||e.STATIC_DRAW)}else{var x=l(n,a);c=o(e,x,void 0,n.drawType),d=p.getGLTypeForTypedArray(x),f=void 0!==n.normalize?n.normalize:function(e){return e instanceof Int8Array||e instanceof Uint8Array}(x),v=u(n,a)}r[s]={buffer:c,numComponents:v,type:d,normalize:f,stride:n.stride||0,offset:n.offset||0,divisor:void 0===n.divisor?void 0:n.divisor,drawType:n.drawType}}}}),e.bindBuffer(e.ARRAY_BUFFER,null),r}function d(e,t,r){var a="indices"===r?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;return o(e,l(t,r),a)}t.__esModule=!0,t.createAttribsFromArrays=c,t.createBuffersFromArrays=function(e,t){var r={};return Object.keys(t).forEach(function(a){r[a]=d(e,t[a],a)}),t.indices?(r.numElements=t.indices.length,r.elementType=p.getGLTypeForTypedArray(l(t.indices),"indices")):r.numElements=function(e){var t,r;for(r=0;r<y.length&&!((t=y[r])in e);++r);r===y.length&&(t=Object.keys(e)[0]);var a=e[t],n=s(a).length,o=u(a,t),i=n/o;if(n%o>0)throw"numComponents "+o+" not correct for length "+n;return i}(t),r},t.createBufferFromArray=d,t.createBufferFromTypedArray=o,t.createBufferInfoFromArrays=function(e,t,r){var a=c(e,t),n=Object.assign({},r||{});n.attribs=Object.assign({},r?r.attribs:{},a);var i=t.indices;if(i){var s=l(i,"indices");n.indices=o(e,s,e.ELEMENT_ARRAY_BUFFER),n.numElements=s.length,n.elementType=p.getGLTypeForTypedArray(s)}else n.numElements||(n.numElements=function(e,t){var r,a;for(a=0;a<y.length&&!((r=y[a])in t)&&!((r=h.attribPrefix+r)in t);++a);a===y.length&&(r=Object.keys(t)[0]);var n=t[r];e.bindBuffer(e.ARRAY_BUFFER,n.buffer);var o=e.getBufferParameter(e.ARRAY_BUFFER,e.BUFFER_SIZE);e.bindBuffer(e.ARRAY_BUFFER,null);var i=function(e,t){return t===e.BYTE?1:t===e.UNSIGNED_BYTE?1:t===e.SHORT?2:t===e.UNSIGNED_SHORT?2:t===e.INT?4:t===e.UNSIGNED_INT?4:t===e.FLOAT?4:0}(e,n.type),s=o/i,A=n.numComponents||n.size,u=s/A;if(u%1!=0)throw"numComponents "+A+" not correct for length "+length;return u}(e,n.attribs));return n},t.setAttribInfoBufferFromArray=function(e,t,r,a){r=l(r),void 0!==a?(e.bindBuffer(e.ARRAY_BUFFER,t.buffer),e.bufferSubData(e.ARRAY_BUFFER,a,r)):n(e,e.ARRAY_BUFFER,t.buffer,r,t.drawType)},t.setAttributePrefix=function(e){h.attribPrefix=e},t.setAttributeDefaults_=function(e){f.copyExistingProperties(e,h)},t.getNumComponents_=u,t.getArray_=s;var p=a(r(2)),f=a(r(0)),h={attribPrefix:""},v=/coord|texture/i,g=/color|colour/i,y=["position","positions","a_position"]},function(e,t,r){"use strict";function a(e,t,r,a,n,o){r=void 0===r?e.TRIANGLES:r;var i=t.indices,s=t.elementType,A=void 0===a?t.numElements:a;n=void 0===n?0:n,s||i?void 0!==o?e.drawElementsInstanced(r,A,void 0===s?e.UNSIGNED_SHORT:t.elementType,n,o):e.drawElements(r,A,void 0===s?e.UNSIGNED_SHORT:t.elementType,n):void 0!==o?e.drawArraysInstanced(r,n,A,o):e.drawArrays(r,n,A)}t.__esModule=!0,t.drawBufferInfo=a,t.drawObjectList=function(e,t){var r=null,o=null;t.forEach(function(t){if(!1!==t.active){var i=t.programInfo,s=t.vertexArrayInfo||t.bufferInfo,A=!1,u=void 0===t.type?e.TRIANGLES:t.type;i!==r&&(r=i,e.useProgram(i.program),A=!0),(A||s!==o)&&(o&&o.vertexArrayObject&&!s.vertexArrayObject&&e.bindVertexArray(null),o=s,n.setBuffersAndAttributes(e,i,s)),n.setUniforms(i,t.uniforms),a(e,s,u,t.count,t.offset,t.instanceCount)}}),o.vertexArrayObject&&e.bindVertexArray(null)};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}(r(4))},function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function n(e){return l[e]}function o(e){return c[e]}t.__esModule=!0,t.bindFramebufferInfo=function(e,t,r){r=r||e.FRAMEBUFFER,t?(e.bindFramebuffer(r,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(r,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))},t.createFramebufferInfo=function(e,t,r,a){var l=e.FRAMEBUFFER,c=e.createFramebuffer();e.bindFramebuffer(l,c),r=r||e.drawingBufferWidth,a=a||e.drawingBufferHeight;var d=0,p={framebuffer:c,attachments:[],width:r,height:a};return(t=t||u).forEach(function(t){var u=t.attachment,c=t.format,f=n(c);if(f||(f=A+d++),!u)if(o(c))u=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,u),e.renderbufferStorage(e.RENDERBUFFER,c,r,a);else{var h=Object.assign({},t);h.width=r,h.height=a,void 0===h.auto&&(h.auto=!1,h.min=h.min||h.minMag||e.LINEAR,h.mag=h.mag||h.minMag||e.LINEAR,h.wrapS=h.wrapS||h.wrap||e.CLAMP_TO_EDGE,h.wrapT=h.wrapT||h.wrap||e.CLAMP_TO_EDGE),u=i.createTexture(e,h)}if(s.isRenderbuffer(e,u))e.framebufferRenderbuffer(l,f,e.RENDERBUFFER,u);else{if(!s.isTexture(e,u))throw"unknown attachment type";e.framebufferTexture2D(l,f,t.texTarget||e.TEXTURE_2D,u,t.level||0)}p.attachments.push(u)}),p},t.resizeFramebufferInfo=function(e,t,r,a,n){a=a||e.drawingBufferWidth,n=n||e.drawingBufferHeight,t.width=a,t.height=n,(r=r||u).forEach(function(r,o){var A=t.attachments[o],u=r.format;if(s.isRenderbuffer(e,A))e.bindRenderbuffer(e.RENDERBUFFER,A),e.renderbufferStorage(e.RENDERBUFFER,u,a,n);else{if(!s.isTexture(e,A))throw"unknown attachment type";i.resizeTexture(e,A,r,a,n)}})};var i=a(r(5)),s=a(r(0)),A=36064,u=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],l={34041:33306,6401:36128,36168:36128,6402:36096,33189:36096},c={32854:!0,32855:!0,36194:!0,34041:!0,33189:!0,6401:!0,36168:!0}},function(e,t,r){"use strict";function a(e,t,r,a){var o=e.createVertexArray();return e.bindVertexArray(o),n.setAttributes(t,r),a&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bindVertexArray(null),o}t.__esModule=!0,t.createVertexArrayInfo=function(e,t,r){var a=e.createVertexArray();return e.bindVertexArray(a),t.length||(t=[t]),t.forEach(function(t){n.setBuffersAndAttributes(e,t,r)}),e.bindVertexArray(null),{numElements:r.numElements,elementType:r.elementType,vertexArrayObject:a}},t.createVAOAndSetAttributes=a,t.createVAOFromBufferInfo=function(e,t,r){return a(e,t.attribSetters||t,r.attribs,r.indices)};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}(r(4))}])}]);